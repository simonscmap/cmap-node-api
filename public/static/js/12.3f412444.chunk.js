(this.webpackJsonpcmap_react=this.webpackJsonpcmap_react||[]).push([[12],{654:function(e,a,t){"use strict";a.a={default:{title:"Simons Collaborative Marine Ocean Atlas",description:"Simons Collaborative Marine Atlas Project is an open-source data portal interconnecting data sets across Oceanography disciplines. It enables scientists and the public to dive into the vast and often underutilized ocean datasets to retrieve custom subsets of data."},visualization:{title:"CMAP Data Visualization",description:"Generate scatter plots, heatmaps, cruise routes, and more using oceanographic data from from CMAP datasets."},catalog:{title:"CMAP Catalog",description:"Search for oceanographic datasets in the CMAP database using keywords, or temporal or spatial coverage."},dataSubmission:{title:"CMAP Data Submission",description:"Validate and submit your dataset. Track the progress of your previous submissions."},community:{title:"CMAP Community",description:"Join the CMAP team on slack, follow us on github, or download the CMAP software package for Python, R, Julia, or MATLAB."}}},657:function(e,a,t){"use strict";var n=[5,15,25,35,45,55,65,75.005,85.025,95.095,105.31,115.87,127.15,139.74,154.47,172.4,194.735,222.71,257.47,299.93,350.68,409.93,477.47,552.71,634.735,722.4,814.47,909.74,1007.155,1105.905,1205.535,1306.205,1409.15,1517.095,1634.175,1765.135,1914.15,2084.035,2276.225,2491.25,2729.25,2990.25,3274.25,3581.25,3911.25,4264.25,4640.25,5039.25,5461.25,5906.25],r=[.494024991989,1.54137504101,2.64566898346,3.81949496269,5.07822418213,6.44061422348,7.92956018448,9.5729970932,11.404999733,13.4671401978,15.8100700378,18.4955596924,21.5988197327,25.2114105225,29.4447307587,34.4341506958,40.3440513611,47.3736915588,55.764289856,65.8072662354,77.8538513184,92.3260726929,109.729301453,130.666000366,155.850692749,186.125595093,222.475204468,266.040313721,318.127410889,380.213012695,453.937713623,541.088928223,643.566772461,763.333129883,902.339294434,1062.43994141,1245.29101562,1452.25097656,1684.28405762,1941.89294434,2225.07788086,2533.3359375,2865.70288086,3220.82006836,3597.03198242,3992.48388672,4405.22412109,4833.29101562,5274.78417969,5727.91699219],o=new Set(["tblPisces_NRT","tblPisces_NRT_Calendar"]),l=new Set(["tblDarwin_Chl_Climatology","tblDarwin_Ecosystem","tblDarwin_Nutrient","tblDarwin_Nutrient_Climatology","tblDarwin_Ocean_Color","tblDarwin_Phytoplankton","tblDarwin_Plankton_Climatology"]),s={count:function(e,a,t){var s=e.data.Table_Name,i=0;if(o.has(s))for(var c=0;c<r.length&&!(r[c]>t);c++)r[c]>a&&i++;else if(l.has(s))for(var p=0;p<n.length&&!(n[p]>t);p++)n[p]>a&&i++;return i},piscesTable:o,darwinTable:l,piscesDepths:r,darwinDepths:n};a.a=s},667:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(42),l=t(38),s=t(89),i=t(574),c=t(15),p={showLoginDialog:t(5).l};a.a=Object(o.b)(null,p)(Object(c.a)((function(e){return{loginRequiredMessage:{marginTop:e.spacing(10),color:"white"}}}))((function(e){var a=e.classes,t=e.showLoginDialog;return Object(n.useEffect)((function(){t()})),r.a.createElement(s.a,{className:a.loginRequiredMessage},"This feature requires a user account. Please ",r.a.createElement(i.a,{component:l.b,to:{pathname:window.location.pathname},onClick:function(){return e.showLoginDialog()}}," log in")," or ",r.a.createElement(i.a,{component:l.b,to:{pathname:"/register"}}," register"),".")})))},670:function(e,a,t){"use strict";var n=t(76),r=t(0),o=t.n(r),l=t(250),s=t(574),i=t(820),c=t(821),p=t(874),u=t(15),m=t(641),d=t(739),h=t(33);a.a=Object(u.a)((function(e){return{menuOpenIcon:{color:h.a.primary,margin:"0 8px 0 4px"},formGroupWrapper:{textAlign:"left",paddingLeft:"20px"},multiSelectHeader:{fontSize:"13px",margin:"6px 0px 2px 0px"},formControlLabelRoot:{height:"30px"},formControlLabelLabel:{fontSize:"14px"},checkboxGroupHeader:{"&:hover":{backgroundColor:h.a.greenHover},cursor:"pointer",height:"38px",boxShadow:"0px 0px 0px 1px #242424",marginTop:"8px"}}}))((function(e){var a=e.classes,t=e.selectedOptions,r=e.handleClear,u=e.options,h=e.parentStateKey,g=e.handleClickCheckbox,b=e.groupHeaderLabel,f=o.a.useState(!1),x=Object(n.a)(f,2),v=x[0],y=x[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{item:!0,xs:12,container:!0,alignItems:"center",className:a.checkboxGroupHeader,onClick:function(){return y(!v)}},v?o.a.createElement(m.a,{className:a.menuOpenIcon}):o.a.createElement(d.a,{className:a.menuOpenIcon}),b),v?o.a.createElement(l.a,{item:!0,xs:12,className:a.formGroupWrapper},t.size?o.a.createElement(l.a,{item:!0,container:!0,cs:12,justify:"flex-start",className:a.multiSelectHeader},o.a.createElement("span",{style:{marginRight:"8px"}},t.size," Selected "),o.a.createElement(s.a,{component:"button",onClick:r},"Reset")):"",o.a.createElement(i.a,null,u.map((function(e,n){return o.a.createElement(l.a,{item:!0,xs:12,key:n},o.a.createElement(c.a,{control:o.a.createElement(p.a,{color:"primary",onChange:g,className:a.checkbox,size:"small",name:h+"!!"+e,checked:t.has(e)}),label:e,classes:{root:a.formControlLabelRoot,label:a.formControlLabelLabel}}))})))):"")}))},930:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),o=t(22),l=t(3),s=t(47),i=t(48),c=t(78),p=t(77),u=t(0),m=t.n(u),d=t(42),h=t(34),g=t(73),b=t.n(g),f=t(144),x=t(116),v=t(15),y=(t(667),t(76)),S=t(684),E=t(876),C=t(660),O=t(589),A=t(891),w=t(89),D=t(249),N=t(587),T=t(649),L=t(895),M=t(250),k=t(636),P=t(248),j=t(929),z=t(585),I=t(892),R=t(893),_=t(706),F=t(894),V=t(739),B=t(896),H=t(897),G=t(898),Y=t(899),W=t(900),U=t(18),q=t(33),$={depth:{depthOneIsLower:"Cannot be larger than end",depthOneOutOfBounds:"Data ends at $",depthTwoOutOfBounds:"Data begins at $",negative:"Cannot be negative"},date:{dateOneIsLater:"Cannot be after end",dateOneOutOfBounds:"Data ends at $",dateTwoOutOfBounds:"Data begins at $"},lat:{latOneIsHigher:"Cannot be larger than end",latOneOutOfBounds:"Data ends at $",latTwoOutOfBounds:"Data begins at $"},lon:{lonOneIsHigher:"Cannot be larger than end",lonOneOutOfBounds:"Data ends at $",lonTwoOutOfBounds:"Data begins at $"},type:{dataIsIrregular:"$ is not available for sparse data",dateRangeRequired:"$ requires a range of dates",depthRangeRequired:"$ requires a range of depths",surfaceOnlyDataset:"$ contains only surface data",irregularOnly:"Sparse map is only available for sparse data",dataSizeTooLarge:"Data set is too large for this visualization type.",webGLContextLimit:"Rendering limit exceeded for plots. Please delete one or more."},generic:{invalid:"Invalid input",dataSizeWarning:"Wait time and application performance may be poor due to size of data.",dataSizePrevent:"Data set is too large. Please reduce date range or area size.",variableMissing:"Please select a variable",vizTypeMissing:"Please select a visualization type",guestMaximumReached:"Guests are limited to creating 10 plots per day. Please log in or register."}},K=t(890),Q=t(569),Z=t(572),J=t(573),X=t(635),ee=t(677),ae=t(680),te=t(678),ne=t(679),re=t(737),oe=t(24),le=t(43),se={variableFetch:oe.J},ie=Object(d.b)((function(e,a){return{data:e.variableDetails}}),se)(Object(v.a)((function(e){return{dialogPaper:{backgroundColor:q.a.backgroundGray,width:"700px"},closeIcon:{display:"inline",float:"right",cursor:"pointer"}}}))((function(e){var a=e.data,t=e.classes,n=e.variableFetch,r=e.variableDetailsID,o=e.handleSetVariableDetailsID;m.a.useEffect((function(){n(r)}),[r]);var l=function(e){e.stopPropagation(),o(null),n(null)};return r?m.a.createElement(Q.a,{style:{zIndex:le.a.NON_HELP_DIALOG},open:Boolean(r),onClose:l,PaperProps:{className:t.dialogPaper}},m.a.createElement(Z.a,null,a?a.Long_Name:m.a.createElement(re.a,null)," ",m.a.createElement(K.a,{className:t.closeIcon,color:"primary",onClick:l})),m.a.createElement(J.a,null,a?m.a.createElement(m.a.Fragment,null,m.a.createElement(X.a,null,a.Comment?a.Comment:""),m.a.createElement(ee.a,{size:"small"},m.a.createElement(ae.a,null,m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Dataset"),m.a.createElement(ne.a,{title:a.Dataset_Name},a.Dataset_Name.length>25?a.Dataset_Name.slice(0,23)+"...":a.Dataset_Name)),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Table Name"),m.a.createElement(ne.a,{title:a.Table_Name},a.Table_Name>25?a.Table_Name.slice(0,23)+"...":a.Table_Name)),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Source"),m.a.createElement(ne.a,{title:a.Data_Source},a.Data_Source>25?a.Data_Source.slice(0,23)+"...":a.Data_Source)),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Distributor"),m.a.createElement(ne.a,{title:a.Distributor},a.Distributor.length>25?a.Distributor.slice(0,23)+"...":a.Distributor)),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Sensor"),m.a.createElement(ne.a,null,a.Sensor)),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Spatial Resolution"),m.a.createElement(ne.a,null,a.Spatial_Resolution)),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Temporal Resolution"),m.a.createElement(ne.a,null,a.Temporal_Resolution)),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Temporal Coverage Begin"),m.a.createElement(ne.a,null,a.Time_Min?a.Time_Min.slice(0,10):"Irregular")),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Temporal Coverage End"),m.a.createElement(ne.a,null,a.Time_Max?a.Time_Max.slice(0,10):"Irregular")),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Lat Coverage Begin"),m.a.createElement(ne.a,null,"".concat(a.Lat_Min,"\xb0"))),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Lat Coverage End"),m.a.createElement(ne.a,null,"".concat(a.Lat_Max,"\xb0"))),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Lon Coverage Begin"),m.a.createElement(ne.a,null,"".concat(a.Lon_Min,"\xb0"))),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Lon Coverage End"),m.a.createElement(ne.a,null,"".concat(a.Lon_Max,"\xb0"))),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Depth Coverage Begin"),m.a.createElement(ne.a,null,a.Depth_Max?"".concat(a.Depth_Min,"(m)"):"Surface Only")),m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Depth Coverage End"),m.a.createElement(ne.a,null,a.Depth_Max?"".concat(a.Depth_Max,"(m)"):"Surface Only")),void 0!==a.Variable_Min?m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Minimum Value(",a.Unit,")"),m.a.createElement(ne.a,null,a.Variable_Min)):"",void 0!==a.Variable_Max?m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Maximum Value(",a.Unit,")"),m.a.createElement(ne.a,null,a.Variable_Max)):"",void 0!==a.Variable_Mean?m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Mean Value(",a.Unit,")"),m.a.createElement(ne.a,null,a.Variable_Mean)):"",void 0!==a.Variable_Std?m.a.createElement(te.a,null,m.a.createElement(ne.a,null,"Standard Deviation(",a.Unit,")"),m.a.createElement(ne.a,null,a.Variable_Std)):""))," "):m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{variant:"h1"}," ",m.a.createElement(re.a,null)," "),m.a.createElement(re.a,{width:500,height:600})))):""}))),ce=t(90),pe=function(e){return{[ce.a.threeMinutes]:1,[ce.a.sixHourly]:1,[ce.a.daily]:1,[ce.a.weekly]:7,[ce.a.monthly]:30,[ce.a.annual]:365,[ce.a.irregular]:null,[ce.a.monthlyClimatology]:30,[ce.a.threeDay]:3,[ce.a.eightDayRunning]:8,[ce.a.eightDays]:8}[e]},ue=t(263),me=t(82),de=t(5),he=function(e){var a=new Date(e),t=a.getUTCFullYear(),n=a.getUTCMonth(),r=a.getUTCDate(),o=new Date;return o.setFullYear(t,n,r),o},ge=t(657),be=function(e){var a=0;return e.forEach((function(e){e.subType===f.a.heatmap&&a++,e.subType===f.a.sparse&&(a++,e.data.variableValues.length>1e4&&(a+=3)),e.subType===f.a.depthProfile&&e.data.variableValues.length>1e4&&a++,e.subType===f.a.timeSeries&&e.data.variableValues.length>1e4&&a++})),a},fe=t(577),xe=t(593),ve=t(642),ye=t(376),Se=t(590),Ee=Object(v.a)((function(e){return{vizTypeSelectFormControl:{width:"100%","&:disabled":{backgroundColor:"transparent"}},vizTypeMenu:{backgroundColor:q.a.backgroundGray},vizTypeMenuItem:{"&:hover":{backgroundColor:q.a.greenHover}},visualizeButton:{textTransform:"none",height:"56px",borderRadius:0,backgroundColor:q.a.backgroundGray,color:e.palette.primary.main,fontVariant:"normal","&:disabled":{backgroundColor:"transparent"},"&:hover":{backgroundColor:q.a.greenHover,color:"white"}},vizButtonTooltip:{color:"yellow"}}}))((function(e){var a=e.classes,t=e.overrideDisabledStyle,n=e.heatmapMessage,r=e.contourMessage,o=e.sectionMapMessage,l=e.histogramMessage,s=e.timeSeriesMessage,i=e.depthProfileMessage,c=e.sparseMapMessage,p=e.visualizeButtonTooltip,u=e.disableVisualizeMessage,d=e.selectedVizType,h=e.handleChangeInputValue,g=e.handleVisualize,b=e.disabled;return m.a.createElement(m.a.Fragment,null,m.a.createElement(M.a,{container:!0},m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(fe.a,{variant:"filled",className:a.vizTypeSelectFormControl},m.a.createElement(xe.a,{shrink:!0,htmlFor:"vizSelector",style:b?{color:"rgba(0,0,0,.38)"}:{}},"Select Chart Type"),m.a.createElement(Se.a,{disabled:b,className:a.vizTypeSelectFormControl,style:t,value:d,variant:"filled",onChange:h,inputProps:{name:"selectedVizType",id:"vizSelector",variant:"filled"},MenuProps:{MenuListProps:{className:a.vizTypeMenu}}},!n&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.heatmap,title:n},"Heatmap"),!r&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.contourMap},"Contour Heatmap"),!o&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.sectionMap},"Section Map"),!o&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.contourSectionMap},"Contour Section Map"),!l&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.histogram},"Histogram"),!s&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.timeSeries},"Time Series"),!i&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.depthProfile},"Depth Profile"),!c&&m.a.createElement(ve.a,{className:a.vizTypeMenuItem,value:f.a.sparse},"Time and Space Plots")))),m.a.createElement(D.a,{placement:"right",title:p,className:a.vizButtonTooltip},m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(ye.a,{className:a.visualizeButton,variant:"contained",onClick:function(){return g()},disabled:Boolean(u)||!d||b,fullWidth:!0},"Create Visualization")))))})),Ce={backgroundColor:"transparent"},Oe={cruiseTrajectoryRequestSend:oe.j,clearCharts:oe.b,csvDownloadRequestSend:oe.m,snackbarOpen:de.n},Ae=function(e){if(isNaN(new Date(e)).valueOf())return"yyyy-MM-dd";var a=e.getMonth()+1,t=e.getDate();return[e.getFullYear(),a<10?"0"+a:a,t<10?"0"+t:t].join("-")},we=m.a.createRef(),De=m.a.createRef(),Ne=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).componentDidUpdate=function(a,t){if(we.current&&we.current.resetAfterIndex(0),e.props.children&&e.props.children.length){var n=0,r=!1;e.props.children.forEach((function(e){if(!r){for(var a=37,t=!1,o=0;o<e.props.children.length;o++){if(e.props.children[o].props.isFocused){r=!0,t=!0;break}a+=37.6}n+=t?a:37.6}})),r&&we.current.scrollTo(n>150?n-150:0)}},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props,a=e.options,t=e.children,n=e.getValue;if(!t||!t.length)return"";var r=n(),o=Object(y.a)(r,1)[0],s=35*a.indexOf(o),i=t.map((function(e){return e.props.children.some((function(e){return e.props.isFocused}))?37.6*e.props.children.length+37:37})),c=i.reduce((function(e,a){return e+a}),0),p=c/t.length;return m.a.createElement(C.b,{height:c<400?c:400,estimatedItemSize:p,itemCount:t.length,itemSize:function(e){return i[e]},initialScrollOffset:s||0,ref:we},(function(e){var a=e.index,n=e.style;return m.a.createElement("div",{style:Object(l.a)({},n)},t[a])}))}}]),t}(u.Component),Te=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props.children.some((function(e){return e.props.isFocused})),a=this.props.children[0].props.data.data.Sensor;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Le,Object.assign({},this.props.headingProps,{headingLabel:this.props.data.label,firstChild:this.props.children[0].props.data,hasFocus:e,sensor:a,tableName:this.props.children[0].props.data.data.Table_Name,selectProps:this.props.selectProps})),m.a.createElement("div",{hidden:!e},this.props.children.map((function(e){return e}))))}}]),t}(u.Component),Le=Object(v.a)((function(e){return{customHeading:{backgroundColor:"rgba(0,0,0,.5)",height:37,"&:hover":{backgroundColor:q.a.greenHover},boxShadow:"0px 1px 1px 1px #242424"},icon:{marginRight:"10px",width:"30px"},typography:{width:"650px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}}))((function(e){var a,t=e.classes,n=e.sensor,r=e.selectProps;return a="Satellite"===n?"fa-satellite":"Blend"===n?"fa-laptop":"fa-ship",m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,{button:!0,alignItems:"center",onClick:function(){return De.current.select.setState({focusedOption:e.hasFocus?null:e.firstChild})},className:t.customHeading},m.a.createElement(A.a,{fontSize:"small",color:"inherit",className:"fas ".concat(a," ").concat(t.icon)}),m.a.createElement(w.a,{className:t.typography},e.headingLabel.length>70?e.headingLabel.slice(0,67)+"...":e.headingLabel),r.datasets[e.headingLabel]&&m.a.createElement(D.a,{title:"Dataset Info",placement:"left"},m.a.createElement(N.a,{color:"inherit",onClick:function(a){window.open(window.location.protocol+"//"+window.location.host+"/catalog/datasets/"+r.datasets[e.headingLabel].Dataset_Name),a.stopPropagation()}},m.a.createElement(z.a,null))),r.cart[e.headingLabel]?m.a.createElement(D.a,{title:"This Dataset Is on Your Favorites List",placement:"right"},m.a.createElement(I.a,null)):""))})),Me=function(e){return m.a.createElement(S.z.DropdownIndicator,e,m.a.createElement(R.a,null))},ke=function(e){return m.a.createElement(S.z.Menu,Object.assign({},e,{className:"react-select-menu-cmap"}))},Pe=function(e){return m.a.createElement(S.z.Option,Object.assign({},e,{innerProps:Object(l.a)(Object(l.a)({},e.innerProps),{},{onMouseMove:function(e){return e.preventDefault()},onMouseOver:function(e){return e.preventDefault()}})}))},je=function(e){return""},ze=function(e){return m.a.createElement(S.z.SingleValue,Object.assign({},e,{children:null}),e.data.label)},Ie={display:"inline-block",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"15px",marginRight:"32px",width:"calc(60% - 32px)",textAlign:"left"},Re=Object(l.a)(Object(l.a)({},Ie),{},{marginRight:"24px",width:"calc(15% - 24px)"}),_e=Object(l.a)(Object(l.a)({},Ie),{},{textAlign:"right",marginRight:"0px",width:"25%"}),Fe=function(e,a){return m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{style:Ie},e.label),m.a.createElement("span",{style:Re},"Irregular"===e.data.Spatial_Resolution?"Irregular":"Gridded"),m.a.createElement("span",{style:_e},e.data.Data_Source))},Ve=function(e){return m.a.createElement(S.z.ValueContainer,e,m.a.createElement(_.a,{style:{position:"absolute",left:6,color:q.a.primary}}),e.children)},Be="charts",He="cruises",Ge="bites",Ye="bottomControl",We=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).componentDidUpdate=function(e){e.catalog&&e.catalog.length||!n.props.catalog||!n.props.catalog.length||n.state.search.addDocuments(n.props.catalog),e.cruiseList&&e.cruiseList.length||!n.props.cruiseList||!n.props.cruiseList.length||n.state.search.addDocuments(n.props.cruiseList)},n.handleOpenControlPanel=function(){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{showControlPanel:!0}))},n.handleCloseControlPanel=function(){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{showControlPanel:!1}))},n.handleVariableDetailsDialogClose=function(){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{VariableDetailsDialogIsOpen:!1}))},n.handleVariableDetailsDialogOpen=function(e){e.stopPropagation(),n.setState(Object(l.a)(Object(l.a)({},n.state),{},{VariableDetailsDialogIsOpen:!0}))},n.getSelectOptionsFromCatalogItems=function(e){var a=n.props.cart,t={};return e.forEach((function(e){1==e.Visualize&&(t[e.Dataset_Name]||(t[e.Dataset_Name]={label:e.Dataset_Name,options:[]}),t[e.Dataset_Name].options.push({value:e.Variable,label:e.Long_Name.length<80?e.Long_Name:e.Long_Name.slice(0,78)+"...",data:e}))})),Object.values(t).sort((function(e,t){return a[e.label]&&a[t.label]?e.label<t.label?-1:1:a[e.label]?-1:a[t.label]?1:e.label<t.label?-1:1}))},n.estimateCsvSize=function(e){var a=0;return n.props.catalog.forEach((function(t,n){t.Dataset_Name===e&&(a+=parseInt(t.Variable_Count)||0)})),a},n.handleResetSPParams=function(){n.props.resetSPParams(),n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchField:""}))},n.onAutoSuggestChange=function(e,a){"input-change"===a.action&&(n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchField:e})),De.current.select.setState({focusedOption:-1})),"escape-clear"===a.action&&(n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchField:e})),De.current.select.setState({focusedOption:-1}))},n.estimateDataSize=function(){var e=n.props,a=e.dt1,t=e.dt2,r=e.lat1,o=e.lat2,l=e.lon1,s=e.lon2,i=e.fields,c=e.depth1,p=e.depth2,u=e.selectedVizType;if(!i)return 0;if(i.data.Spatial_Resolution===me.a.irregular)return 0;if(u===f.a.timeSeries||u===f.a.depthProfile)return 0;var m=Date.parse(a),d=(Date.parse(t)-m)/864e5,h=Object(ue.a)(i.data.Spatial_Resolution),g=Math.floor(d/pe(i.data.Temporal_Resolution))||1;return(s-l)/h*((o-r)/h)*(ge.a.count(i,c,p)||1)*g},n.checkStartDepth=function(){return n.props.surfaceOnly?"":/^[-+]?[0-9]*\.?[0-9]+$/.test(n.props.depth1)?parseFloat(n.props.depth1)<0?$.depth.negative:parseFloat(n.props.depth1)>parseFloat(n.props.depth2)?$.depth.depthOneIsLower:parseFloat(n.props.depth1)>parseFloat(n.props.fields.data.Depth_Max)?$.depth.depthOneOutOfBounds.replace("$",parseFloat(n.props.fields.data.Depth_Max).toFixed(2)):"":$.generic.invalid},n.checkEndDepth=function(){return n.props.surfaceOnly?"":/^[-+]?[0-9]*\.?[0-9]+$/.test(n.props.depth2)?parseFloat(n.props.depth2)<0?$.depth.negative:parseFloat(n.props.depth1)>parseFloat(n.props.depth2)?$.depth.depthOneIsLower:parseFloat(n.props.depth2)<parseFloat(n.props.fields.data.Depth_Min)?$.depth.depthTwoOutOfBounds.replace("$",parseFloat(n.props.fields.data.Depth_Min).toFixed(2)):"":$.generic.invalid},n.checkStartDateValid=function(){if(isNaN(new Date(n.props.dt1)).valueOf()||!n.props.dt1)return"Start date is invalid"},n.checkEndDateValid=function(){if(isNaN(new Date(n.props.dt2)).valueOf()||!n.props.dt1)return"End date is invalid"},n.checkStartDate=function(){return n.props.dt1>n.props.dt2?$.date.dateOneIsLater:n.props.dt1>n.props.fields.data.Time_Max?$.date.dateOneOutOfBounds.replace("$",n.props.fields.data.Time_Max):""},n.checkEndDate=function(){return n.props.dt2<n.props.fields.data.Time_Min?$.date.dateTwoOutOfBounds.replace("$",n.props.fields.data.Time_Min):""},n.checkStartLat=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(n.props.lat1)?parseFloat(n.props.lat1)<-90||parseFloat(n.props.lat1)>90?$.generic.invalid:parseFloat(n.props.lat1)>parseFloat(n.props.lat2)?$.lat.latOneIsHigher:parseFloat(n.props.lat1)>parseFloat(n.props.fields.data.Lat_Max)?$.lat.latOneOutOfBounds.replace("$",n.props.fields.data.Lat_Max):"":$.generic.invalid},n.checkEndLat=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(n.props.lat2)?parseFloat(n.props.lat2)<-90||parseFloat(n.props.lat2)>90?$.generic.invalid:parseFloat(n.props.lat2)<parseFloat(n.props.fields.data.Lat_Min)?$.lat.latTwoOutOfBounds.replace("$",n.props.fields.data.Lat_Min):"":$.generic.invalid},n.checkStartLon=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(n.props.lon1)?parseFloat(n.props.lon1)<-180||parseFloat(n.props.lon1)>180?$.generic.invalid:n.props.lon1>n.props.lon2?"":parseFloat(n.props.lon1)>parseFloat(n.props.fields.data.Lon_Max)?$.lon.lonOneOutOfBounds.replace("$",n.props.fields.data.Lon_Max):"":$.generic.invalid},n.checkEndLon=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(n.props.lon2)?parseFloat(n.props.lon2)<-180||parseFloat(n.props.lon2)>180?$.generic.invalid:parseFloat(n.props.lon2)<parseFloat(n.props.fields.data.Lon_Min)?$.lon.lonTwoOutOfBounds.replace("$",n.props.fields.data.Lon_Max):"":$.generic.invalid},n.checkHeatmap=function(){return n.props.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Heatmap"):""},n.checkContour=function(){return n.props.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Contour"):""},n.checkSection=function(){return n.props.surfaceOnly?$.type.surfaceOnlyDataset.replace("$",n.props.fields.value):n.props.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Section Map"):n.props.depth1===n.props.depth2?$.type.depthRangeRequired.replace("$","Section Map"):""},n.checkHistogram=function(){return""},n.checkTimeSeries=function(){return n.props.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Time Series"):n.props.dt1===n.props.dt2?$.type.dateRangeRequired.replace("$","Time Series"):""},n.checkDepthProfile=function(){return n.props.surfaceOnly?$.type.surfaceOnlyDataset.replace("$",n.props.fields.value):n.props.depth1===n.props.depth2?$.type.depthRangeRequired.replace("$","Depth Profile"):""},n.checkSparseMap=function(){return n.props.irregularSpatialResolution?"":$.type.irregularOnly},n.checkGeneralWarn=function(e){return n.props.selectedVizType&&e>12e5?$.generic.dataSizeWarning:""},n.checkGeneralPrevent=function(e){var a=be(n.props.charts);if(n.props.selectedVizType===f.a.heatmap&&a>14)return $.type.webGLContextLimit;if(n.props.selectedVizType===f.a.sparse&&a>11)return $.type.webGLContextLimit;if(n.props.selectedVizType===f.a.heatmap&&16-a-(ge.a.count(n.props.fields,n.props.depth1,n.props.depth2)||1)<1)return"Too many distinct depths to render heatmap. Please reduce depth range or select section map.";return n.props.selectedVizType!==f.a.histogram&&n.props.selectedVizType!==f.a.heatmap&&e>12e5||e>6e6?$.generic.dataSizePrevent:n.props.fields?n.props.selectedVizType?"":$.generic.vizTypeMissing:$.generic.variableMissing},n.handleShowChartsAndResize=function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),30),n.props.handleShowCharts()},n.handleUpdateFields=function(e,a){n.props.updateFields(e),n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchField:"",lastSelectedFieldId:e?e.data.ID:n.state.lastSelectedFieldId}))},n.state={VariableDetailsDialogIsOpen:!1,searchField:"",showControlPanel:!0,lastSelectedFieldId:null,showChartControl:!1,showDataBites:!1,showBottomControl:!1,controlPanelMode:Ye},n}return Object(i.a)(t,[{key:"render",value:function(){var e,a,t=this,n=this.state,r=n.search,o=n.searchField,s=n.showControlPanel,i=this.props,c=i.classes,p=i.fields,u=i.depth1,d=i.depth2,h=i.dt1,g=i.dt2,b=i.lat1,f=i.lat2,x=i.lon1,v=i.lon2,S=i.selectedVizType,C=i.catalog,O=i.catalogRequestState,A=(i.showCharts,i.handleShowGlobe,i.handleChange),w=i.handleLatLonChange,z=i.datasets,I=(i.cruiseList,o&&C?this.getSelectOptionsFromCatalogItems(r.search(o)):C?this.getSelectOptionsFromCatalogItems(C):[]),R=this.estimateDataSize(),_=p&&he(p.data.Time_Min).setHours(0,0,0,0),$=p&&he(p.data.Time_Max).setHours(0,0,0,0),K=h.setHours(0,0,0,0),Q=g.setHours(0,0,0,0),Z=p?_:he("1900-01-01").setHours(0,0,0,0),J=p&&Q<_?"End cannot be before dataset start date":"";e=p&&$<Q?K>(a=$)?"Start cannot be after dataset end date":"":K>(a=Q)?"Start cannot be after end":"";var X=p?[this.checkStartDepth(),this.checkEndDepth(),this.checkStartLat(),this.checkEndLat(),this.checkStartLon(),this.checkEndLon(),this.checkHeatmap(),this.checkContour(),this.checkSection(),this.checkHistogram(),this.checkTimeSeries(),this.checkDepthProfile(),this.checkSparseMap(),this.checkGeneralWarn(R),this.checkGeneralPrevent(R),this.checkStartDateValid(),this.checkEndDateValid()]:Array(16).fill(""),ee=Object(y.a)(X,17),ae=ee[0],te=ee[1],ne=ee[2],re=ee[3],oe=ee[4],le=ee[5],se=ee[6],ce=ee[7],pe=ee[8],ue=ee[9],me=ee[10],de=ee[11],ge=ee[12],be=ee[13],fe=[ae,te,ne,re,oe,le,ee[14],J,e,ee[15],ee[16]],xe=0;(fe[0]||fe[1])&&xe++,(fe[2]||fe[3])&&xe++,(fe[4]||fe[5])&&xe++,(fe[7]||fe[9])&&xe++,(fe[8]||fe[10])&&xe++;var ve=xe>0?"drawerPaperError"+xe:"",ye=function(){for(var e=0;e<fe.length;e++)if(fe[e])return fe[e];return!1}(),Se=ye||(be||"");return m.a.createElement("div",null,m.a.createElement(ie,{open:this.state.VariableDetailsDialogIsOpen,onClose:this.handleVariableDetailsDialogClose,data:p&&p.data}),s?m.a.createElement(N.a,{className:c.closePanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:this.handleCloseControlPanel},m.a.createElement(F.a,null)):m.a.createElement(N.a,{className:c.openPanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:this.handleOpenControlPanel},m.a.createElement(V.a,null)),m.a.createElement(T.a,{className:c.drawer,variant:"persistent",open:s,classes:{paper:"".concat(c.drawerPaper," ").concat(c[ve])},anchor:"left"},m.a.createElement(L.a,null,m.a.createElement(D.a,{title:"Show Chart Control",placement:"top"},m.a.createElement(N.a,{className:"".concat(c.groupedButtons," ").concat(this.state.controlPanelMode===Be&&c.depressed),onClick:function(){return t.setState(Object(l.a)(Object(l.a)({},t.state),{},{controlPanelMode:Be}))},color:"inherit"},m.a.createElement(B.a,null))),m.a.createElement(D.a,{title:"Show Cruise Control",placement:"top"},m.a.createElement(N.a,{color:"inherit",onClick:function(){return t.setState(Object(l.a)(Object(l.a)({},t.state),{},{controlPanelMode:He}))},className:"".concat(c.groupedButtons," ").concat(this.state.controlPanelMode===He&&c.depressed)},m.a.createElement(H.a,null))),m.a.createElement(D.a,{title:"Show Data Bytes",placement:"top"},m.a.createElement(N.a,{color:"inherit",onClick:function(){return t.setState(Object(l.a)(Object(l.a)({},t.state),{},{controlPanelMode:Ge}))},className:"".concat(c.groupedButtons," ").concat(this.state.controlPanelMode===Ge&&c.depressed)},m.a.createElement(G.a,null))),m.a.createElement(D.a,{title:"Show Bottom Control",placement:"top"},m.a.createElement(N.a,{color:"inherit",onClick:function(){return t.setState(Object(l.a)(Object(l.a)({},t.state),{},{controlPanelMode:Ye}))},className:"".concat(c.groupedButtons," ").concat(this.state.controlPanelMode===Ye&&c.depressed)},m.a.createElement(Y.a,null)))),m.a.createElement("form",null,m.a.createElement(M.a,{container:!0},m.a.createElement(M.a,{item:!0,xs:10},m.a.createElement(E.a,{formatOptionLabel:Fe,handleVariableDetailsDialogOpen:this.handleVariableDetailsDialogOpen,isLoading:O===U.a.inProgress,onAutoSuggestChange:this.onAutoSuggestChange,datasets:z,cart:this.props.cart,components:{IndicatorSeparator:"",DropdownIndicator:Me,GroupHeading:je,Group:Te,Option:Pe,MenuList:Ne,SingleValue:ze,Menu:ke,ValueContainer:Ve},lastSelectedFieldId:this.state.lastSelectedFieldId,escapeClearsValue:!0,ref:De,onInputChange:this.onAutoSuggestChange,filterOption:null,className:c.variableSelect,isClearable:!0,inputValue:this.state.searchField,name:"fields",label:"Variables",options:I,onChange:this.handleUpdateFields,value:p,placeholder:this.state.controlPanelMode===He?"Search Cruises":this.state.controlPanelMode===Ge?"Explore Bites":"Search Catalog",styles:{menu:function(e){return Object(l.a)(Object(l.a)({},e),{},{zIndex:1300,width:"980px",maxWidth:"90vw",borderRadius:"4px",boxShadow:"2px 2px 2px 2px #242424",overflow:"hidden",backgroundColor:"rgba(0,0,0,.5)",backdropFilter:"blur(5px)"})},valueContainer:function(e){return Object(l.a)(Object(l.a)({},e),{},{padding:"0 0 0 34px",fontWeight:100})},input:function(e){return Object(l.a)(Object(l.a)({},e),{},{color:"white",fontFamily:'"Lato", sans-serif'})},control:function(e){return Object(l.a)(Object(l.a)({},e),{},{backgroundColor:q.a.backgroundGray,border:"none",borderBottom:"1px solid #333333",borderRadius:0,"&:hover":{borderColor:"white"},"&:focus-within":{borderColor:q.a.primary},height:"56px"})},placeholder:function(e){return Object(l.a)(Object(l.a)({},e),{},{fontFamily:'"Lato", sans-serif',color:q.a.primary,fontSize:"14px",fontWeight:300})},noOptionsMessage:function(e){return Object(l.a)(Object(l.a)({},e),{},{fontFamily:'"Lato", sans-serif',color:q.a.primary,backgroundColor:q.a.backgroundGray})},option:function(e,a){a.data;var t=a.isFocused;return Object(l.a)(Object(l.a)({},e),{},{fontWeight:400,fontSize:"16px",backgroundColor:"transparent",color:t?q.a.primary:"white","&:hover":{backgroundColor:q.a.greenHover}})},singleValue:function(e,a){return Object(l.a)(Object(l.a)({},e),{},{color:"white",fontWeight:400,zIndex:1290})}},theme:function(e){return Object(l.a)(Object(l.a)({},e),{},{colors:Object(l.a)({},e.colors)})}})),m.a.createElement(M.a,{item:!0,xs:2,className:c.tableStatsButton},p?m.a.createElement(D.a,{placement:"right",title:"View Variable Summary Statistics"},m.a.createElement(N.a,{size:"small",onClick:this.handleVariableDetailsDialogOpen,disabled:!p},m.a.createElement(W.a,null))):m.a.createElement(N.a,{size:"small",onClick:this.handleVariableDetailsDialogOpen,disabled:!p},m.a.createElement(W.a,null))),this.state.controlPanelMode!==Ge?m.a.createElement(m.a.Fragment,null,m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(j.a,{className:c.datePicker,placeholder:Ae(h),id:"startDate",label:"Start Date",name:"dt1",format:"yyyy-MM-dd",maxDate:a,maxDateMessage:e,autoOk:!0,value:h,onChange:this.props.handleStartDateChange,inputVariant:"filled",variant:"inline",KeyboardButtonProps:{className:c.datePickerInputAdornment}})),m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(j.a,{className:c.datePicker,placeholder:Ae(g),id:"endDate",label:"End Date",name:"dt2",format:"yyyy-MM-dd",minDate:Z,minDateMessage:J,autoOk:!0,value:g,onChange:this.props.handleEndDateChange,inputVariant:"filled",variant:"inline",KeyboardButtonProps:{className:c.datePickerInputAdornment}})),m.a.createElement(M.a,{item:!0,xs:6,className:c.formGridItem},m.a.createElement(k.a,{id:"lat1-input",error:Boolean(ne),label:"Start Lat(\xb0)",className:c.textField,value:b,onChange:w,FormHelperTextProps:{className:c.helperText},helperText:ne,name:"lat1",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),m.a.createElement(M.a,{item:!0,xs:6,className:c.formGridItem},m.a.createElement(k.a,{id:"lat2-input",error:Boolean(re),label:"End Lat(\xb0)",className:c.textField,value:f,onChange:w,FormHelperTextProps:{className:c.helperText},helperText:re,name:"lat2",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),m.a.createElement(M.a,{item:!0,xs:6,className:c.formGridItem},m.a.createElement(k.a,{id:"lon1-input",error:Boolean(oe),label:"Start Lon(\xb0)",className:c.textField,value:x,onChange:w,FormHelperTextProps:{className:c.helperText},helperText:oe,name:"lon1",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),m.a.createElement(M.a,{item:!0,xs:6,className:c.formGridItem},m.a.createElement(k.a,{id:"lon2-input",error:Boolean(le),label:"End Lon(\xb0)",className:c.textField,value:v,onChange:w,FormHelperTextProps:{className:c.helperText},helperText:le,name:"lon2",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),m.a.createElement(M.a,{item:!0,xs:6,className:c.formGridItem},m.a.createElement(k.a,{id:"depth1-input",error:Boolean(ae),label:"Start Depth(m)",className:c.textField,value:isNaN(Math.floor(1e3*u)/1e3)?u:Math.ceil(1e3*u)/1e3,onChange:A,FormHelperTextProps:{className:c.helperText},helperText:ae,name:"depth1",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),m.a.createElement(M.a,{item:!0,xs:6,className:c.formGridItem},m.a.createElement(k.a,{id:"depth2-input",error:Boolean(te),label:"End Depth(m)",className:c.textField,value:isNaN(Math.ceil(1e3*d)/1e3)?d:Math.ceil(1e3*d)/1e3,onChange:A,FormHelperTextProps:{className:c.helperText},helperText:te,name:"depth2",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}}))):"",this.state.controlPanelMode===Be?m.a.createElement(Ee,{fields:p,overrideDisabledStyle:Ce,selectedVizType:S,heatmapMessage:se,heatmapMessage:se,contourMessage:ce,sectionMapMessage:pe,sectionMapMessage:pe,histogramMessage:ue,timeSeriesMessage:me,depthProfileMessage:de,sparseMapMessage:ge,visualizeButtonTooltip:Se,disableVisualizeMessage:ye,selectedVizType:S,handleChange:this.props.handleChange,onVisualize:this.props.onVisualize,showChartControl:this.state.showChartControl}):"",m.a.createElement(P.a,{className:c.dataBitesContainer,style:this.state.showDataBites?{}:{display:"none"}},"Data Bites"),m.a.createElement(P.a,{className:c.bottomControlContainer,style:this.state.showBottomControl?{}:{display:"none"}},"Bottom Control")))))}}]),t}(m.a.Component),Ue=(Object(d.b)((function(e,a){return{data:e.data,catalog:e.catalog,catalogRequestState:e.catalogRequestState,cruiseTrajectory:e.cruiseTrajectory,showHelp:e.showHelp,datasets:e.datasets,charts:e.charts,cart:e.cart,cruiseList:e.cruiseList}}),Oe)(Object(v.a)((function(e){return{drawer:{width:320,top:32,bottom:"auto",overflow:"visible"},drawerPaper:{width:320,height:"auto",top:"calc(50% - 270px)",borderRadius:"0 4px 4px 0",boxShadow:"2px 2px  2px 2px #242424",border:"none",overflow:"visible",backgroundColor:q.a.backgroundGray},drawerPaperError1:{height:"".concat(563,"px")},drawerPaperError2:{height:"".concat(586,"px")},drawerPaperError3:{height:"".concat(609,"px")},drawerPaperError4:{height:"".concat(632,"px")},drawerPaperError5:{height:"".concat(655,"px")},openPanelChevron:{position:"fixed",left:"5px",top:"calc(50% - 8px)",zIndex:1100},closePanelChevron:{position:"fixed",left:325,top:"calc(50% - 8px)",zIndex:1100},groupedButtons:{width:"25%",border:"1px solid #313131",borderRadius:0,backgroundColor:"#3c3c3c"},controlPanelForm:{marginTop:e.spacing(1)},tableStatsButton:{borderRadius:0,paddingTop:"11px",backgroundColor:q.a.backgroundGray},formGridItem:{borderLeft:"1px solid #313131",backgroundColor:q.a.backgroundGray},vizTypeSelectFormControl:{width:"100%","&:disabled":{backgroundColor:"transparent"}},depressed:{boxShadow:"inset 1px 1px 5px #1c1c1c"},padLeft:{padding:"6px 0 2px 7px"},visualizeButton:{height:"56px",borderRadius:0,backgroundColor:q.a.backgroundGray,color:e.palette.primary.main,fontVariant:"normal","&:disabled":{backgroundColor:"transparent"},"&:hover":{backgroundColor:q.a.greenHover,color:"white"}},helperText:{color:"yellow"},vizButtonTooltip:{color:"yellow"},datePickerInputAdornment:{padding:0},clearChartsButton:{borderRadius:0,backgroundColor:"#3c3c3c",width:"100%",borderRight:"1px solid #313131"},resetSPParamsButton:{borderRadius:0,backgroundColor:"#3c3c3c",width:"100%"},datePicker:{width:"100%"},vizTypeMenu:{backgroundColor:q.a.backgroundGray},vizTypeMenuItem:{"&:hover":{backgroundColor:q.a.greenHover}},dataBitesContainer:{position:"fixed",right:"12px",bottom:"12px",height:"400px",width:"260px",backgroundColor:q.a.backgroundGray,boxShadow:"2px 2px  2px 2px #242424",paddingTop:"12px"},bottomControlContainer:{position:"fixed",height:"50px",width:"300px",bottom:"8px",right:"calc(50% - 150px)",backgroundColor:q.a.backgroundGray,boxShadow:"2px 2px  2px 2px #242424",paddingTop:"12px"}}}))(We)),t(260)),qe=t(904),$e=t(824),Ke=t(902),Qe=function(e){return{[f.a.sectionMap]:{sp:x.a.sectionMap,subType:f.a.sectionMap},[f.a.contourSectionMap]:{sp:x.a.sectionMap,subType:f.a.contourSectionMap},[f.a.timeSeries]:{sp:x.a.timeSeries,subType:f.a.timeSeries},[f.a.histogram]:{sp:x.a.spaceTime,subType:f.a.histogram},[f.a.depthProfile]:{sp:x.a.depthProfile,subType:f.a.depthProfile},[f.a.heatmap]:{sp:x.a.spaceTime,subType:f.a.heatmap},[f.a.contourMap]:{sp:x.a.spaceTime,subType:f.a.contourMap},[f.a.sparse]:{sp:x.a.spaceTime,subType:f.a.sparse}}[e]},Ze=function(e){var a=e.depth1,t=e.depth2,n=e.dt1,r=e.dt2,o=e.fields,l=e.lat1,s=e.lat2,i=e.lon1,c=e.lon2,p=e.spName,u=e.tableName;return{depth1:parseFloat(a),depth2:parseFloat(t),dt1:n,dt2:r,fields:o,lat1:parseFloat(l),lat2:parseFloat(s),lon1:parseFloat(i),lon2:parseFloat(c),spName:p,tableName:u}},Je=function(e){var a=0;return e.forEach((function(e){a+=e.data.variableValues&&e.data.variableValues.length?e.data.variableValues.length:0})),a},Xe=function(e){var a=e.Temporal_Resolution===ce.a.monthlyClimatology?1:e.Time_Min.slice(0,10),t=e.Temporal_Resolution===ce.a.monthlyClimatology?1:e.Time_Max.slice(0,10),n=Math.floor(1e3*e.Lat_Min)/1e3,r=Math.ceil(1e3*e.Lat_Max)/1e3,o=Math.floor(1e3*e.Lon_Min)/1e3,l=Math.ceil(1e3*e.Lon_Max)/1e3,s=!e.Depth_Max,i="Irregular"===e.Spatial_Resolution;return{lat1:n,lat2:r,lon1:o,lon2:l,depth1:s?0:i&&Math.floor(1e3*e.Depth_Min)/1e3||0,depth2:s?0:i?Math.ceil(1e3*e.Depth_Max)/1e3||0:ge.a.piscesTable.has(e.Table_Name)?((ge.a.piscesDepths[0]+ge.a.piscesDepths[1])/2).toFixed(2):ge.a.darwinTable.has(e.Table_Name)?((ge.a.darwinDepths[0]+ge.a.darwinDepths[1])/2).toFixed(2):11e3,dt1:a,dt2:t}},ea=t(707),aa=t(574),ta=t(581),na=t(932),ra=(t(878),t(641)),oa=t(583),la=t(686),sa=t.n(la),ia={datasetSummaryFetch:oe.o},ca=Object(d.b)((function(e,a){return{datasetSummary:e.datasetSummary}}),ia)(Object(v.a)((function(e){return{dialogPaper:{backgroundColor:q.a.backgroundGray,minWidth:"700px",maxWidth:"60vw"},markdown:{"& img":{maxWidth:"100%",margin:"20px auto 20px auto",display:"block"},"& a":{color:e.palette.primary.main,textDecoration:"none"},"& p":{lineHeight:1.25}}}}))((function(e){var a=e.datasetSummary,t=e.classes,n=e.datasetSummaryFetch,r=e.datasetSummaryID,o=e.setDatasetSummaryID;m.a.useEffect((function(){n(r)}),[r]);return m.a.createElement(Q.a,{style:{zIndex:le.a.NON_HELP_DIALOG},open:Boolean(r),onClose:function(){o(null),n(null)},PaperProps:{className:t.dialogPaper}},m.a.createElement(Z.a,null,a?a.Dataset_Long_Name:m.a.createElement(re.a,null)),m.a.createElement(J.a,null,a?m.a.createElement(sa.a,{source:a.Description,className:t.markdown}):m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,null,m.a.createElement(re.a,null)),m.a.createElement(w.a,null,m.a.createElement(re.a,null)),m.a.createElement(w.a,null,m.a.createElement(re.a,null)),m.a.createElement(w.a,null,m.a.createElement(re.a,null)))),m.a.createElement(J.a,{style:{padding:"16px 24px"}},a?m.a.createElement("span",null,"Detailed information for this dataset and its member variables is available",m.a.createElement(aa.a,{target:"_blank",href:"/catalog/datasets/".concat(a.Dataset_Name)}," here"),"."):m.a.createElement(re.a,null)))}))),pa={searchOptionsMenuList:{marginTop:"10px",maxHeight:"440px",overflow:"auto"},searchOption:{"&:hover":{backgroundColor:q.a.greenHover},cursor:"pointer",height:"38px",boxShadow:"0px 1px 1px 1px #242424",backgroundColor:"rgba(0,0,0,.4)"},searchOptionsMenuItem:{fontSize:"14px"},searchOptionsMenuItemText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"calc(100% - 36px)",textAlign:"left"},heading:{textAlign:"left",padding:"8px 6px",color:q.a.primary,fontSize:"16px",marginTop:"5px",backgroundColor:"rgba(0,0,0,.4)"},variableItem:{height:"32px",textAlign:"left",fontSize:"14px",cursor:"pointer","&:hover":{backgroundColor:q.a.greenHover}},variablesWrapper:{backgroundColor:"rgba(0,0,0,.2)",paddingTop:"8px"},memberCount:{color:q.a.primary,fontWeight:"bold"},datasetOpenIcon:{color:q.a.primary,margin:"0 8px 0 4px"},infoIcon:{color:q.a.primary,cursor:"pointer"},listHeader:{color:q.a.primary,backgroundColor:"rgba(0,0,0,.2)",textAlign:"left"},variableName:{paddingLeft:"48px"}},ua=Object(d.b)((function(e,a){return{vizSearchResultsLoadingState:e.vizSearchResultsLoadingState,cart:e.cart}}),{})(Object(v.a)(pa)(m.a.memo((function(e){var a=e.classes,t=e.options,n=e.vizSearchResultsLoadingState,r=e.handleSelectDataTarget,o=e.handleSetVariableDetailsID,l=e.setdatasetSummaryID,s=e.listRef,i=e.make,c=e.fullCount,p=e.cart,d=m.a.useState(null),h=Object(y.a)(d,2),g=h[0],b=h[1],f=function(a){if(s.current){s.current.resetAfterIndex(0);var t=s.current.state.scrollOffset,n=38*a;null!==a&&(n<t-10||n>t+e.height-20)&&setTimeout((function(){return s.current.scrollToItem(a,"start")}),10)}b(a)};Object(u.useEffect)((function(){s.current&&s.current.resetAfterIndex(0)}),[t]);var x=t.reduce((function(e,a){return e+a.variables.length}),0),v=c-t.length,S=0===v?"":" (".concat(v," hidden)");return m.a.createElement(m.a.Fragment,null,m.a.createElement(M.a,{container:!0},m.a.createElement(M.a,{item:!0,xs:9},m.a.createElement(w.a,{className:a.heading},n===U.a.inProgress?"Searching....":x?m.a.createElement(m.a.Fragment,null,i," Data - Showing ",t.length," datasets",m.a.createElement(D.a,{enterDelay:50,placement:"top",title:"Variables and datasets which are not flagged as visualizable are not shown on this list, but can be found on the catalog page."},m.a.createElement("span",null,S))):"".concat(i," Data - No variables found for current search parameters"))),m.a.createElement(M.a,{item:!0,xs:3,container:!0,justify:"flex-start",alignItems:"center"},m.a.createElement(w.a,{variant:"caption",style:{color:q.a.primary,marginBottom:"-16px"}},"Variable Count"))),m.a.createElement(C.b,{ref:s,itemData:t,itemCount:t.length,height:e.height||270,width:"100%",estimatedItemSize:38,style:{overflowY:"scroll"},itemSize:function(e){return g===e?32*t[e].variables.length+38+8:38}},(function(e){var n=e.index,s=e.style;return m.a.createElement("div",{style:s},m.a.createElement(M.a,{container:!0,className:a.searchOption,onClick:function(){return f(n===g?null:n)}},m.a.createElement(M.a,{item:!0,xs:9,container:!0,alignItems:"center"},g===n?m.a.createElement(ra.a,{className:a.datasetOpenIcon}):m.a.createElement(V.a,{className:a.datasetOpenIcon}),m.a.createElement("span",{className:a.searchOptionsMenuItemText},t[n].Dataset_Name||t[n].Dataset_Name)),m.a.createElement(D.a,{title:"Dataset contains ".concat(t[n].variables.length," variables matching the search criteria")},m.a.createElement(M.a,{item:!0,xs:1,className:a.memberCount,container:!0,alignItems:"center",justify:"center"},t[n].variables.length)),m.a.createElement(M.a,{item:!0,xs:1,style:{paddingLeft:"12px"},container:!0,alignItems:"center"},m.a.createElement(D.a,{title:"View Dataset Details"},m.a.createElement(z.a,{className:a.infoIcon,onClick:function(e){e.stopPropagation(),l(t[n].variables[0].Dataset_ID)}}))),m.a.createElement(M.a,{item:!0,xs:1,container:!0,alignItems:"center"},p[t[n].Dataset_Name]?m.a.createElement(D.a,{title:"This dataset is on your favorites list"},m.a.createElement(oa.a,null)):"")),n===g?m.a.createElement(M.a,{container:!0,className:a.variablesWrapper},t[n].variables.map((function(e,t){return m.a.createElement(M.a,{item:!0,xs:12,key:e.Long_Name,className:a.variableItem,container:!0,alignItems:"center",onClick:function(){return r(e)}},m.a.createElement(M.a,{item:!0,xs:10,className:a.variableName},e.Long_Name),m.a.createElement(M.a,{item:!0,xs:2},m.a.createElement(D.a,{title:"View Variable Details"},m.a.createElement(z.a,{onClick:function(a){a.stopPropagation(),o(e.ID)},style:{paddingLeft:"12px"},className:a.infoIcon}))))}))):"")})))})))),ma=m.a.createRef(),da=m.a.createRef(),ha=Object(d.b)((function(e,a){return{windowHeight:e.windowHeight,windowWidth:e.windowWidth,vizSearchResultsFullCounts:e.vizSearchResultsFullCounts}}),null)(Object(v.a)((function(e){return{}}))((function(e){var a=e.options,t=(e.classes,e.handleSelectDataTarget),n=(e.handleShowMemberVariables,e.vizSearchResultsLoadingState,e.make),r=(e.windowWidth,e.windowHeight),o=e.handleSetVariableDetailsID,l=e.vizSearchResultsFullCounts,s=m.a.useState(null),i=Object(y.a)(s,2),c=i[0],p=i[1];return m.a.createElement(m.a.Fragment,null,m.a.createElement(ca,{datasetSummaryID:c,setDatasetSummaryID:p}),n.has("Observation")&&n.has("Model")||0===n.size?m.a.createElement(m.a.Fragment,null,m.a.createElement(ua,{make:"Observation",options:a.Observation,handleSetVariableDetailsID:o,listRef:ma,handleSelectDataTarget:t,height:(r-204)/2-45,setdatasetSummaryID:p,fullCount:l.Observation}),m.a.createElement(ua,{make:"Model",options:a.Model,handleSetVariableDetailsID:o,listRef:da,handleSelectDataTarget:t,height:(r-204)/2-45,setdatasetSummaryID:p,fullCount:l.Model})):n.has("Observation")?m.a.createElement(ua,{make:"Observation",options:a.Observation,handleSetVariableDetailsID:o,listRef:ma,handleSelectDataTarget:t,height:r-249,setdatasetSummaryID:p,fullCount:l.Observation}):m.a.createElement(ua,{make:"Model",options:a.Model,handleSetVariableDetailsID:o,listRef:da,height:r-249,handleSelectDataTarget:t,setdatasetSummaryID:p,fullCount:l.Model}))}))),ga=t(670),ba=t(44),fa={vizSearchResultsFetch:oe.R,vizSearchResultsSetLoadingState:oe.S,variableNameAutocompleteFetch:oe.L,vizSearchResultsStore:oe.T,searchOptionsFetch:ba.r},xa={hasDepth:"any",timeStart:"1900-01-01",timeEnd:(new Date).toISOString().slice(0,10),latStart:-90,latEnd:90,lonStart:-180,lonEnd:180,sensor:new Set,searchTerms:"",temporalResolution:"Any",spatialResolution:"Any",dataSource:"Any",distributor:"Any",processLevel:"Any",make:new Set,region:new Set},va=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state=Object(l.a)({memberVariablesDataset:null,showAdvanced:!1,sensorsMenuOpen:!1,regionsMenuOpen:!1,makesMenuOpen:!1},xa),e.componentDidMount=function(){e.props.vizSearchResultsFetch({})},e.handleChangeSearchValue=function(a){e.updateStateAndSearch(Object(l.a)(Object(l.a)({},e.state),{},{[a.target.name]:a.target.value}))},e.handleChangeAutocomplete=function(a){return function(t,n){var r=Object(l.a)(Object(l.a)({},e.state),{},{[a]:n});e.updateStateAndSearch(r)}},e.updateStateAndSearch=function(a){e.props.vizSearchResultsSetLoadingState(U.a.inProgress),e.props.vizSearchResultsStore({Observation:[],Model:[]}),e.setState(a),e.props.vizSearchResultsFetch(a)},e.handleChangeSensor=function(a,t){var n=Object(l.a)(Object(l.a)({},e.state),{},{sensor:t});e.setState(n),e.props.vizSearchResultsFetch(n)},e.handleChangeMake=function(a,t){var n=Object(l.a)(Object(l.a)({},e.state),{},{make:t});e.setState(n),e.props.vizSearchResultsFetch(n)},e.handleToggleShowAdvanced=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showAdvanced:!e.state.showAdvanced}))},e.handleResetSearch=function(){var a=Object(l.a)(Object(l.a)({},e.state),xa);e.updateStateAndSearch(a)},e.handleToggleMenu=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{[a]:!e.state[a]}))},e.handleClickCheckbox=function(a,t){var n=a.target.name.split("!!"),r=Object(y.a)(n,2),o=r[0],s=r[1],i=new Set(e.state[o]);t?i.add(s):i.delete(s),e.updateStateAndSearch(Object(l.a)(Object(l.a)({},e.state),{},{[o]:i}))},e.handleClearMultiSelect=function(a){var t=Object(l.a)({},e.state);t[a]=xa[a],e.updateStateAndSearch(t)},e.render=function(){var a=e.props,t=a.classes,n=a.handleSelectDataTarget,r=a.vizSearchResults,o=(a.autocompleteVariableNames,a.submissionOptions),l=a.windowHeight,s=e.state,i=s.searchTerms,c=s.memberVariablesDataset,p=s.hasDepth,u=s.timeStart,d=s.timeEnd,h=s.latStart,g=s.latEnd,b=s.lonStart,f=s.lonEnd,x=s.temporalResolution,v=s.spatialResolution,y=s.dataSource,S=s.distributor,E=s.processLevel,C=s.make,O=s.region,A=s.sensor;return m.a.createElement(m.a.Fragment,null,m.a.createElement(M.a,{container:!0},m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(w.a,{style:{display:"inline-block"}},"Search and filter using the controls on the left. Select a variable to plot from the list on the right."),m.a.createElement(ye.a,{startIcon:m.a.createElement(K.a,{style:{fontSize:"22px"}}),onClick:e.props.handleCloseDataSearch,className:t.closeIcon},"Close")),m.a.createElement(M.a,{item:!0,xs:4,style:{overflowY:"auto",maxHeight:l-204,padding:"16px",backgroundColor:"rgba(0,0,0,.4)",display:c?"none":""}},m.a.createElement(k.a,{fullWidth:!0,name:"searchTerms",onChange:e.handleChangeSearchValue,placeholder:"Search",value:i,InputProps:{classes:{root:t.inputRoot},startAdornment:m.a.createElement(m.a.Fragment,null,m.a.createElement(ea.a,{position:"start"},m.a.createElement(_.a,{style:{color:q.a.primary}})))},variant:"outlined",inputRef:e.props.searchInputRef}),m.a.createElement(ga.a,{options:o.Make,selectedOptions:C,handleClear:function(){return e.handleClearMultiSelect("make")},parentStateKey:"make",handleClickCheckbox:e.handleClickCheckbox,groupHeaderLabel:"Makes"}),m.a.createElement(ga.a,{options:o.Sensor,selectedOptions:A,handleClear:function(){return e.handleClearMultiSelect("sensor")},parentStateKey:"sensor",handleClickCheckbox:e.handleClickCheckbox,groupHeaderLabel:"Sensors"}),m.a.createElement(ga.a,{options:o.Region,selectedOptions:O,handleClear:function(){return e.handleClearMultiSelect("region")},parentStateKey:"region",handleClickCheckbox:e.handleClickCheckbox,groupHeaderLabel:"Regions"}),m.a.createElement("div",{className:t.showAdvancedWrapper},m.a.createElement(aa.a,{component:"button",onClick:e.handleToggleShowAdvanced},e.state.showAdvanced?"Hide Additional Filters":"Additional Filters")),m.a.createElement("div",{style:e.state.showAdvanced?{}:{display:"none"}},m.a.createElement(M.a,{item:!0,container:!0,xs:12,className:t.searchPanelRow},m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(k.a,{name:"timeStart",className:t.formControl,id:"date",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:u,onChange:e.handleChangeSearchValue})),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(k.a,{name:"timeEnd",className:t.formControl,id:"date",label:"End Date",type:"date",InputLabelProps:{shrink:!0},value:d,onChange:e.handleChangeSearchValue}))),m.a.createElement(M.a,{item:!0,container:!0,xs:12,className:t.searchPanelRow},m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(k.a,{name:"latStart",className:t.formControl,label:"Lat Start\xb0",type:"number",inputProps:{min:-90,max:90},InputLabelProps:{shrink:!0},value:h,onChange:e.handleChangeSearchValue})),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(k.a,{name:"latEnd",className:t.formControl,label:"Lat End\xb0",type:"number",inputProps:{min:-90,max:90},InputLabelProps:{shrink:!0},value:g,onChange:e.handleChangeSearchValue})),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(k.a,{name:"lonStart",className:t.formControl,label:"Lon Start\xb0",type:"number",inputProps:{min:-180,max:180},InputLabelProps:{shrink:!0},value:b,onChange:e.handleChangeSearchValue})),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(k.a,{name:"lonEnd",className:t.formControl,label:"Lon End\xb0",type:"number",inputProps:{min:-180,max:180},InputLabelProps:{shrink:!0},value:f,onChange:e.handleChangeSearchValue})),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{className:t.formControl},m.a.createElement(ta.a,null,"Depth Levels"),m.a.createElement(Se.a,{value:p,onChange:e.handleChangeSearchValue,name:"hasDepth",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:le.a.CONTROL_SECONDARY}}},m.a.createElement(ve.a,{value:"any"},"Any"),m.a.createElement(ve.a,{value:"yes"},"Multiple Levels"),m.a.createElement(ve.a,{value:"no"},"Surface Only")))),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{className:t.formControl},m.a.createElement(ta.a,null,"Process Level"),m.a.createElement(Se.a,{value:E,onChange:e.handleChangeSearchValue,name:"processLevel",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:le.a.CONTROL_SECONDARY}}},e.props.submissionOptions.Process_Level.map((function(e){return m.a.createElement(ve.a,{key:e,value:e},e)}))))),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{className:t.formControl},m.a.createElement(ta.a,null,"Temporal Resolution"),m.a.createElement(Se.a,{value:x,onChange:e.handleChangeSearchValue,name:"temporalResolution",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:le.a.CONTROL_SECONDARY}}},e.props.submissionOptions.Temporal_Resolution.map((function(e){return m.a.createElement(ve.a,{key:e,value:e},e)}))))),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{className:t.formControl},m.a.createElement(ta.a,null,"Spatial Resolution"),m.a.createElement(Se.a,{value:v,onChange:e.handleChangeSearchValue,name:"spatialResolution",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:le.a.CONTROL_SECONDARY}}},e.props.submissionOptions.Spatial_Resolution.map((function(e){return m.a.createElement(ve.a,{key:e,value:e},e)}))))),m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(na.a,{options:e.props.submissionOptions.Data_Source,renderInput:function(e){return m.a.createElement(k.a,Object.assign({margin:"none"},e,{label:"Data Source",InputLabelProps:{style:{fontSize:"12px",marginTop:"4px"}}}))},getOptionLabel:function(e){return e},onChange:e.handleChangeAutocomplete("dataSource"),disablePortal:!0,classes:{paper:"".concat(t.shiftedAutocompletePaper," ").concat(t.autocompletePopperPaper," ").concat(t.addBorder," "),input:t.regionSelectorInput,option:t.autocompleteOptions,popperDisablePortal:t.shiftedAutocompletePopper,listbox:t.shiftedAutocompleteListbox},value:y})),m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(na.a,{options:e.props.submissionOptions.Distributor,renderInput:function(e){return m.a.createElement(k.a,Object.assign({margin:"none"},e,{label:"Distributor",InputLabelProps:{style:{fontSize:"12px",marginTop:"4px"}}}))},getOptionLabel:function(e){return e},onChange:e.handleChangeAutocomplete("distributor"),disablePortal:!0,classes:{paper:"".concat(t.shiftedAutocompletePaper," ").concat(t.autocompletePopperPaper," ").concat(t.addBorder," "),input:t.regionSelectorInput,option:t.autocompleteOptions,popperDisablePortal:t.shiftedAutocompletePopper,listbox:t.shiftedAutocompleteListbox},value:S})))),m.a.createElement(M.a,{item:!0,xs:12,className:t.searchPanelRow},m.a.createElement(ye.a,{variant:"outlined",onClick:e.handleResetSearch,className:t.resetButton},"Reset Filters"))),m.a.createElement(M.a,{item:!0,xs:8,style:{paddingTop:"12px"}},m.a.createElement(ha,{options:r,handleSelectDataTarget:n,handleShowMemberVariables:e.handleShowMemberVariables,make:C,variableDetailsID:e.props.variableDetailsID,handleSetVariableDetailsID:e.props.handleSetVariableDetailsID}))))},e}return t}(m.a.Component),ya=Object(d.b)((function(e,a){return{vizSearchResults:e.vizSearchResults,vizSearchResultsLoadingState:e.vizSearchResultsLoadingState,autocompleteVariableNames:e.autocompleteVariableNames,submissionOptions:e.submissionOptions,windowHeight:e.windowHeight}}),fa)(Object(v.a)((function(e){return{inputRoot:{border:"1px solid ".concat(q.a.primary)},chip:{maxWidth:"160px",color:"white",borderColor:e.palette.primary.main,marginRight:"6px",height:"28px"},autocompletePopperPaper:{backgroundColor:"black",zIndex:le.a.CONTROL_SECONDARY},autocompleteOptions:{'&[data-focus="true"]':{backgroundColor:q.a.greenHover},textAlign:"left"},searchWrapper:{position:"-webkit-sticky",position:"sticky",top:"152px",padding:"14px 20px"},chip:{maxWidth:"160px",color:"white",borderColor:e.palette.primary.main,marginRight:"6px",height:"28px"},resetButton:{textTransform:"none",width:"160px",height:"37px",color:e.palette.primary.main,borderColor:e.palette.primary.main,marginTop:"12px"},searchPanelRow:{marginTop:"10px"},depthFormControlRoot:{textAlign:"left"},formControl:{width:"90%",marginBottom:"6px"},autoComplete:{width:"calc(100% - 48px)"},searchSectionHeader:{color:e.palette.primary.main,textAlign:"left",marginBottom:"8px"},showAdvancedWrapper:{textAlign:"left",marginTop:"16px",width:"100%"},regionSelectorInput:{fontSize:"13px"},sensorInputLabel:{fontSize:"21px"},sensorTextField:{paddingTop:"8px"},popperDisablePortal:{bottom:130},addBorder:{border:"1px solid ".concat(q.a.primary)},denseGridItem:{marginTop:"4px",padding:"0px 6px"},shiftedAutocompletePopper:{height:"400px",width:"500px",position:"absolute",bottom:"190px"},shiftedAutocompletePaper:{minHeight:"400px"},shiftedAutocompleteListbox:{maxHeight:0,minHeight:"400px",overflowX:"hidden"},formControlLabelRoot:{height:"30px"},formControlLabelLabel:{fontSize:"14px"},closeIcon:{float:"right",cursor:"pointer",color:q.a.primary,textTransform:"none",fontSize:"15px"}}}))(va)),Sa=t(934),Ea=t(901),Ca={deleteChart:oe.q},Oa=(Object(d.b)((function(e,a){return{charts:e.charts}}),Ca)(Object(v.a)((function(e){return{tabsWrapper:{position:"fixed",left:0,top:70,backgroundColor:"rgba(0,0,0,.6)",boxShadow:"2px 2px  2px 2px #242424",zIndex:le.a.CONTROL_PRIMARY},tabs:{maxWidth:"100vw"},tab:{textTransform:"none",textAlign:"left",boxShadow:"0px 0px  2px 0px #242424",color:"white",opacity:1,width:"180px",maxHeight:"48px","&:not(:first-child)":{borderLeft:"3px solid #242424"}},greenHightlight:{color:q.a.primary},closeIcon:{fontSize:"20px",position:"absolute",left:156,bottom:28,color:"white",borderRadius:"20%","&:hover":{backgroundColor:q.a.greenHover}}}}))((function(e){var a=e.classes,t=e.plotsActiveTab,n=e.handlePlotsSetActiveTab,r=e.charts;return r&&r.length?m.a.createElement(P.a,{className:a.tabsWrapper},m.a.createElement(Sa.a,{className:a.tabs,value:t,onChange:n,indicatorColor:"primary",variant:"scrollable",scrollButtons:"auto"},m.a.createElement(D.a,{title:"Return to Globe View"},m.a.createElement(Ea.a,{icon:m.a.createElement(Ke.a,null),className:a.tab,classes:{selected:a.greenHightlight},wrapped:!0})),r.map((function(t,n){return m.a.createElement(D.a,{enterDelay:500,key:t.id,title:t.subType+" of "+t.data.metadata.Long_Name+" from "+t.data.metadata.Dataset_Name},m.a.createElement(Ea.a,{label:m.a.createElement("span",{style:{maxWidth:"140px"}},t.data.metadata.Long_Name.length>32?t.data.metadata.Long_Name.slice(0,30)+"...":t.data.metadata.Long_Name,m.a.createElement(D.a,{title:"Delete plot",placement:"top"},m.a.createElement(K.a,{className:a.closeIcon,onClick:function(a){return function(a,t){a.stopPropagation(),e.deleteChart(t)}(a,n)}}))),className:a.tab,classes:{selected:a.greenHightlight}}))})))):""}))),t(253),t(582)),Aa=t(375),wa=t(638),Da=t(579),Na=t(903),Ta=function(e){return{lat1:Math.floor(1e3*e.Lat_Min)/1e3,lat2:Math.ceil(1e3*e.Lat_Max)/1e3,lon1:Math.floor(1e3*e.Lon_Min)/1e3,lon2:Math.ceil(1e3*e.Lon_Max)/1e3,dt1:e.Time_Min?e.Time_Min.slice(0,10):1,dt2:e.Time_Max?e.Time_Max.slice(0,10):1,depth1:Math.floor(1e3*e.Depth_Min)/1e3||0,depth2:Math.ceil(1e3*e.Depth_Max)/1e3||0}},La=(Object(d.b)((function(e,a){return{charts:e.charts,vizPageDataTargetDetails:e.vizPageDataTargetDetails}}),{})(Object(v.a)((function(e){return{popoutButtonPaper:{position:"fixed",display:"flex",borderRadius:"2px",boxShadow:"2px 2px  2px 2px #242424",backgroundColor:q.a.backgroundGray,zIndex:le.a.CONTROL_PRIMARY},popoutButtonIcon:{width:"24px",height:"24px"},popoutButtonBase:{padding:"9px"},popperPaper:{backgroundColor:"rgba(0,0,0,.9)",backdropFilter:"blur(5px)"},dropdown:{zIndex:le.a.CONTROL_PRIMARY,top:"28px !important",left:"22px !important"}}}))((function(e){var a=e.classes,t=e.charts,n=e.handleUpdateParameters,r=e.vizPageDataTargetDetails,o=m.a.useState(null),l=Object(y.a)(o,2),s=l[0],i=l[1],c=function(e){i(null)},p=function(e){n(e),c()};return m.a.createElement(m.a.Fragment,null,m.a.createElement(P.a,{className:a.popoutButtonPaper,style:{left:281,top:270}},m.a.createElement(D.a,{title:"Parameter Quick Set Options"},m.a.createElement("span",null,m.a.createElement(N.a,{className:a.popoutButtonBase,disabled:e.disableButton},m.a.createElement(Na.a,{onClick:function(e){i(e.currentTarget)},className:a.popoutButtonIcon}))))),m.a.createElement(Oa.a,{open:Boolean(s),anchorEl:s,transition:!0,className:a.dropdown,placement:"right"},(function(e){var n=e.TransitionProps,o=e.placement;return m.a.createElement(Aa.a,Object.assign({},n,{style:{transformOrigin:"bottom"===o?"center top":"center bottom"}}),m.a.createElement(P.a,{className:a.popperPaper},m.a.createElement(wa.a,{onClickAway:c},m.a.createElement(Da.a,null,m.a.createElement(ve.a,{onClick:function(){return p(Xe(r))}},"Set Parameters to Preliminary Variable Range"),m.a.createElement(ve.a,{onClick:function(){return p(Ta(r))}},"Set Parameters to Maximum Variable Range"),m.a.createElement(ve.a,null,"Set Parameters to Match Cruise Boundaries: "),t.map((function(e){return m.a.createElement(ve.a,{onClick:function(){return p(function(e){var a=e.data.parameters,t=a.dt1,n=a.dt2;return{lat1:a.lat1,lat2:a.lat2,lon1:a.lon1,lon2:a.lon2,depth1:a.depth1,depth2:a.depth2,dt1:t?t.slice(0,10):"1900-01-01",dt2:n?n.slice(0,10):"1900-01-01"}}(e))},key:e.id},"Set Parameters to Match "+e.subType+": "+e.data.metadata.Long_Name)}))))))})))}))),{sparseDataMaxSizeNotificationUpdate:oe.z}),Ma=Object(d.b)((function(e,a){return{sparseDataMaxSizeNotificationData:e.sparseDataMaxSizeNotificationData}}),La)(Object(v.a)((function(e){return{dialogPaper:{backgroundColor:q.a.backgroundGray,minWidth:"700px",maxWidth:"60vw"},dialogContent:{padding:"20px 20px 12px 20px"},lastPointValueText:{fontSize:"13px"},lastPointValueWrapper:{backgroundColor:"rgba(0, 0, 0, .15)",padding:"8px",margin:"12px 0"},closeIcon:{fontSize:"20px",color:"white",cursor:"pointer",position:"absolute",top:2,right:2},list:{padding:"0px 0px 0px 24px"},listItem:{fontSize:"13px",padding:"3px 0px 2px 24px"}}}))((function(e){var a=e.sparseDataMaxSizeNotificationUpdate,t=e.sparseDataMaxSizeNotificationData,n=e.classes;if(null===t)return"";var r=t.time,o=(t.lat,t.lon,t.depth,function(){return a(null)});return m.a.createElement(Q.a,{onClose:o,open:Boolean(t),style:{zIndex:le.a.NON_HELP_DIALOG},PaperProps:{className:n.dialogPaper}},m.a.createElement(K.a,{className:n.closeIcon,onClick:o}),m.a.createElement(J.a,{className:n.dialogContent},m.a.createElement(w.a,null,"The data requested exceeds the maximum retrievable amount. A visualization has been created from a subset* of the data. If this does not include your data of interest, please reduce the range of the parameters in the control panel and create another visualization."),m.a.createElement("div",{className:n.lastPointValueWrapper},m.a.createElement(w.a,{style:{fontSize:"13px"}},"*The subset includes all requested data with a time before ",r.replace("T"," ").replace("Z","")," UTC. Some data with a time of exactly ",r.replace("T"," ").replace("Z","")," may not be included."))))}))),ka={cruiseTrajectoryRequestSend:oe.j,clearCharts:oe.b,csvDownloadRequestSend:oe.m,snackbarOpen:de.n,vizPageDataTargetSetAndFetchDetails:oe.Q,storedProcedureRequestSend:oe.E,sparseDataQuerySend:oe.A,guestPlotLimitNotificationSetIsVisible:oe.s},Pa={backgroundColor:"transparent"},ja={type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:[0,255,255,.3]},outline:{color:[0,255,255,1],size:"2px"}}]},za=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={variableDetailsID:null,showControlPanel:!0,dataSearchMenuOpen:!1,tableName:"",depth1:0,depth2:0,dt1:"1900-01-01",dt2:(new Date).toISOString().slice(0,10),lat1:0,lat2:0,lon1:0,lon2:0,selectedVizType:"",surfaceOnly:!1,irregularSpatialResolution:!1,addedGlobeUIListeners:!1,showDrawHelp:!1,storedParams:{depth1:0,depth2:0,dt1:"1900-01-01",dt2:(new Date).toISOString().slice(0,10),lat1:0,lat2:0,lon1:0,lon2:0}},e.searchInputRef=m.a.createRef(),e.componentDidMount=function(){e.props.user||e.props.guestPlotLimitNotificationSetIsVisible(!0)},e.componentDidUpdate=function(a,t){if(a.charts.length&&!e.props.charts.length&&e.props.handleShowGlobe(),e.props.mapContainerRef.current&&(t.lat1!==e.state.lat1||t.lat2!==e.state.lat2||t.lon1!==e.state.lon1||t.lon2!==e.state.lon2)){var n=parseFloat(e.state.lat1),r=parseFloat(e.state.lat2),o=parseFloat(e.state.lon1),s=parseFloat(e.state.lon2),i=s<o?s+360:s;e.props.mapContainerRef.current.regionLayer.removeAll();var c={type:"polygon",rings:[[o,n],[i,n],[i,r],[o,r],[o,n]]},p=new e.props.mapContainerRef.current.props.esriModules.Graphic({geometry:c,symbol:ja});e.props.mapContainerRef.current.regionLayer.add(p)}if(e.props.vizPageDataTargetDetails&&e.props.vizPageDataTargetDetails!==a.vizPageDataTargetDetails){var u=e.props.vizPageDataTargetDetails,m=!u.Depth_Max,d="Irregular"===u.Spatial_Resolution,h=Xe(u),g=h.lat1,b=h.lat2,f=h.lon1,x=h.lon2;d&&e.props.globeUIRef.current&&e.props.globeUIRef.current.props.view.goTo({target:[(parseFloat(f)+parseFloat(x))/2,(parseFloat(g)+parseFloat(b))/2],zoom:3},{maxDuration:2500,speedFactor:.5}),d||u.temporalResolution===ce.a.monthlyClimatology||e.props.snackbarOpen("Default parameters for satellite and model data will exceed the maximum visualizable size. Please reduce the time range or region size."),e.setState(Object(l.a)(Object(l.a)(Object(l.a)({},e.state),{},{surfaceOnly:m,irregularSpatialResolution:d},h),{},{selectedVizType:"",storedParams:Object(l.a)(Object(l.a)({},e.state.storedParams),h)}))}},e.componentWillUnmount=function(){e.props.vizPageDataTargetSetAndFetchDetails(null),e.props.mapContainerRef.current&&e.props.mapContainerRef.current.regionLayer&&e.props.mapContainerRef.current.regionLayer.removeAll()},e.updateDomainFromGraphicExtent=function(a){for(var t=a.xmin;t<-180;)t+=360;for(;t>180;)t-=360;for(var n=a.xmax;n<-180;)n+=360;for(;n>180;)n-=360;var r={lat1:parseFloat(a.ymin.toFixed(3)),lat2:parseFloat(a.ymax.toFixed(3)),lon1:parseFloat(t.toFixed(3)),lon2:parseFloat(n.toFixed(3))};e.setState(Object(l.a)(Object(l.a)(Object(l.a)({},e.state),r),{},{storedParams:Object(l.a)(Object(l.a)({},e.state.storedParams),r)}))},e.handleUpdateParameters=function(a){var t=a.lat1,n=a.lat2,r=a.lon1,o=a.lon2,s=a.depth1,i=a.depth2,c=a.dt1,p=a.dt2;e.setState(Object(l.a)(Object(l.a)({},e.state),{},{lat1:t,lat2:n,lon1:r,lon2:o,depth1:s,depth2:i,dt1:c,dt2:p}))},e.handleShowChartsClick=function(){0===e.props.plotsActiveTab?e.props.handlePlotsSetActiveTab(null,1):e.props.handlePlotsSetActiveTab(null,0)},e.handleVisualize=function(){var a=e.state,t=a.depth1,n=a.depth2,r=a.dt1,o=a.dt2,l=a.lat1,s=a.lat2,i=a.lon1,c=a.lon2,p=a.selectedVizType,u=e.props.vizPageDataTargetDetails.Spatial_Resolution===me.a.irregular,m=Qe(p),d={parameters:Ze({depth1:t,depth2:n,dt1:e.props.vizPageDataTargetDetails.Temporal_Resolution===ce.a.monthlyClimatology?r+"-01-1900":r,dt2:e.props.vizPageDataTargetDetails.Temporal_Resolution===ce.a.monthlyClimatology?o+"-01-1900":o+"T23:59:59",lat1:l,lat2:s,lon1:i,lon2:c,fields:e.props.vizPageDataTargetDetails.Variable,tableName:e.props.vizPageDataTargetDetails.Table_Name,spName:m.sp}),subType:m.subType,metadata:e.props.vizPageDataTargetDetails};u&&m.sp!==x.a.depthProfile?e.props.sparseDataQuerySend(d):e.props.storedProcedureRequestSend(d)},e.handleDrawClick=function(){var a=e.props.globeUIRef.current.props,t=a.esriModules,n=a.regionLayer,r=e.props.globeUIRef.current.sketchModel;if(!e.state.addedGlobeUIListeners){var o=Object(Ue.b)(75,(function(a){"active"===a.state&&e.updateDomainFromGraphicExtent(t.Utils.webMercatorToGeographic(a.graphic.geometry.extent))}));r.on("create",(function(a){"active"===a.state&&a.toolEventInfo&&"vertex-add"===a.toolEventInfo.type&&r.complete(),a.graphic&&a.graphic.visible&&(a.graphic.visible=!1),"cancel"===a.state&&(r.cancel(),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showDrawHelp:!1}))),"start"===a.state&&n.removeAll(),"complete"===a.state&&(e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showDrawHelp:!1})),e.updateDomainFromGraphicExtent(t.Utils.webMercatorToGeographic(a.graphic.geometry.extent)))})),r.on("create",o),r.on("update",(function(a){if(a.toolEventInfo&&"move-stop"===a.toolEventInfo.type){if("cancel"===a.state)return;e.updateDomainFromGraphicExtent(a.graphics[0].geometry.extent)}}))}e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showDrawHelp:!0,addedGlobeUIListeners:!0})),e.state.showDrawHelp?r.cancel():r.create("polyline",{mode:"click"})},e.handleSelectDataTarget=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!1})),e.props.vizPageDataTargetSetAndFetchDetails(a)},e.handleCloseDataSearch=function(){e.state.dataSearchMenuOpen&&e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!1}))},e.handleSetVariableDetailsID=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{variableDetailsID:a}))},e.handleChangeInputValue=function(a){var t,n=parseFloat(a.target.value);t=["lat1","lat2","lon1","lon2","depth1","depth2"].includes(a.target.name)?isNaN(n)?a.target.value:n:a.target.value,e.setState(Object(l.a)(Object(l.a)({},e.state),{},{[a.target.name]:t,storedParams:Object(l.a)(Object(l.a)({},e.state.storedParams),{},{[a.target.name]:t})}))},e.handleToggleCharts=function(){},e.estimateDataSize=function(){var a=e.props.vizPageDataTargetDetails,t=e.state,n=t.dt1,r=t.dt2,o=t.lat1,l=t.lat2,s=t.lon1,i=t.lon2,c=t.depth1,p=t.depth2,u=t.selectedVizType;if(!a)return 0;if(a.Spatial_Resolution===me.a.irregular)return 1;var m=a.Temporal_Resolution===ce.a.monthlyClimatology?n:Date.parse(n),d=a.Temporal_Resolution===ce.a.monthlyClimatology?r:Date.parse(r),h=(d-m)/864e5,g=Object(ue.a)(a.Spatial_Resolution),b=a.Temporal_Resolution===ce.a.monthlyClimatology?d-m+1:Math.floor(h/pe(a.Temporal_Resolution))||1;b*=1.4;var x=(i>s?(i-s)/g:(180-s+(i+180))/g)*((l-o)/g)*(ge.a.count({data:a},c,p)||1)*b;return u===f.a.timeSeries||u===f.a.depthProfile?x/200:x},e.checkStartDepth=function(){return e.state.depth1<0?"Depth cannot be negative":e.state.depth1>e.state.depth2?"Start cannot be greater than end":e.state.depth1>e.props.vizPageDataTargetDetails.Depth_Max?"Maximum depth start is ".concat(e.props.vizPageDataTargetDetails.Depth_Max):""},e.checkEndDepth=function(){return e.state.depth2<0?"Depth cannot be negative":e.state.depth1>e.state.depth2?"Start cannot be greater than end":e.state.depth2<e.props.vizPageDataTargetDetails.Depth_Min?"Minimum depth end is ".concat(e.props.vizPageDataTargetDetails.Depth_Min):""},e.checkStartDate=function(){return e.props.vizPageDataTargetDetails.Temporal_Resolution===ce.a.monthlyClimatology?e.state.dt1>e.state.dt2?"Start cannot be greater than end":"":e.state.dt1?e.state.dt1>e.state.dt2?"Start cannot be greater than end":e.state.dt1<e.props.vizPageDataTargetDetails.Time_Min.slice(0,10)?"Minimum start date is ".concat(e.props.vizPageDataTargetDetails.Time_Min.slice(5,10)+"-"+e.props.vizPageDataTargetDetails.Time_Min.slice(0,4)):"":"Invalid date"},e.checkEndDate=function(){return e.props.vizPageDataTargetDetails.Temporal_Resolution===ce.a.monthlyClimatology?e.state.dt1>e.state.dt2?"Start cannot be greater than end":"":e.state.dt2?e.state.dt1>e.state.dt2?"Start cannot be greater than end":e.state.dt2>e.props.vizPageDataTargetDetails.Time_Max.slice(0,10)?"Maximum end date is ".concat(e.props.vizPageDataTargetDetails.Time_Max.slice(5,10)+"-"+e.props.vizPageDataTargetDetails.Time_Max.slice(0,4)):"":"Invalid date"},e.checkStartLat=function(){return e.state.lat1>e.props.vizPageDataTargetDetails.Lat_Max?"Maximum start lat is ".concat(e.props.vizPageDataTargetDetails.Lat_Max):e.state.lat1>e.state.lat2?"Start cannot be greater than end":""},e.checkEndLat=function(){return e.state.lat2<e.props.vizPageDataTargetDetails.Lat_Min?"Minimum end lat is ".concat(e.props.vizPageDataTargetDetails.Lat_Min):e.state.lat1>e.state.lat2?"Start cannot be greater than end":""},e.checkStartLon=function(){var a=e.state,t=a.lon1,n=a.lon2,r=e.props.vizPageDataTargetDetails,o=r.Lon_Min,l=r.Lon_Max;if(n>=t){if(t>l)return"Maximum start lon is ".concat(l)}else if(!(o>t||l>t||o<n||l<n))return"Longitude outside dataset coverage";return""},e.checkEndLon=function(){var a=e.state,t=a.lon1,n=a.lon2,r=e.props.vizPageDataTargetDetails,o=r.Lon_Min;r.Lon_Max;return n>=t&&n<o?"Minimum end lon is ".concat(o):""},e.checkHeatmap=function(){return e.state.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Heatmap"):""},e.checkContour=function(){return e.state.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Contour"):""},e.checkSection=function(){return e.state.surfaceOnly?$.type.surfaceOnlyDataset.replace("$","variable"):e.state.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Section Map"):""},e.checkHistogram=function(){return""},e.checkTimeSeries=function(){return e.state.irregularSpatialResolution?$.type.dataIsIrregular.replace("$","Time Series"):""},e.checkDepthProfile=function(){return e.state.surfaceOnly?$.type.surfaceOnlyDataset.replace("$","variable"):""},e.checkSparseMap=function(){return e.state.irregularSpatialResolution?"":$.type.irregularOnly},e.checkGeneralWarn=function(a){return e.props.selectedVizType&&a>12e5?$.generic.dataSizeWarning:""},e.checkGeneralPrevent=function(a){var t=be(e.props.charts),n=Je(e.props.charts);if(!e.props.user){var r=parseInt(b.a.get("guestPlotCount"));if(r&&r>=10)return $.generic.guestMaximumReached}if(!e.state.selectedVizType)return $.generic.vizTypeMissing;if(e.state.selectedVizType===f.a.heatmap&&t>14)return $.type.webGLContextLimit;if(e.state.selectedVizType===f.a.sparse&&t>11)return $.type.webGLContextLimit;if(e.state.selectedVizType===f.a.heatmap&&16-t-(ge.a.count({data:e.props.vizPageDataTargetDetails},e.props.depth1,e.props.depth2)||1)<1)return"Too many distinct depths to render heatmap. Please reduce depth range or select section map.";return e.state.selectedVizType!==f.a.histogram&&e.props.selectedVizType!==f.a.heatmap&&a>15e5||a>6e6?$.generic.dataSizePrevent:e.props.vizPageDataTargetDetails?e.props.charts.length>9?"Total number of plots is too large. Please delete 1 or more":n+a>4e6?"Total rendered data amount is too large. Please delete 1 or more plots.":!e.state.irregularSpatialResolution&&e.state.selectedVizType!==f.a.timeSeries&&Date.parse(e.state.dt2)-Date.parse(e.state.dt1)>31536e6?"Maximum date range for non-time series plots of gridded data is 1 year":"":$.generic.variableMissing},e.render=function(){var a=e.props,t=a.classes,n=a.handleLatLonChange,r=a.dataTarget,o=a.vizPageDataTargetDetails,s=a.charts,i=a.plotsActiveTab,c=e.state,p=c.variableDetailsID,u=c.showControlPanel,d=c.dataSearchMenuOpen,h=c.depth1,g=c.depth2,b=c.dt1,f=c.dt2,x=c.lat1,v=c.lat2,S=c.lon1,E=c.lon2,C=c.selectedVizType,O=o,A=e.estimateDataSize(),L=O?[e.checkStartDepth(),e.checkEndDepth(),e.checkStartLat(),e.checkEndLat(),e.checkStartLon(),e.checkEndLon(),e.checkHeatmap(),e.checkContour(),e.checkSection(),e.checkHistogram(),e.checkTimeSeries(),e.checkDepthProfile(),e.checkSparseMap(),e.checkGeneralWarn(A),e.checkGeneralPrevent(A),e.checkStartDate(),e.checkEndDate()]:Array(14).fill(""),j=Object(y.a)(L,17),I=j[0],R=j[1],H=j[2],G=j[3],Y=j[4],W=j[5],U=j[6],$=j[7],K=j[8],Q=j[9],Z=j[10],J=j[11],X=j[12],ee=j[13],ae=j[14],te=j[15],ne=j[16],re=[I,R,H,G,Y,W,ae,te,ne],oe=function(){for(var e=0;e<re.length;e++)if(re[e])return re[e];return!1}(),le=oe||(ee||"");return m.a.createElement(m.a.Fragment,null,m.a.createElement(ie,{variableDetailsID:p,handleSetVariableDetailsID:e.handleSetVariableDetailsID}),m.a.createElement(Ma,null),e.state.showDrawHelp?m.a.createElement(w.a,{className:t.drawHelpText},"Click on the globe to start drawing, and again to finish."):"",u?m.a.createElement("div",null,m.a.createElement(D.a,{title:"Hide control panel",placement:"right"},m.a.createElement(N.a,{className:t.closePanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showControlPanel:!1}))}},m.a.createElement(F.a,null)))):m.a.createElement(D.a,{title:"Show control panel",placement:"right"},m.a.createElement(N.a,{className:t.openPanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showControlPanel:!0}))}},m.a.createElement(V.a,{style:{fontSize:32}}))),m.a.createElement(T.a,{className:t.drawer,variant:"persistent",open:u,classes:{paper:"".concat(t.drawerPaper)},anchor:"left"},r?m.a.createElement(M.a,{container:!0,style:{borderBottom:"1px solid black"}},m.a.createElement(M.a,{item:!0,xs:10},m.a.createElement(ye.a,{fullWidth:!0,className:t.controlPanelItem,startIcon:m.a.createElement(_.a,{style:{fontSize:"22px",margin:"0 0 -6px 4px"}}),onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!0}))},classes:{label:t.controlPanelItemLabel,startIcon:t.controlPanelItemStartIcon},disabled:e.state.showDrawHelp||!o},m.a.createElement("span",{style:{color:e.state.showDrawHelp?"rgba(0, 0, 0, 0.38)":"white"}},r.Long_Name))),m.a.createElement(M.a,{item:!0,xs:2,style:{borderLeft:"1px solid black"}},m.a.createElement(D.a,{title:"Show variable details",placement:"top"},m.a.createElement("span",null,m.a.createElement(N.a,{onClick:function(a){e.handleSetVariableDetailsID(r.ID),a.stopPropagation()},disabled:e.state.showDrawHelp||!o},m.a.createElement(z.a,{style:{fontSize:"26px",marginTop:"3px"}})))))):m.a.createElement(ye.a,{fullWidth:!0,className:t.controlPanelItem,style:{borderBottom:"1px solid black"},startIcon:m.a.createElement(_.a,{style:{fontSize:"22px",margin:"0 0 -6px 4px"}}),onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!0}))},classes:{label:t.controlPanelItemLabel,startIcon:t.controlPanelItemStartIcon},disabled:e.state.showDrawHelp},"Select a Variable to Begin"),m.a.createElement(m.a.Fragment,null,m.a.createElement(M.a,{container:!0},O&&O.Temporal_Resolution===ce.a.monthlyClimatology?m.a.createElement(m.a.Fragment,null,m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{name:"dt1",className:t.textField,id:"dt1",label:"Start Month",type:"number",value:b,error:Boolean(te),FormHelperTextProps:{className:t.helperText},helperText:te,InputProps:{className:t.dateTimeInput,inputProps:{min:1,max:12}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{name:"dt2",className:t.textField,id:"dt2",label:"End Month",type:"number",min:1,max:12,step:1,value:f,error:Boolean(te),FormHelperTextProps:{className:t.helperText},helperText:te,InputProps:{className:t.dateTimeInput,inputProps:{min:1,max:12}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o}))):m.a.createElement(m.a.Fragment,null,m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{name:"dt1",className:t.textField,id:"dt1",label:"Start Date(m/d/y)",step:1,type:"date",value:b,error:Boolean(te),FormHelperTextProps:{className:t.helperText},helperText:te,InputProps:{className:t.dateTimeInput,inputProps:O?{min:O.Time_Min.slice(0,10),max:O.Time_Max.slice(0,10)}:{}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{name:"dt2",className:t.textField,id:"dt2",label:"End Date(m/d/y)",type:"date",value:f,error:Boolean(ne),FormHelperTextProps:{className:t.helperText},helperText:ne,InputProps:{className:t.dateTimeInput,inputProps:O?{min:O.Time_Min.slice(0,10),max:O.Time_Max.slice(0,10)}:{}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o}))),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{type:"number",id:"lat1-input",label:"Start Lat(\xb0)",className:t.textField,value:x,onChange:n,error:Boolean(H),FormHelperTextProps:{className:t.helperText},helperText:H,InputProps:{className:t.padLeft,inputProps:O?{min:O.Lat_Min,max:O.Lat_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},name:"lat1",onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{type:"number",id:"lat2-input",error:Boolean(G),label:"End Lat(\xb0)",className:t.textField,value:v,onChange:n,FormHelperTextProps:{className:t.helperText},helperText:G,name:"lat2",InputProps:{className:t.padLeft,inputProps:O?{min:O.Lat_Min,max:O.Lat_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{type:"number",id:"lon1-input",error:Boolean(Y),label:"Start Lon(\xb0)",className:t.textField,value:S,onChange:n,FormHelperTextProps:{className:t.helperText},helperText:Y,name:"lon1",InputProps:{className:t.padLeft,inputProps:O?{min:O.Lon_Min,max:O.Lon_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{type:"number",id:"lon2-input",error:Boolean(W),label:"End Lon(\xb0)",className:t.textField,value:E,onChange:n,FormHelperTextProps:{className:t.helperText},helperText:W,name:"lon2",InputProps:{className:t.padLeft,inputProps:O?{min:O.Lon_Min,max:O.Lon_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o}),u?m.a.createElement(P.a,{className:t.popoutButtonPaper,style:{left:281,top:"146px"}},m.a.createElement(D.a,{title:"Draw Region on Globe"},m.a.createElement("span",null,m.a.createElement(N.a,{className:t.popoutButtonBase,onClick:e.handleDrawClick,disabled:!O||0!==i},m.a.createElement($e.a,{className:t.popoutButtonIcon}))))):""),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{type:"number",id:"depth1-input",error:Boolean(I),label:"Start Depth(m)",className:t.textField,value:h,FormHelperTextProps:{className:t.helperText},helperText:I,name:"depth1",InputProps:{className:t.padLeft,inputProps:O?{min:O.Depth_Max?O.Depth_Min:0,max:O.Depth_Max?O.Depth_Max:0,step:.1}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||e.state.surfaceOnly||!o})),m.a.createElement(M.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(k.a,{type:"number",id:"depth2-input",error:Boolean(R),label:"End Depth(m)",className:t.textField,value:g,FormHelperTextProps:{className:t.helperText},helperText:R,name:"depth2",InputProps:{className:t.padLeft,inputProps:O?{min:O.Depth_Max?O.Depth_Min:0,max:O.Depth_Max?O.Depth_Max:0,step:.1}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||e.state.surfaceOnly||!o})),m.a.createElement(Ee,{overrideDisabledStyle:Pa,heatmapMessage:U,contourMessage:$,sectionMapMessage:K,histogramMessage:Q,timeSeriesMessage:Z,depthProfileMessage:J,sparseMapMessage:X,visualizeButtonTooltip:le,disableVisualizeMessage:oe,selectedVizType:C,handleChangeInputValue:e.handleChangeInputValue,onVisualize:e.handleVisualize,showChartControl:e.state.showChartControl,variableDetails:e.props.vizPageDataTargetDetails,handleVisualize:e.handleVisualize,disabled:e.state.showDrawHelp||!o}),s.length&&u?m.a.createElement(P.a,{className:t.popoutButtonPaper,style:{left:"281px",top:"343px"}},m.a.createElement(D.a,{title:0!==i?"Return to Globe":"Show Charts"},m.a.createElement(N.a,{disabled:e.state.showDrawHelp,className:t.popoutButtonBase,onClick:e.handleShowChartsClick},0!==i?m.a.createElement(Ke.a,{className:t.popoutButtonIcon,style:{color:q.a.primary}}):m.a.createElement(qe.a,{badgeContent:s.length,color:"primary"},m.a.createElement(B.a,{className:t.popoutButtonIcon,style:{color:q.a.primary}}))))):""))),m.a.createElement(P.a,{className:t.dataSearchMenuPaper,style:d?{}:{display:"none"}},m.a.createElement(ya,{handleSelectDataTarget:e.handleSelectDataTarget,handleSetVariableDetailsID:e.handleSetVariableDetailsID,handleCloseDataSearch:e.handleCloseDataSearch,searchInputRef:e.searchInputRef})))},e}return t}(m.a.Component),Ia=Object(d.b)((function(e,a){return{data:e.data,catalog:e.catalog,catalogRequestState:e.catalogRequestState,cruiseTrajectory:e.cruiseTrajectory,showHelp:e.showHelp,datasets:e.datasets,charts:e.charts,cart:e.cart,dataTarget:e.vizPageDataTarget,vizPageDataTargetDetails:e.vizPageDataTargetDetails,user:e.user}}),ka)(Object(v.a)((function(e){return{drawerPaper:{width:280,height:"auto",top:180,borderRadius:"0 4px 4px 0",boxShadow:"2px 2px  2px 2px #242424",border:"none",overflow:"visible",backgroundColor:q.a.backgroundGray},openPanelChevron:{position:"fixed",left:"5px",top:"380px",zIndex:le.a.CONTROL_PRIMARY},closePanelChevron:{position:"fixed",left:285,top:"380px",zIndex:le.a.CONTROL_PRIMARY},dataSearchMenuPaper:{position:"fixed",top:120,bottom:60,left:0,width:"98vw",height:"auto",zIndex:le.a.CONTROL_PRIMARY,backgroundColor:"rgba(0,0,0,.6)",backdropFilter:"blur(5px)"},controlPanelForm:{marginTop:e.spacing(1)},formGridItem:{border:"1px solid #313131",borderBottom:"none",borderTop:"none",backgroundColor:q.a.backgroundGray},vizTypeSelectFormControl:{width:"100%","&:disabled":{backgroundColor:"transparent"}},depressed:{boxShadow:"inset 1px 1px 5px #1c1c1c"},padLeft:{padding:"6px 0 2px 7px"},dateTimeInput:{padding:"6px 0 2px 7px",alignItems:"start"},visualizeButton:{height:"56px",borderRadius:0,backgroundColor:q.a.backgroundGray,color:e.palette.primary.main,fontVariant:"normal","&:disabled":{backgroundColor:"transparent"},"&:hover":{backgroundColor:q.a.greenHover,color:"white"}},helperText:{color:"yellow",fontSize:"12px"},vizButtonTooltip:{color:"yellow"},datePickerInputAdornment:{padding:0},clearChartsButton:{borderRadius:0,backgroundColor:"#3c3c3c",width:"100%",borderRight:"1px solid #313131"},resetSPParamsButton:{borderRadius:0,backgroundColor:"#3c3c3c",width:"100%"},datePicker:{width:"100%"},vizTypeMenu:{backgroundColor:q.a.backgroundGray},vizTypeMenuItem:{"&:hover":{backgroundColor:q.a.greenHover}},controlPanelItem:{textTransform:"none",textAlign:"left",fontSize:"17px",fontWeight:200,color:q.a.primary,justifyContent:"flex-start",height:"56px"},controlPanelItemLabel:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block"},controlPanelItemStartIcon:{display:"inline-block"},textField:{width:"100%"},drawHelpText:{position:"fixed",top:120,margin:"0 calc(50vw - 226px)",zIndex:le.a.CONTROL_PRIMARY,color:"white",fontSize:"18px",backgroundColor:"rgba(0, 0, 0, .6)",padding:"8px",backdropFilter:"blur(5px)",borderRadius:"4px"},popoutButtonPaper:{position:"absolute",display:"flex",borderRadius:"2px",boxShadow:"2px 2px  2px 2px #242424",backgroundColor:q.a.backgroundGray},popoutButtonIcon:{width:"24px",height:"24px"},popoutButtonBase:{padding:"9px"}}}))(za)),Ra=t(38),_a=t(637),Fa=t(16),Va={guestPlotLimitNotificationSetIsVisible:oe.s,showLoginDialog:de.l,guestTokenRequestSend:Fa.o},Ba=Object(d.b)((function(e){return{guestPlotLimitNotificationIsVisible:e.guestPlotLimitNotificationIsVisible,user:e.user,userIsGuest:e.userIsGuest}}),Va)(Object(v.a)((function(e){return{dialogWrapper:{backgroundColor:q.a.backgroundGray},dialogRoot:{zIndex:"".concat(le.a.NON_HELP_DIALOG+1," !important")},link:{fontSize:"16px",whiteSpace:"pre-wrap",display:"inline-block",paddingBottom:"1px"},dialogActionButton:{textTransform:"none"}}}))(Object(h.f)((function(e){var a=e.classes,t=function(){e.showLoginDialog()},n=parseInt(b.a.get("guestPlotCount"))||0,r=Boolean(e.guestPlotLimitNotificationIsVisible&&!e.user);return m.a.createElement(Q.a,{open:r,onClose:function(){e.userIsGuest&&e.guestPlotLimitNotificationSetIsVisible(!1)},PaperProps:{className:a.dialogWrapper},classes:{root:a.dialogRoot}},m.a.createElement(J.a,null,m.a.createElement(w.a,{style:{marginBottom:"14px"}},"Welcome to the Simons CMAP visualization tools. You can explore the visualization features as a guest without registering and create up to 10 plots per day. Registration provides access to the full suite of data submission tools, the data visualization tools and the Simons CMAP API."),m.a.createElement(w.a,{style:{marginBottom:"14px"}},"You can ",m.a.createElement(aa.a,{component:"button",onClick:e.guestTokenRequestSend,className:a.link},"Continue as a Guest"),", with ",10-n,"/10 plots remaining,"),m.a.createElement(w.a,{style:{marginBottom:"14px"}},"Or you can",m.a.createElement(aa.a,{component:Ra.b,to:"/register",className:a.link}," Register")," or",m.a.createElement(aa.a,{component:"button",onClick:t,className:a.link}," Log in")," to your existing account for expanded access to CMAP."),m.a.createElement(_a.a,null,m.a.createElement(ye.a,{variant:"outlined",className:a.dialogActionButton,onClick:t},"Login"),m.a.createElement(ye.a,{onClick:!0,variant:"outlined",onClick:function(){return e.history.push("/register")},className:a.dialogActionButton},"Register"),m.a.createElement(ye.a,{variant:"outlined",className:a.dialogActionButton,onClick:e.guestTokenRequestSend},"Continue As Guest"))))})))),Ha=t(825),Ga=t(655),Ya=t.n(Ga),Wa=t(639),Ua=[null,"January","February","March","April","May","June","July","August","September","October","November","December"],qa=function(e,a,t){return t?Ua[parseInt(e)]:a?e.slice(0,10)+" "+e.slice(11,16):e.slice(0,10)},$a={layout:{font:{color:"#ffffff"},paper_bgcolor:q.a.backgroundGray,autosize:!0,margin:{t:116,b:104}},config:{displaylogo:!1},annotations:function(e,a){return[{text:(a.length>70?"Data Source: "+a.slice(0,67)+"...":"Data Source: "+a)+(e?e.length>70?"<br>Distributor: "+e.slice(0,67)+"...":"<br>Distributor: "+e:"")+"<br>Visualization provided by Simons CMAP",font:{color:"white",size:10},xref:"paper",yref:"paper",yanchor:"top",x:.5,y:0,yshift:-56,showarrow:!1,xanchor:"center"}]}},Ka=t(364),Qa=t(578),Za=t(592),Ja=t(905),Xa=t(906),et=t(907),at=t(888),tt=t(908),nt=t(909),rt=t(910),ot=t(911),lt=t(174),st=t(352),it={sparseDataMaxSizeNotificationUpdate:oe.z},ct=["Default","Greys","YlGnBu","Greens","YlOrRd","Bluered","RdBu","Reds","Blues","Picnic","Rainbow","Portland","Jet","Hot","Blackbody","Earth","Electric","Viridis","Cividis"];var pt=Object(d.b)(null,it)(Object(v.a)((function(e){return{popover:{width:"470px",height:"120px",paddingTop:e.spacing(3),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2.5),paddingRight:e.spacing(2.5),zIndex:le.a.CONTROL_PRIMARY},iconButton:{boxShadow:"0px 1px 1px 1px #242424"},colorForm:{width:"100%"},lastIcon:{borderTopRightRadius:"10%",borderBottomRightRadius:"10%"},buttonGroup:{display:"block",margin:"0px auto 8px auto",maxWidth:"700px",textAlign:"center",pointerEvents:"auto"},depressed:{boxShadow:"inset 1px 1px 5px #262626"},colorscaleMenu:{maxHeight:"400px",zIndex:le.a.CONTROL_PRIMARY},setPopoverZ:{zIndex:"".concat(le.a.CONTROL_PRIMARY," !important")},grayBackground:{backgroundColor:q.a.backgroundGray},sparseDataMaxSizeWarningIcon:{color:q.a.errorYellow,position:"absolute",top:"60px",left:"calc(50% - 12px)",cursor:"pointer",zIndex:le.a.CONTROL_PRIMARY-1,pointerEvents:"auto"}}}))((function(e){var a=e.classes,t=e.onToggleSplitByDate,n=e.splitByDate,r=e.onToggleSplitBySpace,o=e.splitBySpace,l=e.orientation,s=e.downloadCsv,i=e.handleZValueConfirm,c=e.zValues,p=e.markerOptions,d=e.handleMarkerOptionsConfirm,h=e.showErrorBars,g=e.handleSetShowErrorBars,b=e.showLines,f=e.handleSetShowLines,x=e.chart,v=Object(u.useState)(null),S=Object(y.a)(v,2),E=S[0],C=S[1],O=m.a.useState(null),A=Object(y.a)(O,2),w=A[0],T=A[1],k=m.a.useState(c&&c[0]),P=Object(y.a)(k,2),j=P[0],z=P[1],I=m.a.useState(c&&c[1]),R=Object(y.a)(I,2),_=R[0],F=R[1],V=Boolean(w),H=V?"zscale-popover":void 0,G=function(){T(null)},Y=[j>_?"Min must be higher than max":/^[-+]?[0-9]*\.?[0-9]+$/.test(j)?void 0:"Invalid value",j>_?"Min must be higher than max":/^[-+]?[0-9]*\.?[0-9]+$/.test(_)?void 0:"Invalid value"],W=Y[0],U=Y[1],q=m.a.useState(null),$=Object(y.a)(q,2),K=$[0],Q=$[1],Z=m.a.useState(p&&p.opacity),J=Object(y.a)(Z,2),X=J[0],ee=J[1],ae=m.a.useState(p&&p.color),te=Object(y.a)(ae,2),ne=te[0],re=te[1],oe=m.a.useState(p&&p.size),le=Object(y.a)(oe,2),se=le[0],ie=le[1],pe=function(e){var a=e?e.opacity:null,t=Object(u.useRef)();return Object(u.useEffect)((function(){t.current=a})),t.current}(p),ue=function(e){var a=e?e.color:null,t=Object(u.useRef)();return Object(u.useEffect)((function(){t.current=a})),t.current}(p),de=function(e){var a=e?e.size:null,t=Object(u.useRef)();return Object(u.useEffect)((function(){t.current=a})),t.current}(p);Object(u.useEffect)((function(){p&&(p.opacity!==pe&&ee(p.opacity),p.color!==ue&&re(p.color),p.size!==de&&ie(p.size))}));var he=Boolean(K),ge=he?"marker-popover":void 0,be=function(){Q(null)},Se=[function(){if(X<.1||X>1||!/^[-+]?[0-9]*\.?[0-9]+$/.test(X))return"Opacity should be 0.1 to 1"}(),function(){if(se<1||se>18||!/^[-+]?[0-9]*\.?[0-9]+$/.test(se))return"Size should be 1 to 18"}()],Ee=Se[0],Ce=Se[1],Oe=Boolean(x&&(x.data.metadata.Spatial_Resolution===me.a.irregular||x.data.metadata.Temporal_Resolution===ce.a.irregular)&&x.data&&x.data.variableValues&&x.data.variableValues.length>=lt.a);return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{position:"relative",pointerEvents:"none",margin:"auto",maxWidth:"80%"}},Oe?m.a.createElement(D.a,{title:"Visualization does not contain all requested data. Click for more info."},m.a.createElement(Ja.a,{className:a.sparseDataMaxSizeWarningIcon,onClick:function(){e.sparseDataMaxSizeNotificationUpdate(Object(st.a)(e.chart.data))}})):"",m.a.createElement(L.a,{className:a.buttonGroup},Boolean(t)&&m.a.createElement(D.a,{placement:"top",title:"Split By Date"},m.a.createElement(N.a,{color:"inherit",className:"".concat(a.iconButton," ").concat(n&&a.depressed),onClick:t},m.a.createElement(Xa.a,null))),Boolean(r)&&m.a.createElement(D.a,{placement:"top",title:"zonal"===l?"Split by Latitude":"Split by Longitude"},m.a.createElement(N.a,{color:"inherit",className:"".concat(a.iconButton," ").concat(o&&a.depressed),onClick:r},m.a.createElement(et.a,null))),m.a.createElement(D.a,{placement:"top",title:"Download CSV"},m.a.createElement(N.a,{color:"inherit",onClick:s,className:a.iconButton},m.a.createElement(at.a,null))),Boolean(i)&&m.a.createElement(D.a,{title:"Change Colorscale Range",placement:"top"},m.a.createElement(N.a,{color:"inherit",onClick:function(e){return T(e.currentTarget)},className:a.iconButton},m.a.createElement(tt.a,null))),Boolean(f)&&m.a.createElement(D.a,{title:b?"Hide Plot Line":"Show Plot Line",placement:"top"},m.a.createElement(N.a,{color:"inherit",onClick:function(){return f(!b)},className:"".concat(a.iconButton," ").concat(b&&a.depressed)},m.a.createElement(B.a,null))),Boolean(g)&&m.a.createElement(D.a,{title:h?"Hide Error Bars":"Show Error Bars",placement:"top"},m.a.createElement(N.a,{color:"inherit",onClick:function(){return g(!h)},className:"".concat(a.iconButton," ").concat(h&&a.depressed)},m.a.createElement(nt.a,null))),Boolean(e.handlePaletteChoice)&&m.a.createElement(D.a,{title:"Change Palette",placement:"top"},m.a.createElement(N.a,{disabled:!Boolean(e.handlePaletteChoice),color:"inherit",onClick:function(e){C(e.currentTarget)},className:a.iconButton},m.a.createElement(rt.a,null))),Boolean(e.handleMarkerOptionsConfirm)&&m.a.createElement(D.a,{title:"Marker Options",placement:"top"},m.a.createElement(N.a,{color:"inherit",onClick:function(e){return Q(e.currentTarget)},className:"".concat(a.iconButton," ").concat(a.lastIcon)},m.a.createElement(ot.a,null))))),m.a.createElement(Ka.a,{id:"simple-menu",anchorEl:E,keepMounted:!0,open:Boolean(E),onClose:function(){return C(null)},className:a.colorscaleMenu,MenuListProps:{className:a.grayBackground}},ct.map((function(a,t){return m.a.createElement(ve.a,{onClick:function(){return function(a){C(null),e.handlePaletteChoice(a)}("Default"===a?"heatmap":a)},key:t},a)}))),m.a.createElement(Qa.a,{id:H,open:V,anchorEl:w,onClose:G,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{className:a.grayBackground},classes:{root:a.setPopoverZ}},m.a.createElement("div",{className:a.popover},m.a.createElement(M.a,{container:!0,spacing:1},m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{variant:"outlined",error:Boolean(W)},m.a.createElement(xe.a,{htmlFor:"z-min-input"},"Min"),m.a.createElement(Za.a,{id:"z-min-input",value:j,onChange:function(e){return z(e.target.value)},"aria-describedby":"local-zmin-error",labelWidth:36,name:"local-zmin"}),m.a.createElement(ta.a,{id:"local-zmin-error"},W))),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{variant:"outlined",error:Boolean(U)},m.a.createElement(xe.a,{htmlFor:"z-max-input"},"Max"),m.a.createElement(Za.a,{id:"z-max-input",value:_,onChange:function(e){return F(e.target.value)},"aria-describedby":"local-zmax-error",labelWidth:36,name:"local-zmax"}),m.a.createElement(ta.a,{id:"local-zmax-error"},U))),m.a.createElement(M.a,{item:!0,xs:7}),m.a.createElement(M.a,{item:!0,xs:2},m.a.createElement(ye.a,{onClick:G},"Cancel")),m.a.createElement(M.a,{item:!0,xs:2},m.a.createElement(ye.a,{color:"primary",onClick:function(){i([j,_]),G()},disabled:Boolean(W||U)},"Confirm")),m.a.createElement(M.a,{item:!0,xs:1})))),m.a.createElement(Qa.a,{id:ge,open:he,anchorEl:K,onClose:be,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},classes:{root:a.setPopoverZ},PaperProps:{className:a.grayBackground}},m.a.createElement("div",{className:a.popover},m.a.createElement(M.a,{container:!0,spacing:1},m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{variant:"outlined",error:Boolean(Ee)},m.a.createElement(xe.a,{htmlFor:"local-marker-opacity"},"Opacity"),m.a.createElement(Za.a,{id:"local-marker-opacity",value:X,onChange:function(e){return ee(e.target.value)},"aria-describedby":"local-marker-opacity",labelWidth:44,name:"local-marker-opacity"}),m.a.createElement(ta.a,{id:"local-marker-opacity-error"},Ee))),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{variant:"outlined"},m.a.createElement(xe.a,{htmlFor:"local-marker-size"},"Size"),m.a.createElement(Za.a,{error:Boolean(Ce),id:"local-marker-size",value:se,onChange:function(e){return ie(e.target.value)},"aria-describedby":"local-marker-size",labelWidth:36,name:"local-marker-size"}),m.a.createElement(ta.a,{id:"local-marker-size-error"},Ce))),m.a.createElement(M.a,{item:!0,xs:6},m.a.createElement(fe.a,{variant:"outlined",className:a.colorForm},m.a.createElement(xe.a,{htmlFor:"z-min-input"},"Color"),m.a.createElement(Za.a,{type:"color",id:"marker-color",value:ne,onChange:function(e){return re(e.target.value)},"aria-describedby":"local-marker-color",labelWidth:44,name:"local-marker-color"}))),m.a.createElement(M.a,{item:!0,xs:1}),m.a.createElement(M.a,{item:!0,xs:2},m.a.createElement(ye.a,{onClick:be},"Cancel")),m.a.createElement(M.a,{item:!0,xs:2},m.a.createElement(ye.a,{color:"primary",onClick:function(){d({opacity:X,color:ne,size:se}),be()},disabled:Boolean(Ee||Ce)},"Confirm")),m.a.createElement(M.a,{item:!0,xs:1})))))}))),ut={csvFromVizRequestSend:oe.n},mt=Object(d.b)(null,ut)(Object(v.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:q.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},iconButtonWrapper:{display:"inline-block"}}}))((function(e){var a=e.csvFromVizRequestSend,t=e.chart.data,n=t.metadata,r=t.parameters,o=r.dt1===r.dt2?qa(r.dt1):qa(r.dt1)+" to "+qa(r.dt2),s=r.lat1===r.lat2?r.lat1+"\xb0":r.lat1+"\xb0 to "+r.lat2+"\xb0",i=r.lon1===r.lon2?r.lon1+"\xb0":r.lon1+"\xb0 to "+r.lon2+"\xb0",c=t.hasDepth?r.depth1===r.depth2?"".concat(r.depth1,"[m]"):"".concat(r.depth1,"[m] to ").concat(r.depth2,"[m]"):"Surface";return m.a.createElement(m.a.Fragment,null,m.a.createElement(pt,{downloadCsv:function(){a(t,n.Table_Name,n.Variable,n.Long_Name)},chart:e.chart}),m.a.createElement(Ya.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{x:t.variableValues,name:"".concat(n.Long_Name.length>60?n.Long_Name.slice(0,60)+"...":n.Long_Name),type:"histogram",marker:{color:"#00FFFF"}}],layout:Object(l.a)(Object(l.a)({},$a.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(n.Dataset_Name)+"<br>".concat(n.Long_Name.length>60?n.Long_Name.slice(0,60)+"...":n.Long_Name," [").concat(n.Unit,"]")+"<br>".concat(o,", ")+c+"<br>Lat: ".concat(s,", ")+"Lon: ".concat(i),font:{size:12}},xaxis:{title:"".concat(n.Long_Name.length>35?n.Long_Name.slice(0,35)+"...":n.Long_Name," [").concat(n.Unit,"]"),exponentformat:"power",color:"#ffffff"},yaxis:{color:"#ffffff",title:"Frequency"},annotations:$a.annotations(n.Distributor,n.Data_Source)}),config:Object(l.a)({},$a.config)}))}))),dt=function(e){var a,t=e.lonMax-e.lonMin;a=t<2?(t/6).toFixed(2):Math.floor(t/6);var n=Array.from(Array(5),(function(t,n){return Math.ceil(e.lonMin+(n+1)*a)})),r=n.map((function(e){return e>180?e-360:e}));return{tickmode:"array",tickvals:n,ticktext:r}},ht=function(e){var a=(e.lonMax-e.lonMin)/(e.latMax-e.latMin),t=40,n=40;return isNaN(a)?t/=1.65:a>1?a<=1.5?n*=a:(n*=1.5,t=a>3?t/1.65:t*(1.8/a)):n=a<.5?.5*n:n*a,[t,n]},gt=t(933),bt={setLoadingMessage:de.h,snackbarOpen:de.n,csvFromVizRequestSend:oe.n},ft=Object(d.b)((function(e,a){return{charts:e.charts}}),bt)(Object(v.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:q.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},iconButtonWrapper:{display:"inline-block"}}}))((function(e){var a,t=e.snackbarOpen,n=e.csvFromVizRequestSend,r=e.chart,o=r.data,s=r.subType,i=o.dates,c=o.depths,p=o.extent,d=o.metadata,h=Object(u.useState)(!1),g=Object(y.a)(h,2),b=g[0],x=g[1],v=Object(u.useState)(!0),S=Object(y.a)(v,2),E=S[0],C=S[1],O=Object(u.useState)("heatmap"),A=Object(y.a)(O,2),w=A[0],D=A[1],N=Object(u.useState)([o.zMin,o.zMax]),T=Object(y.a)(N,2),L=T[0],M=T[1],k=Object(y.a)(L,2),P=k[0],j=k[1],z=o.generatePlotData(s,b,E);switch(s){case f.a.contourMap:a=function(e,a,t,n,r,o,s){var i=a.parameters,c=a.metadata,p=Array.from(a.depths).map((function(e){return parseFloat(e)})),u=Array.from(a.dates),d=a.parameters.lon1>a.parameters.lon2?dt(a):{},h=ht(a),g=Object(y.a)(h,2),b=g[0],f=g[1];return e.map((function(e,h){var g=u.length<=1?qa(u[0],a.hasHour,a.isMonthly):t?qa(n?u[Math.floor(h/p.length)]:u[h],a.hasHour,a.isMonthly):"Averaged Values ".concat(qa(u[0],a.hasHour,a.isMonthly)," to ").concat(qa(u[u.length-1],a.hasHour,a.isMonthly)),x=a.hasDepth?1===p.length?p[0]+"[m]":n?t?p[h%p.length].toFixed(2)+"[m]":p[h].toFixed(2)+"[m]":"Averaged Values ".concat(i.depth1," to ").concat(i.depth2):"Surface",v=i.lat1===i.lat2?"".concat(i.lat1,"\xb0"):"".concat(i.lat1,"\xb0 to ").concat(i.lat2,"\xb0"),y=i.lon1===i.lon2?"".concat(i.lon1,"\xb0"):"".concat(i.lon1,"\xb0 to ").concat(i.lon2,"\xb0"),S=e.map((function(e,t){var n=Math.abs(e),r=n>.01&&n<1e3?".2f":".2e";return null===e?"Lat: ".concat(Object(gt.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(gt.a)(".2f")(a.lons[t]-360):Object(gt.a)(".2f")(a.lons[t]),"\xb0"):"Lat: ".concat(Object(gt.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(gt.a)(".2f")(a.lons[t]-360):Object(gt.a)(".2f")(a.lons[t]),"\xb0")+"<br>"+"".concat(a.parameters.fields,": ").concat(Object(gt.a)(r)(e)," [").concat(a.metadata.Unit,"]")}));return m.a.createElement(Ya.a,{style:{position:"relative",width:"".concat(f,"vw"),height:"".concat(b,"vw"),minWidth:"".concat(10*f,"px"),minHeight:"".concat(10*b,"px"),margin:"0 auto"},useResizeHandler:!0,data:[{zauto:!1,zmin:o,zmax:s,x:a.lons,y:a.lats,z:e,connectgaps:!1,autocolorscale:!1,colorscale:r,hoverinfo:"text",hovertext:S,name:"".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name),type:"contour",contours:{coloring:r,showlabels:!0,labelfont:{family:"Raleway",size:12,color:"white"},labelformat:a.zMin>1&&a.zMin<1e3?".2f":".2e"},colorbar:{title:{text:"[".concat(a.metadata.Unit,"]")},exponentformat:"power"}}],config:Object(l.a)({},$a.config),key:h,layout:Object(l.a)(Object(l.a)({},$a.layout),{},{title:{text:"".concat(c.Dataset_Name)+"<br>".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name," [").concat(c.Unit,"]")+"<br>".concat(g,", ")+"".concat(x," <br>")+"Lat: ".concat(v,", ")+"Lon: ".concat(y),font:{size:12}},xaxis:Object(l.a)({title:"Longitude",color:"#ffffff"},d),yaxis:{title:"Latitude",color:"#ffffff"},annotations:$a.annotations(a.metadata.Distributor,c.Data_Source)})})}))}(z,o,b,E,w,P,j);break;case f.a.heatmap:a=function(e,a,t,n,r,o,s){var i=a.parameters,c=a.metadata,p=Array.from(a.depths).map((function(e){return parseFloat(e)})),u=Array.from(a.dates),d=a.parameters.lon1>a.parameters.lon2?dt(a):{},h=ht(a),g=Object(y.a)(h,2),b=g[0],f=g[1];return e.map((function(e,h){var g=u.length<=1?qa(u[0],a.hasHour,a.isMonthly):t?qa(n?u[Math.floor(h/p.length)]:u[h],a.hasHour,a.isMonthly):"Averaged Values ".concat(qa(u[0],a.hasHour,a.isMonthly)," to ").concat(qa(u[u.length-1],a.hasHour,a.isMonthly)),x=a.hasDepth?1===p.length?p[0]+"[m]":n?t?p[h%p.length].toFixed(2)+"[m]":p[h].toFixed(2)+"[m]":"Averaged Values ".concat(i.depth1," to ").concat(i.depth2):"Surface",v=i.lat1===i.lat2?"".concat(i.lat1,"\xb0"):"".concat(i.lat1,"\xb0 to ").concat(i.lat2,"\xb0"),y=i.lon1===i.lon2?"".concat(i.lon1,"\xb0"):"".concat(i.lon1,"\xb0 to ").concat(i.lon2,"\xb0"),S=e.map((function(e,t){var n=Math.abs(e),r=n>.01&&n<1e3?".2f":".2e";return null===e||isNaN(e)?"Lat: ".concat(Object(gt.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(gt.a)(".2f")(a.lons[t]-360):Object(gt.a)(".2f")(a.lons[t]),"\xb0"):"Lat: ".concat(Object(gt.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(gt.a)(".2f")(a.lons[t]-360):Object(gt.a)(".2f")(a.lons[t]),"\xb0")+"<br>"+"".concat(a.parameters.fields,": ").concat(Object(gt.a)(r)(e)," [").concat(a.metadata.Unit,"]")}));return m.a.createElement(Ya.a,{style:{position:"relative",width:"".concat(f,"vw"),height:"".concat(b,"vw"),minWidth:"".concat(10*f,"px"),minHeight:"".concat(10*b,"px")},useResizeHandler:!0,data:[{zauto:!1,zmin:o,zmax:s,zsmooth:e.length<2e4?"fast":"false",x:a.lons,y:a.lats,z:e,connectgaps:!1,name:"".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name),type:"heatmap",colorscale:r,autocolorscale:!1,hoverinfo:"text",text:S,colorbar:{title:{text:"[".concat(a.metadata.Unit,"]")},exponentformat:"power"}}],key:h,config:Object(l.a)({},$a.config),layout:Object(l.a)(Object(l.a)({},$a.layout),{},{title:{text:"".concat(c.Dataset_Name)+"<br>".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name," [").concat(c.Unit,"]")+"<br>".concat(g,", ")+"".concat(x," <br>")+"Lat: ".concat(v,", ")+"Lon: ".concat(y),font:{size:13}},xaxis:Object(l.a)({title:"Longitude[\xb0]",color:"#ffffff",exponentformat:"power"},d),yaxis:{title:"Latitude[\xb0]",color:"#ffffff",exponentformat:"power"},annotations:$a.annotations(a.metadata.Distributor,c.Data_Source)})})}))}(z,o,b,E,w,P,j);break;case f.a.histogram:return m.a.createElement(mt,{chart:{data:o}});default:a=""}return m.a.createElement(m.a.Fragment,null,m.a.createElement(pt,{handlePaletteChoice:s!==f.a.histogram&&function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),D(a)}),100)},onToggleSplitByDepth:1===c.size?null:function(){e.setLoadingMessage("Processing Data"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),C(!E)}),100)},onToggleSplitByDate:1===i.size?null:function(){var a=c?c.size:1;if(s===f.a.heatmap){var n=15-be(e.charts);if(!b&&a*i.size>n)return void t("Unable to split. Rendering limit exceeded.")}s===f.a.contourMap&&!b&&a*i.size>20?t("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Processing Data"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),x(!b)}),100))},splitByDepth:E,splitByDate:b,handleZValueConfirm:s!==f.a.histogram&&function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),M(a)}),100)},zValues:s!==f.a.histogram&&L,extent:s!==f.a.histogram&&p,downloadCsv:function(){n(o,d.Table_Name,d.Variable,d.Long_Name)},chart:r}),a)}))),xt={setLoadingMessage:de.h,csvFromVizRequestSend:oe.n},vt=Object(d.b)(null,xt)(Object(v.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:q.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){var a=e.csvFromVizRequestSend,t=e.chart.data,n=t.stds,r=t.variableValues,o=t.dates,s=t.parameters,i=t.metadata,c=m.a.useState({opacity:.2,color:"#ff1493",size:6}),p=Object(y.a)(c,2),u=p[0],d=p[1],h=m.a.useState(!0),g=Object(y.a)(h,2),b=g[0],f=g[1],x=m.a.useState(!!(r&&r.length<=40)),v=Object(y.a)(x,2),S=v[0],E=v[1],C=r.map((function(e,a){return"Time: ".concat(o[a].slice(0,10),"<br>").concat(s.fields,": ").concat(Object(gt.a)(".2e")(e)," \xb1 ").concat(Object(gt.a)(".2e")(n[a])," [").concat(i.Unit,"]")})),O=s.dt1===s.dt2?qa(o[0],t.hasHour,t.isMonthly):qa(o[0],t.hasHour,t.isMonthly)+" to "+qa(o[o.length-1],t.hasHour,t.isMonthly),A=s.lat1===s.lat2?s.lat1+"\xb0":s.lat1+"\xb0 to "+s.lat2+"\xb0",w=s.lon1===s.lon2?s.lon1+"\xb0":s.lon1+"\xb0 to "+s.lon2+"\xb0",D=0===s.depth2?"Surface":s.depth1===s.depth2?"".concat(s.depth1,"[m]"):"".concat(s.depth1,"[m] to ").concat(s.depth2,"[m]"),N=t.isMonthly?o.map((function(e){return Ua[parseInt(e)]})):o;return m.a.createElement("div",null,m.a.createElement(pt,{downloadCsv:function(){a(t,i.Table_Name,i.Variable,i.Long_Name)},handleMarkerOptionsConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),d(a)}),50)},markerOptions:u,showErrorBars:S,handleSetShowErrorBars:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),E(a)}),50)},showLines:b,handleSetShowLines:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),f(a)}),50)},chart:e.chart}),m.a.createElement(Ya.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{mode:b?"lines+markers":"markers",x:N,y:r,error_y:{type:"data",array:n,opacity:.3,color:S?"#f2f2f2":"transparent",visible:!0},name:"".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name),type:r.length>1e4?"scattergl":"scatter",line:{color:u.color},marker:{opacity:u.opacity,size:u.size,color:u.color},hoverinfo:"text",hovertext:C}],config:Object(l.a)({},$a.config),layout:Object(l.a)(Object(l.a)({},$a.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(i.Dataset_Name)+"<br>".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name," [").concat(i.Unit,"]")+"<br>".concat(O,", ")+D+"<br>Lat: ".concat(A,", ")+"Lon: ".concat(w),font:{size:12}},xaxis:{title:t.isMonthy?"Month":"Time",color:"#ffffff",exponentformat:"power"},yaxis:{title:"".concat(i.Long_Name.length>35?i.Long_Name.slice(0,35)+"...":i.Long_Name," [").concat(i.Unit,"]"),color:"#ffffff",exponentformat:"power"},annotations:$a.annotations(i.Distributor,i.Data_Source)})}))}))),yt={setLoadingMessage:de.h,csvFromVizRequestSend:oe.n},St=Object(d.b)(null,yt)(Object(v.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:q.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){e.setLoadingMessage;var a=e.csvFromVizRequestSend,t=e.chart.data,n=t.stds,r=t.variableValues,o=t.depths,s=t.parameters,i=t.metadata,c=m.a.useState(!0),p=Object(y.a)(c,2),u=p[0],d=p[1],h=m.a.useState(!!(r&&r.length<=40)),g=Object(y.a)(h,2),b=g[0],f=g[1],x=t,v=m.a.useState({opacity:.2,color:"#ff1493",size:6}),S=Object(y.a)(v,2),E=S[0],C=S[1],O=r.map((function(e,a){return"Depth: ".concat(Object(gt.a)(".2f")(o[a])," [m] <br>").concat(s.fields,": ").concat(Object(gt.a)(".2e")(e)," \xb1 ").concat(Object(gt.a)(".2e")(n[a])," [").concat(i.Unit,"]")})),A=x.isMonthly?new Date(s.dt1).getMonth()+1:s.dt1,w=x.isMonthly?new Date(s.dt2).getMonth()+1:s.dt2,D=A===w?qa(A,x.hasHour,x.isMonthly):qa(A,x.hasHour,x.isMonthly)+" to "+qa(w,x.hasHour,x.isMonthly);return m.a.createElement("div",null,m.a.createElement(pt,{downloadCsv:function(){a(t,i.Table_Name,i.Variable,i.Long_Name)},handleMarkerOptionsConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),C(a)}),100)},markerOptions:E,showErrorBars:b,handleSetShowErrorBars:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),f(a)}),50)},showLines:u,handleSetShowLines:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),d(a)}),50)},chart:e.chart}),m.a.createElement(Ya.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{mode:u?"lines+markers":"markers",y:o,x:r,error_x:{type:"data",array:n,opacity:.3,color:b?"#f2f2f2":"transparent",visible:!0},name:"".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name),type:r.length>1e4?"scattergl":"scatter",marker:{line:{color:E.color},opacity:E.opacity,size:E.size,color:E.color},hoverinfo:"text",hovertext:O}],config:Object(l.a)({},$a.config),layout:Object(l.a)(Object(l.a)({},$a.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(i.Dataset_Name)+"<br>".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name," [").concat(i.Unit,"]")+"<br>".concat(D,", ")+"".concat(s.depth1,"[m] to ").concat(s.depth2,"[m] <br>")+"Lat: ".concat(s.lat1,"\xb0 to ").concat(s.lat2,"\xb0, ")+"Lon: ".concat(s.lon1,"\xb0 to ").concat(s.lon2,"\xb0"),font:{size:12}},yaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power",autorange:"reversed"},xaxis:{title:"".concat(i.Long_Name.length>35?i.Long_Name.slice(0,35)+"...":i.Long_Name," [").concat(i.Unit,"]"),color:"#ffffff",exponentformat:"power"},annotations:$a.annotations(i.Distributor,i.Data_Source)})}))}))),Et={setLoadingMessage:de.h,snackbarOpen:de.n,csvFromVizRequestSend:oe.n},Ct=Object(d.b)(null,Et)(Object(v.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:q.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){var a=e.classes,t=e.snackbarOpen,n=e.csvFromVizRequestSend,r=e.chart.data,o=r.dates,s=r.extent,i=r.lats,c=r.lons,p=r.metadata,d=Object(u.useState)(!1),h=Object(y.a)(d,2),g=h[0],b=h[1],x=Object(u.useState)(!1),v=Object(y.a)(x,2),S=v[0],E=v[1],C=Object(u.useState)(r.orientation),O=Object(y.a)(C,2),A=O[0],w=O[1],D=Object(u.useState)("heatmap"),N=Object(y.a)(D,2),T=N[0],L=N[1],M=Object(u.useState)([r.zMin,r.zMax]),k=Object(y.a)(M,2),P=k[0],j=k[1],z=Object(y.a)(P,2),I=z[0],R=z[1],_="zonal"===A?i:c,F=function(e,a,t,n,r,o,s,i){var c=a.parameters,p=a.metadata,u=Array.from(a.dates),d=Array.from(a.depths),h=Array.from(a.lats),g=Array.from(a.lons),b="zonal"===r?h:g,x="zonal"===r?"Longitude":"Latitude",v=c.lon1>c.lon2&&"zonal"===r?dt(a):{};return e.map((function(e,y){var S=e,E=[],C=[];if("zonal"===r)for(var O=0;O<e.length;O++)E.push(g[Math.floor(O/d.length)]);else for(var A=0;A<e.length;A++)E.push(h[Math.floor(A/d.length)]);for(var w=0;w<e.length;w++)C.push(d[w%d.length]);var D="meridional"===r?"".concat(c.lat1,"\xb0 to ").concat(c.lat2,"\xb0"):n?b[y%b.length]+"\xb0":"Averaged Values ".concat(c.lat1,"\xb0 to ").concat(c.lat2,"\xb0"),N="zonal"===r?"".concat(c.lon1,"\xb0 to ").concat(c.lon2,"\xb0"):n?b[y%b.length]+"\xb0":"Averaged Values ".concat(c.lon1,"\xb0 to ").concat(c.lon2,"\xb0"),T=u.length<2?qa(u[0],a.hasHour,a.isMonthly):t&&n?qa(u[Math.floor(y/b.length)],a.hasHour,a.isMonthly):t?qa(u[y],a.hasHour,a.isMonthly):"Averaged Values "+qa(u[0],a.hasHour,a.isMonthly)+" to "+qa(u[u.length-1],a.hasHour,a.isMonthly),L=S.map((function(e,a){if("zonal"===r){var t=e>1&&e<1e3?".2f":".2e";return isNaN(e)?"Depth: ".concat(Object(gt.a)(".2f")(C[a])," [m]")+"<br>"+"Lon: ".concat(Object(gt.a)(".2f")(E[a]>180?E[a]-360:E[a]),"\xb0"):"Depth: ".concat(Object(gt.a)(".2f")(C[a])," [m]")+"<br>"+"Lon: ".concat(Object(gt.a)(".2f")(E[a]>180?E[a]-360:E[a]),"\xb0")+"<br>"+"".concat(c.fields,": ").concat(Object(gt.a)(t)(e)," [").concat(p.Unit,"]")}var n=e>1&&e<1e3?".2f":".2e";return isNaN(e)?"Depth: ".concat(Object(gt.a)(".2f")(C[a])," [m]")+"<br>"+"Lat: ".concat(Object(gt.a)(".2f")(E[a]),"\xb0"):"Depth: ".concat(Object(gt.a)(".2f")(C[a])," [m]")+"<br>"+"Lat: ".concat(Object(gt.a)(".2f")(E[a]),"\xb0")+"<br>"+"".concat(c.fields,": ").concat(Object(gt.a)(n)(e)," [").concat(p.Unit,"]")}));return m.a.createElement(Ya.a,{style:{position:"relative",width:"60vw",height:"40vw",minWidth:"510px",minHeight:"340px"},useResizeHandler:!0,data:[{zauto:!1,zmin:s,zmax:i,connectgaps:!1,autocolorscale:!1,colorscale:o,zsmooth:e.length<2e4?"best":"fast",x:E,y:C,z:S,name:c.fields,type:a.subType===f.a.contourSectionMap?"contour":"heatmap",colorbar:{title:{text:"[".concat(p.Unit,"]")},exponentformat:"power"},contours:{coloring:o,showlabels:!0,labelfont:{family:"Raleway",size:12,color:"white"},labelformat:".2e"},hoverinfo:"text",hovertext:L}],key:y,layout:{font:{color:"#ffffff"},title:{text:"".concat(p.Dataset_Name)+"<br>".concat(p.Long_Name.length>60?p.Long_Name.slice(0,60)+"...":p.Long_Name," [").concat(p.Unit,"]")+"<br>".concat(T,", ")+"".concat(c.depth1,"[m] to ").concat(c.depth2,"[m] <br>")+"Lat: ".concat(D,", ")+"Lon: ".concat(N),font:{size:12}},xaxis:Object(l.a)({title:"".concat(x,"[\xb0]"),color:"#ffffff",exponentformat:"power"},v),yaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power",autorange:"reversed"},paper_bgcolor:q.a.backgroundGray,annotations:$a.annotations(p.Distributor,p.Data_Source)}})}))}(r.generatePlotData(A,g,S),r,g,S,A,T,I,R);return m.a.createElement("div",null,m.a.createElement("div",{className:a.buttonBlock},m.a.createElement(pt,{orientation:A,switchOrientation:function(){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),w("zonal"===A?"meridional":"zonal")}),100)},onToggleSplitBySpace:1===_.size?null:function(){var a=g?o.size:1;!S&&a*_.size>20?t("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),E(!S)}),100))},splitBySpace:S,onToggleSplitByDate:1===o.size?null:function(){var a=S?_.size:1;!g&&a*o.size>20?t("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),b(!g)}),100))},splitByDate:g,handlePaletteChoice:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),L(a)}),100)},handleZValueConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),j(a)}),100)},zValues:P,extent:s,downloadCsv:function(){n(r,p.Table_Name,p.Variable,p.Long_Name)},chart:e.chart})),F)}))),Ot=function(e){var a,t=e.xValues,n=e.yValues,r=e.markerOptions,o=e.infoObject,s=e.xTitle,i=e.yTitle,c=e.type,p=o.parameters,u=o.metadata,d=o.hasDepth,h=o.variableValues,g=o.times,b=o.lats,f=o.lons,x=o.depths;switch(c){case"time":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e",n=g[a].slice(0,20);return n=n.replace("T"," "),"Time: ".concat(n,"<br>").concat(p.fields,": ").concat(Object(gt.a)(t)(e)," [").concat(u.Unit,"]")}));break;case"latitude":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e";return"Lat: ".concat(b[a].toFixed(2),"<br>").concat(p.fields,": ").concat(Object(gt.a)(t)(e)," [").concat(u.Unit,"]")}));break;case"longitude":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e";return"Lon: ".concat(f[a].toFixed(2),"<br>").concat(p.fields,": ").concat(Object(gt.a)(t)(e)," [").concat(u.Unit,"]")}));break;case"depth":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e";return"Depth: ".concat(x[a].toFixed(2),"<br>").concat(p.fields,": ").concat(Object(gt.a)(t)(e)," [").concat(u.Unit,"]")}));break;default:a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e",n=g[a].slice(0,20);return n=n.replace("T"," "),"Time: ".concat(n,"<br>").concat(p.fields,": ").concat(Object(gt.a)(t)(e)," [").concat(u.Unit,"]")}))}var v=p.dt1===p.dt2?qa(p.dt1):qa(p.dt1)+" to "+qa(p.dt2),y=p.lat1===p.lat2?p.lat1+"\xb0":p.lat1+"\xb0 to "+p.lat2+"\xb0",S=p.lon1===p.lon2?p.lon1+"\xb0":p.lon1+"\xb0 to "+p.lon2+"\xb0",E=d?p.depth1===p.depth2?"".concat(p.depth1,"[m]"):"".concat(p.depth1,"[m] to ").concat(p.depth2,"[m]"):"Surface";return m.a.createElement(Ya.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{x:t,y:n,mode:"markers",name:"".concat(u.Long_Name.length>60?u.Long_Name.slice(0,60)+"...":u.Long_Name),type:h.length>1e4?"scattergl":"scatter",marker:{opacity:r.opacity,size:r.size,color:r.color},hoverinfo:"text",hovertext:a}],config:Object(l.a)({},$a.config),layout:Object(l.a)(Object(l.a)({},$a.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(u.Dataset_Name)+"<br>".concat(u.Long_Name.length>60?u.Long_Name.slice(0,60)+"...":u.Long_Name," [").concat(u.Unit,"]")+"<br>".concat(v,", ")+E+"<br>Lat: ".concat(y,", ")+"Lon: ".concat(S),font:{size:12}},xaxis:{title:s,color:"#ffffff",exponentformat:"power"},yaxis:{title:i,color:"#ffffff",exponentformat:"power",autorange:"depth"!==c||"reversed"},annotations:$a.annotations(u.Distributor,u.Data_Source)})})},At={setLoadingMessage:de.h,csvFromVizRequestSend:oe.n};function wt(e){return{id:"sparse-tab-".concat(e),"aria-controls":"sparse-tab-".concat(e)}}var Dt=function(e){var a=e.children,t=e.selectedTab,n=e.index,r=e.controlPanelProps;return m.a.createElement("div",{hidden:t!==n},m.a.createElement(pt,Object.assign({},r,{chart:e.chart})),a)},Nt=m.a.memo((function(e){var a=e.classes,t=e.csvFromVizRequestSend,n=e.chart.data,r=n.metadata,o=Object(u.useState)("Heatmap"),s=Object(y.a)(o,2),i=s[0],c=s[1],p=Object(u.useState)([n.zMin,n.zMax]),d=Object(y.a)(p,2),h=d[0],g=d[1],b=Object(u.useState)({opacity:.7,color:"#ff1493",size:6}),f=Object(y.a)(b,2),x=f[0],v=f[1],S=Object(u.useState)(0),E=Object(y.a)(S,2),C=E[0],O=E[1],A=function(e,a,t){var n=e.parameters,r=e.metadata,o=n.dt1===n.dt2?qa(n.dt1):qa(n.dt1)+" to "+qa(n.dt2),s=n.lat1===n.lat2?n.lat1+"\xb0":n.lat1+"\xb0 to "+n.lat2+"\xb0",i=n.lon1===n.lon2?n.lon1+"\xb0":n.lon1+"\xb0 to "+n.lon2+"\xb0",c=e.hasDepth?n.depth1===n.depth2?"".concat(n.depth1,"[m]"):"".concat(n.depth1,"[m] to ").concat(n.depth2,"[m]"):"Surface";return m.a.createElement(Ya.a,{style:{position:"relative",width:"60vw",height:"40vw",minWidth:"510px",minHeight:"340px"},useResizeHandler:!0,data:[{zauto:!1,zmin:t[0],zmax:t[1],lon:e.lons,lat:e.lats,z:e.variableValues,autocolorscale:!1,colorscale:a,radius:6,name:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),type:"densitymapbox",colorbar:{title:{text:"[".concat(e.metadata.Unit,"]")},exponentformat:"power"}}],layout:Object(l.a)(Object(l.a)({},$a.layout),{},{title:{text:"".concat(r.Dataset_Name)+"<br>".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name," [").concat(r.Unit,"]")+"<br>".concat(o,", ")+c+"<br>Lat: ".concat(s,", ")+"Lon: ".concat(i),font:{size:12}},mapbox:{style:"white-bg",layers:[{sourcetype:"raster",source:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],below:"traces"}],center:e.center,zoom:e.zoom},annotations:$a.annotations(e.metadata.Distributor,r.Data_Source)}),config:Object(l.a)(Object(l.a)({},$a.config),{},{mapboxAccessToken:"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w"})})}(n,i,h),w=function(){t(n,r.Table_Name,r.Variable,r.Long_Name)},D={map:{palette:i,handlePaletteChoice:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),c(a)}),100)},zValues:h,handleZValueConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),g(a)}),100)},downloadCsv:w},scatter:{downloadCsv:w,markerOptions:x,setMarkerOptions:v,handleMarkerOptionsConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),v(a)}),100)}}};return m.a.createElement("div",null,m.a.createElement(Sa.a,{value:C,onChange:function(e,a){O(a)},"aria-label":"Sparse tabs",centered:!0,indicatorColor:"primary",className:a.tabs},m.a.createElement(Ea.a,Object.assign({label:"Map"},wt(0),{className:a.tab,onClick:function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),30)}})),m.a.createElement(Ea.a,Object.assign({label:"By Time"},wt(1),{className:a.tab})),m.a.createElement(Ea.a,Object.assign({label:"By Lat"},wt(2),{className:a.tab})),m.a.createElement(Ea.a,Object.assign({label:"By Lon"},wt(3),{className:a.tab})),n.hasDepth&&m.a.createElement(Ea.a,Object.assign({label:"By Depth"},wt(4),{className:a.tab}))),m.a.createElement(Dt,{selectedTab:C,index:0,controlPanelProps:D.map,chart:e.chart},0===C&&A),m.a.createElement(Dt,{selectedTab:C,index:1,controlPanelProps:D.scatter,chart:e.chart},1===C&&m.a.createElement(Ot,{xValues:n.times,yValues:n.variableValues,markerOptions:x,infoObject:n,xTitle:"Time",yTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name," [").concat(r.Unit,"]"),type:"time"})),m.a.createElement(Dt,{selectedTab:C,index:2,controlPanelProps:D.scatter,chart:e.chart},2===C&&m.a.createElement(Ot,{xValues:n.lats,yValues:n.variableValues,markerOptions:x,infoObject:n,xTitle:"Latitude",yTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),type:"latitude"})),m.a.createElement(Dt,{selectedTab:C,index:3,controlPanelProps:D.scatter,chart:e.chart},3===C&&m.a.createElement(Ot,{xValues:n.lons,yValues:n.variableValues,markerOptions:x,infoObject:n,xTitle:"Longitude",yTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),type:"longitude"})),n.hasDepth&&m.a.createElement(Dt,{selectedTab:C,index:4,controlPanelProps:D.scatter,chart:e.chart},4===C&&m.a.createElement(Ot,{xValues:n.variableValues,yValues:n.depths,markerOptions:x,infoObject:n,xTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),yTitle:"Depth[m]",type:"depth"})))})),Tt=Object(d.b)(null,At)(Object(v.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:q.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},tabs:{marginBottom:e.spacing(2)},tab:{boxShadow:"1px 1px 1px 1px #242424",fontSize:"15px",textTransform:"none",color:e.palette.primary.main}}}))(Nt)),Lt={deleteChart:oe.q},Mt=Object(v.a)({closeChartIcon:{float:"right",marginTop:"-12px",marginRight:"-8px"}})((function(e){var a=e.classes;return m.a.createElement(m.a.Fragment,null,m.a.createElement(N.a,{className:a.closeChartIcon,color:"inherit",onClick:function(){return e.handleDeleteChart(e.chartIndex)},disableFocusRipple:!0,disableRipple:!0},m.a.createElement(Wa.a,null)))})),kt=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).handleDeleteChart=function(a){e.props.deleteChart(a)},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.charts;a.plotsActiveTab;return m.a.createElement(m.a.Fragment,null,n.map((function(a,n){switch(a.data.parameters.spName){case x.a.spaceTime:return a.subType===f.a.sparse?m.a.createElement("div",{key:a.id},m.a.createElement(P.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Mt,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Tt,{chart:a}))):a.data.metadata.Spatial_Resolution===me.a.irregular?m.a.createElement("div",{key:a.id},m.a.createElement(P.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Mt,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(mt,{chart:a}))):m.a.createElement("div",{key:a.id},m.a.createElement(P.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Mt,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(ft,{chart:a})));case x.a.timeSeries:return m.a.createElement("div",{key:a.id},m.a.createElement(P.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Mt,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(vt,{chart:a})));case x.a.depthProfile:return m.a.createElement("div",{key:a.id},m.a.createElement(P.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Mt,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(St,{chart:a})));case x.a.sectionMap:return m.a.createElement("div",{key:a.id},m.a.createElement(P.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Mt,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Ct,{chart:a})));default:return""}})))}}]),t}(u.Component),Pt=Object(d.b)((function(e,a){return{charts:e.charts,plotsActiveTab:e.plotsActiveTab}}),Lt)(Object(v.a)((function(e){return{chartPaper:{backgroundColor:q.a.backgroundGray,marginBottom:"5h",paddingTop:e.spacing(1),boxShadow:"2px 2px 2px 2px #242424",width:"max-content",margin:"0 auto 5vh auto","@media (min-width: 1280px)":{textAlign:"left",margin:"0 0 5vh 360px"}}}}))(kt)),jt=t(873),zt=t(59),It=t(715),Rt=function(e,a){var t={};return a.forEach((function(e){return t[e]=new Set})),e.forEach((function(e){a.forEach((function(a){Array.isArray(e[a])?e[a].forEach((function(e){return t[a].add(e)})):e[a]&&t[a].add(e[a])}))})),t},_t={cruiseListRequestSend:oe.f,cruiseTrajectoryRequestSend:oe.j,cruiseTrajectoryClear:oe.h},Ft='"Avenir Next W00","Helvetica Neue",Helvetica,Arial,sans-serif',Vt=function(e,a,t,n,r,o,l){e=Object(zt.a)(e),a&&(e=l.search(a)),t&&t.size&&(e=e.filter((function(e){return t.has(e.Year)}))),n&&n.size&&(e=e.filter((function(e){return n.has(e.Chief_Name)}))),r&&r.size&&(e=e.filter((function(e){return e.Regions.some((function(e){return r.has(e)}))}))),o&&o.size&&(e=e.filter((function(e){return o.has(e.Series)})));var s=e.reduce((function(e,a){return e[a.Year]||(e[a.Year]=[]),e[a.Year].push(a),e}),{});return{cruisesGroupedByYear:s=Object.keys(s).map((function(e){return{year:e,cruises:s[e]}})).sort((function(e,a){return e.year<a.year?1:-1})),cruises:e}},Bt={selectedYears:new Set,selectedChiefScientists:new Set,selectedRegions:new Set,searchField:"",openYearGroup:null,selectedSeries:new Set},Ht=(new Set,new Set,new Set,new Set,m.a.createRef()),Gt=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(e){var n;Object(s.a)(this,t),(n=a.call(this,e)).componentDidMount=function(){n.props.handleShowGlobe(),n.props.cruiseList&&n.props.cruiseList.length||n.props.cruiseListRequestSend()},n.componentWillUnmount=function(){n.props.cruiseTrajectoryClear()},n.handleCruiseSelect=function(e){e&&n.props.cruiseTrajectoryRequestSend(e.ID),n.setState(Object(l.a)(Object(l.a)({},n.state),{},{selectedCruise:e,searchMenuOpen:!1}))},n.componentDidUpdate=function(e,a){if((!e.cruiseList||!e.cruiseList.length)&&n.props.cruiseList&&n.props.cruiseList.length){n.state.search.addDocuments(n.props.cruiseList);var t=Vt(n.props.cruiseList,"",new Set,new Set,new Set,new Set,n.state.search),r=t.cruisesGroupedByYear,o=t.cruises,s=Rt(o,["Chief_Name","Year","Regions","Series"]);n.setState(Object(l.a)(Object(l.a)({},n.state),{},{cruisesGroupedByYear:r,cruises:o,optionSets:s}))}a.cruisesGroupedByYear!==n.state.cruisesGroupedByYear&&Ht.current.resetAfterIndex(0)},n.handleChangeSearchValue=function(e){var a=Vt(n.props.cruiseList,e.target.value,n.state.selectedYears,n.state.selectedChiefScientists,n.state.selectedRegions,n.state.selectedSeries,n.state.search),t=a.cruisesGroupedByYear,r=a.cruises,o=Rt(r,["Chief_Name","Year","Regions","Series"]),s=Object(l.a)({},n.state.optionSets),i={Chief_Name:n.state.selectedChiefScientists.size?s.Chief_Name:o.Chief_Name,Year:n.state.selectedYears.size?s.Year:o.Year,Regions:n.state.selectedRegions.size?s.Regions:o.Regions,Series:n.state.selectedSeries.size?s.Series:o.Series};n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchField:e.target.value,cruisesGroupedByYear:t,cruises:r,optionSets:i}))},n.handleCloseSearch=function(){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchMenuOpen:!1}))},n.handleClearMultiSelect=function(e){var a=Object(l.a)(Object(l.a)({},n.state),{},{[e]:new Set}),t=Vt(n.props.cruiseList,a.searchField,a.selectedYears,a.selectedChiefScientists,a.selectedRegions,a.selectedSeries,n.state.search),r=t.cruisesGroupedByYear,o=t.cruises,s=Rt(o,["Chief_Name","Year","Regions","Series"]);n.setState(Object(l.a)(Object(l.a)({},a),{},{cruisesGroupedByYear:r,cruises:o,optionSets:s}))},n.handleResetSearch=function(){var e=Object(l.a)(Object(l.a)({},n.state),Bt),a=Vt(n.props.cruiseList,e.searchField,e.selectedYears,e.selectedChiefScientists,e.selectedRegions,e.selectedSeries,n.state.search),t=a.cruisesGroupedByYear,r=a.cruises,o=Rt(r,["Chief_Name","Year","Regions","Series"]);n.setState(Object(l.a)(Object(l.a)({},e),{},{cruisesGroupedByYear:t,cruises:r,optionSets:o}))},n.handleClickCheckbox=function(e,a){var t=e.target.name.split("!!"),r=Object(y.a)(t,2),o=r[0],s=r[1],i=new Set(n.state[o]);a?i.add(s):i.delete(s);var c=Object(l.a)(Object(l.a)({},n.state),{},{[o]:i}),p=Vt(n.props.cruiseList,e.target.value,c.selectedYears,c.selectedChiefScientists,c.selectedRegions,c.selectedSeries,n.state.search),u=p.cruisesGroupedByYear,m=p.cruises,d=Rt(m,["Chief_Name","Year","Regions","Series"]),h=Object(l.a)({},n.state.optionSets),g={Chief_Name:c.selectedChiefScientists.size?h.Chief_Name:d.Chief_Name,Year:c.selectedYears.size?h.Year:d.Year,Regions:c.selectedRegions.size?h.Regions:d.Regions,Series:c.selectedSeries.size?h.Series:d.Series};n.setState(Object(l.a)(Object(l.a)({},c),{},{cruisesGroupedByYear:u,cruises:m,optionSets:g}))},n.handleSetopenYearGroup=function(e,a){if(Ht.current){var t=n.props.windowHeight-249,r=Ht.current.state.scrollOffset,o=38*e;null!==e&&(o<r-10||o>r+t-20)&&setTimeout((function(){return Ht.current.scrollToItem(e,"start")}),10),Ht.current.resetAfterIndex(0)}n.setState(Object(l.a)(Object(l.a)({},n.state),{},{openYearGroup:n.state.openYearGroup===a?null:a}))};var r=new It.Search("ID");r.searchIndex=new It.UnorderedSearchIndex,r.addIndex("Nickname"),r.addIndex("Name"),r.addIndex("Chief_Name"),r.addIndex("Keywords");try{e.cruiseList&&e.cruiseList.length&&r.addDocuments(e.cruiseList)}catch(u){console.log(u),console.log(e.cruiseList)}var o=n.props.cruiseList&&n.props.cruiseList.length?Vt(e.cruiseList,"",new Set,new Set,new Set,new Set,r):{cruisesGroupedByYear:[],cruises:[]},i=o.cruisesGroupedByYear,c=o.cruises,p=Rt(c,["Chief_Name","Year","Regions","Series"]);return n.state=Object(l.a)({search:r,selectedCruise:null,searchMenuOpen:!1,cruisesGroupedByYear:i,cruises:c,optionSets:p},Bt),n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.searchField,n=a.selectedCruise,r=a.searchMenuOpen,o=a.selectedYears,s=a.selectedChiefScientists,i=a.selectedRegions,c=a.selectedSeries,p=a.openYearGroup,u=a.optionSets,d=a.cruisesGroupedByYear,h=a.cruises,g=this.props,b=g.classes,f=g.windowHeight;return m.a.createElement(m.a.Fragment,null,m.a.createElement(P.a,{className:b.searchMenuPaper,style:r?{}:{display:"none"}},m.a.createElement(M.a,{container:!0},m.a.createElement(M.a,{item:!0,xs:12},m.a.createElement(w.a,{style:{display:"inline-block"}},"Search and filter using the controls on the left. Select a cruise from the list on the right."),m.a.createElement(ye.a,{startIcon:m.a.createElement(K.a,{style:{fontSize:"22px"}}),onClick:this.handleCloseSearch,className:b.closeIcon},"Close")),m.a.createElement(M.a,{item:!0,xs:4,style:{overflowY:"auto",maxHeight:f-204,padding:"16px",backgroundColor:"rgba(0,0,0,.4)"}},m.a.createElement(k.a,{fullWidth:!0,name:"searchTerms",onChange:this.handleChangeSearchValue,placeholder:"Search",value:t,InputProps:{classes:{root:b.inputRoot},startAdornment:m.a.createElement(m.a.Fragment,null,m.a.createElement(ea.a,{position:"start"},m.a.createElement(_.a,{style:{color:q.a.primary}})))},variant:"outlined"}),m.a.createElement(ga.a,{options:Array.from(u.Regions).sort(),selectedOptions:i,handleClear:function(){return e.handleClearMultiSelect("selectedRegions")},parentStateKey:"selectedRegions",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Region"}),m.a.createElement(ga.a,{options:Array.from(u.Year).sort((function(e,a){return e<a?1:-1})),selectedOptions:o,handleClear:function(){return e.handleClearMultiSelect("selectedYears")},parentStateKey:"selectedYears",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Year"}),m.a.createElement(ga.a,{options:Array.from(u.Chief_Name).sort(),selectedOptions:s,handleClear:function(){return e.handleClearMultiSelect("selectedChiefScientists")},parentStateKey:"selectedChiefScientists",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Chief Scientist"}),m.a.createElement(ga.a,{options:Array.from(u.Series).sort(),selectedOptions:c,handleClear:function(){return e.handleClearMultiSelect("selectedSeries")},parentStateKey:"selectedSeries",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Cruise Series"}),m.a.createElement(M.a,{item:!0,xs:12,className:b.searchPanelRow},m.a.createElement(ye.a,{variant:"outlined",onClick:this.handleResetSearch,className:b.resetButton},"Reset Filters"))),m.a.createElement(M.a,{item:!0,xs:8,style:{paddingTop:"12px"}},m.a.createElement(M.a,{container:!0},m.a.createElement(M.a,{item:!0,xs:9},m.a.createElement(w.a,{className:b.heading},"Showing ",h.length," cruises (grouped by year)")),m.a.createElement(M.a,{item:!0,xs:3,container:!0,justify:"flex-start",alignItems:"center"},m.a.createElement(w.a,{variant:"caption",style:{color:q.a.primary,marginBottom:"-16px"}},"Cruise Count"))),m.a.createElement(C.b,{ref:Ht,itemData:d,itemCount:d.length,height:f-249,width:"100%",estimatedItemSize:38,style:{overflowY:"scroll"},itemSize:function(e){return p===d[e].year?32*d[e].cruises.length+38+4+10:38}},(function(a){var t=a.index,n=a.style;return m.a.createElement("div",{style:n},m.a.createElement(M.a,{container:!0,className:b.searchOption,onClick:function(){return e.handleSetopenYearGroup(t,d[t].year)}},m.a.createElement(M.a,{item:!0,xs:2,container:!0,alignItems:"center"},p===d[t].year?m.a.createElement(ra.a,{className:b.datasetOpenIcon}):m.a.createElement(V.a,{className:b.datasetOpenIcon}),m.a.createElement("span",{className:b.searchOptionsMenuItemText},d[t].year)),m.a.createElement(M.a,{item:!0,xs:7}),m.a.createElement(D.a,{title:"".concat(d[t].cruises.length," cruises from this year match the search criteria")},m.a.createElement(M.a,{item:!0,xs:1,className:b.memberCount,container:!0,alignItems:"center",justify:"center"},d[t].cruises.length))),d[t].year===p?m.a.createElement(M.a,{container:!0,className:b.variablesWrapper},m.a.createElement(M.a,{item:!0,container:!0,alignItems:"center"},m.a.createElement(M.a,{item:!0,xs:1}," "),m.a.createElement(M.a,{item:!0,xs:2,className:b.cruiseYearHeader},"Official Designation"),m.a.createElement(M.a,{item:!0,xs:8,className:b.cruiseYearHeader},"Nickname")),d[t].cruises.map((function(a,t){return m.a.createElement(M.a,{item:!0,xs:12,key:a.Name,className:b.variableItem,container:!0,alignItems:"center",onClick:function(){return e.handleCruiseSelect(a)}},m.a.createElement(M.a,{item:!0,xs:1}),m.a.createElement(M.a,{item:!0,xs:2,className:b.cruiseName},a.Name),m.a.createElement(D.a,{title:a.Nickname,enterDelay:300},m.a.createElement(M.a,{item:!0,xs:8,className:b.cruiseName},a.Nickname)))}))):"")}))))),m.a.createElement("div",{id:"cruise-selector",className:b.outerDiv},m.a.createElement(P.a,{className:b.openSearchButtonPaper},m.a.createElement(ye.a,{startIcon:m.a.createElement(_.a,null),className:b.openSearchButton,onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{searchMenuOpen:!0}))}},"Search Cruises")),n&&m.a.createElement(m.a.Fragment,null,m.a.createElement(ee.a,{size:"small",className:b.cruiseInfo},m.a.createElement(ae.a,null,m.a.createElement(te.a,null,m.a.createElement(ne.a,{className:b.cruiseInfoCell},"Cruise:"),m.a.createElement(ne.a,{className:b.cruiseInfoCell},n.Name)),m.a.createElement(te.a,null,m.a.createElement(ne.a,{className:b.cruiseInfoCell},"Nickname:"),m.a.createElement(ne.a,{className:b.cruiseInfoCell},n.Nickname)),n.Start_Time&&m.a.createElement(te.a,null,m.a.createElement(ne.a,{className:b.cruiseInfoCell},"Start Date:"),m.a.createElement(ne.a,{className:b.cruiseInfoCell},n.Start_Time.slice(0,10))),n.End_Time&&m.a.createElement(te.a,null,m.a.createElement(ne.a,{className:b.cruiseInfoCell},"End Date:"),m.a.createElement(ne.a,{className:b.cruiseInfoCell},n.End_Time.slice(0,10))),n.Chief_Name&&m.a.createElement(te.a,null,m.a.createElement(ne.a,{className:b.cruiseInfoCell},"Chief Scientist:"),m.a.createElement(ne.a,{className:b.cruiseInfoCell},n.Chief_Name)),n.Ship_Name&&m.a.createElement(te.a,null,m.a.createElement(ne.a,{className:b.cruiseInfoCell},"Ship:"),m.a.createElement(ne.a,{className:b.cruiseInfoCell},n.Ship_Name)))),m.a.createElement("div",{className:b.linkWrapper},m.a.createElement(aa.a,{component:Ra.b,to:"/catalog/cruises/".concat(n.Name),target:"_blank"},"Open Cruise Catalog Page")))))}}]),t}(u.Component),Yt=Object(d.b)((function(e,a){return{cruiseList:e.cruiseList,getCruiseListState:e.getCruiseListState,windowHeight:e.windowHeight}}),_t)(Object(v.a)((function(e){return{outerDiv:{padding:"12px",maxWidth:"360px",backgroundColor:"transparent",color:"white",borderRadius:"4px",boxShadow:"2px",backdropFilter:"blur(2px)",transform:"translateY(35px)",marginTop:"24px",position:"fixed",left:0,top:140},cruiseInfo:{color:"white",fontFamily:Ft,margin:"12px auto 0 auto"},cruiseInfoCell:{color:"white",fontFamily:Ft,borderStyle:"none"},linkWrapper:{padding:"12px",fontSize:"14px"},searchMenuPaper:{position:"fixed",top:120,bottom:60,left:0,width:"98vw",height:"auto",zIndex:1500,backgroundColor:"rgba(0,0,0,.6)",backdropFilter:"blur(5px)"},closeIcon:{float:"right",cursor:"pointer",color:q.a.primary,textTransform:"none",fontSize:"15px"},inputRoot:{border:"1px solid ".concat(q.a.primary)},openSearchButtonPaper:{backgroundColor:q.a.backgroundGray,boxShadow:"1px 1px 1px 1px #242424"},openSearchButton:{textTransform:"none",color:q.a.primary,fontSize:"15px",padding:"6px 42px"},resetButton:{textTransform:"none",width:"160px",height:"37px",color:e.palette.primary.main,borderColor:e.palette.primary.main,marginTop:"12px"},yearHeader:{backgroundColor:"rgba(0, 0, 0, .7)",height:"36px",fontSize:"17px",display:"flex",alignItems:"center",justifyCOntent:"center"},searchOption:{"&:hover":{backgroundColor:q.a.greenHover},cursor:"pointer",height:"38px",boxShadow:"0px 1px 1px 1px #242424",backgroundColor:"rgba(0,0,0,.4)"},memberCount:{color:q.a.primary,fontWeight:"bold"},variablesWrapper:{backgroundColor:"rgba(0,0,0,.2)",paddingTop:"6px"},variableItem:{height:"32px",textAlign:"left",fontSize:"14px",cursor:"pointer","&:hover":{backgroundColor:q.a.greenHover}},cruiseName:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},heading:{textAlign:"left",padding:"8px 6px",color:q.a.primary,fontSize:"16px",marginTop:"5px",backgroundColor:"rgba(0,0,0,.4)"},cruiseYearHeader:{textAlign:"left",fontSize:"9px",color:q.a.primary}}}))(Gt)),Wt=(t(840),{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:[0,255,255,.3]},outline:{color:[0,255,255,1],size:"2px"}}]}),Ut={type:"line-3d",symbolLayers:[{type:"line",size:"3px",material:{color:{r:0,g:255,b:255,a:0}}}]},qt=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).shouldComponentUpdate=function(e,a){return!1},n.sketchModel=new e.esriModules.SketchViewModel({layer:e.regionLayer,view:e.view,polygonSymbol:Wt,polylineSymbol:Ut,defaultUpdateOptions:{toggleToolOnClick:!1,tool:"transform"}}),n}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props.view;return e.ui.remove("zoom"),e.ui.remove("navigation-toggle"),e.ui.remove("compass"),e.ui.remove("attribution"),null}}]),t}(m.a.Component),$t=m.a.memo((function(e){var a=e.cruiseTrajectory,t=e.trajectoryLayer,n=e.esriModules;if(a){var r=a.lons,o=a.lats,l=Math.floor(r.length/2);t.removeAll();var s=[[]],i=0,c=r[0],p=o[0],u=0;r.forEach((function(e,a){var t=o[a],n=Math.abs(t-p),l=Math.abs(e-c),m=l>180?360-l:l,d=Math.sqrt(n*n+m*m);u=d>u?d:u,s[i].push([e,t]),a<r.length-1&&(e>160&&e<180&&r[a+1]>-180&&r[a+1]<-160&&(s.push([]),i++),e>-180&&e<-160&&e[a+1]>160&&e[a+1]<180&&(s.push([]),i++))}));var m={type:"line-3d",symbolLayers:[{type:"line",material:{color:[0,255,255,1]},cap:"round",join:"round",size:2}]};s.forEach((function(e){var a={type:"polyline",paths:e},r=new n.Graphic({geometry:a,symbol:m});t.add(r)}));try{var d=[r[l],o[l]],h=7-Math.floor(u/6);e.view.goTo({target:d,zoom:h},{maxDuration:2500,speedFactor:.5})}catch(g){console.log(g)}}else t.removeAll(),e.view.goTo({target:[-140,30],zoom:3},{maxDuration:2500,speedFactor:.5});return""})),Kt=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).render=function(){var e=n.props,a=e.classes,t=e.esriModules,r=(e.spParams,e.cruiseTrajectory),o=e.globeUIRef;return m.a.createElement("div",{className:a.container,id:"found-you"},m.a.createElement(jt.a,{mapProperties:{basemap:"satellite",layers:[n.regionLayer,n.trajectoryLayer]},viewProperties:{center:[-140,30],zoom:3,highlightOptions:{haloOpacity:0,haloColor:"rgba(0, 0, 0, 0)",fillOpacity:0,color:"rgba(0, 0, 0, 0)"}}},m.a.createElement($t,{cruiseTrajectory:r,trajectoryLayer:n.trajectoryLayer,esriModules:t}),m.a.createElement(qt,{updateDomainFromGraphicExtent:n.props.updateDomainFromGraphicExtent,esriModules:t,measurementPositions:n.props.measurementPositions,regionLayer:n.regionLayer,setShowHelp:function(e){return n.setState(Object(l.a)(Object(l.a)({},n.state),{},{showHelp:e}))},ref:o})))},n.state={showHelp:!1},n.regionLayer=new e.esriModules.GraphicsLayer,n.trajectoryLayer=new e.esriModules.GraphicsLayer,n}return t}(u.Component),Qt=Object(v.a)((function(e){return{container:{margin:"0 auto 0 auto",width:"100vw",height:"100vh"}}}))(Kt),Zt=function(e){var a=e.getFullYear(),t=e.getMonth()+1,n=e.getDate();return a.toString()+"-"+(t<10?"0"+t.toString():t.toString())+"-"+(n<10?"0"+n.toString():n.toString())},Jt=t(654),Xt=Object(v.a)((function(e){return{dialogPaper:{backgroundColor:"black",width:"400px",height:"180px"},button:{textTransform:"none",marginLeft:"20px",marginTop:"24px"}}}))(Object(h.f)((function(e){var a=e.history,t=e.classes;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Q.a,{open:!0,PaperProps:{className:t.dialogPaper}},m.a.createElement(Z.a,null,"Select a Visualization Module"),m.a.createElement(J.a,null,m.a.createElement(ye.a,{variant:"outlined",onClick:function(){return a.push("/visualization/charts")},className:t.button,color:"primary"},"Charts and Plots"),m.a.createElement(ye.a,{variant:"outlined",onClick:function(){return a.push("/visualization/cruises")},color:"primary",className:t.button},"Explore Cruises"))))}))),en=function(e){return{[f.a.sectionMap]:{sp:x.a.sectionMap,subType:f.a.sectionMap},[f.a.contourSectionMap]:{sp:x.a.sectionMap,subType:f.a.contourSectionMap},[f.a.timeSeries]:{sp:x.a.timeSeries,subType:f.a.timeSeries},[f.a.histogram]:{sp:x.a.spaceTime,subType:f.a.histogram},[f.a.depthProfile]:{sp:x.a.depthProfile,subType:f.a.depthProfile},[f.a.heatmap]:{sp:x.a.spaceTime,subType:f.a.heatmap},[f.a.contourMap]:{sp:x.a.spaceTime,subType:f.a.contourMap},[f.a.sparse]:{sp:x.a.spaceTime,subType:f.a.sparse}}[e]},an={showLoginDialog:de.l,queryRequestSend:oe.x,retrievalRequestSend:ba.p,storedProcedureRequestSend:oe.E,snackbarOpen:de.n,cruiseListRequestSend:oe.f,completedShowCharts:oe.c,datasetRetrievalRequestSend:ba.l,plotsActiveTabSet:oe.v,guestPlotLimitNotificationSetIsVisible:oe.s},tn={tableName:"",fields:null,depth1:0,depth2:0,dt1:new Date,dt2:new Date,lat1:0,lat2:0,lon1:0,lon2:0,selectedVizType:""},nn=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).globeUIRef=m.a.createRef(),e.mapContainerRef=m.a.createRef(),e.state={filteredData:[],opacity:1,showCharts:!1,showUI:!1,surfaceOnly:!1,irregularSpatialResolution:!1,showCruiseControl:!1,spParams:tn},e.componentWillUnmount=function(){document.title=Jt.a.default.title,document.description=Jt.a.default.description},e.handleChange=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{[a.target.name]:a.target.value})}))},e.handleLatLonChange=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{[a.target.name]:a.target.value})}))},e.handleStartDateChange=function(a){if(a){var t=new Date;t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{dt1:t})}))}},e.handleEndDateChange=function(a){if(a){var t=new Date;t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{dt2:t})}))}},e.onVisualize=function(){var a=e.state.spParams,t=a.depth1,n=a.depth2,r=a.dt1,o=a.dt2,l=a.lat1,s=a.lat2,i=a.lon1,c=a.lon2,p=a.selectedVizType,u=en(p),m={parameters:Ze({depth1:t,depth2:n,dt1:Zt(r),dt2:Zt(o),lat1:l,lat2:s,lon1:i,lon2:c,fields:e.state.spParams.fields&&e.state.spParams.fields.value,tableName:e.state.spParams.fields&&e.state.spParams.tableName,spName:u.sp}),subType:u.subType,metadata:e.state.spParams.fields&&e.state.spParams.fields.data};e.props.storedProcedureRequestSend(m)},e.handlePlotsSetActiveTab=function(a,t){e.props.plotsActiveTabSet(t)},e.updateFields=function(a){if(a){var t=!a.data.Depth_Max,n="Irregular"===a.data.Spatial_Resolution,r=he(a.data.Time_Max);r.setDate(r.getDate()+1);var o=a.data.Temporal_Resolution===ce.a.monthlyClimatology?e.state.spParams.dt1:he(a.data.Time_Min),s=a.data.Temporal_Resolution===ce.a.monthlyClimatology?e.state.spParams.dt2:n?r:he(a.data.Time_Min),i=Math.floor(1e3*a.data.Lat_Min)/1e3,c=Math.ceil(1e3*a.data.Lat_Max)/1e3,p=Math.floor(1e3*a.data.Lon_Min)/1e3,u=Math.ceil(1e3*a.data.Lon_Max)/1e3,m=n?i:e.state.spParams.lat1,d=n?c:e.state.spParams.lat2,h=n?p:e.state.spParams.lon1,g=n?u:e.state.spParams.lon2,b=n?a.data.Depth_Min||0:ge.a.piscesTable.has(a.data.Table_Name)||ge.a.darwinTable.has(a.data.Table_Name)?0:e.state.spParams.depth1,f=n?a.data.Depth_Max||0:ge.a.piscesTable.has(a.data.Table_Name)?((ge.a.piscesDepths[0]+ge.a.piscesDepths[1])/2).toFixed(2):ge.a.darwinTable.has(a.data.Table_Name)?(ge.a.darwinDepths[0]+ge.a.darwinDepths[1])/2:e.state.spParams.depth2;n&&e.globeUIRef.current.props.view.goTo({target:[(parseFloat(h)+parseFloat(g))/2,(parseFloat(m)+parseFloat(d))/2],zoom:3},{maxDuration:2500,speedFactor:.5});var x=a.data.Table_Name;e.setState(Object(l.a)(Object(l.a)({},e.state),{},{surfaceOnly:t,irregularSpatialResolution:n,spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{fields:a,dt1:o,dt2:s,lat1:m,lat2:d,lon1:h,lon2:g,depth1:b,depth2:f,tableName:x,selectedVizType:""})}))}else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{fields:a,tableName:""})}))},e.handleShowCharts=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showCharts:!0}))},e.handleShowGlobe=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showCharts:!1}))},e.handleShowCruiseControl=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showCruiseControl:!e.state.showCruiseControl}))},e.toggleShowUI=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showUI:!e.state.showUI}))},e.updateDomainFromGraphicExtent=function(a){for(var t=a.xmin;t<-180;)t+=360;for(;t>180;)t-=360;for(var n=a.xmax;n<-180;)n+=360;for(;n>180;)n-=360;var r={lat1:a.ymin.toFixed(3),lat2:a.ymax.toFixed(3),lon1:t.toFixed(3),lon2:n.toFixed(3)};e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),r)}))},e.resetSPParams=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:tn}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var a,t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title=Jt.a.visualization.title,document.description=Jt.a.visualization.description,a=["AreaMeasurement3D","Search","GraphicsLayer","SketchViewModel","Utils","Graphic"],e.next=5,Object(Ha.loadModules)(["esri/widgets/AreaMeasurement3D","esri/widgets/Search","esri/layers/GraphicsLayer","esri/widgets/Sketch/SketchViewModel","esri/geometry/support/webMercatorUtils","esri/Graphic"],{version:"4.14"});case 5:t=e.sent,n=a.reduce((function(e,a,n){return e[a]=t[n],e}),{}),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{esriModules:n}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.showChartsOnce&&(this.props.completedShowCharts(),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{showCharts:!0})))}},{key:"render",value:function(){var e=this,a=this.props.classes;return m.a.createElement("div",{className:a.vizWrapper},m.a.createElement(Ba,null),this.state.esriModules&&m.a.createElement("div",{className:"".concat(0===this.props.plotsActiveTab?"":a.displayNone)},m.a.createElement(Qt,{globeUIRef:this.globeUIRef,updateDomainFromGraphicExtent:this.updateDomainFromGraphicExtent,esriModules:this.state.esriModules,spParams:this.state.spParams,cruiseTrajectory:this.props.cruiseTrajectory,showCruiseControl:this.state.showCruiseControl,chartControlPanelRef:this.chartControlPanelRef,ref:this.mapContainerRef})),m.a.createElement(h.c,null,m.a.createElement(h.a,{exact:!0,path:"/visualization",component:Xt}),m.a.createElement(h.a,{path:"/visualization/charts",render:function(a){return m.a.createElement(Ia,Object.assign({},a,{toggleChartView:e.toggleChartView,toggleShowUI:e.toggleShowUI,handleChange:e.handleChange,handleLatLonChange:e.handleLatLonChange,handleStartDateChange:e.handleStartDateChange,handleEndDateChange:e.handleEndDateChange,showUI:e.state.showUI,onVisualize:e.onVisualize,updateFields:e.updateFields},e.state.spParams,{surfaceOnly:e.state.surfaceOnly,irregularSpatialResolution:e.state.irregularSpatialResolution,showCharts:e.state.showCharts,handleShowCharts:e.handleShowCharts,handleShowGlobe:e.handleShowGlobe,resetSPParams:e.resetSPParams,handleShowCruiseControl:e.handleShowCruiseControl,showCruiseControl:e.state.showCruiseControl,globeUIRef:e.globeUIRef,mapContainerRef:e.mapContainerRef,handlePlotsSetActiveTab:e.handlePlotsSetActiveTab,plotsActiveTab:e.props.plotsActiveTab}))}}),m.a.createElement(h.a,{path:"/visualization/cruises",render:function(a){return m.a.createElement(Yt,{handleShowGlobe:function(){return e.handlePlotsSetActiveTab(null,0)}})}})),m.a.createElement("div",{className:0===this.props.plotsActiveTab?a.displayNone:a.showCharts},m.a.createElement(Pt,null)))}}]),t}(u.Component);a.default=Object(d.b)((function(e,a){return{user:e.user,sampleData:e.sampleData,queryRequestState:e.queryRequestState,maps:e.maps,charts:e.charts,data:e.data,loadingMessage:e.loadingMessage,cruiseTrajectory:e.cruiseTrajectory,cruiseList:e.cruiseList,showChartsOnce:e.showChartsOnce,datasets:e.datasets,catalog:e.catalog,plotsActiveTab:e.plotsActiveTab,userIsGuest:e.userIsGuest}}),an)(Object(v.a)((function(e){return{displayNone:{display:"none"},background:{backgroundColor:q.a.backgroundGray},showCharts:{display:"inline-block",paddingTop:"180px",width:"calc(100vw - 10px)",textAlign:"left"},vizWrapper:{minHeight:"100vh",background:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=",")")}}}))(nn))}}]);
//# sourceMappingURL=12.3f412444.chunk.js.map