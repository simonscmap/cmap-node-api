(this.webpackJsonpcmap_react=this.webpackJsonpcmap_react||[]).push([[25],{912:function(e,t,a){"use strict";a.r(t);var r=a(48),n=a(49),i=a(176),s=a(80),o=a(79),l=a(0),c=a.n(l),p=a(36),u=a(250),m=a(72),d=a(127),g=a(15),h=a(3),b=a(59),f=a(35),v=a(873),S=a(734),y=a(872),E=a(735),x=a(186),k=a(884),w=a(641),N=a(252),A=Object(g.a)((function(e){return{registrationCard:{marginTop:e.spacing(1),marginBottom:e.spacing(1),height:"200px"},textField:{margin:e.spacing(1),width:"80%"}}}))((function(e){var t=e.classes,a=Object.keys(e.inputFieldState),r=function(t){"Enter"===t.key&&e.buttonRef.current.click()};return c.a.createElement(k.a,{className:t.registrationCard},c.a.createElement(N.a,{container:!0,spacing:1},a.map((function(n,i){return c.a.createElement(N.a,{key:i,item:!0,xs:a.length>2?6:12},c.a.createElement(w.a,{key:i,autoFocus:Boolean(0===i),name:e.inputFieldInfo[n].name,label:e.inputFieldInfo[n].label,value:e.inputFieldState[n].value,className:t.textField,onChange:e.onChange,type:e.inputFieldInfo[n].type,error:!e.inputFieldState[n].valid,helperText:e.inputFieldState[n].valid?" ":e.inputFieldInfo[n].requirement,onKeyPress:r}))}))))})),O=a(5),C=a(16),j=a(18),q={registrationNextActiveStep:O.e,registrationPreviousActiveStep:O.f,userRegistrationRequestSend:C.L,userValidationRequestSend:C.O},F=c.a.createRef(),R=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.userValidationState===j.a.failed&&n.props.userValidationRequestSuccess()},n.validateField=function(e,t){var a=t.trim(),r=/$^/;switch(e){case"firstName":case"lastName":r=/^[A-Za-z ]{2,40}$/;break;case"username":r=/^[A-Za-z0-9 ]{6,20}$/;break;case"email":r=/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-.]+)\.([a-zA-Z]{2,5})$/;break;case"institute":case"department":case"country":r=/^.{0,150}$/;break;case"password":r=/^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/,n.setState((function(e){var t=Object(b.a)(e.cards);return t[2].confirmPassword.valid=Boolean(t[2].confirmPassword.value===a),{cards:t}}));break;case"confirmPassword":return n.state.cards[2].password.value===a}return r.test(a)},n.processStateToActionPayload=function(){var e={};return n.state.cards.forEach((function(t){Object.keys(t).forEach((function(a){e[a]=t[a].value}))})),e},n.currentCardIsValid=function(){var e=n.state.cards[n.props.registrationActiveStep];for(var t in e)if(!e[t].optional&&(!e[t].value||!e[t].valid))return!1;return!0},n.handleNext=function(){switch(n.props.registrationActiveStep){case 0:var e=n.state.cards[0].username.value,t=n.state.cards[0].email.value;n.props.userValidationRequestSend(e,t);break;case 1:n.props.userRegistrationRequestSend(n.processStateToActionPayload());break;default:n.props.registrationNextActiveStep()}},n.handleBack=function(){n.props.registrationPreviousActiveStep()},n.handleChange=function(e){var t=e.target.value,a=e.target.name,r=n.validateField(a,t);n.setState((function(e){var i=Object(b.a)(e.cards);return i[n.props.registrationActiveStep][a]=Object(h.a)(Object(h.a)({},i[n.props.registrationActiveStep][a]),{},{value:t,valid:r}),{cards:i}}))};var i=[];return[{firstName:{label:"First Name*",name:"firstName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},lastName:{label:"Last Name*",name:"lastName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},username:{label:"Username*",name:"username",type:"text",requirement:"Must be 6 to 20 alphanumeric characters.",optional:!1},email:{label:"Email Address*",name:"email",type:"email",requirement:"Must be a valid email address.",optional:!1}},{institute:{label:"Institute",name:"institute",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},department:{label:"Department",name:"department",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},country:{label:"Country",name:"country",type:"text",requirement:"Maximum length is 150 characters.",optional:!0}}].forEach((function(e){var t={};Object.keys(e).forEach((function(a){t[a]={value:"",valid:!0,optional:e[a].optional}})),i.push(t)})),n.state={cards:i},n}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=["Your Information","Optional Organization Info"],a=this.props.registrationActiveStep,r=[{firstName:{label:"First Name*",name:"firstName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},lastName:{label:"Last Name*",name:"lastName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},username:{label:"Username*",name:"username",type:"text",requirement:"Must be 6 to 20 alphanumeric characters.",optional:!1},email:{label:"Email Address*",name:"email",type:"email",requirement:"Must be a valid email address.",optional:!1}},{institute:{label:"Institute",name:"institute",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},department:{label:"Department",name:"department",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},country:{label:"Country",name:"country",type:"text",requirement:"Maximum length is 150 characters.",optional:!0}}];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:e.root},c.a.createElement(v.a,{activeStep:a},t.map((function(e,t){return c.a.createElement(S.a,{key:e},c.a.createElement(y.a,null,e))}))),c.a.createElement("div",null,a===t.length?c.a.createElement(u.a,{className:e.instructionsPaper},c.a.createElement(m.a,{className:e.instructions},"We've sent you an email with a link for finalizing your registration and choosing a password. If you don't receive the email within the next few minute please check your spam folder.")):c.a.createElement("div",null,c.a.createElement(A,{inputFieldState:Object(h.a)({},this.state.cards[this.props.registrationActiveStep]),inputFieldInfo:Object(h.a)({},r[this.props.registrationActiveStep]),onChange:this.handleChange,buttonRef:F}),c.a.createElement("div",null,c.a.createElement(d.a,{onClick:0===a?this.props.handleHideStepper:this.handleBack,className:e.button},"Back"),c.a.createElement(d.a,{variant:"contained",color:"primary",onClick:this.handleNext,className:e.button,disabled:!this.currentCardIsValid()||this.props.userValidationState===j.a.inProgress,ref:F},a===t.length-1?"Finish":"Next"),this.props.userValidationState===j.a.inProgress&&c.a.createElement(E.a,{size:24,className:e.buttonProgress}),this.props.userValidationState===j.a.failed&&c.a.createElement(m.a,{className:e.bottomError},"That username or email address is already in use. If you previously registered you can recover your password ",c.a.createElement(x.a,{onClick:this.handleClose,component:f.b,to:{pathname:"/forgotpass"}},"here"),"."),this.props.userRegistrationState===j.a.failed&&c.a.createElement(m.a,{className:e.bottomError},"Registration failed. Please try again."))))))}}]),a}(l.Component),M=Object(p.b)((function(e,t){return{registrationActiveStep:e.registrationActiveStep,userValidationState:e.userValidationState,userRegistrationState:e.userRegistrationState}}),q)(Object(g.a)((function(e){return{root:{width:"60%",margin:"10% auto"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},instructionsPaper:{width:"60%",margin:"5% auto",padding:"24px"},registrationCard:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},textField:{margin:e.spacing(1),width:200},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},bottomError:{color:"white",marginTop:e.spacing(2)}}}))(R)),P=a(357),T={snackbarOpen:O.n,googleLoginRequestSend:C.n},I=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={showStepper:!1},e.onGoogleSignup=function(t){var a=t.getAuthResponse(!0).id_token;e.props.googleLoginRequestSend(a)},e.registerGoogleClickHandler=function(){var t=Object(i.a)(e),a=window.gapi.auth2;a?a.getAuthInstance().attachClickHandler("g-signup",null,t.onGoogleSignup,(function(){return t.props.snackbarOpen("There was a problem accessing your google account")})):setTimeout(t.registerGoogleClickHandler,20)},e.componentDidMount=function(){e.registerGoogleClickHandler()},e.handleShowStepper=function(){e.setState({showStepper:!0})},e.handleHideStepper=function(){e.setState({showStepper:!1})},e}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement(c.a.Fragment,null,!this.state.showStepper&&c.a.createElement(u.a,{className:e.paper},c.a.createElement(m.a,{className:e.description},"Create an account to access your favorites list between sessions and devices, or submit data to CMAP."),c.a.createElement("div",{className:e.googleWrapper},c.a.createElement(P.a,{clickHandlerTarget:"g-signup",text:"Sign up with Google"})),c.a.createElement("div",{className:e.emailSignUpWrapper},c.a.createElement(d.a,{variant:"contained",color:"primary",className:e.emailSignUpButton,onClick:this.handleShowStepper},"Sign up with an Email Address"))),this.state.showStepper&&c.a.createElement(M,{handleHideStepper:this.handleHideStepper}))}}]),a}(l.Component);t.default=Object(p.b)(null,T)(Object(g.a)((function(e){return{paper:{width:"60%",margin:"10% auto",padding:"24px"},emailSignUpButton:{textTransform:"none",height:"46px",color:"white"},googleWrapper:{margin:"50px auto 0 0",display:"inline-block"},description:{paddingTop:"50px"},emailSignUpWrapper:{marginTop:"40px"}}}))(I))}}]);
//# sourceMappingURL=25.e97860ab.chunk.js.map