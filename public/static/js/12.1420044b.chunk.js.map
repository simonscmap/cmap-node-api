{"version":3,"sources":["Enums/metaTags.js","Components/User/LoginRequiredPrompt.js","Utility/depthCounter.js","Enums/validation.js","Components/UI/MultiCheckboxDropdown.js","Components/Visualization/VariableDetailsDialog.js","Utility/mapTemporalResolutionToNumber.js","Utility/utcDateStringToLocal.js","Utility/countWebGLContexts.js","Components/Visualization/ChartControl.js","Components/Visualization/VizControlPanel.js","Utility/Visualization/mapVizType.js","Utility/Visualization/cleanSPParams.js","Utility/Visualization/aggregateChartDataSize.js","Utility/Visualization/generateVariableSampleRangeParams.js","Components/Visualization/DatasetInfoDialog.js","Components/Visualization/ProductList.js","Components/Visualization/DataSearch.js","Components/Visualization/ChartControlTabs.js","Utility/Visualization/generateVariableFullRangeParams.js","Components/Visualization/SparseDataMaxSizeNotification.js","Components/Visualization/StoredParametersDropdown.js","Components/Visualization/NewVizControlPanel.js","Enums/months.js","Utility/handleChartDatestring.js","Utility/chartBase.js","Components/Visualization/ChartControlPanel.js","Components/Visualization/SparseHistogram.js","Utility/handleXTicks.js","Utility/getChartDimensions.js","Components/Visualization/SpaceTimeChart.js","Components/Visualization/TimeSeriesChart.js","Components/Visualization/DepthProfileChart.js","Components/Visualization/SectionMapChart.js","Components/Visualization/SparseScatter.js","Components/Visualization/SparseMap.js","Components/Visualization/Charts.js","Utility/setsFromList.js","Components/Visualization/CruiseSelector.js","Components/Visualization/MapContainer.js","Utility/localDateToString.js","Components/Visualization/ModuleSelector.js","Components/Visualization/Visualization.js","Utility/starsBase64.js"],"names":["metaTags","default","title","description","visualization","catalog","dataSubmission","community","mapDispatchToProps","showLoginDialog","connect","withStyles","theme","loginRequiredMessage","marginTop","spacing","color","props","classes","useEffect","className","component","RouterLink","to","pathname","window","location","onClick","darwinDepths","piscesDepths","piscesTable","Set","darwinTable","exports","count","field","depth1","depth2","table","data","Table_Name","has","i","length","validation","depth","depthOneIsLower","depthOneOutOfBounds","depthTwoOutOfBounds","negative","date","dateOneIsLater","dateOneOutOfBounds","dateTwoOutOfBounds","lat","latOneIsHigher","latOneOutOfBounds","latTwoOutOfBounds","lon","lonOneIsHigher","lonOneOutOfBounds","lonTwoOutOfBounds","type","dataIsIrregular","dateRangeRequired","depthRangeRequired","surfaceOnlyDataset","irregularOnly","dataSizeTooLarge","webGLContextLimit","generic","invalid","dataSizeWarning","dataSizePrevent","variableMissing","vizTypeMissing","guestMaximumReached","menuOpenIcon","colors","primary","margin","formGroupWrapper","textAlign","paddingLeft","multiSelectHeader","fontSize","formControlLabelRoot","height","formControlLabelLabel","checkboxGroupHeader","backgroundColor","greenHover","cursor","boxShadow","selectedOptions","handleClear","options","parentStateKey","handleClickCheckbox","groupHeaderLabel","React","useState","open","setOpen","item","xs","container","alignItems","size","cs","justify","style","marginRight","map","e","key","control","onChange","checkbox","name","checked","label","root","variableFetch","state","ownProps","variableDetails","dialogPaper","backgroundGray","width","closeIcon","display","float","variableDetailsID","handleSetVariableDetailsID","handleClose","stopPropagation","Dialog","zIndex","z","NON_HELP_DIALOG","Boolean","onClose","PaperProps","DialogTitle","Long_Name","Skeleton","Close","DialogContent","DialogContentText","Comment","Table","TableBody","TableRow","TableCell","Dataset_Name","slice","Data_Source","Distributor","Sensor","Spatial_Resolution","Temporal_Resolution","Time_Min","Time_Max","Lat_Min","Lat_Max","Lon_Min","Lon_Max","Depth_Max","Depth_Min","undefined","Variable_Min","Unit","Variable_Max","Variable_Mean","Variable_Std","Typography","variant","mapTemporalResolutionToNumber","resolution","temporalResolutions","threeMinutes","sixHourly","daily","weekly","monthly","annual","irregular","monthlyClimatology","threeDay","eightDayRunning","eightDays","utcDateStringToLocal","utcString","Date","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDate","getUTCDate","newDate","setFullYear","charts","forEach","chart","subType","visualizationSubTypes","heatmap","sparse","variableValues","depthProfile","timeSeries","vizTypeSelectFormControl","vizTypeMenu","vizTypeMenuItem","visualizeButton","textTransform","borderRadius","palette","main","fontVariant","vizButtonTooltip","chartControlContainer","position","left","bottom","overrideDisabledStyle","heatmapMessage","contourMessage","sectionMapMessage","histogramMessage","timeSeriesMessage","depthProfileMessage","sparseMapMessage","visualizeButtonTooltip","disableVisualizeMessage","selectedVizType","handleChangeInputValue","handleVisualize","disabled","showChartControl","Fragment","Grid","FormControl","InputLabel","shrink","htmlFor","value","inputProps","id","MenuProps","MenuListProps","MenuItem","vizSubTypes","contourMap","sectionMap","contourSectionMap","histogram","Tooltip","placement","Button","fullWidth","cruiseTrajectoryRequestSend","clearCharts","csvDownloadRequestSend","snackbarOpen","getDatePlaceholder","isNaN","valueOf","month","getMonth","day","getDate","getFullYear","join","reactWindowListRef","createRef","selectRef","MenuList","componentDidUpdate","prevProps","prevState","current","resetAfterIndex","children","scrollOffset","foundFocus","child","groupHasFocus","isFocused","scrollTo","this","getValue","initialOffset","indexOf","groupHeights","some","grandChild","totalHeight","reduce","acc","cur","estimatedItemSize","itemCount","itemSize","index","initialScrollOffset","ref","Component","Group","hasFocus","element","sensor","CustomHeading","headingProps","headingLabel","firstChild","tableName","selectProps","hidden","customHeading","icon","typography","whiteSpace","overflow","textOverflow","iconClass","ListItem","button","select","setState","focusedOption","Icon","datasets","IconButton","protocol","host","Info","cart","ShoppingCart","DropdownIndicator","ArrowRight","Menu","Option","innerProps","onMouseMove","preventDefault","onMouseOver","GroupHeading","SingleValue","optionLabelSpanStyleLeft","boxSizing","optionLabelSpanStyleMid","optionLabelSpanStyleRight","formatOptionLabel","option","meta","ValueContainer","Search","controlPanelModes","VizControlPanel","search","addDocuments","cruiseList","handleOpenControlPanel","showControlPanel","handleCloseControlPanel","handleVariableDetailsDialogClose","VariableDetailsDialogIsOpen","handleVariableDetailsDialogOpen","event","getSelectOptionsFromCatalogItems","items","Visualize","push","Variable","Object","values","sort","opt1","opt2","estimateCsvSize","datasetName","member","parseInt","Variable_Count","handleResetSPParams","resetSPParams","searchField","onAutoSuggestChange","searchString","action","estimateDataSize","dt1","dt2","lat1","lat2","lon1","lon2","fields","spatialResolutions","date1","parse","dayDiff","res","mapSpatialResolutionToNumber","dateCount","Math","floor","depthUtils","checkStartDepth","surfaceOnly","test","parseFloat","replace","toFixed","checkEndDepth","checkStartDateValid","checkEndDateValid","checkStartDate","checkEndDate","checkStartLat","checkEndLat","checkStartLon","checkEndLon","checkHeatmap","irregularSpatialResolution","checkContour","checkSection","checkHistogram","checkTimeSeries","checkDepthProfile","checkSparseMap","checkGeneralWarn","dataSize","checkGeneralPrevent","webGLCount","countWebGLContexts","handleShowChartsAndResize","setTimeout","dispatchEvent","Event","handleShowCharts","handleUpdateFields","newValue","updateFields","lastSelectedFieldId","ID","showDataBites","showBottomControl","controlPanelMode","maxDateMessage","maxDate","catalogRequestState","handleChange","showCharts","handleShowGlobe","handleLatLonChange","catalogMinDate","setHours","catalogMaxDate","zeroedDT1","zeroedDT2","minDate","minDateMessage","Array","fill","startDepthMessage","endDepthMessage","startLatMessage","endLatMessage","startLonMessage","endLonMessage","generalWarnMessage","checkDisableVisualizeList","errorCount","errorSizeAdjust","checkDisableVisualize","closePanelChevron","aria-label","ChevronLeft","openPanelChevron","ChevronRight","Drawer","drawer","paper","drawerPaper","anchor","ButtonGroup","groupedButtons","depressed","ShowChart","DirectionsBoat","Fastfood","Settings","isLoading","states","inProgress","components","IndicatorSeparator","escapeClearsValue","onInputChange","filterOption","variableSelect","isClearable","inputValue","placeholder","styles","menu","provided","maxWidth","backdropFilter","valueContainer","padding","fontWeight","input","fontFamily","border","borderBottom","borderColor","noOptionsMessage","singleValue","tableStatsButton","LibraryBooks","datePicker","format","autoOk","handleStartDateChange","inputVariant","KeyboardButtonProps","datePickerInputAdornment","handleEndDateChange","formGridItem","TextField","error","textField","FormHelperTextProps","helperText","InputProps","padLeft","InputLabelProps","ceil","onVisualize","Paper","dataBitesContainer","bottomControlContainer","cruiseTrajectory","showHelp","top","drawerPaperError1","drawerPaperError2","drawerPaperError3","drawerPaperError4","drawerPaperError5","navDrawerWidth","controlPanelForm","paddingTop","borderLeft","clearChartsButton","borderRight","resetSPParamsButton","right","mapVizType","vizType","sp","storedProcedures","spaceTime","cleanSPParams","spName","aggregateChartDataSize","ch","generateVariableSampleRangeParams","varDetails","datasetSummaryFetch","datasetSummary","minWidth","markdown","textDecoration","lineHeight","datasetSummaryID","setDatasetSummaryID","Dataset_Long_Name","source","Description","Link","target","href","makeGroupStyles","searchOptionsMenuList","maxHeight","searchOption","searchOptionsMenuItem","searchOptionsMenuItemText","heading","variableItem","variablesWrapper","memberCount","datasetOpenIcon","infoIcon","listHeader","variableName","MakeGroup","vizSearchResultsLoadingState","memo","handleSelectDataTarget","setdatasetSummaryID","listRef","make","fullCount","openIndex","setOpenIndex","handleSetOpenClick","currentOffset","targetOffset","scrollToItem","varCount","variables","nonvisualizableDatasetCount","nonvisualizableString","enterDelay","marginBottom","itemData","overflowY","ExpandMore","Dataset_ID","Star","observationListRef","modelListRef","windowHeight","windowWidth","vizSearchResultsFullCounts","handleShowMemberVariables","Observation","Model","vizSearchResultsFetch","vizSearchResultsSetLoadingState","variableNameAutocompleteFetch","vizSearchResultsStore","searchOptionsFetch","defaultState","hasDepth","timeStart","timeEnd","toISOString","latStart","latEnd","lonStart","lonEnd","searchTerms","temporalResolution","spatialResolution","dataSource","distributor","processLevel","region","DataSearch","memberVariablesDataset","showAdvanced","sensorsMenuOpen","regionsMenuOpen","makesMenuOpen","componentDidMount","handleChangeSearchValue","updateStateAndSearch","handleChangeAutocomplete","statePiece","v","newState","handleChangeSensor","altTypeValue","handleChangeMake","handleToggleShowAdvanced","handleResetSearch","handleToggleMenu","split","column","newSet","add","delete","handleClearMultiSelect","param","render","vizSearchResults","submissionOptions","autocompleteVariableNames","startIcon","handleCloseDataSearch","inputRoot","startAdornment","InputAdornment","inputRef","searchInputRef","MultiCheckboxDropdown","Make","Region","showAdvancedWrapper","searchPanelRow","formControl","min","max","FormHelperText","Select","PopoverClasses","autocompletePopperPaper","addBorder","CONTROL_SECONDARY","Process_Level","Autocomplete","renderInput","params","getOptionLabel","disablePortal","shiftedAutocompletePaper","regionSelectorInput","autocompleteOptions","popperDisablePortal","shiftedAutocompletePopper","listbox","shiftedAutocompleteListbox","resetButton","chip","searchWrapper","depthFormControlRoot","autoComplete","searchSectionHeader","sensorInputLabel","sensorTextField","denseGridItem","minHeight","overflowX","deleteChart","tabsWrapper","CONTROL_PRIMARY","tabs","tab","opacity","greenHightlight","plotsActiveTab","handlePlotsSetActiveTab","Tabs","indicatorColor","scrollButtons","Tab","Language","selected","wrapped","metadata","chartIndex","handleDeleteChart","generateVariableFullRangeParams","vizPageDataTargetDetails","popoutButtonPaper","popoutButtonIcon","popoutButtonBase","popperPaper","dropdown","handleUpdateParameters","anchorEl","setAnchorEl","handleCloseMenu","handleSelect","disableButton","Transform","currentTarget","Popper","transition","TransitionProps","Grow","transformOrigin","ClickAwayListener","onClickAway","parameters","syncPlotParams","sparseDataMaxSizeNotificationUpdate","sparseDataMaxSizeNotificationData","dialogContent","lastPointValueText","lastPointValueWrapper","list","listItem","time","vizPageDataTargetSetAndFetchDetails","storedProcedureRequestSend","sparseDataQuerySend","guestPlotLimitNotificationSetIsVisible","polygonSymbol","symbolLayers","material","outline","NewVizControlPanel","dataSearchMenuOpen","addedGlobeUIListeners","showDrawHelp","storedParams","user","mapContainerRef","_lon2","regionLayer","removeAll","polygon","rings","regionGraphic","esriModules","Graphic","geometry","symbol","derivedParams","globeUIRef","view","goTo","zoom","maxDuration","speedFactor","componentWillUnmount","updateDomainFromGraphicExtent","extent","_lon1","xmin","xmax","newCoordinates","ymin","ymax","handleShowChartsClick","isSparseVariable","mapping","payload","handleDrawClick","sketchModel","throttledUpdate","throttle","Utils","webMercatorToGeographic","graphic","on","toolEventInfo","complete","visible","cancel","graphics","create","mode","parsed","includes","handleToggleCharts","date2","pointCount","aggregateSize","guestPlotCount","Cookies","get","dataTarget","details","generalPreventMessage","startDateMessage","endDateMessage","drawHelpText","controlPanelItem","controlPanelItemLabel","controlPanelItemStartIcon","dateTimeInput","step","drawerWidth","Edit","Badge","badgeContent","dataSearchMenuPaper","vizPageDataTarget","borderTop","justifyContent","dateString","hasHour","isMonthly","months","layout","font","paper_bgcolor","autosize","t","b","config","displaylogo","annotations","text","xref","yref","yanchor","x","y","yshift","showarrow","xanchor","colorscaleOptions","chartWrapper","popover","paddingBottom","paddingRight","iconButton","colorForm","lastIcon","borderTopRightRadius","borderBottomRightRadius","buttonGroup","pointerEvents","colorscaleMenu","setPopoverZ","grayBackground","sparseDataMaxSizeWarningIcon","errorYellow","onToggleSplitByDate","splitByDate","onToggleSplitBySpace","splitBySpace","orientation","downloadCsv","handleZValueConfirm","zValues","markerOptions","handleMarkerOptionsConfirm","showErrorBars","handleSetShowErrorBars","showLines","handleSetShowLines","paletteAnchorElement","setPaletteAnchorElement","zScalePopoverAnchorElement","setZScalePopoverAnchorElement","localZMin","setLocalZMin","localZMax","setLocalZMax","zScalePopoverOpen","zScalePopoverID","handleZScalePopoverClose","zScaleValidations","zMinMessage","zMaxMessage","markerOptionsAnchorElement","setMarkerOptionsAnchorElement","localMarkerOpacity","setLocalMarkerOpacity","localMarkerColor","setLocalMarkerColor","localMarkerSize","setLocalMarkerSize","previousOpacity","useRef","usePreviousOpacity","previousColor","usePreviousColor","previousSize","usePreviousSize","markerPopoverOpen","markerPopoverID","handleMarkerOptionsClose","markerOptionsValidations","checkLocalMarkerOpacity","checkLocalMarkerSize","localMarkerOpacityMessage","localMarkerSizeMessage","showSparseDataSizeWarning","SPARSE_DATA_QUERY_MAX_SIZE","Warning","lastRowTimeSpaceDataFromChart","DateRange","LineWeight","CloudDownload","SwapVert","Tune","handlePaletteChoice","Palette","Gamepad","keepMounted","Popover","anchorOrigin","vertical","horizontal","OutlinedInput","aria-describedby","labelWidth","csvFromVizRequestSend","buttonBlock","iconButtonWrapper","handleChartDateString","useResizeHandler","marker","chartBase","plot_bgcolor","xaxis","exponentformat","yaxis","infoObject","sectionSize","lonRange","lonMax","lonMin","tickvals","from","ticktext","tickmode","sizeRatio","latMax","latMin","setLoadingMessage","plots","dates","depths","setSplitByDate","splitByDepth","setSplitByDepth","setPalette","zMin","zMax","setZValues","subSets","generatePlotData","subsets","xTicks","handleXTicks","getChartDimensions","subset","latTitle","lonTitle","hovertext","abs","formatter","lats","lons","zauto","zmin","zmax","connectgaps","autocolorscale","colorscale","hoverinfo","contours","coloring","showlabels","labelfont","family","labelformat","colorbar","handleContourMap","zsmooth","handleHeatmap","subTypes","requestAnimationFrame","onToggleSplitByDepth","chartCount","availableWGLContexts","stds","setMarkerOptions","setShowLines","setShowErrorBars","error_y","array","line","isMonthy","error_x","autorange","setSplitBySpace","setOrientation","spaces","distinctMeridiansOrParallelsForSplitting","xAxis","handleSectionMap","switchOrientation","SparseScatter","xValues","yValues","xTitle","yTitle","times","tabProps","SparseTabPanel","selectedTab","controlPanelProps","SparseMap","setTab","plot","radius","mapbox","layers","sourcetype","below","center","mapboxAccessToken","handleSparseMap","scatter","centered","CloseChartIcon","closeChartIcon","disableFocusRipple","disableRipple","Delete","Charts","elevation","chartPaper","setsFromList","setKeys","result","isArray","subItem","cruiseListRequestSend","cruiseTrajectoryClear","esriFonts","searchFilterGroupCruises","cruises","selectedYears","selectedChiefScientists","selectedRegions","selectedSeries","filter","Year","Chief_Name","Regions","Series","cruisesGroupedByYear","keys","year","a","defaultSearchAndFilterState","openYearGroup","CruiseSelector","handleCruiseSelect","selection","selectedCruise","searchMenuOpen","optionSets","newOptionSets","oldOptionSets","handleCloseSearch","tempNewState","handleSetopenYearGroup","listHeight","JsSearch","searchIndex","addIndex","console","log","searchMenuPaper","cruiseYearHeader","Name","cruiseName","Nickname","outerDiv","openSearchButtonPaper","openSearchButton","cruiseInfo","cruiseInfoCell","Start_Time","End_Time","Ship_Name","linkWrapper","getCruiseListState","transform","cruiseSelect","borderStyle","dragIcon","verticalAlign","searchResult","yearHeader","justifyCOntent","polylineSymbol","r","g","UiComponents","shouldComponentUpdate","nextProps","nextState","SketchViewModel","layer","defaultUpdateOptions","toggleToolOnClick","tool","ui","remove","TrajectoryController","trajectoryLayer","midIndex","polyLines","lineIndex","maxDistance","latDistance","_lonDistance","lonDistance","distance","sqrt","cruiseTrajectorySymbol","cap","cruiseTrajectoryGeometry","paths","MapContainer","spParams","mapProperties","basemap","viewProperties","highlightOptions","haloOpacity","haloColor","fillOpacity","measurementPositions","setShowHelp","GraphicsLayer","localDateToString","toString","marginLeft","withRouter","history","queryRequestSend","retrievalRequestSend","completedShowCharts","datasetRetrievalRequestSend","plotsActiveTabSet","baseSPParams","Visualization","filteredData","showUI","showCruiseControl","document","sparseMaxDate","setDate","handleShowCruiseControl","toggleShowUI","esriModuleNames","loadModules","version","loadedModules","accumulator","currentValue","currentIndex","showChartsOnce","vizWrapper","GuestPlotLimitNotification","displayNone","chartControlPanelRef","exact","path","ModuleSelector","toggleChartView","sampleData","queryRequestState","maps","loadingMessage","userIsGuest","background"],"mappings":"2GA2BeA,IA3BE,CACbC,QAAS,CACLC,MAAO,0CACPC,YAAa,4QAGjBC,cAAe,CACXF,MAAO,0BACPC,YAAa,+GAGjBE,QAAS,CACLH,MAAO,eACPC,YAAa,2GAGjBG,eAAgB,CACZJ,MAAO,uBACPC,YAAa,sFAGjBI,UAAW,CACPL,MAAO,iBACPC,YAAa,8H,iCCvBrB,6DASMK,EAAqB,CACvBC,gBAVJ,KAUIA,GA0BWC,gBAAQ,KAAMF,EAAdE,CAAkCC,aAvBlC,SAACC,GAAD,MAAa,CACxBC,qBAAsB,CAClBC,UAAWF,EAAMG,QAAQ,IACzBC,MAAO,YAoBkCL,EAhBrB,SAACM,GAAW,IAC5BC,EAA6BD,EAA7BC,QAAST,EAAoBQ,EAApBR,gBAMjB,OAJAU,qBAAU,WACNV,OAIA,kBAAC,IAAD,CAAYW,UAAWF,EAAQL,sBAA/B,gDACiD,kBAAC,IAAD,CAAMQ,UAAWC,IAAYC,GAAI,CAACC,SAAUC,OAAOC,SAASF,UAAWG,QAAS,kBAAMV,EAAMR,oBAA5F,WADjD,OAEe,kBAAC,IAAD,CAAMY,UAAWC,IAAYC,GAAI,CAACC,SAAU,cAA5C,aAFf,U,iCC3BR,IAAMI,EAAe,CACjB,EACA,GACA,GACA,GACA,GACA,GACA,GACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,OACA,SACA,SACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SAGEC,EAAe,CACjB,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,eAkBEC,EAAc,IAAIC,IAfF,CAClB,gB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","file":"static/js/12.1420044b.chunk.js","sourcesContent":["const metaTags = {\r\n    default: {\r\n        title: 'Simons Collaborative Marine Ocean Atlas',\r\n        description: \"Simons Collaborative Marine Atlas Project is an open-source data portal interconnecting data sets across Oceanography disciplines. It enables scientists and the public to dive into the vast and often underutilized ocean datasets to retrieve custom subsets of data.\",\r\n    },\r\n\r\n    visualization: {\r\n        title: 'CMAP Data Visualization',\r\n        description: 'Generate scatter plots, heatmaps, cruise routes, and more using oceanographic data from from CMAP datasets.'\r\n    },\r\n\r\n    catalog: {\r\n        title: 'CMAP Catalog',\r\n        description: 'Search for oceanographic datasets in the CMAP database using keywords, or temporal or spatial coverage.'\r\n    },\r\n\r\n    dataSubmission: {\r\n        title: 'CMAP Data Submission',\r\n        description: 'Validate and submit your dataset. Track the progress of your previous submissions.'\r\n    },\r\n\r\n    community: {\r\n        title: 'CMAP Community',\r\n        description: 'Join the CMAP team on slack, follow us on github, or download the CMAP software package for Python, R, Julia, or MATLAB.'\r\n    }\r\n}\r\n\r\nexport default metaTags;","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport { Link, Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = (theme) =>  ({\r\n    loginRequiredMessage: {\r\n        marginTop: theme.spacing(10),\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst LoginRequiredPrompt = (props) => {\r\n    const { classes, showLoginDialog } = props;\r\n\r\n    useEffect(() => {\r\n        showLoginDialog();\r\n    })\r\n    \r\n    return (\r\n        <Typography className={classes.loginRequiredMessage}>\r\n            This feature requires a user account. Please <Link component={RouterLink} to={{pathname: window.location.pathname}} onClick={() => props.showLoginDialog()}> log in\r\n            </Link> or <Link component={RouterLink} to={{pathname: '/register'}}> register\r\n            </Link>.\r\n        </Typography>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(LoginRequiredPrompt));","\r\nconst darwinDepths = [\r\n    5,\r\n    15,\r\n    25,\r\n    35,\r\n    45,\r\n    55,\r\n    65,\r\n    75.005,\r\n    85.025,\r\n    95.095,\r\n    105.31,\r\n    115.87,\r\n    127.15,\r\n    139.74,\r\n    154.47,\r\n    172.4,\r\n    194.735,\r\n    222.71,\r\n    257.47,\r\n    299.93,\r\n    350.68,\r\n    409.93,\r\n    477.47,\r\n    552.71,\r\n    634.735,\r\n    722.4,\r\n    814.47,\r\n    909.74,\r\n    1007.155,\r\n    1105.905,\r\n    1205.535,\r\n    1306.205,\r\n    1409.15,\r\n    1517.095,\r\n    1634.175,\r\n    1765.135,\r\n    1914.15,\r\n    2084.035,\r\n    2276.225,\r\n    2491.25,\r\n    2729.25,\r\n    2990.25,\r\n    3274.25,\r\n    3581.25,\r\n    3911.25,\r\n    4264.25,\r\n    4640.25,\r\n    5039.25,\r\n    5461.25,\r\n    5906.25\r\n]\r\n\r\nconst piscesDepths = [\r\n    0.494024991989,\r\n    1.54137504101,\r\n    2.64566898346,\r\n    3.81949496269,\r\n    5.07822418213,\r\n    6.44061422348,\r\n    7.92956018448,\r\n    9.5729970932,\r\n    11.404999733,\r\n    13.4671401978,\r\n    15.8100700378,\r\n    18.4955596924,\r\n    21.5988197327,\r\n    25.2114105225,\r\n    29.4447307587,\r\n    34.4341506958,\r\n    40.3440513611,\r\n    47.3736915588,\r\n    55.764289856,\r\n    65.8072662354,\r\n    77.8538513184,\r\n    92.3260726929,\r\n    109.729301453,\r\n    130.666000366,\r\n    155.850692749,\r\n    186.125595093,\r\n    222.475204468,\r\n    266.040313721,\r\n    318.127410889,\r\n    380.213012695,\r\n    453.937713623,\r\n    541.088928223,\r\n    643.566772461,\r\n    763.333129883,\r\n    902.339294434,\r\n    1062.43994141,\r\n    1245.29101562,\r\n    1452.25097656,\r\n    1684.28405762,\r\n    1941.89294434,\r\n    2225.07788086,\r\n    2533.3359375,\r\n    2865.70288086,\r\n    3220.82006836,\r\n    3597.03198242,\r\n    3992.48388672,\r\n    4405.22412109,\r\n    4833.29101562,\r\n    5274.78417969,\r\n    5727.91699219\r\n]\r\n\r\nconst _piscesTables = [\r\n    'tblPisces_NRT',\r\n    'tblPisces_NRT_Calendar'\r\n]\r\n\r\nconst _darwinTable = [\r\n    'tblDarwin_Chl_Climatology',\r\n    'tblDarwin_Ecosystem',\r\n    'tblDarwin_Nutrient',\r\n    'tblDarwin_Nutrient_Climatology',\r\n    'tblDarwin_Ocean_Color',\r\n    'tblDarwin_Phytoplankton',\r\n    'tblDarwin_Plankton_Climatology'\r\n]\r\n\r\nconst piscesTable = new Set(_piscesTables);\r\nconst darwinTable = new Set(_darwinTable);\r\n\r\nconst exports = {\r\n    count: (field, depth1, depth2) => {\r\n        const { Table_Name: table } = field.data;\r\n        var count = 0;\r\n    \r\n        if(piscesTable.has(table)) {\r\n            for(let i = 0; i < piscesDepths.length; i++){\r\n                if(piscesDepths[i] > depth2) break;\r\n                if(piscesDepths[i] > depth1) count ++; \r\n            }\r\n        } else if (darwinTable.has(table)) {\r\n            for(let i = 0; i < darwinDepths.length; i++){\r\n                if(darwinDepths[i] > depth2) break;\r\n                if(darwinDepths[i] > depth1) count ++; \r\n            }\r\n        } else {}\r\n        return count;\r\n    },\r\n\r\n    piscesTable,\r\n    darwinTable,\r\n    piscesDepths,\r\n    darwinDepths\r\n}\r\n\r\nexport default exports;","const validation = {\r\n    depth: {\r\n        depthOneIsLower: 'Cannot be larger than end',\r\n        depthOneOutOfBounds: 'Data ends at $',\r\n        depthTwoOutOfBounds: 'Data begins at $',\r\n        negative: 'Cannot be negative'\r\n    },\r\n\r\n    date: {\r\n        dateOneIsLater: 'Cannot be after end',\r\n        dateOneOutOfBounds: 'Data ends at $',\r\n        dateTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lat: {\r\n        latOneIsHigher: 'Cannot be larger than end',\r\n        latOneOutOfBounds: 'Data ends at $',\r\n        latTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lon: {\r\n        lonOneIsHigher: 'Cannot be larger than end',\r\n        lonOneOutOfBounds: 'Data ends at $',\r\n        lonTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    type: {\r\n        dataIsIrregular: '$ is not available for sparse data',\r\n        dateRangeRequired: '$ requires a range of dates',\r\n        depthRangeRequired: '$ requires a range of depths',\r\n        surfaceOnlyDataset: '$ contains only surface data',\r\n        irregularOnly: 'Sparse map is only available for sparse data',\r\n        dataSizeTooLarge: 'Data set is too large for this visualization type.',\r\n        webGLContextLimit: 'Rendering limit exceeded for plots. Please delete one or more.'\r\n    },\r\n\r\n    generic: {\r\n        invalid: 'Invalid input',\r\n        dataSizeWarning: 'Wait time and application performance may be poor due to size of data.',\r\n        dataSizePrevent: 'Data set is too large. Please reduce date range or area size.',\r\n        variableMissing: 'Please select a variable',\r\n        vizTypeMissing: 'Please select a visualization type',\r\n        guestMaximumReached: 'Guests are limited to creating 10 plots per day. Please log in or register.'\r\n    }\r\n}\r\n\r\nexport default validation;","import React from 'react';\r\n\r\nimport { withStyles, Grid, FormGroup, Checkbox, Link, FormControlLabel } from '@material-ui/core';\r\nimport { ExpandMore, ChevronRight } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    menuOpenIcon:{\r\n        color:colors.primary, \r\n        margin: '0 8px 0 4px'\r\n    },\r\n\r\n    formGroupWrapper: {\r\n        textAlign: 'left',\r\n        paddingLeft: '20px'\r\n    },\r\n\r\n    multiSelectHeader: {\r\n        fontSize: '13px',\r\n        margin: '6px 0px 2px 0px'\r\n    },\r\n\r\n    formControlLabelRoot: {\r\n        height: '30px'\r\n    },\r\n\r\n    formControlLabelLabel: {\r\n        fontSize: '14px'\r\n    },\r\n\r\n    checkboxGroupHeader: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 0px 0px 1px #242424',\r\n        // backgroundColor: 'rgba(0,0,0,.15)',\r\n        marginTop: '8px'\r\n    }\r\n});\r\n\r\n//component expects to be wrapped in a grid\r\nconst MultiCheckboxDrowndown = (props) => {\r\n\r\n    const {\r\n        classes,\r\n        selectedOptions, //set\r\n        handleClear,\r\n        options,\r\n        parentStateKey,\r\n        handleClickCheckbox,\r\n        groupHeaderLabel\r\n    } = props;\r\n\r\n    const [ open, setOpen ] = React.useState(false);\r\n    \r\n    return (\r\n        <> \r\n            <Grid \r\n                item xs={12} \r\n                container \r\n                alignItems='center' \r\n                className={classes.checkboxGroupHeader} \r\n                onClick={() => setOpen(!open)}\r\n                >\r\n                {open ? \r\n                    <ExpandMore className={classes.menuOpenIcon}/> : \r\n                    <ChevronRight className={classes.menuOpenIcon}/>\r\n                }\r\n                {groupHeaderLabel}\r\n            </Grid>\r\n\r\n            {\r\n                open ?\r\n\r\n                <Grid item xs={12} className={classes.formGroupWrapper}>\r\n                    {\r\n                        selectedOptions.size ?\r\n\r\n                        <Grid item container cs={12} justify='flex-start' className={classes.multiSelectHeader}>\r\n                            <span style={{marginRight: '8px'}}>{selectedOptions.size} Selected </span>\r\n                            <Link component='button' onClick={handleClear}>Reset</Link>\r\n                        </Grid> : ''\r\n                    }                                \r\n                    \r\n                    <FormGroup>\r\n                        {options.map((e, i) => (\r\n                            <Grid item xs={12} key={i}>\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Checkbox \r\n                                            color='primary' \r\n                                            onChange={handleClickCheckbox} \r\n                                            className={classes.checkbox} \r\n                                            size='small'\r\n                                            name={parentStateKey + '!!' + e}\r\n                                            checked={selectedOptions.has(e)}\r\n                                        />\r\n                                    }\r\n                                    label={e}\r\n                                    classes={{\r\n                                        root: classes.formControlLabelRoot,\r\n                                        label: classes.formControlLabelLabel\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n                        ))}\r\n                    </FormGroup>\r\n                </Grid>\r\n\r\n                : ''\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(MultiCheckboxDrowndown);\r\n\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Close } from '@material-ui/icons';\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, Table, TableRow, TableCell, TableBody, Typography } from '@material-ui/core';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nimport { variableFetch } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        width: '700px',\r\n        // zIndex: 3000\r\n    },\r\n\r\n    closeIcon: {\r\n        display: 'inline',\r\n        float: 'right',\r\n        cursor: 'pointer'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.variableDetails\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    variableFetch\r\n}\r\n\r\nconst VariableDetailsDialog = (props) => {\r\n    const { data, classes, variableFetch, variableDetailsID, handleSetVariableDetailsID } = props;\r\n\r\n    React.useEffect(() => {\r\n        variableFetch(variableDetailsID);\r\n    }, [variableDetailsID]);\r\n\r\n    const handleClose = (e) => {\r\n        e.stopPropagation();\r\n        handleSetVariableDetailsID(null);\r\n        variableFetch(null);\r\n    }\r\n\r\n    return variableDetailsID ? (\r\n        <Dialog\r\n            // style={{zIndex: 5000}}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            open={Boolean(variableDetailsID)}\r\n            onClose={handleClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >            \r\n            <DialogTitle>{data ? data.Long_Name : <Skeleton/>} <Close className={classes.closeIcon} color='primary' onClick={handleClose}/></DialogTitle>\r\n            <DialogContent>\r\n                {\r\n                    data ? \r\n                        <>\r\n                        <DialogContentText>\r\n                            {data.Comment ? data.Comment : ''}\r\n                        </DialogContentText>\r\n                        \r\n                        <Table size='small'>\r\n                            <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell>Dataset</TableCell>\r\n                                        <TableCell title={data.Dataset_Name}>{data.Dataset_Name.length > 25 ? data.Dataset_Name.slice(0,23) + '...' : data.Dataset_Name}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Table Name</TableCell>\r\n                                        <TableCell title={data.Table_Name}>{data.Table_Name > 25 ? data.Table_Name.slice(0,23) + '...' : data.Table_Name}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Source</TableCell>\r\n                                        <TableCell title={data.Data_Source}>{data.Data_Source > 25 ? data.Data_Source.slice(0,23) + '...' : data.Data_Source}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Distributor</TableCell>\r\n                                        <TableCell title={data.Distributor}>{data.Distributor.length > 25 ? data.Distributor.slice(0,23) + '...' : data.Distributor}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Sensor</TableCell>\r\n                                        <TableCell>{data.Sensor}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Spatial Resolution</TableCell>\r\n                                        <TableCell>{data.Spatial_Resolution}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Resolution</TableCell>\r\n                                        <TableCell>{data.Temporal_Resolution}</TableCell>\r\n                                    </TableRow>\r\n                                    \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Coverage Begin</TableCell>\r\n                                        <TableCell>{data.Time_Min ? data.Time_Min.slice(0,10) : 'Irregular'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Coverage End</TableCell>\r\n                                        <TableCell>{data.Time_Max ? data.Time_Max.slice(0,10) : 'Irregular'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lat Coverage Begin</TableCell>\r\n                                        <TableCell>{`${data.Lat_Min}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell>Lat Coverage End</TableCell>\r\n                                        <TableCell>{`${data.Lat_Max}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lon Coverage Begin</TableCell>\r\n                                        <TableCell>{`${data.Lon_Min}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lon Coverage End</TableCell>\r\n                                        <TableCell>{`${data.Lon_Max}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Depth Coverage Begin</TableCell>\r\n                                        <TableCell>{data.Depth_Max ? `${data.Depth_Min}(m)` : 'Surface Only'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Depth Coverage End</TableCell>\r\n                                        <TableCell>{data.Depth_Max ? `${data.Depth_Max}(m)` : 'Surface Only'}</TableCell>\r\n                                    </TableRow>\r\n                        \r\n        \r\n                                    {data.Variable_Min !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Minimum Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Min}</TableCell>\r\n                                        </TableRow> : ''                      \r\n                                    }\r\n        \r\n                                    {data.Variable_Max !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Maximum Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Max}</TableCell>\r\n                                        </TableRow> : ''                       \r\n                                    }\r\n        \r\n                                    {data.Variable_Mean !== undefined ? \r\n                                        <TableRow>\r\n                                            <TableCell>Mean Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Mean}</TableCell>\r\n                                        </TableRow> : ''                      \r\n                                    }\r\n        \r\n                                    {data.Variable_Std !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Standard Deviation({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Std}</TableCell>\r\n                                        </TableRow> : ''                       \r\n                                    }\r\n                            </TableBody>\r\n                        </Table> </> \r\n                        \r\n                        : \r\n                        \r\n                        <>\r\n                            <Typography variant='h1'> <Skeleton/> </Typography>\r\n                            <Skeleton width={500} height={600}></Skeleton>\r\n                        </>\r\n                        }\r\n                    </DialogContent>            \r\n        </Dialog>\r\n    ) : ''\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VariableDetailsDialog));","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nconst mapTemporalResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [temporalResolutions.threeMinutes] : 1,\r\n        [temporalResolutions.sixHourly] : 1,\r\n        [temporalResolutions.daily] : 1,\r\n        [temporalResolutions.weekly] : 7,\r\n        [temporalResolutions.monthly] : 30,\r\n        [temporalResolutions.annual] : 365,\r\n        [temporalResolutions.irregular] : null,\r\n        [temporalResolutions.monthlyClimatology]: 30,\r\n        [temporalResolutions.threeDay]: 3,\r\n        [temporalResolutions.eightDayRunning]: 8,\r\n        [temporalResolutions.eightDays]: 8\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapTemporalResolutionToNumber;","const utcDateStringToLocal = (utcString) => {\r\n    let date = new Date(utcString);\r\n    let utcYear = date.getUTCFullYear();\r\n    let utcMonth = date.getUTCMonth();\r\n    let utcDate = date.getUTCDate();\r\n\r\n    let newDate = new Date();\r\n    newDate.setFullYear(utcYear, utcMonth, utcDate);\r\n    return newDate;\r\n}\r\n\r\nexport default utcDateStringToLocal;","import visualizationSubTypes from '../Enums/visualizationSubTypes';\r\n\r\nexport default (charts) => {\r\n    let count = 0;\r\n    charts.forEach(chart => {\r\n        if(chart.subType === visualizationSubTypes.heatmap) count ++;\r\n        if(chart.subType === visualizationSubTypes.sparse){\r\n            count ++;\r\n            if(chart.data.variableValues.length > 10000) count +=3;\r\n        }\r\n        if(chart.subType === visualizationSubTypes.depthProfile && chart.data.variableValues.length > 10000) count ++;\r\n        if(chart.subType === visualizationSubTypes.timeSeries && chart.data.variableValues.length > 10000) count ++;\r\n\r\n    })\r\n    return count;\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Paper, Grid, MenuItem, FormControl, InputLabel, Button, Tooltip } from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    vizTypeSelectFormControl: {\r\n        width: '100%',\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent'\r\n      }\r\n    },\r\n\r\n    vizTypeMenu: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n  \r\n    vizTypeMenuItem: {\r\n      '&:hover': {backgroundColor: colors.greenHover}\r\n    },\r\n\r\n    visualizeButton: {\r\n        textTransform: 'none',\r\n        height: '56px',\r\n        borderRadius: 0,\r\n        backgroundColor: colors.backgroundGray,\r\n        color: theme.palette.primary.main,\r\n        fontVariant: 'normal',\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent'\r\n      },\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover,\r\n              color: 'white'\r\n          }\r\n    },\r\n\r\n    vizButtonTooltip: {\r\n        color: 'yellow'\r\n    },\r\n\r\n    chartControlContainer: {\r\n        position: 'fixed',\r\n        left: '16px',\r\n        bottom: '20px',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: '2px 2px 2px 2px #242424',\r\n        borderRadius: '4px',\r\n        width: '305px'\r\n    }\r\n});\r\n\r\nconst ChartControl = (props) => {\r\n    const { \r\n        classes,\r\n        overrideDisabledStyle,\r\n        heatmapMessage,\r\n        contourMessage,\r\n        sectionMapMessage,\r\n        histogramMessage,\r\n        timeSeriesMessage,\r\n        depthProfileMessage,\r\n        sparseMapMessage,\r\n        visualizeButtonTooltip,\r\n        disableVisualizeMessage,\r\n        selectedVizType,\r\n        handleChangeInputValue,\r\n        handleVisualize,\r\n        showChartControl,\r\n        disabled\r\n    } = props;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {/* <Paper className={classes.chartControlContainer} style={showChartControl ? {} : {display: 'none'}}> */}\r\n                <Grid container>\r\n                    <Grid item xs={12}>\r\n                        <FormControl variant='filled' className={classes.vizTypeSelectFormControl}>\r\n                            <InputLabel shrink htmlFor=\"vizSelector\" style={disabled ? {color: 'rgba(0,0,0,.38)'} : {}}>Select Chart Type</InputLabel>\r\n                            <MUISelect\r\n                                disabled={disabled}\r\n                                className={classes.vizTypeSelectFormControl}\r\n                                style={overrideDisabledStyle}\r\n                                value={selectedVizType}\r\n                                variant='filled'\r\n                                // onChange={handleChangeInputValue}\r\n                                onChange={handleChangeInputValue}\r\n                                inputProps={{\r\n                                    name: 'selectedVizType',\r\n                                    id: 'vizSelector',\r\n                                    variant: 'filled'\r\n                                }}\r\n                                MenuProps={{\r\n                                    MenuListProps: {\r\n                                        className: classes.vizTypeMenu\r\n                                    }\r\n                                }}\r\n                                >\r\n                                {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Time and Space Plots</MenuItem>}\r\n                            </MUISelect>\r\n                        </FormControl>\r\n                    </Grid>\r\n\r\n                    <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                        <Grid item xs={12}>\r\n                            <Button\r\n                                className={classes.visualizeButton}\r\n                                variant='contained'\r\n                                onClick={() => handleVisualize()}\r\n                                disabled={Boolean(disableVisualizeMessage) || !selectedVizType || disabled}\r\n                                fullWidth\r\n                            >\r\n                                Create Visualization\r\n                            </Button>\r\n                        </Grid>\r\n                    </Tooltip>\r\n\r\n                </Grid>\r\n            {/* </Paper> */}\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChartControl));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Select, { components } from 'react-select';\r\n// import * as JsSearch from 'js-search';\r\nimport { VariableSizeList as ReactWindowList } from \"react-window\";\r\n\r\nimport { Paper, ButtonGroup, Grid, IconButton, Icon, ListItem, MenuItem, Typography, Drawer, TextField, FormControl, InputLabel, Button, Tooltip} from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\nimport { Settings, Fastfood, ShowChart, Search, Cached, LibraryBooks, ArrowRight, ChevronLeft, ChevronRight, InsertChartOutlined, Language, Delete, ShoppingCart, Info, DirectionsBoat } from '@material-ui/icons';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\nimport validation from '../../Enums/validation';\r\nimport VariableDetailsDialog from './VariableDetailsDialog';\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport ChartControl from './ChartControl';\r\n\r\nconst navDrawerWidth = 320;\r\n\r\nconst errorHeightAdjust = 23;\r\n\r\nconst styles = theme => ({\r\n    drawer: {\r\n        width: navDrawerWidth,\r\n        top: 32,\r\n        bottom: 'auto',\r\n        overflow: 'visible'\r\n    },\r\n\r\n    drawerPaper: {\r\n        width: navDrawerWidth,\r\n        height: 'auto',\r\n        top: 'calc(50% - 270px)',\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    drawerPaperError1: {\r\n        height: `${540 + errorHeightAdjust}px`\r\n    },\r\n\r\n    drawerPaperError2: {\r\n        height: `${540 + errorHeightAdjust * 2}px`\r\n    },\r\n\r\n    drawerPaperError3: {\r\n        height: `${540 + errorHeightAdjust * 3}px`\r\n    },\r\n\r\n    drawerPaperError4: {\r\n        height: `${540 + errorHeightAdjust * 4}px`\r\n    },\r\n\r\n    drawerPaperError5: {\r\n        height: `${540 + errorHeightAdjust * 5}px`\r\n    },\r\n\r\n  openPanelChevron: {\r\n    position: 'fixed',\r\n    left: '5px',\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  closePanelChevron: {\r\n    position: 'fixed',\r\n    left: navDrawerWidth + 5,\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  groupedButtons: {\r\n      width: '25%',\r\n      border: '1px solid #313131',\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c'\r\n  },\r\n\r\n  controlPanelForm: {\r\n      marginTop: theme.spacing(1)\r\n  },\r\n\r\n  tableStatsButton: {\r\n      borderRadius: 0,\r\n      paddingTop: '11px',\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n    formGridItem: {\r\n        borderLeft: '1px solid #313131',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  vizTypeSelectFormControl: {\r\n      width: '100%',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    }\r\n  },\r\n\r\n  depressed: {\r\n      boxShadow: 'inset 1px 1px 5px #1c1c1c'\r\n  },\r\n\r\n  padLeft: {\r\n      padding: '6px 0 2px 7px'\r\n  },\r\n\r\n  visualizeButton: {\r\n      height: '56px',\r\n      borderRadius: 0,\r\n      backgroundColor: colors.backgroundGray,\r\n      color: theme.palette.primary.main,\r\n      fontVariant: 'normal',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    },\r\n      '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n            color: 'white'\r\n        }\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  vizButtonTooltip: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  datePickerInputAdornment: {\r\n      padding: 0\r\n  },\r\n\r\n  clearChartsButton: {\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c',\r\n      width: '100%',\r\n      borderRight: '1px solid #313131'\r\n\r\n  },\r\n\r\n  resetSPParamsButton: {\r\n    borderRadius: 0,\r\n    backgroundColor: '#3c3c3c',\r\n    width: '100%',\r\n  },\r\n\r\n  datePicker: {\r\n      width: '100%'\r\n  },\r\n\r\n  vizTypeMenu: {\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n  vizTypeMenuItem: {\r\n    '&:hover': {backgroundColor: colors.greenHover}\r\n  },\r\n\r\n  dataBitesContainer: {\r\n    position: 'fixed',\r\n    right: '12px',\r\n    bottom: '12px',\r\n    height: '400px',\r\n    width: '260px',\r\n    backgroundColor: colors.backgroundGray,\r\n    boxShadow: '2px 2px  2px 2px #242424',\r\n    paddingTop: '12px'\r\n  },\r\n\r\n  bottomControlContainer: {\r\n    position: 'fixed',\r\n    height: '50px',\r\n    width: '300px',\r\n    bottom: '8px',\r\n    right: 'calc(50% - 150px)',\r\n    backgroundColor: colors.backgroundGray,\r\n    boxShadow: '2px 2px  2px 2px #242424',\r\n    paddingTop: '12px'\r\n  }\r\n});\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts,\r\n    cart: state.cart,\r\n    cruiseList: state.cruiseList\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst getDatePlaceholder = (date) => {\r\n    if(isNaN(new Date(date)).valueOf()) return 'yyyy-MM-dd';\r\n    \r\n    let month  = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n    let year = date.getFullYear();\r\n    return [year, month < 10 ? '0' + month : month, day < 10 ? '0' + day : day].join('-');\r\n}\r\n\r\nconst groupHeaderHeight = 37;\r\nconst height = 35;\r\n\r\nconst reactWindowListRef = React.createRef();\r\nconst selectRef = React.createRef();\r\n\r\nclass MenuList extends Component {\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n      if(reactWindowListRef.current) reactWindowListRef.current.resetAfterIndex(0);\r\n      if(!(this.props.children && this.props.children.length)) return;\r\n      let scrollOffset = 0;\r\n      let foundFocus = false;\r\n      this.props.children.forEach(child => {\r\n        if(foundFocus) return;\r\n\r\n        let count = groupHeaderHeight;\r\n        let groupHasFocus= false;\r\n        for(let i = 0; i < child.props.children.length; i++){\r\n          if(child.props.children[i].props.isFocused) {\r\n            foundFocus = true;\r\n            groupHasFocus = true;\r\n            break;\r\n          }\r\n          count += 37.6;\r\n        }\r\n\r\n        if(groupHasFocus) scrollOffset += count;\r\n        else scrollOffset += 37.6;\r\n      })\r\n      if(foundFocus) reactWindowListRef.current.scrollTo(scrollOffset > 150 ? scrollOffset - 150 : 0);\r\n    }\r\n\r\n    render() {\r\n        const { options, children, getValue } = this.props;\r\n\r\n        if(!children || !children.length) return '';\r\n        const [value] = getValue();\r\n        const initialOffset = options.indexOf(value) * height;\r\n        const groupHeights = children.map(child => {\r\n          return child.props.children.some(grandChild => grandChild.props.isFocused) ? child.props.children.length * 37.6 + groupHeaderHeight : groupHeaderHeight;\r\n        });\r\n        const totalHeight = groupHeights.reduce((acc, cur) => acc + cur, 0);\r\n        const estimatedItemSize = totalHeight / children.length;\r\n        const getItemSize = index => groupHeights[index];\r\n\r\n        return (\r\n            <ReactWindowList\r\n                height={totalHeight < 400 ? totalHeight :  400}\r\n                estimatedItemSize={estimatedItemSize}\r\n                itemCount={children.length}\r\n                itemSize={getItemSize}\r\n                initialScrollOffset={initialOffset || 0}\r\n                ref={reactWindowListRef}\r\n            >\r\n                {({ index, style }) => <div style={{...style}}>{children[index]}</div>}\r\n            </ReactWindowList>\r\n        );\r\n    }\r\n}\r\n\r\nclass Group extends Component {\r\n    render() {\r\n        const hasFocus = this.props.children.some(element => element.props.isFocused);\r\n        const sensor = this.props.children[0].props.data.data.Sensor;\r\n\r\n      return (\r\n          <React.Fragment>\r\n            <CustomHeading \r\n              {...this.props.headingProps} \r\n              headingLabel={this.props.data.label} \r\n              firstChild={this.props.children[0].props.data}\r\n              hasFocus={hasFocus}\r\n              sensor={sensor}\r\n              tableName={this.props.children[0].props.data.data.Table_Name}\r\n              selectProps={this.props.selectProps}\r\n            />\r\n            <div hidden={!hasFocus}>\r\n              {this.props.children.map(child => child)}\r\n            </div>\r\n          </React.Fragment>\r\n        );\r\n    }    \r\n}\r\n\r\nconst customHeadingStyles = (theme) => ({\r\n    customHeading: {\r\n        backgroundColor: 'rgba(0,0,0,.5)',\r\n        height: groupHeaderHeight,\r\n        '&:hover': {\r\n            // backgroundColor: 'rgba(122,67,0,.5)',\r\n            backgroundColor: colors.greenHover\r\n        },\r\n        boxShadow: '0px 1px 1px 1px #242424'\r\n    },\r\n\r\n    icon: {\r\n        marginRight: '10px',\r\n        width: '30px'\r\n    },\r\n\r\n    typography: {\r\n        width: '650px',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    }\r\n})\r\n\r\nconst _CustomHeading = props => {\r\n    const { classes, sensor, selectProps } = props;\r\n    let iconClass;\r\n\r\n    if(sensor === 'Satellite') iconClass = 'fa-satellite';\r\n    else if(sensor === 'Blend') iconClass = 'fa-laptop';\r\n    else iconClass = 'fa-ship';\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ListItem \r\n          button \r\n          alignItems='center' \r\n          onClick={() => selectRef.current.select.setState({focusedOption: props.hasFocus ? null : props.firstChild})}\r\n          className={classes.customHeading}\r\n        >\r\n            <Icon fontSize='small' color='inherit' className={`fas ${iconClass} ${classes.icon}`}></Icon>\r\n        <Typography className={classes.typography}>\r\n            {props.headingLabel.length > 70 ? props.headingLabel.slice(0,67) + '...' : props.headingLabel}\r\n        </Typography>\r\n\r\n        { selectProps.datasets[props.headingLabel] &&\r\n            <Tooltip title='Dataset Info' placement='left'>\r\n                <IconButton \r\n                    color='inherit' \r\n                    onClick={(e) => {\r\n                        window.open(\r\n                            window.location.protocol + \r\n                            '//' + \r\n                            window.location.host + \r\n                            '/catalog/datasets/' + \r\n                            selectProps.datasets[props.headingLabel].Dataset_Name);\r\n                        e.stopPropagation();\r\n                    }}\r\n                >\r\n                    <Info/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        }\r\n\r\n        {\r\n            selectProps.cart[props.headingLabel] ?\r\n            <Tooltip title='This Dataset Is on Your Favorites List' placement='right'>\r\n                <ShoppingCart/>\r\n            </Tooltip>\r\n             :\r\n            ''\r\n        }\r\n        </ListItem>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\nconst CustomHeading = withStyles(customHeadingStyles)(_CustomHeading);\r\n\r\n// Replace react-select dropdown area with material version\r\nconst DropdownIndicator = (props) => {\r\n    return (\r\n    <components.DropdownIndicator {...props}>\r\n        <ArrowRight/>\r\n    </components.DropdownIndicator>\r\n    );\r\n};\r\n\r\nconst Menu = (props) => {\r\n    return (\r\n        <components.Menu\r\n        {...props}\r\n        className='react-select-menu-cmap'\r\n        >\r\n\r\n        </components.Menu>\r\n    )\r\n}\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst GroupHeading = (props) => '';\r\n\r\nconst SingleValue = (props) => {\r\n    return (\r\n        <components.SingleValue\r\n            {...props}\r\n            children={null}\r\n        >\r\n            {props.data.label}\r\n        </components.SingleValue>\r\n    )\r\n}\r\n\r\nconst optionLabelSpanStyleLeft = {\r\n    display: 'inline-block',\r\n    boxSizing: 'border-box',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    fontSize: '15px',\r\n    marginRight: '32px',\r\n    width: 'calc(60% - 32px)',\r\n    textAlign: 'left'\r\n}\r\n\r\nconst optionLabelSpanStyleMid = {\r\n    ...optionLabelSpanStyleLeft,\r\n    marginRight: '24px',\r\n    width: 'calc(15% - 24px)'\r\n}\r\n\r\nconst optionLabelSpanStyleRight = {\r\n    ...optionLabelSpanStyleLeft,\r\n    textAlign: 'right',\r\n    marginRight: '0px',\r\n    width: '25%'\r\n}\r\n\r\nconst formatOptionLabel = (option, meta) => {\r\n    return (\r\n        <React.Fragment>\r\n            <span style={optionLabelSpanStyleLeft}>{option.label}</span>\r\n            <span style={optionLabelSpanStyleMid}>{option.data.Spatial_Resolution === 'Irregular' ? 'Irregular' : 'Gridded'}</span>\r\n            <span style={optionLabelSpanStyleRight}>{option.data.Data_Source}</span>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst ValueContainer = (props) => {\r\n    return (\r\n        <components.ValueContainer {...props}>\r\n            <Search style={{ position: \"absolute\", left: 6, color: colors.primary }}/>\r\n            {props.children}\r\n        </components.ValueContainer>\r\n    )\r\n}\r\n\r\nconst controlPanelModes = {\r\n    charts: 'charts',\r\n    cruises: 'cruises',\r\n    bites: 'bites',\r\n    bottomControl: 'bottomControl'\r\n}\r\n\r\nclass VizControlPanel extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        // var search = new JsSearch.Search('ID');\r\n        // search.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\r\n        // search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        // search.addIndex('Variable');\r\n        // search.addIndex('Unit');\r\n        // search.addIndex('Make');\r\n        // search.addIndex('Sensor');\r\n        // search.addIndex('Data_Source');\r\n        // search.addIndex('Process_Level');\r\n        // search.addIndex('Long_Name');\r\n        // search.addIndex('Keywords');\r\n        // search.addIndex('Table_Name');\r\n        // search.addIndex('Dataset_Name');\r\n        // search.addIndex('Study_Domain');\r\n        // search.addIndex('Spatial_Resolution');\r\n        // search.addIndex('Temporal_Resolution');\r\n        // search.addIndex('Chief_Name');\r\n        // search.addIndex('Name');\r\n        // search.addIndex('Nickname');\r\n        // search.addIndex('Ship_Name');\r\n\r\n        // if(props.catalog) search.addDocuments(props.catalog);\r\n        // if(props.cruiseList) search.addDocuments(props.cruiseList);\r\n\r\n        this.state = {\r\n            VariableDetailsDialogIsOpen: false,\r\n            // search,\r\n            searchField: '',\r\n            showControlPanel: true,\r\n            lastSelectedFieldId: null,\r\n            showChartControl: false,\r\n            showDataBites: false,\r\n            showBottomControl: false,\r\n            controlPanelMode: controlPanelModes.bottomControl\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.catalog && prevProps.catalog.length) && (this.props.catalog && this.props.catalog.length)){\r\n            this.state.search.addDocuments(this.props.catalog);\r\n            // this.setState({search: this.state.search});\r\n        }\r\n\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);\r\n            // this.setState({search: this.state.search});\r\n        }\r\n    }\r\n\r\n    handleOpenControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: true})\r\n    }\r\n\r\n    handleCloseControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: false})\r\n    }      \r\n    \r\n    handleVariableDetailsDialogClose = () => {\r\n        this.setState({...this.state, VariableDetailsDialogIsOpen: false})\r\n    }\r\n\r\n    handleVariableDetailsDialogOpen = (event) => {\r\n        event.stopPropagation();\r\n        this.setState({...this.state, VariableDetailsDialogIsOpen: true});\r\n    }\r\n\r\n    getSelectOptionsFromCatalogItems = (items) => {\r\n        const { cart } = this.props;\r\n        var options = {};\r\n        let count = 0;\r\n\r\n        items.forEach(item => {\r\n            if(item.Visualize == 1) {\r\n                if(!options[item.Dataset_Name]){\r\n                    options[item.Dataset_Name] = {\r\n                        label: item.Dataset_Name,\r\n                        options: []\r\n                    }\r\n                }\r\n                // TODO use css textoverflow for this if possible\r\n                options[item.Dataset_Name].options.push({\r\n                    value: item.Variable,\r\n                    label: item.Long_Name.length < 80 ? item.Long_Name : item.Long_Name.slice(0,78) + '...',\r\n                    data: item\r\n                })\r\n            }\r\n        });\r\n\r\n        let sortedOptions = Object.values(options).sort((opt1, opt2) => {\r\n            if(cart[opt1.label] && cart[opt2.label]) return opt1.label < opt2.label ? -1 : 1;\r\n            else if(cart[opt1.label]) return -1;\r\n            else if (cart[opt2.label]) return 1;\r\n            else return opt1.label < opt2.label ? -1 : 1;\r\n        })\r\n\r\n        return sortedOptions;\r\n    }\r\n\r\n    estimateCsvSize = (datasetName) => {\r\n        // let members = [];\r\n        let count = 0;\r\n        this.props.catalog.forEach((member, i) => {\r\n            if(member.Dataset_Name === datasetName){\r\n                count += parseInt(member.Variable_Count) || 0;\r\n                // members.push(member);\r\n            }\r\n        })\r\n        return count;\r\n    }\r\n\r\n    handleResetSPParams = () => {\r\n        this.props.resetSPParams();\r\n        this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') {\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n\r\n        if(action.action === 'escape-clear'){\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n        // if(action.action ==='set-value') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, fields, depth1, depth2, selectedVizType } = this.props;\r\n        if(!fields) return 0;\r\n        if(fields.data.Spatial_Resolution === spatialResolutions.irregular) return 0;\r\n        if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return 0;\r\n\r\n        const date1 = Date.parse(dt1);\r\n        const date2 = Date.parse(dt2);\r\n        \r\n        const dayDiff = (date2 - date1) / 86400000;\r\n        \r\n        const res = mapSpatialResolutionToNumber(fields.data.Spatial_Resolution);\r\n        \r\n        const dateCount = Math.floor(dayDiff / mapTemporalResolutionToNumber(fields.data.Temporal_Resolution)) || 1;\r\n        const depthCount = depthUtils.count(fields, depth1, depth2) || 1;\r\n        \r\n        const latCount = (lat2 - lat1) / res;\r\n        const lonCount = (lon2 - lon1) / res;\r\n\r\n        const pointCount = lonCount * latCount * depthCount * dateCount;\r\n        return pointCount;\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth1) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.fields.data.Depth_Max)) return validation.depth.depthOneOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Max).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth2) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth2) < parseFloat(this.props.fields.data.Depth_Min)) return validation.depth.depthTwoOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Min).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkStartDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt1)).valueOf() || !this.props.dt1) return 'Start date is invalid';\r\n    }\r\n\r\n    checkEndDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt2)).valueOf() || !this.props.dt1) return 'End date is invalid';\r\n    }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.dt1 > this.props.dt2) return validation.date.dateOneIsLater;\r\n        if(this.props.dt1 > this.props.fields.data.Time_Max) return validation.date.dateOneOutOfBounds.replace('$', this.props.fields.data.Time_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.dt2 < this.props.fields.data.Time_Min) return validation.date.dateTwoOutOfBounds.replace('$', this.props.fields.data.Time_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) < -90 || parseFloat(this.props.lat1) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.lat2)) return validation.lat.latOneIsHigher;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.fields.data.Lat_Max)) return validation.lat.latOneOutOfBounds.replace('$', this.props.fields.data.Lat_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < -90 || parseFloat(this.props.lat2) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < parseFloat(this.props.fields.data.Lat_Min)) return validation.lat.latTwoOutOfBounds.replace('$', this.props.fields.data.Lat_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon1) < -180 || parseFloat(this.props.lon1) > 180) return validation.generic.invalid;\r\n        if(this.props.lon1 > this.props.lon2) return '';\r\n        if(parseFloat(this.props.lon1) > parseFloat(this.props.fields.data.Lon_Max)) return validation.lon.lonOneOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < -180 || parseFloat(this.props.lon2) > 180) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < parseFloat(this.props.fields.data.Lon_Min)) return validation.lon.lonTwoOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', \"Section Map\");\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        if(this.props.dt1 === this.props.dt2) return validation.type.dateRangeRequired.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', 'Depth Profile');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.props.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.props.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count(this.props.fields, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n        if(this.props.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1200000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.fields) return validation.generic.variableMissing;\r\n        if(!this.props.selectedVizType) return validation.generic.vizTypeMissing;\r\n        return ''}\r\n\r\n    handleShowChartsAndResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);\r\n        this.props.handleShowCharts();     \r\n    }\r\n\r\n    handleUpdateFields = (newValue, action) => {\r\n        this.props.updateFields(newValue);\r\n        this.setState({...this.state, searchField: '', lastSelectedFieldId: newValue ? newValue.data.ID : this.state.lastSelectedFieldId});\r\n    }\r\n    \r\n    render() {      \r\n        const { search, searchField, showControlPanel } = this.state;\r\n        \r\n        const { classes, \r\n            fields, \r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType,\r\n            catalog,\r\n            catalogRequestState,\r\n            showCharts,\r\n            handleShowGlobe,\r\n            handleChange,\r\n            handleLatLonChange,\r\n            datasets,\r\n            cruiseList\r\n        } = this.props;\r\n\r\n\r\n        const options = searchField && catalog ? this.getSelectOptionsFromCatalogItems(search.search(searchField)) \r\n            : catalog ? this.getSelectOptionsFromCatalogItems(catalog) \r\n            : []\r\n\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n        var catalogMinDate = fields && utcDateStringToLocal(fields.data.Time_Min).setHours(0,0,0,0);\r\n        var catalogMaxDate = fields && utcDateStringToLocal(fields.data.Time_Max).setHours(0,0,0,0);\r\n        var zeroedDT1 = dt1.setHours(0,0,0,0);\r\n        var zeroedDT2 = dt2.setHours(0,0,0,0);\r\n        \r\n        var minDate = fields ? catalogMinDate : utcDateStringToLocal('1900-01-01').setHours(0,0,0,0);\r\n\r\n        let minDateMessage = fields && zeroedDT2 < catalogMinDate ? 'End cannot be before dataset start date' : '';\r\n        var maxDateMessage;\r\n        var maxDate;\r\n\r\n        if(!fields){\r\n            maxDate = zeroedDT2;\r\n            maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n        } else {\r\n            \r\n\r\n            if(catalogMaxDate < zeroedDT2){\r\n                maxDate = catalogMaxDate;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after dataset end date' : '';\r\n            } else {\r\n                maxDate = zeroedDT2;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n            }\r\n        }\r\n\r\n        if(fields) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDateValid(),\r\n                this.checkEndDateValid()\r\n            ];\r\n        } else validations = Array(16).fill('');\r\n\r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            minDateMessage,\r\n            maxDateMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ];\r\n\r\n        let cdvl = checkDisableVisualizeList;\r\n        let errorCount = 0;\r\n        \r\n        if(cdvl[0] || cdvl[1]) errorCount ++;\r\n        if(cdvl[2] || cdvl[3]) errorCount ++;\r\n        if(cdvl[4] || cdvl[5]) errorCount ++;\r\n        if(cdvl[7] || cdvl[9]) errorCount ++;\r\n        if(cdvl[8] || cdvl[10]) errorCount ++;\r\n\r\n        const errorSizeAdjust = errorCount > 0 ? 'drawerPaperError' + errorCount : '';\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <div>\r\n                <VariableDetailsDialog\r\n                    open={this.state.VariableDetailsDialogIsOpen}\r\n                    onClose={this.handleVariableDetailsDialogClose}\r\n                    data={fields && fields.data}\r\n                />\r\n\r\n                { showControlPanel ? \r\n\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleCloseControlPanel}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                :\r\n                    \r\n                        <IconButton \r\n                            className={classes.openPanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleOpenControlPanel}>\r\n                            <ChevronRight />\r\n                        </IconButton>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper} ${classes[errorSizeAdjust]}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n\r\n                    <ButtonGroup>\r\n                        <Tooltip title='Show Chart Control' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.charts && classes.depressed}`} \r\n                                // onClick={() => this.setState({...this.state, showChartControl: !this.state.showChartControl})}\r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.charts})}\r\n                                color='inherit'\r\n                            >\r\n                                <ShowChart/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        \r\n                        <Tooltip title='Show Cruise Control' placement='top'>\r\n                            <IconButton \r\n                                color='inherit' \r\n                                // onClick={this.props.handleShowCruiseControl}\r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.cruises})}\r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.cruises && classes.depressed}`} \r\n                            >\r\n                                <DirectionsBoat/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title='Show Data Bytes' placement='top'>\r\n                            <IconButton \r\n                                color='inherit' \r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.bites})} \r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.bites && classes.depressed}`} \r\n                            >\r\n                                <Fastfood/>\r\n                            </IconButton>\r\n                        </Tooltip> \r\n\r\n                        <Tooltip title='Show Bottom Control' placement='top'>\r\n                            <IconButton \r\n                                color='inherit' \r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.bottomControl})} \r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.bottomControl && classes.depressed}`} \r\n                            >\r\n                                <Settings/>\r\n                            </IconButton>\r\n                        </Tooltip>                          \r\n                    </ButtonGroup>\r\n\r\n                    {/* <ButtonGroup>\r\n                        <Tooltip title='Show Globe' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${!showCharts && classes.depressed}`} \r\n                                onClick={handleShowGlobe}\r\n                                color='inherit'\r\n                            >\r\n                                <Language/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        \r\n                        <Tooltip title='Show Charts' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${showCharts && classes.depressed}`}\r\n                                onClick={this.handleShowChartsAndResize}\r\n                                color='inherit'\r\n                            >\r\n                                <InsertChartOutlined/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </ButtonGroup>\r\n                    \r\n                    <Grid container>\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Clear Charts' placement='bottom'>\r\n                                <IconButton color='inherit' onClick={this.props.clearCharts} className={classes.clearChartsButton}>\r\n                                    <Delete/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Reset Parameters' placement='right'>\r\n                                <IconButton color='inherit' onClick={this.handleResetSPParams} className={classes.resetSPParamsButton}>\r\n                                    <Cached/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid> */}\r\n\r\n                    <form>\r\n                        <Grid container>\r\n                            <Grid item xs={10}>\r\n                                {/* <ConnectedTooltip placement='top' title='Enter one or more search terms.'> */}\r\n                                    <Select\r\n                                        formatOptionLabel={formatOptionLabel}\r\n                                        handleVariableDetailsDialogOpen={this.handleVariableDetailsDialogOpen}\r\n                                        isLoading = {catalogRequestState === states.inProgress}\r\n                                        onAutoSuggestChange = {this.onAutoSuggestChange}\r\n                                        datasets = {datasets}\r\n                                        cart={this.props.cart}\r\n                                        \r\n                                        components={{\r\n                                            IndicatorSeparator:'',\r\n                                            DropdownIndicator,\r\n                                            GroupHeading,\r\n                                            Group,\r\n                                            Option,\r\n                                            MenuList,\r\n                                            SingleValue,\r\n                                            Menu,\r\n                                            ValueContainer\r\n                                        }}\r\n                                        lastSelectedFieldId={this.state.lastSelectedFieldId}\r\n                                        escapeClearsValue\r\n                                        ref={selectRef}\r\n                                        onInputChange={this.onAutoSuggestChange}\r\n                                        filterOption={null}\r\n                                        // menuIsOpen={true}\r\n                                        className={classes.variableSelect}\r\n                                        isClearable\r\n                                        inputValue={this.state.searchField}\r\n                                        name=\"fields\"\r\n                                        label=\"Variables\"\r\n                                        options={options}\r\n                                        onChange={this.handleUpdateFields}\r\n                                        value={fields}\r\n                                        placeholder={\r\n                                            this.state.controlPanelMode === controlPanelModes.cruises ? 'Search Cruises' : \r\n                                            this.state.controlPanelMode === controlPanelModes.bites ? 'Explore Bites' : \r\n                                            \"Search Catalog\"\r\n                                        }\r\n                                        styles={{\r\n                                            menu: provided => ({\r\n                                                ...provided, \r\n                                                zIndex: 1300, \r\n                                                width: '980px',\r\n                                                maxWidth: '90vw',\r\n                                                borderRadius: '4px',\r\n                                                boxShadow: '2px 2px 2px 2px #242424',\r\n                                                overflow: 'hidden',\r\n                                                backgroundColor: 'rgba(0,0,0,.5)',\r\n                                                backdropFilter: 'blur(5px)',\r\n                                            }),\r\n\r\n                                            valueContainer: provided => ({\r\n                                                ...provided,\r\n                                                padding: '0 0 0 34px',\r\n                                                fontWeight: 100\r\n                                            }),\r\n\r\n                                            input: provided => ({...provided,\r\n                                                color: 'white',\r\n                                                fontFamily: '\"Lato\", sans-serif'\r\n                                            }),\r\n\r\n                                            control: provided => ({...provided,\r\n                                                backgroundColor: colors.backgroundGray,\r\n                                                border: 'none',\r\n                                                borderBottom: '1px solid #333333',\r\n                                                borderRadius: 0,\r\n                                                '&:hover': { borderColor: 'white' },\r\n                                                '&:focus-within': { borderColor: colors.primary },\r\n                                                height: '56px'\r\n                                            }),\r\n\r\n                                            placeholder: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                fontSize: '14px',\r\n                                                fontWeight: 300\r\n                                            }),\r\n\r\n                                            noOptionsMessage: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                backgroundColor: colors.backgroundGray\r\n                                            }),\r\n\r\n                                            option: (provided, { data, isFocused }) => {\r\n                                                return ({...provided,\r\n                                                    fontWeight: 400,\r\n                                                    fontSize: '16px',\r\n                                                    backgroundColor: 'transparent',\r\n                                                    color: isFocused ? colors.primary : 'white',\r\n                                                    '&:hover': { backgroundColor: colors.greenHover},\r\n                                            })},\r\n\r\n                                            singleValue: (provided, state) => ({...provided,\r\n                                                color: 'white',\r\n                                                fontWeight: 400,\r\n                                                zIndex: 1290\r\n                                            })\r\n                                        }}\r\n                                        theme={theme => ({\r\n                                            ...theme,\r\n                                            colors: {\r\n                                            ...theme.colors,\r\n                                            },\r\n                                        })}\r\n                                    />\r\n                                {/* </ConnectedTooltip> */}\r\n                            </Grid>\r\n                            <Grid item xs={2} className={classes.tableStatsButton}>\r\n                                {\r\n                                    fields ? \r\n                                    <Tooltip placement='right' title='View Variable Summary Statistics'>\r\n                                        <IconButton \r\n                                            size='small' \r\n                                            onClick={this.handleVariableDetailsDialogOpen}                                     \r\n                                            disabled={!fields}\r\n                                        >\r\n                                            <LibraryBooks/>\r\n                                        </IconButton>\r\n                                    </Tooltip> :\r\n                                    <IconButton \r\n                                        size='small' \r\n                                        onClick={this.handleVariableDetailsDialogOpen}                                     \r\n                                        disabled={!fields}\r\n                                    >\r\n                                        <LibraryBooks/>\r\n                                    </IconButton>\r\n                                }\r\n                            </Grid>\r\n\r\n                            {\r\n                                this.state.controlPanelMode !== controlPanelModes.bites ?\r\n                                <>\r\n                                    <Grid item xs={12}>\r\n                                        <KeyboardDatePicker\r\n                                            className={classes.datePicker}\r\n                                            placeholder={getDatePlaceholder(dt1)}\r\n                                            id=\"startDate\"\r\n                                            label=\"Start Date\"\r\n                                            name=\"dt1\"\r\n                                            format='yyyy-MM-dd'\r\n                                            maxDate={maxDate}\r\n                                            // minDate={null}\r\n                                            maxDateMessage={maxDateMessage}\r\n                                            autoOk\r\n                                            value={dt1}\r\n                                            onChange={this.props.handleStartDateChange}\r\n                                            inputVariant='filled'\r\n                                            variant='inline'\r\n                                            KeyboardButtonProps={{\r\n                                                className: classes.datePickerInputAdornment\r\n                                            }}\r\n                                        />\r\n                                    </Grid>  \r\n\r\n                                    <Grid item xs={12}>\r\n                                        <KeyboardDatePicker\r\n                                            className={classes.datePicker}\r\n                                            placeholder={getDatePlaceholder(dt2)}\r\n                                            id=\"endDate\"\r\n                                            label=\"End Date\"\r\n                                            name=\"dt2\"\r\n                                            format='yyyy-MM-dd'\r\n                                            minDate={minDate}\r\n                                            // maxDate={null}\r\n                                            minDateMessage={minDateMessage}\r\n                                            autoOk\r\n                                            value={dt2}\r\n                                            onChange={this.props.handleEndDateChange}\r\n                                            inputVariant='filled'\r\n                                            variant='inline'\r\n                                            KeyboardButtonProps={{\r\n                                                className: classes.datePickerInputAdornment\r\n                                            }}\r\n                                        />\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lat1-input\"\r\n                                            error={Boolean(startLatMessage)}\r\n                                            label={\"Start Lat(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lat1}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={startLatMessage}\r\n                                            name='lat1'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lat2-input\"\r\n                                            error={Boolean(endLatMessage)}\r\n                                            label={\"End Lat(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lat2}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={endLatMessage}\r\n                                            name='lat2'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lon1-input\"\r\n                                            error={Boolean(startLonMessage)}\r\n                                            label={\"Start Lon(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lon1}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={startLonMessage}\r\n                                            name='lon1'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lon2-input\"\r\n                                            error={Boolean(endLonMessage)}\r\n                                            label={\"End Lon(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lon2}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={endLonMessage}\r\n                                            name='lon2'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"depth1-input\"\r\n                                            error={Boolean(startDepthMessage)}\r\n                                            label=\"Start Depth(m)\"\r\n                                            className={classes.textField}\r\n                                            value={isNaN(Math.floor(depth1 * 1000) / 1000) ? depth1 : Math.ceil(depth1 * 1000) / 1000}\r\n                                            onChange={handleChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={startDepthMessage}\r\n                                            name='depth1'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"depth2-input\"\r\n                                            error={Boolean(endDepthMessage)}\r\n                                            label=\"End Depth(m)\"\r\n                                            className={classes.textField}\r\n                                            value={isNaN(Math.ceil(depth2 * 1000) / 1000) ? depth2 : Math.ceil(depth2 * 1000) / 1000}\r\n                                            onChange={handleChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={endDepthMessage}\r\n                                            name='depth2'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n                                </> : ''\r\n                            }\r\n\r\n                            {\r\n                                this.state.controlPanelMode === controlPanelModes.charts ?\r\n                                <ChartControl\r\n                                    fields={fields}\r\n                                    overrideDisabledStyle={overrideDisabledStyle}\r\n                                    selectedVizType={selectedVizType}\r\n                                    heatmapMessage={heatmapMessage}\r\n                                    heatmapMessage={heatmapMessage}\r\n                                    contourMessage={contourMessage}\r\n                                    sectionMapMessage={sectionMapMessage}\r\n                                    sectionMapMessage={sectionMapMessage}\r\n                                    histogramMessage={histogramMessage}\r\n                                    timeSeriesMessage={timeSeriesMessage}\r\n                                    depthProfileMessage={depthProfileMessage}\r\n                                    sparseMapMessage={sparseMapMessage}\r\n                                    visualizeButtonTooltip={visualizeButtonTooltip}\r\n                                    disableVisualizeMessage={disableVisualizeMessage}\r\n                                    selectedVizType={selectedVizType}\r\n                                    handleChange={this.props.handleChange}\r\n                                    onVisualize={this.props.onVisualize}\r\n                                    showChartControl={this.state.showChartControl}\r\n                                /> : ''\r\n                            }\r\n\r\n\r\n\r\n                            <Paper className={classes.dataBitesContainer} style={this.state.showDataBites ? {} : {display: 'none'}}>\r\n                                Data Bites\r\n                            </Paper>\r\n\r\n                            <Paper className={classes.bottomControlContainer} style={this.state.showBottomControl ? {} : {display: 'none'}}>\r\n                                Bottom Control\r\n                            </Paper>\r\n\r\n                            {/* <Grid item xs={12}>\r\n                                <FormControl variant='filled' className={classes.vizTypeSelectFormControl} disabled={!fields}>\r\n                                    <InputLabel shrink htmlFor=\"vizSelector\" >Type</InputLabel>\r\n                                    <MUISelect\r\n                                        className={classes.vizTypeSelectFormControl}\r\n                                        style={overrideDisabledStyle}\r\n                                        value={selectedVizType}\r\n                                        variant='filled'\r\n                                        onChange={this.props.handleChange}\r\n                                        inputProps={{\r\n                                            name: 'selectedVizType',\r\n                                            id: 'vizSelector',\r\n                                            variant: 'filled'\r\n                                        }}\r\n                                        MenuProps={{\r\n                                            MenuListProps: {\r\n                                                className: classes.vizTypeMenu\r\n                                            }\r\n                                        }}\r\n                                        >\r\n                                        {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                        {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                        {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                        {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                        {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                        {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Sparse Map</MenuItem>}\r\n                                    </MUISelect>\r\n                                </FormControl>\r\n                            </Grid>\r\n\r\n                            <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                                <Grid item xs={12}>\r\n                                    <Button\r\n                                        className={classes.visualizeButton}\r\n                                        variant='contained'\r\n                                        onClick={() => this.props.onVisualize()}\r\n                                        disabled={Boolean(disableVisualizeMessage) || !fields || !selectedVizType}\r\n                                        fullWidth\r\n                                    >\r\n                                        Visualize\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Tooltip> */}\r\n                        </Grid>\r\n                    </form>                    \r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VizControlPanel));","import vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nexport default mapVizType;","const cleanSPParams = ({depth1, depth2, dt1, dt2, fields, lat1, lat2, lon1, lon2, spName, tableName}) => ({\r\n    depth1: parseFloat(depth1),\r\n    depth2: parseFloat(depth2),\r\n    dt1,\r\n    dt2,\r\n    fields,\r\n    lat1: parseFloat(lat1),\r\n    lat2: parseFloat(lat2),\r\n    lon1: parseFloat(lon1),\r\n    lon2: parseFloat(lon2),\r\n    spName,\r\n    tableName,\r\n})\r\n\r\nexport default cleanSPParams;","const aggregateChartDataSize = (charts) => {\r\n    let size = 0;\r\n\r\n    charts.forEach(ch => {\r\n        size += ch.data.variableValues && ch.data.variableValues.length ? ch.data.variableValues.length : 0;\r\n    });\r\n\r\n\r\n    return size;\r\n}\r\n\r\nexport default aggregateChartDataSize;","import depthUtils from '../depthCounter';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\n\r\nconst generateVariableSampleRangeParams = (varDetails) => {\r\n    let dt1 = varDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n        1 : \r\n        varDetails.Time_Min.slice(0, 10);\r\n    let dt2 = varDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n        1 : \r\n        // varDetails.Time_Min.slice(0, 10);\r\n        varDetails.Time_Max.slice(0, 10);\r\n\r\n    let lat1 = Math.floor(varDetails.Lat_Min * 1000) /1000;\r\n    let lat2 = Math.ceil(varDetails.Lat_Max * 1000) /1000;\r\n    let lon1 = Math.floor(varDetails.Lon_Min * 1000) /1000;\r\n    let lon2 = Math.ceil(varDetails.Lon_Max * 1000) /1000;\r\n\r\n    let surfaceOnly = !varDetails.Depth_Max;\r\n    let irregularSpatialResolution = varDetails.Spatial_Resolution === 'Irregular';\r\n\r\n    let depth1 = surfaceOnly ? 0 : irregularSpatialResolution ? Math.floor(varDetails.Depth_Min * 1000) / 1000 || 0 : 0;\r\n\r\n    let depth2 = surfaceOnly ? 0 : \r\n        irregularSpatialResolution ? Math.ceil(varDetails.Depth_Max * 1000) / 1000|| 0 : \r\n        depthUtils.piscesTable.has(varDetails.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n        depthUtils.darwinTable.has(varDetails.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2).toFixed(2) : \r\n        11000\r\n\r\n    return {\r\n        lat1,\r\n        lat2,\r\n        lon1,\r\n        lon2,\r\n        depth1,\r\n        depth2,\r\n        dt1,\r\n        dt2\r\n    };\r\n}\r\n\r\nexport default generateVariableSampleRangeParams;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogTitle, DialogContent, Link, Typography } from '@material-ui/core';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nimport { datasetSummaryFetch } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        // width: '700px',\r\n        minWidth: '700px',\r\n        maxWidth: '60vw',\r\n        // zIndex: 3000\r\n    },\r\n\r\n    markdown: {\r\n        '& img': {\r\n            maxWidth: '100%',\r\n            margin: '20px auto 20px auto',\r\n            display: 'block'\r\n        },\r\n        '& a': {\r\n            color: theme.palette.primary.main,\r\n            textDecoration: 'none'\r\n        },\r\n\r\n        '& p': {\r\n            lineHeight: 1.25\r\n        }\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    datasetSummary: state.datasetSummary\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    datasetSummaryFetch\r\n}\r\n\r\nconst DatasetInfoDialog = (props) => {\r\n    const { datasetSummary, classes, datasetSummaryFetch, datasetSummaryID, setDatasetSummaryID } = props;\r\n\r\n    React.useEffect(() => {\r\n        datasetSummaryFetch(datasetSummaryID);\r\n    }, [datasetSummaryID]);\r\n\r\n    const handleClose = () => {\r\n        setDatasetSummaryID(null);\r\n        datasetSummaryFetch(null);\r\n    }\r\n\r\n    return (\r\n        <Dialog\r\n            // style={{zIndex: 5000}}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            open={Boolean(datasetSummaryID)}\r\n            onClose={handleClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <DialogTitle>{datasetSummary ? datasetSummary.Dataset_Long_Name : <Skeleton/>}</DialogTitle>\r\n            <DialogContent>\r\n                {\r\n                    datasetSummary ?\r\n                    <ReactMarkdown source={datasetSummary.Description} className={classes.markdown}/> :\r\n                        <>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                    </>                    \r\n                }\r\n            </DialogContent>\r\n\r\n            <DialogContent style={{padding: '16px 24px'}}>{\r\n                datasetSummary ?\r\n                    <span>\r\n                        Detailed information for this dataset and its member variables is available\r\n                        <Link target='_blank' href={`/catalog/datasets/${datasetSummary.Dataset_Name}`}> here</Link>.  \r\n                    </span> \r\n                : \r\n                <Skeleton/>\r\n            }                \r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n    // <>\r\n    //     <Skeleton><Typography variant='h3'></Typography></Skeleton>\r\n    //     <Skeleton><Typography variant='h1'></Typography></Skeleton>\r\n    //     <Skeleton width={500} height={800}></Skeleton>\r\n    // </> \r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DatasetInfoDialog));","// Virtualized product list used on viz page for catalog-like and related-data searches\r\n// Each child will be a dataset, which will have variable children\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, TextField, MenuList, MenuItem, InputAdornment, Grid, Tooltip, IconButton, Accordion, AccordionSummary, AccordionDetails, Typography } from '@material-ui/core';\r\nimport { Search, List, Layers, DirectionsBoat, CallMissedOutgoing, Info, InsertChart, ExpandMore, Visibility, Computer, ExpandLess, ChevronRight, Star } from '@material-ui/icons';\r\n\r\n// import * as JsSearch from 'js-search';\r\nimport { VariableSizeList } from 'react-window';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport { vizSearchResultsSetLoadingState } from '../../Redux/actions/visualization';\r\n\r\nimport DatasetInfoDialog from './DatasetInfoDialog';\r\n\r\nconst makeGroupStyles = {\r\n    searchOptionsMenuList: {\r\n        marginTop: '10px',\r\n        maxHeight: '440px',\r\n        overflow: 'auto'\r\n    },\r\n\r\n    searchOption: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    searchOptionsMenuItem: {\r\n        fontSize: '14px'\r\n    },\r\n\r\n    searchOptionsMenuItemText: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        width: 'calc(100% - 36px)',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    heading: {\r\n        textAlign: 'left',\r\n        padding: '8px 6px',\r\n        color: colors.primary,\r\n        fontSize: '16px',\r\n        marginTop: '5px',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    variableItem: {\r\n        height: '32px',\r\n        // paddingLeft: '48px', \r\n        textAlign: 'left',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n    },\r\n\r\n    variablesWrapper: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        paddingTop: '8px'\r\n    },\r\n\r\n    memberCount: {\r\n        color: colors.primary,\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    datasetOpenIcon:{\r\n        color:colors.primary, \r\n        margin: '0 8px 0 4px',\r\n        // display: 'inline-block'\r\n    },\r\n\r\n    infoIcon: {\r\n        color: colors.primary,\r\n        cursor: 'pointer'\r\n    },\r\n\r\n    listHeader: {\r\n        color: colors.primary,\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    variableName: {\r\n        paddingLeft: '48px'\r\n    }\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    vizSearchResultsLoadingState: state.vizSearchResultsLoadingState,\r\n    cart: state.cart\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nconst MakeGroup = connect(mapStateToProps, mapDispatchToProps)(withStyles(makeGroupStyles)(React.memo((props) => {\r\n\r\n    const { classes, options, vizSearchResultsLoadingState, handleSelectDataTarget, handleSetVariableDetailsID, setdatasetSummaryID, listRef, make, fullCount, cart } = props;\r\n    const [ openIndex, setOpenIndex ] = React.useState(null);\r\n\r\n    const handleSetOpenClick = (i) => {\r\n        if(listRef.current) {\r\n            listRef.current.resetAfterIndex(0);\r\n            \r\n            // Make sure the group being opened is in view\r\n            let currentOffset = listRef.current.state.scrollOffset;\r\n            let targetOffset = i * 38;\r\n\r\n            if(i !== null && (targetOffset < currentOffset - 10 || targetOffset > currentOffset + props.height - 20)){\r\n                setTimeout(() => listRef.current.scrollToItem(i, 'start'), 10);\r\n            }\r\n        }\r\n        setOpenIndex(i);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(listRef.current) listRef.current.resetAfterIndex(0);\r\n    }, [options])\r\n\r\n    const varCount = options.reduce((acc, cur) => acc + cur.variables.length, 0);\r\n    const nonvisualizableDatasetCount = fullCount - options.length;\r\n    const nonvisualizableString = nonvisualizableDatasetCount === 0 ?\r\n        '' :\r\n        ` (${nonvisualizableDatasetCount} hidden)`\r\n\r\n    return (\r\n        <>\r\n        <Grid container>\r\n            <Grid item xs={9}>\r\n                <Typography className={classes.heading}>\r\n                    {\r\n                        vizSearchResultsLoadingState === states.inProgress ?\r\n                        'Searching....' :\r\n                        varCount ? <>{make} Data - Showing {options.length} datasets \r\n                                <Tooltip enterDelay={50} placement='top' title='Variables and datasets which are not flagged as visualizable are not shown on this list, but can be found on the catalog page.'>\r\n                                    <span>{nonvisualizableString}</span>\r\n                                </Tooltip>\r\n                            </>\r\n                        : `${make} Data - No variables found for current search parameters`\r\n                    }\r\n                </Typography>\r\n            </Grid>\r\n\r\n            <Grid item xs={3} container justify='flex-start' alignItems='center'>\r\n                <Typography variant='caption' style={{color: colors.primary, marginBottom: '-16px'}}>\r\n                    Variable Count\r\n                </Typography>\r\n            </Grid>\r\n        </Grid>\r\n        \r\n            <VariableSizeList\r\n                ref={listRef}\r\n                itemData={options}\r\n                itemCount={options.length}\r\n                height={props.height || 270}\r\n                width='100%'\r\n                estimatedItemSize={38}\r\n                style={{overflowY: 'scroll'}}\r\n                itemSize={(i) => openIndex === i ? options[i].variables.length * 32 + 38 + 8: 38}\r\n            >\r\n                {({ index, style }) => (\r\n                    <div style={style}>\r\n                        <Grid \r\n                            container \r\n                            className={classes.searchOption}\r\n                            onClick={() => index === openIndex ? handleSetOpenClick(null) : handleSetOpenClick(index)}\r\n                        >            \r\n                            <Grid item xs={9} container alignItems='center'>\r\n                                {openIndex === index ? \r\n                                    <ExpandMore className={classes.datasetOpenIcon}/> : \r\n                                    <ChevronRight className={classes.datasetOpenIcon}/>\r\n                                }\r\n                                <span className={classes.searchOptionsMenuItemText}>{options[index].Dataset_Name || options[index].Dataset_Name}</span>\r\n                            </Grid>\r\n\r\n                            <Tooltip title={`Dataset contains ${options[index].variables.length} variables matching the search criteria`}>\r\n                                <Grid item xs={1} className={classes.memberCount} container alignItems='center' justify='center'>\r\n                                    {options[index].variables.length}\r\n                                </Grid>\r\n                            </Tooltip>\r\n\r\n                            <Grid item xs={1} style={{paddingLeft: '12px'}} container alignItems='center'>\r\n                                <Tooltip title='View Dataset Details'>\r\n                                    <Info \r\n                                        className={classes.infoIcon}\r\n                                        onClick={(event) => {\r\n                                            event.stopPropagation();\r\n                                            setdatasetSummaryID(options[index].variables[0].Dataset_ID);\r\n                                        }}\r\n                                    />\r\n                                </Tooltip>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={1} container alignItems='center'>\r\n                                {\r\n                                    cart[options[index].Dataset_Name] ?\r\n\r\n                                    <Tooltip title='This dataset is on your favorites list'>\r\n                                        <Star/>\r\n                                    </Tooltip> \r\n                                    \r\n                                    : ''\r\n                                }\r\n                            </Grid>                           \r\n                        </Grid>\r\n                        \r\n                        {\r\n                            index === openIndex ?\r\n                            <Grid container className={classes.variablesWrapper}>\r\n                                {options[index].variables.map((e, i) => (\r\n                                    <Grid \r\n                                        item \r\n                                        xs={12} \r\n                                        key={e.Long_Name} \r\n                                        className={classes.variableItem} \r\n                                        container \r\n                                        alignItems='center'\r\n                                        onClick={() => handleSelectDataTarget(e)}\r\n                                    >\r\n                                        <Grid item xs={10} className={classes.variableName}>{e.Long_Name}</Grid>\r\n                                        <Grid item xs={2}>\r\n                                            <Tooltip title='View Variable Details'>\r\n                                                <Info onClick={(event) => {\r\n                                                        event.stopPropagation();\r\n                                                        handleSetVariableDetailsID(e.ID);\r\n                                                    }}\r\n                                                    style={{paddingLeft: '12px'}}\r\n                                                    className={classes.infoIcon}\r\n                                                    />\r\n                                            </Tooltip>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                ))}\r\n                            </Grid>\r\n                            : ''\r\n                        }\r\n                    </div>\r\n                )}\r\n            </VariableSizeList>\r\n        </>\r\n    )\r\n})));\r\n\r\nconst styles = (theme) => ({\r\n\r\n});\r\n\r\nconst observationListRef = React.createRef();\r\nconst modelListRef = React.createRef();\r\n\r\nconst plMapStateToProps = (state, ownProps) => ({\r\n    windowHeight: state.windowHeight,\r\n    windowWidth: state.windowWidth,\r\n    vizSearchResultsFullCounts: state.vizSearchResultsFullCounts\r\n});\r\n// const sortCartFirst\r\n\r\nconst ProductList = (props) => {\r\n\r\n    const { options, classes, handleSelectDataTarget, handleShowMemberVariables, vizSearchResultsLoadingState, make, windowWidth, windowHeight, handleSetVariableDetailsID, vizSearchResultsFullCounts } = props;\r\n    \r\n    const [ datasetSummaryID, setDatasetSummaryID ] = React.useState(null);\r\n\r\n    return (\r\n        <React.Fragment>                \r\n                <DatasetInfoDialog datasetSummaryID={datasetSummaryID} setDatasetSummaryID={setDatasetSummaryID}/>\r\n\r\n            {\r\n                (make.has('Observation') && make.has('Model')) || make.size === 0 ?\r\n                <>\r\n                    <MakeGroup\r\n                        make='Observation'\r\n                        options={options.Observation}\r\n                        handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                        listRef = {observationListRef}\r\n                        handleSelectDataTarget={handleSelectDataTarget}\r\n                        height={(windowHeight - 204) / 2 - 45}\r\n                        setdatasetSummaryID={setDatasetSummaryID}\r\n                        fullCount={vizSearchResultsFullCounts.Observation}\r\n                    />\r\n\r\n                    <MakeGroup\r\n                        make='Model'\r\n                        options={options.Model}\r\n                        handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                        listRef={modelListRef}\r\n                        handleSelectDataTarget={handleSelectDataTarget}\r\n                        height={(windowHeight - 204) / 2 - 45}\r\n                        setdatasetSummaryID={setDatasetSummaryID}\r\n                        fullCount={vizSearchResultsFullCounts.Model}\r\n                    />\r\n                </> : make.has(\"Observation\") ?\r\n\r\n                <MakeGroup\r\n                    make='Observation'\r\n                    options={options.Observation}\r\n                    handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                    listRef = {observationListRef}\r\n                    handleSelectDataTarget={handleSelectDataTarget}\r\n                    height={windowHeight - 249}\r\n                    setdatasetSummaryID={setDatasetSummaryID}\r\n                    fullCount={vizSearchResultsFullCounts.Observation}\r\n                /> : \r\n\r\n                <MakeGroup\r\n                    make='Model'\r\n                    options={options.Model}\r\n                    handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                    listRef={modelListRef}\r\n                    height={windowHeight - 249}\r\n                    handleSelectDataTarget={handleSelectDataTarget}\r\n                    setdatasetSummaryID={setDatasetSummaryID}\r\n                    fullCount={vizSearchResultsFullCounts.Model}\r\n                />        \r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(plMapStateToProps, null)(withStyles(styles)(ProductList));","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, Chip, TextField, MenuList, MenuItem, InputAdornment, Grid, Tooltip, IconButton, Link, Typography, FormControl, Select, FormHelperText, Button, Popper, Checkbox, FormControlLabel, FormGroup } from '@material-ui/core';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { ExpandMore, ChevronRight, Search, Layers, DirectionsBoat, CallMissedOutgoing, Info, InsertChart, Close } from '@material-ui/icons';\r\n\r\nimport matchSorter from 'match-sorter';\r\n// import * as JsSearch from 'js-search';\r\n// import { FixedSizeList } from 'react-window';\r\n\r\nimport ProductList from './ProductList';\r\nimport MultiCheckboxDropdown from '../UI/MultiCheckboxDropdown';\r\n// import RegionSelector from '../UI/RegionSelector';\r\n\r\nimport { vizSearchResultsFetch, vizSearchResultsSetLoadingState, variableNameAutocompleteFetch, vizSearchResultsStore } from '../../Redux/actions/visualization';\r\nimport { keywordsFetch, searchOptionsFetch } from '../../Redux/actions/catalog';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    // datasets: state.datasets,\r\n    // cruiseList: state.cruiseList,\r\n    vizSearchResults: state.vizSearchResults,\r\n    // keywords: state.keywords,\r\n    vizSearchResultsLoadingState: state.vizSearchResultsLoadingState,\r\n    autocompleteVariableNames: state.autocompleteVariableNames,\r\n    submissionOptions: state.submissionOptions,\r\n    windowHeight: state.windowHeight\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    vizSearchResultsFetch,\r\n    // keywordsFetch,\r\n    vizSearchResultsSetLoadingState,\r\n    variableNameAutocompleteFetch,\r\n    vizSearchResultsStore,\r\n    searchOptionsFetch\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    inputRoot: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    chip: {\r\n        maxWidth: '160px',\r\n        color: 'white',\r\n        borderColor: theme.palette.primary.main,\r\n        marginRight: '6px',\r\n        height: '28px'\r\n    },\r\n\r\n    autocompletePopperPaper: {\r\n        backgroundColor: 'black',\r\n        // zIndex: 30000\r\n        zIndex: z.CONTROL_SECONDARY\r\n    },\r\n\r\n    autocompleteOptions: {\r\n        '&[data-focus=\"true\"]': {\r\n            backgroundColor: colors.greenHover,\r\n          },\r\n          textAlign: 'left'\r\n    },\r\n\r\n    searchWrapper: {\r\n        position: '-webkit-sticky',\r\n        position: 'sticky',\r\n        top: '152px',\r\n        padding: '14px 20px'\r\n    },\r\n\r\n    chip: {\r\n        maxWidth: '160px',\r\n        color: 'white',\r\n        borderColor: theme.palette.primary.main,\r\n        marginRight: '6px',\r\n        height: '28px'\r\n    },\r\n\r\n    resetButton: {\r\n        textTransform: 'none',\r\n        width: '160px',\r\n        height: '37px',\r\n        color: theme.palette.primary.main,\r\n        borderColor: theme.palette.primary.main,\r\n        marginTop: '12px'\r\n    },\r\n\r\n    searchPanelRow: {\r\n        marginTop: '10px',\r\n    },\r\n\r\n    depthFormControlRoot: {\r\n        textAlign: 'left'\r\n    },\r\n\r\n    formControl: {\r\n        width: '90%',\r\n        marginBottom: '6px'\r\n    },\r\n\r\n    autoComplete: {\r\n        width: 'calc(100% - 48px)'\r\n    },\r\n\r\n    searchSectionHeader: {\r\n        color: theme.palette.primary.main,\r\n        textAlign: 'left',\r\n        marginBottom: '8px'\r\n    },\r\n\r\n    showAdvancedWrapper: {\r\n        textAlign: 'left',\r\n        marginTop: '16px',\r\n        width: '100%'\r\n    },\r\n\r\n    regionSelectorInput: {\r\n        fontSize: '13px',\r\n        // padding: '4px 0px'\r\n    },\r\n\r\n    sensorInputLabel: {\r\n        fontSize: '21px'\r\n    },\r\n\r\n    sensorTextField: {\r\n        paddingTop: '8px'\r\n    },\r\n\r\n    popperDisablePortal: {\r\n        bottom: 130\r\n    },\r\n\r\n    addBorder: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    denseGridItem: {\r\n        marginTop: '4px',\r\n        padding: '0px 6px'\r\n    },\r\n\r\n    shiftedAutocompletePopper: {\r\n        height: '400px',\r\n        width: '500px',\r\n        position: 'absolute',\r\n        bottom: '190px',\r\n    },\r\n\r\n    shiftedAutocompletePaper: {\r\n        minHeight : '400px',\r\n    },\r\n\r\n    shiftedAutocompleteListbox: {\r\n        maxHeight: 0,\r\n        minHeight : '400px',\r\n        overflowX: 'hidden'\r\n    },\r\n\r\n    formControlLabelRoot: {\r\n        height: '30px'\r\n    },\r\n\r\n    formControlLabelLabel: {\r\n        fontSize: '14px'\r\n    },\r\n\r\n    closeIcon: {\r\n        float: 'right',\r\n        cursor: 'pointer',\r\n        color: colors.primary,\r\n        textTransform: 'none',\r\n        fontSize: '15px'\r\n    }\r\n});\r\n\r\n// const filterOptions = (options, { inputValue }) => {\r\n//     let values = inputValue.replace('_',' ').split(' ');\r\n//     let result = options;\r\n\r\n//     values.forEach(value => {\r\n//         result = matchSorter(result, value);\r\n//     });\r\n\r\n//     return result.sort((a,b) => a.length - b.length);\r\n// }\r\n\r\nconst defaultState = {\r\n    hasDepth: 'any',\r\n    timeStart: '1900-01-01',\r\n    timeEnd: new Date().toISOString().slice(0,10),\r\n    latStart: -90,\r\n    latEnd: 90,\r\n    lonStart: -180,\r\n    lonEnd: 180,\r\n    sensor: new Set(),\r\n    searchTerms: '',\r\n    temporalResolution: 'Any',\r\n    spatialResolution: 'Any',\r\n    dataSource: 'Any',\r\n    distributor: 'Any',\r\n    processLevel: 'Any',\r\n    make: new Set(),\r\n    region: new Set()\r\n}\r\n\r\nclass DataSearch extends React.Component {\r\n\r\n    state = {\r\n        memberVariablesDataset: null,\r\n        showAdvanced: false,\r\n        sensorsMenuOpen: false,\r\n        regionsMenuOpen: false,\r\n        makesMenuOpen: false,\r\n        ...defaultState\r\n    }\r\n\r\n\r\n    componentDidMount = () => {\r\n        this.props.vizSearchResultsFetch({});\r\n    }\r\n\r\n    handleChangeSearchValue = (e) => {      \r\n        this.updateStateAndSearch({...this.state, [e.target.name]: e.target.value});\r\n    }\r\n\r\n    handleChangeAutocomplete = (statePiece) => {\r\n        return (e, v) => {\r\n            let newState = {...this.state, [statePiece]: v}\r\n            this.updateStateAndSearch(newState);\r\n        }\r\n    }\r\n\r\n    updateStateAndSearch = (newState) => {\r\n        this.props.vizSearchResultsSetLoadingState(states.inProgress);\r\n        this.props.vizSearchResultsStore({Observation: [], Model: []});\r\n\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleChangeSensor = (e, altTypeValue) => {\r\n        let newState = {...this.state, sensor: altTypeValue};\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleChangeMake = (e, altTypeValue) => {\r\n        let newState = {...this.state, make: altTypeValue};\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleToggleShowAdvanced = () => {\r\n        this.setState({...this.state, showAdvanced: !this.state.showAdvanced});\r\n    }\r\n\r\n    handleResetSearch = () => {\r\n        let newState = {...this.state, ...defaultState};\r\n        this.updateStateAndSearch(newState);\r\n    }\r\n\r\n    handleToggleMenu = (menu) => {\r\n        this.setState({...this.state, [menu]: !this.state[menu]})\r\n    }\r\n\r\n    handleClickCheckbox = (e, checked) => {\r\n        let [ column, value ] = e.target.name.split('!!');\r\n        let newSet = new Set(this.state[column]);\r\n\r\n        checked ? newSet.add(value) : newSet.delete(value);\r\n\r\n        this.updateStateAndSearch({...this.state, [column]: newSet});\r\n    }\r\n\r\n    handleClearMultiSelect = (param) => {\r\n        let newState = {...this.state};\r\n        newState[param] = defaultState[param];\r\n        this.updateStateAndSearch(newState);\r\n    }\r\n\r\n    render = () => {\r\n        const {\r\n            classes,\r\n            handleSelectDataTarget,\r\n            // keywords,\r\n            vizSearchResults,\r\n            // vizSearchResultsSetLoadingState,\r\n            autocompleteVariableNames,\r\n            submissionOptions,\r\n            windowHeight\r\n        } = this.props;\r\n\r\n        const { \r\n            searchTerms, \r\n            // searchInputValue, \r\n            memberVariablesDataset,\r\n            hasDepth, \r\n            timeStart, \r\n            timeEnd, \r\n            latStart, \r\n            latEnd, \r\n            lonStart, \r\n            lonEnd,\r\n            temporalResolution,\r\n            spatialResolution,\r\n            dataSource,\r\n            distributor,\r\n            processLevel,\r\n            make,\r\n            region,\r\n            sensor,\r\n        } = this.state;\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <Grid container>\r\n                    <Grid item xs={12}>\r\n                        <Typography style={{display: 'inline-block'}}>\r\n                            Search and filter using the controls on the left. Select a variable to plot from the list on the right.\r\n                        </Typography>\r\n\r\n                        <Button\r\n                            startIcon={<Close style={{fontSize: '22px'}}/>}\r\n                            onClick={this.props.handleCloseDataSearch}\r\n                            className={classes.closeIcon}\r\n                        >\r\n                            Close\r\n                        </Button>\r\n\r\n                        {/* <Close onClick={this.props.handleCloseDataSearch} className={classes.closeIcon}/> */}\r\n                    </Grid>\r\n                    <Grid item xs={4} style={{overflowY: 'auto', maxHeight: windowHeight - 204, padding: '16px', backgroundColor: 'rgba(0,0,0,.4)', display: memberVariablesDataset ? 'none' : ''}}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    name='searchTerms'\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    placeholder='Search'\r\n                                    value={searchTerms}\r\n                                    InputProps={{\r\n                                        classes: {\r\n                                            root: classes.inputRoot\r\n                                        },\r\n                                        startAdornment: (\r\n                                            <React.Fragment>\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <Search style={{color: colors.primary}}/>\r\n                                                </InputAdornment>\r\n                                            </React.Fragment>\r\n                                        )\r\n                                    }}\r\n                                    variant=\"outlined\"\r\n                                    inputRef={this.props.searchInputRef}                        \r\n                                />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Make}\r\n                            selectedOptions={make}\r\n                            handleClear={() => this.handleClearMultiSelect('make')}\r\n                            parentStateKey={'make'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Makes'\r\n                        />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Sensor}\r\n                            selectedOptions={sensor}\r\n                            handleClear={() => this.handleClearMultiSelect('sensor')}\r\n                            parentStateKey={'sensor'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Sensors'\r\n                        />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Region}\r\n                            selectedOptions={region}\r\n                            handleClear={() => this.handleClearMultiSelect('region')}\r\n                            parentStateKey={'region'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Regions'\r\n                        />\r\n\r\n                    <div className={classes.showAdvancedWrapper}>\r\n                        <Link\r\n                            component='button'\r\n                            onClick={this.handleToggleShowAdvanced}\r\n                        >\r\n                            {this.state.showAdvanced ? 'Hide Additional Filters' : 'Additional Filters'}\r\n                        </Link>\r\n                    </div>\r\n\r\n\r\n                    <div style={this.state.showAdvanced ? {} : {display: 'none'}}>\r\n\r\n                        <Grid item container xs={12} className={classes.searchPanelRow}>\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='timeStart'\r\n                                    className={classes.formControl}\r\n                                    id=\"date\"\r\n                                    label=\"Start Date\"\r\n                                    type=\"date\"\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={timeStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='timeEnd'\r\n                                    className={classes.formControl}\r\n                                    id=\"date\"\r\n                                    label=\"End Date\"\r\n                                    type=\"date\"\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={timeEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n                        </Grid>                        \r\n\r\n                        <Grid item container xs={12} className={classes.searchPanelRow}>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='latStart'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lat Start&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -90,\r\n                                        max: 90\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={latStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='latEnd'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lat End&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -90,\r\n                                        max: 90\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={latEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='lonStart'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lon Start&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -180,\r\n                                        max: 180\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={lonStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='lonEnd'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lon End&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -180,\r\n                                        max: 180\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={lonEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>                            \r\n\r\n                            <Grid item xs={6}>\r\n                                <FormControl className={classes.formControl}>\r\n                                <FormHelperText>Depth Levels</FormHelperText>\r\n                                <Select\r\n                                    value={hasDepth}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    name='hasDepth'\r\n                                    MenuProps={{\r\n                                        PopoverClasses: {\r\n                                            paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                        },\r\n                                        // style:{zIndex: 8000}\r\n                                        style: {zIndex: z.CONTROL_SECONDARY}\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value='any'>Any</MenuItem>\r\n                                    <MenuItem value='yes'>Multiple Levels</MenuItem>\r\n                                    <MenuItem value='no'>Surface Only</MenuItem>\r\n                                </Select>                            \r\n                                </FormControl>\r\n                            </Grid>\r\n                                \r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Process Level</FormHelperText>\r\n                                        <Select\r\n                                            value={processLevel}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='processLevel'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                // style:{zIndex: 8000}\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Process_Level.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Temporal Resolution</FormHelperText>\r\n                                        <Select\r\n                                            value={temporalResolution}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='temporalResolution'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                // style:{zIndex: 8000}\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Temporal_Resolution.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Spatial Resolution</FormHelperText>\r\n                                        <Select\r\n                                            value={spatialResolution}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='spatialResolution'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                // style:{zIndex: 8000}\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Spatial_Resolution.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12}>\r\n                                    <Autocomplete\r\n                                        options={this.props.submissionOptions.Data_Source}\r\n                                        renderInput={(params) => <TextField margin='none' {...params} label=\"Data Source\" InputLabelProps={{style:{fontSize: '12px', marginTop: '4px'}}}/>}\r\n                                        getOptionLabel={option => option}\r\n                                        onChange={this.handleChangeAutocomplete('dataSource')}\r\n                                        disablePortal\r\n                                        classes={{\r\n                                            paper: `${classes.shiftedAutocompletePaper} ${classes.autocompletePopperPaper} ${classes.addBorder} `,\r\n                                            input: classes.regionSelectorInput,\r\n                                            option: classes.autocompleteOptions,\r\n                                            popperDisablePortal: classes.shiftedAutocompletePopper,\r\n                                            listbox: classes.shiftedAutocompleteListbox\r\n                                        }}\r\n                                        // PopperComponent={(props) => <Popper {...props}/>}\r\n                                        value={dataSource}\r\n                                    />\r\n                                    {/* <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Data Source</FormHelperText>\r\n                                        <Select\r\n                                            value={dataSource}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='dataSource'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style:{zIndex: 8000}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Data_Source.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl> */}\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12}>\r\n                                <Autocomplete\r\n                                        options={this.props.submissionOptions.Distributor}\r\n                                        renderInput={(params) => <TextField margin='none' {...params} label=\"Distributor\" InputLabelProps={{style:{fontSize: '12px', marginTop: '4px'}}}/>}\r\n                                        getOptionLabel={option => option}\r\n                                        onChange={this.handleChangeAutocomplete('distributor')}\r\n                                        disablePortal\r\n                                        classes={{\r\n                                            paper: `${classes.shiftedAutocompletePaper} ${classes.autocompletePopperPaper} ${classes.addBorder} `,\r\n                                            input: classes.regionSelectorInput,\r\n                                            option: classes.autocompleteOptions,\r\n                                            popperDisablePortal: classes.shiftedAutocompletePopper,\r\n                                            listbox: classes.shiftedAutocompleteListbox\r\n                                        }}\r\n                                        value={distributor}\r\n                                    />\r\n\r\n                                    {/* <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Distributor</FormHelperText>\r\n                                        <Select\r\n                                            value={distributor}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='distributor'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style:{zIndex: 8000}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Distributor.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl> */}\r\n                                </Grid>\r\n                            </Grid>                        \r\n                        </div>\r\n\r\n                        <Grid item xs={12} className={classes.searchPanelRow}>\r\n                            <Button variant='outlined' onClick={this.handleResetSearch} className={classes.resetButton}>\r\n                                Reset Filters\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={8} style={{paddingTop: '12px'}}>\r\n                        <ProductList \r\n                            options={vizSearchResults}\r\n                            handleSelectDataTarget={handleSelectDataTarget}\r\n                            handleShowMemberVariables={this.handleShowMemberVariables}\r\n                            make={make}\r\n                            variableDetailsID={this.props.variableDetailsID}\r\n                            handleSetVariableDetailsID={this.props.handleSetVariableDetailsID}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DataSearch));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles, Tabs, Tab, Paper, Tooltip, IconButton } from '@material-ui/core';\r\nimport { Language, Close } from '@material-ui/icons';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    deleteChart\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    tabsWrapper: {\r\n        position: 'fixed',\r\n        left: 0,\r\n        top: 70,\r\n        // backgroundColor: colors.backgroundGray,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        // zIndex: 39000\r\n    },\r\n\r\n    tabs: {\r\n        maxWidth: '100vw'\r\n    },\r\n\r\n    tab: {\r\n        textTransform: 'none',\r\n        textAlign: 'left',\r\n        boxShadow: '0px 0px  2px 0px #242424',\r\n        color: 'white',\r\n        opacity: 1,\r\n        width: '180px',\r\n        maxHeight: '48px',\r\n        // textOverflow: 'ellipsis',\r\n        // overflow: 'hidden',\r\n        // whiteSpace: 'nowrap',\r\n        '&:not(:first-child)': {\r\n            borderLeft: '3px solid #242424'\r\n        }\r\n    },\r\n\r\n    greenHightlight: {\r\n        color: colors.primary\r\n    },\r\n\r\n    closeIcon: {\r\n        fontSize: '20px',\r\n        position: 'absolute',\r\n        left: 156,\r\n        bottom: 28,\r\n        color: 'white',\r\n        borderRadius: '20%',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        }\r\n    },\r\n})\r\n\r\nconst ChartControlTabs = (props) => {\r\n    const { classes, plotsActiveTab, handlePlotsSetActiveTab, charts } = props;\r\n\r\n    const handleDeleteChart = (e, chartIndex) => {\r\n        e.stopPropagation();\r\n        props.deleteChart(chartIndex);\r\n    }\r\n\r\n    return (\r\n            charts && charts.length ?\r\n\r\n            <Paper className={classes.tabsWrapper}>\r\n                <Tabs \r\n                    className={classes.tabs}\r\n                    value={plotsActiveTab}\r\n                    onChange={handlePlotsSetActiveTab}\r\n                    indicatorColor='primary'\r\n                    variant=\"scrollable\"\r\n                    scrollButtons=\"auto\"\r\n                >\r\n                    <Tooltip title='Return to Globe View'>\r\n                        <Tab icon={<Language/>} className={classes.tab} classes={{selected: classes.greenHightlight}} wrapped={true}/>\r\n                    </Tooltip>\r\n\r\n                    {charts.map((e, i) => (\r\n                        <Tooltip enterDelay={500} key={e.id} title={e.subType + ' of ' + e.data.metadata.Long_Name + ' from ' + e.data.metadata.Dataset_Name}>\r\n                            {/* <div> */}\r\n                                \r\n\r\n                                <Tab \r\n                                    label={\r\n                                        <span style={{maxWidth: '140px'}}>\r\n                                            {e.data.metadata.Long_Name.length > 32 ? e.data.metadata.Long_Name.slice(0,30) + '...' : e.data.metadata.Long_Name}\r\n\r\n                                            {/* <IconButton  className={classes.closeIconButton}> */}\r\n                                            <Tooltip title='Delete plot' placement='top'>\r\n                                                <Close className={classes.closeIcon} onClick={(e) => handleDeleteChart(e, i)}/>\r\n                                            </Tooltip>\r\n                                            {/* </IconButton> */}\r\n                                        </span>\r\n                                    } \r\n                                    className={classes.tab} \r\n                                    classes={{selected: classes.greenHightlight}}\r\n                                />\r\n                            {/* </div> */}\r\n                        </Tooltip>\r\n                    ))}\r\n                </Tabs>\r\n            </Paper>\r\n\r\n            : ''\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChartControlTabs));","const generateVariableFullRangeParams = (varDetails) => {\r\n    \r\n    return {\r\n        lat1: Math.floor(varDetails.Lat_Min * 1000) / 1000,\r\n        lat2: Math.ceil(varDetails.Lat_Max * 1000) / 1000,\r\n        lon1: Math.floor(varDetails.Lon_Min * 1000) / 1000,\r\n        lon2: Math.ceil(varDetails.Lon_Max * 1000) / 1000,\r\n        dt1: varDetails.Time_Min ? varDetails.Time_Min.slice(0, 10) : 1,\r\n        dt2: varDetails.Time_Max ? varDetails.Time_Max.slice(0, 10) : 1,\r\n        depth1: Math.floor(varDetails.Depth_Min * 1000) / 1000 || 0,\r\n        depth2: Math.ceil(varDetails.Depth_Max * 1000) / 1000 || 0\r\n    }\r\n}\r\n\r\nexport default generateVariableFullRangeParams;","import React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { Dialog, DialogContent, Typography, List, ListItem, withStyles } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\n\r\nimport z from '../../Enums/zIndex';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { sparseDataMaxSizeNotificationUpdate } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    sparseDataMaxSizeNotificationData: state.sparseDataMaxSizeNotificationData\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    sparseDataMaxSizeNotificationUpdate\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        minWidth: '700px',\r\n        maxWidth: '60vw',\r\n    },\r\n\r\n    dialogContent: {\r\n        padding: '20px 20px 12px 20px'\r\n    },\r\n\r\n    lastPointValueText: {\r\n        fontSize: '13px'\r\n    },\r\n\r\n    lastPointValueWrapper: {\r\n        backgroundColor: 'rgba(0, 0, 0, .15)',\r\n        padding: '8px',\r\n        margin: '12px 0'\r\n    },\r\n\r\n    closeIcon: {\r\n        fontSize: '20px',\r\n        color: 'white',\r\n        cursor: 'pointer',\r\n        position: 'absolute',\r\n        top: 2,\r\n        right: 2\r\n    },\r\n\r\n    list: {\r\n        padding: '0px 0px 0px 24px'\r\n    },\r\n\r\n    listItem: {\r\n        fontSize: '13px',\r\n        padding: '3px 0px 2px 24px'\r\n    }\r\n})\r\n\r\nconst SparseDataMaxSizeNotification = (props) => {\r\n    const { sparseDataMaxSizeNotificationUpdate, sparseDataMaxSizeNotificationData, classes } = props;\r\n    if(sparseDataMaxSizeNotificationData === null) return '';\r\n    const { time, lat, lon, depth } = sparseDataMaxSizeNotificationData;\r\n\r\n    const handleClose = () => sparseDataMaxSizeNotificationUpdate(null);\r\n\r\n    return(\r\n        <Dialog\r\n            onClose={handleClose}\r\n            open={Boolean(sparseDataMaxSizeNotificationData)}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <Close className={classes.closeIcon} onClick={handleClose}/>\r\n\r\n            <DialogContent className={classes.dialogContent}>\r\n                <Typography>\r\n                    The data requested exceeds the maximum retrievable amount. A visualization has been created from a subset* of the data.\r\n                    If this does not include your data of interest, please reduce the range of the parameters in the control panel and create another visualization.\r\n                </Typography>    \r\n\r\n                <div className={classes.lastPointValueWrapper}>\r\n                    <Typography style={{fontSize: '13px'}}>\r\n                        *The subset includes all requested data with a time before {time.replace('T', ' ').replace('Z', '')} UTC. Some data with a time of exactly {time.replace('T', ' ').replace('Z', '')} may not be included.              \r\n                    </Typography>\r\n                </div>       \r\n\r\n                {/* <div className={classes.lastPointValueWrapper}>\r\n                    <Typography className={classes.lastPointValueText}>\r\n                        \r\n                    </Typography>\r\n                    <List className={classes.list}>\r\n                        <ListItem className={classes.listItem}>\r\n                            {'\\xb7'}All times before {time.replace('T', ' ').replace('Z', '')} UTC\r\n                        </ListItem>\r\n\r\n                        <ListItem className={classes.listItem}>\r\n                        {'\\xb7'}Where time is exactly {time.replace('T', ' ').replace('Z', '')}:\r\n                        </ListItem>\r\n\r\n                        <ListItem>\r\n                            <List className={classes.list}>\r\n                                <ListItem className={classes.listItem}>\r\n                                {'\\xb7'}All latitudes between - 90{'\\xb0'} and {lat}{'\\xb0'}\r\n                                </ListItem>\r\n\r\n                                <ListItem className={classes.listItem}>\r\n                                {'\\xb7'}Where latitude is exactly {lat}{'\\xb0'}:\r\n                                </ListItem>\r\n\r\n                                <ListItem>\r\n                                    <List className={classes.list}>\r\n                                        <ListItem className={classes.listItem}>\r\n                                        {'\\xb7'}All longitudes between -180{'\\xb0'} and {lon}{'\\xb0'}\r\n                                        </ListItem>\r\n\r\n                                        <ListItem className={classes.listItem}>\r\n                                        {'\\xb7'}Where longitude is exactly {lon}{'\\xb0'}:\r\n                                        </ListItem>\r\n\r\n                                        <ListItem>\r\n                                            <List className={classes.list}>\r\n                                                <ListItem className={classes.listItem}>\r\n                                                {'\\xb7'}All depths between 0[m] and {depth}[m]\r\n                                                </ListItem>\r\n                                            </List>\r\n                                        </ListItem>\r\n                                    </List>\r\n                                </ListItem>\r\n                            </List>\r\n                        </ListItem>\r\n                    </List>\r\n                </div> */}\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SparseDataMaxSizeNotification));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, Paper, Tooltip, IconButton, Popper, Grow, ClickAwayListener, MenuList, MenuItem } from '@material-ui/core';\r\nimport { Transform } from '@material-ui/icons';\r\n\r\nimport generateVariableFullRangeParams from '../../Utility/Visualization/generateVariableFullRangeParams';\r\nimport generateVariableSampleRangeParams from '../../Utility/Visualization/generateVariableSampleRangeParams';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = (theme) => ({\r\n    popoutButtonPaper: {\r\n        position: 'fixed',\r\n        display: 'flex',\r\n        borderRadius: '2px',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        backgroundColor: colors.backgroundGray,\r\n        // zIndex: 1490\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    popoutButtonIcon: {\r\n        width: '24px',\r\n        height: '24px'\r\n    },\r\n\r\n    popoutButtonBase: {\r\n        padding: '9px'\r\n    },\r\n\r\n    popperPaper: {\r\n        backgroundColor: 'rgba(0,0,0,.9)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n\r\n    dropdown: {\r\n        // zIndex: 40000,\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        top: '28px !important',\r\n        left: '22px !important',\r\n        // width: '200px'\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts,\r\n    vizPageDataTargetDetails: state.vizPageDataTargetDetails\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n\r\n};\r\n\r\nconst StoredParametersDropdown = (props) => {\r\n    const { classes, charts, handleUpdateParameters, vizPageDataTargetDetails } = props;\r\n\r\n        const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleOpenMenu = e => {\r\n        setAnchorEl(e.currentTarget);\r\n    };\r\n\r\n    const handleCloseMenu = e => {\r\n        setAnchorEl(null);\r\n    }\r\n\r\n    const handleSelect = (params) => {\r\n        handleUpdateParameters(params);\r\n        handleCloseMenu();\r\n    }\r\n\r\n    const syncPlotParams = chart => {\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2 } = chart.data.parameters;\r\n        \r\n        return {\r\n            lat1, lat2, lon1, lon2, depth1, depth2,\r\n            dt1: dt1 ? dt1.slice(0, 10) : '1900-01-01', \r\n            dt2: dt2 ? dt2.slice(0, 10) : '1900-01-01'\r\n        };\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Paper className={classes.popoutButtonPaper} style={{left: 281, top: 270}}>\r\n                <Tooltip title='Parameter Quick Set Options'>\r\n                    <span>\r\n                        <IconButton \r\n                            className={classes.popoutButtonBase}\r\n                            disabled={props.disableButton}\r\n                        >\r\n                            <Transform onClick={handleOpenMenu} className={classes.popoutButtonIcon}/>                                            \r\n                        </IconButton>\r\n                    </span>\r\n                </Tooltip>\r\n            </Paper>\r\n\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} transition className={classes.dropdown} placement='right'>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={classes.popperPaper}>\r\n                            <ClickAwayListener onClickAway={handleCloseMenu}>\r\n                                <MenuList>\r\n                                    <MenuItem onClick={() => handleSelect(generateVariableSampleRangeParams(vizPageDataTargetDetails))}>Set Parameters to Preliminary Variable Range</MenuItem>\r\n                                    <MenuItem onClick={() => handleSelect(generateVariableFullRangeParams(vizPageDataTargetDetails))}>Set Parameters to Maximum Variable Range</MenuItem>\r\n                                    <MenuItem>Set Parameters to Match Cruise Boundaries: </MenuItem>\r\n                                    {\r\n                                        charts.map(e => (\r\n                                            <MenuItem onClick={() => handleSelect(syncPlotParams(e))} key={e.id}>{'Set Parameters to Match ' + e.subType + ': ' + e.data.metadata.Long_Name}</MenuItem>\r\n                                        ))\r\n                                    }\r\n                                    {/* Item for each stored set of parameters */}\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(StoredParametersDropdown));","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\nimport Cookies from 'js-cookie';\r\n\r\nimport { withStyles, Tabs, Collapse, Paper, Badge, ButtonGroup, Grid, IconButton, Icon, ListItem, MenuItem, Typography, Drawer, TextField, FormControl, InputLabel, Button, Tooltip, ClickAwayListener, Slide} from '@material-ui/core';\r\nimport { Edit, PlayArrow, ControlCamera , Settings, Fastfood, ShowChart, Search, Cached, LibraryBooks, ArrowRight, ChevronLeft, ChevronRight, InsertChartOutlined, Language, Delete, ShoppingCart, Info, DirectionsBoat } from '@material-ui/icons';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend, vizPageDataTargetSetAndFetchDetails, storedProcedureRequestSend, sparseDataQuerySend, guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport validation from '../../Enums/validation';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\nimport mapVizType from '../../Utility/Visualization/mapVizType';\r\nimport cleanSPParams from '../../Utility/Visualization/cleanSPParams'\r\nimport aggregateChartDataSize from '../../Utility/Visualization/aggregateChartDataSize';\r\nimport generateVariableSampleRangeParams from '../../Utility/Visualization/generateVariableSampleRangeParams';\r\n\r\nimport DataSearch from './DataSearch';\r\nimport ChartControl from './ChartControl';\r\nimport VariableDetailsDialog from './VariableDetailsDialog';\r\nimport ChartControlTabs from './ChartControlTabs';\r\nimport HelpButtonAndDialog from '../UI/HelpButtonAndDialog';\r\nimport StoredParametersDropdown from './StoredParametersDropdown';\r\nimport SparseDataMaxSizeNotification from './SparseDataMaxSizeNotification';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts,\r\n    cart: state.cart,\r\n    dataTarget: state.vizPageDataTarget,\r\n    vizPageDataTargetDetails: state.vizPageDataTargetDetails,\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen,\r\n    vizPageDataTargetSetAndFetchDetails,\r\n    storedProcedureRequestSend,\r\n    sparseDataQuerySend,\r\n    guestPlotLimitNotificationSetIsVisible\r\n}\r\n\r\nconst drawerWidth = 280;\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\n// const getDatePlaceholder = (date) => {\r\n//     if(isNaN(new Date(date)).valueOf()) return 'yyyy-MM-dd';\r\n    \r\n//     let month  = date.getMonth() + 1;\r\n//     let day = date.getDate();\r\n//     let year = date.getFullYear();\r\n//     return [year, month < 10 ? '0' + month : month, day < 10 ? '0' + day : day].join('-');\r\n// }\r\n\r\nconst styles = (theme) => ({\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        height: 'auto',\r\n        // minHeight: 400,\r\n        top: 180,\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    openPanelChevron: {\r\n        position: 'fixed',\r\n        left: '5px',\r\n        top: '380px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n      },\r\n    \r\n      closePanelChevron: {\r\n        position: 'fixed',\r\n        left: drawerWidth + 5,\r\n        top: '380px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n      },\r\n\r\n    dataSearchMenuPaper: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        bottom: 60,\r\n        left: 0,\r\n        width: '98vw',\r\n        height: 'auto',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n\r\n    controlPanelForm: {\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    \r\n    formGridItem: {\r\n        border: '1px solid #313131',\r\n        borderBottom: 'none',\r\n        borderTop: 'none',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  vizTypeSelectFormControl: {\r\n      width: '100%',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    }\r\n  },\r\n\r\n  depressed: {\r\n      boxShadow: 'inset 1px 1px 5px #1c1c1c'\r\n  },\r\n\r\n  padLeft: {\r\n    padding: '6px 0 2px 7px',\r\n    // transform: 'translate(0, 1.5px) scale(0.75)',\r\n    // transformOrigin: 'top left'\r\n  },\r\n\r\n  dateTimeInput: {\r\n    padding: '6px 0 2px 7px',\r\n    alignItems: 'start'\r\n  },\r\n\r\n  visualizeButton: {\r\n      height: '56px',\r\n      borderRadius: 0,\r\n      backgroundColor: colors.backgroundGray,\r\n      color: theme.palette.primary.main,\r\n      fontVariant: 'normal',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    },\r\n      '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n            color: 'white'\r\n        }\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow',\r\n    fontSize: '12px'\r\n  },\r\n\r\n  vizButtonTooltip: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  datePickerInputAdornment: {\r\n      padding: 0\r\n  },\r\n\r\n  clearChartsButton: {\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c',\r\n      width: '100%',\r\n      borderRight: '1px solid #313131'\r\n\r\n  },\r\n\r\n  resetSPParamsButton: {\r\n    borderRadius: 0,\r\n    backgroundColor: '#3c3c3c',\r\n    width: '100%',\r\n  },\r\n\r\n  datePicker: {\r\n      width: '100%'\r\n  },\r\n\r\n  vizTypeMenu: {\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n  vizTypeMenuItem: {\r\n    '&:hover': {backgroundColor: colors.greenHover}\r\n  },\r\n\r\n    controlPanelItem: {\r\n        textTransform: 'none',\r\n        textAlign: 'left',\r\n        fontSize: '17px',\r\n        fontWeight: 200,\r\n        color: colors.primary,\r\n        justifyContent: 'flex-start',\r\n        height: '56px'\r\n    },\r\n\r\n    controlPanelItemLabel: {\r\n      whiteSpace: 'nowrap',\r\n      overflow: 'hidden',\r\n      textOverflow: 'ellipsis',\r\n      display: 'inline-block'\r\n    },\r\n\r\n    controlPanelItemStartIcon: {\r\n        display: 'inline-block'\r\n    },\r\n\r\n    textField: {\r\n        width: '100%'\r\n    },\r\n\r\n    drawHelpText: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        margin: '0 calc(50vw - 226px)',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        color: 'white',\r\n        fontSize: '18px',\r\n        backgroundColor: 'rgba(0, 0, 0, .6)',\r\n        padding: '8px',\r\n        backdropFilter: 'blur(5px)',\r\n        borderRadius: '4px'\r\n    },\r\n\r\n    popoutButtonPaper: {\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        borderRadius: '2px',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    popoutButtonIcon: {\r\n        width: '24px',\r\n        height: '24px'\r\n    },\r\n\r\n    popoutButtonBase: {\r\n        padding: '9px'\r\n    }\r\n});\r\n\r\nclass NewVizControlPanel extends React.Component {\r\n\r\n    state = {\r\n        variableDetailsID: null,\r\n        showControlPanel: true,\r\n        dataSearchMenuOpen: false,\r\n        tableName: '',\r\n        depth1: 0,\r\n        depth2: 0,\r\n        dt1: '1900-01-01',\r\n        dt2: new Date().toISOString().slice(0,10),\r\n        lat1: 0,\r\n        lat2: 0,\r\n        lon1: 0,\r\n        lon2: 0,\r\n        selectedVizType: '',\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        addedGlobeUIListeners: false,\r\n        showDrawHelp: false,\r\n        storedParams: {\r\n            depth1: 0,\r\n            depth2: 0,\r\n            dt1: '1900-01-01',\r\n            dt2: new Date().toISOString().slice(0,10),\r\n            lat1: 0,\r\n            lat2: 0,\r\n            lon1: 0,\r\n            lon2: 0,\r\n        }\r\n    }\r\n\r\n    searchInputRef = React.createRef();\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.user) this.props.guestPlotLimitNotificationSetIsVisible(true);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n\r\n        // if(prevProps.plotsActiveTab !== this.props.plotsActiveTab){\r\n        //     if(this.props.plotsActiveTab === 0){\r\n        //         this.setState({...this.state, ...this.state.storedParams});\r\n        //     }\r\n\r\n        //     else {\r\n        //         let chartParams = this.props.charts[this.props.plotsActiveTab - 1] ? this.props.charts[this.props.plotsActiveTab - 1].data.parameters : null;\r\n        //         if(chartParams !== null) {\r\n        //             this.setState({...this.state,\r\n        //                 lat1: chartParams.lat1,\r\n        //                 lat2: chartParams.lat2,\r\n        //                 lon1: chartParams.lon1,\r\n        //                 lon2: chartParams.lon2,\r\n        //                 depth1: chartParams.depth1,\r\n        //                 depth2: chartParams.depth2,\r\n        //                 dt1: chartParams.dt1,\r\n        //                 dt2: chartParams.dt2.slice(0,10)\r\n        //             })\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n\r\n        if(prevProps.charts.length && !this.props.charts.length){\r\n            this.props.handleShowGlobe();\r\n        } // this should be removed when deletion saga is fixed\r\n\r\n        if((this.props.mapContainerRef.current) && (prevState.lat1 !== this.state.lat1 || prevState.lat2 !== this.state.lat2 || prevState.lon1 !== this.state.lon1 || prevState.lon2 !== this.state.lon2)){\r\n            \r\n            const lat1 = parseFloat(this.state.lat1);\r\n            const lat2 = parseFloat(this.state.lat2);\r\n            const lon1 = parseFloat(this.state.lon1);\r\n            let _lon2 = parseFloat(this.state.lon2);\r\n            const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n            this.props.mapContainerRef.current.regionLayer.removeAll();\r\n            var polygon = {\r\n                type: 'polygon', \r\n                rings: [\r\n                    [lon1, lat1],\r\n                    [lon2, lat1],\r\n                    [lon2, lat2],\r\n                    [lon1, lat2],\r\n                    [lon1, lat1]\r\n                ]\r\n            };\r\n\r\n            let regionGraphic = new this.props.mapContainerRef.current.props.esriModules.Graphic({\r\n                geometry: polygon,\r\n                symbol: polygonSymbol\r\n            })\r\n\r\n            this.props.mapContainerRef.current.regionLayer.add(regionGraphic);\r\n        }\r\n\r\n        if(this.props.vizPageDataTargetDetails && this.props.vizPageDataTargetDetails !== prevProps.vizPageDataTargetDetails){\r\n\r\n            let data = this.props.vizPageDataTargetDetails;\r\n            let surfaceOnly = !data.Depth_Max;\r\n            let irregularSpatialResolution = data.Spatial_Resolution === 'Irregular';\r\n\r\n            let derivedParams = generateVariableSampleRangeParams(data);\r\n\r\n            let { lat1, lat2, lon1, lon2 } = derivedParams;\r\n\r\n            if(irregularSpatialResolution && this.props.globeUIRef.current){\r\n                this.props.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            // console.log(irregularSpatialResolution)\r\n            // console.log()\r\n            if(!irregularSpatialResolution && data.temporalResolution !== temporalResolutions.monthlyClimatology){\r\n                this.props.snackbarOpen('Default parameters for satellite and model data will exceed the maximum visualizable size. Please reduce the time range or region size.')\r\n            }\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                // dt1,\r\n                // dt2,\r\n                // lat1,\r\n                // lat2,\r\n                // lon1,\r\n                // lon2,\r\n                // depth1,\r\n                // depth2,\r\n                ...derivedParams,\r\n                selectedVizType: '',\r\n                storedParams: {\r\n                    ...this.state.storedParams,\r\n                    ...derivedParams\r\n                    // dt1,\r\n                    // dt2,\r\n                    // lat1,\r\n                    // lat2,\r\n                    // lon1,\r\n                    // lon2,\r\n                    // depth1,\r\n                    // depth2,\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.vizPageDataTargetSetAndFetchDetails(null);\r\n        this.props.mapContainerRef.current && this.props.mapContainerRef.current.regionLayer && this.props.mapContainerRef.current.regionLayer.removeAll();\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: parseFloat(extent.ymin.toFixed(3)),\r\n            lat2: parseFloat(extent.ymax.toFixed(3)),\r\n            lon1: parseFloat(_lon1.toFixed(3)),\r\n            lon2: parseFloat(_lon2.toFixed(3))\r\n        };\r\n\r\n        this.setState({...this.state, ...newCoordinates, storedParams: {...this.state.storedParams, ...newCoordinates}});\r\n    }\r\n\r\n    handleUpdateParameters = (parameters) => {\r\n        const { lat1, lat2, lon1, lon2, depth1, depth2, dt1, dt2} = parameters;\r\n        this.setState({...this.state, lat1, lat2, lon1, lon2, depth1, depth2, dt1, dt2});\r\n    }\r\n\r\n    handleShowChartsClick = () => {\r\n        // if(this.props.showCharts){\r\n        //     this.props.handleShowGlobe();\r\n        // }\r\n\r\n        // else {\r\n        //     this.props.handleShowCharts();\r\n        // }\r\n        if(this.props.plotsActiveTab === 0){\r\n            this.props.handlePlotsSetActiveTab(null, 1);\r\n        }\r\n\r\n        else {\r\n            this.props.handlePlotsSetActiveTab(null, 0);\r\n        }\r\n    }\r\n\r\n    handleVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state;\r\n\r\n        let isSparseVariable = this.props.vizPageDataTargetDetails.Spatial_Resolution === spatialResolutions.irregular;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                dt1 + '-01-1900' :\r\n                dt1,\r\n            dt2: this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                dt2 + '-01-1900' :\r\n                dt2 + 'T23:59:59',\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.props.vizPageDataTargetDetails.Variable,\r\n            tableName: this.props.vizPageDataTargetDetails.Table_Name,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.props.vizPageDataTargetDetails\r\n        }\r\n\r\n        if(isSparseVariable && mapping.sp !== storedProcedures.depthProfile) this.props.sparseDataQuerySend(payload);\r\n        else this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    handleDrawClick = () => {\r\n        const { esriModules, regionLayer } = this.props.globeUIRef.current.props;\r\n        var { sketchModel } = this.props.globeUIRef.current;\r\n\r\n        if(!this.state.addedGlobeUIListeners){\r\n            const throttledUpdate = throttle(75, (event) => {\r\n                if(event.state === 'active'){\r\n                    this.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                }\r\n            })\r\n    \r\n            sketchModel.on(\"create\", (event) => {\r\n                if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n                    sketchModel.complete();\r\n                }\r\n    \r\n                if(event.graphic && event.graphic.visible) {\r\n                    event.graphic.visible = false;\r\n                }\r\n\r\n                if(event.state === 'cancel'){\r\n                    sketchModel.cancel();\r\n                    this.setState({...this.state, showDrawHelp: false});\r\n                }\r\n\r\n                if(event.state === 'start'){\r\n                    regionLayer.removeAll();\r\n                }\r\n    \r\n                if(event.state === \"complete\") {\r\n                    this.setState({...this.state, showDrawHelp: false});\r\n                    this.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                }\r\n            });\r\n    \r\n            sketchModel.on('create', throttledUpdate)\r\n    \r\n            sketchModel.on('update', (event) => {\r\n                if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n                    if(event.state === 'cancel') return;\r\n                    this.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n                }\r\n            });          \r\n        }\r\n                \r\n        this.setState({...this.state, showDrawHelp: true, addedGlobeUIListeners: true});\r\n\r\n        if(this.state.showDrawHelp) sketchModel.cancel();\r\n\r\n        else {\r\n            sketchModel.create('polyline', {\r\n                mode:'click'            \r\n            });\r\n        }\r\n    }\r\n\r\n    handleSelectDataTarget = (target) => {\r\n        this.setState({...this.state, dataSearchMenuOpen: false});\r\n        this.props.vizPageDataTargetSetAndFetchDetails(target);\r\n    }\r\n\r\n    handleCloseDataSearch = () => {\r\n        if(this.state.dataSearchMenuOpen){\r\n            this.setState({...this.state, dataSearchMenuOpen: false});\r\n        }\r\n    }\r\n\r\n    handleSetVariableDetailsID = (variableDetailsID) => {\r\n        this.setState({...this.state, variableDetailsID})\r\n    }\r\n\r\n    handleChangeInputValue = (e) => {\r\n        let parseThese = ['lat1', 'lat2', 'lon1', 'lon2', 'depth1', 'depth2'];\r\n        let parsed = parseFloat(e.target.value);\r\n        let value;\r\n\r\n        if(parseThese.includes(e.target.name)){\r\n            if(isNaN(parsed)){\r\n                value = e.target.value;\r\n            }\r\n\r\n            else value = parsed;\r\n        }\r\n\r\n        else {\r\n            value = e.target.value;\r\n        }\r\n\r\n        this.setState({...this.state, [e.target.name]: value, storedParams: {...this.state.storedParams, [e.target.name]: value}});        \r\n    }\r\n\r\n    handleToggleCharts = () => {\r\n\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { vizPageDataTargetDetails } = this.props;\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2, selectedVizType } = this.state;\r\n        \r\n        if(!vizPageDataTargetDetails) return 0;        \r\n\r\n        if(vizPageDataTargetDetails.Spatial_Resolution === spatialResolutions.irregular) {\r\n            return 1;\r\n            // let sparseDataUncertaintyMultiplier = 4;\r\n            // let totalCount = vizPageDataTargetDetails.Lat_Count;\r\n            // let totalTime = Date.parse(vizPageDataTargetDetails.Time_Max) - Date.parse(vizPageDataTargetDetails.Time_Min);\r\n            // let subsetTime = Date.parse(dt2) - Date.parse(dt1) + 86400000;\r\n            // let timeRatio = totalTime === 0 ? 1\r\n            //     : subsetTime === 0 ? 86400000 / totalTime\r\n            //     : subsetTime / totalTime;\r\n            \r\n            // let totalLat = vizPageDataTargetDetails.Lat_Max - vizPageDataTargetDetails.Lat_Min;\r\n            // let subsetLat = lat2 - lat1;\r\n            // let latRatio = totalLat === 0 ? 1\r\n            //     : subsetLat === 0 ? 1/totalLat\r\n            //     : subsetLat/totalLat;\r\n            // latRatio = latRatio > 1 ? 1 : latRatio;\r\n\r\n            // let totalLon = vizPageDataTargetDetails.Lon_Max - vizPageDataTargetDetails.Lon_Min;\r\n            // let subsetLon = lon2 >= lon1 ? lon2 - lon1 :\r\n            //     (180 - lon1) + (lon2 + 180)\r\n            // let lonRatio = totalLon === 0 ? 1\r\n            //     : subsetLon === 0 ? 1/totalLon\r\n            //     : subsetLon / totalLon;\r\n            // lonRatio = lonRatio > 1 ? 1 : lonRatio;\r\n\r\n            // let depthRatio;\r\n\r\n            // if(vizPageDataTargetDetails.Depth_Max){\r\n            //     let totalDepth = vizPageDataTargetDetails.Depth_Max - vizPageDataTargetDetails.Depth_Min;\r\n            //     let subsetDepth = depth2 - depth1;\r\n            //     depthRatio = totalDepth === 0 ? 1\r\n            //         : subsetDepth === 0 ? 1/totalDepth\r\n            //         : subsetDepth / totalDepth;\r\n            // }\r\n\r\n            // else depthRatio = 1;\r\n            // let final = totalCount * timeRatio * latRatio * lonRatio * depthRatio * sparseDataUncertaintyMultiplier;\r\n            \r\n            // if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return final / 2;\r\n\r\n            // return final;\r\n        }\r\n        \r\n        else {\r\n            const date1 = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? dt1 : Date.parse(dt1);\r\n            const date2 = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? dt2 : Date.parse(dt2);\r\n            \r\n            const dayDiff = (date2 - date1) / 86400000;\r\n            \r\n            const res = mapSpatialResolutionToNumber(vizPageDataTargetDetails.Spatial_Resolution);\r\n            var dateCount = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? date2 - date1 + 1\r\n                : Math.floor(dayDiff / mapTemporalResolutionToNumber(vizPageDataTargetDetails.Temporal_Resolution)) || 1;\r\n\r\n            dateCount *= 1.4 // add more weight to date because of sql indexing\r\n\r\n            const depthCount = depthUtils.count({data: vizPageDataTargetDetails}, depth1, depth2) || 1;\r\n            \r\n            const latCount = (lat2 - lat1) / res;\r\n            const lonCount = lon2 > lon1 ? (lon2 - lon1) / res\r\n                : ((180 - lon1) + (lon2 + 180)) / res;\r\n            const pointCount = lonCount * latCount * depthCount * dateCount;\r\n            if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return pointCount / 200;\r\n\r\n            return pointCount;\r\n        }\r\n\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        // if(this.state.surfaceOnly) return '';\r\n        // if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth1)) return 'Invalid value';\r\n        // if(parseFloat(this.state.depth1) < 0) return validation.depth.negative;\r\n        // if(parseFloat(this.state.depth1) > parseFloat(this.state.depth2)) return validation.depth.depthOneIsLower;\r\n        // if(parseFloat(this.state.depth) < Math.floor(parseFloat(this.props.vizPageDataTargetDetails.Depth_Min))) return `Minimum depth is ${this.props.vizPageDataTargetDetails.Depth_Min}`;\r\n        // if(parseFloat(this.state.depth1) > parseFloat(this.props.vizPageDataTargetDetails.Depth_Max)) return validation.depth.depthOneOutOfBounds.replace('$', parseFloat(this.props.vizPageDataTargetDetails.Depth_Max).toFixed(2));\r\n        if(this.state.depth1 < 0) return 'Depth cannot be negative';\r\n        if(this.state.depth1 > this.state.depth2) return 'Start cannot be greater than end';\r\n        if(this.state.depth1 > this.props.vizPageDataTargetDetails.Depth_Max) return `Maximum depth start is ${this.props.vizPageDataTargetDetails.Depth_Max}`\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        // if(this.state.surfaceOnly) return '';\r\n        // if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.state.depth2)) return validation.generic.invalid;\r\n        // if(parseFloat(this.state.depth2) < 0) return validation.depth.negative;\r\n        // if(parseFloat(this.state.depth1) > parseFloat(this.state.depth2)) return validation.depth.depthOneIsLower;\r\n        // if(parseFloat(this.state.depth2) < parseFloat(this.props.vizPageDataTargetDetails.Depth_Min)) return validation.depth.depthTwoOutOfBounds.replace('$', parseFloat(this.props.vizPageDataTargetDetails.Depth_Min).toFixed(2));\r\n        if(this.state.depth2 < 0) return 'Depth cannot be negative';\r\n        if(this.state.depth1 > this.state.depth2) return 'Start cannot be greater than end';\r\n        if(this.state.depth2 < this.props.vizPageDataTargetDetails.Depth_Min) return `Minimum depth end is ${this.props.vizPageDataTargetDetails.Depth_Min}`;\r\n        return ''; \r\n    }\r\n\r\n    // checkStartDateValid = () => {\r\n    //     if(isNaN(new Date(this.props.dt1)).valueOf() || !this.props.dt1) return 'Start date is invalid';\r\n    // }\r\n\r\n    // checkEndDateValid = () => {\r\n    //     if(isNaN(new Date(this.props.dt2)).valueOf() || !this.props.dt1) return 'End date is invalid';\r\n    // }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology) {\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            return '';\r\n        }\r\n\r\n        else {\r\n            if(!this.state.dt1) return \"Invalid date\"\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            if(this.state.dt1 < this.props.vizPageDataTargetDetails.Time_Min.slice(0,10)) {\r\n                return `Minimum start date is ${this.props.vizPageDataTargetDetails.Time_Min.slice(5, 10) + '-' + this.props.vizPageDataTargetDetails.Time_Min.slice(0, 4)}`\r\n            };\r\n            return '';\r\n        }\r\n        // if(this.props.dt1 > this.props.dt2) return validation.date.dateOneIsLater;\r\n        // if(this.props.dt1 > this.props.vizPageDataTargetDetails.Time_Max) return validation.date.dateOneOutOfBounds.replace('$', this.props.vizPageDataTargetDetails.Time_Max);\r\n        // return '';\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology) {\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            return '';\r\n        }\r\n\r\n        else {\r\n            if(!this.state.dt2) return \"Invalid date\"\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            if(this.state.dt2 > this.props.vizPageDataTargetDetails.Time_Max.slice(0,10)) {\r\n                return `Maximum end date is ${this.props.vizPageDataTargetDetails.Time_Max.slice(5, 10) + '-' + this.props.vizPageDataTargetDetails.Time_Max.slice(0, 4)}`\r\n            };\r\n            return '';\r\n        }\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        const { lat1, lat2 } = this.state;\r\n        const { Lat_Min, Lat_Max } = this.props;\r\n        // if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat1)) return validation.generic.invalid;\r\n        // if(parseFloat(this.props.lat1) < -90 || parseFloat(this.props.lat1) > 90) return validation.generic.invalid;\r\n        // if(parseFloat(this.props.lat1) > parseFloat(this.props.lat2)) return validation.lat.latOneIsHigher;\r\n        // if(parseFloat(this.props.lat1) > parseFloat(this.props.vizPageDataTargetDetails.Lat_Max)) return validation.lat.latOneOutOfBounds.replace('$', this.props.vizPageDataTargetDetails.Lat_Max);\r\n        if(this.state.lat1 > this.props.vizPageDataTargetDetails.Lat_Max) return `Maximum start lat is ${this.props.vizPageDataTargetDetails.Lat_Max}`;\r\n        if(this.state.lat1 > this.state.lat2) return `Start cannot be greater than end`;\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        // if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat2)) return validation.generic.invalid;\r\n        // if(parseFloat(this.props.lat2) < -90 || parseFloat(this.props.lat2) > 90) return validation.generic.invalid;\r\n        // if(parseFloat(this.props.lat2) < parseFloat(this.props.vizPageDataTargetDetails.Lat_Min)) return validation.lat.latTwoOutOfBounds.replace('$', this.props.vizPageDataTargetDetails.Lat_Min);\r\n        if(this.state.lat2 < this.props.vizPageDataTargetDetails.Lat_Min) return `Minimum end lat is ${this.props.vizPageDataTargetDetails.Lat_Min}`;\r\n        if(this.state.lat1 > this.state.lat2) return `Start cannot be greater than end`;\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        const { lon1, lon2 } = this.state;\r\n        const { Lon_Min, Lon_Max } = this.props.vizPageDataTargetDetails;\r\n        // if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon1)) return validation.generic.invalid;\r\n        // if(parseFloat(this.props.lon1) < -180 || parseFloat(this.props.lon1) > 180) return validation.generic.invalid;\r\n        // if(this.props.lon1 > this.props.lon2) return '';\r\n        // if(parseFloat(this.props.lon1) > parseFloat(this.props.vizPageDataTargetDetails.Lon_Max)) return validation.lon.lonOneOutOfBounds.replace('$', this.props.vizPageDataTargetDetails.Lon_Max);\r\n        if(lon2 >= lon1){\r\n            if(lon1 > Lon_Max) return `Maximum start lon is ${Lon_Max}` \r\n        }\r\n\r\n        else {\r\n            if(Lon_Min > lon1 || Lon_Max > lon1 || Lon_Min < lon2 || Lon_Max < lon2){}\r\n            else return `Longitude outside dataset coverage`\r\n        }\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        const { lon1, lon2 } = this.state;\r\n        const { Lon_Min, Lon_Max } = this.props.vizPageDataTargetDetails;\r\n        // if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon2)) return validation.generic.invalid;\r\n        // if(parseFloat(this.props.lon2) < -180 || parseFloat(this.props.lon2) > 180) return validation.generic.invalid;\r\n        // if(parseFloat(this.props.lon2) < parseFloat(this.props.vizPageDataTargetDetails.Lon_Min)) return validation.lon.lonTwoOutOfBounds.replace('$', this.props.vizPageDataTargetDetails.Lon_Max);\r\n        if(lon2 >= lon1) {\r\n            if(lon2 < Lon_Min) return `Minimum end lon is ${Lon_Min}`\r\n        }\r\n        \r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.state.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', 'variable');\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        // if(this.state.dt1 === this.state.dt2) return validation.type.dateRangeRequired.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.state.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', 'variable');\r\n        // if(this.state.depth1 === this.state.depth2) return validation.type.depthRangeRequired.replace('$', 'Depth Profile');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.state.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        const aggregateSize = aggregateChartDataSize(this.props.charts);\r\n\r\n        if(!this.props.user){\r\n            let guestPlotCount = parseInt(Cookies.get('guestPlotCount'));\r\n            if(guestPlotCount && guestPlotCount >= 10) return validation.generic.guestMaximumReached;\r\n        }\r\n\r\n        if(!this.state.selectedVizType) return validation.generic.vizTypeMissing;\r\n        if(this.state.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.state.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n        \r\n        if(this.state.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count({data: this.props.vizPageDataTargetDetails}, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n\r\n        if(this.state.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1200000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.vizPageDataTargetDetails) return validation.generic.variableMissing;\r\n        if(this.props.charts.length > 9) return 'Total number of plots is too large. Please delete 1 or more'\r\n        if(aggregateSize + dataSize > 4000000) return 'Total rendered data amount is too large. Please delete 1 or more plots.'\r\n        \r\n        if(\r\n            !this.state.irregularSpatialResolution && \r\n            this.state.selectedVizType !== vizSubTypes.timeSeries && \r\n            (Date.parse(this.state.dt2) - Date.parse(this.state.dt1) > 86400000 * 365)\r\n            ) return \"Maximum date range for non-time series plots of gridded data is 1 year\";\r\n        return ''\r\n    }\r\n\r\n    render = () => {\r\n        const { \r\n            classes,            \r\n            showCharts,\r\n            handleShowGlobe,\r\n            handleChange,\r\n            handleLatLonChange,\r\n            datasets,\r\n            dataTarget,\r\n            vizPageDataTargetDetails,\r\n            globeUIRef,\r\n            charts,\r\n            plotsActiveTab\r\n        } = this.props;\r\n\r\n        const {\r\n            variableDetailsID,\r\n            showControlPanel,\r\n            dataSearchMenuOpen,\r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType\r\n        } = this.state;\r\n\r\n        let details = vizPageDataTargetDetails;\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n\r\n        // review these\r\n        // let minDateMessage = '';\r\n        // let maxDateMessage = '';\r\n        if(details) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDate(),\r\n                this.checkEndDate()\r\n            ];\r\n        } else \r\n        validations = Array(14).fill('');\r\n        \r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateMessage,\r\n            endDateMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            startDateMessage,\r\n            endDateMessage\r\n            // minDateMessage,\r\n            // maxDateMessage,\r\n            // startDateValidMessage,\r\n            // endDateValidMessage\r\n        ];\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {/* <StoredParametersDropdown \r\n                    handleUpdateParameters={this.handleUpdateParameters}\r\n                    disableButton={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                /> */}\r\n\r\n                {/* <ChartControlTabs handlePlotsSetActiveTab={this.props.handlePlotsSetActiveTab} plotsActiveTab={plotsActiveTab}/> */}\r\n\r\n                <VariableDetailsDialog variableDetailsID={variableDetailsID} handleSetVariableDetailsID={this.handleSetVariableDetailsID}/>\r\n                <SparseDataMaxSizeNotification/>\r\n\r\n                    {\r\n                        this.state.showDrawHelp ? \r\n\r\n                        <Typography className={classes.drawHelpText}>\r\n                            Click on the globe to start drawing, and again to finish.\r\n                        </Typography>\r\n\r\n                        : ''\r\n                    }\r\n\r\n                { showControlPanel ?\r\n\r\n                <div>\r\n                    <Tooltip title=\"Hide control panel\" placement='right'>\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={() => this.setState({...this.state, showControlPanel: false})}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </div>\r\n\r\n                :\r\n                \r\n                <Tooltip title='Show control panel' placement='right'>\r\n                    <IconButton \r\n                        className={classes.openPanelChevron} \r\n                        aria-label=\"toggle-panel\" \r\n                        color=\"primary\" \r\n                        onClick={() => this.setState({...this.state, showControlPanel: true})}>\r\n                        <ChevronRight style={{fontSize: 32}}/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n\r\n\r\n                    {/* <Button\r\n                        fullWidth={true}\r\n                        // startIcon={<Search/>}\r\n                        className={classes.controlPanelItem}\r\n                        style={{borderBottom: '1px solid black'}}\r\n                        startIcon={dataTarget ?\r\n                            <Tooltip title='Show Product Information' placement='top'>\r\n                                <Info \r\n                                    style={{fontSize: '22px', margin: '0 0 -5px 4px'}}\r\n                                    onClick={(e) => {\r\n                                        this.handleSetVariableDetailsID(dataTarget.ID);\r\n                                        e.stopPropagation();\r\n                                    }}\r\n                                />\r\n                            </Tooltip>  : \r\n                            <Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>\r\n                        }\r\n                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                        classes={{\r\n                            label: classes.controlPanelItemLabel,\r\n                            startIcon: classes.controlPanelItemStartIcon\r\n                        }}\r\n                    >\r\n                        { dataTarget ? (dataTarget.Name || dataTarget.Long_Name) : 'Select a Variable to Begin'}\r\n                    </Button> */}\r\n\r\n                    {\r\n                        dataTarget ? \r\n                            <Grid container style={{borderBottom: '1px solid black'}}>\r\n                                <Grid item xs={10}>\r\n                                    <Button\r\n                                        fullWidth={true}\r\n                                        className={classes.controlPanelItem}                                        \r\n                                        startIcon={<Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>}\r\n                                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                                        classes={{\r\n                                            label: classes.controlPanelItemLabel,\r\n                                            startIcon: classes.controlPanelItemStartIcon\r\n                                        }}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                        <span style={{color: this.state.showDrawHelp ? 'rgba(0, 0, 0, 0.38)' : 'white'}}>{dataTarget.Long_Name}</span>\r\n                                    </Button>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={2} style={{borderLeft: '1px solid black'}}>\r\n                                    <Tooltip title='Show variable details' placement='top'>\r\n                                        <span>\r\n                                            <IconButton \r\n                                                onClick={(e) => {\r\n                                                    this.handleSetVariableDetailsID(dataTarget.ID);\r\n                                                    e.stopPropagation();\r\n                                                }}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            >\r\n                                                <Info style={{fontSize: '26px', marginTop: '3px'}}/>\r\n                                            </IconButton>                                   \r\n                                        </span>\r\n                                    </Tooltip>\r\n                                </Grid>\r\n                            </Grid> \r\n                    \r\n                    :\r\n\r\n                    <Button\r\n                        fullWidth={true}\r\n                        className={classes.controlPanelItem}\r\n                        style={{borderBottom: '1px solid black'}}\r\n                        startIcon={<Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>}\r\n                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                        classes={{\r\n                            label: classes.controlPanelItemLabel,\r\n                            startIcon: classes.controlPanelItemStartIcon\r\n                        }}\r\n                        disabled={this.state.showDrawHelp}\r\n                    >\r\n                        Select a Variable to Begin\r\n                    </Button>\r\n                    }                    \r\n\r\n                    {/* <Collapse in={Boolean(dataTarget && details)} timeout={900}> */}\r\n                    <>\r\n\r\n                    {/* {\r\n                        dataTarget && details ? */}\r\n\r\n                            <Grid container>\r\n                                {\r\n                                    details && details.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n                                    <>\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt1'\r\n                                                className={classes.textField}\r\n                                                id=\"dt1\"\r\n                                                label=\"Start Month\"\r\n                                                type=\"number\"\r\n                                                value={dt1}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: {\r\n                                                        min: 1,\r\n                                                        max: 12\r\n                                                    },\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt2'\r\n                                                className={classes.textField}\r\n                                                id=\"dt2\"\r\n                                                label=\"End Month\"\r\n                                                type=\"number\"\r\n                                                min={1}\r\n                                                max={12}\r\n                                                step={1}\r\n                                                // InputLabelProps={{\r\n                                                //     shrink: true,\r\n                                                // }}\r\n                                                value={dt2}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: {\r\n                                                        min: 1,\r\n                                                        max: 12,\r\n                                                    },\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n                                    </>\r\n\r\n                                    :\r\n\r\n                                    <>\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt1'\r\n                                                className={classes.textField}\r\n                                                id=\"dt1\"\r\n                                                label=\"Start Date(m/d/y)\"\r\n                                                step={1}\r\n                                                type=\"date\"\r\n                                                value={dt1}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: details ? {\r\n                                                        min: details.Time_Min.slice(0,10),\r\n                                                        max: details.Time_Max.slice(0,10)\r\n                                                    } : {}\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>  \r\n\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt2'\r\n                                                className={classes.textField}\r\n                                                id=\"dt2\"\r\n                                                label=\"End Date(m/d/y)\"\r\n                                                type=\"date\"\r\n                                                value={dt2}\r\n                                                error={Boolean(endDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={endDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: details ? {\r\n                                                        min: details.Time_Min.slice(0,10),\r\n                                                        max: details.Time_Max.slice(0,10)\r\n                                                    } : {}\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n                                    </>\r\n\r\n                                }\r\n                                \r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lat1-input\"\r\n                                        label={\"Start Lat(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lat1}\r\n                                        onChange={handleLatLonChange}\r\n                                        error={Boolean(startLatMessage)}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startLatMessage}\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lat_Min,\r\n                                                max: details.Lat_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        name='lat1'\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lat2-input\"\r\n                                        error={Boolean(endLatMessage)}\r\n                                        label={\"End Lat(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lat2}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endLatMessage}\r\n                                        name='lat2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lat_Min,\r\n                                                max: details.Lat_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lon1-input\"\r\n                                        error={Boolean(startLonMessage)}\r\n                                        label={\"Start Lon(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lon1}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startLonMessage}\r\n                                        name='lon1'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lon_Min,\r\n                                                max: details.Lon_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lon2-input\"\r\n                                        error={Boolean(endLonMessage)}\r\n                                        label={\"End Lon(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lon2}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endLonMessage}\r\n                                        name='lon2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lon_Min,\r\n                                                max: details.Lon_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n\r\n                                    {showControlPanel ? \r\n                                        <Paper className={classes.popoutButtonPaper} style={{left: drawerWidth + 1, top: '146px'}}>\r\n                                            <Tooltip title='Draw Region on Globe'>\r\n                                                <span>\r\n                                                    <IconButton \r\n                                                        className={classes.popoutButtonBase} \r\n                                                        onClick={this.handleDrawClick}\r\n                                                        disabled={!details || plotsActiveTab !== 0}\r\n                                                    >\r\n                                                        <Edit className={classes.popoutButtonIcon}/>                                            \r\n                                                    </IconButton>\r\n                                                </span>\r\n                                            </Tooltip>\r\n                                        </Paper>                                   \r\n                                    : ''}\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"depth1-input\"\r\n                                        error={Boolean(startDepthMessage)}\r\n                                        label=\"Start Depth(m)\"\r\n                                        className={classes.textField}\r\n                                        // value={isNaN(Math.floor(depth1 * 1000) / 1000) ? depth1 : Math.ceil(depth1 * 1000) / 1000}\r\n                                        value={depth1}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startDepthMessage}\r\n                                        name='depth1'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Depth_Max ? details.Depth_Min : 0,\r\n                                                max: details.Depth_Max ? details.Depth_Max : 0,\r\n                                                step: .1\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || this.state.surfaceOnly || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"depth2-input\"\r\n                                        error={Boolean(endDepthMessage)}\r\n                                        label=\"End Depth(m)\"\r\n                                        className={classes.textField}\r\n                                        // value={isNaN(Math.ceil(depth2 * 1000) / 1000) ? depth2 : Math.ceil(depth2 * 1000) / 1000}\r\n                                        value={depth2}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endDepthMessage}\r\n                                        name='depth2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Depth_Max ? details.Depth_Min : 0,\r\n                                                max: details.Depth_Max ? details.Depth_Max : 0,\r\n                                                step: .1\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || this.state.surfaceOnly || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <ChartControl\r\n                                    overrideDisabledStyle={overrideDisabledStyle}\r\n                                    heatmapMessage={heatmapMessage}\r\n                                    contourMessage={contourMessage}\r\n                                    sectionMapMessage={sectionMapMessage}\r\n                                    histogramMessage={histogramMessage}\r\n                                    timeSeriesMessage={timeSeriesMessage}\r\n                                    depthProfileMessage={depthProfileMessage}\r\n                                    sparseMapMessage={sparseMapMessage}\r\n                                    visualizeButtonTooltip={visualizeButtonTooltip}\r\n                                    disableVisualizeMessage={disableVisualizeMessage}\r\n                                    selectedVizType={selectedVizType}\r\n                                    handleChangeInputValue={this.handleChangeInputValue}\r\n                                    onVisualize={this.handleVisualize}\r\n                                    showChartControl={this.state.showChartControl}\r\n                                    variableDetails={this.props.vizPageDataTargetDetails}\r\n                                    handleVisualize={this.handleVisualize}\r\n                                    disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                />  \r\n\r\n                                {\r\n                                    charts.length && showControlPanel ?\r\n                                    \r\n                                    <Paper className={classes.popoutButtonPaper} style={{left: '281px', top: '343px'}}>\r\n                                        {/* <Tooltip title={showCharts ? 'Return to Globe' : 'Show Charts'}> */}\r\n                                        <Tooltip title={plotsActiveTab !== 0 ? 'Return to Globe' : 'Show Charts'}>\r\n                                            <IconButton disabled={this.state.showDrawHelp} className={classes.popoutButtonBase} onClick={this.handleShowChartsClick}>\r\n                                                {\r\n                                                    plotsActiveTab !== 0 ?\r\n                                                    <Language className={classes.popoutButtonIcon} style={{color:colors.primary}}/> \r\n                                                    :                                                    \r\n                                                    <Badge badgeContent={charts.length} color='primary'>\r\n                                                        <ShowChart className={classes.popoutButtonIcon} style={{color:colors.primary}}/>\r\n                                                    </Badge>\r\n                                                }                                                \r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </Paper>\r\n\r\n                                    : ''\r\n                                }                                    \r\n                            </Grid>\r\n                                {/* : ''\r\n                            } */}\r\n                            </>\r\n                            {/* </Collapse> */}\r\n\r\n                </Drawer>\r\n                    <Paper className={classes.dataSearchMenuPaper} style={dataSearchMenuOpen ? {} : {display: 'none'}}>\r\n                        <DataSearch\r\n                            handleSelectDataTarget={this.handleSelectDataTarget}\r\n                            handleSetVariableDetailsID={this.handleSetVariableDetailsID}\r\n                            handleCloseDataSearch={this.handleCloseDataSearch}\r\n                            searchInputRef={this.searchInputRef}\r\n                        />\r\n                    </Paper>\r\n            </React.Fragment>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(NewVizControlPanel));","export default [\r\n    null,\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n]","import months from '../Enums/months';\r\n\r\nexport default (dateString, hasHour, isMonthly) => {\r\n    return isMonthly ? months[parseInt(dateString)] : hasHour ? dateString.slice(0,10) + ' ' + dateString.slice(11,16): dateString.slice(0,10);\r\n}","import colors from '../Enums/colors';\r\n\r\nconst spanStyles = 'style=\"width:50%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\"'\r\n\r\nexport default {\r\n    layout: {\r\n        font: {color: '#ffffff'},\r\n        paper_bgcolor: colors.backgroundGray,\r\n        autosize: true,\r\n        margin: {\r\n            t: 116,\r\n            b: 104\r\n        },\r\n    },\r\n\r\n    config: {\r\n        displaylogo: false\r\n    },    \r\n\r\n    annotations: (distributor, dataSource) => {\r\n        // let yshift = ((document.documentElement.clientWidth * (height / 100)) / -2) + 20;\r\n        let _dataSource = dataSource.length > 70 ? \r\n                'Data Source: ' + dataSource.slice(0, 67) + '...' : \r\n                'Data Source: ' + dataSource;\r\n\r\n        let _distributor = distributor ?\r\n            distributor.length > 70 ?\r\n                '<br>Distributor: ' + distributor.slice(0, 67) + '...' :\r\n                '<br>Distributor: ' + distributor :\r\n            '';\r\n\r\n        let cmapCredit = '<br>Visualization provided by Simons CMAP';        \r\n        \r\n        return (\r\n            [\r\n                {\r\n                    // text: `Data Source: ${distributor.length < 35 ? \r\n                    //     distributor : \r\n                    //     distributor.slice(0,32) + '...'} -- Provided by Simons CMAP`,\r\n                    text: _dataSource + _distributor + cmapCredit,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                    xref: 'paper',\r\n                    yref: 'paper',\r\n                    // yshift: height ? 0 - height + 160 : -290,\r\n                    // yshift,\r\n                    yanchor: 'top',\r\n                    x: .5,\r\n                    // y: -.1,\r\n                    y: 0,\r\n                    yshift: -56,\r\n                    showarrow: false,\r\n                    xanchor: 'center',\r\n                }\r\n            ]\r\n        )   \r\n    }\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles, Tooltip, IconButton, Menu, MenuItem, Popover, Grid, FormControl, InputLabel, OutlinedInput, FormHelperText, Button, ButtonGroup } from '@material-ui/core';\r\nimport { DateRange, CloudDownload, Palette, SwapVert, Gamepad, LineWeight, ShowChart, Tune, Warning } from '@material-ui/icons';\r\n\r\nimport { sparseDataMaxSizeNotificationUpdate } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\nimport SPARSE_DATA_QUERY_MAX_SIZE from '../../Enums/sparseDataQueryMaxSize';\r\nimport lastRowTimeSpaceDataFromChart from '../../Utility/Visualization/lastRowTimeSpaceDataFromChart';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\n\r\nconst mapDispatchToProps = {\r\n    sparseDataMaxSizeNotificationUpdate\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    popover: {\r\n        width: '470px',\r\n        height: '120px',\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2.5),\r\n        paddingRight: theme.spacing(2.5),\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    iconButton: {\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n    },\r\n\r\n    colorForm: {\r\n        width: '100%'\r\n    },\r\n\r\n    lastIcon: {\r\n        borderTopRightRadius: '10%',\r\n        borderBottomRightRadius: '10%'\r\n    },\r\n\r\n    buttonGroup: {\r\n        display: 'block',\r\n        margin: '0px auto 8px auto',\r\n        maxWidth: '700px',\r\n        textAlign: 'center',\r\n        pointerEvents: 'auto'\r\n    },\r\n\r\n    depressed: {\r\n        boxShadow: 'inset 1px 1px 5px #262626'\r\n    },\r\n\r\n    colorscaleMenu: {\r\n        maxHeight: '400px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    setPopoverZ: {\r\n        zIndex: `${z.CONTROL_PRIMARY} !important`\r\n    },\r\n\r\n    grayBackground: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    sparseDataMaxSizeWarningIcon: {\r\n        color: colors.errorYellow,\r\n        position: 'absolute',\r\n        top: '60px',\r\n        left: 'calc(50% - 12px)',\r\n        cursor: 'pointer',\r\n        zIndex: z.CONTROL_PRIMARY - 1,\r\n        pointerEvents: 'auto'\r\n    }\r\n})\r\n\r\nconst colorscaleOptions = [\r\n    'Default',\r\n    'Greys', \r\n    'YlGnBu', \r\n    'Greens', \r\n    'YlOrRd',\r\n    'Bluered',\r\n    'RdBu',\r\n    'Reds',\r\n    'Blues',\r\n    'Picnic',\r\n    'Rainbow',\r\n    'Portland',\r\n    'Jet',\r\n    'Hot',\r\n    'Blackbody',\r\n    'Earth',\r\n    'Electric',\r\n    'Viridis',\r\n    'Cividis'];\r\n\r\nfunction usePreviousSize(value) {\r\n    let size = value ? value.size : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = size;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousColor(value) {\r\n    let color = value ? value.color : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = color;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousOpacity(value) {\r\n    let opacity = value ? value.opacity : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = opacity;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nconst ChartControlPanel = (props) => {\r\n\r\n    const { \r\n        classes, \r\n        onToggleSplitByDate,\r\n        splitByDate,\r\n        onToggleSplitBySpace,\r\n        splitBySpace,\r\n        orientation, \r\n        downloadCsv, \r\n        handleZValueConfirm,\r\n        zValues,\r\n        markerOptions,\r\n        handleMarkerOptionsConfirm,\r\n        showErrorBars,\r\n        handleSetShowErrorBars,\r\n        showLines,\r\n        handleSetShowLines,\r\n        chart\r\n    } = props;\r\n\r\n    const [paletteAnchorElement, setPaletteAnchorElement] = useState(null);\r\n\r\n    let handleOpenPalette = (event) => {\r\n        setPaletteAnchorElement(event.currentTarget);\r\n    }\r\n\r\n    // Local version, not from props\r\n    let handlePaletteChoice = (option) => {\r\n        setPaletteAnchorElement(null);\r\n        props.handlePaletteChoice(option);\r\n    }\r\n\r\n    const [zScalePopoverAnchorElement, setZScalePopoverAnchorElement] = React.useState(null);\r\n    const [localZMin, setLocalZMin] = React.useState(zValues && zValues[0]);\r\n    const [localZMax, setLocalZMax] = React.useState(zValues && zValues[1]);\r\n\r\n    const zScalePopoverOpen = Boolean(zScalePopoverAnchorElement);\r\n    const zScalePopoverID = zScalePopoverOpen ? 'zscale-popover' : undefined;\r\n\r\n    const handleZScalePopoverClose = () => {\r\n        setZScalePopoverAnchorElement(null);\r\n    };\r\n    \r\n    const checkLocalZMin = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMin)) return 'Invalid value';\r\n    }\r\n\r\n    const checkLocalZMax = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMax)) return 'Invalid value';\r\n    }\r\n\r\n    const zScaleValidations = [\r\n        checkLocalZMin(),\r\n        checkLocalZMax()\r\n    ];\r\n\r\n    const [\r\n        zMinMessage,\r\n        zMaxMessage\r\n    ] = zScaleValidations;\r\n\r\n    const handleLocalZConfirm = () => {\r\n        handleZValueConfirm([localZMin, localZMax]);\r\n        handleZScalePopoverClose();\r\n    }\r\n\r\n    const showMaxSizeWarningAndInfo = () => {\r\n        props.sparseDataMaxSizeNotificationUpdate(lastRowTimeSpaceDataFromChart(props.chart.data));\r\n    }\r\n\r\n    const [markerOptionsAnchorElement, setMarkerOptionsAnchorElement] = React.useState(null);\r\n    const [localMarkerOpacity, setLocalMarkerOpacity] = React.useState(markerOptions && markerOptions.opacity);\r\n    const [localMarkerColor, setLocalMarkerColor] = React.useState(markerOptions && markerOptions.color);\r\n    const [localMarkerSize, setLocalMarkerSize] = React.useState(markerOptions && markerOptions.size);\r\n\r\n    var previousOpacity = usePreviousOpacity(markerOptions);\r\n    var previousColor = usePreviousColor(markerOptions);\r\n    var previousSize = usePreviousSize(markerOptions);\r\n\r\n    useEffect(() => {\r\n        if(markerOptions){\r\n            if(markerOptions.opacity !== previousOpacity){\r\n                setLocalMarkerOpacity(markerOptions.opacity);\r\n            }\r\n    \r\n            if(markerOptions.color !== previousColor){\r\n                setLocalMarkerColor(markerOptions.color);\r\n            }\r\n    \r\n            if(markerOptions.size !== previousSize){\r\n                setLocalMarkerSize(markerOptions.size);\r\n            }\r\n        }\r\n    })\r\n\r\n    const markerPopoverOpen = Boolean(markerOptionsAnchorElement);\r\n    const markerPopoverID = markerPopoverOpen ? 'marker-popover' : undefined;\r\n\r\n    const handleMarkerOptionsClose = () => {\r\n        setMarkerOptionsAnchorElement(null);\r\n    }\r\n\r\n    const checkLocalMarkerOpacity = () => {\r\n        if(localMarkerOpacity < 0.1 || localMarkerOpacity > 1 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerOpacity)){\r\n            return 'Opacity should be 0.1 to 1'\r\n        }\r\n    }\r\n\r\n    const checkLocalMarkerSize = () => {\r\n        if(localMarkerSize < 1 || localMarkerSize > 18 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerSize)){\r\n            return 'Size should be 1 to 18'\r\n        }\r\n    }\r\n\r\n    const markerOptionsValidations = [\r\n        checkLocalMarkerOpacity(),\r\n        checkLocalMarkerSize()\r\n    ]\r\n\r\n    const [\r\n        localMarkerOpacityMessage,\r\n        localMarkerSizeMessage\r\n    ] = markerOptionsValidations;\r\n\r\n    const handleLocalMarkerOptionsConfirm = () => {\r\n        handleMarkerOptionsConfirm({opacity: localMarkerOpacity, color: localMarkerColor, size: localMarkerSize});\r\n        handleMarkerOptionsClose();\r\n    }\r\n\r\n    const showSparseDataSizeWarning = Boolean(chart && \r\n        (chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular || chart.data.metadata.Temporal_Resolution === temporalResolutions.irregular) &&\r\n        chart.data && chart.data.variableValues && chart.data.variableValues.length >= SPARSE_DATA_QUERY_MAX_SIZE);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div style={{position: 'relative', pointerEvents: 'none', margin: 'auto', maxWidth: '80%'}}>\r\n                {showSparseDataSizeWarning ?\r\n                    <Tooltip title='Visualization does not contain all requested data. Click for more info.'>\r\n                        <Warning className={classes.sparseDataMaxSizeWarningIcon} onClick={showMaxSizeWarningAndInfo}/>\r\n                    </Tooltip>  :\r\n                    ''\r\n                }\r\n\r\n                <ButtonGroup className={classes.buttonGroup}>\r\n\r\n                    {Boolean(onToggleSplitByDate) && \r\n                        <Tooltip placement='top' title='Split By Date'>\r\n                            <IconButton color='inherit' className={`${classes.iconButton} ${splitByDate && classes.depressed}`} \r\n                                onClick={onToggleSplitByDate}\r\n                            >\r\n                                <DateRange/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(onToggleSplitBySpace) && \r\n                        <Tooltip placement='top' title={orientation === 'zonal' ? 'Split by Latitude' : 'Split by Longitude'}>\r\n                            <IconButton color='inherit' className={`${classes.iconButton} ${splitBySpace && classes.depressed}`} \r\n                                onClick={onToggleSplitBySpace}\r\n                            >\r\n                                <LineWeight/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    <Tooltip placement='top' title='Download CSV'>\r\n                        <IconButton color='inherit' onClick={downloadCsv} className={classes.iconButton} >\r\n                            <CloudDownload/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    {Boolean(handleZValueConfirm) &&\r\n                        <Tooltip title='Change Colorscale Range' placement='top'>\r\n                            <IconButton color='inherit' onClick={(event) => setZScalePopoverAnchorElement(event.currentTarget)} className={classes.iconButton}>\r\n                                <SwapVert/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(handleSetShowLines) &&\r\n                        <Tooltip title={showLines ? 'Hide Plot Line' : 'Show Plot Line'} placement='top'>\r\n                            <IconButton color='inherit' onClick={() => handleSetShowLines(!showLines)} className={`${classes.iconButton} ${showLines && classes.depressed}`}>\r\n                                <ShowChart/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(handleSetShowErrorBars) &&\r\n                        <Tooltip title={showErrorBars ? 'Hide Error Bars' : 'Show Error Bars'} placement='top'>\r\n                            <IconButton color='inherit' onClick={() => handleSetShowErrorBars(!showErrorBars)} className={`${classes.iconButton} ${showErrorBars && classes.depressed}`}>\r\n                                <Tune/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(props.handlePaletteChoice) &&\r\n                        <Tooltip title='Change Palette' placement='top'>\r\n                            <IconButton disabled={!Boolean(props.handlePaletteChoice)} color='inherit' onClick={handleOpenPalette} className={classes.iconButton}>\r\n                                <Palette/>\r\n                            </IconButton>                \r\n                        </Tooltip>      \r\n                    }\r\n\r\n                    {Boolean(props.handleMarkerOptionsConfirm) &&\r\n                        <Tooltip title='Marker Options' placement='top'>\r\n                            <IconButton color='inherit' onClick={(event) => setMarkerOptionsAnchorElement(event.currentTarget)} className={`${classes.iconButton} ${classes.lastIcon}`} >\r\n                                <Gamepad/>\r\n                            </IconButton>                \r\n                        </Tooltip>\r\n                    }\r\n                    \r\n                </ButtonGroup>   \r\n            </div>\r\n            \r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={paletteAnchorElement}\r\n                keepMounted\r\n                open={Boolean(paletteAnchorElement)}\r\n                onClose={() => setPaletteAnchorElement(null)}\r\n                className={classes.colorscaleMenu}\r\n                MenuListProps= {{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                {colorscaleOptions.map((option, index) => (\r\n                    <MenuItem onClick={() => handlePaletteChoice(option === 'Default' ? 'heatmap' : option)} key={index}>{option}</MenuItem>\r\n                ))}\r\n                \r\n            </Menu>\r\n            \r\n            {/* zscale popover */}\r\n            <Popover\r\n                id={zScalePopoverID}\r\n                open={zScalePopoverOpen}\r\n                anchorEl={zScalePopoverAnchorElement}\r\n                onClose={handleZScalePopoverClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n\r\n                classes={{\r\n                    root: classes.setPopoverZ\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMinMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-min-input' >Min</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-min-input'\r\n                                    value={localZMin}\r\n                                    onChange={(event) => setLocalZMin(event.target.value)}\r\n                                    aria-describedby='local-zmin-error'\r\n                                    labelWidth={36}\r\n                                    name='local-zmin'\r\n                                />\r\n                                <FormHelperText id='local-zmin-error'>{zMinMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-max-input' >Max</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-max-input'\r\n                                    value={localZMax}\r\n                                    onChange={(event) => setLocalZMax(event.target.value)}\r\n                                    aria-describedby=\"local-zmax-error\"\r\n                                    labelWidth={36}\r\n                                    name='local-zmax'\r\n                                />\r\n                                <FormHelperText id=\"local-zmax-error\">{zMaxMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={7}>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleZScalePopoverClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalZConfirm}\r\n                                disabled={Boolean(zMinMessage || zMaxMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n                \r\n            {/* Marker popover */}\r\n            <Popover\r\n                id={markerPopoverID}\r\n                open={markerPopoverOpen}\r\n                anchorEl={markerOptionsAnchorElement}\r\n                onClose={handleMarkerOptionsClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                classes={{\r\n                    root: classes.setPopoverZ\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(localMarkerOpacityMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-opacity' >Opacity</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='local-marker-opacity'\r\n                                    value={localMarkerOpacity}\r\n                                    onChange={(event) => setLocalMarkerOpacity(event.target.value)}\r\n                                    aria-describedby='local-marker-opacity'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-opacity'\r\n                                />\r\n                            <FormHelperText id=\"local-marker-opacity-error\">{localMarkerOpacityMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                // error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-size' >Size</InputLabel>\r\n                                <OutlinedInput\r\n                                    error={Boolean(localMarkerSizeMessage)}\r\n                                    id='local-marker-size'\r\n                                    value={localMarkerSize}\r\n                                    onChange={(event) => setLocalMarkerSize(event.target.value)}\r\n                                    aria-describedby=\"local-marker-size\"\r\n                                    labelWidth={36}\r\n                                    name='local-marker-size'\r\n                                />\r\n                                <FormHelperText id=\"local-marker-size-error\">{localMarkerSizeMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                className={classes.colorForm}\r\n                            >\r\n                                <InputLabel htmlFor='z-min-input'>Color</InputLabel>\r\n                                <OutlinedInput\r\n                                    type='color'\r\n                                    id='marker-color'\r\n                                    value={localMarkerColor}\r\n                                    onChange={(event) => setLocalMarkerColor(event.target.value)}\r\n                                    aria-describedby='local-marker-color'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-color'\r\n                                />\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={1}></Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleMarkerOptionsClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalMarkerOptionsConfirm}\r\n                                disabled={Boolean(localMarkerOpacityMessage || localMarkerSizeMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(ChartControlPanel));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    csvFromVizRequestSend\r\n}\r\n\r\n// User for all histograms sparse or otherwise\r\nconst SparseHistogram = props => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata, parameters } = data;\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !data.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n        \r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                chart={props.chart}\r\n            />\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            // onHover={(e, e2) => {\r\n            //     console.log(e);\r\n            //     console.log(e2)\r\n            // }}\r\n\r\n            // onUnhover={(e, e2) => {\r\n            //     console.log(e);\r\n            //     console.log(e2)\r\n            // }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {\r\n                    x: data.variableValues,\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'histogram',\r\n                    marker: {\r\n                        color: '#00FFFF'\r\n                    }\r\n                }\r\n            ]}\r\n            \r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                    exponentformat: 'power',\r\n                    color: '#ffffff'\r\n                },\r\n                yaxis:{\r\n                    color: '#ffffff',\r\n                    title: 'Frequency'\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)             \r\n            }}\r\n            config={{...chartBase.config}}\r\n        />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseHistogram));","export default (infoObject) => {\r\n\r\n    let lonRange = infoObject.lonMax - infoObject.lonMin;\r\n\r\n    let sectionSize;\r\n    if(lonRange < 2){\r\n        sectionSize = (lonRange / 6).toFixed(2);\r\n    } else {\r\n        sectionSize = Math.floor(lonRange / 6);\r\n    }\r\n\r\n    let tickvals = Array.from(Array(5), (e, i) => Math.ceil(infoObject.lonMin + ((i + 1) * sectionSize)));\r\n    let ticktext = tickvals.map(e => e > 180 ? e - 360 : e);\r\n\r\n    return {\r\n        tickmode: 'array',\r\n        tickvals,\r\n        ticktext\r\n    }\r\n}","export default (infoObject) => {    \r\n    const xRange = infoObject.lonMax - infoObject.lonMin;\r\n    const yRange = infoObject.latMax - infoObject.latMin;\r\n    const sizeRatio = xRange / yRange;\r\n\r\n    let height = 40;\r\n    let width = 40;\r\n\r\n    if(isNaN(sizeRatio)){\r\n        height = height / 1.65;\r\n    } else if (sizeRatio > 1) {\r\n        if(sizeRatio <= 1.5){\r\n            width = width * sizeRatio;\r\n            // height = sizeRatio > 2 ? height / 2 : height / sizeRatio;\r\n        } else {\r\n            width = width * 1.5;\r\n            height = sizeRatio > 3 ? height / 1.65 : height * (1.8 / sizeRatio);\r\n        }\r\n    } else {\r\n        width = sizeRatio < .5 ? width * .5 : width * sizeRatio;\r\n    }\r\n\r\n    return [height, width];\r\n}","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport getChartDimensions from '../../Utility/getChartDimensions';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\nimport subTypes from '../../Enums/visualizationSubTypes';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst handleContourMap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n    \r\n    // Handle axis labels when crossing 180th meridian\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`; \r\n\r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n                margin: '0 auto'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext,\r\n                    \r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'contour',\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: infoObject.zMin > 1 && infoObject.zMin < 1000 ? '.2f' : '.2e'\r\n                    },\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    }\r\n                }\r\n            ]}\r\n\r\n            config={{...chartBase.config}}\r\n            \r\n            key={index}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                // autosize: true,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {title: 'Longitude', color: '#ffffff', ...xTicks},\r\n                yaxis: {title: 'Latitude', color: '#ffffff'},\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst handleHeatmap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n        \r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null || isNaN(value)) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    zsmooth: subset.length < 20000 ? 'fast' : 'false',\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'heatmap',\r\n                    colorscale: palette,\r\n                    autocolorscale: false,\r\n                    \r\n                    hoverinfo: 'text',\r\n                    text: hovertext,\r\n\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n                    \r\n                },\r\n\r\n            ]}                \r\n            key={index}\r\n\r\n            config={{...chartBase.config}}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,               \r\n\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: 'Longitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Latitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SpaceTimeChart = (props) => {\r\n\r\n    const { snackbarOpen, csvFromVizRequestSend, chart } = props;\r\n    const { data, subType } = chart;\r\n    const { dates, depths, extent, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitByDepth, setSplitByDepth] = useState(true);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    const subSets = data.generatePlotData(subType, splitByDate, splitByDepth);\r\n    var plots;\r\n    switch(subType){\r\n        case vizSubTypes.contourMap:\r\n            plots = handleContourMap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.heatmap:\r\n            plots = handleHeatmap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.histogram:\r\n            return <SparseHistogram chart={{data}}/>;\r\n\r\n        default:\r\n            plots = '';\r\n            break;        \r\n\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = depths ? depths.size : 1;\r\n\r\n        if(subType === vizSubTypes.heatmap){\r\n            let availableWGLContexts = 15 - countWebGLContexts(props.charts);\r\n\r\n            if(!splitByDate && chartCount * dates.size > availableWGLContexts){\r\n                snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(subType === vizSubTypes.contourMap){\r\n            if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n            }\r\n        }\r\n\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDate(!splitByDate);\r\n        }, 100)\r\n    }\r\n \r\n    const onToggleSplitByDepth = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDepth(!splitByDepth);\r\n        }, 100)\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                handlePaletteChoice={subType !== subTypes.histogram && handlePaletteChoice}\r\n                onToggleSplitByDepth={depths.size===1 ? null : onToggleSplitByDepth}\r\n                onToggleSplitByDate={dates.size===1 ? null : onToggleSplitByDate}\r\n                splitByDepth={splitByDepth}\r\n                splitByDate={splitByDate}\r\n                handleZValueConfirm={subType !== subTypes.histogram && handleZValueConfirm}\r\n                zValues={subType !== subTypes.histogram && zValues}\r\n                extent={subType !== subTypes.histogram && extent}\r\n                downloadCsv={downloadCsv}\r\n                chart={chart}\r\n            />\r\n            {plots}     \r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SpaceTimeChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport months from '../../Enums/months';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst TimeSeriesChart = (props) => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, dates, parameters, metadata } = data;\r\n\r\n    const [ markerOptions, setMarkerOptions ] = React.useState({opacity: .2, color:'#ff1493', size: 6});\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Time: ${dates[i].slice(0,10)}<br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(dates[0], data.hasHour, data.isMonthly) :\r\n        handleChartDateString(dates[0], data.hasHour, data.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], data.hasHour, data.isMonthly);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = parameters.depth2 === 0 ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    const x = data.isMonthly ? dates.map(date => months[parseInt(date)]) : dates;\r\n\r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n                chart={props.chart}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                  {\r\n                    // mode: 'lines+markers',\r\n                    mode: showLines ? 'lines+markers' : 'markers',\r\n                    x: x,\r\n                    y: variableValues,\r\n                    error_y: {\r\n                        type: 'data',\r\n                        array: stds,\r\n                        opacity: 0.3,\r\n                        color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                        visible: true\r\n                    },\r\n\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    // type: 'scatter',\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    line: {color: markerOptions.color},\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                  },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${metadata.Dataset_Name}` +\r\n                            `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            depth + \r\n                            `<br>Lat: ${lat}, ` +\r\n                            `Lon: ${lon}`,\r\n                        font: {\r\n                            size: 12\r\n                        }\r\n                    },\r\n                  xaxis: {\r\n                      title: data.isMonthy? 'Month' : 'Time',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  yaxis: {\r\n                      title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(TimeSeriesChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst DepthProfileChart = (props) => {\r\n\r\n    const { setLoadingMessage, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, depths, parameters, metadata } = data;\r\n\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    var infoObject = data;\r\n\r\n    const [markerOptions, setMarkerOptions] = React.useState({opacity: .2, color:'#ff1493', size: 6})\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Depth: ${format('.2f')(depths[i])} [m] <br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }    \r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    const date1 = infoObject.isMonthly ? new Date(parameters.dt1).getMonth() + 1 : parameters.dt1;\r\n    const date2 = infoObject.isMonthly ? new Date(parameters.dt2).getMonth() + 1 : parameters.dt2;\r\n\r\n    const date = date1 === date2 ? handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) :\r\n            handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(date2, infoObject.hasHour, infoObject.isMonthly);\r\n            return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n                chart={props.chart}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                    {   \r\n                        // mode: 'lines+markers',\r\n                        mode: showLines ? 'lines+markers' : 'markers',\r\n                        y: depths,\r\n                        x: variableValues,\r\n                        error_x: {\r\n                            type: 'data',\r\n                            array: stds,\r\n                            opacity: 0.3,\r\n                            color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                            visible: true\r\n                        },\r\n                        name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                        // type: 'scatter',\r\n                        type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n\r\n                        marker: {\r\n                            line: {color: markerOptions.color},\r\n                            opacity: markerOptions.opacity,\r\n                            size: markerOptions.size,\r\n                            color: markerOptions.color\r\n                        },\r\n\r\n                        hoverinfo: 'text',\r\n                        hovertext\r\n                    },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${metadata.Dataset_Name}` +\r\n                            `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                            `Lat: ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0, ` +\r\n                            `Lon: ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`,\r\n                        font: {\r\n                            size: 12\r\n                        }\r\n                    },\r\n                        \r\n                  yaxis: {\r\n                      title: 'Depth[m]',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power',\r\n                      autorange:'reversed'\r\n                    },\r\n                  xaxis: {\r\n                      title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(DepthProfileChart));","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport visualizationSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nconst handleSectionMap = (subsets, infoObject, splitByDate, splitBySpace, orientation, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const dates = Array.from(infoObject.dates);\r\n    const depths = Array.from(infoObject.depths);\r\n    const lats = Array.from(infoObject.lats);\r\n    const lons = Array.from(infoObject.lons);\r\n\r\n    const distinctMeridiansOrParallelsForSplitting = \r\n        orientation === 'zonal' ?\r\n        lats : \r\n        lons;\r\n\r\n    const xAxis = orientation === 'zonal' ?\r\n        'Longitude' :\r\n        'Latitude';\r\n\r\n    let xTicks = parameters.lon1 > parameters.lon2 && orientation === 'zonal' ? handleXTicks(infoObject) : {};\r\n\r\n\r\n    return subsets.map((subset, index) => {\r\n        let z = subset;\r\n        let x = [];\r\n        let y = [];\r\n\r\n        if(orientation === 'zonal'){\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lons[Math.floor(i / depths.length)])\r\n            }\r\n        } else {\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lats[Math.floor(i / depths.length)])\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < subset.length; i++){\r\n            y.push(depths[i % depths.length]);\r\n        }\r\n\r\n        const latTitle = orientation === 'meridional' ? `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = orientation === 'zonal' ? `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n\r\n        const date = dates.length < 2 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            splitByDate && splitBySpace ? handleChartDateString(dates[Math.floor(index / distinctMeridiansOrParallelsForSplitting.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            splitByDate ? handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly) :\r\n            'Averaged Values ' + handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        let hovertext = z.map((value, i) => {\r\n            \r\n            if(orientation === 'zonal'){\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            } else {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lat: ${format('.2f')(x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lat: ${format('.2f')(x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            }\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    zsmooth: subset.length < 20000 ? 'best' : 'fast',\r\n                    x,\r\n                    y,\r\n                    z,\r\n                    name: parameters.fields,\r\n                    type: infoObject.subType === visualizationSubTypes.contourSectionMap ? 'contour' : 'heatmap',\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: '.2e'\r\n                    },\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                }\r\n            ]}                \r\n            key={index}\r\n\r\n            layout= {{\r\n                font: {color: '#ffffff'},\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${xAxis}[\\xB0]`,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Depth[m]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: 'reversed'\r\n                },\r\n                paper_bgcolor: colors.backgroundGray,\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n\r\n            }}   \r\n        />\r\n        )\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SectionMapChart = (props) => {\r\n\r\n    const { classes, snackbarOpen, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { dates, extent, lats, lons, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitBySpace, setSplitBySpace] = useState(false);\r\n    const [orientation, setOrientation] = useState(data.orientation);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    var spaces = orientation === 'zonal' ? lats : lons;\r\n\r\n    const subsets = data.generatePlotData(orientation, splitByDate, splitBySpace);\r\n    var plots = handleSectionMap(subsets, data, splitByDate, splitBySpace, orientation, palette, zMin, zMax);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const onToggleSplitBySpace = () => {\r\n        let chartCount = splitByDate ? dates.size : 1;\r\n        if(!splitBySpace && chartCount * spaces.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitBySpace(!splitBySpace);\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = splitBySpace ? spaces.size : 1;\r\n        if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitByDate(!splitByDate);\r\n            }, 100)\r\n        }     \r\n    }\r\n\r\n    const switchOrientation = () => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setOrientation(orientation === 'zonal' ? 'meridional' : 'zonal');\r\n        }, 100)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.buttonBlock}>\r\n            <ChartControlPanel\r\n                orientation={orientation}\r\n                switchOrientation={switchOrientation}\r\n                onToggleSplitBySpace={spaces.size === 1 ? null : onToggleSplitBySpace}\r\n                splitBySpace={splitBySpace}\r\n                onToggleSplitByDate={dates.size === 1 ? null : onToggleSplitByDate}\r\n                splitByDate={splitByDate}\r\n                handlePaletteChoice={handlePaletteChoice}\r\n                handleZValueConfirm={handleZValueConfirm}\r\n                zValues={zValues}\r\n                extent={extent}\r\n                downloadCsv={downloadCsv}\r\n                chart={props.chart}\r\n            />\r\n            </div>\r\n            {plots}      \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SectionMapChart));","import React from 'react';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst SparseScatter = (props) => {\r\n    const {\r\n        xValues,\r\n        yValues,\r\n        markerOptions,\r\n        infoObject,\r\n        xTitle,\r\n        yTitle,\r\n        type\r\n    } = props;\r\n\r\n    const { parameters, metadata, hasDepth, variableValues, times, lats, lons, depths } = infoObject;\r\n\r\n    // const title = `${parameters.fields} [${metadata.Unit}]`;\r\n    \r\n    var hovertext;\r\n\r\n    switch(type){\r\n        case 'time':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'latitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lat: ${lats[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'longitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lon: ${lons[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'depth':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Depth: ${depths[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        default:\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n        }\r\n        \r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n    \r\n            data={[\r\n                {\r\n                    x: xValues,\r\n                    y: yValues,\r\n                    mode: 'markers',\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    // type: 'scatter',\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                },\r\n            ]}\r\n            config={{...chartBase.config}}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                // width: 800,\r\n                // height: 570,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: xTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                yaxis: {\r\n                    title: yTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: type === 'depth' ? 'reversed' : true\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n            }}            \r\n        />\r\n    )\r\n}\r\n\r\nexport default SparseScatter;","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport SparseScatter from './SparseScatter';\r\n\r\nconst handleSparseMap = (infoObject, palette, zValues) => {\r\n\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !infoObject.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n            \r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zValues[0],\r\n                    zmax: zValues[1],\r\n                    lon: infoObject.lons,\r\n                    lat: infoObject.lats,\r\n                    z: infoObject.variableValues,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    radius: 6,                    \r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'densitymapbox',\r\n                    \r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    },\r\n                }\r\n            ]}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                mapbox: {\r\n                    style: \"white-bg\",\r\n                    layers: [\r\n                        {\r\n                            sourcetype: \"raster\",\r\n                            source: [\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"],\r\n                            below: \"traces\"\r\n                        }\r\n                    ],\r\n                    center: infoObject.center,\r\n                    zoom: infoObject.zoom\r\n                },\r\n\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}\r\n            \r\n            config={{\r\n                ...chartBase.config,\r\n                mapboxAccessToken:\r\n                  \"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w\",\r\n                \r\n              }}\r\n        />)\r\n}\r\n\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n\r\n    tabs: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    tab: {\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        fontSize: '15px',\r\n        textTransform: 'none',\r\n        color: theme.palette.primary.main\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nfunction tabProps(index) {\r\n    return {\r\n      id: `sparse-tab-${index}`,\r\n      'aria-controls': `sparse-tab-${index}`,\r\n    };\r\n  }\r\n\r\nconst SparseTabPanel = (props) => {\r\n    const { children, selectedTab, index, controlPanelProps } = props;\r\n\r\n    return (\r\n        <div hidden={selectedTab !== index}>\r\n            <ChartControlPanel\r\n                {...controlPanelProps}\r\n                chart={props.chart}\r\n            />\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst SparseMap = React.memo((props) => {\r\n\r\n    const { classes, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata } = data;\r\n\r\n    const [palette, setPalette] = useState('Heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [markerOptions, setMarkerOptions] = useState({opacity: .7, color:'#ff1493', size: 6});\r\n    const [tab, setTab] = useState(0);\r\n\r\n    const plot = handleSparseMap(data, palette, zValues)\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleTabChange = (event, newValue) => {\r\n        setTab(newValue)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const forceResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);        \r\n    }\r\n\r\n    const controlPanelProps = {\r\n        map: {\r\n            palette,\r\n            handlePaletteChoice,\r\n            zValues,\r\n            handleZValueConfirm,\r\n            downloadCsv\r\n        },\r\n\r\n        scatter: {\r\n            downloadCsv,\r\n            markerOptions,\r\n            setMarkerOptions,\r\n            handleMarkerOptionsConfirm\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Tabs \r\n                value={tab} \r\n                onChange={handleTabChange} \r\n                aria-label=\"Sparse tabs\" \r\n                centered\r\n                indicatorColor='primary'\r\n                className={classes.tabs}\r\n            >\r\n                <Tab label=\"Map\" {...tabProps(0)} className={classes.tab} onClick={forceResize}/>\r\n                <Tab label=\"By Time\" {...tabProps(1)} className={classes.tab}/>\r\n                <Tab label=\"By Lat\" {...tabProps(2)} className={classes.tab}/>\r\n                <Tab label=\"By Lon\" {...tabProps(3)} className={classes.tab}/>\r\n                {data.hasDepth && <Tab label=\"By Depth\" {...tabProps(4)} className={classes.tab}/>}\r\n            </Tabs>\r\n            <SparseTabPanel selectedTab={tab} index={0} controlPanelProps={controlPanelProps.map} chart={props.chart}>\r\n                {tab === 0 && plot}\r\n            </SparseTabPanel>\r\n            \r\n            <SparseTabPanel selectedTab={tab} index={1} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 1 &&\r\n                    <SparseScatter\r\n                        xValues={data.times}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Time'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]`}\r\n                        type='time'\r\n                    />\r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={2} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 2 &&\r\n                    <SparseScatter\r\n                        xValues={data.lats}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Latitude'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                        type='latitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={3} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 3 && \r\n                    <SparseScatter\r\n                        xValues={data.lons}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Longitude'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                        type='longitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            {data.hasDepth &&\r\n                <SparseTabPanel selectedTab={tab} index={4} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                    {tab === 4 &&\r\n                        <SparseScatter\r\n                            xValues={data.variableValues}\r\n                            yValues={data.depths}\r\n                            markerOptions={markerOptions}\r\n                            infoObject={data}\r\n                            xTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                            yTitle='Depth[m]'\r\n                            type='depth'\r\n                        />                    \r\n                    }\r\n                </SparseTabPanel>            \r\n            }\r\n                \r\n        </div>\r\n    )\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseMap));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { IconButton, Paper } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport SpaceTimeChart from './SpaceTimeChart';\r\nimport TimeSeriesChart from './TimeSeriesChart';\r\nimport DepthProfileChart from './DepthProfileChart';\r\nimport SectionMapChart from './SectionMapChart';\r\nimport SparseMap from './SparseMap';\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts,\r\n    plotsActiveTab: state.plotsActiveTab\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  deleteChart\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  chartPaper: {\r\n    backgroundColor: colors.backgroundGray,\r\n    marginBottom: '5h',\r\n    paddingTop: theme.spacing(1),\r\n    boxShadow: '2px 2px 2px 2px #242424',    \r\n    width: 'max-content',\r\n    margin: '0 auto 5vh auto',\r\n    '@media (min-width: 1280px)': {\r\n      textAlign: 'left',\r\n      margin: '0 0 5vh 360px'\r\n    }\r\n  }\r\n})\r\n\r\nconst SamplePlot = () => {\r\n  let x = [0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4];\r\n  let y = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,];\r\n  let z = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4];\r\n  \r\n  return (\r\n\r\n      <Plot\r\n      useResizeHandler={true}\r\n      style= {{\r\n          position: 'relative',\r\n          display:'inline-block',\r\n          // marginTop: '30px',\r\n          width: '66vw',\r\n          height: '44vw'\r\n      }}\r\n      \r\n      data={[\r\n          {   \r\n              x,\r\n              y,\r\n              z,\r\n              connectgaps: false,\r\n              zsmooth: 'best',\r\n\r\n              name: 'Test',\r\n              type: 'heatmap',\r\n              contours: {\r\n                  showlabels: true,\r\n                  labelfont: {\r\n                      family: 'Raleway',\r\n                      size: 12,\r\n                      color: 'white',\r\n                  },\r\n                  labelformat: '.2e'\r\n              },\r\n              colorbar: {\r\n                  title: {\r\n                      text: `test`\r\n                  },\r\n                  exponentformat: 'power'\r\n              }\r\n          }\r\n      ]}\r\n\r\n      config={{responsive: true}}\r\n      \r\n      layout= {{\r\n        autosize: true,\r\n          font: {color: '#ffffff'},\r\n          margin: {\r\n            t: 50\r\n          },\r\n          title: {\r\n              text: `A sample chart title`,\r\n              font: {\r\n                size: 16\r\n              }\r\n          },\r\n          paper_bgcolor: colors.backgroundGray,\r\n          xaxis: {title: 'Longitude', color: '#ffffff'},\r\n          yaxis: {title: 'Latitude', color: '#ffffff'},\r\n          annotations: [\r\n              {\r\n                  text: `Brought to you by chef boyardee`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                  yref: 'paper',\r\n                  y: -.24,\r\n                  showarrow: false,\r\n                  xref: 'paper',\r\n                  x: .5\r\n                  }\r\n              ]\r\n              \r\n          }}   \r\n          />\r\n          )\r\n}\r\n\r\nconst closeChartStyles = {\r\n    closeChartIcon: {\r\n      float: 'right',\r\n      marginTop: '-12px',\r\n      marginRight: '-8px'\r\n    }\r\n}\r\n\r\nconst _CloseChartIcon = (props) => {\r\n  const { classes } = props;\r\n  return (\r\n    <React.Fragment>\r\n      <IconButton className={classes.closeChartIcon} color=\"inherit\" onClick={() => props.handleDeleteChart(props.chartIndex)} disableFocusRipple disableRipple>\r\n        <Delete/>\r\n      </IconButton>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst CloseChartIcon = withStyles(closeChartStyles)(_CloseChartIcon);\r\n\r\nclass Charts extends Component {\r\n\r\n  handleDeleteChart = (chartIndex) => {\r\n    this.props.deleteChart(chartIndex);\r\n  }\r\n\r\n    render(){\r\n        const { classes, charts, plotsActiveTab } = this.props;\r\n        \r\n        return (\r\n            <React.Fragment>\r\n              {/* <Paper elevation={12} className={classes.chartPaper}> */}\r\n              {/* <SamplePlot/>  */}\r\n              {/* </Paper> */}\r\n                {charts.map((chart, index) => {\r\n                    switch(chart.data.parameters.spName){\r\n\r\n                        case storedProcedures.spaceTime:\r\n                          if(chart.subType === vizSubTypes.sparse) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseMap chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          } else if(chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseHistogram chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          }\r\n                          else return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SpaceTimeChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.timeSeries:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <TimeSeriesChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.depthProfile:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <DepthProfileChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.sectionMap:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SectionMapChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n                        \r\n                        default:\r\n                          return '';\r\n                  }\r\n                })}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Charts));","const setsFromList = (list, setKeys) => {\r\n    // return an object literal where each value is a set containing the unique values for that key\r\n    let result = {};\r\n\r\n    setKeys.forEach(key => result[key] = new Set());\r\n\r\n    list.forEach(item => {\r\n        setKeys.forEach(key => {\r\n            if(Array.isArray(item[key])){\r\n                item[key].forEach(subItem => result[key].add(subItem));\r\n            }\r\n\r\n            else if(item[key]) result[key].add(item[key]);\r\n        })\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\nexport default setsFromList;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport * as JsSearch from 'js-search';\r\nimport { VariableSizeList } from 'react-window';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Search, ZoomOutMap } from '@material-ui/icons';\r\nimport { Table, TableBody, TableCell, TableRow, Link, Icon, Tooltip, Grid, Typography, TextField, InputAdornment, Paper, Button } from '@material-ui/core';\r\nimport { Close, ExpandMore, ChevronRight } from '@material-ui/icons';\r\n\r\nimport { cruiseListRequestSend, cruiseTrajectoryRequestSend, cruiseTrajectoryClear } from '../../Redux/actions/visualization';\r\n\r\nimport HelpButtonAndDialog from '../UI/HelpButtonAndDialog';\r\nimport MultiCheckboxDropdown from '../UI/MultiCheckboxDropdown';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\nimport setsFromList from '../../Utility/setsFromList';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    cruiseList: state.cruiseList,\r\n    getCruiseListState: state.getCruiseListState,\r\n    windowHeight: state.windowHeight\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseListRequestSend,\r\n    cruiseTrajectoryRequestSend,\r\n    cruiseTrajectoryClear\r\n}\r\n\r\nconst esriFonts = '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif';\r\nconst esriFontColor = 'white';\r\n\r\nconst styles = theme => ({\r\n    outerDiv: {\r\n        padding:'12px',\r\n        maxWidth: '360px',\r\n        backgroundColor: 'transparent',\r\n        color: esriFontColor,\r\n        borderRadius: '4px',\r\n        boxShadow: '2px',\r\n        // position: 'relative',\r\n        backdropFilter: 'blur(2px)',\r\n        transform: 'translateY(35px)',\r\n        marginTop: '24px',\r\n        position: 'fixed',\r\n        // right: '0px',\r\n        left: 0,\r\n        // top: '60px'\r\n        top: 140\r\n    },\r\n\r\n    cruiseSelect: {\r\n        width: '260px',\r\n        borderRadius: '4px',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    cruiseInfo: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        margin: '12px auto 0 auto',\r\n    },\r\n\r\n    cruiseInfoCell: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        borderStyle: 'none',\r\n    },\r\n\r\n    dragIcon: {\r\n        padding: '12px 12px 12px 0',\r\n        color: colors.primary,\r\n        verticalAlign: 'middle'\r\n    },\r\n\r\n    linkWrapper: {\r\n        padding: '12px',\r\n        fontSize: '14px'\r\n    },\r\n\r\n    searchMenuPaper: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        bottom: 60,\r\n        left: 0,\r\n        width: '98vw',\r\n        height: 'auto',\r\n        zIndex: 1500,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n\r\n    closeIcon: {\r\n        float: 'right',\r\n        cursor: 'pointer',\r\n        color: colors.primary,\r\n        textTransform: 'none',\r\n        fontSize: '15px'\r\n    },\r\n\r\n    inputRoot: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    openSearchButtonPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        // border: 'none',\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        // color: esriFontColor,\r\n        // borderRadius: 4,\r\n        // '&:hover': { \r\n        //     border: `1px solid white`,\r\n        // },\r\n        // '&:focus-within': {\r\n        //     borderColor: colors.primary\r\n        // }\r\n    },\r\n\r\n    openSearchButton: {\r\n        // width: 260,\r\n        textTransform: 'none',\r\n        color: colors.primary,\r\n        fontSize: '15px',\r\n        padding: '6px 42px'\r\n    },\r\n\r\n    resetButton: {\r\n        textTransform: 'none',\r\n        width: '160px',\r\n        height: '37px',\r\n        color: theme.palette.primary.main,\r\n        borderColor: theme.palette.primary.main,\r\n        marginTop: '12px'\r\n    },\r\n\r\n    searchResult: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        height: '32px',\r\n        textAlign: 'left',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        paddingLeft: '12px',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n    },\r\n\r\n    yearHeader: {\r\n        backgroundColor: 'rgba(0, 0, 0, .7)',\r\n        height: '36px',\r\n        fontSize: '17px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyCOntent: 'center'\r\n        // paddingLeft: '12px'\r\n    },\r\n\r\n    searchOption: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    memberCount: {\r\n        color: colors.primary,\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    variablesWrapper: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        paddingTop: '6px'\r\n    },\r\n\r\n    variableItem: {\r\n        height: '32px',\r\n        textAlign: 'left',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n    },\r\n\r\n    cruiseName: {\r\n        // paddingLeft: '48px',\r\n        width: '100%',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    heading: {\r\n        textAlign: 'left',\r\n        padding: '8px 6px',\r\n        color: colors.primary,\r\n        fontSize: '16px',\r\n        marginTop: '5px',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    cruiseYearHeader: {\r\n        textAlign: 'left',\r\n        fontSize: '9px',\r\n        color: colors.primary\r\n    }\r\n})\r\n\r\nconst searchFilterGroupCruises = (cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, selectedSeries, search) => {\r\n    cruises = [...cruises];\r\n    if(searchField) cruises = search.search(searchField);\r\n    if(selectedYears && selectedYears.size) cruises = cruises.filter(e => selectedYears.has(e.Year));\r\n    if(selectedChiefScientists && selectedChiefScientists.size) cruises = cruises.filter(e => selectedChiefScientists.has(e.Chief_Name));\r\n    if(selectedRegions && selectedRegions.size) cruises = cruises.filter(e => e.Regions.some(region => selectedRegions.has(region)));\r\n    if(selectedSeries && selectedSeries.size) cruises = cruises.filter(e => selectedSeries.has(e.Series));\r\n\r\n    let cruisesGroupedByYear = cruises.reduce((acc, cur) => {\r\n        if(!acc[cur.Year]) acc[cur.Year] = [];    \r\n        acc[cur.Year].push(cur);    \r\n        return acc;\r\n    }, {});\r\n\r\n    cruisesGroupedByYear = Object.keys(cruisesGroupedByYear).map(key => ({year: key, cruises: cruisesGroupedByYear[key]})).sort((a, b) => a.year < b.year ? 1 : -1);\r\n\r\n    return {cruisesGroupedByYear, cruises};\r\n}\r\n\r\nconst defaultSearchAndFilterState = {\r\n    selectedYears: new Set(), \r\n    selectedChiefScientists: new Set(), \r\n    selectedRegions: new Set(), \r\n    searchField: '',\r\n    openYearGroup: null,\r\n    selectedSeries: new Set()\r\n};\r\n\r\nconst defaultOptionSets = {\r\n    Regions: new Set(),\r\n    Year: new Set(),\r\n    Chief_Name: new Set(),\r\n    Series: new Set()\r\n}\r\n\r\nconst listRef = React.createRef();\r\nclass CruiseSelector extends Component {\r\n    \r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Nickname');\r\n        search.addIndex('Name');\r\n        search.addIndex('Chief_Name');\r\n        search.addIndex('Keywords');\r\n\r\n        try{\r\n            if(props.cruiseList && props.cruiseList.length) {\r\n                search.addDocuments(props.cruiseList);\r\n            }\r\n        } catch(e) {\r\n            console.log(e);\r\n            console.log(props.cruiseList);\r\n        }\r\n        // cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, search\r\n        let { cruisesGroupedByYear, cruises } = this.props.cruiseList && this.props.cruiseList.length ? \r\n            searchFilterGroupCruises(\r\n                props.cruiseList, '', new Set(), new Set(), new Set(), new Set(), search\r\n            ) : \r\n            {cruisesGroupedByYear: [], cruises: []};\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.state = {\r\n            search,\r\n            selectedCruise: null,\r\n            searchMenuOpen: false,\r\n            cruisesGroupedByYear,\r\n            cruises,\r\n            optionSets,\r\n            ...defaultSearchAndFilterState\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.props.handleShowGlobe();\r\n        if(!this.props.cruiseList || !this.props.cruiseList.length) this.props.cruiseListRequestSend();\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.cruiseTrajectoryClear()\r\n    }\r\n\r\n    handleCruiseSelect = (selection) => {\r\n        if(selection){\r\n            this.props.cruiseTrajectoryRequestSend(selection.ID);\r\n        }\r\n\r\n        this.setState({...this.state, selectedCruise: selection, searchMenuOpen: false});\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);         \r\n            let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(this.props.cruiseList, '', new Set(), new Set(), new Set(), new Set(), this.state.search);\r\n            let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n            this.setState({...this.state, cruisesGroupedByYear, cruises, optionSets});\r\n        }\r\n\r\n        if(prevState.cruisesGroupedByYear !== this.state.cruisesGroupedByYear) listRef.current.resetAfterIndex(0);\r\n    }\r\n\r\n    handleChangeSearchValue = (e) => {\r\n        // cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, search\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            e.target.value, \r\n            this.state.selectedYears, \r\n            this.state.selectedChiefScientists, \r\n            this.state.selectedRegions,\r\n            this.state.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let newOptionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n        let oldOptionSets = {...this.state.optionSets};\r\n\r\n        let optionSets = {\r\n            Chief_Name: this.state.selectedChiefScientists.size ? oldOptionSets.Chief_Name : newOptionSets.Chief_Name,\r\n            Year: this.state.selectedYears.size ? oldOptionSets.Year : newOptionSets.Year,\r\n            Regions: this.state.selectedRegions.size ? oldOptionSets.Regions : newOptionSets.Regions,\r\n            Series: this.state.selectedSeries.size ? oldOptionSets.Series : newOptionSets.Series\r\n        };\r\n        \r\n        this.setState({...this.state, searchField: e.target.value, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleCloseSearch = () => {\r\n        this.setState({...this.state, searchMenuOpen: false});\r\n    }\r\n\r\n    handleClearMultiSelect = (statePiece) => {\r\n        let tempNewState = {...this.state, [statePiece]: new Set()};\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            tempNewState.searchField, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleResetSearch = () => {\r\n        let tempNewState = {...this.state, ...defaultSearchAndFilterState};\r\n\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            tempNewState.searchField, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleClickCheckbox = (e, checked) => {\r\n        let [ column, value ] = e.target.name.split('!!');\r\n        let newSet = new Set(this.state[column]);\r\n\r\n        checked ? newSet.add(value) : newSet.delete(value);\r\n\r\n        let tempNewState = {...this.state, [column]: newSet};\r\n\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            e.target.value, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let newOptionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n        let oldOptionSets = {...this.state.optionSets};\r\n\r\n        let optionSets = {\r\n            Chief_Name: tempNewState.selectedChiefScientists.size ? oldOptionSets.Chief_Name : newOptionSets.Chief_Name,\r\n            Year: tempNewState.selectedYears.size ? oldOptionSets.Year : newOptionSets.Year,\r\n            Regions: tempNewState.selectedRegions.size ? oldOptionSets.Regions : newOptionSets.Regions,\r\n            Series: tempNewState.selectedSeries.size ? oldOptionSets.Series : newOptionSets.Series\r\n        };\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleSetopenYearGroup = (index, year) => {\r\n        if(listRef.current) {\r\n\r\n            // Make sure the group being opened is in view\r\n            let listHeight = this.props.windowHeight - 249;\r\n            let currentOffset = listRef.current.state.scrollOffset;\r\n            let targetOffset = index * 38;\r\n\r\n            if(index !== null && (targetOffset < currentOffset - 10 || targetOffset > currentOffset + listHeight - 20)){\r\n                setTimeout(() => listRef.current.scrollToItem(index, 'start'), 10);\r\n            }\r\n\r\n            listRef.current.resetAfterIndex(0);\r\n        }\r\n\r\n        this.setState({...this.state, openYearGroup: this.state.openYearGroup === year ? null : year});\r\n    }\r\n\r\n    render(){\r\n        const { \r\n            searchField, \r\n            selectedCruise, \r\n            searchMenuOpen, \r\n            selectedYears, \r\n            selectedChiefScientists, \r\n            selectedRegions,\r\n            selectedSeries,\r\n            openYearGroup,\r\n            optionSets,\r\n            cruisesGroupedByYear,\r\n            cruises\r\n        } = this.state;\r\n\r\n        const { classes, windowHeight } = this.props;\r\n\r\n        return (\r\n            <>\r\n                <Paper className={classes.searchMenuPaper} style={searchMenuOpen ? {} : {display: 'none'}}>\r\n                    <Grid container>\r\n                        <Grid item xs={12}>\r\n                            <Typography style={{display: 'inline-block'}}>\r\n                                Search and filter using the controls on the left. Select a cruise from the list on the right.\r\n                            </Typography>\r\n\r\n                            <Button\r\n                                startIcon={<Close style={{fontSize: '22px'}}/>}\r\n                                onClick={this.handleCloseSearch}\r\n                                className={classes.closeIcon}\r\n                            >\r\n                                Close\r\n                            </Button>\r\n\r\n                            {/* <Close onClick={this.props.handleCloseDataSearch} className={classes.closeIcon}/> */}\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} style={{overflowY: 'auto', maxHeight: windowHeight - 204, padding: '16px', backgroundColor: 'rgba(0,0,0,.4)'}}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    name='searchTerms'\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    placeholder='Search'\r\n                                    value={searchField}\r\n                                    InputProps={{\r\n                                        classes: {\r\n                                            root: classes.inputRoot\r\n                                        },\r\n                                        startAdornment: (\r\n                                            <React.Fragment>\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <Search style={{color: colors.primary}}/>\r\n                                                </InputAdornment>\r\n                                            </React.Fragment>\r\n                                        )\r\n                                    }}\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Regions).sort()}\r\n                                selectedOptions={selectedRegions}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedRegions')}\r\n                                parentStateKey={'selectedRegions'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Region'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Year).sort((a, b) => a < b ? 1 : -1)}\r\n                                selectedOptions={selectedYears}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedYears')}\r\n                                parentStateKey={'selectedYears'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Year'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Chief_Name).sort()}\r\n                                selectedOptions={selectedChiefScientists}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedChiefScientists')}\r\n                                parentStateKey={'selectedChiefScientists'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Chief Scientist'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Series).sort()}\r\n                                selectedOptions={selectedSeries}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedSeries')}\r\n                                parentStateKey={'selectedSeries'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Cruise Series'\r\n                            />\r\n\r\n                            <Grid item xs={12} className={classes.searchPanelRow}>\r\n                                <Button variant='outlined' onClick={this.handleResetSearch} className={classes.resetButton}>\r\n                                    Reset Filters\r\n                                </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={8} style={{paddingTop: '12px'}}>\r\n\r\n                        <Grid container>\r\n                            <Grid item xs={9}>\r\n                                <Typography className={classes.heading}>\r\n                                    Showing {cruises.length} cruises (grouped by year)\r\n                                </Typography>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={3} container justify='flex-start' alignItems='center'>\r\n                                <Typography variant='caption' style={{color: colors.primary, marginBottom: '-16px'}}>\r\n                                    Cruise Count\r\n                                </Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n        \r\n                        <VariableSizeList\r\n                            ref={listRef}\r\n                            itemData={cruisesGroupedByYear}\r\n                            itemCount={cruisesGroupedByYear.length}\r\n                            height={windowHeight - 249}\r\n                            width='100%'\r\n                            estimatedItemSize={38}\r\n                            style={{overflowY: 'scroll'}}\r\n                            itemSize={(i) => openYearGroup === cruisesGroupedByYear[i].year ? cruisesGroupedByYear[i].cruises.length * 32 + 38 + 4 + 10 : 38}\r\n                        >\r\n\r\n                            {({ index, style }) => (\r\n                                <div style={style}>\r\n                                    <Grid \r\n                                        container \r\n                                        className={classes.searchOption}\r\n                                        onClick={() => this.handleSetopenYearGroup(index, cruisesGroupedByYear[index].year)}\r\n                                    >            \r\n                                        <Grid item xs={2} container alignItems='center'>\r\n                                            {openYearGroup === cruisesGroupedByYear[index].year ? \r\n                                                <ExpandMore className={classes.datasetOpenIcon}/> : \r\n                                                <ChevronRight className={classes.datasetOpenIcon}/>\r\n                                            }\r\n                                            <span className={classes.searchOptionsMenuItemText}>{cruisesGroupedByYear[index].year}</span>\r\n                                        </Grid>\r\n\r\n                                        <Grid item xs={7}>\r\n\r\n                                        </Grid>\r\n\r\n                                        <Tooltip title={`${cruisesGroupedByYear[index].cruises.length} cruises from this year match the search criteria`}>\r\n                                            <Grid item xs={1} className={classes.memberCount} container alignItems='center' justify='center'>\r\n                                                {cruisesGroupedByYear[index].cruises.length}\r\n                                            </Grid>\r\n                                        </Tooltip>\r\n                                    </Grid>\r\n                                    \r\n                                    {\r\n                                        cruisesGroupedByYear[index].year === openYearGroup ?\r\n                                        <Grid container className={classes.variablesWrapper}>\r\n                                            <Grid item container alignItems='center'>\r\n                                                <Grid item xs={1}> </Grid>\r\n\r\n                                                <Grid item xs={2} className={classes.cruiseYearHeader}>\r\n                                                    Official Designation\r\n                                                </Grid>\r\n\r\n                                                <Grid item xs={8} className={classes.cruiseYearHeader}>\r\n                                                    Nickname\r\n                                                </Grid>\r\n                                            </Grid>\r\n\r\n                                            {cruisesGroupedByYear[index].cruises.map((e, i) => (\r\n                                                <Grid \r\n                                                    item \r\n                                                    xs={12} \r\n                                                    key={e.Name} \r\n                                                    className={classes.variableItem} \r\n                                                    container \r\n                                                    alignItems='center'\r\n                                                    onClick={() => this.handleCruiseSelect(e)}\r\n                                                >   \r\n                                                    <Grid item xs={1}></Grid>\r\n\r\n                                                    <Grid item xs={2} className={classes.cruiseName}>{e.Name}</Grid>\r\n\r\n                                                    <Tooltip title={e.Nickname} enterDelay={300}>\r\n                                                        <Grid item xs={8} className={classes.cruiseName}>{e.Nickname}</Grid>\r\n                                                    </Tooltip>                                                    \r\n                                                </Grid>\r\n                                            ))}\r\n                                        </Grid>\r\n                                        : ''\r\n                                    }\r\n                                </div>\r\n                            )}\r\n                        </VariableSizeList>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n\r\n                <div id='cruise-selector' className={classes.outerDiv}>\r\n\r\n                    <Paper className={classes.openSearchButtonPaper}>\r\n                        <Button\r\n                            startIcon={<Search/>}\r\n                            className={classes.openSearchButton}\r\n                            onClick={() => this.setState({...this.state, searchMenuOpen: true})}\r\n                        >\r\n                            Search Cruises\r\n                        </Button>\r\n                    </Paper>\r\n                    \r\n                    {selectedCruise &&\r\n                        <>\r\n                        <Table size='small' className={classes.cruiseInfo}>\r\n                            <TableBody>\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Cruise:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Nickname:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.Nickname}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n\r\n                                {\r\n                                    selectedCruise.Start_Time &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Start Date:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Start_Time.slice(0,10)}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.End_Time &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            End Date:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.End_Time.slice(0,10)}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.Chief_Name &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Chief Scientist:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Chief_Name}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.Ship_Name &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Ship:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Ship_Name}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n                            </TableBody>\r\n                        </Table>\r\n                        \r\n                            <div className={classes.linkWrapper}>\r\n                                <Link \r\n                                    component={RouterLink} \r\n                                    to={`/catalog/cruises/${selectedCruise.Name}`}\r\n                                    target='_blank'\r\n                                >\r\n                                    Open Cruise Catalog Page\r\n                                </Link>\r\n                            </div>\r\n                        </>\r\n                    }\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(CruiseSelector));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Scene } from '@esri/react-arcgis';\r\n\r\nimport CruiseSelector from './CruiseSelector';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport Draggable from 'react-draggable';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        margin: '0 auto 0 auto',\r\n        width: '100vw',\r\n        height: '100vh',\r\n    }\r\n})\r\n\r\n// const drawButtonStyles = (theme) => ({\r\n//     outerDiv: {\r\n//         // padding:'12px 0 12px 0',\r\n//         backgroundColor: 'transparent',\r\n//         // width: '180px',\r\n//         borderRadius: '4px',\r\n//         marginRight: '20px',\r\n//         position: 'fixed',\r\n//         top: '60px',\r\n//         right: '12px',\r\n//     },\r\n\r\n//     drawButton: {\r\n//         // border: '1px solid #333333',\r\n//         border: `1px solid #333333`,\r\n//         borderRadius: '4px',\r\n//         color: colors.primary,        \r\n//         cursor: 'pointer',\r\n//         padding: '6px',\r\n//         width: '160px',\r\n//         fontSize:'14px',\r\n//         backgroundColor: colors.backgroundGray,\r\n//         boxShadow: '1px 1px 1px 1px #242424',\r\n//         // backgroundColor: 'rgba(255, 128, 0, .8)',\r\n//         // backgroundColor: 'transparent',\r\n//         fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n//         '&:hover': { \r\n//             borderColor: 'white'\r\n//         },\r\n//     },\r\n\r\n//     helpText: {\r\n//         marginTop: 0,\r\n//         color: 'white',\r\n//         fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif'\r\n//     },\r\n\r\n//     cancelButton: {\r\n//         display: 'none',\r\n//         color: 'white'\r\n//     }\r\n// })\r\n\r\n// const DrawButtonRaw = (props) => {\r\n//     const { classes, showHelp } = props;\r\n\r\n//     return (\r\n//         <Draggable>\r\n//             <div className={classes.outerDiv} id='draw-region-div'>\r\n//                 {showHelp && <p className={classes.helpText}>Click once to draw <br/>and again to finish</p>}\r\n//                 <button id='draw-button' className={classes.drawButton}>\r\n//                     Select Region\r\n//                 </button>\r\n//                 <button id='cancel-button' className={`${classes.drawButton} ${classes.cancelButton}`}>\r\n//                     Cancel\r\n//                 </button>\r\n//             </div>\r\n//         </Draggable>\r\n//     )\r\n// }\r\n\r\n// const DrawButton = withStyles(drawButtonStyles)(DrawButtonRaw);\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst polylineSymbol = {\r\n    type: \"line-3d\",\r\n        symbolLayers: [\r\n            {\r\n                type: \"line\",\r\n                size: \"3px\",\r\n                material: {\r\n                    color: {\r\n                        r: 0,\r\n                        g: 255,\r\n                        b: 255,\r\n                        a: 0\r\n                    }\r\n                },\r\n            }\r\n        ]\r\n}\r\n\r\nclass UiComponents extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.sketchModel = new props.esriModules.SketchViewModel({\r\n            layer: props.regionLayer,\r\n            view: props.view,\r\n            polygonSymbol,\r\n            polylineSymbol,\r\n            defaultUpdateOptions: {\r\n                toggleToolOnClick: false,\r\n                tool: \"transform\"\r\n            }\r\n        })\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        // const { view, esriModules, regionLayer, setShowHelp } = this.props;\r\n        // var { sketchModel } = this;\r\n        const { view } = this.props;\r\n\r\n        // var drawButton = document.getElementById('draw-button');\r\n        // var cancelButton = document.getElementById('cancel-button');\r\n\r\n        // const throttledUpdate = throttle(75, (event) => {\r\n        //     if(event.state === 'active'){\r\n        //         this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n        //     }\r\n        // })\r\n\r\n        // sketchModel.on(\"create\", (event) => {\r\n        //     if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n        //         sketchModel.complete();\r\n        //     }\r\n\r\n        //     if(event.graphic && event.graphic.visible) {\r\n        //         event.graphic.visible = false;\r\n        //     }\r\n        //     if(event.state === 'cancel'){\r\n        //         setShowHelp(false);\r\n        //         // drawButton.style.display = 'inline-block';\r\n        //         // cancelButton.style.display = 'none';\r\n        //     }\r\n\r\n        //     if(event.state === \"complete\") {\r\n        //         setShowHelp(false);\r\n        //         this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n        //         // drawButton.style.display = 'inline-block';\r\n        //         // cancelButton.style.display = 'none';\r\n        //     }\r\n        // });\r\n\r\n        // sketchModel.on('create', throttledUpdate)\r\n\r\n        // sketchModel.on('update', (event) => {\r\n        //     if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n        //         if(event.state === 'cancel') return;\r\n        //         this.props.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n        //         // drawButton.style.display = 'inline-block';\r\n        //         // cancelButton.style.display = 'none';\r\n        //     }\r\n        // });   \r\n        \r\n        // drawButton.addEventListener(\"click\", (event) => {\r\n        //         regionLayer.removeAll();\r\n        //         setShowHelp(true);\r\n        //         sketchModel.create('polyline', {\r\n        //             mode:'click'            \r\n        //         });\r\n        //         drawButton.style.display = 'none';\r\n        //         cancelButton.style.display = 'inline-block';\r\n        // });\r\n\r\n        // cancelButton.addEventListener('click', (event) => {\r\n        //     sketchModel.cancel();\r\n        //     setShowHelp(false);\r\n        //     // drawButton.style.display = 'inline-block';\r\n        //     cancelButton.style.display = 'none';\r\n        // })\r\n\r\n        // view.ui.add('draw-region-div', 'bottom-right');\r\n        // view.ui.add('cruise-selector', 'top-right');\r\n\r\n        view.ui.remove('zoom');\r\n        view.ui.remove('navigation-toggle');\r\n        view.ui.remove('compass');\r\n        view.ui.remove('attribution');\r\n\r\n        return null;\r\n    }\r\n}\r\n\r\nconst TrajectoryController = React.memo((props) => {\r\n    const { cruiseTrajectory, trajectoryLayer, esriModules } = props;\r\n    \r\n    if(cruiseTrajectory){\r\n        const { lons, lats } = cruiseTrajectory;\r\n\r\n        let midIndex = Math.floor(lons.length / 2);\r\n\r\n        trajectoryLayer.removeAll();\r\n\r\n        var polyLines = [[]];\r\n        var lineIndex = 0;\r\n\r\n        let lonStart = lons[0];\r\n        let latStart = lats[0];\r\n        let maxDistance = 0;\r\n\r\n        // Create a new path array each time 180 lon is crossed\r\n        lons.forEach((lon, i) => {\r\n            let lat = lats[i];\r\n\r\n            let latDistance = Math.abs(lat - latStart);\r\n            let _lonDistance = Math.abs(lon - lonStart);\r\n            let lonDistance = _lonDistance > 180? 360 - _lonDistance : _lonDistance;\r\n\r\n            let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n            maxDistance = distance > maxDistance ? distance : maxDistance;\r\n\r\n            polyLines[lineIndex].push([lon, lat]);\r\n\r\n            if(i < lons.length - 1){\r\n                if((lon > 160 && lon < 180) && (lons[i + 1] > -180 && lons[i + 1] < -160)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n\r\n                if((lon > -180 && lon < -160) && (lon[i + 1] > 160 && lon[i + 1] < 180)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n            }\r\n        })\r\n\r\n        var cruiseTrajectorySymbol = {\r\n            type: 'line-3d',\r\n            symbolLayers: [{\r\n                type: 'line',\r\n                material: { color: [0, 255, 255, 1] },\r\n                cap:  'round',\r\n                join: 'round',\r\n                size: 2\r\n            }]\r\n        }\r\n\r\n        polyLines.forEach(line => {\r\n\r\n            let cruiseTrajectoryGeometry = {\r\n                type: 'polyline',\r\n                paths: line\r\n            }\r\n\r\n            let graphic = new esriModules.Graphic({\r\n                geometry: cruiseTrajectoryGeometry,\r\n                symbol: cruiseTrajectorySymbol\r\n            });\r\n\r\n            trajectoryLayer.add(graphic);\r\n        })\r\n\r\n        try {\r\n            const center = [lons[midIndex], lats[midIndex]];\r\n\r\n            var zoom = 7 - Math.floor(maxDistance / 6);            \r\n    \r\n            props.view.goTo({\r\n                target: center,\r\n                zoom\r\n            }, {\r\n                maxDuration: 2500,\r\n                speedFactor: .5\r\n            });    \r\n\r\n        } catch(e) {console.log(e)}\r\n\r\n    } else {\r\n        trajectoryLayer.removeAll();\r\n\r\n        props.view.goTo({\r\n            target: [-140, 30],\r\n            zoom: 3\r\n        }, {\r\n            maxDuration: 2500,\r\n            speedFactor: .5\r\n        }); \r\n    }\r\n    return '';\r\n})\r\n\r\nclass MapContainer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            showHelp: false\r\n        }\r\n        this.regionLayer = new props.esriModules.GraphicsLayer();\r\n        this.trajectoryLayer = new props.esriModules.GraphicsLayer();\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, esriModules, spParams, cruiseTrajectory, globeUIRef } = this.props;\r\n\r\n        // const lat1 = parseFloat(spParams.lat1);\r\n        // const lat2 = parseFloat(spParams.lat2);\r\n        // const lon1 = parseFloat(spParams.lon1);\r\n        // let _lon2 = parseFloat(spParams.lon2);\r\n        // const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n        // this.regionLayer.removeAll();\r\n\r\n        // var polygon = {\r\n        //     type: 'polygon', \r\n        //     rings: [\r\n        //         [lon1, lat1],\r\n        //         [lon2, lat1],\r\n        //         [lon2, lat2],\r\n        //         [lon1, lat2],\r\n        //         [lon1, lat1]\r\n        //     ]\r\n        // };\r\n\r\n        // let regionGraphic = new esriModules.Graphic({\r\n        //     geometry: polygon,\r\n        //     symbol: polygonSymbol\r\n        // })\r\n\r\n        // this.regionLayer.add(regionGraphic);\r\n\r\n        return (\r\n            <div className={classes.container} id='found-you'>\r\n                <Scene\r\n                    mapProperties={{ \r\n                        basemap: 'satellite',\r\n                        layers: [\r\n                            this.regionLayer,\r\n                            this.trajectoryLayer\r\n                        ],\r\n\r\n                    }}\r\n                    viewProperties={{\r\n                        center: [-140, 30],\r\n                        zoom: 3,\r\n                        highlightOptions: {\r\n                            haloOpacity: 0,\r\n                            haloColor: 'rgba(0, 0, 0, 0)',\r\n                            fillOpacity: 0,\r\n                            color: \"rgba(0, 0, 0, 0)\"\r\n                        }\r\n                    }}\r\n                >\r\n                    <TrajectoryController \r\n                        cruiseTrajectory={cruiseTrajectory}\r\n                        trajectoryLayer={this.trajectoryLayer}\r\n                        esriModules={esriModules}\r\n                    />\r\n                    <UiComponents\r\n                        updateDomainFromGraphicExtent = {this.props.updateDomainFromGraphicExtent}\r\n                        esriModules={esriModules}\r\n                        measurementPositions={this.props.measurementPositions}\r\n                        regionLayer={this.regionLayer}\r\n                        setShowHelp={(showHelp) => this.setState({...this.state, showHelp})}\r\n                        ref={globeUIRef}\r\n                    />\r\n                </Scene>\r\n\r\n                {/* <DrawButton showHelp={this.state.showHelp}/> */}\r\n                {/* <CruiseSelector updateParametersFromCruiseBoundary={this.props.updateParametersFromCruiseBoundary} showCruiseControl={this.props.showCruiseControl}/> */}\r\n            </div>            \r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(MapContainer);","const localDateToString = (date) => {\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate()\r\n\r\n    let nYear = year.toString();\r\n    let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n    let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n    return nYear + '-' + nMonth + '-' + nDay;\r\n}\r\n\r\nexport default localDateToString;","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { withStyles, Dialog, DialogContent, DialogTitle, Button } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: 'black',\r\n        width: '400px',\r\n        height: '180px'\r\n    },\r\n\r\n    button: {\r\n        textTransform: 'none',\r\n        marginLeft: '20px',\r\n        marginTop: '24px'\r\n    },\r\n});\r\n\r\nconst ModuleSelector = (props) => {\r\n    const { history, classes } = props;\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <Dialog \r\n                open\r\n                PaperProps={{\r\n                    className: classes.dialogPaper\r\n                }}\r\n            >\r\n                <DialogTitle>\r\n                    Select a Visualization Module\r\n                </DialogTitle>\r\n\r\n                <DialogContent>\r\n                    <Button\r\n                        variant='outlined'\r\n                        onClick={() => history.push('/visualization/charts')}\r\n                        className={classes.button}\r\n                        color='primary'\r\n                    >\r\n                        Charts and Plots\r\n                    </Button>\r\n\r\n                    <Button\r\n                        variant='outlined'\r\n                        onClick={() => history.push('/visualization/cruises')}\r\n                        color='primary'\r\n                        className={classes.button}\r\n                    >\r\n                        Explore Cruises\r\n                    </Button>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </React.Fragment>\r\n        )\r\n    }\r\n\r\nexport default withStyles(styles)(withRouter(ModuleSelector));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, BrowserRouter, Switch } from 'react-router-dom'\r\nimport Cookies from 'js-cookie';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginRequiredPrompt from '../User/LoginRequiredPrompt';\r\n// import VisualizationController from './VisualizationController';\r\nimport VizControlPanel from './VizControlPanel';\r\nimport NewVizControlPanel from './NewVizControlPanel';\r\nimport GuestPlotLimitNotification from './GuestPlotLimitNotification';\r\n\r\nimport { showLoginDialog, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { queryRequestSend, storedProcedureRequestSend, cruiseListRequestSend, completedShowCharts, plotsActiveTabSet, guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\n\r\nimport { loadModules } from 'esri-loader';\r\n\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nimport Charts from './Charts';\r\nimport MapContainer from './MapContainer';\r\nimport colors from '../../Enums/colors'\r\nimport cleanSPParams from '../../Utility/Visualization/cleanSPParams';\r\nimport localDateToString from '../../Utility/localDateToString';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport stars from '../../Utility/starsBase64';\r\nimport metaTags from '../../Enums/metaTags';\r\nimport ModuleSelector from './ModuleSelector';\r\nimport CruiseSelector from './CruiseSelector';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    sampleData: state.sampleData,\r\n    queryRequestState: state.queryRequestState,\r\n    maps: state.maps,\r\n    charts: state.charts,\r\n    data: state.data,\r\n    loadingMessage: state.loadingMessage,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    cruiseList: state.cruiseList,\r\n    showChartsOnce: state.showChartsOnce,\r\n    datasets: state.datasets,\r\n    catalog: state.catalog,\r\n    plotsActiveTab: state.plotsActiveTab,\r\n    userIsGuest: state.userIsGuest\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    queryRequestSend,\r\n    retrievalRequestSend,\r\n    storedProcedureRequestSend,\r\n    snackbarOpen,\r\n    cruiseListRequestSend,\r\n    completedShowCharts,\r\n    datasetRetrievalRequestSend,\r\n    plotsActiveTabSet,\r\n    guestPlotLimitNotificationSetIsVisible\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    displayNone: {\r\n        display: 'none'\r\n    },\r\n\r\n    background: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    showCharts: {\r\n        display: 'inline-block',\r\n        paddingTop: '180px',\r\n        width: 'calc(100vw - 10px)', //new\r\n        textAlign: 'left' //new\r\n    },\r\n\r\n    vizWrapper: {\r\n        minHeight: '100vh',\r\n        // overflow: 'hidden',\r\n        // width: '100vw',\r\n        background: `url(${stars})`\r\n    }\r\n})\r\n\r\nconst baseSPParams = {\r\n    tableName: '',\r\n    fields: null,\r\n    depth1: 0,\r\n    depth2: 0,\r\n    dt1: new Date(),\r\n    dt2: new Date(),\r\n    lat1: 0,\r\n    lat2: 0,\r\n    lon1: 0,\r\n    lon2: 0,\r\n    selectedVizType: ''\r\n}\r\n\r\nclass Visualization extends Component {\r\n    globeUIRef = React.createRef();\r\n    mapContainerRef = React.createRef();\r\n\r\n    state = {\r\n        filteredData: [],\r\n        opacity: 1,\r\n        showCharts: false,\r\n        showUI: false,\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        showCruiseControl: false,\r\n        spParams: baseSPParams\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        document.title = metaTags.visualization.title;\r\n        document.description = metaTags.visualization.description;\r\n        \r\n        // if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        // if(!this.props.cruiseList) this.props.cruiseListRequestSend();\r\n        // if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n\r\n        const esriModuleNames = [\r\n            'AreaMeasurement3D',\r\n            'Search',\r\n            'GraphicsLayer',\r\n            'SketchViewModel',\r\n            'Utils',\r\n            'Graphic',\r\n        ];\r\n\r\n        var loadedModules = await loadModules([\r\n            'esri/widgets/AreaMeasurement3D',\r\n            'esri/widgets/Search',\r\n            'esri/layers/GraphicsLayer',\r\n            'esri/widgets/Sketch/SketchViewModel',\r\n            'esri/geometry/support/webMercatorUtils',\r\n            'esri/Graphic',\r\n        ], {version: '4.14'});\r\n\r\n        var esriModules = esriModuleNames.reduce((accumulator, currentValue, currentIndex) => {\r\n            accumulator[currentValue] = loadedModules[currentIndex];\r\n            return accumulator;\r\n        }, {});\r\n        \r\n        this.setState({...this.state, esriModules});        \r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        document.title = metaTags.default.title;\r\n        document.description = metaTags.default.description;\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(this.props.showChartsOnce) {\r\n            this.props.completedShowCharts();\r\n            this.setState({...this.state, showCharts: true})\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, spParams: {...this.state.spParams, [event.target.name]: event.target.value}})\r\n    };\r\n\r\n    handleLatLonChange = (event) => {\r\n        this.setState({\r\n            ...this.state, \r\n            spParams: {...this.state.spParams, [event.target.name]: event.target.value},\r\n        })\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt1:newDate}});\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt2:newDate}});\r\n        }\r\n    }\r\n\r\n    onVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state.spParams;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: localDateToString(dt1),\r\n            dt2: localDateToString(dt2),\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.state.spParams.fields && this.state.spParams.fields.value,\r\n            tableName: this.state.spParams.fields && this.state.spParams.tableName,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.state.spParams.fields && this.state.spParams.fields.data\r\n        }\r\n    \r\n        this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    handlePlotsSetActiveTab = (event, newValue) => {\r\n        this.props.plotsActiveTabSet(newValue);\r\n    }\r\n\r\n    // Update the \"fields\" state piece when the variables input changes\r\n    // Field in this case refers to a react-select option, which contains catalog metadata\r\n    updateFields = (fields) => {\r\n        if(fields) {\r\n            let surfaceOnly = !fields.data.Depth_Max;\r\n            let irregularSpatialResolution = fields.data.Spatial_Resolution === 'Irregular';\r\n\r\n            let sparseMaxDate = utcDateStringToLocal(fields.data.Time_Max);\r\n            sparseMaxDate.setDate(sparseMaxDate.getDate() + 1);\r\n\r\n            let dt1 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt1 : utcDateStringToLocal(fields.data.Time_Min);\r\n            let dt2 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt2 : \r\n                irregularSpatialResolution ? sparseMaxDate :\r\n                utcDateStringToLocal(fields.data.Time_Min);\r\n            \r\n            let latMin = Math.floor(fields.data.Lat_Min * 1000) /1000;\r\n            let latMax = Math.ceil(fields.data.Lat_Max * 1000) /1000;\r\n            let lonMin = Math.floor(fields.data.Lon_Min * 1000) /1000;\r\n            let lonMax = Math.ceil(fields.data.Lon_Max * 1000) /1000;\r\n\r\n            let lat1 = irregularSpatialResolution ? latMin : this.state.spParams.lat1;\r\n            let lat2 = irregularSpatialResolution ? latMax : this.state.spParams.lat2;\r\n            let lon1 = irregularSpatialResolution ? lonMin : this.state.spParams.lon1;\r\n            let lon2 = irregularSpatialResolution ? lonMax : this.state.spParams.lon2;\r\n            let depth1 = irregularSpatialResolution ? fields.data.Depth_Min || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? 0 :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? 0 : \r\n                this.state.spParams.depth1;\r\n\r\n            let depth2 = irregularSpatialResolution ? fields.data.Depth_Max || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2) : \r\n                this.state.spParams.depth2;\r\n\r\n            if(irregularSpatialResolution){\r\n                this.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            let tableName = fields.data.Table_Name;\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                spParams: {...this.state.spParams, \r\n                    fields,\r\n                    dt1,\r\n                    dt2,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    depth1,\r\n                    depth2,\r\n                    tableName,\r\n                    selectedVizType: ''\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({...this.state, spParams: {...this.state.spParams, fields, tableName: ''}})\r\n        }\r\n    }\r\n\r\n    // updateParametersFromCruiseBoundary = (cruise) => {\r\n    //     if(cruise && this.state.spParams.fields){\r\n    //         this.props.snackbarOpen('Setting chart parameters to cruise boundaries.');\r\n    //         let lat1 = Math.floor(cruise.data.Lat_Min * 1000) / 1000;\r\n    //         let lat2 = Math.ceil(cruise.data.Lat_Max * 1000) / 1000;\r\n    //         let lon1 = Math.floor(cruise.data.Lon_Min * 1000) / 1000;\r\n    //         let lon2 = Math.ceil(cruise.data.Lon_Max * 1000) / 1000;\r\n\r\n    //         this.setState({...this.state,\r\n    //             spParams: {...this.state.spParams,\r\n    //                 lat1,\r\n    //                 lat2,\r\n    //                 lon1,\r\n    //                 lon2,\r\n    //                 dt1: utcDateStringToLocal(cruise.data.Start_Time),\r\n    //                 dt2: utcDateStringToLocal(cruise.data.End_Time)\r\n    //             }\r\n    //         })\r\n    //     }\r\n    // }\r\n\r\n    handleShowCharts = () => {\r\n        this.setState({...this.state, showCharts: true})\r\n    }\r\n\r\n    handleShowGlobe = () => {\r\n        this.setState({...this.state, showCharts: false})\r\n    }\r\n\r\n    handleShowCruiseControl = () => {\r\n        this.setState({...this.state, showCruiseControl: !this.state.showCruiseControl});\r\n    }\r\n\r\n    toggleShowUI = () => {\r\n        this.setState({...this.state, showUI: !this.state.showUI});\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: extent.ymin.toFixed(3),\r\n            lat2: extent.ymax.toFixed(3),\r\n            lon1: _lon1.toFixed(3),\r\n            lon2: _lon2.toFixed(3)\r\n        };\r\n\r\n        this.setState({...this.state, spParams: {...this.state.spParams, ...newCoordinates}});\r\n    }\r\n\r\n    resetSPParams = () => {\r\n        this.setState({...this.state, spParams: baseSPParams})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n        // if(!this.props.user && !this.props.userIsGuest) return <LoginRequiredPrompt/>\r\n        \r\n        return (\r\n            <div className={classes.vizWrapper}>\r\n                <GuestPlotLimitNotification/>\r\n                {/* <VizControlPanel\r\n                    toggleChartView={this.toggleChartView}\r\n                    toggleShowUI={this.toggleShowUI}\r\n                    handleChange={this.handleChange}\r\n                    handleLatLonChange={this.handleLatLonChange}\r\n                    handleStartDateChange={this.handleStartDateChange} \r\n                    handleEndDateChange={this.handleEndDateChange} \r\n                    showUI={this.state.showUI}\r\n                    onVisualize={this.onVisualize}\r\n                    updateFields={this.updateFields}\r\n                    {...this.state.spParams}\r\n                    surfaceOnly={this.state.surfaceOnly}\r\n                    irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                    showCharts={this.state.showCharts}\r\n                    handleShowCharts={this.handleShowCharts}\r\n                    handleShowGlobe={this.handleShowGlobe}\r\n                    resetSPParams={this.resetSPParams}\r\n                    handleShowCruiseControl={this.handleShowCruiseControl}\r\n                    showCruiseControl={this.state.showCruiseControl}\r\n                /> */}\r\n\r\n                { this.state.esriModules &&\r\n                    <div className={`${this.props.plotsActiveTab === 0 ? '' : classes.displayNone}`}>\r\n                        <MapContainer\r\n                            globeUIRef={this.globeUIRef}\r\n                            updateDomainFromGraphicExtent={this.updateDomainFromGraphicExtent}\r\n                            // updateParametersFromCruiseBoundary={this.updateParametersFromCruiseBoundary}\r\n                            esriModules={this.state.esriModules}\r\n                            spParams={this.state.spParams}\r\n                            cruiseTrajectory={this.props.cruiseTrajectory}\r\n                            showCruiseControl={this.state.showCruiseControl}\r\n                            chartControlPanelRef={this.chartControlPanelRef}\r\n                            ref={this.mapContainerRef}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n                <Switch>          \r\n                    <Route exact path='/visualization' component={ModuleSelector} />\r\n                    <Route \r\n                        path='/visualization/charts'\r\n                        render={(props) => (\r\n                            <NewVizControlPanel\r\n                            {...props}\r\n                            toggleChartView={this.toggleChartView}\r\n                            toggleShowUI={this.toggleShowUI}\r\n                            handleChange={this.handleChange}\r\n                            handleLatLonChange={this.handleLatLonChange}\r\n                            handleStartDateChange={this.handleStartDateChange} \r\n                            handleEndDateChange={this.handleEndDateChange} \r\n                            showUI={this.state.showUI}\r\n                            onVisualize={this.onVisualize}\r\n                            updateFields={this.updateFields}\r\n                            {...this.state.spParams}\r\n                            surfaceOnly={this.state.surfaceOnly}\r\n                            irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                            showCharts={this.state.showCharts}\r\n                            handleShowCharts={this.handleShowCharts}\r\n                            handleShowGlobe={this.handleShowGlobe}\r\n                            resetSPParams={this.resetSPParams}\r\n                            handleShowCruiseControl={this.handleShowCruiseControl}\r\n                            showCruiseControl={this.state.showCruiseControl}\r\n                            globeUIRef={this.globeUIRef}\r\n                            mapContainerRef={this.mapContainerRef}\r\n                            handlePlotsSetActiveTab={this.handlePlotsSetActiveTab}\r\n                            plotsActiveTab={this.props.plotsActiveTab}\r\n                        />\r\n                        )}\r\n                    // }\r\n                    />\r\n                    <Route \r\n                        path='/visualization/cruises'\r\n                        render={(props) => (\r\n                            <CruiseSelector handleShowGlobe={() => this.handlePlotsSetActiveTab(null, 0)}/>\r\n                        )}\r\n                    />\r\n                </Switch>              \r\n\r\n                {/* <div className={this.state.showCharts ? classes.showCharts : classes.displayNone}> */}\r\n                <div className={this.props.plotsActiveTab === 0 ? classes.displayNone : classes.showCharts}>\r\n                    <Charts/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Visualization));","export default 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=';"],"sourceRoot":""}