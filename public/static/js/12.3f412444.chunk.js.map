{"version":3,"sources":["Enums/metaTags.js","Utility/depthCounter.js","Components/User/LoginRequiredPrompt.js","Components/UI/MultiCheckboxDropdown.js","Enums/validation.js","Components/Visualization/VariableDetailsDialog.js","Utility/mapTemporalResolutionToNumber.js","Utility/utcDateStringToLocal.js","Utility/countWebGLContexts.js","Components/Visualization/ChartControl.js","Components/Visualization/VizControlPanel.js","Utility/Visualization/mapVizType.js","Utility/Visualization/cleanSPParams.js","Utility/Visualization/aggregateChartDataSize.js","Utility/Visualization/generateVariableSampleRangeParams.js","Components/Visualization/DatasetInfoDialog.js","Components/Visualization/ProductList.js","Components/Visualization/DataSearch.js","Components/Visualization/ChartControlTabs.js","Utility/Visualization/generateVariableFullRangeParams.js","Components/Visualization/SparseDataMaxSizeNotification.js","Components/Visualization/StoredParametersDropdown.js","Components/Visualization/NewVizControlPanel.js","Components/Visualization/GuestPlotLimitNotification.js","Enums/months.js","Utility/handleChartDatestring.js","Utility/chartBase.js","Components/Visualization/ChartControlPanel.js","Components/Visualization/SparseHistogram.js","Utility/handleXTicks.js","Utility/getChartDimensions.js","Components/Visualization/SpaceTimeChart.js","Components/Visualization/TimeSeriesChart.js","Components/Visualization/DepthProfileChart.js","Components/Visualization/SectionMapChart.js","Components/Visualization/SparseScatter.js","Components/Visualization/SparseMap.js","Components/Visualization/Charts.js","Utility/setsFromList.js","Components/Visualization/CruiseSelector.js","Components/Visualization/MapContainer.js","Utility/localDateToString.js","Components/Visualization/ModuleSelector.js","Components/Visualization/Visualization.js","Utility/starsBase64.js"],"names":["metaTags","default","title","description","visualization","catalog","dataSubmission","community","darwinDepths","piscesDepths","piscesTable","Set","darwinTable","exports","count","field","depth1","depth2","table","data","Table_Name","has","i","length","mapDispatchToProps","showLoginDialog","connect","withStyles","theme","loginRequiredMessage","marginTop","spacing","color","props","classes","useEffect","className","component","RouterLink","to","pathname","window","location","onClick","menuOpenIcon","colors","primary","margin","formGroupWrapper","textAlign","paddingLeft","multiSelectHeader","fontSize","formControlLabelRoot","height","formControlLabelLabel","checkboxGroupHeader","backgroundColor","greenHover","cursor","boxShadow","selectedOptions","handleClear","options","parentStateKey","handleClickCheckbox","groupHeaderLabel","React","useState","open","setOpen","item","xs","container","alignItems","size","cs","justify","style","marginRight","map","e","key","control","onChange","checkbox","name","checked","label","root","validation","depth","depthOneIsLower","depthOneOutOfBounds","depthTwoOutOfBounds","negative","date","dateOneIsLater","dateOneOutOfBounds","dateTwoOutOfBounds","lat","latOneIsHigher","latOneOutOfBounds","latTwoOutOfBounds","lon","lonOneIsHigher","lonOneOutOfBounds","lonTwoOutOfBounds","type","dataIsIrregular","dateRangeRequired","depthRangeRequired","surfaceOnlyDataset","irregularOnly","dataSizeTooLarge","webGLContextLimit","generic","invalid","dataSizeWarning","dataSizePrevent","variableMissing","vizTypeMissing","guestMaximumReached","variableFetch","state","ownProps","variableDetails","dialogPaper","backgroundGray","width","closeIcon","display","float","variableDetailsID","handleSetVariableDetailsID","handleClose","stopPropagation","Dialog","zIndex","z","NON_HELP_DIALOG","Boolean","onClose","PaperProps","DialogTitle","Long_Name","Skeleton","Close","DialogContent","DialogContentText","Comment","Table","TableBody","TableRow","TableCell","Dataset_Name","slice","Data_Source","Distributor","Sensor","Spatial_Resolution","Temporal_Resolution","Time_Min","Time_Max","Lat_Min","Lat_Max","Lon_Min","Lon_Max","Depth_Max","Depth_Min","undefined","Variable_Min","Unit","Variable_Max","Variable_Mean","Variable_Std","Typography","variant","mapTemporalResolutionToNumber","resolution","temporalResolutions","threeMinutes","sixHourly","daily","weekly","monthly","annual","irregular","monthlyClimatology","threeDay","eightDayRunning","eightDays","utcDateStringToLocal","utcString","Date","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDate","getUTCDate","newDate","setFullYear","charts","forEach","chart","subType","visualizationSubTypes","heatmap","sparse","variableValues","depthProfile","timeSeries","vizTypeSelectFormControl","vizTypeMenu","vizTypeMenuItem","visualizeButton","textTransform","borderRadius","palette","main","fontVariant","vizButtonTooltip","overrideDisabledStyle","heatmapMessage","contourMessage","sectionMapMessage","histogramMessage","timeSeriesMessage","depthProfileMessage","sparseMapMessage","visualizeButtonTooltip","disableVisualizeMessage","selectedVizType","handleChangeInputValue","handleVisualize","disabled","Fragment","Grid","FormControl","InputLabel","shrink","htmlFor","value","inputProps","id","MenuProps","MenuListProps","MenuItem","vizSubTypes","contourMap","sectionMap","contourSectionMap","histogram","Tooltip","placement","Button","fullWidth","cruiseTrajectoryRequestSend","clearCharts","csvDownloadRequestSend","snackbarOpen","getDatePlaceholder","isNaN","valueOf","month","getMonth","day","getDate","getFullYear","join","reactWindowListRef","createRef","selectRef","MenuList","componentDidUpdate","prevProps","prevState","current","resetAfterIndex","children","scrollOffset","foundFocus","child","groupHasFocus","isFocused","scrollTo","this","getValue","initialOffset","indexOf","groupHeights","some","grandChild","totalHeight","reduce","acc","cur","estimatedItemSize","itemCount","itemSize","index","initialScrollOffset","ref","Component","Group","hasFocus","element","sensor","CustomHeading","headingProps","headingLabel","firstChild","tableName","selectProps","hidden","customHeading","icon","typography","whiteSpace","overflow","textOverflow","iconClass","ListItem","button","select","setState","focusedOption","Icon","datasets","IconButton","protocol","host","Info","cart","ShoppingCart","DropdownIndicator","ArrowRight","Menu","Option","innerProps","onMouseMove","preventDefault","onMouseOver","GroupHeading","SingleValue","optionLabelSpanStyleLeft","boxSizing","optionLabelSpanStyleMid","optionLabelSpanStyleRight","formatOptionLabel","option","meta","ValueContainer","Search","position","left","controlPanelModes","VizControlPanel","search","addDocuments","cruiseList","handleOpenControlPanel","showControlPanel","handleCloseControlPanel","handleVariableDetailsDialogClose","VariableDetailsDialogIsOpen","handleVariableDetailsDialogOpen","event","getSelectOptionsFromCatalogItems","items","Visualize","push","Variable","Object","values","sort","opt1","opt2","estimateCsvSize","datasetName","member","parseInt","Variable_Count","handleResetSPParams","resetSPParams","searchField","onAutoSuggestChange","searchString","action","estimateDataSize","dt1","dt2","lat1","lat2","lon1","lon2","fields","spatialResolutions","date1","parse","dayDiff","res","mapSpatialResolutionToNumber","dateCount","Math","floor","depthUtils","checkStartDepth","surfaceOnly","test","parseFloat","replace","toFixed","checkEndDepth","checkStartDateValid","checkEndDateValid","checkStartDate","checkEndDate","checkStartLat","checkEndLat","checkStartLon","checkEndLon","checkHeatmap","irregularSpatialResolution","checkContour","checkSection","checkHistogram","checkTimeSeries","checkDepthProfile","checkSparseMap","checkGeneralWarn","dataSize","checkGeneralPrevent","webGLCount","countWebGLContexts","handleShowChartsAndResize","setTimeout","dispatchEvent","Event","handleShowCharts","handleUpdateFields","newValue","updateFields","lastSelectedFieldId","ID","showChartControl","showDataBites","showBottomControl","controlPanelMode","maxDateMessage","maxDate","catalogRequestState","handleChange","showCharts","handleShowGlobe","handleLatLonChange","catalogMinDate","setHours","catalogMaxDate","zeroedDT1","zeroedDT2","minDate","minDateMessage","Array","fill","startDepthMessage","endDepthMessage","startLatMessage","endLatMessage","startLonMessage","endLonMessage","generalWarnMessage","checkDisableVisualizeList","errorCount","errorSizeAdjust","checkDisableVisualize","closePanelChevron","aria-label","ChevronLeft","openPanelChevron","ChevronRight","Drawer","drawer","paper","drawerPaper","anchor","ButtonGroup","groupedButtons","depressed","ShowChart","DirectionsBoat","Fastfood","Settings","isLoading","states","inProgress","components","IndicatorSeparator","escapeClearsValue","onInputChange","filterOption","variableSelect","isClearable","inputValue","placeholder","styles","menu","provided","maxWidth","backdropFilter","valueContainer","padding","fontWeight","input","fontFamily","border","borderBottom","borderColor","noOptionsMessage","singleValue","tableStatsButton","LibraryBooks","datePicker","format","autoOk","handleStartDateChange","inputVariant","KeyboardButtonProps","datePickerInputAdornment","handleEndDateChange","formGridItem","TextField","error","textField","FormHelperTextProps","helperText","InputProps","padLeft","InputLabelProps","ceil","onVisualize","Paper","dataBitesContainer","bottomControlContainer","cruiseTrajectory","showHelp","top","bottom","drawerPaperError1","drawerPaperError2","drawerPaperError3","drawerPaperError4","drawerPaperError5","navDrawerWidth","controlPanelForm","paddingTop","borderLeft","clearChartsButton","borderRight","resetSPParamsButton","right","mapVizType","vizType","sp","storedProcedures","spaceTime","cleanSPParams","spName","aggregateChartDataSize","ch","generateVariableSampleRangeParams","varDetails","datasetSummaryFetch","datasetSummary","minWidth","markdown","textDecoration","lineHeight","datasetSummaryID","setDatasetSummaryID","Dataset_Long_Name","source","Description","Link","target","href","makeGroupStyles","searchOptionsMenuList","maxHeight","searchOption","searchOptionsMenuItem","searchOptionsMenuItemText","heading","variableItem","variablesWrapper","memberCount","datasetOpenIcon","infoIcon","listHeader","variableName","MakeGroup","vizSearchResultsLoadingState","memo","handleSelectDataTarget","setdatasetSummaryID","listRef","make","fullCount","openIndex","setOpenIndex","handleSetOpenClick","currentOffset","targetOffset","scrollToItem","varCount","variables","nonvisualizableDatasetCount","nonvisualizableString","enterDelay","marginBottom","itemData","overflowY","ExpandMore","Dataset_ID","Star","observationListRef","modelListRef","windowHeight","windowWidth","vizSearchResultsFullCounts","handleShowMemberVariables","Observation","Model","vizSearchResultsFetch","vizSearchResultsSetLoadingState","variableNameAutocompleteFetch","vizSearchResultsStore","searchOptionsFetch","defaultState","hasDepth","timeStart","timeEnd","toISOString","latStart","latEnd","lonStart","lonEnd","searchTerms","temporalResolution","spatialResolution","dataSource","distributor","processLevel","region","DataSearch","memberVariablesDataset","showAdvanced","sensorsMenuOpen","regionsMenuOpen","makesMenuOpen","componentDidMount","handleChangeSearchValue","updateStateAndSearch","handleChangeAutocomplete","statePiece","v","newState","handleChangeSensor","altTypeValue","handleChangeMake","handleToggleShowAdvanced","handleResetSearch","handleToggleMenu","split","column","newSet","add","delete","handleClearMultiSelect","param","render","vizSearchResults","submissionOptions","autocompleteVariableNames","startIcon","handleCloseDataSearch","inputRoot","startAdornment","InputAdornment","inputRef","searchInputRef","MultiCheckboxDropdown","Make","Region","showAdvancedWrapper","searchPanelRow","formControl","min","max","FormHelperText","Select","PopoverClasses","autocompletePopperPaper","addBorder","CONTROL_SECONDARY","Process_Level","Autocomplete","renderInput","params","getOptionLabel","disablePortal","shiftedAutocompletePaper","regionSelectorInput","autocompleteOptions","popperDisablePortal","shiftedAutocompletePopper","listbox","shiftedAutocompleteListbox","resetButton","chip","searchWrapper","depthFormControlRoot","autoComplete","searchSectionHeader","sensorInputLabel","sensorTextField","denseGridItem","minHeight","overflowX","deleteChart","tabsWrapper","CONTROL_PRIMARY","tabs","tab","opacity","greenHightlight","plotsActiveTab","handlePlotsSetActiveTab","Tabs","indicatorColor","scrollButtons","Tab","Language","selected","wrapped","metadata","chartIndex","handleDeleteChart","generateVariableFullRangeParams","vizPageDataTargetDetails","popoutButtonPaper","popoutButtonIcon","popoutButtonBase","popperPaper","dropdown","handleUpdateParameters","anchorEl","setAnchorEl","handleCloseMenu","handleSelect","disableButton","Transform","currentTarget","Popper","transition","TransitionProps","Grow","transformOrigin","ClickAwayListener","onClickAway","parameters","syncPlotParams","sparseDataMaxSizeNotificationUpdate","sparseDataMaxSizeNotificationData","dialogContent","lastPointValueText","lastPointValueWrapper","list","listItem","time","vizPageDataTargetSetAndFetchDetails","storedProcedureRequestSend","sparseDataQuerySend","guestPlotLimitNotificationSetIsVisible","polygonSymbol","symbolLayers","material","outline","NewVizControlPanel","dataSearchMenuOpen","addedGlobeUIListeners","showDrawHelp","storedParams","user","mapContainerRef","_lon2","regionLayer","removeAll","polygon","rings","regionGraphic","esriModules","Graphic","geometry","symbol","derivedParams","globeUIRef","view","goTo","zoom","maxDuration","speedFactor","componentWillUnmount","updateDomainFromGraphicExtent","extent","_lon1","xmin","xmax","newCoordinates","ymin","ymax","handleShowChartsClick","isSparseVariable","mapping","payload","handleDrawClick","sketchModel","throttledUpdate","throttle","Utils","webMercatorToGeographic","graphic","on","toolEventInfo","complete","visible","cancel","graphics","create","mode","parsed","includes","handleToggleCharts","date2","pointCount","aggregateSize","guestPlotCount","Cookies","get","dataTarget","details","generalPreventMessage","startDateMessage","endDateMessage","drawHelpText","controlPanelItem","controlPanelItemLabel","controlPanelItemStartIcon","dateTimeInput","step","drawerWidth","Edit","Badge","badgeContent","dataSearchMenuPaper","vizPageDataTarget","borderTop","justifyContent","guestTokenRequestSend","guestPlotLimitNotificationIsVisible","userIsGuest","dialogWrapper","dialogRoot","link","paddingBottom","dialogActionButton","withRouter","handleLoginButtonClick","dialogIsOpen","DialogActions","history","dateString","hasHour","isMonthly","months","layout","font","paper_bgcolor","autosize","t","b","config","displaylogo","annotations","text","xref","yref","yanchor","x","y","yshift","showarrow","xanchor","colorscaleOptions","popover","paddingRight","iconButton","colorForm","lastIcon","borderTopRightRadius","borderBottomRightRadius","buttonGroup","pointerEvents","colorscaleMenu","setPopoverZ","grayBackground","sparseDataMaxSizeWarningIcon","errorYellow","onToggleSplitByDate","splitByDate","onToggleSplitBySpace","splitBySpace","orientation","downloadCsv","handleZValueConfirm","zValues","markerOptions","handleMarkerOptionsConfirm","showErrorBars","handleSetShowErrorBars","showLines","handleSetShowLines","paletteAnchorElement","setPaletteAnchorElement","zScalePopoverAnchorElement","setZScalePopoverAnchorElement","localZMin","setLocalZMin","localZMax","setLocalZMax","zScalePopoverOpen","zScalePopoverID","handleZScalePopoverClose","zScaleValidations","zMinMessage","zMaxMessage","markerOptionsAnchorElement","setMarkerOptionsAnchorElement","localMarkerOpacity","setLocalMarkerOpacity","localMarkerColor","setLocalMarkerColor","localMarkerSize","setLocalMarkerSize","previousOpacity","useRef","usePreviousOpacity","previousColor","usePreviousColor","previousSize","usePreviousSize","markerPopoverOpen","markerPopoverID","handleMarkerOptionsClose","markerOptionsValidations","checkLocalMarkerOpacity","checkLocalMarkerSize","localMarkerOpacityMessage","localMarkerSizeMessage","showSparseDataSizeWarning","SPARSE_DATA_QUERY_MAX_SIZE","Warning","lastRowTimeSpaceDataFromChart","DateRange","LineWeight","CloudDownload","SwapVert","Tune","handlePaletteChoice","Palette","Gamepad","keepMounted","Popover","anchorOrigin","vertical","horizontal","OutlinedInput","aria-describedby","labelWidth","csvFromVizRequestSend","chartWrapper","buttonBlock","iconButtonWrapper","handleChartDateString","useResizeHandler","marker","chartBase","plot_bgcolor","xaxis","exponentformat","yaxis","infoObject","sectionSize","lonRange","lonMax","lonMin","tickvals","from","ticktext","tickmode","sizeRatio","latMax","latMin","setLoadingMessage","plots","dates","depths","setSplitByDate","splitByDepth","setSplitByDepth","setPalette","zMin","zMax","setZValues","subSets","generatePlotData","subsets","xTicks","handleXTicks","getChartDimensions","subset","latTitle","lonTitle","hovertext","abs","formatter","lats","lons","zauto","zmin","zmax","connectgaps","autocolorscale","colorscale","hoverinfo","contours","coloring","showlabels","labelfont","family","labelformat","colorbar","handleContourMap","zsmooth","handleHeatmap","subTypes","requestAnimationFrame","onToggleSplitByDepth","chartCount","availableWGLContexts","stds","setMarkerOptions","setShowLines","setShowErrorBars","error_y","array","line","isMonthy","error_x","autorange","setSplitBySpace","setOrientation","spaces","distinctMeridiansOrParallelsForSplitting","xAxis","handleSectionMap","switchOrientation","SparseScatter","xValues","yValues","xTitle","yTitle","times","tabProps","SparseTabPanel","selectedTab","controlPanelProps","SparseMap","setTab","plot","radius","mapbox","layers","sourcetype","below","center","mapboxAccessToken","handleSparseMap","scatter","centered","CloseChartIcon","closeChartIcon","disableFocusRipple","disableRipple","Delete","Charts","elevation","chartPaper","setsFromList","setKeys","result","isArray","subItem","cruiseListRequestSend","cruiseTrajectoryClear","esriFonts","searchFilterGroupCruises","cruises","selectedYears","selectedChiefScientists","selectedRegions","selectedSeries","filter","Year","Chief_Name","Regions","Series","cruisesGroupedByYear","keys","year","a","defaultSearchAndFilterState","openYearGroup","CruiseSelector","handleCruiseSelect","selection","selectedCruise","searchMenuOpen","optionSets","newOptionSets","oldOptionSets","handleCloseSearch","tempNewState","handleSetopenYearGroup","listHeight","JsSearch","searchIndex","addIndex","console","log","searchMenuPaper","cruiseYearHeader","Name","cruiseName","Nickname","outerDiv","openSearchButtonPaper","openSearchButton","cruiseInfo","cruiseInfoCell","Start_Time","End_Time","Ship_Name","linkWrapper","getCruiseListState","transform","borderStyle","yearHeader","justifyCOntent","polylineSymbol","r","g","UiComponents","shouldComponentUpdate","nextProps","nextState","SketchViewModel","layer","defaultUpdateOptions","toggleToolOnClick","tool","ui","remove","TrajectoryController","trajectoryLayer","midIndex","polyLines","lineIndex","maxDistance","latDistance","_lonDistance","lonDistance","distance","sqrt","cruiseTrajectorySymbol","cap","cruiseTrajectoryGeometry","paths","MapContainer","spParams","mapProperties","basemap","viewProperties","highlightOptions","haloOpacity","haloColor","fillOpacity","measurementPositions","setShowHelp","GraphicsLayer","localDateToString","toString","marginLeft","queryRequestSend","retrievalRequestSend","completedShowCharts","datasetRetrievalRequestSend","plotsActiveTabSet","baseSPParams","Visualization","filteredData","showUI","showCruiseControl","document","sparseMaxDate","setDate","handleShowCruiseControl","toggleShowUI","esriModuleNames","loadModules","version","loadedModules","accumulator","currentValue","currentIndex","showChartsOnce","vizWrapper","displayNone","chartControlPanelRef","exact","path","ModuleSelector","toggleChartView","sampleData","queryRequestState","maps","loadingMessage","background"],"mappings":"2GA2BeA,IA3BE,CACbC,QAAS,CACLC,MAAO,0CACPC,YAAa,4QAGjBC,cAAe,CACXF,MAAO,0BACPC,YAAa,+GAGjBE,QAAS,CACLH,MAAO,eACPC,YAAa,2GAGjBG,eAAgB,CACZJ,MAAO,uBACPC,YAAa,sFAGjBI,UAAW,CACPL,MAAO,iBACPC,YAAa,8H,iCCtBrB,IAAMK,EAAe,CACjB,EACA,GACA,GACA,GACA,GACA,GACA,GACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,OACA,SACA,SACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SAGEC,EAAe,CACjB,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,eAkBEC,EAAc,IAAIC,IAfF,CAClB,gBACA,2BAcEC,EAAc,IAAID,IAXH,CACjB,4BACA,sBACA,qBACA,iCACA,wBACA,0BACA,mCAMEE,EAAU,CACZC,MAAO,SAACC,EAAOC,EAAQC,GAAY,IACXC,EAAUH,EAAMI,KAA5BC,WACJN,EAAQ,EAEZ,GAAGJ,EAAYW,IAAIH,GACf,IAAI,IAAII,EAAI,EAAGA,EAAIb,EAAac,UACzBd,EAAaa,GAAKL,GADeK,IAEjCb,EAAaa,GAAKN,GAAQF,SAE9B,GAAIF,EAAYS,IAAIH,GACvB,IAAI,IAAII,EAAI,EAAGA,EAAId,EAAae,UACzBf,EAAac,GAAKL,GADeK,IAEjCd,EAAac,GAAKN,GAAQF,IAGrC,OAAOA,GAGXJ,cACAE,cACAH,eACAD,gBAGWK,O,iCCtJf,6DASMW,EAAqB,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","file":"static/js/12.3f412444.chunk.js","sourcesContent":["const metaTags = {\r\n    default: {\r\n        title: 'Simons Collaborative Marine Ocean Atlas',\r\n        description: \"Simons Collaborative Marine Atlas Project is an open-source data portal interconnecting data sets across Oceanography disciplines. It enables scientists and the public to dive into the vast and often underutilized ocean datasets to retrieve custom subsets of data.\",\r\n    },\r\n\r\n    visualization: {\r\n        title: 'CMAP Data Visualization',\r\n        description: 'Generate scatter plots, heatmaps, cruise routes, and more using oceanographic data from from CMAP datasets.'\r\n    },\r\n\r\n    catalog: {\r\n        title: 'CMAP Catalog',\r\n        description: 'Search for oceanographic datasets in the CMAP database using keywords, or temporal or spatial coverage.'\r\n    },\r\n\r\n    dataSubmission: {\r\n        title: 'CMAP Data Submission',\r\n        description: 'Validate and submit your dataset. Track the progress of your previous submissions.'\r\n    },\r\n\r\n    community: {\r\n        title: 'CMAP Community',\r\n        description: 'Join the CMAP team on slack, follow us on github, or download the CMAP software package for Python, R, Julia, or MATLAB.'\r\n    }\r\n}\r\n\r\nexport default metaTags;","\r\nconst darwinDepths = [\r\n    5,\r\n    15,\r\n    25,\r\n    35,\r\n    45,\r\n    55,\r\n    65,\r\n    75.005,\r\n    85.025,\r\n    95.095,\r\n    105.31,\r\n    115.87,\r\n    127.15,\r\n    139.74,\r\n    154.47,\r\n    172.4,\r\n    194.735,\r\n    222.71,\r\n    257.47,\r\n    299.93,\r\n    350.68,\r\n    409.93,\r\n    477.47,\r\n    552.71,\r\n    634.735,\r\n    722.4,\r\n    814.47,\r\n    909.74,\r\n    1007.155,\r\n    1105.905,\r\n    1205.535,\r\n    1306.205,\r\n    1409.15,\r\n    1517.095,\r\n    1634.175,\r\n    1765.135,\r\n    1914.15,\r\n    2084.035,\r\n    2276.225,\r\n    2491.25,\r\n    2729.25,\r\n    2990.25,\r\n    3274.25,\r\n    3581.25,\r\n    3911.25,\r\n    4264.25,\r\n    4640.25,\r\n    5039.25,\r\n    5461.25,\r\n    5906.25\r\n]\r\n\r\nconst piscesDepths = [\r\n    0.494024991989,\r\n    1.54137504101,\r\n    2.64566898346,\r\n    3.81949496269,\r\n    5.07822418213,\r\n    6.44061422348,\r\n    7.92956018448,\r\n    9.5729970932,\r\n    11.404999733,\r\n    13.4671401978,\r\n    15.8100700378,\r\n    18.4955596924,\r\n    21.5988197327,\r\n    25.2114105225,\r\n    29.4447307587,\r\n    34.4341506958,\r\n    40.3440513611,\r\n    47.3736915588,\r\n    55.764289856,\r\n    65.8072662354,\r\n    77.8538513184,\r\n    92.3260726929,\r\n    109.729301453,\r\n    130.666000366,\r\n    155.850692749,\r\n    186.125595093,\r\n    222.475204468,\r\n    266.040313721,\r\n    318.127410889,\r\n    380.213012695,\r\n    453.937713623,\r\n    541.088928223,\r\n    643.566772461,\r\n    763.333129883,\r\n    902.339294434,\r\n    1062.43994141,\r\n    1245.29101562,\r\n    1452.25097656,\r\n    1684.28405762,\r\n    1941.89294434,\r\n    2225.07788086,\r\n    2533.3359375,\r\n    2865.70288086,\r\n    3220.82006836,\r\n    3597.03198242,\r\n    3992.48388672,\r\n    4405.22412109,\r\n    4833.29101562,\r\n    5274.78417969,\r\n    5727.91699219\r\n]\r\n\r\nconst _piscesTables = [\r\n    'tblPisces_NRT',\r\n    'tblPisces_NRT_Calendar'\r\n]\r\n\r\nconst _darwinTable = [\r\n    'tblDarwin_Chl_Climatology',\r\n    'tblDarwin_Ecosystem',\r\n    'tblDarwin_Nutrient',\r\n    'tblDarwin_Nutrient_Climatology',\r\n    'tblDarwin_Ocean_Color',\r\n    'tblDarwin_Phytoplankton',\r\n    'tblDarwin_Plankton_Climatology'\r\n]\r\n\r\nconst piscesTable = new Set(_piscesTables);\r\nconst darwinTable = new Set(_darwinTable);\r\n\r\nconst exports = {\r\n    count: (field, depth1, depth2) => {\r\n        const { Table_Name: table } = field.data;\r\n        var count = 0;\r\n    \r\n        if(piscesTable.has(table)) {\r\n            for(let i = 0; i < piscesDepths.length; i++){\r\n                if(piscesDepths[i] > depth2) break;\r\n                if(piscesDepths[i] > depth1) count ++; \r\n            }\r\n        } else if (darwinTable.has(table)) {\r\n            for(let i = 0; i < darwinDepths.length; i++){\r\n                if(darwinDepths[i] > depth2) break;\r\n                if(darwinDepths[i] > depth1) count ++; \r\n            }\r\n        } else {}\r\n        return count;\r\n    },\r\n\r\n    piscesTable,\r\n    darwinTable,\r\n    piscesDepths,\r\n    darwinDepths\r\n}\r\n\r\nexport default exports;","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport { Link, Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = (theme) =>  ({\r\n    loginRequiredMessage: {\r\n        marginTop: theme.spacing(10),\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst LoginRequiredPrompt = (props) => {\r\n    const { classes, showLoginDialog } = props;\r\n\r\n    useEffect(() => {\r\n        showLoginDialog();\r\n    })\r\n    \r\n    return (\r\n        <Typography className={classes.loginRequiredMessage}>\r\n            This feature requires a user account. Please <Link component={RouterLink} to={{pathname: window.location.pathname}} onClick={() => props.showLoginDialog()}> log in\r\n            </Link> or <Link component={RouterLink} to={{pathname: '/register'}}> register\r\n            </Link>.\r\n        </Typography>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(LoginRequiredPrompt));","// Expandable list of checkboxes used in search components\r\n\r\nimport React from 'react';\r\n\r\nimport { withStyles, Grid, FormGroup, Checkbox, Link, FormControlLabel } from '@material-ui/core';\r\nimport { ExpandMore, ChevronRight } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    menuOpenIcon:{\r\n        color:colors.primary, \r\n        margin: '0 8px 0 4px'\r\n    },\r\n\r\n    formGroupWrapper: {\r\n        textAlign: 'left',\r\n        paddingLeft: '20px'\r\n    },\r\n\r\n    multiSelectHeader: {\r\n        fontSize: '13px',\r\n        margin: '6px 0px 2px 0px'\r\n    },\r\n\r\n    formControlLabelRoot: {\r\n        height: '30px'\r\n    },\r\n\r\n    formControlLabelLabel: {\r\n        fontSize: '14px'\r\n    },\r\n\r\n    checkboxGroupHeader: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 0px 0px 1px #242424',\r\n        marginTop: '8px'\r\n    }\r\n});\r\n\r\n//component expects to be wrapped in a grid\r\nconst MultiCheckboxDrowndown = (props) => {\r\n\r\n    const {\r\n        classes,\r\n        selectedOptions, //set\r\n        handleClear,\r\n        options,\r\n        parentStateKey,\r\n        handleClickCheckbox,\r\n        groupHeaderLabel\r\n    } = props;\r\n\r\n    const [ open, setOpen ] = React.useState(false);\r\n    \r\n    return (\r\n        <> \r\n            <Grid \r\n                item xs={12} \r\n                container \r\n                alignItems='center' \r\n                className={classes.checkboxGroupHeader} \r\n                onClick={() => setOpen(!open)}\r\n                >\r\n                {open ? \r\n                    <ExpandMore className={classes.menuOpenIcon}/> : \r\n                    <ChevronRight className={classes.menuOpenIcon}/>\r\n                }\r\n                {groupHeaderLabel}\r\n            </Grid>\r\n\r\n            {\r\n                open ?\r\n\r\n                <Grid item xs={12} className={classes.formGroupWrapper}>\r\n                    {\r\n                        selectedOptions.size ?\r\n\r\n                        <Grid item container cs={12} justify='flex-start' className={classes.multiSelectHeader}>\r\n                            <span style={{marginRight: '8px'}}>{selectedOptions.size} Selected </span>\r\n                            <Link component='button' onClick={handleClear}>Reset</Link>\r\n                        </Grid> : ''\r\n                    }                                \r\n                    \r\n                    <FormGroup>\r\n                        {options.map((e, i) => (\r\n                            <Grid item xs={12} key={i}>\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Checkbox \r\n                                            color='primary' \r\n                                            onChange={handleClickCheckbox} \r\n                                            className={classes.checkbox} \r\n                                            size='small'\r\n                                            name={parentStateKey + '!!' + e}\r\n                                            checked={selectedOptions.has(e)}\r\n                                        />\r\n                                    }\r\n                                    label={e}\r\n                                    classes={{\r\n                                        root: classes.formControlLabelRoot,\r\n                                        label: classes.formControlLabelLabel\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n                        ))}\r\n                    </FormGroup>\r\n                </Grid>\r\n\r\n                : ''\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(MultiCheckboxDrowndown);\r\n\r\n\r\n","const validation = {\r\n    depth: {\r\n        depthOneIsLower: 'Cannot be larger than end',\r\n        depthOneOutOfBounds: 'Data ends at $',\r\n        depthTwoOutOfBounds: 'Data begins at $',\r\n        negative: 'Cannot be negative'\r\n    },\r\n\r\n    date: {\r\n        dateOneIsLater: 'Cannot be after end',\r\n        dateOneOutOfBounds: 'Data ends at $',\r\n        dateTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lat: {\r\n        latOneIsHigher: 'Cannot be larger than end',\r\n        latOneOutOfBounds: 'Data ends at $',\r\n        latTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lon: {\r\n        lonOneIsHigher: 'Cannot be larger than end',\r\n        lonOneOutOfBounds: 'Data ends at $',\r\n        lonTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    type: {\r\n        dataIsIrregular: '$ is not available for sparse data',\r\n        dateRangeRequired: '$ requires a range of dates',\r\n        depthRangeRequired: '$ requires a range of depths',\r\n        surfaceOnlyDataset: '$ contains only surface data',\r\n        irregularOnly: 'Sparse map is only available for sparse data',\r\n        dataSizeTooLarge: 'Data set is too large for this visualization type.',\r\n        webGLContextLimit: 'Rendering limit exceeded for plots. Please delete one or more.'\r\n    },\r\n\r\n    generic: {\r\n        invalid: 'Invalid input',\r\n        dataSizeWarning: 'Wait time and application performance may be poor due to size of data.',\r\n        dataSizePrevent: 'Data set is too large. Please reduce date range or area size.',\r\n        variableMissing: 'Please select a variable',\r\n        vizTypeMissing: 'Please select a visualization type',\r\n        guestMaximumReached: 'Guests are limited to creating 10 plots per day. Please log in or register.'\r\n    }\r\n}\r\n\r\nexport default validation;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Close } from '@material-ui/icons';\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, Table, TableRow, TableCell, TableBody, Typography } from '@material-ui/core';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nimport { variableFetch } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        width: '700px',\r\n        // zIndex: 3000\r\n    },\r\n\r\n    closeIcon: {\r\n        display: 'inline',\r\n        float: 'right',\r\n        cursor: 'pointer'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.variableDetails\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    variableFetch\r\n}\r\n\r\nconst VariableDetailsDialog = (props) => {\r\n    const { data, classes, variableFetch, variableDetailsID, handleSetVariableDetailsID } = props;\r\n\r\n    React.useEffect(() => {\r\n        variableFetch(variableDetailsID);\r\n    }, [variableDetailsID]);\r\n\r\n    const handleClose = (e) => {\r\n        e.stopPropagation();\r\n        handleSetVariableDetailsID(null);\r\n        variableFetch(null);\r\n    }\r\n\r\n    return variableDetailsID ? (\r\n        <Dialog\r\n            // style={{zIndex: 5000}}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            open={Boolean(variableDetailsID)}\r\n            onClose={handleClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >            \r\n            <DialogTitle>{data ? data.Long_Name : <Skeleton/>} <Close className={classes.closeIcon} color='primary' onClick={handleClose}/></DialogTitle>\r\n            <DialogContent>\r\n                {\r\n                    data ? \r\n                        <>\r\n                        <DialogContentText>\r\n                            {data.Comment ? data.Comment : ''}\r\n                        </DialogContentText>\r\n                        \r\n                        <Table size='small'>\r\n                            <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell>Dataset</TableCell>\r\n                                        <TableCell title={data.Dataset_Name}>{data.Dataset_Name.length > 25 ? data.Dataset_Name.slice(0,23) + '...' : data.Dataset_Name}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Table Name</TableCell>\r\n                                        <TableCell title={data.Table_Name}>{data.Table_Name > 25 ? data.Table_Name.slice(0,23) + '...' : data.Table_Name}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Source</TableCell>\r\n                                        <TableCell title={data.Data_Source}>{data.Data_Source > 25 ? data.Data_Source.slice(0,23) + '...' : data.Data_Source}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Distributor</TableCell>\r\n                                        <TableCell title={data.Distributor}>{data.Distributor.length > 25 ? data.Distributor.slice(0,23) + '...' : data.Distributor}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Sensor</TableCell>\r\n                                        <TableCell>{data.Sensor}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Spatial Resolution</TableCell>\r\n                                        <TableCell>{data.Spatial_Resolution}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Resolution</TableCell>\r\n                                        <TableCell>{data.Temporal_Resolution}</TableCell>\r\n                                    </TableRow>\r\n                                    \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Coverage Begin</TableCell>\r\n                                        <TableCell>{data.Time_Min ? data.Time_Min.slice(0,10) : 'Irregular'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Coverage End</TableCell>\r\n                                        <TableCell>{data.Time_Max ? data.Time_Max.slice(0,10) : 'Irregular'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lat Coverage Begin</TableCell>\r\n                                        <TableCell>{`${data.Lat_Min}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell>Lat Coverage End</TableCell>\r\n                                        <TableCell>{`${data.Lat_Max}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lon Coverage Begin</TableCell>\r\n                                        <TableCell>{`${data.Lon_Min}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lon Coverage End</TableCell>\r\n                                        <TableCell>{`${data.Lon_Max}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Depth Coverage Begin</TableCell>\r\n                                        <TableCell>{data.Depth_Max ? `${data.Depth_Min}(m)` : 'Surface Only'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Depth Coverage End</TableCell>\r\n                                        <TableCell>{data.Depth_Max ? `${data.Depth_Max}(m)` : 'Surface Only'}</TableCell>\r\n                                    </TableRow>\r\n                        \r\n        \r\n                                    {data.Variable_Min !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Minimum Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Min}</TableCell>\r\n                                        </TableRow> : ''                      \r\n                                    }\r\n        \r\n                                    {data.Variable_Max !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Maximum Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Max}</TableCell>\r\n                                        </TableRow> : ''                       \r\n                                    }\r\n        \r\n                                    {data.Variable_Mean !== undefined ? \r\n                                        <TableRow>\r\n                                            <TableCell>Mean Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Mean}</TableCell>\r\n                                        </TableRow> : ''                      \r\n                                    }\r\n        \r\n                                    {data.Variable_Std !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Standard Deviation({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Std}</TableCell>\r\n                                        </TableRow> : ''                       \r\n                                    }\r\n                            </TableBody>\r\n                        </Table> </> \r\n                        \r\n                        : \r\n                        \r\n                        <>\r\n                            <Typography variant='h1'> <Skeleton/> </Typography>\r\n                            <Skeleton width={500} height={600}></Skeleton>\r\n                        </>\r\n                        }\r\n                    </DialogContent>            \r\n        </Dialog>\r\n    ) : ''\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VariableDetailsDialog));","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nconst mapTemporalResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [temporalResolutions.threeMinutes] : 1,\r\n        [temporalResolutions.sixHourly] : 1,\r\n        [temporalResolutions.daily] : 1,\r\n        [temporalResolutions.weekly] : 7,\r\n        [temporalResolutions.monthly] : 30,\r\n        [temporalResolutions.annual] : 365,\r\n        [temporalResolutions.irregular] : null,\r\n        [temporalResolutions.monthlyClimatology]: 30,\r\n        [temporalResolutions.threeDay]: 3,\r\n        [temporalResolutions.eightDayRunning]: 8,\r\n        [temporalResolutions.eightDays]: 8\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapTemporalResolutionToNumber;","const utcDateStringToLocal = (utcString) => {\r\n    let date = new Date(utcString);\r\n    let utcYear = date.getUTCFullYear();\r\n    let utcMonth = date.getUTCMonth();\r\n    let utcDate = date.getUTCDate();\r\n\r\n    let newDate = new Date();\r\n    newDate.setFullYear(utcYear, utcMonth, utcDate);\r\n    return newDate;\r\n}\r\n\r\nexport default utcDateStringToLocal;","import visualizationSubTypes from '../Enums/visualizationSubTypes';\r\n\r\nexport default (charts) => {\r\n    let count = 0;\r\n    charts.forEach(chart => {\r\n        if(chart.subType === visualizationSubTypes.heatmap) count ++;\r\n        if(chart.subType === visualizationSubTypes.sparse){\r\n            count ++;\r\n            if(chart.data.variableValues.length > 10000) count +=3;\r\n        }\r\n        if(chart.subType === visualizationSubTypes.depthProfile && chart.data.variableValues.length > 10000) count ++;\r\n        if(chart.subType === visualizationSubTypes.timeSeries && chart.data.variableValues.length > 10000) count ++;\r\n\r\n    })\r\n    return count;\r\n}","// Select viz type and create viz button\r\n\r\nimport React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Paper, Grid, MenuItem, FormControl, InputLabel, Button, Tooltip } from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    vizTypeSelectFormControl: {\r\n        width: '100%',\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent'\r\n      }\r\n    },\r\n\r\n    vizTypeMenu: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n  \r\n    vizTypeMenuItem: {\r\n      '&:hover': {backgroundColor: colors.greenHover}\r\n    },\r\n\r\n    visualizeButton: {\r\n        textTransform: 'none',\r\n        height: '56px',\r\n        borderRadius: 0,\r\n        backgroundColor: colors.backgroundGray,\r\n        color: theme.palette.primary.main,\r\n        fontVariant: 'normal',\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent'\r\n      },\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover,\r\n              color: 'white'\r\n          }\r\n    },\r\n\r\n    vizButtonTooltip: {\r\n        color: 'yellow'\r\n    },\r\n});\r\n\r\nconst ChartControl = (props) => {\r\n    const { \r\n        classes,\r\n        overrideDisabledStyle,\r\n        heatmapMessage,\r\n        contourMessage,\r\n        sectionMapMessage,\r\n        histogramMessage,\r\n        timeSeriesMessage,\r\n        depthProfileMessage,\r\n        sparseMapMessage,\r\n        visualizeButtonTooltip,\r\n        disableVisualizeMessage,\r\n        selectedVizType,\r\n        handleChangeInputValue,\r\n        handleVisualize,\r\n        disabled\r\n    } = props;\r\n\r\n    return (\r\n        <React.Fragment>\r\n                <Grid container>\r\n                    <Grid item xs={12}>\r\n                        <FormControl variant='filled' className={classes.vizTypeSelectFormControl}>\r\n                            <InputLabel shrink htmlFor=\"vizSelector\" style={disabled ? {color: 'rgba(0,0,0,.38)'} : {}}>Select Chart Type</InputLabel>\r\n                            <MUISelect\r\n                                disabled={disabled}\r\n                                className={classes.vizTypeSelectFormControl}\r\n                                style={overrideDisabledStyle}\r\n                                value={selectedVizType}\r\n                                variant='filled'\r\n                                // onChange={handleChangeInputValue}\r\n                                onChange={handleChangeInputValue}\r\n                                inputProps={{\r\n                                    name: 'selectedVizType',\r\n                                    id: 'vizSelector',\r\n                                    variant: 'filled'\r\n                                }}\r\n                                MenuProps={{\r\n                                    MenuListProps: {\r\n                                        className: classes.vizTypeMenu\r\n                                    }\r\n                                }}\r\n                                >\r\n                                {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Time and Space Plots</MenuItem>}\r\n                            </MUISelect>\r\n                        </FormControl>\r\n                    </Grid>\r\n\r\n                    <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                        <Grid item xs={12}>\r\n                            <Button\r\n                                className={classes.visualizeButton}\r\n                                variant='contained'\r\n                                onClick={() => handleVisualize()}\r\n                                disabled={Boolean(disableVisualizeMessage) || !selectedVizType || disabled}\r\n                                fullWidth\r\n                            >\r\n                                Create Visualization\r\n                            </Button>\r\n                        </Grid>\r\n                    </Tooltip>\r\n\r\n                </Grid>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ChartControl);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Select, { components } from 'react-select';\r\n// import * as JsSearch from 'js-search';\r\nimport { VariableSizeList as ReactWindowList } from \"react-window\";\r\n\r\nimport { Paper, ButtonGroup, Grid, IconButton, Icon, ListItem, MenuItem, Typography, Drawer, TextField, FormControl, InputLabel, Button, Tooltip} from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\nimport { Settings, Fastfood, ShowChart, Search, Cached, LibraryBooks, ArrowRight, ChevronLeft, ChevronRight, InsertChartOutlined, Language, Delete, ShoppingCart, Info, DirectionsBoat } from '@material-ui/icons';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\nimport validation from '../../Enums/validation';\r\nimport VariableDetailsDialog from './VariableDetailsDialog';\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport ChartControl from './ChartControl';\r\n\r\nconst navDrawerWidth = 320;\r\n\r\nconst errorHeightAdjust = 23;\r\n\r\nconst styles = theme => ({\r\n    drawer: {\r\n        width: navDrawerWidth,\r\n        top: 32,\r\n        bottom: 'auto',\r\n        overflow: 'visible'\r\n    },\r\n\r\n    drawerPaper: {\r\n        width: navDrawerWidth,\r\n        height: 'auto',\r\n        top: 'calc(50% - 270px)',\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    drawerPaperError1: {\r\n        height: `${540 + errorHeightAdjust}px`\r\n    },\r\n\r\n    drawerPaperError2: {\r\n        height: `${540 + errorHeightAdjust * 2}px`\r\n    },\r\n\r\n    drawerPaperError3: {\r\n        height: `${540 + errorHeightAdjust * 3}px`\r\n    },\r\n\r\n    drawerPaperError4: {\r\n        height: `${540 + errorHeightAdjust * 4}px`\r\n    },\r\n\r\n    drawerPaperError5: {\r\n        height: `${540 + errorHeightAdjust * 5}px`\r\n    },\r\n\r\n  openPanelChevron: {\r\n    position: 'fixed',\r\n    left: '5px',\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  closePanelChevron: {\r\n    position: 'fixed',\r\n    left: navDrawerWidth + 5,\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  groupedButtons: {\r\n      width: '25%',\r\n      border: '1px solid #313131',\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c'\r\n  },\r\n\r\n  controlPanelForm: {\r\n      marginTop: theme.spacing(1)\r\n  },\r\n\r\n  tableStatsButton: {\r\n      borderRadius: 0,\r\n      paddingTop: '11px',\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n    formGridItem: {\r\n        borderLeft: '1px solid #313131',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  vizTypeSelectFormControl: {\r\n      width: '100%',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    }\r\n  },\r\n\r\n  depressed: {\r\n      boxShadow: 'inset 1px 1px 5px #1c1c1c'\r\n  },\r\n\r\n  padLeft: {\r\n      padding: '6px 0 2px 7px'\r\n  },\r\n\r\n  visualizeButton: {\r\n      height: '56px',\r\n      borderRadius: 0,\r\n      backgroundColor: colors.backgroundGray,\r\n      color: theme.palette.primary.main,\r\n      fontVariant: 'normal',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    },\r\n      '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n            color: 'white'\r\n        }\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  vizButtonTooltip: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  datePickerInputAdornment: {\r\n      padding: 0\r\n  },\r\n\r\n  clearChartsButton: {\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c',\r\n      width: '100%',\r\n      borderRight: '1px solid #313131'\r\n\r\n  },\r\n\r\n  resetSPParamsButton: {\r\n    borderRadius: 0,\r\n    backgroundColor: '#3c3c3c',\r\n    width: '100%',\r\n  },\r\n\r\n  datePicker: {\r\n      width: '100%'\r\n  },\r\n\r\n  vizTypeMenu: {\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n  vizTypeMenuItem: {\r\n    '&:hover': {backgroundColor: colors.greenHover}\r\n  },\r\n\r\n  dataBitesContainer: {\r\n    position: 'fixed',\r\n    right: '12px',\r\n    bottom: '12px',\r\n    height: '400px',\r\n    width: '260px',\r\n    backgroundColor: colors.backgroundGray,\r\n    boxShadow: '2px 2px  2px 2px #242424',\r\n    paddingTop: '12px'\r\n  },\r\n\r\n  bottomControlContainer: {\r\n    position: 'fixed',\r\n    height: '50px',\r\n    width: '300px',\r\n    bottom: '8px',\r\n    right: 'calc(50% - 150px)',\r\n    backgroundColor: colors.backgroundGray,\r\n    boxShadow: '2px 2px  2px 2px #242424',\r\n    paddingTop: '12px'\r\n  }\r\n});\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts,\r\n    cart: state.cart,\r\n    cruiseList: state.cruiseList\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst getDatePlaceholder = (date) => {\r\n    if(isNaN(new Date(date)).valueOf()) return 'yyyy-MM-dd';\r\n    \r\n    let month  = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n    let year = date.getFullYear();\r\n    return [year, month < 10 ? '0' + month : month, day < 10 ? '0' + day : day].join('-');\r\n}\r\n\r\nconst groupHeaderHeight = 37;\r\nconst height = 35;\r\n\r\nconst reactWindowListRef = React.createRef();\r\nconst selectRef = React.createRef();\r\n\r\nclass MenuList extends Component {\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n      if(reactWindowListRef.current) reactWindowListRef.current.resetAfterIndex(0);\r\n      if(!(this.props.children && this.props.children.length)) return;\r\n      let scrollOffset = 0;\r\n      let foundFocus = false;\r\n      this.props.children.forEach(child => {\r\n        if(foundFocus) return;\r\n\r\n        let count = groupHeaderHeight;\r\n        let groupHasFocus= false;\r\n        for(let i = 0; i < child.props.children.length; i++){\r\n          if(child.props.children[i].props.isFocused) {\r\n            foundFocus = true;\r\n            groupHasFocus = true;\r\n            break;\r\n          }\r\n          count += 37.6;\r\n        }\r\n\r\n        if(groupHasFocus) scrollOffset += count;\r\n        else scrollOffset += 37.6;\r\n      })\r\n      if(foundFocus) reactWindowListRef.current.scrollTo(scrollOffset > 150 ? scrollOffset - 150 : 0);\r\n    }\r\n\r\n    render() {\r\n        const { options, children, getValue } = this.props;\r\n\r\n        if(!children || !children.length) return '';\r\n        const [value] = getValue();\r\n        const initialOffset = options.indexOf(value) * height;\r\n        const groupHeights = children.map(child => {\r\n          return child.props.children.some(grandChild => grandChild.props.isFocused) ? child.props.children.length * 37.6 + groupHeaderHeight : groupHeaderHeight;\r\n        });\r\n        const totalHeight = groupHeights.reduce((acc, cur) => acc + cur, 0);\r\n        const estimatedItemSize = totalHeight / children.length;\r\n        const getItemSize = index => groupHeights[index];\r\n\r\n        return (\r\n            <ReactWindowList\r\n                height={totalHeight < 400 ? totalHeight :  400}\r\n                estimatedItemSize={estimatedItemSize}\r\n                itemCount={children.length}\r\n                itemSize={getItemSize}\r\n                initialScrollOffset={initialOffset || 0}\r\n                ref={reactWindowListRef}\r\n            >\r\n                {({ index, style }) => <div style={{...style}}>{children[index]}</div>}\r\n            </ReactWindowList>\r\n        );\r\n    }\r\n}\r\n\r\nclass Group extends Component {\r\n    render() {\r\n        const hasFocus = this.props.children.some(element => element.props.isFocused);\r\n        const sensor = this.props.children[0].props.data.data.Sensor;\r\n\r\n      return (\r\n          <React.Fragment>\r\n            <CustomHeading \r\n              {...this.props.headingProps} \r\n              headingLabel={this.props.data.label} \r\n              firstChild={this.props.children[0].props.data}\r\n              hasFocus={hasFocus}\r\n              sensor={sensor}\r\n              tableName={this.props.children[0].props.data.data.Table_Name}\r\n              selectProps={this.props.selectProps}\r\n            />\r\n            <div hidden={!hasFocus}>\r\n              {this.props.children.map(child => child)}\r\n            </div>\r\n          </React.Fragment>\r\n        );\r\n    }    \r\n}\r\n\r\nconst customHeadingStyles = (theme) => ({\r\n    customHeading: {\r\n        backgroundColor: 'rgba(0,0,0,.5)',\r\n        height: groupHeaderHeight,\r\n        '&:hover': {\r\n            // backgroundColor: 'rgba(122,67,0,.5)',\r\n            backgroundColor: colors.greenHover\r\n        },\r\n        boxShadow: '0px 1px 1px 1px #242424'\r\n    },\r\n\r\n    icon: {\r\n        marginRight: '10px',\r\n        width: '30px'\r\n    },\r\n\r\n    typography: {\r\n        width: '650px',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    }\r\n})\r\n\r\nconst _CustomHeading = props => {\r\n    const { classes, sensor, selectProps } = props;\r\n    let iconClass;\r\n\r\n    if(sensor === 'Satellite') iconClass = 'fa-satellite';\r\n    else if(sensor === 'Blend') iconClass = 'fa-laptop';\r\n    else iconClass = 'fa-ship';\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ListItem \r\n          button \r\n          alignItems='center' \r\n          onClick={() => selectRef.current.select.setState({focusedOption: props.hasFocus ? null : props.firstChild})}\r\n          className={classes.customHeading}\r\n        >\r\n            <Icon fontSize='small' color='inherit' className={`fas ${iconClass} ${classes.icon}`}></Icon>\r\n        <Typography className={classes.typography}>\r\n            {props.headingLabel.length > 70 ? props.headingLabel.slice(0,67) + '...' : props.headingLabel}\r\n        </Typography>\r\n\r\n        { selectProps.datasets[props.headingLabel] &&\r\n            <Tooltip title='Dataset Info' placement='left'>\r\n                <IconButton \r\n                    color='inherit' \r\n                    onClick={(e) => {\r\n                        window.open(\r\n                            window.location.protocol + \r\n                            '//' + \r\n                            window.location.host + \r\n                            '/catalog/datasets/' + \r\n                            selectProps.datasets[props.headingLabel].Dataset_Name);\r\n                        e.stopPropagation();\r\n                    }}\r\n                >\r\n                    <Info/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        }\r\n\r\n        {\r\n            selectProps.cart[props.headingLabel] ?\r\n            <Tooltip title='This Dataset Is on Your Favorites List' placement='right'>\r\n                <ShoppingCart/>\r\n            </Tooltip>\r\n             :\r\n            ''\r\n        }\r\n        </ListItem>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\nconst CustomHeading = withStyles(customHeadingStyles)(_CustomHeading);\r\n\r\n// Replace react-select dropdown area with material version\r\nconst DropdownIndicator = (props) => {\r\n    return (\r\n    <components.DropdownIndicator {...props}>\r\n        <ArrowRight/>\r\n    </components.DropdownIndicator>\r\n    );\r\n};\r\n\r\nconst Menu = (props) => {\r\n    return (\r\n        <components.Menu\r\n        {...props}\r\n        className='react-select-menu-cmap'\r\n        >\r\n\r\n        </components.Menu>\r\n    )\r\n}\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst GroupHeading = (props) => '';\r\n\r\nconst SingleValue = (props) => {\r\n    return (\r\n        <components.SingleValue\r\n            {...props}\r\n            children={null}\r\n        >\r\n            {props.data.label}\r\n        </components.SingleValue>\r\n    )\r\n}\r\n\r\nconst optionLabelSpanStyleLeft = {\r\n    display: 'inline-block',\r\n    boxSizing: 'border-box',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    fontSize: '15px',\r\n    marginRight: '32px',\r\n    width: 'calc(60% - 32px)',\r\n    textAlign: 'left'\r\n}\r\n\r\nconst optionLabelSpanStyleMid = {\r\n    ...optionLabelSpanStyleLeft,\r\n    marginRight: '24px',\r\n    width: 'calc(15% - 24px)'\r\n}\r\n\r\nconst optionLabelSpanStyleRight = {\r\n    ...optionLabelSpanStyleLeft,\r\n    textAlign: 'right',\r\n    marginRight: '0px',\r\n    width: '25%'\r\n}\r\n\r\nconst formatOptionLabel = (option, meta) => {\r\n    return (\r\n        <React.Fragment>\r\n            <span style={optionLabelSpanStyleLeft}>{option.label}</span>\r\n            <span style={optionLabelSpanStyleMid}>{option.data.Spatial_Resolution === 'Irregular' ? 'Irregular' : 'Gridded'}</span>\r\n            <span style={optionLabelSpanStyleRight}>{option.data.Data_Source}</span>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst ValueContainer = (props) => {\r\n    return (\r\n        <components.ValueContainer {...props}>\r\n            <Search style={{ position: \"absolute\", left: 6, color: colors.primary }}/>\r\n            {props.children}\r\n        </components.ValueContainer>\r\n    )\r\n}\r\n\r\nconst controlPanelModes = {\r\n    charts: 'charts',\r\n    cruises: 'cruises',\r\n    bites: 'bites',\r\n    bottomControl: 'bottomControl'\r\n}\r\n\r\nclass VizControlPanel extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        // var search = new JsSearch.Search('ID');\r\n        // search.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\r\n        // search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        // search.addIndex('Variable');\r\n        // search.addIndex('Unit');\r\n        // search.addIndex('Make');\r\n        // search.addIndex('Sensor');\r\n        // search.addIndex('Data_Source');\r\n        // search.addIndex('Process_Level');\r\n        // search.addIndex('Long_Name');\r\n        // search.addIndex('Keywords');\r\n        // search.addIndex('Table_Name');\r\n        // search.addIndex('Dataset_Name');\r\n        // search.addIndex('Study_Domain');\r\n        // search.addIndex('Spatial_Resolution');\r\n        // search.addIndex('Temporal_Resolution');\r\n        // search.addIndex('Chief_Name');\r\n        // search.addIndex('Name');\r\n        // search.addIndex('Nickname');\r\n        // search.addIndex('Ship_Name');\r\n\r\n        // if(props.catalog) search.addDocuments(props.catalog);\r\n        // if(props.cruiseList) search.addDocuments(props.cruiseList);\r\n\r\n        this.state = {\r\n            VariableDetailsDialogIsOpen: false,\r\n            // search,\r\n            searchField: '',\r\n            showControlPanel: true,\r\n            lastSelectedFieldId: null,\r\n            showChartControl: false,\r\n            showDataBites: false,\r\n            showBottomControl: false,\r\n            controlPanelMode: controlPanelModes.bottomControl\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.catalog && prevProps.catalog.length) && (this.props.catalog && this.props.catalog.length)){\r\n            this.state.search.addDocuments(this.props.catalog);\r\n            // this.setState({search: this.state.search});\r\n        }\r\n\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);\r\n            // this.setState({search: this.state.search});\r\n        }\r\n    }\r\n\r\n    handleOpenControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: true})\r\n    }\r\n\r\n    handleCloseControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: false})\r\n    }      \r\n    \r\n    handleVariableDetailsDialogClose = () => {\r\n        this.setState({...this.state, VariableDetailsDialogIsOpen: false})\r\n    }\r\n\r\n    handleVariableDetailsDialogOpen = (event) => {\r\n        event.stopPropagation();\r\n        this.setState({...this.state, VariableDetailsDialogIsOpen: true});\r\n    }\r\n\r\n    getSelectOptionsFromCatalogItems = (items) => {\r\n        const { cart } = this.props;\r\n        var options = {};\r\n        let count = 0;\r\n\r\n        items.forEach(item => {\r\n            if(item.Visualize == 1) {\r\n                if(!options[item.Dataset_Name]){\r\n                    options[item.Dataset_Name] = {\r\n                        label: item.Dataset_Name,\r\n                        options: []\r\n                    }\r\n                }\r\n                // TODO use css textoverflow for this if possible\r\n                options[item.Dataset_Name].options.push({\r\n                    value: item.Variable,\r\n                    label: item.Long_Name.length < 80 ? item.Long_Name : item.Long_Name.slice(0,78) + '...',\r\n                    data: item\r\n                })\r\n            }\r\n        });\r\n\r\n        let sortedOptions = Object.values(options).sort((opt1, opt2) => {\r\n            if(cart[opt1.label] && cart[opt2.label]) return opt1.label < opt2.label ? -1 : 1;\r\n            else if(cart[opt1.label]) return -1;\r\n            else if (cart[opt2.label]) return 1;\r\n            else return opt1.label < opt2.label ? -1 : 1;\r\n        })\r\n\r\n        return sortedOptions;\r\n    }\r\n\r\n    estimateCsvSize = (datasetName) => {\r\n        // let members = [];\r\n        let count = 0;\r\n        this.props.catalog.forEach((member, i) => {\r\n            if(member.Dataset_Name === datasetName){\r\n                count += parseInt(member.Variable_Count) || 0;\r\n                // members.push(member);\r\n            }\r\n        })\r\n        return count;\r\n    }\r\n\r\n    handleResetSPParams = () => {\r\n        this.props.resetSPParams();\r\n        this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') {\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n\r\n        if(action.action === 'escape-clear'){\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n        // if(action.action ==='set-value') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, fields, depth1, depth2, selectedVizType } = this.props;\r\n        if(!fields) return 0;\r\n        if(fields.data.Spatial_Resolution === spatialResolutions.irregular) return 0;\r\n        if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return 0;\r\n\r\n        const date1 = Date.parse(dt1);\r\n        const date2 = Date.parse(dt2);\r\n        \r\n        const dayDiff = (date2 - date1) / 86400000;\r\n        \r\n        const res = mapSpatialResolutionToNumber(fields.data.Spatial_Resolution);\r\n        \r\n        const dateCount = Math.floor(dayDiff / mapTemporalResolutionToNumber(fields.data.Temporal_Resolution)) || 1;\r\n        const depthCount = depthUtils.count(fields, depth1, depth2) || 1;\r\n        \r\n        const latCount = (lat2 - lat1) / res;\r\n        const lonCount = (lon2 - lon1) / res;\r\n\r\n        const pointCount = lonCount * latCount * depthCount * dateCount;\r\n        return pointCount;\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth1) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.fields.data.Depth_Max)) return validation.depth.depthOneOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Max).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth2) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth2) < parseFloat(this.props.fields.data.Depth_Min)) return validation.depth.depthTwoOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Min).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkStartDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt1)).valueOf() || !this.props.dt1) return 'Start date is invalid';\r\n    }\r\n\r\n    checkEndDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt2)).valueOf() || !this.props.dt1) return 'End date is invalid';\r\n    }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.dt1 > this.props.dt2) return validation.date.dateOneIsLater;\r\n        if(this.props.dt1 > this.props.fields.data.Time_Max) return validation.date.dateOneOutOfBounds.replace('$', this.props.fields.data.Time_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.dt2 < this.props.fields.data.Time_Min) return validation.date.dateTwoOutOfBounds.replace('$', this.props.fields.data.Time_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) < -90 || parseFloat(this.props.lat1) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.lat2)) return validation.lat.latOneIsHigher;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.fields.data.Lat_Max)) return validation.lat.latOneOutOfBounds.replace('$', this.props.fields.data.Lat_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < -90 || parseFloat(this.props.lat2) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < parseFloat(this.props.fields.data.Lat_Min)) return validation.lat.latTwoOutOfBounds.replace('$', this.props.fields.data.Lat_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon1) < -180 || parseFloat(this.props.lon1) > 180) return validation.generic.invalid;\r\n        if(this.props.lon1 > this.props.lon2) return '';\r\n        if(parseFloat(this.props.lon1) > parseFloat(this.props.fields.data.Lon_Max)) return validation.lon.lonOneOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < -180 || parseFloat(this.props.lon2) > 180) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < parseFloat(this.props.fields.data.Lon_Min)) return validation.lon.lonTwoOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', \"Section Map\");\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        if(this.props.dt1 === this.props.dt2) return validation.type.dateRangeRequired.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', 'Depth Profile');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.props.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.props.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count(this.props.fields, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n        if(this.props.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1200000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.fields) return validation.generic.variableMissing;\r\n        if(!this.props.selectedVizType) return validation.generic.vizTypeMissing;\r\n        return ''}\r\n\r\n    handleShowChartsAndResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);\r\n        this.props.handleShowCharts();     \r\n    }\r\n\r\n    handleUpdateFields = (newValue, action) => {\r\n        this.props.updateFields(newValue);\r\n        this.setState({...this.state, searchField: '', lastSelectedFieldId: newValue ? newValue.data.ID : this.state.lastSelectedFieldId});\r\n    }\r\n    \r\n    render() {      \r\n        const { search, searchField, showControlPanel } = this.state;\r\n        \r\n        const { classes, \r\n            fields, \r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType,\r\n            catalog,\r\n            catalogRequestState,\r\n            showCharts,\r\n            handleShowGlobe,\r\n            handleChange,\r\n            handleLatLonChange,\r\n            datasets,\r\n            cruiseList\r\n        } = this.props;\r\n\r\n\r\n        const options = searchField && catalog ? this.getSelectOptionsFromCatalogItems(search.search(searchField)) \r\n            : catalog ? this.getSelectOptionsFromCatalogItems(catalog) \r\n            : []\r\n\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n        var catalogMinDate = fields && utcDateStringToLocal(fields.data.Time_Min).setHours(0,0,0,0);\r\n        var catalogMaxDate = fields && utcDateStringToLocal(fields.data.Time_Max).setHours(0,0,0,0);\r\n        var zeroedDT1 = dt1.setHours(0,0,0,0);\r\n        var zeroedDT2 = dt2.setHours(0,0,0,0);\r\n        \r\n        var minDate = fields ? catalogMinDate : utcDateStringToLocal('1900-01-01').setHours(0,0,0,0);\r\n\r\n        let minDateMessage = fields && zeroedDT2 < catalogMinDate ? 'End cannot be before dataset start date' : '';\r\n        var maxDateMessage;\r\n        var maxDate;\r\n\r\n        if(!fields){\r\n            maxDate = zeroedDT2;\r\n            maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n        } else {\r\n            \r\n\r\n            if(catalogMaxDate < zeroedDT2){\r\n                maxDate = catalogMaxDate;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after dataset end date' : '';\r\n            } else {\r\n                maxDate = zeroedDT2;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n            }\r\n        }\r\n\r\n        if(fields) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDateValid(),\r\n                this.checkEndDateValid()\r\n            ];\r\n        } else validations = Array(16).fill('');\r\n\r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            minDateMessage,\r\n            maxDateMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ];\r\n\r\n        let cdvl = checkDisableVisualizeList;\r\n        let errorCount = 0;\r\n        \r\n        if(cdvl[0] || cdvl[1]) errorCount ++;\r\n        if(cdvl[2] || cdvl[3]) errorCount ++;\r\n        if(cdvl[4] || cdvl[5]) errorCount ++;\r\n        if(cdvl[7] || cdvl[9]) errorCount ++;\r\n        if(cdvl[8] || cdvl[10]) errorCount ++;\r\n\r\n        const errorSizeAdjust = errorCount > 0 ? 'drawerPaperError' + errorCount : '';\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <div>\r\n                <VariableDetailsDialog\r\n                    open={this.state.VariableDetailsDialogIsOpen}\r\n                    onClose={this.handleVariableDetailsDialogClose}\r\n                    data={fields && fields.data}\r\n                />\r\n\r\n                { showControlPanel ? \r\n\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleCloseControlPanel}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                :\r\n                    \r\n                        <IconButton \r\n                            className={classes.openPanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleOpenControlPanel}>\r\n                            <ChevronRight />\r\n                        </IconButton>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper} ${classes[errorSizeAdjust]}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n\r\n                    <ButtonGroup>\r\n                        <Tooltip title='Show Chart Control' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.charts && classes.depressed}`} \r\n                                // onClick={() => this.setState({...this.state, showChartControl: !this.state.showChartControl})}\r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.charts})}\r\n                                color='inherit'\r\n                            >\r\n                                <ShowChart/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        \r\n                        <Tooltip title='Show Cruise Control' placement='top'>\r\n                            <IconButton \r\n                                color='inherit' \r\n                                // onClick={this.props.handleShowCruiseControl}\r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.cruises})}\r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.cruises && classes.depressed}`} \r\n                            >\r\n                                <DirectionsBoat/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title='Show Data Bytes' placement='top'>\r\n                            <IconButton \r\n                                color='inherit' \r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.bites})} \r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.bites && classes.depressed}`} \r\n                            >\r\n                                <Fastfood/>\r\n                            </IconButton>\r\n                        </Tooltip> \r\n\r\n                        <Tooltip title='Show Bottom Control' placement='top'>\r\n                            <IconButton \r\n                                color='inherit' \r\n                                onClick={() => this.setState({...this.state, controlPanelMode: controlPanelModes.bottomControl})} \r\n                                className={`${classes.groupedButtons} ${this.state.controlPanelMode === controlPanelModes.bottomControl && classes.depressed}`} \r\n                            >\r\n                                <Settings/>\r\n                            </IconButton>\r\n                        </Tooltip>                          \r\n                    </ButtonGroup>\r\n\r\n                    {/* <ButtonGroup>\r\n                        <Tooltip title='Show Globe' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${!showCharts && classes.depressed}`} \r\n                                onClick={handleShowGlobe}\r\n                                color='inherit'\r\n                            >\r\n                                <Language/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        \r\n                        <Tooltip title='Show Charts' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${showCharts && classes.depressed}`}\r\n                                onClick={this.handleShowChartsAndResize}\r\n                                color='inherit'\r\n                            >\r\n                                <InsertChartOutlined/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </ButtonGroup>\r\n                    \r\n                    <Grid container>\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Clear Charts' placement='bottom'>\r\n                                <IconButton color='inherit' onClick={this.props.clearCharts} className={classes.clearChartsButton}>\r\n                                    <Delete/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Reset Parameters' placement='right'>\r\n                                <IconButton color='inherit' onClick={this.handleResetSPParams} className={classes.resetSPParamsButton}>\r\n                                    <Cached/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid> */}\r\n\r\n                    <form>\r\n                        <Grid container>\r\n                            <Grid item xs={10}>\r\n                                    <Select\r\n                                        formatOptionLabel={formatOptionLabel}\r\n                                        handleVariableDetailsDialogOpen={this.handleVariableDetailsDialogOpen}\r\n                                        isLoading = {catalogRequestState === states.inProgress}\r\n                                        onAutoSuggestChange = {this.onAutoSuggestChange}\r\n                                        datasets = {datasets}\r\n                                        cart={this.props.cart}\r\n                                        \r\n                                        components={{\r\n                                            IndicatorSeparator:'',\r\n                                            DropdownIndicator,\r\n                                            GroupHeading,\r\n                                            Group,\r\n                                            Option,\r\n                                            MenuList,\r\n                                            SingleValue,\r\n                                            Menu,\r\n                                            ValueContainer\r\n                                        }}\r\n                                        lastSelectedFieldId={this.state.lastSelectedFieldId}\r\n                                        escapeClearsValue\r\n                                        ref={selectRef}\r\n                                        onInputChange={this.onAutoSuggestChange}\r\n                                        filterOption={null}\r\n                                        // menuIsOpen={true}\r\n                                        className={classes.variableSelect}\r\n                                        isClearable\r\n                                        inputValue={this.state.searchField}\r\n                                        name=\"fields\"\r\n                                        label=\"Variables\"\r\n                                        options={options}\r\n                                        onChange={this.handleUpdateFields}\r\n                                        value={fields}\r\n                                        placeholder={\r\n                                            this.state.controlPanelMode === controlPanelModes.cruises ? 'Search Cruises' : \r\n                                            this.state.controlPanelMode === controlPanelModes.bites ? 'Explore Bites' : \r\n                                            \"Search Catalog\"\r\n                                        }\r\n                                        styles={{\r\n                                            menu: provided => ({\r\n                                                ...provided, \r\n                                                zIndex: 1300, \r\n                                                width: '980px',\r\n                                                maxWidth: '90vw',\r\n                                                borderRadius: '4px',\r\n                                                boxShadow: '2px 2px 2px 2px #242424',\r\n                                                overflow: 'hidden',\r\n                                                backgroundColor: 'rgba(0,0,0,.5)',\r\n                                                backdropFilter: 'blur(5px)',\r\n                                            }),\r\n\r\n                                            valueContainer: provided => ({\r\n                                                ...provided,\r\n                                                padding: '0 0 0 34px',\r\n                                                fontWeight: 100\r\n                                            }),\r\n\r\n                                            input: provided => ({...provided,\r\n                                                color: 'white',\r\n                                                fontFamily: '\"Lato\", sans-serif'\r\n                                            }),\r\n\r\n                                            control: provided => ({...provided,\r\n                                                backgroundColor: colors.backgroundGray,\r\n                                                border: 'none',\r\n                                                borderBottom: '1px solid #333333',\r\n                                                borderRadius: 0,\r\n                                                '&:hover': { borderColor: 'white' },\r\n                                                '&:focus-within': { borderColor: colors.primary },\r\n                                                height: '56px'\r\n                                            }),\r\n\r\n                                            placeholder: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                fontSize: '14px',\r\n                                                fontWeight: 300\r\n                                            }),\r\n\r\n                                            noOptionsMessage: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                backgroundColor: colors.backgroundGray\r\n                                            }),\r\n\r\n                                            option: (provided, { data, isFocused }) => {\r\n                                                return ({...provided,\r\n                                                    fontWeight: 400,\r\n                                                    fontSize: '16px',\r\n                                                    backgroundColor: 'transparent',\r\n                                                    color: isFocused ? colors.primary : 'white',\r\n                                                    '&:hover': { backgroundColor: colors.greenHover},\r\n                                            })},\r\n\r\n                                            singleValue: (provided, state) => ({...provided,\r\n                                                color: 'white',\r\n                                                fontWeight: 400,\r\n                                                zIndex: 1290\r\n                                            })\r\n                                        }}\r\n                                        theme={theme => ({\r\n                                            ...theme,\r\n                                            colors: {\r\n                                            ...theme.colors,\r\n                                            },\r\n                                        })}\r\n                                    />\r\n                            </Grid>\r\n                            <Grid item xs={2} className={classes.tableStatsButton}>\r\n                                {\r\n                                    fields ? \r\n                                    <Tooltip placement='right' title='View Variable Summary Statistics'>\r\n                                        <IconButton \r\n                                            size='small' \r\n                                            onClick={this.handleVariableDetailsDialogOpen}                                     \r\n                                            disabled={!fields}\r\n                                        >\r\n                                            <LibraryBooks/>\r\n                                        </IconButton>\r\n                                    </Tooltip> :\r\n                                    <IconButton \r\n                                        size='small' \r\n                                        onClick={this.handleVariableDetailsDialogOpen}                                     \r\n                                        disabled={!fields}\r\n                                    >\r\n                                        <LibraryBooks/>\r\n                                    </IconButton>\r\n                                }\r\n                            </Grid>\r\n\r\n                            {\r\n                                this.state.controlPanelMode !== controlPanelModes.bites ?\r\n                                <>\r\n                                    <Grid item xs={12}>\r\n                                        <KeyboardDatePicker\r\n                                            className={classes.datePicker}\r\n                                            placeholder={getDatePlaceholder(dt1)}\r\n                                            id=\"startDate\"\r\n                                            label=\"Start Date\"\r\n                                            name=\"dt1\"\r\n                                            format='yyyy-MM-dd'\r\n                                            maxDate={maxDate}\r\n                                            // minDate={null}\r\n                                            maxDateMessage={maxDateMessage}\r\n                                            autoOk\r\n                                            value={dt1}\r\n                                            onChange={this.props.handleStartDateChange}\r\n                                            inputVariant='filled'\r\n                                            variant='inline'\r\n                                            KeyboardButtonProps={{\r\n                                                className: classes.datePickerInputAdornment\r\n                                            }}\r\n                                        />\r\n                                    </Grid>  \r\n\r\n                                    <Grid item xs={12}>\r\n                                        <KeyboardDatePicker\r\n                                            className={classes.datePicker}\r\n                                            placeholder={getDatePlaceholder(dt2)}\r\n                                            id=\"endDate\"\r\n                                            label=\"End Date\"\r\n                                            name=\"dt2\"\r\n                                            format='yyyy-MM-dd'\r\n                                            minDate={minDate}\r\n                                            // maxDate={null}\r\n                                            minDateMessage={minDateMessage}\r\n                                            autoOk\r\n                                            value={dt2}\r\n                                            onChange={this.props.handleEndDateChange}\r\n                                            inputVariant='filled'\r\n                                            variant='inline'\r\n                                            KeyboardButtonProps={{\r\n                                                className: classes.datePickerInputAdornment\r\n                                            }}\r\n                                        />\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lat1-input\"\r\n                                            error={Boolean(startLatMessage)}\r\n                                            label={\"Start Lat(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lat1}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={startLatMessage}\r\n                                            name='lat1'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lat2-input\"\r\n                                            error={Boolean(endLatMessage)}\r\n                                            label={\"End Lat(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lat2}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={endLatMessage}\r\n                                            name='lat2'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lon1-input\"\r\n                                            error={Boolean(startLonMessage)}\r\n                                            label={\"Start Lon(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lon1}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={startLonMessage}\r\n                                            name='lon1'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"lon2-input\"\r\n                                            error={Boolean(endLonMessage)}\r\n                                            label={\"End Lon(\\xB0)\"}\r\n                                            className={classes.textField}\r\n                                            value={lon2}\r\n                                            onChange={handleLatLonChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={endLonMessage}\r\n                                            name='lon2'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"depth1-input\"\r\n                                            error={Boolean(startDepthMessage)}\r\n                                            label=\"Start Depth(m)\"\r\n                                            className={classes.textField}\r\n                                            value={isNaN(Math.floor(depth1 * 1000) / 1000) ? depth1 : Math.ceil(depth1 * 1000) / 1000}\r\n                                            onChange={handleChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={startDepthMessage}\r\n                                            name='depth1'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={6} className={classes.formGridItem}>\r\n                                        <TextField\r\n                                            id=\"depth2-input\"\r\n                                            error={Boolean(endDepthMessage)}\r\n                                            label=\"End Depth(m)\"\r\n                                            className={classes.textField}\r\n                                            value={isNaN(Math.ceil(depth2 * 1000) / 1000) ? depth2 : Math.ceil(depth2 * 1000) / 1000}\r\n                                            onChange={handleChange}\r\n                                            FormHelperTextProps={{className: classes.helperText}}\r\n                                            helperText={endDepthMessage}\r\n                                            name='depth2'\r\n                                            InputProps={{className:classes.padLeft}}\r\n                                            InputLabelProps={{className:classes.padLeft}}\r\n                                        >\r\n                                        </TextField>\r\n                                    </Grid>\r\n                                </> : ''\r\n                            }\r\n\r\n                            {\r\n                                this.state.controlPanelMode === controlPanelModes.charts ?\r\n                                <ChartControl\r\n                                    fields={fields}\r\n                                    overrideDisabledStyle={overrideDisabledStyle}\r\n                                    selectedVizType={selectedVizType}\r\n                                    heatmapMessage={heatmapMessage}\r\n                                    heatmapMessage={heatmapMessage}\r\n                                    contourMessage={contourMessage}\r\n                                    sectionMapMessage={sectionMapMessage}\r\n                                    sectionMapMessage={sectionMapMessage}\r\n                                    histogramMessage={histogramMessage}\r\n                                    timeSeriesMessage={timeSeriesMessage}\r\n                                    depthProfileMessage={depthProfileMessage}\r\n                                    sparseMapMessage={sparseMapMessage}\r\n                                    visualizeButtonTooltip={visualizeButtonTooltip}\r\n                                    disableVisualizeMessage={disableVisualizeMessage}\r\n                                    selectedVizType={selectedVizType}\r\n                                    handleChange={this.props.handleChange}\r\n                                    onVisualize={this.props.onVisualize}\r\n                                    showChartControl={this.state.showChartControl}\r\n                                /> : ''\r\n                            }\r\n\r\n\r\n\r\n                            <Paper className={classes.dataBitesContainer} style={this.state.showDataBites ? {} : {display: 'none'}}>\r\n                                Data Bites\r\n                            </Paper>\r\n\r\n                            <Paper className={classes.bottomControlContainer} style={this.state.showBottomControl ? {} : {display: 'none'}}>\r\n                                Bottom Control\r\n                            </Paper>\r\n\r\n                            {/* <Grid item xs={12}>\r\n                                <FormControl variant='filled' className={classes.vizTypeSelectFormControl} disabled={!fields}>\r\n                                    <InputLabel shrink htmlFor=\"vizSelector\" >Type</InputLabel>\r\n                                    <MUISelect\r\n                                        className={classes.vizTypeSelectFormControl}\r\n                                        style={overrideDisabledStyle}\r\n                                        value={selectedVizType}\r\n                                        variant='filled'\r\n                                        onChange={this.props.handleChange}\r\n                                        inputProps={{\r\n                                            name: 'selectedVizType',\r\n                                            id: 'vizSelector',\r\n                                            variant: 'filled'\r\n                                        }}\r\n                                        MenuProps={{\r\n                                            MenuListProps: {\r\n                                                className: classes.vizTypeMenu\r\n                                            }\r\n                                        }}\r\n                                        >\r\n                                        {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                        {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                        {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                        {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                        {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                        {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Sparse Map</MenuItem>}\r\n                                    </MUISelect>\r\n                                </FormControl>\r\n                            </Grid>\r\n\r\n                            <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                                <Grid item xs={12}>\r\n                                    <Button\r\n                                        className={classes.visualizeButton}\r\n                                        variant='contained'\r\n                                        onClick={() => this.props.onVisualize()}\r\n                                        disabled={Boolean(disableVisualizeMessage) || !fields || !selectedVizType}\r\n                                        fullWidth\r\n                                    >\r\n                                        Visualize\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Tooltip> */}\r\n                        </Grid>\r\n                    </form>                    \r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VizControlPanel));","import vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nexport default mapVizType;","const cleanSPParams = ({depth1, depth2, dt1, dt2, fields, lat1, lat2, lon1, lon2, spName, tableName}) => ({\r\n    depth1: parseFloat(depth1),\r\n    depth2: parseFloat(depth2),\r\n    dt1,\r\n    dt2,\r\n    fields,\r\n    lat1: parseFloat(lat1),\r\n    lat2: parseFloat(lat2),\r\n    lon1: parseFloat(lon1),\r\n    lon2: parseFloat(lon2),\r\n    spName,\r\n    tableName,\r\n})\r\n\r\nexport default cleanSPParams;","const aggregateChartDataSize = (charts) => {\r\n    let size = 0;\r\n\r\n    charts.forEach(ch => {\r\n        size += ch.data.variableValues && ch.data.variableValues.length ? ch.data.variableValues.length : 0;\r\n    });\r\n\r\n\r\n    return size;\r\n}\r\n\r\nexport default aggregateChartDataSize;","import depthUtils from '../depthCounter';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\n\r\nconst generateVariableSampleRangeParams = (varDetails) => {\r\n    let dt1 = varDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n        1 : \r\n        varDetails.Time_Min.slice(0, 10);\r\n    let dt2 = varDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n        1 : \r\n        // varDetails.Time_Min.slice(0, 10);\r\n        varDetails.Time_Max.slice(0, 10);\r\n\r\n    let lat1 = Math.floor(varDetails.Lat_Min * 1000) /1000;\r\n    let lat2 = Math.ceil(varDetails.Lat_Max * 1000) /1000;\r\n    let lon1 = Math.floor(varDetails.Lon_Min * 1000) /1000;\r\n    let lon2 = Math.ceil(varDetails.Lon_Max * 1000) /1000;\r\n\r\n    let surfaceOnly = !varDetails.Depth_Max;\r\n    let irregularSpatialResolution = varDetails.Spatial_Resolution === 'Irregular';\r\n\r\n    let depth1 = surfaceOnly ? 0 : irregularSpatialResolution ? Math.floor(varDetails.Depth_Min * 1000) / 1000 || 0 : 0;\r\n\r\n    let depth2 = surfaceOnly ? 0 : \r\n        irregularSpatialResolution ? Math.ceil(varDetails.Depth_Max * 1000) / 1000|| 0 : \r\n        depthUtils.piscesTable.has(varDetails.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n        depthUtils.darwinTable.has(varDetails.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2).toFixed(2) : \r\n        11000\r\n\r\n    return {\r\n        lat1,\r\n        lat2,\r\n        lon1,\r\n        lon2,\r\n        depth1,\r\n        depth2,\r\n        dt1,\r\n        dt2\r\n    };\r\n}\r\n\r\nexport default generateVariableSampleRangeParams;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogTitle, DialogContent, Link, Typography } from '@material-ui/core';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nimport { datasetSummaryFetch } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        // width: '700px',\r\n        minWidth: '700px',\r\n        maxWidth: '60vw',\r\n        // zIndex: 3000\r\n    },\r\n\r\n    markdown: {\r\n        '& img': {\r\n            maxWidth: '100%',\r\n            margin: '20px auto 20px auto',\r\n            display: 'block'\r\n        },\r\n        '& a': {\r\n            color: theme.palette.primary.main,\r\n            textDecoration: 'none'\r\n        },\r\n\r\n        '& p': {\r\n            lineHeight: 1.25\r\n        }\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    datasetSummary: state.datasetSummary\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    datasetSummaryFetch\r\n}\r\n\r\nconst DatasetInfoDialog = (props) => {\r\n    const { datasetSummary, classes, datasetSummaryFetch, datasetSummaryID, setDatasetSummaryID } = props;\r\n\r\n    React.useEffect(() => {\r\n        datasetSummaryFetch(datasetSummaryID);\r\n    }, [datasetSummaryID]);\r\n\r\n    const handleClose = () => {\r\n        setDatasetSummaryID(null);\r\n        datasetSummaryFetch(null);\r\n    }\r\n\r\n    return (\r\n        <Dialog\r\n            // style={{zIndex: 5000}}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            open={Boolean(datasetSummaryID)}\r\n            onClose={handleClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <DialogTitle>{datasetSummary ? datasetSummary.Dataset_Long_Name : <Skeleton/>}</DialogTitle>\r\n            <DialogContent>\r\n                {\r\n                    datasetSummary ?\r\n                    <ReactMarkdown source={datasetSummary.Description} className={classes.markdown}/> :\r\n                        <>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                    </>                    \r\n                }\r\n            </DialogContent>\r\n\r\n            <DialogContent style={{padding: '16px 24px'}}>{\r\n                datasetSummary ?\r\n                    <span>\r\n                        Detailed information for this dataset and its member variables is available\r\n                        <Link target='_blank' href={`/catalog/datasets/${datasetSummary.Dataset_Name}`}> here</Link>.  \r\n                    </span> \r\n                : \r\n                <Skeleton/>\r\n            }                \r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n    // <>\r\n    //     <Skeleton><Typography variant='h3'></Typography></Skeleton>\r\n    //     <Skeleton><Typography variant='h1'></Typography></Skeleton>\r\n    //     <Skeleton width={500} height={800}></Skeleton>\r\n    // </> \r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DatasetInfoDialog));","// Virtualized product list used on viz page for catalog-like and related-data searches\r\n// Each child will be a dataset, which will have variable children\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, TextField, MenuList, MenuItem, InputAdornment, Grid, Tooltip, IconButton, Accordion, AccordionSummary, AccordionDetails, Typography } from '@material-ui/core';\r\nimport { Search, List, Layers, DirectionsBoat, CallMissedOutgoing, Info, InsertChart, ExpandMore, Visibility, Computer, ExpandLess, ChevronRight, Star } from '@material-ui/icons';\r\n\r\n// import * as JsSearch from 'js-search';\r\nimport { VariableSizeList } from 'react-window';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport { vizSearchResultsSetLoadingState } from '../../Redux/actions/visualization';\r\n\r\nimport DatasetInfoDialog from './DatasetInfoDialog';\r\n\r\nconst makeGroupStyles = {\r\n    searchOptionsMenuList: {\r\n        marginTop: '10px',\r\n        maxHeight: '440px',\r\n        overflow: 'auto'\r\n    },\r\n\r\n    searchOption: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    searchOptionsMenuItem: {\r\n        fontSize: '14px'\r\n    },\r\n\r\n    searchOptionsMenuItemText: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        width: 'calc(100% - 36px)',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    heading: {\r\n        textAlign: 'left',\r\n        padding: '8px 6px',\r\n        color: colors.primary,\r\n        fontSize: '16px',\r\n        marginTop: '5px',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    variableItem: {\r\n        height: '32px',\r\n        // paddingLeft: '48px', \r\n        textAlign: 'left',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n    },\r\n\r\n    variablesWrapper: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        paddingTop: '8px'\r\n    },\r\n\r\n    memberCount: {\r\n        color: colors.primary,\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    datasetOpenIcon:{\r\n        color:colors.primary, \r\n        margin: '0 8px 0 4px',\r\n        // display: 'inline-block'\r\n    },\r\n\r\n    infoIcon: {\r\n        color: colors.primary,\r\n        cursor: 'pointer'\r\n    },\r\n\r\n    listHeader: {\r\n        color: colors.primary,\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    variableName: {\r\n        paddingLeft: '48px'\r\n    }\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    vizSearchResultsLoadingState: state.vizSearchResultsLoadingState,\r\n    cart: state.cart\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nconst MakeGroup = connect(mapStateToProps, mapDispatchToProps)(withStyles(makeGroupStyles)(React.memo((props) => {\r\n\r\n    const { classes, options, vizSearchResultsLoadingState, handleSelectDataTarget, handleSetVariableDetailsID, setdatasetSummaryID, listRef, make, fullCount, cart } = props;\r\n    const [ openIndex, setOpenIndex ] = React.useState(null);\r\n\r\n    const handleSetOpenClick = (i) => {\r\n        if(listRef.current) {\r\n            listRef.current.resetAfterIndex(0);\r\n            \r\n            // Make sure the group being opened is in view\r\n            let currentOffset = listRef.current.state.scrollOffset;\r\n            let targetOffset = i * 38;\r\n\r\n            if(i !== null && (targetOffset < currentOffset - 10 || targetOffset > currentOffset + props.height - 20)){\r\n                setTimeout(() => listRef.current.scrollToItem(i, 'start'), 10);\r\n            }\r\n        }\r\n        setOpenIndex(i);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(listRef.current) listRef.current.resetAfterIndex(0);\r\n    }, [options])\r\n\r\n    const varCount = options.reduce((acc, cur) => acc + cur.variables.length, 0);\r\n    const nonvisualizableDatasetCount = fullCount - options.length;\r\n    const nonvisualizableString = nonvisualizableDatasetCount === 0 ?\r\n        '' :\r\n        ` (${nonvisualizableDatasetCount} hidden)`\r\n\r\n    return (\r\n        <>\r\n        <Grid container>\r\n            <Grid item xs={9}>\r\n                <Typography className={classes.heading}>\r\n                    {\r\n                        vizSearchResultsLoadingState === states.inProgress ?\r\n                        'Searching....' :\r\n                        varCount ? <>{make} Data - Showing {options.length} datasets \r\n                                <Tooltip enterDelay={50} placement='top' title='Variables and datasets which are not flagged as visualizable are not shown on this list, but can be found on the catalog page.'>\r\n                                    <span>{nonvisualizableString}</span>\r\n                                </Tooltip>\r\n                            </>\r\n                        : `${make} Data - No variables found for current search parameters`\r\n                    }\r\n                </Typography>\r\n            </Grid>\r\n\r\n            <Grid item xs={3} container justify='flex-start' alignItems='center'>\r\n                <Typography variant='caption' style={{color: colors.primary, marginBottom: '-16px'}}>\r\n                    Variable Count\r\n                </Typography>\r\n            </Grid>\r\n        </Grid>\r\n        \r\n            <VariableSizeList\r\n                ref={listRef}\r\n                itemData={options}\r\n                itemCount={options.length}\r\n                height={props.height || 270}\r\n                width='100%'\r\n                estimatedItemSize={38}\r\n                style={{overflowY: 'scroll'}}\r\n                itemSize={(i) => openIndex === i ? options[i].variables.length * 32 + 38 + 8: 38}\r\n            >\r\n                {({ index, style }) => (\r\n                    <div style={style}>\r\n                        <Grid \r\n                            container \r\n                            className={classes.searchOption}\r\n                            onClick={() => index === openIndex ? handleSetOpenClick(null) : handleSetOpenClick(index)}\r\n                        >            \r\n                            <Grid item xs={9} container alignItems='center'>\r\n                                {openIndex === index ? \r\n                                    <ExpandMore className={classes.datasetOpenIcon}/> : \r\n                                    <ChevronRight className={classes.datasetOpenIcon}/>\r\n                                }\r\n                                <span className={classes.searchOptionsMenuItemText}>{options[index].Dataset_Name || options[index].Dataset_Name}</span>\r\n                            </Grid>\r\n\r\n                            <Tooltip title={`Dataset contains ${options[index].variables.length} variables matching the search criteria`}>\r\n                                <Grid item xs={1} className={classes.memberCount} container alignItems='center' justify='center'>\r\n                                    {options[index].variables.length}\r\n                                </Grid>\r\n                            </Tooltip>\r\n\r\n                            <Grid item xs={1} style={{paddingLeft: '12px'}} container alignItems='center'>\r\n                                <Tooltip title='View Dataset Details'>\r\n                                    <Info \r\n                                        className={classes.infoIcon}\r\n                                        onClick={(event) => {\r\n                                            event.stopPropagation();\r\n                                            setdatasetSummaryID(options[index].variables[0].Dataset_ID);\r\n                                        }}\r\n                                    />\r\n                                </Tooltip>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={1} container alignItems='center'>\r\n                                {\r\n                                    cart[options[index].Dataset_Name] ?\r\n\r\n                                    <Tooltip title='This dataset is on your favorites list'>\r\n                                        <Star/>\r\n                                    </Tooltip> \r\n                                    \r\n                                    : ''\r\n                                }\r\n                            </Grid>                           \r\n                        </Grid>\r\n                        \r\n                        {\r\n                            index === openIndex ?\r\n                            <Grid container className={classes.variablesWrapper}>\r\n                                {options[index].variables.map((e, i) => (\r\n                                    <Grid \r\n                                        item \r\n                                        xs={12} \r\n                                        key={e.Long_Name} \r\n                                        className={classes.variableItem} \r\n                                        container \r\n                                        alignItems='center'\r\n                                        onClick={() => handleSelectDataTarget(e)}\r\n                                    >\r\n                                        <Grid item xs={10} className={classes.variableName}>{e.Long_Name}</Grid>\r\n                                        <Grid item xs={2}>\r\n                                            <Tooltip title='View Variable Details'>\r\n                                                <Info onClick={(event) => {\r\n                                                        event.stopPropagation();\r\n                                                        handleSetVariableDetailsID(e.ID);\r\n                                                    }}\r\n                                                    style={{paddingLeft: '12px'}}\r\n                                                    className={classes.infoIcon}\r\n                                                    />\r\n                                            </Tooltip>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                ))}\r\n                            </Grid>\r\n                            : ''\r\n                        }\r\n                    </div>\r\n                )}\r\n            </VariableSizeList>\r\n        </>\r\n    )\r\n})));\r\n\r\nconst styles = (theme) => ({\r\n\r\n});\r\n\r\nconst observationListRef = React.createRef();\r\nconst modelListRef = React.createRef();\r\n\r\nconst plMapStateToProps = (state, ownProps) => ({\r\n    windowHeight: state.windowHeight,\r\n    windowWidth: state.windowWidth,\r\n    vizSearchResultsFullCounts: state.vizSearchResultsFullCounts\r\n});\r\n// const sortCartFirst\r\n\r\nconst ProductList = (props) => {\r\n\r\n    const { options, classes, handleSelectDataTarget, handleShowMemberVariables, vizSearchResultsLoadingState, make, windowWidth, windowHeight, handleSetVariableDetailsID, vizSearchResultsFullCounts } = props;\r\n    \r\n    const [ datasetSummaryID, setDatasetSummaryID ] = React.useState(null);\r\n\r\n    return (\r\n        <React.Fragment>                \r\n                <DatasetInfoDialog datasetSummaryID={datasetSummaryID} setDatasetSummaryID={setDatasetSummaryID}/>\r\n\r\n            {\r\n                (make.has('Observation') && make.has('Model')) || make.size === 0 ?\r\n                <>\r\n                    <MakeGroup\r\n                        make='Observation'\r\n                        options={options.Observation}\r\n                        handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                        listRef = {observationListRef}\r\n                        handleSelectDataTarget={handleSelectDataTarget}\r\n                        height={(windowHeight - 204) / 2 - 45}\r\n                        setdatasetSummaryID={setDatasetSummaryID}\r\n                        fullCount={vizSearchResultsFullCounts.Observation}\r\n                    />\r\n\r\n                    <MakeGroup\r\n                        make='Model'\r\n                        options={options.Model}\r\n                        handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                        listRef={modelListRef}\r\n                        handleSelectDataTarget={handleSelectDataTarget}\r\n                        height={(windowHeight - 204) / 2 - 45}\r\n                        setdatasetSummaryID={setDatasetSummaryID}\r\n                        fullCount={vizSearchResultsFullCounts.Model}\r\n                    />\r\n                </> : make.has(\"Observation\") ?\r\n\r\n                <MakeGroup\r\n                    make='Observation'\r\n                    options={options.Observation}\r\n                    handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                    listRef = {observationListRef}\r\n                    handleSelectDataTarget={handleSelectDataTarget}\r\n                    height={windowHeight - 249}\r\n                    setdatasetSummaryID={setDatasetSummaryID}\r\n                    fullCount={vizSearchResultsFullCounts.Observation}\r\n                /> : \r\n\r\n                <MakeGroup\r\n                    make='Model'\r\n                    options={options.Model}\r\n                    handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                    listRef={modelListRef}\r\n                    height={windowHeight - 249}\r\n                    handleSelectDataTarget={handleSelectDataTarget}\r\n                    setdatasetSummaryID={setDatasetSummaryID}\r\n                    fullCount={vizSearchResultsFullCounts.Model}\r\n                />        \r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(plMapStateToProps, null)(withStyles(styles)(ProductList));","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, Chip, TextField, MenuList, MenuItem, InputAdornment, Grid, Tooltip, IconButton, Link, Typography, FormControl, Select, FormHelperText, Button, Popper, Checkbox, FormControlLabel, FormGroup } from '@material-ui/core';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { ExpandMore, ChevronRight, Search, Layers, DirectionsBoat, CallMissedOutgoing, Info, InsertChart, Close } from '@material-ui/icons';\r\n\r\nimport matchSorter from 'match-sorter';\r\n\r\nimport ProductList from './ProductList';\r\nimport MultiCheckboxDropdown from '../UI/MultiCheckboxDropdown';\r\n\r\nimport { vizSearchResultsFetch, vizSearchResultsSetLoadingState, variableNameAutocompleteFetch, vizSearchResultsStore } from '../../Redux/actions/visualization';\r\nimport { keywordsFetch, searchOptionsFetch } from '../../Redux/actions/catalog';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    vizSearchResults: state.vizSearchResults,\r\n    vizSearchResultsLoadingState: state.vizSearchResultsLoadingState,\r\n    autocompleteVariableNames: state.autocompleteVariableNames,\r\n    submissionOptions: state.submissionOptions,\r\n    windowHeight: state.windowHeight\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    vizSearchResultsFetch,\r\n    vizSearchResultsSetLoadingState,\r\n    variableNameAutocompleteFetch,\r\n    vizSearchResultsStore,\r\n    searchOptionsFetch\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    inputRoot: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    chip: {\r\n        maxWidth: '160px',\r\n        color: 'white',\r\n        borderColor: theme.palette.primary.main,\r\n        marginRight: '6px',\r\n        height: '28px'\r\n    },\r\n\r\n    autocompletePopperPaper: {\r\n        backgroundColor: 'black',\r\n        zIndex: z.CONTROL_SECONDARY\r\n    },\r\n\r\n    autocompleteOptions: {\r\n        '&[data-focus=\"true\"]': {\r\n            backgroundColor: colors.greenHover,\r\n          },\r\n          textAlign: 'left'\r\n    },\r\n\r\n    searchWrapper: {\r\n        position: '-webkit-sticky',\r\n        position: 'sticky',\r\n        top: '152px',\r\n        padding: '14px 20px'\r\n    },\r\n\r\n    chip: {\r\n        maxWidth: '160px',\r\n        color: 'white',\r\n        borderColor: theme.palette.primary.main,\r\n        marginRight: '6px',\r\n        height: '28px'\r\n    },\r\n\r\n    resetButton: {\r\n        textTransform: 'none',\r\n        width: '160px',\r\n        height: '37px',\r\n        color: theme.palette.primary.main,\r\n        borderColor: theme.palette.primary.main,\r\n        marginTop: '12px'\r\n    },\r\n\r\n    searchPanelRow: {\r\n        marginTop: '10px',\r\n    },\r\n\r\n    depthFormControlRoot: {\r\n        textAlign: 'left'\r\n    },\r\n\r\n    formControl: {\r\n        width: '90%',\r\n        marginBottom: '6px'\r\n    },\r\n\r\n    autoComplete: {\r\n        width: 'calc(100% - 48px)'\r\n    },\r\n\r\n    searchSectionHeader: {\r\n        color: theme.palette.primary.main,\r\n        textAlign: 'left',\r\n        marginBottom: '8px'\r\n    },\r\n\r\n    showAdvancedWrapper: {\r\n        textAlign: 'left',\r\n        marginTop: '16px',\r\n        width: '100%'\r\n    },\r\n\r\n    regionSelectorInput: {\r\n        fontSize: '13px',\r\n    },\r\n\r\n    sensorInputLabel: {\r\n        fontSize: '21px'\r\n    },\r\n\r\n    sensorTextField: {\r\n        paddingTop: '8px'\r\n    },\r\n\r\n    popperDisablePortal: {\r\n        bottom: 130\r\n    },\r\n\r\n    addBorder: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    denseGridItem: {\r\n        marginTop: '4px',\r\n        padding: '0px 6px'\r\n    },\r\n\r\n    shiftedAutocompletePopper: {\r\n        height: '400px',\r\n        width: '500px',\r\n        position: 'absolute',\r\n        bottom: '190px',\r\n    },\r\n\r\n    shiftedAutocompletePaper: {\r\n        minHeight : '400px',\r\n    },\r\n\r\n    shiftedAutocompleteListbox: {\r\n        maxHeight: 0,\r\n        minHeight : '400px',\r\n        overflowX: 'hidden'\r\n    },\r\n\r\n    formControlLabelRoot: {\r\n        height: '30px'\r\n    },\r\n\r\n    formControlLabelLabel: {\r\n        fontSize: '14px'\r\n    },\r\n\r\n    closeIcon: {\r\n        float: 'right',\r\n        cursor: 'pointer',\r\n        color: colors.primary,\r\n        textTransform: 'none',\r\n        fontSize: '15px'\r\n    }\r\n});\r\n\r\nconst defaultState = {\r\n    hasDepth: 'any',\r\n    timeStart: '1900-01-01',\r\n    timeEnd: new Date().toISOString().slice(0,10),\r\n    latStart: -90,\r\n    latEnd: 90,\r\n    lonStart: -180,\r\n    lonEnd: 180,\r\n    sensor: new Set(),\r\n    searchTerms: '',\r\n    temporalResolution: 'Any',\r\n    spatialResolution: 'Any',\r\n    dataSource: 'Any',\r\n    distributor: 'Any',\r\n    processLevel: 'Any',\r\n    make: new Set(),\r\n    region: new Set()\r\n}\r\n\r\nclass DataSearch extends React.Component {\r\n\r\n    state = {\r\n        memberVariablesDataset: null,\r\n        showAdvanced: false,\r\n        sensorsMenuOpen: false,\r\n        regionsMenuOpen: false,\r\n        makesMenuOpen: false,\r\n        ...defaultState\r\n    }\r\n\r\n\r\n    componentDidMount = () => {\r\n        this.props.vizSearchResultsFetch({});\r\n    }\r\n\r\n    handleChangeSearchValue = (e) => {      \r\n        this.updateStateAndSearch({...this.state, [e.target.name]: e.target.value});\r\n    }\r\n\r\n    handleChangeAutocomplete = (statePiece) => {\r\n        return (e, v) => {\r\n            let newState = {...this.state, [statePiece]: v}\r\n            this.updateStateAndSearch(newState);\r\n        }\r\n    }\r\n\r\n    updateStateAndSearch = (newState) => {\r\n        this.props.vizSearchResultsSetLoadingState(states.inProgress);\r\n        this.props.vizSearchResultsStore({Observation: [], Model: []});\r\n\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleChangeSensor = (e, altTypeValue) => {\r\n        let newState = {...this.state, sensor: altTypeValue};\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleChangeMake = (e, altTypeValue) => {\r\n        let newState = {...this.state, make: altTypeValue};\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleToggleShowAdvanced = () => {\r\n        this.setState({...this.state, showAdvanced: !this.state.showAdvanced});\r\n    }\r\n\r\n    handleResetSearch = () => {\r\n        let newState = {...this.state, ...defaultState};\r\n        this.updateStateAndSearch(newState);\r\n    }\r\n\r\n    handleToggleMenu = (menu) => {\r\n        this.setState({...this.state, [menu]: !this.state[menu]})\r\n    }\r\n\r\n    handleClickCheckbox = (e, checked) => {\r\n        let [ column, value ] = e.target.name.split('!!');\r\n        let newSet = new Set(this.state[column]);\r\n\r\n        checked ? newSet.add(value) : newSet.delete(value);\r\n\r\n        this.updateStateAndSearch({...this.state, [column]: newSet});\r\n    }\r\n\r\n    handleClearMultiSelect = (param) => {\r\n        let newState = {...this.state};\r\n        newState[param] = defaultState[param];\r\n        this.updateStateAndSearch(newState);\r\n    }\r\n\r\n    render = () => {\r\n        const {\r\n            classes,\r\n            handleSelectDataTarget,\r\n            vizSearchResults,\r\n            autocompleteVariableNames,\r\n            submissionOptions,\r\n            windowHeight\r\n        } = this.props;\r\n\r\n        const { \r\n            searchTerms, \r\n            memberVariablesDataset,\r\n            hasDepth, \r\n            timeStart, \r\n            timeEnd, \r\n            latStart, \r\n            latEnd, \r\n            lonStart, \r\n            lonEnd,\r\n            temporalResolution,\r\n            spatialResolution,\r\n            dataSource,\r\n            distributor,\r\n            processLevel,\r\n            make,\r\n            region,\r\n            sensor,\r\n        } = this.state;\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <Grid container>\r\n                    <Grid item xs={12}>\r\n                        <Typography style={{display: 'inline-block'}}>\r\n                            Search and filter using the controls on the left. Select a variable to plot from the list on the right.\r\n                        </Typography>\r\n\r\n                        <Button\r\n                            startIcon={<Close style={{fontSize: '22px'}}/>}\r\n                            onClick={this.props.handleCloseDataSearch}\r\n                            className={classes.closeIcon}\r\n                        >\r\n                            Close\r\n                        </Button>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={4} style={{overflowY: 'auto', maxHeight: windowHeight - 204, padding: '16px', backgroundColor: 'rgba(0,0,0,.4)', display: memberVariablesDataset ? 'none' : ''}}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    name='searchTerms'\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    placeholder='Search'\r\n                                    value={searchTerms}\r\n                                    InputProps={{\r\n                                        classes: {\r\n                                            root: classes.inputRoot\r\n                                        },\r\n                                        startAdornment: (\r\n                                            <React.Fragment>\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <Search style={{color: colors.primary}}/>\r\n                                                </InputAdornment>\r\n                                            </React.Fragment>\r\n                                        )\r\n                                    }}\r\n                                    variant=\"outlined\"\r\n                                    inputRef={this.props.searchInputRef}                        \r\n                                />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Make}\r\n                            selectedOptions={make}\r\n                            handleClear={() => this.handleClearMultiSelect('make')}\r\n                            parentStateKey={'make'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Makes'\r\n                        />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Sensor}\r\n                            selectedOptions={sensor}\r\n                            handleClear={() => this.handleClearMultiSelect('sensor')}\r\n                            parentStateKey={'sensor'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Sensors'\r\n                        />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Region}\r\n                            selectedOptions={region}\r\n                            handleClear={() => this.handleClearMultiSelect('region')}\r\n                            parentStateKey={'region'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Regions'\r\n                        />\r\n\r\n                    <div className={classes.showAdvancedWrapper}>\r\n                        <Link\r\n                            component='button'\r\n                            onClick={this.handleToggleShowAdvanced}\r\n                        >\r\n                            {this.state.showAdvanced ? 'Hide Additional Filters' : 'Additional Filters'}\r\n                        </Link>\r\n                    </div>\r\n\r\n\r\n                    <div style={this.state.showAdvanced ? {} : {display: 'none'}}>\r\n\r\n                        <Grid item container xs={12} className={classes.searchPanelRow}>\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='timeStart'\r\n                                    className={classes.formControl}\r\n                                    id=\"date\"\r\n                                    label=\"Start Date\"\r\n                                    type=\"date\"\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={timeStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='timeEnd'\r\n                                    className={classes.formControl}\r\n                                    id=\"date\"\r\n                                    label=\"End Date\"\r\n                                    type=\"date\"\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={timeEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n                        </Grid>                        \r\n\r\n                        <Grid item container xs={12} className={classes.searchPanelRow}>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='latStart'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lat Start&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -90,\r\n                                        max: 90\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={latStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='latEnd'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lat End&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -90,\r\n                                        max: 90\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={latEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='lonStart'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lon Start&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -180,\r\n                                        max: 180\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={lonStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='lonEnd'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lon End&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -180,\r\n                                        max: 180\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={lonEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>                            \r\n\r\n                            <Grid item xs={6}>\r\n                                <FormControl className={classes.formControl}>\r\n                                <FormHelperText>Depth Levels</FormHelperText>\r\n                                <Select\r\n                                    value={hasDepth}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    name='hasDepth'\r\n                                    MenuProps={{\r\n                                        PopoverClasses: {\r\n                                            paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                        },\r\n                                        style: {zIndex: z.CONTROL_SECONDARY}\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value='any'>Any</MenuItem>\r\n                                    <MenuItem value='yes'>Multiple Levels</MenuItem>\r\n                                    <MenuItem value='no'>Surface Only</MenuItem>\r\n                                </Select>                            \r\n                                </FormControl>\r\n                            </Grid>\r\n                                \r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Process Level</FormHelperText>\r\n                                        <Select\r\n                                            value={processLevel}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='processLevel'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Process_Level.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Temporal Resolution</FormHelperText>\r\n                                        <Select\r\n                                            value={temporalResolution}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='temporalResolution'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Temporal_Resolution.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Spatial Resolution</FormHelperText>\r\n                                        <Select\r\n                                            value={spatialResolution}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='spatialResolution'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Spatial_Resolution.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12}>\r\n                                    <Autocomplete\r\n                                        options={this.props.submissionOptions.Data_Source}\r\n                                        renderInput={(params) => <TextField margin='none' {...params} label=\"Data Source\" InputLabelProps={{style:{fontSize: '12px', marginTop: '4px'}}}/>}\r\n                                        getOptionLabel={option => option}\r\n                                        onChange={this.handleChangeAutocomplete('dataSource')}\r\n                                        disablePortal\r\n                                        classes={{\r\n                                            paper: `${classes.shiftedAutocompletePaper} ${classes.autocompletePopperPaper} ${classes.addBorder} `,\r\n                                            input: classes.regionSelectorInput,\r\n                                            option: classes.autocompleteOptions,\r\n                                            popperDisablePortal: classes.shiftedAutocompletePopper,\r\n                                            listbox: classes.shiftedAutocompleteListbox\r\n                                        }}\r\n                                        value={dataSource}\r\n                                    />\r\n\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12}>\r\n                                <Autocomplete\r\n                                        options={this.props.submissionOptions.Distributor}\r\n                                        renderInput={(params) => <TextField margin='none' {...params} label=\"Distributor\" InputLabelProps={{style:{fontSize: '12px', marginTop: '4px'}}}/>}\r\n                                        getOptionLabel={option => option}\r\n                                        onChange={this.handleChangeAutocomplete('distributor')}\r\n                                        disablePortal\r\n                                        classes={{\r\n                                            paper: `${classes.shiftedAutocompletePaper} ${classes.autocompletePopperPaper} ${classes.addBorder} `,\r\n                                            input: classes.regionSelectorInput,\r\n                                            option: classes.autocompleteOptions,\r\n                                            popperDisablePortal: classes.shiftedAutocompletePopper,\r\n                                            listbox: classes.shiftedAutocompleteListbox\r\n                                        }}\r\n                                        value={distributor}\r\n                                    />\r\n                                </Grid>\r\n                            </Grid>                        \r\n                        </div>\r\n\r\n                        <Grid item xs={12} className={classes.searchPanelRow}>\r\n                            <Button variant='outlined' onClick={this.handleResetSearch} className={classes.resetButton}>\r\n                                Reset Filters\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={8} style={{paddingTop: '12px'}}>\r\n                        <ProductList \r\n                            options={vizSearchResults}\r\n                            handleSelectDataTarget={handleSelectDataTarget}\r\n                            handleShowMemberVariables={this.handleShowMemberVariables}\r\n                            make={make}\r\n                            variableDetailsID={this.props.variableDetailsID}\r\n                            handleSetVariableDetailsID={this.props.handleSetVariableDetailsID}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DataSearch));","// Not currently in use\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles, Tabs, Tab, Paper, Tooltip, IconButton } from '@material-ui/core';\r\nimport { Language, Close } from '@material-ui/icons';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    deleteChart\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    tabsWrapper: {\r\n        position: 'fixed',\r\n        left: 0,\r\n        top: 70,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n    },\r\n\r\n    tabs: {\r\n        maxWidth: '100vw'\r\n    },\r\n\r\n    tab: {\r\n        textTransform: 'none',\r\n        textAlign: 'left',\r\n        boxShadow: '0px 0px  2px 0px #242424',\r\n        color: 'white',\r\n        opacity: 1,\r\n        width: '180px',\r\n        maxHeight: '48px',\r\n        '&:not(:first-child)': {\r\n            borderLeft: '3px solid #242424'\r\n        }\r\n    },\r\n\r\n    greenHightlight: {\r\n        color: colors.primary\r\n    },\r\n\r\n    closeIcon: {\r\n        fontSize: '20px',\r\n        position: 'absolute',\r\n        left: 156,\r\n        bottom: 28,\r\n        color: 'white',\r\n        borderRadius: '20%',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        }\r\n    },\r\n})\r\n\r\nconst ChartControlTabs = (props) => {\r\n    const { classes, plotsActiveTab, handlePlotsSetActiveTab, charts } = props;\r\n\r\n    const handleDeleteChart = (e, chartIndex) => {\r\n        e.stopPropagation();\r\n        props.deleteChart(chartIndex);\r\n    }\r\n\r\n    return (\r\n            charts && charts.length ?\r\n\r\n            <Paper className={classes.tabsWrapper}>\r\n                <Tabs \r\n                    className={classes.tabs}\r\n                    value={plotsActiveTab}\r\n                    onChange={handlePlotsSetActiveTab}\r\n                    indicatorColor='primary'\r\n                    variant=\"scrollable\"\r\n                    scrollButtons=\"auto\"\r\n                >\r\n                    <Tooltip title='Return to Globe View'>\r\n                        <Tab icon={<Language/>} className={classes.tab} classes={{selected: classes.greenHightlight}} wrapped={true}/>\r\n                    </Tooltip>\r\n\r\n                    {charts.map((e, i) => (\r\n                        <Tooltip enterDelay={500} key={e.id} title={e.subType + ' of ' + e.data.metadata.Long_Name + ' from ' + e.data.metadata.Dataset_Name}>\r\n                                <Tab \r\n                                    label={\r\n                                        <span style={{maxWidth: '140px'}}>\r\n                                            {e.data.metadata.Long_Name.length > 32 ? e.data.metadata.Long_Name.slice(0,30) + '...' : e.data.metadata.Long_Name}\r\n\r\n                                            <Tooltip title='Delete plot' placement='top'>\r\n                                                <Close className={classes.closeIcon} onClick={(e) => handleDeleteChart(e, i)}/>\r\n                                            </Tooltip>\r\n                                        </span>\r\n                                    } \r\n                                    className={classes.tab} \r\n                                    classes={{selected: classes.greenHightlight}}\r\n                                />\r\n                        </Tooltip>\r\n                    ))}\r\n                </Tabs>\r\n            </Paper>\r\n\r\n            : ''\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChartControlTabs));","const generateVariableFullRangeParams = (varDetails) => {\r\n    \r\n    return {\r\n        lat1: Math.floor(varDetails.Lat_Min * 1000) / 1000,\r\n        lat2: Math.ceil(varDetails.Lat_Max * 1000) / 1000,\r\n        lon1: Math.floor(varDetails.Lon_Min * 1000) / 1000,\r\n        lon2: Math.ceil(varDetails.Lon_Max * 1000) / 1000,\r\n        dt1: varDetails.Time_Min ? varDetails.Time_Min.slice(0, 10) : 1,\r\n        dt2: varDetails.Time_Max ? varDetails.Time_Max.slice(0, 10) : 1,\r\n        depth1: Math.floor(varDetails.Depth_Min * 1000) / 1000 || 0,\r\n        depth2: Math.ceil(varDetails.Depth_Max * 1000) / 1000 || 0\r\n    }\r\n}\r\n\r\nexport default generateVariableFullRangeParams;","import React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { Dialog, DialogContent, Typography, List, ListItem, withStyles } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\n\r\nimport z from '../../Enums/zIndex';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { sparseDataMaxSizeNotificationUpdate } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    sparseDataMaxSizeNotificationData: state.sparseDataMaxSizeNotificationData\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    sparseDataMaxSizeNotificationUpdate\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        minWidth: '700px',\r\n        maxWidth: '60vw',\r\n    },\r\n\r\n    dialogContent: {\r\n        padding: '20px 20px 12px 20px'\r\n    },\r\n\r\n    lastPointValueText: {\r\n        fontSize: '13px'\r\n    },\r\n\r\n    lastPointValueWrapper: {\r\n        backgroundColor: 'rgba(0, 0, 0, .15)',\r\n        padding: '8px',\r\n        margin: '12px 0'\r\n    },\r\n\r\n    closeIcon: {\r\n        fontSize: '20px',\r\n        color: 'white',\r\n        cursor: 'pointer',\r\n        position: 'absolute',\r\n        top: 2,\r\n        right: 2\r\n    },\r\n\r\n    list: {\r\n        padding: '0px 0px 0px 24px'\r\n    },\r\n\r\n    listItem: {\r\n        fontSize: '13px',\r\n        padding: '3px 0px 2px 24px'\r\n    }\r\n})\r\n\r\nconst SparseDataMaxSizeNotification = (props) => {\r\n    const { sparseDataMaxSizeNotificationUpdate, sparseDataMaxSizeNotificationData, classes } = props;\r\n    if(sparseDataMaxSizeNotificationData === null) return '';\r\n    const { time, lat, lon, depth } = sparseDataMaxSizeNotificationData;\r\n\r\n    const handleClose = () => sparseDataMaxSizeNotificationUpdate(null);\r\n\r\n    return(\r\n        <Dialog\r\n            onClose={handleClose}\r\n            open={Boolean(sparseDataMaxSizeNotificationData)}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <Close className={classes.closeIcon} onClick={handleClose}/>\r\n\r\n            <DialogContent className={classes.dialogContent}>\r\n                <Typography>\r\n                    The data requested exceeds the maximum retrievable amount. A visualization has been created from a subset* of the data.\r\n                    If this does not include your data of interest, please reduce the range of the parameters in the control panel and create another visualization.\r\n                </Typography>    \r\n\r\n                <div className={classes.lastPointValueWrapper}>\r\n                    <Typography style={{fontSize: '13px'}}>\r\n                        *The subset includes all requested data with a time before {time.replace('T', ' ').replace('Z', '')} UTC. Some data with a time of exactly {time.replace('T', ' ').replace('Z', '')} may not be included.              \r\n                    </Typography>\r\n                </div>       \r\n\r\n                {/* <div className={classes.lastPointValueWrapper}>\r\n                    <Typography className={classes.lastPointValueText}>\r\n                        \r\n                    </Typography>\r\n                    <List className={classes.list}>\r\n                        <ListItem className={classes.listItem}>\r\n                            {'\\xb7'}All times before {time.replace('T', ' ').replace('Z', '')} UTC\r\n                        </ListItem>\r\n\r\n                        <ListItem className={classes.listItem}>\r\n                        {'\\xb7'}Where time is exactly {time.replace('T', ' ').replace('Z', '')}:\r\n                        </ListItem>\r\n\r\n                        <ListItem>\r\n                            <List className={classes.list}>\r\n                                <ListItem className={classes.listItem}>\r\n                                {'\\xb7'}All latitudes between - 90{'\\xb0'} and {lat}{'\\xb0'}\r\n                                </ListItem>\r\n\r\n                                <ListItem className={classes.listItem}>\r\n                                {'\\xb7'}Where latitude is exactly {lat}{'\\xb0'}:\r\n                                </ListItem>\r\n\r\n                                <ListItem>\r\n                                    <List className={classes.list}>\r\n                                        <ListItem className={classes.listItem}>\r\n                                        {'\\xb7'}All longitudes between -180{'\\xb0'} and {lon}{'\\xb0'}\r\n                                        </ListItem>\r\n\r\n                                        <ListItem className={classes.listItem}>\r\n                                        {'\\xb7'}Where longitude is exactly {lon}{'\\xb0'}:\r\n                                        </ListItem>\r\n\r\n                                        <ListItem>\r\n                                            <List className={classes.list}>\r\n                                                <ListItem className={classes.listItem}>\r\n                                                {'\\xb7'}All depths between 0[m] and {depth}[m]\r\n                                                </ListItem>\r\n                                            </List>\r\n                                        </ListItem>\r\n                                    </List>\r\n                                </ListItem>\r\n                            </List>\r\n                        </ListItem>\r\n                    </List>\r\n                </div> */}\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SparseDataMaxSizeNotification));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, Paper, Tooltip, IconButton, Popper, Grow, ClickAwayListener, MenuList, MenuItem } from '@material-ui/core';\r\nimport { Transform } from '@material-ui/icons';\r\n\r\nimport generateVariableFullRangeParams from '../../Utility/Visualization/generateVariableFullRangeParams';\r\nimport generateVariableSampleRangeParams from '../../Utility/Visualization/generateVariableSampleRangeParams';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = (theme) => ({\r\n    popoutButtonPaper: {\r\n        position: 'fixed',\r\n        display: 'flex',\r\n        borderRadius: '2px',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        backgroundColor: colors.backgroundGray,\r\n        // zIndex: 1490\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    popoutButtonIcon: {\r\n        width: '24px',\r\n        height: '24px'\r\n    },\r\n\r\n    popoutButtonBase: {\r\n        padding: '9px'\r\n    },\r\n\r\n    popperPaper: {\r\n        backgroundColor: 'rgba(0,0,0,.9)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n\r\n    dropdown: {\r\n        // zIndex: 40000,\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        top: '28px !important',\r\n        left: '22px !important',\r\n        // width: '200px'\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts,\r\n    vizPageDataTargetDetails: state.vizPageDataTargetDetails\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n\r\n};\r\n\r\nconst StoredParametersDropdown = (props) => {\r\n    const { classes, charts, handleUpdateParameters, vizPageDataTargetDetails } = props;\r\n\r\n        const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleOpenMenu = e => {\r\n        setAnchorEl(e.currentTarget);\r\n    };\r\n\r\n    const handleCloseMenu = e => {\r\n        setAnchorEl(null);\r\n    }\r\n\r\n    const handleSelect = (params) => {\r\n        handleUpdateParameters(params);\r\n        handleCloseMenu();\r\n    }\r\n\r\n    const syncPlotParams = chart => {\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2 } = chart.data.parameters;\r\n        \r\n        return {\r\n            lat1, lat2, lon1, lon2, depth1, depth2,\r\n            dt1: dt1 ? dt1.slice(0, 10) : '1900-01-01', \r\n            dt2: dt2 ? dt2.slice(0, 10) : '1900-01-01'\r\n        };\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Paper className={classes.popoutButtonPaper} style={{left: 281, top: 270}}>\r\n                <Tooltip title='Parameter Quick Set Options'>\r\n                    <span>\r\n                        <IconButton \r\n                            className={classes.popoutButtonBase}\r\n                            disabled={props.disableButton}\r\n                        >\r\n                            <Transform onClick={handleOpenMenu} className={classes.popoutButtonIcon}/>                                            \r\n                        </IconButton>\r\n                    </span>\r\n                </Tooltip>\r\n            </Paper>\r\n\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} transition className={classes.dropdown} placement='right'>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={classes.popperPaper}>\r\n                            <ClickAwayListener onClickAway={handleCloseMenu}>\r\n                                <MenuList>\r\n                                    <MenuItem onClick={() => handleSelect(generateVariableSampleRangeParams(vizPageDataTargetDetails))}>Set Parameters to Preliminary Variable Range</MenuItem>\r\n                                    <MenuItem onClick={() => handleSelect(generateVariableFullRangeParams(vizPageDataTargetDetails))}>Set Parameters to Maximum Variable Range</MenuItem>\r\n                                    <MenuItem>Set Parameters to Match Cruise Boundaries: </MenuItem>\r\n                                    {\r\n                                        charts.map(e => (\r\n                                            <MenuItem onClick={() => handleSelect(syncPlotParams(e))} key={e.id}>{'Set Parameters to Match ' + e.subType + ': ' + e.data.metadata.Long_Name}</MenuItem>\r\n                                        ))\r\n                                    }\r\n                                    {/* Item for each stored set of parameters */}\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(StoredParametersDropdown));","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\nimport Cookies from 'js-cookie';\r\n\r\nimport { withStyles, Tabs, Collapse, Paper, Badge, ButtonGroup, Grid, IconButton, Icon, ListItem, MenuItem, Typography, Drawer, TextField, FormControl, InputLabel, Button, Tooltip, ClickAwayListener, Slide} from '@material-ui/core';\r\nimport { Edit, PlayArrow, ControlCamera , Settings, Fastfood, ShowChart, Search, Cached, LibraryBooks, ArrowRight, ChevronLeft, ChevronRight, InsertChartOutlined, Language, Delete, ShoppingCart, Info, DirectionsBoat } from '@material-ui/icons';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend, vizPageDataTargetSetAndFetchDetails, storedProcedureRequestSend, sparseDataQuerySend, guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport validation from '../../Enums/validation';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\nimport mapVizType from '../../Utility/Visualization/mapVizType';\r\nimport cleanSPParams from '../../Utility/Visualization/cleanSPParams'\r\nimport aggregateChartDataSize from '../../Utility/Visualization/aggregateChartDataSize';\r\nimport generateVariableSampleRangeParams from '../../Utility/Visualization/generateVariableSampleRangeParams';\r\n\r\nimport DataSearch from './DataSearch';\r\nimport ChartControl from './ChartControl';\r\nimport VariableDetailsDialog from './VariableDetailsDialog';\r\nimport ChartControlTabs from './ChartControlTabs';\r\nimport HelpButtonAndDialog from '../UI/HelpButtonAndDialog';\r\nimport StoredParametersDropdown from './StoredParametersDropdown';\r\nimport SparseDataMaxSizeNotification from './SparseDataMaxSizeNotification';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts,\r\n    cart: state.cart,\r\n    dataTarget: state.vizPageDataTarget,\r\n    vizPageDataTargetDetails: state.vizPageDataTargetDetails,\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen,\r\n    vizPageDataTargetSetAndFetchDetails,\r\n    storedProcedureRequestSend,\r\n    sparseDataQuerySend,\r\n    guestPlotLimitNotificationSetIsVisible\r\n}\r\n\r\nconst drawerWidth = 280;\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\n// const getDatePlaceholder = (date) => {\r\n//     if(isNaN(new Date(date)).valueOf()) return 'yyyy-MM-dd';\r\n    \r\n//     let month  = date.getMonth() + 1;\r\n//     let day = date.getDate();\r\n//     let year = date.getFullYear();\r\n//     return [year, month < 10 ? '0' + month : month, day < 10 ? '0' + day : day].join('-');\r\n// }\r\n\r\nconst styles = (theme) => ({\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        height: 'auto',\r\n        // minHeight: 400,\r\n        top: 180,\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    openPanelChevron: {\r\n        position: 'fixed',\r\n        left: '5px',\r\n        top: '380px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n      },\r\n    \r\n      closePanelChevron: {\r\n        position: 'fixed',\r\n        left: drawerWidth + 5,\r\n        top: '380px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n      },\r\n\r\n    dataSearchMenuPaper: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        bottom: 60,\r\n        left: 0,\r\n        width: '98vw',\r\n        height: 'auto',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n\r\n    controlPanelForm: {\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    \r\n    formGridItem: {\r\n        border: '1px solid #313131',\r\n        borderBottom: 'none',\r\n        borderTop: 'none',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  vizTypeSelectFormControl: {\r\n      width: '100%',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    }\r\n  },\r\n\r\n  depressed: {\r\n      boxShadow: 'inset 1px 1px 5px #1c1c1c'\r\n  },\r\n\r\n  padLeft: {\r\n    padding: '6px 0 2px 7px',\r\n  },\r\n\r\n  dateTimeInput: {\r\n    padding: '6px 0 2px 7px',\r\n    alignItems: 'start'\r\n  },\r\n\r\n  visualizeButton: {\r\n      height: '56px',\r\n      borderRadius: 0,\r\n      backgroundColor: colors.backgroundGray,\r\n      color: theme.palette.primary.main,\r\n      fontVariant: 'normal',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    },\r\n      '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n            color: 'white'\r\n        }\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow',\r\n    fontSize: '12px'\r\n  },\r\n\r\n  vizButtonTooltip: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  datePickerInputAdornment: {\r\n      padding: 0\r\n  },\r\n\r\n  clearChartsButton: {\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c',\r\n      width: '100%',\r\n      borderRight: '1px solid #313131'\r\n\r\n  },\r\n\r\n  resetSPParamsButton: {\r\n    borderRadius: 0,\r\n    backgroundColor: '#3c3c3c',\r\n    width: '100%',\r\n  },\r\n\r\n  datePicker: {\r\n      width: '100%'\r\n  },\r\n\r\n  vizTypeMenu: {\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n  vizTypeMenuItem: {\r\n    '&:hover': {backgroundColor: colors.greenHover}\r\n  },\r\n\r\n    controlPanelItem: {\r\n        textTransform: 'none',\r\n        textAlign: 'left',\r\n        fontSize: '17px',\r\n        fontWeight: 200,\r\n        color: colors.primary,\r\n        justifyContent: 'flex-start',\r\n        height: '56px'\r\n    },\r\n\r\n    controlPanelItemLabel: {\r\n      whiteSpace: 'nowrap',\r\n      overflow: 'hidden',\r\n      textOverflow: 'ellipsis',\r\n      display: 'inline-block'\r\n    },\r\n\r\n    controlPanelItemStartIcon: {\r\n        display: 'inline-block'\r\n    },\r\n\r\n    textField: {\r\n        width: '100%'\r\n    },\r\n\r\n    drawHelpText: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        margin: '0 calc(50vw - 226px)',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        color: 'white',\r\n        fontSize: '18px',\r\n        backgroundColor: 'rgba(0, 0, 0, .6)',\r\n        padding: '8px',\r\n        backdropFilter: 'blur(5px)',\r\n        borderRadius: '4px'\r\n    },\r\n\r\n    popoutButtonPaper: {\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        borderRadius: '2px',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    popoutButtonIcon: {\r\n        width: '24px',\r\n        height: '24px'\r\n    },\r\n\r\n    popoutButtonBase: {\r\n        padding: '9px'\r\n    }\r\n});\r\n\r\nclass NewVizControlPanel extends React.Component {\r\n\r\n    state = {\r\n        variableDetailsID: null,\r\n        showControlPanel: true,\r\n        dataSearchMenuOpen: false,\r\n        tableName: '',\r\n        depth1: 0,\r\n        depth2: 0,\r\n        dt1: '1900-01-01',\r\n        dt2: new Date().toISOString().slice(0,10),\r\n        lat1: 0,\r\n        lat2: 0,\r\n        lon1: 0,\r\n        lon2: 0,\r\n        selectedVizType: '',\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        addedGlobeUIListeners: false,\r\n        showDrawHelp: false,\r\n        storedParams: {\r\n            depth1: 0,\r\n            depth2: 0,\r\n            dt1: '1900-01-01',\r\n            dt2: new Date().toISOString().slice(0,10),\r\n            lat1: 0,\r\n            lat2: 0,\r\n            lon1: 0,\r\n            lon2: 0,\r\n        }\r\n    }\r\n\r\n    searchInputRef = React.createRef();\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.user) this.props.guestPlotLimitNotificationSetIsVisible(true);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n\r\n        // if(prevProps.plotsActiveTab !== this.props.plotsActiveTab){\r\n        //     if(this.props.plotsActiveTab === 0){\r\n        //         this.setState({...this.state, ...this.state.storedParams});\r\n        //     }\r\n\r\n        //     else {\r\n        //         let chartParams = this.props.charts[this.props.plotsActiveTab - 1] ? this.props.charts[this.props.plotsActiveTab - 1].data.parameters : null;\r\n        //         if(chartParams !== null) {\r\n        //             this.setState({...this.state,\r\n        //                 lat1: chartParams.lat1,\r\n        //                 lat2: chartParams.lat2,\r\n        //                 lon1: chartParams.lon1,\r\n        //                 lon2: chartParams.lon2,\r\n        //                 depth1: chartParams.depth1,\r\n        //                 depth2: chartParams.depth2,\r\n        //                 dt1: chartParams.dt1,\r\n        //                 dt2: chartParams.dt2.slice(0,10)\r\n        //             })\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n\r\n        if(prevProps.charts.length && !this.props.charts.length){\r\n            this.props.handleShowGlobe();\r\n        } // this should be removed when deletion saga is fixed\r\n\r\n        if((this.props.mapContainerRef.current) && (prevState.lat1 !== this.state.lat1 || prevState.lat2 !== this.state.lat2 || prevState.lon1 !== this.state.lon1 || prevState.lon2 !== this.state.lon2)){\r\n            \r\n            const lat1 = parseFloat(this.state.lat1);\r\n            const lat2 = parseFloat(this.state.lat2);\r\n            const lon1 = parseFloat(this.state.lon1);\r\n            let _lon2 = parseFloat(this.state.lon2);\r\n            const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n            this.props.mapContainerRef.current.regionLayer.removeAll();\r\n            var polygon = {\r\n                type: 'polygon', \r\n                rings: [\r\n                    [lon1, lat1],\r\n                    [lon2, lat1],\r\n                    [lon2, lat2],\r\n                    [lon1, lat2],\r\n                    [lon1, lat1]\r\n                ]\r\n            };\r\n\r\n            let regionGraphic = new this.props.mapContainerRef.current.props.esriModules.Graphic({\r\n                geometry: polygon,\r\n                symbol: polygonSymbol\r\n            })\r\n\r\n            this.props.mapContainerRef.current.regionLayer.add(regionGraphic);\r\n        }\r\n\r\n        if(this.props.vizPageDataTargetDetails && this.props.vizPageDataTargetDetails !== prevProps.vizPageDataTargetDetails){\r\n\r\n            let data = this.props.vizPageDataTargetDetails;\r\n            let surfaceOnly = !data.Depth_Max;\r\n            let irregularSpatialResolution = data.Spatial_Resolution === 'Irregular';\r\n\r\n            let derivedParams = generateVariableSampleRangeParams(data);\r\n\r\n            let { lat1, lat2, lon1, lon2 } = derivedParams;\r\n\r\n            if(irregularSpatialResolution && this.props.globeUIRef.current){\r\n                this.props.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            if(!irregularSpatialResolution && data.temporalResolution !== temporalResolutions.monthlyClimatology){\r\n                this.props.snackbarOpen('Default parameters for satellite and model data will exceed the maximum visualizable size. Please reduce the time range or region size.')\r\n            }\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                ...derivedParams,\r\n                selectedVizType: '',\r\n                storedParams: {\r\n                    ...this.state.storedParams,\r\n                    ...derivedParams\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.vizPageDataTargetSetAndFetchDetails(null);\r\n        this.props.mapContainerRef.current && this.props.mapContainerRef.current.regionLayer && this.props.mapContainerRef.current.regionLayer.removeAll();\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: parseFloat(extent.ymin.toFixed(3)),\r\n            lat2: parseFloat(extent.ymax.toFixed(3)),\r\n            lon1: parseFloat(_lon1.toFixed(3)),\r\n            lon2: parseFloat(_lon2.toFixed(3))\r\n        };\r\n\r\n        this.setState({...this.state, ...newCoordinates, storedParams: {...this.state.storedParams, ...newCoordinates}});\r\n    }\r\n\r\n    handleUpdateParameters = (parameters) => {\r\n        const { lat1, lat2, lon1, lon2, depth1, depth2, dt1, dt2} = parameters;\r\n        this.setState({...this.state, lat1, lat2, lon1, lon2, depth1, depth2, dt1, dt2});\r\n    }\r\n\r\n    handleShowChartsClick = () => {\r\n        // if(this.props.showCharts){\r\n        //     this.props.handleShowGlobe();\r\n        // }\r\n\r\n        // else {\r\n        //     this.props.handleShowCharts();\r\n        // }\r\n        if(this.props.plotsActiveTab === 0){\r\n            this.props.handlePlotsSetActiveTab(null, 1);\r\n        }\r\n\r\n        else {\r\n            this.props.handlePlotsSetActiveTab(null, 0);\r\n        }\r\n    }\r\n\r\n    handleVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state;\r\n\r\n        let isSparseVariable = this.props.vizPageDataTargetDetails.Spatial_Resolution === spatialResolutions.irregular;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                dt1 + '-01-1900' :\r\n                dt1,\r\n            dt2: this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                dt2 + '-01-1900' :\r\n                dt2 + 'T23:59:59',\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.props.vizPageDataTargetDetails.Variable,\r\n            tableName: this.props.vizPageDataTargetDetails.Table_Name,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.props.vizPageDataTargetDetails\r\n        }\r\n\r\n        if(isSparseVariable && mapping.sp !== storedProcedures.depthProfile) this.props.sparseDataQuerySend(payload);\r\n        else this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    handleDrawClick = () => {\r\n        const { esriModules, regionLayer } = this.props.globeUIRef.current.props;\r\n        var { sketchModel } = this.props.globeUIRef.current;\r\n\r\n        if(!this.state.addedGlobeUIListeners){\r\n            const throttledUpdate = throttle(75, (event) => {\r\n                if(event.state === 'active'){\r\n                    this.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                }\r\n            })\r\n    \r\n            sketchModel.on(\"create\", (event) => {\r\n                if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n                    sketchModel.complete();\r\n                }\r\n    \r\n                if(event.graphic && event.graphic.visible) {\r\n                    event.graphic.visible = false;\r\n                }\r\n\r\n                if(event.state === 'cancel'){\r\n                    sketchModel.cancel();\r\n                    this.setState({...this.state, showDrawHelp: false});\r\n                }\r\n\r\n                if(event.state === 'start'){\r\n                    regionLayer.removeAll();\r\n                }\r\n    \r\n                if(event.state === \"complete\") {\r\n                    this.setState({...this.state, showDrawHelp: false});\r\n                    this.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                }\r\n            });\r\n    \r\n            sketchModel.on('create', throttledUpdate)\r\n    \r\n            sketchModel.on('update', (event) => {\r\n                if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n                    if(event.state === 'cancel') return;\r\n                    this.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n                }\r\n            });          \r\n        }\r\n                \r\n        this.setState({...this.state, showDrawHelp: true, addedGlobeUIListeners: true});\r\n\r\n        if(this.state.showDrawHelp) sketchModel.cancel();\r\n\r\n        else {\r\n            sketchModel.create('polyline', {\r\n                mode:'click'            \r\n            });\r\n        }\r\n    }\r\n\r\n    handleSelectDataTarget = (target) => {\r\n        this.setState({...this.state, dataSearchMenuOpen: false});\r\n        this.props.vizPageDataTargetSetAndFetchDetails(target);\r\n    }\r\n\r\n    handleCloseDataSearch = () => {\r\n        if(this.state.dataSearchMenuOpen){\r\n            this.setState({...this.state, dataSearchMenuOpen: false});\r\n        }\r\n    }\r\n\r\n    handleSetVariableDetailsID = (variableDetailsID) => {\r\n        this.setState({...this.state, variableDetailsID})\r\n    }\r\n\r\n    handleChangeInputValue = (e) => {\r\n        let parseThese = ['lat1', 'lat2', 'lon1', 'lon2', 'depth1', 'depth2'];\r\n        let parsed = parseFloat(e.target.value);\r\n        let value;\r\n\r\n        if(parseThese.includes(e.target.name)){\r\n            if(isNaN(parsed)){\r\n                value = e.target.value;\r\n            }\r\n\r\n            else value = parsed;\r\n        }\r\n\r\n        else {\r\n            value = e.target.value;\r\n        }\r\n\r\n        this.setState({...this.state, [e.target.name]: value, storedParams: {...this.state.storedParams, [e.target.name]: value}});        \r\n    }\r\n\r\n    handleToggleCharts = () => {\r\n\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { vizPageDataTargetDetails } = this.props;\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2, selectedVizType } = this.state;\r\n        \r\n        if(!vizPageDataTargetDetails) return 0;        \r\n\r\n        if(vizPageDataTargetDetails.Spatial_Resolution === spatialResolutions.irregular) {\r\n            return 1;\r\n        }\r\n        \r\n        else {\r\n            const date1 = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? dt1 : Date.parse(dt1);\r\n            const date2 = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? dt2 : Date.parse(dt2);\r\n            \r\n            const dayDiff = (date2 - date1) / 86400000;\r\n            \r\n            const res = mapSpatialResolutionToNumber(vizPageDataTargetDetails.Spatial_Resolution);\r\n            var dateCount = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? date2 - date1 + 1\r\n                : Math.floor(dayDiff / mapTemporalResolutionToNumber(vizPageDataTargetDetails.Temporal_Resolution)) || 1;\r\n\r\n            dateCount *= 1.4 // add more weight to date because of sql indexing\r\n\r\n            const depthCount = depthUtils.count({data: vizPageDataTargetDetails}, depth1, depth2) || 1;\r\n            \r\n            const latCount = (lat2 - lat1) / res;\r\n            const lonCount = lon2 > lon1 ? (lon2 - lon1) / res\r\n                : ((180 - lon1) + (lon2 + 180)) / res;\r\n            const pointCount = lonCount * latCount * depthCount * dateCount;\r\n            if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return pointCount / 200;\r\n\r\n            return pointCount;\r\n        }\r\n\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        if(this.state.depth1 < 0) return 'Depth cannot be negative';\r\n        if(this.state.depth1 > this.state.depth2) return 'Start cannot be greater than end';\r\n        if(this.state.depth1 > this.props.vizPageDataTargetDetails.Depth_Max) return `Maximum depth start is ${this.props.vizPageDataTargetDetails.Depth_Max}`\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        if(this.state.depth2 < 0) return 'Depth cannot be negative';\r\n        if(this.state.depth1 > this.state.depth2) return 'Start cannot be greater than end';\r\n        if(this.state.depth2 < this.props.vizPageDataTargetDetails.Depth_Min) return `Minimum depth end is ${this.props.vizPageDataTargetDetails.Depth_Min}`;\r\n        return ''; \r\n    }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology) {\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            return '';\r\n        }\r\n\r\n        else {\r\n            if(!this.state.dt1) return \"Invalid date\"\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            if(this.state.dt1 < this.props.vizPageDataTargetDetails.Time_Min.slice(0,10)) {\r\n                return `Minimum start date is ${this.props.vizPageDataTargetDetails.Time_Min.slice(5, 10) + '-' + this.props.vizPageDataTargetDetails.Time_Min.slice(0, 4)}`\r\n            };\r\n            return '';\r\n        }\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology) {\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            return '';\r\n        }\r\n\r\n        else {\r\n            if(!this.state.dt2) return \"Invalid date\"\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            if(this.state.dt2 > this.props.vizPageDataTargetDetails.Time_Max.slice(0,10)) {\r\n                return `Maximum end date is ${this.props.vizPageDataTargetDetails.Time_Max.slice(5, 10) + '-' + this.props.vizPageDataTargetDetails.Time_Max.slice(0, 4)}`\r\n            };\r\n            return '';\r\n        }\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        if(this.state.lat1 > this.props.vizPageDataTargetDetails.Lat_Max) return `Maximum start lat is ${this.props.vizPageDataTargetDetails.Lat_Max}`;\r\n        if(this.state.lat1 > this.state.lat2) return `Start cannot be greater than end`;\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        if(this.state.lat2 < this.props.vizPageDataTargetDetails.Lat_Min) return `Minimum end lat is ${this.props.vizPageDataTargetDetails.Lat_Min}`;\r\n        if(this.state.lat1 > this.state.lat2) return `Start cannot be greater than end`;\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        const { lon1, lon2 } = this.state;\r\n        const { Lon_Min, Lon_Max } = this.props.vizPageDataTargetDetails;\r\n\r\n        if(lon2 >= lon1){\r\n            if(lon1 > Lon_Max) return `Maximum start lon is ${Lon_Max}` \r\n        }\r\n\r\n        else {\r\n            if(Lon_Min > lon1 || Lon_Max > lon1 || Lon_Min < lon2 || Lon_Max < lon2){}\r\n            else return `Longitude outside dataset coverage`\r\n        }\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        const { lon1, lon2 } = this.state;\r\n        const { Lon_Min, Lon_Max } = this.props.vizPageDataTargetDetails;\r\n        \r\n        if(lon2 >= lon1) {\r\n            if(lon2 < Lon_Min) return `Minimum end lon is ${Lon_Min}`\r\n        }\r\n        \r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.state.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', 'variable');\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.state.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', 'variable');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.state.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        const aggregateSize = aggregateChartDataSize(this.props.charts);\r\n\r\n        if(!this.props.user){\r\n            let guestPlotCount = parseInt(Cookies.get('guestPlotCount'));\r\n            if(guestPlotCount && guestPlotCount >= 10) return validation.generic.guestMaximumReached;\r\n        }\r\n\r\n        if(!this.state.selectedVizType) return validation.generic.vizTypeMissing;\r\n        if(this.state.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.state.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n        \r\n        if(this.state.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count({data: this.props.vizPageDataTargetDetails}, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n\r\n        if(this.state.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1500000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.vizPageDataTargetDetails) return validation.generic.variableMissing;\r\n        if(this.props.charts.length > 9) return 'Total number of plots is too large. Please delete 1 or more'\r\n        if(aggregateSize + dataSize > 4000000) return 'Total rendered data amount is too large. Please delete 1 or more plots.'\r\n        \r\n        if(\r\n            !this.state.irregularSpatialResolution && \r\n            this.state.selectedVizType !== vizSubTypes.timeSeries && \r\n            (Date.parse(this.state.dt2) - Date.parse(this.state.dt1) > 86400000 * 365)\r\n            ) return \"Maximum date range for non-time series plots of gridded data is 1 year\";\r\n        return ''\r\n    }\r\n\r\n    render = () => {\r\n        const { \r\n            classes,            \r\n            handleLatLonChange,\r\n            dataTarget,\r\n            vizPageDataTargetDetails,\r\n            charts,\r\n            plotsActiveTab\r\n        } = this.props;\r\n\r\n        const {\r\n            variableDetailsID,\r\n            showControlPanel,\r\n            dataSearchMenuOpen,\r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType\r\n        } = this.state;\r\n\r\n        let details = vizPageDataTargetDetails;\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n\r\n        if(details) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDate(),\r\n                this.checkEndDate()\r\n            ];\r\n        } else \r\n        validations = Array(14).fill('');\r\n        \r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateMessage,\r\n            endDateMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            startDateMessage,\r\n            endDateMessage\r\n        ];\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {/* <StoredParametersDropdown \r\n                    handleUpdateParameters={this.handleUpdateParameters}\r\n                    disableButton={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                /> */}\r\n\r\n                {/* <ChartControlTabs handlePlotsSetActiveTab={this.props.handlePlotsSetActiveTab} plotsActiveTab={plotsActiveTab}/> */}\r\n\r\n                <VariableDetailsDialog variableDetailsID={variableDetailsID} handleSetVariableDetailsID={this.handleSetVariableDetailsID}/>\r\n                <SparseDataMaxSizeNotification/>\r\n\r\n                    {\r\n                        this.state.showDrawHelp ? \r\n\r\n                        <Typography className={classes.drawHelpText}>\r\n                            Click on the globe to start drawing, and again to finish.\r\n                        </Typography>\r\n\r\n                        : ''\r\n                    }\r\n\r\n                { showControlPanel ?\r\n\r\n                <div>\r\n                    <Tooltip title=\"Hide control panel\" placement='right'>\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={() => this.setState({...this.state, showControlPanel: false})}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </div>\r\n\r\n                :\r\n                \r\n                <Tooltip title='Show control panel' placement='right'>\r\n                    <IconButton \r\n                        className={classes.openPanelChevron} \r\n                        aria-label=\"toggle-panel\" \r\n                        color=\"primary\" \r\n                        onClick={() => this.setState({...this.state, showControlPanel: true})}>\r\n                        <ChevronRight style={{fontSize: 32}}/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n\r\n\r\n                    {/* <Button\r\n                        fullWidth={true}\r\n                        // startIcon={<Search/>}\r\n                        className={classes.controlPanelItem}\r\n                        style={{borderBottom: '1px solid black'}}\r\n                        startIcon={dataTarget ?\r\n                            <Tooltip title='Show Product Information' placement='top'>\r\n                                <Info \r\n                                    style={{fontSize: '22px', margin: '0 0 -5px 4px'}}\r\n                                    onClick={(e) => {\r\n                                        this.handleSetVariableDetailsID(dataTarget.ID);\r\n                                        e.stopPropagation();\r\n                                    }}\r\n                                />\r\n                            </Tooltip>  : \r\n                            <Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>\r\n                        }\r\n                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                        classes={{\r\n                            label: classes.controlPanelItemLabel,\r\n                            startIcon: classes.controlPanelItemStartIcon\r\n                        }}\r\n                    >\r\n                        { dataTarget ? (dataTarget.Name || dataTarget.Long_Name) : 'Select a Variable to Begin'}\r\n                    </Button> */}\r\n\r\n                    {\r\n                        dataTarget ? \r\n                            <Grid container style={{borderBottom: '1px solid black'}}>\r\n                                <Grid item xs={10}>\r\n                                    <Button\r\n                                        fullWidth={true}\r\n                                        className={classes.controlPanelItem}                                        \r\n                                        startIcon={<Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>}\r\n                                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                                        classes={{\r\n                                            label: classes.controlPanelItemLabel,\r\n                                            startIcon: classes.controlPanelItemStartIcon\r\n                                        }}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                        <span style={{color: this.state.showDrawHelp ? 'rgba(0, 0, 0, 0.38)' : 'white'}}>{dataTarget.Long_Name}</span>\r\n                                    </Button>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={2} style={{borderLeft: '1px solid black'}}>\r\n                                    <Tooltip title='Show variable details' placement='top'>\r\n                                        <span>\r\n                                            <IconButton \r\n                                                onClick={(e) => {\r\n                                                    this.handleSetVariableDetailsID(dataTarget.ID);\r\n                                                    e.stopPropagation();\r\n                                                }}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            >\r\n                                                <Info style={{fontSize: '26px', marginTop: '3px'}}/>\r\n                                            </IconButton>                                   \r\n                                        </span>\r\n                                    </Tooltip>\r\n                                </Grid>\r\n                            </Grid> \r\n                    \r\n                    :\r\n\r\n                    <Button\r\n                        fullWidth={true}\r\n                        className={classes.controlPanelItem}\r\n                        style={{borderBottom: '1px solid black'}}\r\n                        startIcon={<Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>}\r\n                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                        classes={{\r\n                            label: classes.controlPanelItemLabel,\r\n                            startIcon: classes.controlPanelItemStartIcon\r\n                        }}\r\n                        disabled={this.state.showDrawHelp}\r\n                    >\r\n                        Select a Variable to Begin\r\n                    </Button>\r\n                    }                    \r\n\r\n                    {/* <Collapse in={Boolean(dataTarget && details)} timeout={900}> */}\r\n                    <>\r\n\r\n                    {/* {\r\n                        dataTarget && details ? */}\r\n\r\n                            <Grid container>\r\n                                {\r\n                                    details && details.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n                                    <>\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt1'\r\n                                                className={classes.textField}\r\n                                                id=\"dt1\"\r\n                                                label=\"Start Month\"\r\n                                                type=\"number\"\r\n                                                value={dt1}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: {\r\n                                                        min: 1,\r\n                                                        max: 12\r\n                                                    },\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt2'\r\n                                                className={classes.textField}\r\n                                                id=\"dt2\"\r\n                                                label=\"End Month\"\r\n                                                type=\"number\"\r\n                                                min={1}\r\n                                                max={12}\r\n                                                step={1}\r\n                                                // InputLabelProps={{\r\n                                                //     shrink: true,\r\n                                                // }}\r\n                                                value={dt2}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: {\r\n                                                        min: 1,\r\n                                                        max: 12,\r\n                                                    },\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n                                    </>\r\n\r\n                                    :\r\n\r\n                                    <>\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt1'\r\n                                                className={classes.textField}\r\n                                                id=\"dt1\"\r\n                                                label=\"Start Date(m/d/y)\"\r\n                                                step={1}\r\n                                                type=\"date\"\r\n                                                value={dt1}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: details ? {\r\n                                                        min: details.Time_Min.slice(0,10),\r\n                                                        max: details.Time_Max.slice(0,10)\r\n                                                    } : {}\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>  \r\n\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt2'\r\n                                                className={classes.textField}\r\n                                                id=\"dt2\"\r\n                                                label=\"End Date(m/d/y)\"\r\n                                                type=\"date\"\r\n                                                value={dt2}\r\n                                                error={Boolean(endDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={endDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: details ? {\r\n                                                        min: details.Time_Min.slice(0,10),\r\n                                                        max: details.Time_Max.slice(0,10)\r\n                                                    } : {}\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n                                    </>\r\n\r\n                                }\r\n                                \r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lat1-input\"\r\n                                        label={\"Start Lat(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lat1}\r\n                                        onChange={handleLatLonChange}\r\n                                        error={Boolean(startLatMessage)}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startLatMessage}\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lat_Min,\r\n                                                max: details.Lat_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        name='lat1'\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lat2-input\"\r\n                                        error={Boolean(endLatMessage)}\r\n                                        label={\"End Lat(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lat2}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endLatMessage}\r\n                                        name='lat2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lat_Min,\r\n                                                max: details.Lat_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lon1-input\"\r\n                                        error={Boolean(startLonMessage)}\r\n                                        label={\"Start Lon(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lon1}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startLonMessage}\r\n                                        name='lon1'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lon_Min,\r\n                                                max: details.Lon_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lon2-input\"\r\n                                        error={Boolean(endLonMessage)}\r\n                                        label={\"End Lon(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lon2}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endLonMessage}\r\n                                        name='lon2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lon_Min,\r\n                                                max: details.Lon_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n\r\n                                    {showControlPanel ? \r\n                                        <Paper className={classes.popoutButtonPaper} style={{left: drawerWidth + 1, top: '146px'}}>\r\n                                            <Tooltip title='Draw Region on Globe'>\r\n                                                <span>\r\n                                                    <IconButton \r\n                                                        className={classes.popoutButtonBase} \r\n                                                        onClick={this.handleDrawClick}\r\n                                                        disabled={!details || plotsActiveTab !== 0}\r\n                                                    >\r\n                                                        <Edit className={classes.popoutButtonIcon}/>                                            \r\n                                                    </IconButton>\r\n                                                </span>\r\n                                            </Tooltip>\r\n                                        </Paper>                                   \r\n                                    : ''}\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"depth1-input\"\r\n                                        error={Boolean(startDepthMessage)}\r\n                                        label=\"Start Depth(m)\"\r\n                                        className={classes.textField}\r\n                                        // value={isNaN(Math.floor(depth1 * 1000) / 1000) ? depth1 : Math.ceil(depth1 * 1000) / 1000}\r\n                                        value={depth1}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startDepthMessage}\r\n                                        name='depth1'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Depth_Max ? details.Depth_Min : 0,\r\n                                                max: details.Depth_Max ? details.Depth_Max : 0,\r\n                                                step: .1\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || this.state.surfaceOnly || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"depth2-input\"\r\n                                        error={Boolean(endDepthMessage)}\r\n                                        label=\"End Depth(m)\"\r\n                                        className={classes.textField}\r\n                                        // value={isNaN(Math.ceil(depth2 * 1000) / 1000) ? depth2 : Math.ceil(depth2 * 1000) / 1000}\r\n                                        value={depth2}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endDepthMessage}\r\n                                        name='depth2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Depth_Max ? details.Depth_Min : 0,\r\n                                                max: details.Depth_Max ? details.Depth_Max : 0,\r\n                                                step: .1\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || this.state.surfaceOnly || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <ChartControl\r\n                                    overrideDisabledStyle={overrideDisabledStyle}\r\n                                    heatmapMessage={heatmapMessage}\r\n                                    contourMessage={contourMessage}\r\n                                    sectionMapMessage={sectionMapMessage}\r\n                                    histogramMessage={histogramMessage}\r\n                                    timeSeriesMessage={timeSeriesMessage}\r\n                                    depthProfileMessage={depthProfileMessage}\r\n                                    sparseMapMessage={sparseMapMessage}\r\n                                    visualizeButtonTooltip={visualizeButtonTooltip}\r\n                                    disableVisualizeMessage={disableVisualizeMessage}\r\n                                    selectedVizType={selectedVizType}\r\n                                    handleChangeInputValue={this.handleChangeInputValue}\r\n                                    onVisualize={this.handleVisualize}\r\n                                    showChartControl={this.state.showChartControl}\r\n                                    variableDetails={this.props.vizPageDataTargetDetails}\r\n                                    handleVisualize={this.handleVisualize}\r\n                                    disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                />  \r\n\r\n                                {\r\n                                    charts.length && showControlPanel ?\r\n                                    \r\n                                    <Paper className={classes.popoutButtonPaper} style={{left: '281px', top: '343px'}}>\r\n                                        {/* <Tooltip title={showCharts ? 'Return to Globe' : 'Show Charts'}> */}\r\n                                        <Tooltip title={plotsActiveTab !== 0 ? 'Return to Globe' : 'Show Charts'}>\r\n                                            <IconButton disabled={this.state.showDrawHelp} className={classes.popoutButtonBase} onClick={this.handleShowChartsClick}>\r\n                                                {\r\n                                                    plotsActiveTab !== 0 ?\r\n                                                    <Language className={classes.popoutButtonIcon} style={{color:colors.primary}}/> \r\n                                                    :                                                    \r\n                                                    <Badge badgeContent={charts.length} color='primary'>\r\n                                                        <ShowChart className={classes.popoutButtonIcon} style={{color:colors.primary}}/>\r\n                                                    </Badge>\r\n                                                }                                                \r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </Paper>\r\n\r\n                                    : ''\r\n                                }                                    \r\n                            </Grid>\r\n                                {/* : ''\r\n                            } */}\r\n                            </>\r\n                            {/* </Collapse> */}\r\n\r\n                </Drawer>\r\n                    <Paper className={classes.dataSearchMenuPaper} style={dataSearchMenuOpen ? {} : {display: 'none'}}>\r\n                        <DataSearch\r\n                            handleSelectDataTarget={this.handleSelectDataTarget}\r\n                            handleSetVariableDetailsID={this.handleSetVariableDetailsID}\r\n                            handleCloseDataSearch={this.handleCloseDataSearch}\r\n                            searchInputRef={this.searchInputRef}\r\n                        />\r\n                    </Paper>\r\n            </React.Fragment>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(NewVizControlPanel));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { Dialog, DialogContent, DialogActions, Button, Link, Typography, withStyles } from '@material-ui/core';\r\n\r\nimport { guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\nimport { guestTokenRequestSend } from '../../Redux/actions/user';\r\n\r\nimport z from '../../Enums/zIndex';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogWrapper: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    dialogRoot: {\r\n        zIndex: `${z.NON_HELP_DIALOG + 1} !important`\r\n    },\r\n\r\n    link: {\r\n        fontSize: '16px',\r\n        whiteSpace: 'pre-wrap',\r\n        display: 'inline-block',\r\n        paddingBottom: '1px'\r\n    },\r\n\r\n    dialogActionButton: {\r\n        textTransform: 'none',\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n    guestPlotLimitNotificationIsVisible: state.guestPlotLimitNotificationIsVisible,\r\n    user: state.user,\r\n    userIsGuest: state.userIsGuest\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    guestPlotLimitNotificationSetIsVisible,\r\n    showLoginDialog,\r\n    guestTokenRequestSend\r\n}\r\n\r\nconst GuestPlotLimitNotification = (props) => {\r\n    const { classes } = props;\r\n\r\n    const handleLoginButtonClick = () => {\r\n        // props.guestPlotLimitNotificationSetIsVisible(false);\r\n        props.showLoginDialog();\r\n    }\r\n\r\n    const handleOnClose = () => {\r\n        if(props.userIsGuest) props.guestPlotLimitNotificationSetIsVisible(false)\r\n    }\r\n\r\n    let guestPlotCount = parseInt(Cookies.get('guestPlotCount')) || 0;\r\n\r\n    let dialogIsOpen = Boolean(props.guestPlotLimitNotificationIsVisible && !props.user)\r\n    // let dialogIsOpen = Boolean(!props.userIsGuest && !props.user)\r\n\r\n    return (\r\n        <Dialog\r\n            open={dialogIsOpen}\r\n            // open={true}\r\n            onClose={handleOnClose}\r\n            PaperProps={{\r\n                className: classes.dialogWrapper\r\n            }}\r\n            classes={{\r\n                root: classes.dialogRoot\r\n            }}\r\n        >\r\n\r\n            <DialogContent>\r\n                <Typography style={{marginBottom: '14px'}}>\r\n                    Welcome to the Simons CMAP visualization tools. You can explore the visualization features as a guest without \r\n                    registering and create up to 10 plots per day. Registration provides access to the full suite of data submission tools, \r\n                    the data visualization tools and the Simons CMAP API.\r\n                </Typography>\r\n\r\n                <Typography style={{marginBottom: '14px'}}>\r\n                    You can <Link component='button' onClick={props.guestTokenRequestSend} className={classes.link}>Continue as a Guest</Link>, \r\n                    with {10 - guestPlotCount}/10 plots remaining,\r\n                </Typography>\r\n\r\n                <Typography style={{marginBottom: '14px'}}>\r\n                    Or you can\r\n                    <Link component={RouterLink} to={'/register'} className={classes.link}> Register</Link> or\r\n                    <Link component='button' onClick={handleLoginButtonClick} className={classes.link}> Log in</Link> to your existing account \r\n                    for expanded access to CMAP.\r\n                </Typography>\r\n\r\n                <DialogActions>\r\n                    <Button variant='outlined' className={classes.dialogActionButton} onClick={handleLoginButtonClick}>\r\n                        Login\r\n                    </Button>\r\n\r\n                    <Button onClick variant='outlined' onClick={() => props.history.push('/register')} className={classes.dialogActionButton}>\r\n                        Register\r\n                    </Button>\r\n\r\n                    <Button variant='outlined' className={classes.dialogActionButton} onClick={props.guestTokenRequestSend}>\r\n                        Continue As Guest\r\n                    </Button>\r\n                </DialogActions>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(withRouter(GuestPlotLimitNotification)));","export default [\r\n    null,\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n]","import months from '../Enums/months';\r\n\r\nexport default (dateString, hasHour, isMonthly) => {\r\n    return isMonthly ? months[parseInt(dateString)] : hasHour ? dateString.slice(0,10) + ' ' + dateString.slice(11,16): dateString.slice(0,10);\r\n}","import colors from '../Enums/colors';\r\n\r\nconst spanStyles = 'style=\"width:50%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\"'\r\n\r\nexport default {\r\n    layout: {\r\n        font: {color: '#ffffff'},\r\n        paper_bgcolor: colors.backgroundGray,\r\n        autosize: true,\r\n        margin: {\r\n            t: 116,\r\n            b: 104\r\n        },\r\n    },\r\n\r\n    config: {\r\n        displaylogo: false\r\n    },    \r\n\r\n    annotations: (distributor, dataSource) => {\r\n        // let yshift = ((document.documentElement.clientWidth * (height / 100)) / -2) + 20;\r\n        let _dataSource = dataSource.length > 70 ? \r\n                'Data Source: ' + dataSource.slice(0, 67) + '...' : \r\n                'Data Source: ' + dataSource;\r\n\r\n        let _distributor = distributor ?\r\n            distributor.length > 70 ?\r\n                '<br>Distributor: ' + distributor.slice(0, 67) + '...' :\r\n                '<br>Distributor: ' + distributor :\r\n            '';\r\n\r\n        let cmapCredit = '<br>Visualization provided by Simons CMAP';        \r\n        \r\n        return (\r\n            [\r\n                {\r\n                    // text: `Data Source: ${distributor.length < 35 ? \r\n                    //     distributor : \r\n                    //     distributor.slice(0,32) + '...'} -- Provided by Simons CMAP`,\r\n                    text: _dataSource + _distributor + cmapCredit,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                    xref: 'paper',\r\n                    yref: 'paper',\r\n                    // yshift: height ? 0 - height + 160 : -290,\r\n                    // yshift,\r\n                    yanchor: 'top',\r\n                    x: .5,\r\n                    // y: -.1,\r\n                    y: 0,\r\n                    yshift: -56,\r\n                    showarrow: false,\r\n                    xanchor: 'center',\r\n                }\r\n            ]\r\n        )   \r\n    }\r\n}","// Wrapper for chart controls\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles, Tooltip, IconButton, Menu, MenuItem, Popover, Grid, FormControl, InputLabel, OutlinedInput, FormHelperText, Button, ButtonGroup } from '@material-ui/core';\r\nimport { DateRange, CloudDownload, Palette, SwapVert, Gamepad, LineWeight, ShowChart, Tune, Warning } from '@material-ui/icons';\r\n\r\nimport { sparseDataMaxSizeNotificationUpdate } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\nimport SPARSE_DATA_QUERY_MAX_SIZE from '../../Enums/sparseDataQueryMaxSize';\r\nimport lastRowTimeSpaceDataFromChart from '../../Utility/Visualization/lastRowTimeSpaceDataFromChart';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\n\r\nconst mapDispatchToProps = {\r\n    sparseDataMaxSizeNotificationUpdate\r\n}\r\n\r\nconst styles = theme => ({\r\n    popover: {\r\n        width: '470px',\r\n        height: '120px',\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2.5),\r\n        paddingRight: theme.spacing(2.5),\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    iconButton: {\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n    },\r\n\r\n    colorForm: {\r\n        width: '100%'\r\n    },\r\n\r\n    lastIcon: {\r\n        borderTopRightRadius: '10%',\r\n        borderBottomRightRadius: '10%'\r\n    },\r\n\r\n    buttonGroup: {\r\n        display: 'block',\r\n        margin: '0px auto 8px auto',\r\n        maxWidth: '700px',\r\n        textAlign: 'center',\r\n        pointerEvents: 'auto'\r\n    },\r\n\r\n    depressed: {\r\n        boxShadow: 'inset 1px 1px 5px #262626'\r\n    },\r\n\r\n    colorscaleMenu: {\r\n        maxHeight: '400px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    setPopoverZ: {\r\n        zIndex: `${z.CONTROL_PRIMARY} !important`\r\n    },\r\n\r\n    grayBackground: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    sparseDataMaxSizeWarningIcon: {\r\n        color: colors.errorYellow,\r\n        position: 'absolute',\r\n        top: '60px',\r\n        left: 'calc(50% - 12px)',\r\n        cursor: 'pointer',\r\n        zIndex: z.CONTROL_PRIMARY - 1,\r\n        pointerEvents: 'auto'\r\n    }\r\n})\r\n\r\nconst colorscaleOptions = [\r\n    'Default',\r\n    'Greys', \r\n    'YlGnBu', \r\n    'Greens', \r\n    'YlOrRd',\r\n    'Bluered',\r\n    'RdBu',\r\n    'Reds',\r\n    'Blues',\r\n    'Picnic',\r\n    'Rainbow',\r\n    'Portland',\r\n    'Jet',\r\n    'Hot',\r\n    'Blackbody',\r\n    'Earth',\r\n    'Electric',\r\n    'Viridis',\r\n    'Cividis'];\r\n\r\nfunction usePreviousSize(value) {\r\n    let size = value ? value.size : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = size;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousColor(value) {\r\n    let color = value ? value.color : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = color;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousOpacity(value) {\r\n    let opacity = value ? value.opacity : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = opacity;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nconst ChartControlPanel = (props) => {\r\n\r\n    const { \r\n        classes, \r\n        onToggleSplitByDate,\r\n        splitByDate,\r\n        onToggleSplitBySpace,\r\n        splitBySpace,\r\n        orientation, \r\n        downloadCsv, \r\n        handleZValueConfirm,\r\n        zValues,\r\n        markerOptions,\r\n        handleMarkerOptionsConfirm,\r\n        showErrorBars,\r\n        handleSetShowErrorBars,\r\n        showLines,\r\n        handleSetShowLines,\r\n        chart\r\n    } = props;\r\n\r\n    const [paletteAnchorElement, setPaletteAnchorElement] = useState(null);\r\n\r\n    let handleOpenPalette = (event) => {\r\n        setPaletteAnchorElement(event.currentTarget);\r\n    }\r\n\r\n    // Local version, not from props\r\n    let handlePaletteChoice = (option) => {\r\n        setPaletteAnchorElement(null);\r\n        props.handlePaletteChoice(option);\r\n    }\r\n\r\n    const [zScalePopoverAnchorElement, setZScalePopoverAnchorElement] = React.useState(null);\r\n    const [localZMin, setLocalZMin] = React.useState(zValues && zValues[0]);\r\n    const [localZMax, setLocalZMax] = React.useState(zValues && zValues[1]);\r\n\r\n    const zScalePopoverOpen = Boolean(zScalePopoverAnchorElement);\r\n    const zScalePopoverID = zScalePopoverOpen ? 'zscale-popover' : undefined;\r\n\r\n    const handleZScalePopoverClose = () => {\r\n        setZScalePopoverAnchorElement(null);\r\n    };\r\n    \r\n    const checkLocalZMin = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMin)) return 'Invalid value';\r\n    }\r\n\r\n    const checkLocalZMax = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMax)) return 'Invalid value';\r\n    }\r\n\r\n    const zScaleValidations = [\r\n        checkLocalZMin(),\r\n        checkLocalZMax()\r\n    ];\r\n\r\n    const [\r\n        zMinMessage,\r\n        zMaxMessage\r\n    ] = zScaleValidations;\r\n\r\n    const handleLocalZConfirm = () => {\r\n        handleZValueConfirm([localZMin, localZMax]);\r\n        handleZScalePopoverClose();\r\n    }\r\n\r\n    const showMaxSizeWarningAndInfo = () => {\r\n        props.sparseDataMaxSizeNotificationUpdate(lastRowTimeSpaceDataFromChart(props.chart.data));\r\n    }\r\n\r\n    const [markerOptionsAnchorElement, setMarkerOptionsAnchorElement] = React.useState(null);\r\n    const [localMarkerOpacity, setLocalMarkerOpacity] = React.useState(markerOptions && markerOptions.opacity);\r\n    const [localMarkerColor, setLocalMarkerColor] = React.useState(markerOptions && markerOptions.color);\r\n    const [localMarkerSize, setLocalMarkerSize] = React.useState(markerOptions && markerOptions.size);\r\n\r\n    var previousOpacity = usePreviousOpacity(markerOptions);\r\n    var previousColor = usePreviousColor(markerOptions);\r\n    var previousSize = usePreviousSize(markerOptions);\r\n\r\n    useEffect(() => {\r\n        if(markerOptions){\r\n            if(markerOptions.opacity !== previousOpacity){\r\n                setLocalMarkerOpacity(markerOptions.opacity);\r\n            }\r\n    \r\n            if(markerOptions.color !== previousColor){\r\n                setLocalMarkerColor(markerOptions.color);\r\n            }\r\n    \r\n            if(markerOptions.size !== previousSize){\r\n                setLocalMarkerSize(markerOptions.size);\r\n            }\r\n        }\r\n    })\r\n\r\n    const markerPopoverOpen = Boolean(markerOptionsAnchorElement);\r\n    const markerPopoverID = markerPopoverOpen ? 'marker-popover' : undefined;\r\n\r\n    const handleMarkerOptionsClose = () => {\r\n        setMarkerOptionsAnchorElement(null);\r\n    }\r\n\r\n    const checkLocalMarkerOpacity = () => {\r\n        if(localMarkerOpacity < 0.1 || localMarkerOpacity > 1 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerOpacity)){\r\n            return 'Opacity should be 0.1 to 1'\r\n        }\r\n    }\r\n\r\n    const checkLocalMarkerSize = () => {\r\n        if(localMarkerSize < 1 || localMarkerSize > 18 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerSize)){\r\n            return 'Size should be 1 to 18'\r\n        }\r\n    }\r\n\r\n    const markerOptionsValidations = [\r\n        checkLocalMarkerOpacity(),\r\n        checkLocalMarkerSize()\r\n    ]\r\n\r\n    const [\r\n        localMarkerOpacityMessage,\r\n        localMarkerSizeMessage\r\n    ] = markerOptionsValidations;\r\n\r\n    const handleLocalMarkerOptionsConfirm = () => {\r\n        handleMarkerOptionsConfirm({opacity: localMarkerOpacity, color: localMarkerColor, size: localMarkerSize});\r\n        handleMarkerOptionsClose();\r\n    }\r\n\r\n    const showSparseDataSizeWarning = Boolean(chart && \r\n        (chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular || chart.data.metadata.Temporal_Resolution === temporalResolutions.irregular) &&\r\n        chart.data && chart.data.variableValues && chart.data.variableValues.length >= SPARSE_DATA_QUERY_MAX_SIZE);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div style={{position: 'relative', pointerEvents: 'none', margin: 'auto', maxWidth: '80%'}}>\r\n                {showSparseDataSizeWarning ?\r\n                    <Tooltip title='Visualization does not contain all requested data. Click for more info.'>\r\n                        <Warning className={classes.sparseDataMaxSizeWarningIcon} onClick={showMaxSizeWarningAndInfo}/>\r\n                    </Tooltip>  :\r\n                    ''\r\n                }\r\n\r\n                <ButtonGroup className={classes.buttonGroup}>\r\n\r\n                    {Boolean(onToggleSplitByDate) && \r\n                        <Tooltip placement='top' title='Split By Date'>\r\n                            <IconButton color='inherit' className={`${classes.iconButton} ${splitByDate && classes.depressed}`} \r\n                                onClick={onToggleSplitByDate}\r\n                            >\r\n                                <DateRange/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(onToggleSplitBySpace) && \r\n                        <Tooltip placement='top' title={orientation === 'zonal' ? 'Split by Latitude' : 'Split by Longitude'}>\r\n                            <IconButton color='inherit' className={`${classes.iconButton} ${splitBySpace && classes.depressed}`} \r\n                                onClick={onToggleSplitBySpace}\r\n                            >\r\n                                <LineWeight/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    <Tooltip placement='top' title='Download CSV'>\r\n                        <IconButton color='inherit' onClick={downloadCsv} className={classes.iconButton} >\r\n                            <CloudDownload/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    {Boolean(handleZValueConfirm) &&\r\n                        <Tooltip title='Change Colorscale Range' placement='top'>\r\n                            <IconButton color='inherit' onClick={(event) => setZScalePopoverAnchorElement(event.currentTarget)} className={classes.iconButton}>\r\n                                <SwapVert/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(handleSetShowLines) &&\r\n                        <Tooltip title={showLines ? 'Hide Plot Line' : 'Show Plot Line'} placement='top'>\r\n                            <IconButton color='inherit' onClick={() => handleSetShowLines(!showLines)} className={`${classes.iconButton} ${showLines && classes.depressed}`}>\r\n                                <ShowChart/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(handleSetShowErrorBars) &&\r\n                        <Tooltip title={showErrorBars ? 'Hide Error Bars' : 'Show Error Bars'} placement='top'>\r\n                            <IconButton color='inherit' onClick={() => handleSetShowErrorBars(!showErrorBars)} className={`${classes.iconButton} ${showErrorBars && classes.depressed}`}>\r\n                                <Tune/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(props.handlePaletteChoice) &&\r\n                        <Tooltip title='Change Palette' placement='top'>\r\n                            <IconButton disabled={!Boolean(props.handlePaletteChoice)} color='inherit' onClick={handleOpenPalette} className={classes.iconButton}>\r\n                                <Palette/>\r\n                            </IconButton>                \r\n                        </Tooltip>      \r\n                    }\r\n\r\n                    {Boolean(props.handleMarkerOptionsConfirm) &&\r\n                        <Tooltip title='Marker Options' placement='top'>\r\n                            <IconButton color='inherit' onClick={(event) => setMarkerOptionsAnchorElement(event.currentTarget)} className={`${classes.iconButton} ${classes.lastIcon}`} >\r\n                                <Gamepad/>\r\n                            </IconButton>                \r\n                        </Tooltip>\r\n                    }\r\n                    \r\n                </ButtonGroup>   \r\n            </div>\r\n            \r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={paletteAnchorElement}\r\n                keepMounted\r\n                open={Boolean(paletteAnchorElement)}\r\n                onClose={() => setPaletteAnchorElement(null)}\r\n                className={classes.colorscaleMenu}\r\n                MenuListProps= {{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                {colorscaleOptions.map((option, index) => (\r\n                    <MenuItem onClick={() => handlePaletteChoice(option === 'Default' ? 'heatmap' : option)} key={index}>{option}</MenuItem>\r\n                ))}\r\n                \r\n            </Menu>\r\n            \r\n            {/* zscale popover */}\r\n            <Popover\r\n                id={zScalePopoverID}\r\n                open={zScalePopoverOpen}\r\n                anchorEl={zScalePopoverAnchorElement}\r\n                onClose={handleZScalePopoverClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n\r\n                classes={{\r\n                    root: classes.setPopoverZ\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMinMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-min-input' >Min</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-min-input'\r\n                                    value={localZMin}\r\n                                    onChange={(event) => setLocalZMin(event.target.value)}\r\n                                    aria-describedby='local-zmin-error'\r\n                                    labelWidth={36}\r\n                                    name='local-zmin'\r\n                                />\r\n                                <FormHelperText id='local-zmin-error'>{zMinMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-max-input' >Max</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-max-input'\r\n                                    value={localZMax}\r\n                                    onChange={(event) => setLocalZMax(event.target.value)}\r\n                                    aria-describedby=\"local-zmax-error\"\r\n                                    labelWidth={36}\r\n                                    name='local-zmax'\r\n                                />\r\n                                <FormHelperText id=\"local-zmax-error\">{zMaxMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={7}>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleZScalePopoverClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalZConfirm}\r\n                                disabled={Boolean(zMinMessage || zMaxMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n                \r\n            {/* Marker popover */}\r\n            <Popover\r\n                id={markerPopoverID}\r\n                open={markerPopoverOpen}\r\n                anchorEl={markerOptionsAnchorElement}\r\n                onClose={handleMarkerOptionsClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                classes={{\r\n                    root: classes.setPopoverZ\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(localMarkerOpacityMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-opacity' >Opacity</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='local-marker-opacity'\r\n                                    value={localMarkerOpacity}\r\n                                    onChange={(event) => setLocalMarkerOpacity(event.target.value)}\r\n                                    aria-describedby='local-marker-opacity'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-opacity'\r\n                                />\r\n                            <FormHelperText id=\"local-marker-opacity-error\">{localMarkerOpacityMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                // error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-size' >Size</InputLabel>\r\n                                <OutlinedInput\r\n                                    error={Boolean(localMarkerSizeMessage)}\r\n                                    id='local-marker-size'\r\n                                    value={localMarkerSize}\r\n                                    onChange={(event) => setLocalMarkerSize(event.target.value)}\r\n                                    aria-describedby=\"local-marker-size\"\r\n                                    labelWidth={36}\r\n                                    name='local-marker-size'\r\n                                />\r\n                                <FormHelperText id=\"local-marker-size-error\">{localMarkerSizeMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                className={classes.colorForm}\r\n                            >\r\n                                <InputLabel htmlFor='z-min-input'>Color</InputLabel>\r\n                                <OutlinedInput\r\n                                    type='color'\r\n                                    id='marker-color'\r\n                                    value={localMarkerColor}\r\n                                    onChange={(event) => setLocalMarkerColor(event.target.value)}\r\n                                    aria-describedby='local-marker-color'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-color'\r\n                                />\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={1}></Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleMarkerOptionsClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalMarkerOptionsConfirm}\r\n                                disabled={Boolean(localMarkerOpacityMessage || localMarkerSizeMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(ChartControlPanel));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    csvFromVizRequestSend\r\n}\r\n\r\n// User for all histograms sparse or otherwise\r\nconst SparseHistogram = props => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata, parameters } = data;\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !data.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n        \r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                chart={props.chart}\r\n            />\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            // onHover={(e, e2) => {\r\n            //     console.log(e);\r\n            //     console.log(e2)\r\n            // }}\r\n\r\n            // onUnhover={(e, e2) => {\r\n            //     console.log(e);\r\n            //     console.log(e2)\r\n            // }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {\r\n                    x: data.variableValues,\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'histogram',\r\n                    marker: {\r\n                        color: '#00FFFF'\r\n                    }\r\n                }\r\n            ]}\r\n            \r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                    exponentformat: 'power',\r\n                    color: '#ffffff'\r\n                },\r\n                yaxis:{\r\n                    color: '#ffffff',\r\n                    title: 'Frequency'\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)             \r\n            }}\r\n            config={{...chartBase.config}}\r\n        />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseHistogram));","export default (infoObject) => {\r\n\r\n    let lonRange = infoObject.lonMax - infoObject.lonMin;\r\n\r\n    let sectionSize;\r\n    if(lonRange < 2){\r\n        sectionSize = (lonRange / 6).toFixed(2);\r\n    } else {\r\n        sectionSize = Math.floor(lonRange / 6);\r\n    }\r\n\r\n    let tickvals = Array.from(Array(5), (e, i) => Math.ceil(infoObject.lonMin + ((i + 1) * sectionSize)));\r\n    let ticktext = tickvals.map(e => e > 180 ? e - 360 : e);\r\n\r\n    return {\r\n        tickmode: 'array',\r\n        tickvals,\r\n        ticktext\r\n    }\r\n}","export default (infoObject) => {    \r\n    const xRange = infoObject.lonMax - infoObject.lonMin;\r\n    const yRange = infoObject.latMax - infoObject.latMin;\r\n    const sizeRatio = xRange / yRange;\r\n\r\n    let height = 40;\r\n    let width = 40;\r\n\r\n    if(isNaN(sizeRatio)){\r\n        height = height / 1.65;\r\n    } else if (sizeRatio > 1) {\r\n        if(sizeRatio <= 1.5){\r\n            width = width * sizeRatio;\r\n            // height = sizeRatio > 2 ? height / 2 : height / sizeRatio;\r\n        } else {\r\n            width = width * 1.5;\r\n            height = sizeRatio > 3 ? height / 1.65 : height * (1.8 / sizeRatio);\r\n        }\r\n    } else {\r\n        width = sizeRatio < .5 ? width * .5 : width * sizeRatio;\r\n    }\r\n\r\n    return [height, width];\r\n}","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport getChartDimensions from '../../Utility/getChartDimensions';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\nimport subTypes from '../../Enums/visualizationSubTypes';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst handleContourMap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n    \r\n    // Handle axis labels when crossing 180th meridian\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`; \r\n\r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n                margin: '0 auto'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext,\r\n                    \r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'contour',\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: infoObject.zMin > 1 && infoObject.zMin < 1000 ? '.2f' : '.2e'\r\n                    },\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    }\r\n                }\r\n            ]}\r\n\r\n            config={{...chartBase.config}}\r\n            \r\n            key={index}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                // autosize: true,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {title: 'Longitude', color: '#ffffff', ...xTicks},\r\n                yaxis: {title: 'Latitude', color: '#ffffff'},\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst handleHeatmap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n        \r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null || isNaN(value)) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    zsmooth: subset.length < 20000 ? 'fast' : 'false',\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'heatmap',\r\n                    colorscale: palette,\r\n                    autocolorscale: false,\r\n                    \r\n                    hoverinfo: 'text',\r\n                    text: hovertext,\r\n\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n                    \r\n                },\r\n\r\n            ]}                \r\n            key={index}\r\n\r\n            config={{...chartBase.config}}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,               \r\n\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: 'Longitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Latitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SpaceTimeChart = (props) => {\r\n\r\n    const { snackbarOpen, csvFromVizRequestSend, chart } = props;\r\n    const { data, subType } = chart;\r\n    const { dates, depths, extent, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitByDepth, setSplitByDepth] = useState(true);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    const subSets = data.generatePlotData(subType, splitByDate, splitByDepth);\r\n    var plots;\r\n    switch(subType){\r\n        case vizSubTypes.contourMap:\r\n            plots = handleContourMap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.heatmap:\r\n            plots = handleHeatmap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.histogram:\r\n            return <SparseHistogram chart={{data}}/>;\r\n\r\n        default:\r\n            plots = '';\r\n            break;        \r\n\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = depths ? depths.size : 1;\r\n\r\n        if(subType === vizSubTypes.heatmap){\r\n            let availableWGLContexts = 15 - countWebGLContexts(props.charts);\r\n\r\n            if(!splitByDate && chartCount * dates.size > availableWGLContexts){\r\n                snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(subType === vizSubTypes.contourMap){\r\n            if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n            }\r\n        }\r\n\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDate(!splitByDate);\r\n        }, 100)\r\n    }\r\n \r\n    const onToggleSplitByDepth = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDepth(!splitByDepth);\r\n        }, 100)\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                handlePaletteChoice={subType !== subTypes.histogram && handlePaletteChoice}\r\n                onToggleSplitByDepth={depths.size===1 ? null : onToggleSplitByDepth}\r\n                onToggleSplitByDate={dates.size===1 ? null : onToggleSplitByDate}\r\n                splitByDepth={splitByDepth}\r\n                splitByDate={splitByDate}\r\n                handleZValueConfirm={subType !== subTypes.histogram && handleZValueConfirm}\r\n                zValues={subType !== subTypes.histogram && zValues}\r\n                extent={subType !== subTypes.histogram && extent}\r\n                downloadCsv={downloadCsv}\r\n                chart={chart}\r\n            />\r\n            {plots}     \r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SpaceTimeChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport months from '../../Enums/months';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst TimeSeriesChart = (props) => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, dates, parameters, metadata } = data;\r\n\r\n    const [ markerOptions, setMarkerOptions ] = React.useState({opacity: .2, color:'#ff1493', size: 6});\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Time: ${dates[i].slice(0,10)}<br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(dates[0], data.hasHour, data.isMonthly) :\r\n        handleChartDateString(dates[0], data.hasHour, data.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], data.hasHour, data.isMonthly);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = parameters.depth2 === 0 ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    const x = data.isMonthly ? dates.map(date => months[parseInt(date)]) : dates;\r\n\r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n                chart={props.chart}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                  {\r\n                    // mode: 'lines+markers',\r\n                    mode: showLines ? 'lines+markers' : 'markers',\r\n                    x: x,\r\n                    y: variableValues,\r\n                    error_y: {\r\n                        type: 'data',\r\n                        array: stds,\r\n                        opacity: 0.3,\r\n                        color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                        visible: true\r\n                    },\r\n\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    // type: 'scatter',\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    line: {color: markerOptions.color},\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                  },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${metadata.Dataset_Name}` +\r\n                            `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            depth + \r\n                            `<br>Lat: ${lat}, ` +\r\n                            `Lon: ${lon}`,\r\n                        font: {\r\n                            size: 12\r\n                        }\r\n                    },\r\n                  xaxis: {\r\n                      title: data.isMonthy? 'Month' : 'Time',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  yaxis: {\r\n                      title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(TimeSeriesChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst DepthProfileChart = (props) => {\r\n\r\n    const { setLoadingMessage, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, depths, parameters, metadata } = data;\r\n\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    var infoObject = data;\r\n\r\n    const [markerOptions, setMarkerOptions] = React.useState({opacity: .2, color:'#ff1493', size: 6})\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Depth: ${format('.2f')(depths[i])} [m] <br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }    \r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    const date1 = infoObject.isMonthly ? new Date(parameters.dt1).getMonth() + 1 : parameters.dt1;\r\n    const date2 = infoObject.isMonthly ? new Date(parameters.dt2).getMonth() + 1 : parameters.dt2;\r\n\r\n    const date = date1 === date2 ? handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) :\r\n            handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(date2, infoObject.hasHour, infoObject.isMonthly);\r\n            return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n                chart={props.chart}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                    {   \r\n                        // mode: 'lines+markers',\r\n                        mode: showLines ? 'lines+markers' : 'markers',\r\n                        y: depths,\r\n                        x: variableValues,\r\n                        error_x: {\r\n                            type: 'data',\r\n                            array: stds,\r\n                            opacity: 0.3,\r\n                            color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                            visible: true\r\n                        },\r\n                        name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                        // type: 'scatter',\r\n                        type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n\r\n                        marker: {\r\n                            line: {color: markerOptions.color},\r\n                            opacity: markerOptions.opacity,\r\n                            size: markerOptions.size,\r\n                            color: markerOptions.color\r\n                        },\r\n\r\n                        hoverinfo: 'text',\r\n                        hovertext\r\n                    },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${metadata.Dataset_Name}` +\r\n                            `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                            `Lat: ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0, ` +\r\n                            `Lon: ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`,\r\n                        font: {\r\n                            size: 12\r\n                        }\r\n                    },\r\n                        \r\n                  yaxis: {\r\n                      title: 'Depth[m]',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power',\r\n                      autorange:'reversed'\r\n                    },\r\n                  xaxis: {\r\n                      title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(DepthProfileChart));","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport visualizationSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nconst handleSectionMap = (subsets, infoObject, splitByDate, splitBySpace, orientation, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const dates = Array.from(infoObject.dates);\r\n    const depths = Array.from(infoObject.depths);\r\n    const lats = Array.from(infoObject.lats);\r\n    const lons = Array.from(infoObject.lons);\r\n\r\n    const distinctMeridiansOrParallelsForSplitting = \r\n        orientation === 'zonal' ?\r\n        lats : \r\n        lons;\r\n\r\n    const xAxis = orientation === 'zonal' ?\r\n        'Longitude' :\r\n        'Latitude';\r\n\r\n    let xTicks = parameters.lon1 > parameters.lon2 && orientation === 'zonal' ? handleXTicks(infoObject) : {};\r\n\r\n\r\n    return subsets.map((subset, index) => {\r\n        let z = subset;\r\n        let x = [];\r\n        let y = [];\r\n\r\n        if(orientation === 'zonal'){\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lons[Math.floor(i / depths.length)])\r\n            }\r\n        } else {\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lats[Math.floor(i / depths.length)])\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < subset.length; i++){\r\n            y.push(depths[i % depths.length]);\r\n        }\r\n\r\n        const latTitle = orientation === 'meridional' ? `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = orientation === 'zonal' ? `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n\r\n        const date = dates.length < 2 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            splitByDate && splitBySpace ? handleChartDateString(dates[Math.floor(index / distinctMeridiansOrParallelsForSplitting.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            splitByDate ? handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly) :\r\n            'Averaged Values ' + handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        let hovertext = z.map((value, i) => {\r\n            \r\n            if(orientation === 'zonal'){\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            } else {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lat: ${format('.2f')(x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lat: ${format('.2f')(x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            }\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    zsmooth: subset.length < 20000 ? 'best' : 'fast',\r\n                    x,\r\n                    y,\r\n                    z,\r\n                    name: parameters.fields,\r\n                    type: infoObject.subType === visualizationSubTypes.contourSectionMap ? 'contour' : 'heatmap',\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: '.2e'\r\n                    },\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                }\r\n            ]}                \r\n            key={index}\r\n\r\n            layout= {{\r\n                font: {color: '#ffffff'},\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${xAxis}[\\xB0]`,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Depth[m]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: 'reversed'\r\n                },\r\n                paper_bgcolor: colors.backgroundGray,\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n\r\n            }}   \r\n        />\r\n        )\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SectionMapChart = (props) => {\r\n\r\n    const { classes, snackbarOpen, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { dates, extent, lats, lons, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitBySpace, setSplitBySpace] = useState(false);\r\n    const [orientation, setOrientation] = useState(data.orientation);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    var spaces = orientation === 'zonal' ? lats : lons;\r\n\r\n    const subsets = data.generatePlotData(orientation, splitByDate, splitBySpace);\r\n    var plots = handleSectionMap(subsets, data, splitByDate, splitBySpace, orientation, palette, zMin, zMax);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const onToggleSplitBySpace = () => {\r\n        let chartCount = splitByDate ? dates.size : 1;\r\n        if(!splitBySpace && chartCount * spaces.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitBySpace(!splitBySpace);\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = splitBySpace ? spaces.size : 1;\r\n        if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitByDate(!splitByDate);\r\n            }, 100)\r\n        }     \r\n    }\r\n\r\n    const switchOrientation = () => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setOrientation(orientation === 'zonal' ? 'meridional' : 'zonal');\r\n        }, 100)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.buttonBlock}>\r\n            <ChartControlPanel\r\n                orientation={orientation}\r\n                switchOrientation={switchOrientation}\r\n                onToggleSplitBySpace={spaces.size === 1 ? null : onToggleSplitBySpace}\r\n                splitBySpace={splitBySpace}\r\n                onToggleSplitByDate={dates.size === 1 ? null : onToggleSplitByDate}\r\n                splitByDate={splitByDate}\r\n                handlePaletteChoice={handlePaletteChoice}\r\n                handleZValueConfirm={handleZValueConfirm}\r\n                zValues={zValues}\r\n                extent={extent}\r\n                downloadCsv={downloadCsv}\r\n                chart={props.chart}\r\n            />\r\n            </div>\r\n            {plots}      \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SectionMapChart));","import React from 'react';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst SparseScatter = (props) => {\r\n    const {\r\n        xValues,\r\n        yValues,\r\n        markerOptions,\r\n        infoObject,\r\n        xTitle,\r\n        yTitle,\r\n        type\r\n    } = props;\r\n\r\n    const { parameters, metadata, hasDepth, variableValues, times, lats, lons, depths } = infoObject;\r\n\r\n    // const title = `${parameters.fields} [${metadata.Unit}]`;\r\n    \r\n    var hovertext;\r\n\r\n    switch(type){\r\n        case 'time':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'latitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lat: ${lats[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'longitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lon: ${lons[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'depth':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Depth: ${depths[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        default:\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n        }\r\n        \r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n    \r\n            data={[\r\n                {\r\n                    x: xValues,\r\n                    y: yValues,\r\n                    mode: 'markers',\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    // type: 'scatter',\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                },\r\n            ]}\r\n            config={{...chartBase.config}}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                // width: 800,\r\n                // height: 570,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: xTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                yaxis: {\r\n                    title: yTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: type === 'depth' ? 'reversed' : true\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n            }}            \r\n        />\r\n    )\r\n}\r\n\r\nexport default SparseScatter;","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport SparseScatter from './SparseScatter';\r\n\r\nconst handleSparseMap = (infoObject, palette, zValues) => {\r\n\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !infoObject.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n            \r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zValues[0],\r\n                    zmax: zValues[1],\r\n                    lon: infoObject.lons,\r\n                    lat: infoObject.lats,\r\n                    z: infoObject.variableValues,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    radius: 6,                    \r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'densitymapbox',\r\n                    \r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    },\r\n                }\r\n            ]}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                mapbox: {\r\n                    style: \"white-bg\",\r\n                    layers: [\r\n                        {\r\n                            sourcetype: \"raster\",\r\n                            source: [\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"],\r\n                            below: \"traces\"\r\n                        }\r\n                    ],\r\n                    center: infoObject.center,\r\n                    zoom: infoObject.zoom\r\n                },\r\n\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}\r\n            \r\n            config={{\r\n                ...chartBase.config,\r\n                mapboxAccessToken:\r\n                  \"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w\",\r\n                \r\n              }}\r\n        />)\r\n}\r\n\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n\r\n    tabs: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    tab: {\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        fontSize: '15px',\r\n        textTransform: 'none',\r\n        color: theme.palette.primary.main\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nfunction tabProps(index) {\r\n    return {\r\n      id: `sparse-tab-${index}`,\r\n      'aria-controls': `sparse-tab-${index}`,\r\n    };\r\n  }\r\n\r\nconst SparseTabPanel = (props) => {\r\n    const { children, selectedTab, index, controlPanelProps } = props;\r\n\r\n    return (\r\n        <div hidden={selectedTab !== index}>\r\n            <ChartControlPanel\r\n                {...controlPanelProps}\r\n                chart={props.chart}\r\n            />\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst SparseMap = React.memo((props) => {\r\n\r\n    const { classes, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata } = data;\r\n\r\n    const [palette, setPalette] = useState('Heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [markerOptions, setMarkerOptions] = useState({opacity: .7, color:'#ff1493', size: 6});\r\n    const [tab, setTab] = useState(0);\r\n\r\n    const plot = handleSparseMap(data, palette, zValues)\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleTabChange = (event, newValue) => {\r\n        setTab(newValue)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const forceResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);        \r\n    }\r\n\r\n    const controlPanelProps = {\r\n        map: {\r\n            palette,\r\n            handlePaletteChoice,\r\n            zValues,\r\n            handleZValueConfirm,\r\n            downloadCsv\r\n        },\r\n\r\n        scatter: {\r\n            downloadCsv,\r\n            markerOptions,\r\n            setMarkerOptions,\r\n            handleMarkerOptionsConfirm\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Tabs \r\n                value={tab} \r\n                onChange={handleTabChange} \r\n                aria-label=\"Sparse tabs\" \r\n                centered\r\n                indicatorColor='primary'\r\n                className={classes.tabs}\r\n            >\r\n                <Tab label=\"Map\" {...tabProps(0)} className={classes.tab} onClick={forceResize}/>\r\n                <Tab label=\"By Time\" {...tabProps(1)} className={classes.tab}/>\r\n                <Tab label=\"By Lat\" {...tabProps(2)} className={classes.tab}/>\r\n                <Tab label=\"By Lon\" {...tabProps(3)} className={classes.tab}/>\r\n                {data.hasDepth && <Tab label=\"By Depth\" {...tabProps(4)} className={classes.tab}/>}\r\n            </Tabs>\r\n            <SparseTabPanel selectedTab={tab} index={0} controlPanelProps={controlPanelProps.map} chart={props.chart}>\r\n                {tab === 0 && plot}\r\n            </SparseTabPanel>\r\n            \r\n            <SparseTabPanel selectedTab={tab} index={1} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 1 &&\r\n                    <SparseScatter\r\n                        xValues={data.times}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Time'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]`}\r\n                        type='time'\r\n                    />\r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={2} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 2 &&\r\n                    <SparseScatter\r\n                        xValues={data.lats}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Latitude'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                        type='latitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={3} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 3 && \r\n                    <SparseScatter\r\n                        xValues={data.lons}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Longitude'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                        type='longitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            {data.hasDepth &&\r\n                <SparseTabPanel selectedTab={tab} index={4} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                    {tab === 4 &&\r\n                        <SparseScatter\r\n                            xValues={data.variableValues}\r\n                            yValues={data.depths}\r\n                            markerOptions={markerOptions}\r\n                            infoObject={data}\r\n                            xTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                            yTitle='Depth[m]'\r\n                            type='depth'\r\n                        />                    \r\n                    }\r\n                </SparseTabPanel>            \r\n            }\r\n                \r\n        </div>\r\n    )\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseMap));","// Wrapper for charts\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { IconButton, Paper } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport SpaceTimeChart from './SpaceTimeChart';\r\nimport TimeSeriesChart from './TimeSeriesChart';\r\nimport DepthProfileChart from './DepthProfileChart';\r\nimport SectionMapChart from './SectionMapChart';\r\nimport SparseMap from './SparseMap';\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts,\r\n    plotsActiveTab: state.plotsActiveTab\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  deleteChart\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  chartPaper: {\r\n    backgroundColor: colors.backgroundGray,\r\n    marginBottom: '5h',\r\n    paddingTop: theme.spacing(1),\r\n    boxShadow: '2px 2px 2px 2px #242424',    \r\n    width: 'max-content',\r\n    margin: '0 auto 5vh auto',\r\n    '@media (min-width: 1280px)': {\r\n      textAlign: 'left',\r\n      margin: '0 0 5vh 360px'\r\n    }\r\n  }\r\n})\r\n\r\nconst SamplePlot = () => {\r\n  let x = [0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4];\r\n  let y = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,];\r\n  let z = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4];\r\n  \r\n  return (\r\n\r\n      <Plot\r\n      useResizeHandler={true}\r\n      style= {{\r\n          position: 'relative',\r\n          display:'inline-block',\r\n          // marginTop: '30px',\r\n          width: '66vw',\r\n          height: '44vw'\r\n      }}\r\n      \r\n      data={[\r\n          {   \r\n              x,\r\n              y,\r\n              z,\r\n              connectgaps: false,\r\n              zsmooth: 'best',\r\n\r\n              name: 'Test',\r\n              type: 'heatmap',\r\n              contours: {\r\n                  showlabels: true,\r\n                  labelfont: {\r\n                      family: 'Raleway',\r\n                      size: 12,\r\n                      color: 'white',\r\n                  },\r\n                  labelformat: '.2e'\r\n              },\r\n              colorbar: {\r\n                  title: {\r\n                      text: `test`\r\n                  },\r\n                  exponentformat: 'power'\r\n              }\r\n          }\r\n      ]}\r\n\r\n      config={{responsive: true}}\r\n      \r\n      layout= {{\r\n        autosize: true,\r\n          font: {color: '#ffffff'},\r\n          margin: {\r\n            t: 50\r\n          },\r\n          title: {\r\n              text: `A sample chart title`,\r\n              font: {\r\n                size: 16\r\n              }\r\n          },\r\n          paper_bgcolor: colors.backgroundGray,\r\n          xaxis: {title: 'Longitude', color: '#ffffff'},\r\n          yaxis: {title: 'Latitude', color: '#ffffff'},\r\n          annotations: [\r\n              {\r\n                  text: `Brought to you by chef boyardee`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                  yref: 'paper',\r\n                  y: -.24,\r\n                  showarrow: false,\r\n                  xref: 'paper',\r\n                  x: .5\r\n                  }\r\n              ]\r\n              \r\n          }}   \r\n          />\r\n          )\r\n}\r\n\r\nconst closeChartStyles = {\r\n    closeChartIcon: {\r\n      float: 'right',\r\n      marginTop: '-12px',\r\n      marginRight: '-8px'\r\n    }\r\n}\r\n\r\nconst _CloseChartIcon = (props) => {\r\n  const { classes } = props;\r\n  return (\r\n    <React.Fragment>\r\n      <IconButton className={classes.closeChartIcon} color=\"inherit\" onClick={() => props.handleDeleteChart(props.chartIndex)} disableFocusRipple disableRipple>\r\n        <Delete/>\r\n      </IconButton>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst CloseChartIcon = withStyles(closeChartStyles)(_CloseChartIcon);\r\n\r\nclass Charts extends Component {\r\n\r\n  handleDeleteChart = (chartIndex) => {\r\n    this.props.deleteChart(chartIndex);\r\n  }\r\n\r\n    render(){\r\n        const { classes, charts, plotsActiveTab } = this.props;\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                {charts.map((chart, index) => {\r\n                    switch(chart.data.parameters.spName){\r\n\r\n                        case storedProcedures.spaceTime:\r\n                          if(chart.subType === vizSubTypes.sparse) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseMap chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          } else if(chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseHistogram chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          }\r\n                          else return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SpaceTimeChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.timeSeries:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <TimeSeriesChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.depthProfile:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <DepthProfileChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.sectionMap:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SectionMapChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n                        \r\n                        default:\r\n                          return '';\r\n                  }\r\n                })}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Charts));","const setsFromList = (list, setKeys) => {\r\n    // return an object literal where each value is a set containing the unique values for that key\r\n    let result = {};\r\n\r\n    setKeys.forEach(key => result[key] = new Set());\r\n\r\n    list.forEach(item => {\r\n        setKeys.forEach(key => {\r\n            if(Array.isArray(item[key])){\r\n                item[key].forEach(subItem => result[key].add(subItem));\r\n            }\r\n\r\n            else if(item[key]) result[key].add(item[key]);\r\n        })\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\nexport default setsFromList;","// Cruise exploration component\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport * as JsSearch from 'js-search';\r\nimport { VariableSizeList } from 'react-window';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Search, ZoomOutMap } from '@material-ui/icons';\r\nimport { Table, TableBody, TableCell, TableRow, Link, Icon, Tooltip, Grid, Typography, TextField, InputAdornment, Paper, Button } from '@material-ui/core';\r\nimport { Close, ExpandMore, ChevronRight } from '@material-ui/icons';\r\n\r\nimport { cruiseListRequestSend, cruiseTrajectoryRequestSend, cruiseTrajectoryClear } from '../../Redux/actions/visualization';\r\n\r\nimport MultiCheckboxDropdown from '../UI/MultiCheckboxDropdown';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport setsFromList from '../../Utility/setsFromList';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    cruiseList: state.cruiseList,\r\n    getCruiseListState: state.getCruiseListState,\r\n    windowHeight: state.windowHeight\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseListRequestSend,\r\n    cruiseTrajectoryRequestSend,\r\n    cruiseTrajectoryClear\r\n}\r\n\r\nconst esriFonts = '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif';\r\nconst esriFontColor = 'white';\r\n\r\nconst styles = theme => ({\r\n    outerDiv: {\r\n        padding:'12px',\r\n        maxWidth: '360px',\r\n        backgroundColor: 'transparent',\r\n        color: esriFontColor,\r\n        borderRadius: '4px',\r\n        boxShadow: '2px',\r\n        backdropFilter: 'blur(2px)',\r\n        transform: 'translateY(35px)',\r\n        marginTop: '24px',\r\n        position: 'fixed',\r\n        left: 0,\r\n        top: 140\r\n    },\r\n\r\n    cruiseInfo: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        margin: '12px auto 0 auto',\r\n    },\r\n\r\n    cruiseInfoCell: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        borderStyle: 'none',\r\n    },\r\n\r\n    linkWrapper: {\r\n        padding: '12px',\r\n        fontSize: '14px'\r\n    },\r\n\r\n    searchMenuPaper: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        bottom: 60,\r\n        left: 0,\r\n        width: '98vw',\r\n        height: 'auto',\r\n        zIndex: 1500,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n\r\n    closeIcon: {\r\n        float: 'right',\r\n        cursor: 'pointer',\r\n        color: colors.primary,\r\n        textTransform: 'none',\r\n        fontSize: '15px'\r\n    },\r\n\r\n    inputRoot: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    openSearchButtonPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n    },\r\n\r\n    openSearchButton: {\r\n        textTransform: 'none',\r\n        color: colors.primary,\r\n        fontSize: '15px',\r\n        padding: '6px 42px'\r\n    },\r\n\r\n    resetButton: {\r\n        textTransform: 'none',\r\n        width: '160px',\r\n        height: '37px',\r\n        color: theme.palette.primary.main,\r\n        borderColor: theme.palette.primary.main,\r\n        marginTop: '12px'\r\n    },\r\n\r\n    yearHeader: {\r\n        backgroundColor: 'rgba(0, 0, 0, .7)',\r\n        height: '36px',\r\n        fontSize: '17px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyCOntent: 'center'\r\n    },\r\n\r\n    searchOption: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    memberCount: {\r\n        color: colors.primary,\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    variablesWrapper: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        paddingTop: '6px'\r\n    },\r\n\r\n    variableItem: {\r\n        height: '32px',\r\n        textAlign: 'left',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n    },\r\n\r\n    cruiseName: {\r\n        width: '100%',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    heading: {\r\n        textAlign: 'left',\r\n        padding: '8px 6px',\r\n        color: colors.primary,\r\n        fontSize: '16px',\r\n        marginTop: '5px',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    cruiseYearHeader: {\r\n        textAlign: 'left',\r\n        fontSize: '9px',\r\n        color: colors.primary\r\n    }\r\n})\r\n\r\nconst searchFilterGroupCruises = (cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, selectedSeries, search) => {\r\n    cruises = [...cruises];\r\n    if(searchField) cruises = search.search(searchField);\r\n    if(selectedYears && selectedYears.size) cruises = cruises.filter(e => selectedYears.has(e.Year));\r\n    if(selectedChiefScientists && selectedChiefScientists.size) cruises = cruises.filter(e => selectedChiefScientists.has(e.Chief_Name));\r\n    if(selectedRegions && selectedRegions.size) cruises = cruises.filter(e => e.Regions.some(region => selectedRegions.has(region)));\r\n    if(selectedSeries && selectedSeries.size) cruises = cruises.filter(e => selectedSeries.has(e.Series));\r\n\r\n    let cruisesGroupedByYear = cruises.reduce((acc, cur) => {\r\n        if(!acc[cur.Year]) acc[cur.Year] = [];    \r\n        acc[cur.Year].push(cur);    \r\n        return acc;\r\n    }, {});\r\n\r\n    cruisesGroupedByYear = Object.keys(cruisesGroupedByYear).map(key => ({year: key, cruises: cruisesGroupedByYear[key]})).sort((a, b) => a.year < b.year ? 1 : -1);\r\n\r\n    return {cruisesGroupedByYear, cruises};\r\n}\r\n\r\nconst defaultSearchAndFilterState = {\r\n    selectedYears: new Set(), \r\n    selectedChiefScientists: new Set(), \r\n    selectedRegions: new Set(), \r\n    searchField: '',\r\n    openYearGroup: null,\r\n    selectedSeries: new Set()\r\n};\r\n\r\nconst defaultOptionSets = {\r\n    Regions: new Set(),\r\n    Year: new Set(),\r\n    Chief_Name: new Set(),\r\n    Series: new Set()\r\n}\r\n\r\nconst listRef = React.createRef();\r\nclass CruiseSelector extends Component {\r\n    \r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Nickname');\r\n        search.addIndex('Name');\r\n        search.addIndex('Chief_Name');\r\n        search.addIndex('Keywords');\r\n\r\n        try{\r\n            if(props.cruiseList && props.cruiseList.length) {\r\n                search.addDocuments(props.cruiseList);\r\n            }\r\n        } catch(e) {\r\n            console.log(e);\r\n            console.log(props.cruiseList);\r\n        }\r\n        // cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, search\r\n        let { cruisesGroupedByYear, cruises } = this.props.cruiseList && this.props.cruiseList.length ? \r\n            searchFilterGroupCruises(\r\n                props.cruiseList, '', new Set(), new Set(), new Set(), new Set(), search\r\n            ) : \r\n            {cruisesGroupedByYear: [], cruises: []};\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.state = {\r\n            search,\r\n            selectedCruise: null,\r\n            searchMenuOpen: false,\r\n            cruisesGroupedByYear,\r\n            cruises,\r\n            optionSets,\r\n            ...defaultSearchAndFilterState\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.props.handleShowGlobe();\r\n        if(!this.props.cruiseList || !this.props.cruiseList.length) this.props.cruiseListRequestSend();\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.cruiseTrajectoryClear()\r\n    }\r\n\r\n    handleCruiseSelect = (selection) => {\r\n        if(selection){\r\n            this.props.cruiseTrajectoryRequestSend(selection.ID);\r\n        }\r\n\r\n        this.setState({...this.state, selectedCruise: selection, searchMenuOpen: false});\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);         \r\n            let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(this.props.cruiseList, '', new Set(), new Set(), new Set(), new Set(), this.state.search);\r\n            let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n            this.setState({...this.state, cruisesGroupedByYear, cruises, optionSets});\r\n        }\r\n\r\n        if(prevState.cruisesGroupedByYear !== this.state.cruisesGroupedByYear) listRef.current.resetAfterIndex(0);\r\n    }\r\n\r\n    handleChangeSearchValue = (e) => {\r\n        // cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, search\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            e.target.value, \r\n            this.state.selectedYears, \r\n            this.state.selectedChiefScientists, \r\n            this.state.selectedRegions,\r\n            this.state.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let newOptionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n        let oldOptionSets = {...this.state.optionSets};\r\n\r\n        let optionSets = {\r\n            Chief_Name: this.state.selectedChiefScientists.size ? oldOptionSets.Chief_Name : newOptionSets.Chief_Name,\r\n            Year: this.state.selectedYears.size ? oldOptionSets.Year : newOptionSets.Year,\r\n            Regions: this.state.selectedRegions.size ? oldOptionSets.Regions : newOptionSets.Regions,\r\n            Series: this.state.selectedSeries.size ? oldOptionSets.Series : newOptionSets.Series\r\n        };\r\n        \r\n        this.setState({...this.state, searchField: e.target.value, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleCloseSearch = () => {\r\n        this.setState({...this.state, searchMenuOpen: false});\r\n    }\r\n\r\n    handleClearMultiSelect = (statePiece) => {\r\n        let tempNewState = {...this.state, [statePiece]: new Set()};\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            tempNewState.searchField, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleResetSearch = () => {\r\n        let tempNewState = {...this.state, ...defaultSearchAndFilterState};\r\n\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            tempNewState.searchField, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleClickCheckbox = (e, checked) => {\r\n        let [ column, value ] = e.target.name.split('!!');\r\n        let newSet = new Set(this.state[column]);\r\n\r\n        checked ? newSet.add(value) : newSet.delete(value);\r\n\r\n        let tempNewState = {...this.state, [column]: newSet};\r\n\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            e.target.value, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let newOptionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n        let oldOptionSets = {...this.state.optionSets};\r\n\r\n        let optionSets = {\r\n            Chief_Name: tempNewState.selectedChiefScientists.size ? oldOptionSets.Chief_Name : newOptionSets.Chief_Name,\r\n            Year: tempNewState.selectedYears.size ? oldOptionSets.Year : newOptionSets.Year,\r\n            Regions: tempNewState.selectedRegions.size ? oldOptionSets.Regions : newOptionSets.Regions,\r\n            Series: tempNewState.selectedSeries.size ? oldOptionSets.Series : newOptionSets.Series\r\n        };\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleSetopenYearGroup = (index, year) => {\r\n        if(listRef.current) {\r\n\r\n            // Make sure the group being opened is in view\r\n            let listHeight = this.props.windowHeight - 249;\r\n            let currentOffset = listRef.current.state.scrollOffset;\r\n            let targetOffset = index * 38;\r\n\r\n            if(index !== null && (targetOffset < currentOffset - 10 || targetOffset > currentOffset + listHeight - 20)){\r\n                setTimeout(() => listRef.current.scrollToItem(index, 'start'), 10);\r\n            }\r\n\r\n            listRef.current.resetAfterIndex(0);\r\n        }\r\n\r\n        this.setState({...this.state, openYearGroup: this.state.openYearGroup === year ? null : year});\r\n    }\r\n\r\n    render(){\r\n        const { \r\n            searchField, \r\n            selectedCruise, \r\n            searchMenuOpen, \r\n            selectedYears, \r\n            selectedChiefScientists, \r\n            selectedRegions,\r\n            selectedSeries,\r\n            openYearGroup,\r\n            optionSets,\r\n            cruisesGroupedByYear,\r\n            cruises\r\n        } = this.state;\r\n\r\n        const { classes, windowHeight } = this.props;\r\n\r\n        return (\r\n            <>\r\n                <Paper className={classes.searchMenuPaper} style={searchMenuOpen ? {} : {display: 'none'}}>\r\n                    <Grid container>\r\n                        <Grid item xs={12}>\r\n                            <Typography style={{display: 'inline-block'}}>\r\n                                Search and filter using the controls on the left. Select a cruise from the list on the right.\r\n                            </Typography>\r\n\r\n                            <Button\r\n                                startIcon={<Close style={{fontSize: '22px'}}/>}\r\n                                onClick={this.handleCloseSearch}\r\n                                className={classes.closeIcon}\r\n                            >\r\n                                Close\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} style={{overflowY: 'auto', maxHeight: windowHeight - 204, padding: '16px', backgroundColor: 'rgba(0,0,0,.4)'}}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    name='searchTerms'\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    placeholder='Search'\r\n                                    value={searchField}\r\n                                    InputProps={{\r\n                                        classes: {\r\n                                            root: classes.inputRoot\r\n                                        },\r\n                                        startAdornment: (\r\n                                            <React.Fragment>\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <Search style={{color: colors.primary}}/>\r\n                                                </InputAdornment>\r\n                                            </React.Fragment>\r\n                                        )\r\n                                    }}\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Regions).sort()}\r\n                                selectedOptions={selectedRegions}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedRegions')}\r\n                                parentStateKey={'selectedRegions'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Region'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Year).sort((a, b) => a < b ? 1 : -1)}\r\n                                selectedOptions={selectedYears}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedYears')}\r\n                                parentStateKey={'selectedYears'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Year'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Chief_Name).sort()}\r\n                                selectedOptions={selectedChiefScientists}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedChiefScientists')}\r\n                                parentStateKey={'selectedChiefScientists'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Chief Scientist'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Series).sort()}\r\n                                selectedOptions={selectedSeries}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedSeries')}\r\n                                parentStateKey={'selectedSeries'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Cruise Series'\r\n                            />\r\n\r\n                            <Grid item xs={12} className={classes.searchPanelRow}>\r\n                                <Button variant='outlined' onClick={this.handleResetSearch} className={classes.resetButton}>\r\n                                    Reset Filters\r\n                                </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={8} style={{paddingTop: '12px'}}>\r\n\r\n                        <Grid container>\r\n                            <Grid item xs={9}>\r\n                                <Typography className={classes.heading}>\r\n                                    Showing {cruises.length} cruises (grouped by year)\r\n                                </Typography>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={3} container justify='flex-start' alignItems='center'>\r\n                                <Typography variant='caption' style={{color: colors.primary, marginBottom: '-16px'}}>\r\n                                    Cruise Count\r\n                                </Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n        \r\n                        <VariableSizeList\r\n                            ref={listRef}\r\n                            itemData={cruisesGroupedByYear}\r\n                            itemCount={cruisesGroupedByYear.length}\r\n                            height={windowHeight - 249}\r\n                            width='100%'\r\n                            estimatedItemSize={38}\r\n                            style={{overflowY: 'scroll'}}\r\n                            itemSize={(i) => openYearGroup === cruisesGroupedByYear[i].year ? cruisesGroupedByYear[i].cruises.length * 32 + 38 + 4 + 10 : 38}\r\n                        >\r\n\r\n                            {({ index, style }) => (\r\n                                <div style={style}>\r\n                                    <Grid \r\n                                        container \r\n                                        className={classes.searchOption}\r\n                                        onClick={() => this.handleSetopenYearGroup(index, cruisesGroupedByYear[index].year)}\r\n                                    >            \r\n                                        <Grid item xs={2} container alignItems='center'>\r\n                                            {openYearGroup === cruisesGroupedByYear[index].year ? \r\n                                                <ExpandMore className={classes.datasetOpenIcon}/> : \r\n                                                <ChevronRight className={classes.datasetOpenIcon}/>\r\n                                            }\r\n                                            <span className={classes.searchOptionsMenuItemText}>{cruisesGroupedByYear[index].year}</span>\r\n                                        </Grid>\r\n\r\n                                        <Grid item xs={7}>\r\n\r\n                                        </Grid>\r\n\r\n                                        <Tooltip title={`${cruisesGroupedByYear[index].cruises.length} cruises from this year match the search criteria`}>\r\n                                            <Grid item xs={1} className={classes.memberCount} container alignItems='center' justify='center'>\r\n                                                {cruisesGroupedByYear[index].cruises.length}\r\n                                            </Grid>\r\n                                        </Tooltip>\r\n                                    </Grid>\r\n                                    \r\n                                    {\r\n                                        cruisesGroupedByYear[index].year === openYearGroup ?\r\n                                        <Grid container className={classes.variablesWrapper}>\r\n                                            <Grid item container alignItems='center'>\r\n                                                <Grid item xs={1}> </Grid>\r\n\r\n                                                <Grid item xs={2} className={classes.cruiseYearHeader}>\r\n                                                    Official Designation\r\n                                                </Grid>\r\n\r\n                                                <Grid item xs={8} className={classes.cruiseYearHeader}>\r\n                                                    Nickname\r\n                                                </Grid>\r\n                                            </Grid>\r\n\r\n                                            {cruisesGroupedByYear[index].cruises.map((e, i) => (\r\n                                                <Grid \r\n                                                    item \r\n                                                    xs={12} \r\n                                                    key={e.Name} \r\n                                                    className={classes.variableItem} \r\n                                                    container \r\n                                                    alignItems='center'\r\n                                                    onClick={() => this.handleCruiseSelect(e)}\r\n                                                >   \r\n                                                    <Grid item xs={1}></Grid>\r\n\r\n                                                    <Grid item xs={2} className={classes.cruiseName}>{e.Name}</Grid>\r\n\r\n                                                    <Tooltip title={e.Nickname} enterDelay={300}>\r\n                                                        <Grid item xs={8} className={classes.cruiseName}>{e.Nickname}</Grid>\r\n                                                    </Tooltip>                                                    \r\n                                                </Grid>\r\n                                            ))}\r\n                                        </Grid>\r\n                                        : ''\r\n                                    }\r\n                                </div>\r\n                            )}\r\n                        </VariableSizeList>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n\r\n                <div id='cruise-selector' className={classes.outerDiv}>\r\n\r\n                    <Paper className={classes.openSearchButtonPaper}>\r\n                        <Button\r\n                            startIcon={<Search/>}\r\n                            className={classes.openSearchButton}\r\n                            onClick={() => this.setState({...this.state, searchMenuOpen: true})}\r\n                        >\r\n                            Search Cruises\r\n                        </Button>\r\n                    </Paper>\r\n                    \r\n                    {selectedCruise &&\r\n                        <>\r\n                        <Table size='small' className={classes.cruiseInfo}>\r\n                            <TableBody>\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Cruise:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Nickname:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.Nickname}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n\r\n                                {\r\n                                    selectedCruise.Start_Time &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Start Date:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Start_Time.slice(0,10)}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.End_Time &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            End Date:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.End_Time.slice(0,10)}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.Chief_Name &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Chief Scientist:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Chief_Name}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.Ship_Name &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Ship:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Ship_Name}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n                            </TableBody>\r\n                        </Table>\r\n                        \r\n                            <div className={classes.linkWrapper}>\r\n                                <Link \r\n                                    component={RouterLink} \r\n                                    to={`/catalog/cruises/${selectedCruise.Name}`}\r\n                                    target='_blank'\r\n                                >\r\n                                    Open Cruise Catalog Page\r\n                                </Link>\r\n                            </div>\r\n                        </>\r\n                    }\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(CruiseSelector));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Scene } from '@esri/react-arcgis';\r\n\r\nimport CruiseSelector from './CruiseSelector';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport Draggable from 'react-draggable';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        margin: '0 auto 0 auto',\r\n        width: '100vw',\r\n        height: '100vh',\r\n    }\r\n})\r\n\r\n// const drawButtonStyles = (theme) => ({\r\n//     outerDiv: {\r\n//         // padding:'12px 0 12px 0',\r\n//         backgroundColor: 'transparent',\r\n//         // width: '180px',\r\n//         borderRadius: '4px',\r\n//         marginRight: '20px',\r\n//         position: 'fixed',\r\n//         top: '60px',\r\n//         right: '12px',\r\n//     },\r\n\r\n//     drawButton: {\r\n//         // border: '1px solid #333333',\r\n//         border: `1px solid #333333`,\r\n//         borderRadius: '4px',\r\n//         color: colors.primary,        \r\n//         cursor: 'pointer',\r\n//         padding: '6px',\r\n//         width: '160px',\r\n//         fontSize:'14px',\r\n//         backgroundColor: colors.backgroundGray,\r\n//         boxShadow: '1px 1px 1px 1px #242424',\r\n//         // backgroundColor: 'rgba(255, 128, 0, .8)',\r\n//         // backgroundColor: 'transparent',\r\n//         fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n//         '&:hover': { \r\n//             borderColor: 'white'\r\n//         },\r\n//     },\r\n\r\n//     helpText: {\r\n//         marginTop: 0,\r\n//         color: 'white',\r\n//         fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif'\r\n//     },\r\n\r\n//     cancelButton: {\r\n//         display: 'none',\r\n//         color: 'white'\r\n//     }\r\n// })\r\n\r\n// const DrawButtonRaw = (props) => {\r\n//     const { classes, showHelp } = props;\r\n\r\n//     return (\r\n//         <Draggable>\r\n//             <div className={classes.outerDiv} id='draw-region-div'>\r\n//                 {showHelp && <p className={classes.helpText}>Click once to draw <br/>and again to finish</p>}\r\n//                 <button id='draw-button' className={classes.drawButton}>\r\n//                     Select Region\r\n//                 </button>\r\n//                 <button id='cancel-button' className={`${classes.drawButton} ${classes.cancelButton}`}>\r\n//                     Cancel\r\n//                 </button>\r\n//             </div>\r\n//         </Draggable>\r\n//     )\r\n// }\r\n\r\n// const DrawButton = withStyles(drawButtonStyles)(DrawButtonRaw);\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst polylineSymbol = {\r\n    type: \"line-3d\",\r\n        symbolLayers: [\r\n            {\r\n                type: \"line\",\r\n                size: \"3px\",\r\n                material: {\r\n                    color: {\r\n                        r: 0,\r\n                        g: 255,\r\n                        b: 255,\r\n                        a: 0\r\n                    }\r\n                },\r\n            }\r\n        ]\r\n}\r\n\r\nclass UiComponents extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.sketchModel = new props.esriModules.SketchViewModel({\r\n            layer: props.regionLayer,\r\n            view: props.view,\r\n            polygonSymbol,\r\n            polylineSymbol,\r\n            defaultUpdateOptions: {\r\n                toggleToolOnClick: false,\r\n                tool: \"transform\"\r\n            }\r\n        })\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        // const { view, esriModules, regionLayer, setShowHelp } = this.props;\r\n        // var { sketchModel } = this;\r\n        const { view } = this.props;\r\n\r\n        // var drawButton = document.getElementById('draw-button');\r\n        // var cancelButton = document.getElementById('cancel-button');\r\n\r\n        // const throttledUpdate = throttle(75, (event) => {\r\n        //     if(event.state === 'active'){\r\n        //         this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n        //     }\r\n        // })\r\n\r\n        // sketchModel.on(\"create\", (event) => {\r\n        //     if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n        //         sketchModel.complete();\r\n        //     }\r\n\r\n        //     if(event.graphic && event.graphic.visible) {\r\n        //         event.graphic.visible = false;\r\n        //     }\r\n        //     if(event.state === 'cancel'){\r\n        //         setShowHelp(false);\r\n        //         // drawButton.style.display = 'inline-block';\r\n        //         // cancelButton.style.display = 'none';\r\n        //     }\r\n\r\n        //     if(event.state === \"complete\") {\r\n        //         setShowHelp(false);\r\n        //         this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n        //         // drawButton.style.display = 'inline-block';\r\n        //         // cancelButton.style.display = 'none';\r\n        //     }\r\n        // });\r\n\r\n        // sketchModel.on('create', throttledUpdate)\r\n\r\n        // sketchModel.on('update', (event) => {\r\n        //     if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n        //         if(event.state === 'cancel') return;\r\n        //         this.props.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n        //         // drawButton.style.display = 'inline-block';\r\n        //         // cancelButton.style.display = 'none';\r\n        //     }\r\n        // });   \r\n        \r\n        // drawButton.addEventListener(\"click\", (event) => {\r\n        //         regionLayer.removeAll();\r\n        //         setShowHelp(true);\r\n        //         sketchModel.create('polyline', {\r\n        //             mode:'click'            \r\n        //         });\r\n        //         drawButton.style.display = 'none';\r\n        //         cancelButton.style.display = 'inline-block';\r\n        // });\r\n\r\n        // cancelButton.addEventListener('click', (event) => {\r\n        //     sketchModel.cancel();\r\n        //     setShowHelp(false);\r\n        //     // drawButton.style.display = 'inline-block';\r\n        //     cancelButton.style.display = 'none';\r\n        // })\r\n\r\n        // view.ui.add('draw-region-div', 'bottom-right');\r\n        // view.ui.add('cruise-selector', 'top-right');\r\n\r\n        view.ui.remove('zoom');\r\n        view.ui.remove('navigation-toggle');\r\n        view.ui.remove('compass');\r\n        view.ui.remove('attribution');\r\n\r\n        return null;\r\n    }\r\n}\r\n\r\nconst TrajectoryController = React.memo((props) => {\r\n    const { cruiseTrajectory, trajectoryLayer, esriModules } = props;\r\n    \r\n    if(cruiseTrajectory){\r\n        const { lons, lats } = cruiseTrajectory;\r\n\r\n        let midIndex = Math.floor(lons.length / 2);\r\n\r\n        trajectoryLayer.removeAll();\r\n\r\n        var polyLines = [[]];\r\n        var lineIndex = 0;\r\n\r\n        let lonStart = lons[0];\r\n        let latStart = lats[0];\r\n        let maxDistance = 0;\r\n\r\n        // Create a new path array each time 180 lon is crossed\r\n        lons.forEach((lon, i) => {\r\n            let lat = lats[i];\r\n\r\n            let latDistance = Math.abs(lat - latStart);\r\n            let _lonDistance = Math.abs(lon - lonStart);\r\n            let lonDistance = _lonDistance > 180? 360 - _lonDistance : _lonDistance;\r\n\r\n            let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n            maxDistance = distance > maxDistance ? distance : maxDistance;\r\n\r\n            polyLines[lineIndex].push([lon, lat]);\r\n\r\n            if(i < lons.length - 1){\r\n                if((lon > 160 && lon < 180) && (lons[i + 1] > -180 && lons[i + 1] < -160)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n\r\n                if((lon > -180 && lon < -160) && (lon[i + 1] > 160 && lon[i + 1] < 180)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n            }\r\n        })\r\n\r\n        var cruiseTrajectorySymbol = {\r\n            type: 'line-3d',\r\n            symbolLayers: [{\r\n                type: 'line',\r\n                material: { color: [0, 255, 255, 1] },\r\n                cap:  'round',\r\n                join: 'round',\r\n                size: 2\r\n            }]\r\n        }\r\n\r\n        polyLines.forEach(line => {\r\n\r\n            let cruiseTrajectoryGeometry = {\r\n                type: 'polyline',\r\n                paths: line\r\n            }\r\n\r\n            let graphic = new esriModules.Graphic({\r\n                geometry: cruiseTrajectoryGeometry,\r\n                symbol: cruiseTrajectorySymbol\r\n            });\r\n\r\n            trajectoryLayer.add(graphic);\r\n        })\r\n\r\n        try {\r\n            const center = [lons[midIndex], lats[midIndex]];\r\n\r\n            var zoom = 7 - Math.floor(maxDistance / 6);            \r\n    \r\n            props.view.goTo({\r\n                target: center,\r\n                zoom\r\n            }, {\r\n                maxDuration: 2500,\r\n                speedFactor: .5\r\n            });    \r\n\r\n        } catch(e) {console.log(e)}\r\n\r\n    } else {\r\n        trajectoryLayer.removeAll();\r\n\r\n        props.view.goTo({\r\n            target: [-140, 30],\r\n            zoom: 3\r\n        }, {\r\n            maxDuration: 2500,\r\n            speedFactor: .5\r\n        }); \r\n    }\r\n    return '';\r\n})\r\n\r\nclass MapContainer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            showHelp: false\r\n        }\r\n        this.regionLayer = new props.esriModules.GraphicsLayer();\r\n        this.trajectoryLayer = new props.esriModules.GraphicsLayer();\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, esriModules, spParams, cruiseTrajectory, globeUIRef } = this.props;\r\n\r\n        // const lat1 = parseFloat(spParams.lat1);\r\n        // const lat2 = parseFloat(spParams.lat2);\r\n        // const lon1 = parseFloat(spParams.lon1);\r\n        // let _lon2 = parseFloat(spParams.lon2);\r\n        // const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n        // this.regionLayer.removeAll();\r\n\r\n        // var polygon = {\r\n        //     type: 'polygon', \r\n        //     rings: [\r\n        //         [lon1, lat1],\r\n        //         [lon2, lat1],\r\n        //         [lon2, lat2],\r\n        //         [lon1, lat2],\r\n        //         [lon1, lat1]\r\n        //     ]\r\n        // };\r\n\r\n        // let regionGraphic = new esriModules.Graphic({\r\n        //     geometry: polygon,\r\n        //     symbol: polygonSymbol\r\n        // })\r\n\r\n        // this.regionLayer.add(regionGraphic);\r\n\r\n        return (\r\n            <div className={classes.container} id='found-you'>\r\n                <Scene\r\n                    mapProperties={{ \r\n                        basemap: 'satellite',\r\n                        layers: [\r\n                            this.regionLayer,\r\n                            this.trajectoryLayer\r\n                        ],\r\n\r\n                    }}\r\n                    viewProperties={{\r\n                        center: [-140, 30],\r\n                        zoom: 3,\r\n                        highlightOptions: {\r\n                            haloOpacity: 0,\r\n                            haloColor: 'rgba(0, 0, 0, 0)',\r\n                            fillOpacity: 0,\r\n                            color: \"rgba(0, 0, 0, 0)\"\r\n                        }\r\n                    }}\r\n                >\r\n                    <TrajectoryController \r\n                        cruiseTrajectory={cruiseTrajectory}\r\n                        trajectoryLayer={this.trajectoryLayer}\r\n                        esriModules={esriModules}\r\n                    />\r\n                    <UiComponents\r\n                        updateDomainFromGraphicExtent = {this.props.updateDomainFromGraphicExtent}\r\n                        esriModules={esriModules}\r\n                        measurementPositions={this.props.measurementPositions}\r\n                        regionLayer={this.regionLayer}\r\n                        setShowHelp={(showHelp) => this.setState({...this.state, showHelp})}\r\n                        ref={globeUIRef}\r\n                    />\r\n                </Scene>\r\n\r\n                {/* <DrawButton showHelp={this.state.showHelp}/> */}\r\n                {/* <CruiseSelector updateParametersFromCruiseBoundary={this.props.updateParametersFromCruiseBoundary} showCruiseControl={this.props.showCruiseControl}/> */}\r\n            </div>            \r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(MapContainer);","const localDateToString = (date) => {\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate()\r\n\r\n    let nYear = year.toString();\r\n    let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n    let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n    return nYear + '-' + nMonth + '-' + nDay;\r\n}\r\n\r\nexport default localDateToString;","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { withStyles, Dialog, DialogContent, DialogTitle, Button } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: 'black',\r\n        width: '400px',\r\n        height: '180px'\r\n    },\r\n\r\n    button: {\r\n        textTransform: 'none',\r\n        marginLeft: '20px',\r\n        marginTop: '24px'\r\n    },\r\n});\r\n\r\nconst ModuleSelector = (props) => {\r\n    const { history, classes } = props;\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <Dialog \r\n                open\r\n                PaperProps={{\r\n                    className: classes.dialogPaper\r\n                }}\r\n            >\r\n                <DialogTitle>\r\n                    Select a Visualization Module\r\n                </DialogTitle>\r\n\r\n                <DialogContent>\r\n                    <Button\r\n                        variant='outlined'\r\n                        onClick={() => history.push('/visualization/charts')}\r\n                        className={classes.button}\r\n                        color='primary'\r\n                    >\r\n                        Charts and Plots\r\n                    </Button>\r\n\r\n                    <Button\r\n                        variant='outlined'\r\n                        onClick={() => history.push('/visualization/cruises')}\r\n                        color='primary'\r\n                        className={classes.button}\r\n                    >\r\n                        Explore Cruises\r\n                    </Button>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </React.Fragment>\r\n        )\r\n    }\r\n\r\nexport default withStyles(styles)(withRouter(ModuleSelector));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, BrowserRouter, Switch } from 'react-router-dom'\r\nimport Cookies from 'js-cookie';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginRequiredPrompt from '../User/LoginRequiredPrompt';\r\n// import VisualizationController from './VisualizationController';\r\nimport VizControlPanel from './VizControlPanel';\r\nimport NewVizControlPanel from './NewVizControlPanel';\r\nimport GuestPlotLimitNotification from './GuestPlotLimitNotification';\r\n\r\nimport { showLoginDialog, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { queryRequestSend, storedProcedureRequestSend, cruiseListRequestSend, completedShowCharts, plotsActiveTabSet, guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\n\r\nimport { loadModules } from 'esri-loader';\r\n\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nimport Charts from './Charts';\r\nimport MapContainer from './MapContainer';\r\nimport colors from '../../Enums/colors'\r\nimport cleanSPParams from '../../Utility/Visualization/cleanSPParams';\r\nimport localDateToString from '../../Utility/localDateToString';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport stars from '../../Utility/starsBase64';\r\nimport metaTags from '../../Enums/metaTags';\r\nimport ModuleSelector from './ModuleSelector';\r\nimport CruiseSelector from './CruiseSelector';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    sampleData: state.sampleData,\r\n    queryRequestState: state.queryRequestState,\r\n    maps: state.maps,\r\n    charts: state.charts,\r\n    data: state.data,\r\n    loadingMessage: state.loadingMessage,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    cruiseList: state.cruiseList,\r\n    showChartsOnce: state.showChartsOnce,\r\n    datasets: state.datasets,\r\n    catalog: state.catalog,\r\n    plotsActiveTab: state.plotsActiveTab,\r\n    userIsGuest: state.userIsGuest\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    queryRequestSend,\r\n    retrievalRequestSend,\r\n    storedProcedureRequestSend,\r\n    snackbarOpen,\r\n    cruiseListRequestSend,\r\n    completedShowCharts,\r\n    datasetRetrievalRequestSend,\r\n    plotsActiveTabSet,\r\n    guestPlotLimitNotificationSetIsVisible\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    displayNone: {\r\n        display: 'none'\r\n    },\r\n\r\n    background: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    showCharts: {\r\n        display: 'inline-block',\r\n        paddingTop: '180px',\r\n        width: 'calc(100vw - 10px)', //new\r\n        textAlign: 'left' //new\r\n    },\r\n\r\n    vizWrapper: {\r\n        minHeight: '100vh',\r\n        // overflow: 'hidden',\r\n        // width: '100vw',\r\n        background: `url(${stars})`\r\n    }\r\n})\r\n\r\nconst baseSPParams = {\r\n    tableName: '',\r\n    fields: null,\r\n    depth1: 0,\r\n    depth2: 0,\r\n    dt1: new Date(),\r\n    dt2: new Date(),\r\n    lat1: 0,\r\n    lat2: 0,\r\n    lon1: 0,\r\n    lon2: 0,\r\n    selectedVizType: ''\r\n}\r\n\r\nclass Visualization extends Component {\r\n    globeUIRef = React.createRef();\r\n    mapContainerRef = React.createRef();\r\n\r\n    state = {\r\n        filteredData: [],\r\n        opacity: 1,\r\n        showCharts: false,\r\n        showUI: false,\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        showCruiseControl: false,\r\n        spParams: baseSPParams\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        document.title = metaTags.visualization.title;\r\n        document.description = metaTags.visualization.description;\r\n        \r\n        // if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        // if(!this.props.cruiseList) this.props.cruiseListRequestSend();\r\n        // if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n\r\n        const esriModuleNames = [\r\n            'AreaMeasurement3D',\r\n            'Search',\r\n            'GraphicsLayer',\r\n            'SketchViewModel',\r\n            'Utils',\r\n            'Graphic',\r\n        ];\r\n\r\n        var loadedModules = await loadModules([\r\n            'esri/widgets/AreaMeasurement3D',\r\n            'esri/widgets/Search',\r\n            'esri/layers/GraphicsLayer',\r\n            'esri/widgets/Sketch/SketchViewModel',\r\n            'esri/geometry/support/webMercatorUtils',\r\n            'esri/Graphic',\r\n        ], {version: '4.14'});\r\n\r\n        var esriModules = esriModuleNames.reduce((accumulator, currentValue, currentIndex) => {\r\n            accumulator[currentValue] = loadedModules[currentIndex];\r\n            return accumulator;\r\n        }, {});\r\n        \r\n        this.setState({...this.state, esriModules});        \r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        document.title = metaTags.default.title;\r\n        document.description = metaTags.default.description;\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(this.props.showChartsOnce) {\r\n            this.props.completedShowCharts();\r\n            this.setState({...this.state, showCharts: true})\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, spParams: {...this.state.spParams, [event.target.name]: event.target.value}})\r\n    };\r\n\r\n    handleLatLonChange = (event) => {\r\n        this.setState({\r\n            ...this.state, \r\n            spParams: {...this.state.spParams, [event.target.name]: event.target.value},\r\n        })\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt1:newDate}});\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt2:newDate}});\r\n        }\r\n    }\r\n\r\n    onVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state.spParams;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: localDateToString(dt1),\r\n            dt2: localDateToString(dt2),\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.state.spParams.fields && this.state.spParams.fields.value,\r\n            tableName: this.state.spParams.fields && this.state.spParams.tableName,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.state.spParams.fields && this.state.spParams.fields.data\r\n        }\r\n    \r\n        this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    handlePlotsSetActiveTab = (event, newValue) => {\r\n        this.props.plotsActiveTabSet(newValue);\r\n    }\r\n\r\n    // Update the \"fields\" state piece when the variables input changes\r\n    // Field in this case refers to a react-select option, which contains catalog metadata\r\n    updateFields = (fields) => {\r\n        if(fields) {\r\n            let surfaceOnly = !fields.data.Depth_Max;\r\n            let irregularSpatialResolution = fields.data.Spatial_Resolution === 'Irregular';\r\n\r\n            let sparseMaxDate = utcDateStringToLocal(fields.data.Time_Max);\r\n            sparseMaxDate.setDate(sparseMaxDate.getDate() + 1);\r\n\r\n            let dt1 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt1 : utcDateStringToLocal(fields.data.Time_Min);\r\n            let dt2 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt2 : \r\n                irregularSpatialResolution ? sparseMaxDate :\r\n                utcDateStringToLocal(fields.data.Time_Min);\r\n            \r\n            let latMin = Math.floor(fields.data.Lat_Min * 1000) /1000;\r\n            let latMax = Math.ceil(fields.data.Lat_Max * 1000) /1000;\r\n            let lonMin = Math.floor(fields.data.Lon_Min * 1000) /1000;\r\n            let lonMax = Math.ceil(fields.data.Lon_Max * 1000) /1000;\r\n\r\n            let lat1 = irregularSpatialResolution ? latMin : this.state.spParams.lat1;\r\n            let lat2 = irregularSpatialResolution ? latMax : this.state.spParams.lat2;\r\n            let lon1 = irregularSpatialResolution ? lonMin : this.state.spParams.lon1;\r\n            let lon2 = irregularSpatialResolution ? lonMax : this.state.spParams.lon2;\r\n            let depth1 = irregularSpatialResolution ? fields.data.Depth_Min || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? 0 :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? 0 : \r\n                this.state.spParams.depth1;\r\n\r\n            let depth2 = irregularSpatialResolution ? fields.data.Depth_Max || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2) : \r\n                this.state.spParams.depth2;\r\n\r\n            if(irregularSpatialResolution){\r\n                this.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            let tableName = fields.data.Table_Name;\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                spParams: {...this.state.spParams, \r\n                    fields,\r\n                    dt1,\r\n                    dt2,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    depth1,\r\n                    depth2,\r\n                    tableName,\r\n                    selectedVizType: ''\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({...this.state, spParams: {...this.state.spParams, fields, tableName: ''}})\r\n        }\r\n    }\r\n\r\n    // updateParametersFromCruiseBoundary = (cruise) => {\r\n    //     if(cruise && this.state.spParams.fields){\r\n    //         this.props.snackbarOpen('Setting chart parameters to cruise boundaries.');\r\n    //         let lat1 = Math.floor(cruise.data.Lat_Min * 1000) / 1000;\r\n    //         let lat2 = Math.ceil(cruise.data.Lat_Max * 1000) / 1000;\r\n    //         let lon1 = Math.floor(cruise.data.Lon_Min * 1000) / 1000;\r\n    //         let lon2 = Math.ceil(cruise.data.Lon_Max * 1000) / 1000;\r\n\r\n    //         this.setState({...this.state,\r\n    //             spParams: {...this.state.spParams,\r\n    //                 lat1,\r\n    //                 lat2,\r\n    //                 lon1,\r\n    //                 lon2,\r\n    //                 dt1: utcDateStringToLocal(cruise.data.Start_Time),\r\n    //                 dt2: utcDateStringToLocal(cruise.data.End_Time)\r\n    //             }\r\n    //         })\r\n    //     }\r\n    // }\r\n\r\n    handleShowCharts = () => {\r\n        this.setState({...this.state, showCharts: true})\r\n    }\r\n\r\n    handleShowGlobe = () => {\r\n        this.setState({...this.state, showCharts: false})\r\n    }\r\n\r\n    handleShowCruiseControl = () => {\r\n        this.setState({...this.state, showCruiseControl: !this.state.showCruiseControl});\r\n    }\r\n\r\n    toggleShowUI = () => {\r\n        this.setState({...this.state, showUI: !this.state.showUI});\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: extent.ymin.toFixed(3),\r\n            lat2: extent.ymax.toFixed(3),\r\n            lon1: _lon1.toFixed(3),\r\n            lon2: _lon2.toFixed(3)\r\n        };\r\n\r\n        this.setState({...this.state, spParams: {...this.state.spParams, ...newCoordinates}});\r\n    }\r\n\r\n    resetSPParams = () => {\r\n        this.setState({...this.state, spParams: baseSPParams})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n        // if(!this.props.user && !this.props.userIsGuest) return <LoginRequiredPrompt/>\r\n        \r\n        return (\r\n            <div className={classes.vizWrapper}>\r\n                <GuestPlotLimitNotification/>\r\n                {/* <VizControlPanel\r\n                    toggleChartView={this.toggleChartView}\r\n                    toggleShowUI={this.toggleShowUI}\r\n                    handleChange={this.handleChange}\r\n                    handleLatLonChange={this.handleLatLonChange}\r\n                    handleStartDateChange={this.handleStartDateChange} \r\n                    handleEndDateChange={this.handleEndDateChange} \r\n                    showUI={this.state.showUI}\r\n                    onVisualize={this.onVisualize}\r\n                    updateFields={this.updateFields}\r\n                    {...this.state.spParams}\r\n                    surfaceOnly={this.state.surfaceOnly}\r\n                    irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                    showCharts={this.state.showCharts}\r\n                    handleShowCharts={this.handleShowCharts}\r\n                    handleShowGlobe={this.handleShowGlobe}\r\n                    resetSPParams={this.resetSPParams}\r\n                    handleShowCruiseControl={this.handleShowCruiseControl}\r\n                    showCruiseControl={this.state.showCruiseControl}\r\n                /> */}\r\n\r\n                { this.state.esriModules &&\r\n                    <div className={`${this.props.plotsActiveTab === 0 ? '' : classes.displayNone}`}>\r\n                        <MapContainer\r\n                            globeUIRef={this.globeUIRef}\r\n                            updateDomainFromGraphicExtent={this.updateDomainFromGraphicExtent}\r\n                            // updateParametersFromCruiseBoundary={this.updateParametersFromCruiseBoundary}\r\n                            esriModules={this.state.esriModules}\r\n                            spParams={this.state.spParams}\r\n                            cruiseTrajectory={this.props.cruiseTrajectory}\r\n                            showCruiseControl={this.state.showCruiseControl}\r\n                            chartControlPanelRef={this.chartControlPanelRef}\r\n                            ref={this.mapContainerRef}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n                <Switch>          \r\n                    <Route exact path='/visualization' component={ModuleSelector} />\r\n                    <Route \r\n                        path='/visualization/charts'\r\n                        render={(props) => (\r\n                            <NewVizControlPanel\r\n                            {...props}\r\n                            toggleChartView={this.toggleChartView}\r\n                            toggleShowUI={this.toggleShowUI}\r\n                            handleChange={this.handleChange}\r\n                            handleLatLonChange={this.handleLatLonChange}\r\n                            handleStartDateChange={this.handleStartDateChange} \r\n                            handleEndDateChange={this.handleEndDateChange} \r\n                            showUI={this.state.showUI}\r\n                            onVisualize={this.onVisualize}\r\n                            updateFields={this.updateFields}\r\n                            {...this.state.spParams}\r\n                            surfaceOnly={this.state.surfaceOnly}\r\n                            irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                            showCharts={this.state.showCharts}\r\n                            handleShowCharts={this.handleShowCharts}\r\n                            handleShowGlobe={this.handleShowGlobe}\r\n                            resetSPParams={this.resetSPParams}\r\n                            handleShowCruiseControl={this.handleShowCruiseControl}\r\n                            showCruiseControl={this.state.showCruiseControl}\r\n                            globeUIRef={this.globeUIRef}\r\n                            mapContainerRef={this.mapContainerRef}\r\n                            handlePlotsSetActiveTab={this.handlePlotsSetActiveTab}\r\n                            plotsActiveTab={this.props.plotsActiveTab}\r\n                        />\r\n                        )}\r\n                    // }\r\n                    />\r\n                    <Route \r\n                        path='/visualization/cruises'\r\n                        render={(props) => (\r\n                            <CruiseSelector handleShowGlobe={() => this.handlePlotsSetActiveTab(null, 0)}/>\r\n                        )}\r\n                    />\r\n                </Switch>              \r\n\r\n                {/* <div className={this.state.showCharts ? classes.showCharts : classes.displayNone}> */}\r\n                <div className={this.props.plotsActiveTab === 0 ? classes.displayNone : classes.showCharts}>\r\n                    <Charts/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Visualization));","export default 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=';"],"sourceRoot":""}