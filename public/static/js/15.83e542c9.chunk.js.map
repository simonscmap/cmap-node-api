{"version":3,"sources":["Enums/metaTags.js","Utility/depthCounter.js","Components/UI/MultiCheckboxDropdown.js","Enums/validation.js","Utility/mapTemporalResolutionToNumber.js","Utility/countWebGLContexts.js","Utility/Visualization/mapVizType.js","Utility/Visualization/cleanSPParams.js","Utility/Visualization/aggregateChartDataSize.js","Utility/Visualization/generateVariableSampleRangeParams.js","Components/Visualization/DatasetInfoDialog.js","Components/Visualization/ProductList.js","Components/Visualization/DataSearch.js","Components/Visualization/ChartControl.js","Components/Visualization/VariableDetailsDialog.js","Components/Visualization/SparseDataMaxSizeNotification.js","Components/Visualization/VizControlPanel.js","Components/Visualization/GuestPlotLimitNotification.js","Enums/months.js","Utility/handleChartDatestring.js","Utility/chartBase.js","Components/Visualization/ChartControlPanel.js","Components/Visualization/Histogram.js","Utility/handleXTicks.js","Utility/getChartDimensions.js","Components/Visualization/SpaceTimeChart.js","Components/Visualization/TimeSeriesChart.js","Components/Visualization/DepthProfileChart.js","Components/Visualization/SectionMapChart.js","Components/Visualization/SparseScatter.js","Components/Visualization/SparseMap.js","Components/Visualization/Charts.js","Components/Visualization/MapContainer.js","Utility/localDateToString.js","Utility/utcDateStringToLocal.js","Components/Visualization/ModuleSelector.js","Utility/setsFromList.js","Components/Visualization/CruiseSelector.js","Components/Visualization/Visualization.js","Utility/starsBase64.js"],"names":["metaTags","default","title","description","visualization","catalog","dataSubmission","community","darwinDepths","piscesDepths","piscesTable","Set","darwinTable","exports","count","field","depth1","depth2","table","data","Table_Name","has","i","length","withStyles","theme","menuOpenIcon","color","colors","primary","margin","formGroupWrapper","textAlign","paddingLeft","multiSelectHeader","fontSize","formControlLabelRoot","height","formControlLabelLabel","checkboxGroupHeader","backgroundColor","greenHover","cursor","boxShadow","marginTop","props","classes","selectedOptions","handleClear","options","parentStateKey","handleClickCheckbox","groupHeaderLabel","React","useState","open","setOpen","item","xs","container","alignItems","className","onClick","size","cs","justify","style","marginRight","component","map","e","key","control","onChange","checkbox","name","checked","label","root","validation","depth","depthOneIsLower","depthOneOutOfBounds","depthTwoOutOfBounds","negative","date","dateOneIsLater","dateOneOutOfBounds","dateTwoOutOfBounds","lat","latOneIsHigher","latOneOutOfBounds","latTwoOutOfBounds","lon","lonOneIsHigher","lonOneOutOfBounds","lonTwoOutOfBounds","type","dataIsIrregular","dateRangeRequired","depthRangeRequired","surfaceOnlyDataset","irregularOnly","dataSizeTooLarge","webGLContextLimit","generic","invalid","dataSizeWarning","dataSizePrevent","variableMissing","vizTypeMissing","guestMaximumReached","mapTemporalResolutionToNumber","resolution","temporalResolutions","threeMinutes","sixHourly","daily","weekly","monthly","annual","irregular","monthlyClimatology","threeDay","eightDayRunning","eightDays","charts","forEach","chart","subType","visualizationSubTypes","heatmap","sparse","variableValues","depthProfile","timeSeries","mapVizType","vizType","vizSubTypes","sectionMap","sp","storedProcedures","contourSectionMap","histogram","spaceTime","contourMap","cleanSPParams","dt1","dt2","fields","lat1","lat2","lon1","lon2","spName","tableName","parseFloat","aggregateChartDataSize","ch","generateVariableSampleRangeParams","varDetails","Temporal_Resolution","Time_Min","slice","Time_Max","Math","floor","Lat_Min","ceil","Lat_Max","Lon_Min","Lon_Max","surfaceOnly","Depth_Max","irregularSpatialResolution","Spatial_Resolution","Depth_Min","depthUtils","toFixed","mapDispatchToProps","datasetSummaryFetch","connect","state","ownProps","datasetSummary","dialogPaper","backgroundGray","minWidth","maxWidth","markdown","display","palette","main","textDecoration","lineHeight","datasetSummaryID","setDatasetSummaryID","useEffect","Dialog","zIndex","z","NON_HELP_DIALOG","Boolean","onClose","PaperProps","DialogTitle","Dataset_Long_Name","Skeleton","DialogContent","source","Description","Typography","padding","Link","target","href","Dataset_Name","makeGroupStyles","searchOption","searchOptionsMenuItemText","whiteSpace","overflow","textOverflow","width","heading","variableItem","variablesWrapper","paddingTop","memberCount","fontWeight","datasetOpenIcon","infoIcon","listHeader","variableName","MakeGroup","vizSearchResultsLoadingState","cart","memo","handleSelectDataTarget","handleSetVariableDetailsID","setdatasetSummaryID","listRef","make","fullCount","openIndex","setOpenIndex","handleSetOpenClick","current","resetAfterIndex","currentOffset","scrollOffset","targetOffset","setTimeout","scrollToItem","varCount","reduce","acc","cur","variables","nonvisualizableDatasetCount","nonvisualizableString","Grid","states","inProgress","Tooltip","enterDelay","placement","variant","marginBottom","ref","itemData","itemCount","estimatedItemSize","overflowY","itemSize","index","ExpandMore","ChevronRight","Info","event","stopPropagation","Dataset_ID","Star","Long_Name","ID","observationListRef","createRef","modelListRef","windowHeight","windowWidth","vizSearchResultsFullCounts","handleShowMemberVariables","Fragment","Observation","Model","vizSearchResultsFetch","vizSearchResultsSetLoadingState","variableNameAutocompleteFetch","vizSearchResultsStore","searchOptionsFetch","defaultState","hasDepth","timeStart","timeEnd","Date","toISOString","latStart","latEnd","lonStart","lonEnd","sensor","searchTerms","temporalResolution","spatialResolution","dataSource","distributor","processLevel","region","DataSearch","memberVariablesDataset","showAdvanced","sensorsMenuOpen","regionsMenuOpen","makesMenuOpen","componentDidMount","handleChangeSearchValue","updateStateAndSearch","value","handleChangeAutocomplete","statePiece","v","newState","setState","handleChangeSensor","altTypeValue","handleChangeMake","handleToggleShowAdvanced","handleResetSearch","handleToggleMenu","menu","split","column","newSet","add","delete","handleClearMultiSelect","param","render","vizSearchResults","submissionOptions","autocompleteVariableNames","Button","startIcon","Close","handleCloseDataSearch","closeIcon","maxHeight","TextField","fullWidth","placeholder","InputProps","inputRoot","startAdornment","InputAdornment","position","Search","inputRef","searchInputRef","MultiCheckboxDropdown","Make","Sensor","Region","showAdvancedWrapper","searchPanelRow","formControl","id","InputLabelProps","shrink","inputProps","min","max","FormControl","FormHelperText","Select","MenuProps","PopoverClasses","paper","autocompletePopperPaper","addBorder","CONTROL_SECONDARY","MenuItem","Process_Level","Autocomplete","Data_Source","renderInput","params","getOptionLabel","option","disablePortal","shiftedAutocompletePaper","input","regionSelectorInput","autocompleteOptions","popperDisablePortal","shiftedAutocompletePopper","listbox","shiftedAutocompleteListbox","Distributor","resetButton","variableDetailsID","Component","border","textTransform","borderColor","autoComplete","bottom","minHeight","overflowX","float","vizTypeSelectFormControl","vizTypeMenu","vizTypeMenuItem","visualizeButton","borderRadius","fontVariant","vizButtonTooltip","overrideDisabledStyle","heatmapMessage","contourMessage","sectionMapMessage","histogramMessage","timeSeriesMessage","depthProfileMessage","sparseMapMessage","visualizeButtonTooltip","disableVisualizeMessage","selectedVizType","handleChangeInputValue","handleVisualize","disabled","InputLabel","htmlFor","MenuListProps","variableFetch","variableDetails","handleClose","DialogContentText","Comment","Table","TableBody","TableRow","TableCell","undefined","Variable_Min","Unit","Variable_Max","Variable_Mean","Variable_Std","sparseDataMaxSizeNotificationUpdate","sparseDataMaxSizeNotificationData","dialogContent","lastPointValueText","lastPointValueWrapper","top","right","list","listItem","time","replace","cruiseTrajectoryRequestSend","clearCharts","csvDownloadRequestSend","snackbarOpen","vizPageDataTargetSetAndFetchDetails","storedProcedureRequestSend","sparseDataQuerySend","guestPlotLimitNotificationSetIsVisible","polygonSymbol","symbolLayers","material","outline","VizControlPanel","showControlPanel","dataSearchMenuOpen","addedGlobeUIListeners","showDrawHelp","storedParams","user","componentDidUpdate","prevProps","prevState","handleShowGlobe","mapContainerRef","_lon2","regionLayer","removeAll","polygon","rings","regionGraphic","esriModules","Graphic","geometry","symbol","vizPageDataTargetDetails","derivedParams","globeUIRef","view","goTo","zoom","maxDuration","speedFactor","componentWillUnmount","updateDomainFromGraphicExtent","extent","_lon1","xmin","xmax","newCoordinates","ymin","ymax","handleUpdateParameters","parameters","handleShowChartsClick","plotsActiveTab","handlePlotsSetActiveTab","isSparseVariable","spatialResolutions","mapping","payload","Variable","metadata","handleDrawClick","sketchModel","throttledUpdate","throttle","Utils","webMercatorToGeographic","graphic","on","toolEventInfo","complete","visible","cancel","graphics","create","mode","parsed","includes","isNaN","handleToggleCharts","estimateDataSize","date1","parse","date2","dayDiff","res","mapSpatialResolutionToNumber","dateCount","pointCount","checkStartDepth","checkEndDepth","checkStartDate","checkEndDate","checkStartLat","checkEndLat","checkStartLon","checkEndLon","checkHeatmap","checkContour","checkSection","checkHistogram","checkTimeSeries","checkDepthProfile","checkSparseMap","checkGeneralWarn","dataSize","checkGeneralPrevent","webGLCount","countWebGLContexts","aggregateSize","guestPlotCount","parseInt","Cookies","get","handleLatLonChange","dataTarget","details","Array","fill","startDepthMessage","endDepthMessage","startLatMessage","endLatMessage","startLonMessage","endLonMessage","generalWarnMessage","generalPreventMessage","startDateMessage","endDateMessage","checkDisableVisualizeList","checkDisableVisualize","drawHelpText","IconButton","closePanelChevron","aria-label","ChevronLeft","openPanelChevron","Drawer","drawer","drawerPaper","anchor","borderBottom","controlPanelItem","controlPanelItemLabel","controlPanelItemStartIcon","borderLeft","formGridItem","textField","error","FormHelperTextProps","helperText","dateTimeInput","padLeft","step","Paper","popoutButtonPaper","left","drawerWidth","popoutButtonBase","Edit","popoutButtonIcon","onVisualize","showChartControl","Language","Badge","badgeContent","ShowChart","dataSearchMenuPaper","catalogRequestState","cruiseTrajectory","showHelp","datasets","vizPageDataTarget","CONTROL_PRIMARY","backdropFilter","borderTop","justifyContent","showLoginDialog","guestTokenRequestSend","guestPlotLimitNotificationIsVisible","userIsGuest","dialogWrapper","dialogRoot","link","paddingBottom","dialogActionButton","withRouter","handleLoginButtonClick","dialogIsOpen","RouterLink","to","DialogActions","history","push","dateString","hasHour","isMonthly","months","layout","font","paper_bgcolor","autosize","t","b","config","displaylogo","annotations","text","xref","yref","yanchor","x","y","yshift","showarrow","xanchor","colorscaleOptions","popover","spacing","paddingRight","iconButton","colorForm","lastIcon","borderTopRightRadius","borderBottomRightRadius","buttonGroup","pointerEvents","depressed","colorscaleMenu","setPopoverZ","grayBackground","sparseDataMaxSizeWarningIcon","errorYellow","onToggleSplitByDate","splitByDate","onToggleSplitBySpace","splitBySpace","orientation","downloadCsv","handleZValueConfirm","zValues","markerOptions","handleMarkerOptionsConfirm","showErrorBars","handleSetShowErrorBars","showLines","handleSetShowLines","paletteAnchorElement","setPaletteAnchorElement","zScalePopoverAnchorElement","setZScalePopoverAnchorElement","localZMin","setLocalZMin","localZMax","setLocalZMax","zScalePopoverOpen","zScalePopoverID","handleZScalePopoverClose","zScaleValidations","test","zMinMessage","zMaxMessage","markerOptionsAnchorElement","setMarkerOptionsAnchorElement","opacity","localMarkerOpacity","setLocalMarkerOpacity","localMarkerColor","setLocalMarkerColor","localMarkerSize","setLocalMarkerSize","previousOpacity","useRef","usePreviousOpacity","previousColor","usePreviousColor","previousSize","usePreviousSize","markerPopoverOpen","markerPopoverID","handleMarkerOptionsClose","markerOptionsValidations","checkLocalMarkerOpacity","checkLocalMarkerSize","localMarkerOpacityMessage","localMarkerSizeMessage","showSparseDataSizeWarning","SPARSE_DATA_QUERY_MAX_SIZE","Warning","lastRowTimeSpaceDataFromChart","ButtonGroup","DateRange","LineWeight","CloudDownload","currentTarget","SwapVert","Tune","handlePaletteChoice","Palette","Gamepad","Menu","anchorEl","keepMounted","Popover","anchorOrigin","vertical","horizontal","transformOrigin","OutlinedInput","aria-describedby","labelWidth","csvFromVizRequestSend","chartWrapper","buttonBlock","iconButtonWrapper","handleChartDateString","useResizeHandler","marker","chartBase","plot_bgcolor","xaxis","exponentformat","yaxis","infoObject","sectionSize","lonRange","lonMax","lonMin","tickvals","from","ticktext","tickmode","sizeRatio","latMax","latMin","setLoadingMessage","plots","dates","depths","setSplitByDate","splitByDepth","setSplitByDepth","setPalette","zMin","zMax","setZValues","subSets","generatePlotData","subsets","xTicks","handleXTicks","getChartDimensions","subset","latTitle","lonTitle","hovertext","abs","formatter","format","lats","lons","zauto","zmin","zmax","connectgaps","autocolorscale","colorscale","hoverinfo","contours","coloring","showlabels","labelfont","family","labelformat","colorbar","handleContourMap","zsmooth","handleHeatmap","subTypes","window","requestAnimationFrame","onToggleSplitByDepth","chartCount","availableWGLContexts","values","stds","setMarkerOptions","setShowLines","setShowErrorBars","error_y","array","line","isMonthy","getMonth","error_x","autorange","setSplitBySpace","setOrientation","spaces","distinctMeridiansOrParallelsForSplitting","xAxis","handleSectionMap","switchOrientation","SparseScatter","xValues","yValues","xTitle","yTitle","times","tabProps","SparseTabPanel","children","selectedTab","controlPanelProps","hidden","SparseMap","tab","setTab","plot","radius","mapbox","layers","sourcetype","below","center","mapboxAccessToken","handleSparseMap","scatter","Tabs","newValue","centered","indicatorColor","tabs","Tab","dispatchEvent","Event","deleteChart","CloseChartIcon","closeChartIcon","handleDeleteChart","chartIndex","disableFocusRipple","disableRipple","Delete","Charts","this","elevation","chartPaper","polylineSymbol","r","g","a","UiComponents","shouldComponentUpdate","nextProps","nextState","SketchViewModel","layer","defaultUpdateOptions","toggleToolOnClick","tool","ui","remove","TrajectoryController","trajectoryLayer","midIndex","polyLines","lineIndex","maxDistance","latDistance","_lonDistance","lonDistance","distance","sqrt","cruiseTrajectorySymbol","cap","join","cruiseTrajectoryGeometry","paths","console","log","MapContainer","mapProperties","basemap","viewProperties","highlightOptions","haloOpacity","haloColor","fillOpacity","measurementPositions","setShowHelp","GraphicsLayer","localDateToString","year","getFullYear","month","day","getDate","toString","utcDateStringToLocal","utcString","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDate","getUTCDate","newDate","setFullYear","button","marginLeft","setsFromList","setKeys","result","isArray","subItem","cruiseListRequestSend","cruiseTrajectoryClear","esriFonts","searchFilterGroupCruises","cruises","searchField","selectedYears","selectedChiefScientists","selectedRegions","selectedSeries","search","filter","Year","Chief_Name","Regions","some","Series","cruisesGroupedByYear","Object","keys","sort","defaultSearchAndFilterState","openYearGroup","CruiseSelector","cruiseList","handleCruiseSelect","selection","selectedCruise","searchMenuOpen","addDocuments","optionSets","newOptionSets","oldOptionSets","handleCloseSearch","tempNewState","handleSetopenYearGroup","listHeight","JsSearch","searchIndex","addIndex","searchMenuPaper","cruiseYearHeader","Name","cruiseName","Nickname","outerDiv","openSearchButtonPaper","openSearchButton","cruiseInfo","cruiseInfoCell","Start_Time","End_Time","Ship_Name","linkWrapper","getCruiseListState","transform","fontFamily","borderStyle","yearHeader","justifyCOntent","queryRequestSend","retrievalRequestSend","completedShowCharts","datasetRetrievalRequestSend","plotsActiveTabSet","baseSPParams","Visualization","filteredData","showCharts","showUI","showCruiseControl","spParams","document","handleChange","handleStartDateChange","handleEndDateChange","updateFields","sparseMaxDate","setDate","handleShowCharts","handleShowCruiseControl","toggleShowUI","resetSPParams","esriModuleNames","loadModules","version","loadedModules","accumulator","currentValue","currentIndex","showChartsOnce","vizWrapper","displayNone","chartControlPanelRef","exact","path","ModuleSelector","toggleChartView","sampleData","queryRequestState","maps","loadingMessage","background"],"mappings":"2GA2BeA,IA3BE,CACbC,QAAS,CACLC,MAAO,0CACPC,YAAa,4QAGjBC,cAAe,CACXF,MAAO,0BACPC,YAAa,+GAGjBE,QAAS,CACLH,MAAO,eACPC,YAAa,2GAGjBG,eAAgB,CACZJ,MAAO,uBACPC,YAAa,sFAGjBI,UAAW,CACPL,MAAO,iBACPC,YAAa,8H,iCCtBrB,IAAMK,EAAe,CACjB,EACA,GACA,GACA,GACA,GACA,GACA,GACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,OACA,SACA,SACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SAGEC,EAAe,CACjB,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,eAkBEC,EAAc,IAAIC,IAfF,CAClB,gBACA,2BAcEC,EAAc,IAAID,IAXH,CACjB,4BACA,sBACA,qBACA,iCACA,wBACA,0BACA,mCAMEE,EAAU,CACZC,MAAO,SAACC,EAAOC,EAAQC,GAAY,IACXC,EAAUH,EAAMI,KAA5BC,WACJN,EAAQ,EAEZ,GAAGJ,EAAYW,IAAIH,GACf,IAAI,IAAII,EAAI,EAAGA,EAAIb,EAAac,UACzBd,EAAaa,GAAKL,GADeK,IAEjCb,EAAaa,GAAKN,GAAQF,SAE9B,GAAIF,EAAYS,IAAIH,GACvB,IAAI,IAAII,EAAI,EAAGA,EAAId,EAAae,UACzBf,EAAac,GAAKL,GADeK,IAEjCd,EAAac,GAAKN,GAAQF,IAGrC,OAAOA,GAGXJ,cACAE,cACAH,eACAD,gBAGWK,O,4IC9BAW,iBA/GA,SAACC,GAAD,MAAY,CACvBC,aAAa,CACTC,MAAMC,IAAOC,QACbC,OAAQ,eAGZC,iBAAkB,CACdC,UAAW,OACXC,YAAa,QAGjBC,kBAAmB,CACfC,SAAU,OACVL,OAAQ,mBAGZM,qBAAsB,CAClBC,OAAQ,QAGZC,sBAAuB,CACnBH,SAAU,QAGdI,oBAAqB,CACjB,UAAW,CACPC,gBAAiBZ,IAAOa,YAG5BC,OAAQ,UACRL,OAAQ,OACRM,UAAW,0BACXC,UAAW,UA+EJpB,EA1EgB,SAACqB,GAAW,IAGnCC,EAOAD,EAPAC,QACAC,EAMAF,EANAE,gBACAC,EAKAH,EALAG,YACAC,EAIAJ,EAJAI,QACAC,EAGAL,EAHAK,eACAC,EAEAN,EAFAM,oBACAC,EACAP,EADAO,iBATkC,EAYZC,IAAMC,UAAS,GAZH,mBAY9BC,EAZ8B,KAYxBC,EAZwB,KActC,OACI,oCACI,kBAAC,IAAD,CACIC,MAAI,EAACC,GAAI,GACTC,WAAS,EACTC,WAAW,SACXC,UAAWf,EAAQP,oBACnBuB,QAAS,kBAAMN,GAASD,KAEvBA,EACG,kBAAC,IAAD,CAAYM,UAAWf,EAAQpB,eAC/B,kBAAC,IAAD,CAAcmC,UAAWf,EAAQpB,eAEpC0B,GAIDG,EAEA,kBAAC,IAAD,CAAME,MAAI,EAACC,GAAI,GAAIG,UAAWf,EAAQf,kBAE9BgB,EAAgBgB,KAEhB,kBAAC,IAAD,CAAMN,MAAI,EAACE,WAAS,EAACK,GAAI,GAAIC,QAAQ,aAAaJ,UAAWf,EAAQZ,mBACjE,0BAAMgC,MAAO,CAACC,YAAa,QAASpB,EAAgBgB,KAApD,cACA,kBAAC,IAAD,CAAMK,UAAU,SAASN,QAASd,GAAlC,UACM,GAGd,kBAAC,IAAD,KACKC,EAAQoB,KAAI,SAACC,EAAGhD,GAAJ,OACT,kBAAC,IAAD,CAAMmC,MAAI,EAACC,GAAI,GAAIa,IAAKjD,GACpB,kBAAC,IAAD,CACIkD,QACI,kBAAC,IAAD,CACI7C,MAAM,UACN8C,SAAUtB,EACVU,UAAWf,EAAQ4B,SACnBX,KAAK,QACLY,KAAMzB,EAAiB,KAAOoB,EAC9BM,QAAS7B,EAAgB1B,IAAIiD,KAGrCO,MAAOP,EACPxB,QAAS,CACLgC,KAAMhC,EAAQV,qBACdyC,MAAO/B,EAAQR,+BAQrC,Q,qXCpEHyC,EA9CI,CACfC,MAAO,CACHC,gBAAiB,4BACjBC,oBAAqB,iBACrBC,oBAAqB,mBACrBC,SAAU,sBAGdC,KAAM,CACFC,eAAgB,sBAChBC,mBAAoB,iBACpBC,mBAAoB,oBAGxBC,IAAK,CACDC,eAAgB,4BAChBC,kBAAmB,iBACnBC,kBAAmB,oBAGvBC,IAAK,CACDC,eAAgB,4BAChBC,kBAAmB,iBACnBC,kBAAmB,oBAGvBC,KAAM,CACFC,gBAAiB,qCACjBC,kBAAmB,8BACnBC,mBAAoB,+BACpBC,mBAAoB,+BACpBC,cAAe,+CACfC,iBAAkB,qDAClBC,kBAAmB,kEAGvBC,QAAS,CACLC,QAAS,gBACTC,gBAAiB,yEACjBC,gBAAiB,gEACjBC,gBAAiB,2BACjBC,eAAgB,qCAChBC,oBAAqB,gF,gBCtBdC,EAlBuB,SAACC,GAenC,MAdU,CACN,CAACC,IAAoBC,cAAgB,EACrC,CAACD,IAAoBE,WAAa,EAClC,CAACF,IAAoBG,OAAS,EAC9B,CAACH,IAAoBI,QAAU,EAC/B,CAACJ,IAAoBK,SAAW,GAChC,CAACL,IAAoBM,QAAU,IAC/B,CAACN,IAAoBO,WAAa,KAClC,CAACP,IAAoBQ,oBAAqB,GAC1C,CAACR,IAAoBS,UAAW,EAChC,CAACT,IAAoBU,iBAAkB,EACvC,CAACV,IAAoBW,WAAY,GAG1BZ,I,kBCZA,WAACa,GACZ,IAAIhH,EAAQ,EAWZ,OAVAgH,EAAOC,SAAQ,SAAAC,GACRA,EAAMC,UAAYC,IAAsBC,SAASrH,IACjDkH,EAAMC,UAAYC,IAAsBE,SACvCtH,IACGkH,EAAM7G,KAAKkH,eAAe9G,OAAS,MAAOT,GAAQ,IAEtDkH,EAAMC,UAAYC,IAAsBI,cAAgBN,EAAM7G,KAAKkH,eAAe9G,OAAS,KAAOT,IAClGkH,EAAMC,UAAYC,IAAsBK,YAAcP,EAAM7G,KAAKkH,eAAe9G,OAAS,KAAOT,OAGhGA,GCyBI0H,EAvCI,SAACC,GAoChB,MAnCgB,CACZ,CAACC,IAAYC,YAAa,CACtBC,GAAIC,IAAiBF,WACrBV,QAASS,IAAYC,YAEzB,CAACD,IAAYI,mBAAoB,CAC7BF,GAAIC,IAAiBF,WACrBV,QAASS,IAAYI,mBAEzB,CAACJ,IAAYH,YAAa,CACtBK,GAAIC,IAAiBN,WACrBN,QAASS,IAAYH,YAEzB,CAACG,IAAYK,WAAY,CACrBH,GAAIC,IAAiBG,UACrBf,QAASS,IAAYK,WAEzB,CAACL,IAAYJ,cAAe,CACxBM,GAAIC,IAAiBP,aACrBL,QAASS,IAAYJ,cAEzB,CAACI,IAAYP,SAAU,CACnBS,GAAIC,IAAiBG,UACrBf,QAASS,IAAYP,SAEzB,CAACO,IAAYO,YAAa,CACtBL,GAAIC,IAAiBG,UACrBf,QAASS,IAAYO,YAEzB,CAACP,IAAYN,QAAS,CAClBQ,GAAIC,IAAiBG,UACrBf,QAASS,IAAYN,SAIdK,ICzBJS,EAdO,SAAC,GAAD,IAAElI,EAAF,EAAEA,OAAQC,EAAV,EAAUA,OAAQkI,EAAlB,EAAkBA,IAAKC,EAAvB,EAAuBA,IAAKC,EAA5B,EAA4BA,OAAQC,EAApC,EAAoCA,KAAMC,EAA1C,EAA0CA,KAAMC,EAAhD,EAAgDA,KAAMC,EAAtD,EAAsDA,KAAMC,EAA5D,EAA4DA,OAAQC,EAApE,EAAoEA,UAApE,MAAoF,CACtG3I,OAAQ4I,WAAW5I,GACnBC,OAAQ2I,WAAW3I,GACnBkI,MACAC,MACAC,SACAC,KAAMM,WAAWN,GACjBC,KAAMK,WAAWL,GACjBC,KAAMI,WAAWJ,GACjBC,KAAMG,WAAWH,GACjBC,SACAC,cCAWE,EAXgB,SAAC/B,GAC5B,IAAI/D,EAAO,EAOX,OALA+D,EAAOC,SAAQ,SAAA+B,GACX/F,GAAQ+F,EAAG3I,KAAKkH,gBAAkByB,EAAG3I,KAAKkH,eAAe9G,OAASuI,EAAG3I,KAAKkH,eAAe9G,OAAS,KAI/FwC,GCgCIgG,EArC2B,SAACC,GACvC,IAAIb,EAAMa,EAAWC,sBAAwB/C,IAAoBQ,mBAC7D,EACAsC,EAAWE,SAASC,MAAM,EAAG,IAC7Bf,EAAMY,EAAWC,sBAAwB/C,IAAoBQ,mBAC7D,EAEAsC,EAAWI,SAASD,MAAM,EAAG,IAE7Bb,EAAOe,KAAKC,MAA2B,IAArBN,EAAWO,SAAiB,IAC9ChB,EAAOc,KAAKG,KAA0B,IAArBR,EAAWS,SAAiB,IAC7CjB,EAAOa,KAAKC,MAA2B,IAArBN,EAAWU,SAAiB,IAC9CjB,EAAOY,KAAKG,KAA0B,IAArBR,EAAWW,SAAiB,IAE7CC,GAAeZ,EAAWa,UAC1BC,EAA+D,cAAlCd,EAAWe,mBAU5C,MAAO,CACHzB,OACAC,OACAC,OACAC,OACAzI,OAbS4J,EAAc,EAAIE,GAA6BT,KAAKC,MAA6B,IAAvBN,EAAWgB,WAAoB,KAAY,EAc9G/J,OAZS2J,EAAc,EACvBE,EAA6BT,KAAKG,KAA4B,IAAvBR,EAAWa,WAAoB,KAAO,EAC7EI,IAAWvK,YAAYW,IAAI2I,EAAW5I,cAAgB6J,IAAWxK,aAAa,GAAKwK,IAAWxK,aAAa,IAAM,GAAGyK,QAAQ,GAC5HD,IAAWrK,YAAYS,IAAI2I,EAAW5I,cAAgB6J,IAAWzK,aAAa,GAAKyK,IAAWzK,aAAa,IAAM,GAAG0K,QAAQ,GAC5H,KASA/B,MACAC,Q,mLCQF+B,GAAqB,CACvBC,yBAoDWC,gBAzDS,SAACC,EAAOC,GAAR,MAAsB,CAC1CC,eAAgBF,EAAME,kBAwDcL,GAAzBE,CAA6C7J,aAjF7C,SAAAC,GAAK,MAAK,CACrBgK,YAAa,CACTjJ,gBAAiBZ,IAAO8J,eACxBC,SAAU,QACVC,SAAU,QAGdC,SAAU,CACN,QAAS,CACLD,SAAU,OACV9J,OAAQ,sBACRgK,QAAS,SAEb,MAAO,CACHnK,MAAOF,EAAMsK,QAAQlK,QAAQmK,KAC7BC,eAAgB,QAGpB,MAAO,CACHC,WAAY,UA8DoC1K,EAjDlC,SAACqB,GAAW,IAC1B2I,EAAwF3I,EAAxF2I,eAAgB1I,EAAwED,EAAxEC,QAASsI,EAA+DvI,EAA/DuI,oBAAqBe,EAA0CtJ,EAA1CsJ,iBAAkBC,EAAwBvJ,EAAxBuJ,oBAExE/I,IAAMgJ,WAAU,WACZjB,EAAoBe,KACrB,CAACA,IAOJ,OACI,kBAACG,GAAA,EAAD,CACIpI,MAAO,CAACqI,OAAQC,IAAEC,iBAClBlJ,KAAMmJ,QAAQP,GACdQ,QATY,WAChBP,EAAoB,MACpBhB,EAAoB,OAQhBwB,WAAY,CACR/I,UAAWf,EAAQ2I,cAGvB,kBAACoB,GAAA,EAAD,KAAcrB,EAAiBA,EAAesB,kBAAoB,kBAACC,GAAA,EAAD,OAClE,kBAACC,GAAA,EAAD,KAEQxB,EACA,kBAAC,KAAD,CAAeyB,OAAQzB,EAAe0B,YAAarJ,UAAWf,EAAQ+I,WAClE,oCACA,kBAACsB,EAAA,EAAD,KAAY,kBAACJ,GAAA,EAAD,OACZ,kBAACI,EAAA,EAAD,KAAY,kBAACJ,GAAA,EAAD,OACZ,kBAACI,EAAA,EAAD,KAAY,kBAACJ,GAAA,EAAD,OACZ,kBAACI,EAAA,EAAD,KAAY,kBAACJ,GAAA,EAAD,SAKxB,kBAACC,GAAA,EAAD,CAAe9I,MAAO,CAACkJ,QAAS,cAC5B5B,EACI,4GAEI,kBAAC6B,GAAA,EAAD,CAAMC,OAAO,SAASC,KAAI,4BAAuB/B,EAAegC,eAAhE,SAFJ,KAKJ,kBAACT,GAAA,EAAD,YC3EVU,GAAkB,CAEpBC,aAAc,CACV,UAAW,CACPlL,gBAAiBZ,IAAOa,YAG5BC,OAAQ,UACRL,OAAQ,OACRM,UAAW,0BACXH,gBAAiB,kBAGrBmL,0BAA2B,CACvBC,WAAY,SACZC,SAAU,SACVC,aAAc,WACdC,MAAO,oBACP/L,UAAW,QAGfgM,QAAS,CACLhM,UAAW,OACXoL,QAAS,UACTzL,MAAOC,IAAOC,QACdM,SAAU,OACVS,UAAW,MACXJ,gBAAiB,kBAGrByL,aAAc,CACV5L,OAAQ,OAERL,UAAW,OACXG,SAAU,OACVO,OAAQ,UACR,UAAW,CACPF,gBAAiBZ,IAAOa,aAIhCyL,iBAAkB,CACd1L,gBAAiB,iBACjB2L,WAAY,OAGhBC,YAAa,CACTzM,MAAOC,IAAOC,QACdwM,WAAY,QAGhBC,gBAAgB,CACZ3M,MAAMC,IAAOC,QACbC,OAAQ,eAGZyM,SAAU,CACN5M,MAAOC,IAAOC,QACda,OAAQ,WAGZ8L,WAAY,CACR7M,MAAOC,IAAOC,QACdW,gBAAiB,iBACjBR,UAAW,QAGfyM,aAAc,CACVxM,YAAa,SAcfyM,GAAYrD,aAVM,SAACC,EAAOC,GAAR,MAAsB,CAC1CoD,6BAA8BrD,EAAMqD,6BACpCC,KAAMtD,EAAMsD,QAGW,GAKTvD,CAA6C7J,YAAWiM,GAAXjM,CAA4B6B,IAAMwL,MAAK,SAAChM,GAAW,IAEtGC,EAA4JD,EAA5JC,QAASG,EAAmJJ,EAAnJI,QAAS0L,EAA0I9L,EAA1I8L,6BAA8BG,EAA4GjM,EAA5GiM,uBAAwBC,EAAoFlM,EAApFkM,2BAA4BC,EAAwDnM,EAAxDmM,oBAAqBC,EAAmCpM,EAAnCoM,QAASC,EAA0BrM,EAA1BqM,KAAMC,EAAoBtM,EAApBsM,UAAWP,EAAS/L,EAAT+L,KAF9C,EAGzEvL,IAAMC,SAAS,MAH0D,mBAGrG8L,EAHqG,KAG1FC,EAH0F,KAKvGC,EAAqB,SAAChO,GACxB,GAAG2N,EAAQM,QAAS,CAChBN,EAAQM,QAAQC,gBAAgB,GAGhC,IAAIC,EAAgBR,EAAQM,QAAQjE,MAAMoE,aACtCC,EAAmB,GAAJrO,EAEV,OAANA,IAAeqO,EAAeF,EAAgB,IAAME,EAAeF,EAAgB5M,EAAMR,OAAS,KACjGuN,YAAW,kBAAMX,EAAQM,QAAQM,aAAavO,EAAG,WAAU,IAGnE+N,EAAa/N,IAGjB+K,qBAAU,WACH4C,EAAQM,SAASN,EAAQM,QAAQC,gBAAgB,KACrD,CAACvM,IAEJ,IAAM6M,EAAW7M,EAAQ8M,QAAO,SAACC,EAAKC,GAAN,OAAcD,EAAMC,EAAIC,UAAU3O,SAAQ,GACpE4O,EAA8BhB,EAAYlM,EAAQ1B,OAClD6O,EAAwD,IAAhCD,EAC1B,GAD0B,YAErBA,EAFqB,YAI9B,OACI,oCACA,kBAACE,EAAA,EAAD,CAAM1M,WAAS,GACX,kBAAC0M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACyJ,EAAA,EAAD,CAAYtJ,UAAWf,EAAQkL,SAEvBW,IAAiC2B,KAAOC,WACxC,gBACAT,EAAW,oCAAGZ,EAAH,mBAAyBjM,EAAQ1B,OAAjC,YACH,kBAACiP,EAAA,EAAD,CAASC,WAAY,GAAIC,UAAU,MAAMxQ,MAAM,kIAC3C,8BAAOkQ,KAFX,UAKHlB,EALG,8DAUpB,kBAACmB,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGC,WAAS,EAACM,QAAQ,aAAaL,WAAW,UACxD,kBAACuJ,EAAA,EAAD,CAAYwD,QAAQ,UAAUzM,MAAO,CAACvC,MAAOC,IAAOC,QAAS+O,aAAc,UAA3E,oBAMJ,kBAAC,KAAD,CACIC,IAAK5B,EACL6B,SAAU7N,EACV8N,UAAW9N,EAAQ1B,OACnBc,OAAQQ,EAAMR,QAAU,IACxB0L,MAAM,OACNiD,kBAAmB,GACnB9M,MAAO,CAAC+M,UAAW,UACnBC,SAAU,SAAC5P,GAAD,OAAO8N,IAAc9N,EAAkC,GAA9B2B,EAAQ3B,GAAG4O,UAAU3O,OAAc,GAAK,EAAG,MAE7E,gBAAG4P,EAAH,EAAGA,MAAOjN,EAAV,EAAUA,MAAV,OACG,yBAAKA,MAAOA,GACR,kBAACmM,EAAA,EAAD,CACI1M,WAAS,EACTE,UAAWf,EAAQ4K,aACnB5J,QAAS,kBAA4BwL,EAAtB6B,IAAU/B,EAA+B,KAA2B+B,KAEnF,kBAACd,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGC,WAAS,EAACC,WAAW,UAClCwL,IAAc+B,EACX,kBAACC,GAAA,EAAD,CAAYvN,UAAWf,EAAQwL,kBAC/B,kBAAC+C,EAAA,EAAD,CAAcxN,UAAWf,EAAQwL,kBAErC,0BAAMzK,UAAWf,EAAQ6K,2BAA4B1K,EAAQkO,GAAO3D,cAAgBvK,EAAQkO,GAAO3D,eAGvG,kBAACgD,EAAA,EAAD,CAAStQ,MAAK,2BAAsB+C,EAAQkO,GAAOjB,UAAU3O,OAA/C,4CACV,kBAAC8O,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQsL,YAAazK,WAAS,EAACC,WAAW,SAASK,QAAQ,UACnFhB,EAAQkO,GAAOjB,UAAU3O,SAIlC,kBAAC8O,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGQ,MAAO,CAACjC,YAAa,QAAS0B,WAAS,EAACC,WAAW,UACjE,kBAAC4M,EAAA,EAAD,CAAStQ,MAAM,wBACX,kBAACoR,EAAA,EAAD,CACIzN,UAAWf,EAAQyL,SACnBzK,QAAS,SAACyN,GACNA,EAAMC,kBACNxC,EAAoB/L,EAAQkO,GAAOjB,UAAU,GAAGuB,iBAMhE,kBAACpB,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGC,WAAS,EAACC,WAAW,UAE/BgL,EAAK3L,EAAQkO,GAAO3D,cAEpB,kBAACgD,EAAA,EAAD,CAAStQ,MAAM,0CACX,kBAACwR,GAAA,EAAD,OAGF,KAMVP,IAAU/B,EACV,kBAACiB,EAAA,EAAD,CAAM1M,WAAS,EAACE,UAAWf,EAAQoL,kBAC9BjL,EAAQkO,GAAOjB,UAAU7L,KAAI,SAACC,EAAGhD,GAAJ,OAC1B,kBAAC+O,EAAA,EAAD,CACI5M,MAAI,EACJC,GAAI,GACJa,IAAKD,EAAEqN,UACP9N,UAAWf,EAAQmL,aACnBtK,WAAS,EACTC,WAAW,SACXE,QAAS,kBAAMgL,EAAuBxK,KAEtC,kBAAC+L,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GAAIG,UAAWf,EAAQ2L,cAAenK,EAAEqN,WACvD,kBAACtB,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAAC8M,EAAA,EAAD,CAAStQ,MAAM,yBACX,kBAACoR,EAAA,EAAD,CAAMxN,QAAS,SAACyN,GACRA,EAAMC,kBACNzC,EAA2BzK,EAAEsN,KAEjC1N,MAAO,CAACjC,YAAa,QACrB4B,UAAWf,EAAQyL,kBAOzC,aASxBsD,GAAqBxO,IAAMyO,YAC3BC,GAAe1O,IAAMyO,YAuEZzG,gBArEW,SAACC,EAAOC,GAAR,MAAsB,CAC5CyG,aAAc1G,EAAM0G,aACpBC,YAAa3G,EAAM2G,YACnBC,2BAA4B5G,EAAM4G,8BAkEI,KAA3B7G,EA9DK,SAACxI,GAAW,IAEpBI,EAA+LJ,EAA/LI,QAAkB6L,GAA6KjM,EAAtLC,QAAsLD,EAA7KiM,wBAAiFI,GAA4FrM,EAArJsP,0BAAqJtP,EAA1H8L,6BAA0H9L,EAA5FqM,MAAmB8C,GAAyEnP,EAAtFoP,YAAsFpP,EAAzEmP,cAAcjD,EAA2DlM,EAA3DkM,2BAA4BmD,EAA+BrP,EAA/BqP,2BAF7I,EAIuB7O,IAAMC,SAAS,MAJtC,mBAInB6I,EAJmB,KAIDC,EAJC,KAM3B,OACI,kBAAC,IAAMgG,SAAP,KACQ,kBAAC,GAAD,CAAmBjG,iBAAkBA,EAAkBC,oBAAqBA,IAG3E8C,EAAK7N,IAAI,gBAAkB6N,EAAK7N,IAAI,UAA2B,IAAd6N,EAAKnL,KACvD,oCACI,kBAAC2K,GAAD,CACIQ,KAAK,cACLjM,QAASA,EAAQoP,YACjBtD,2BAA4BA,EAC5BE,QAAW4C,GACX/C,uBAAwBA,EACxBzM,QAAS2P,EAAe,KAAO,EAAI,GACnChD,oBAAqB5C,EACrB+C,UAAW+C,EAA2BG,cAG1C,kBAAC3D,GAAD,CACIQ,KAAK,QACLjM,QAASA,EAAQqP,MACjBvD,2BAA4BA,EAC5BE,QAAS8C,GACTjD,uBAAwBA,EACxBzM,QAAS2P,EAAe,KAAO,EAAI,GACnChD,oBAAqB5C,EACrB+C,UAAW+C,EAA2BI,SAExCpD,EAAK7N,IAAI,eAEf,kBAACqN,GAAD,CACIQ,KAAK,cACLjM,QAASA,EAAQoP,YACjBtD,2BAA4BA,EAC5BE,QAAW4C,GACX/C,uBAAwBA,EACxBzM,OAAQ2P,EAAe,IACvBhD,oBAAqB5C,EACrB+C,UAAW+C,EAA2BG,cAG1C,kBAAC3D,GAAD,CACIQ,KAAK,QACLjM,QAASA,EAAQqP,MACjBvD,2BAA4BA,EAC5BE,QAAS8C,GACT1P,OAAQ2P,EAAe,IACvBlD,uBAAwBA,EACxBE,oBAAqB5C,EACrB+C,UAAW+C,EAA2BI,Y,mBC5RpDnH,GAAqB,CACvBoH,0BACAC,oCACAC,kCACAC,0BACAC,yBAkFEC,GAAe,CACjBC,SAAU,MACVC,UAAW,aACXC,SAAS,IAAIC,MAAOC,cAAc9I,MAAM,EAAE,IAC1C+I,UAAW,GACXC,OAAQ,GACRC,UAAW,IACXC,OAAQ,IACRC,OAAQ,IAAI3S,IACZ4S,YAAa,GACbC,mBAAoB,MACpBC,kBAAmB,MACnBC,WAAY,MACZC,YAAa,MACbC,aAAc,MACd1E,KAAM,IAAIvO,IACVkT,OAAQ,IAAIlT,KAGVmT,G,4MAEFxI,M,aACIyI,uBAAwB,KACxBC,cAAc,EACdC,iBAAiB,EACjBC,iBAAiB,EACjBC,eAAe,GACZvB,I,EAIPwB,kBAAoB,WAChB,EAAKvR,MAAM0P,sBAAsB,K,EAGrC8B,wBAA0B,SAAC/P,GACvB,EAAKgQ,qBAAL,2BAA8B,EAAKhJ,OAAnC,IAA0C,CAAChH,EAAEgJ,OAAO3I,MAAOL,EAAEgJ,OAAOiH,U,EAGxEC,yBAA2B,SAACC,GACxB,OAAO,SAACnQ,EAAGoQ,GACP,IAAIC,EAAQ,2BAAO,EAAKrJ,OAAZ,IAAmB,CAACmJ,GAAaC,IAC7C,EAAKJ,qBAAqBK,K,EAIlCL,qBAAuB,SAACK,GACpB,EAAK9R,MAAM2P,gCAAgClC,KAAOC,YAClD,EAAK1N,MAAM6P,sBAAsB,CAACL,YAAa,GAAIC,MAAO,KAE1D,EAAKsC,SAASD,GACd,EAAK9R,MAAM0P,sBAAsBoC,I,EAGrCE,mBAAqB,SAACvQ,EAAGwQ,GACrB,IAAIH,EAAQ,2BAAO,EAAKrJ,OAAZ,IAAmBgI,OAAQwB,IACvC,EAAKF,SAASD,GACd,EAAK9R,MAAM0P,sBAAsBoC,I,EAGrCI,iBAAmB,SAACzQ,EAAGwQ,GACnB,IAAIH,EAAQ,2BAAO,EAAKrJ,OAAZ,IAAmB4D,KAAM4F,IACrC,EAAKF,SAASD,GACd,EAAK9R,MAAM0P,sBAAsBoC,I,EAGrCK,yBAA2B,WACvB,EAAKJ,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B0I,cAAe,EAAK1I,MAAM0I,iB,EAG5DiB,kBAAoB,WAChB,IAAIN,EAAQ,2BAAO,EAAKrJ,OAAUsH,IAClC,EAAK0B,qBAAqBK,I,EAG9BO,iBAAmB,SAACC,GAChB,EAAKP,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B,CAAC6J,IAAQ,EAAK7J,MAAM6J,O,EAGtDhS,oBAAsB,SAACmB,EAAGM,GAAa,IAAD,EACVN,EAAEgJ,OAAO3I,KAAKyQ,MAAM,MADV,mBAC5BC,EAD4B,KACpBd,EADoB,KAE9Be,EAAS,IAAI3U,IAAI,EAAK2K,MAAM+J,IAEhCzQ,EAAU0Q,EAAOC,IAAIhB,GAASe,EAAOE,OAAOjB,GAE5C,EAAKD,qBAAL,2BAA8B,EAAKhJ,OAAnC,IAA0C,CAAC+J,GAASC,M,EAGxDG,uBAAyB,SAACC,GACtB,IAAIf,EAAQ,eAAO,EAAKrJ,OACxBqJ,EAASe,GAAS9C,GAAa8C,GAC/B,EAAKpB,qBAAqBK,I,EAG9BgB,OAAS,WAAO,IAAD,EAQP,EAAK9S,MANLC,EAFO,EAEPA,QACAgM,EAHO,EAGPA,uBACA8G,EAJO,EAIPA,iBAEAC,GANO,EAKPC,0BALO,EAMPD,mBACA7D,EAPO,EAOPA,aAPO,EA4BP,EAAK1G,MAjBLiI,EAXO,EAWPA,YACAQ,EAZO,EAYPA,uBACAlB,EAbO,EAaPA,SACAC,EAdO,EAcPA,UACAC,EAfO,EAePA,QACAG,EAhBO,EAgBPA,SACAC,EAjBO,EAiBPA,OACAC,EAlBO,EAkBPA,SACAC,EAnBO,EAmBPA,OACAG,EApBO,EAoBPA,mBACAC,EArBO,EAqBPA,kBACAC,EAtBO,EAsBPA,WACAC,EAvBO,EAuBPA,YACAC,EAxBO,EAwBPA,aACA1E,EAzBO,EAyBPA,KACA2E,EA1BO,EA0BPA,OACAP,EA3BO,EA2BPA,OAGJ,OACI,kBAAC,IAAMlB,SAAP,KACI,kBAAC/B,EAAA,EAAD,CAAM1M,WAAS,GACX,kBAAC0M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IACX,kBAACyJ,EAAA,EAAD,CAAYjJ,MAAO,CAAC4H,QAAS,iBAA7B,2GAIA,kBAACiK,EAAA,EAAD,CACIC,UAAW,kBAACC,GAAA,EAAD,CAAO/R,MAAO,CAAC/B,SAAU,UACpC2B,QAAS,EAAKjB,MAAMqT,sBACpBrS,UAAWf,EAAQqT,WAHvB,UASJ,kBAAC9F,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGQ,MAAO,CAAC+M,UAAW,OAAQmF,UAAWpE,EAAe,IAAK5E,QAAS,OAAQ5K,gBAAiB,iBAAkBsJ,QAASiI,EAAyB,OAAS,KAC/J,kBAACsC,EAAA,EAAD,CACIC,WAAS,EACT3R,KAAK,cACLF,SAAU,EAAK4P,wBACfkC,YAAY,SACZhC,MAAOhB,EACPiD,WAAY,CACR1T,QAAS,CACLgC,KAAMhC,EAAQ2T,WAElBC,eACI,kBAAC,IAAMtE,SAAP,KACI,kBAACuE,EAAA,EAAD,CAAgBC,SAAS,SACrB,kBAACC,EAAA,EAAD,CAAQ3S,MAAO,CAACvC,MAAOC,IAAOC,cAK9C8O,QAAQ,WACRmG,SAAU,EAAKjU,MAAMkU,iBAGjC,kBAACC,GAAA,EAAD,CACI/T,QAAS4S,EAAkBoB,KAC3BlU,gBAAiBmM,EACjBlM,YAAa,kBAAM,EAAKyS,uBAAuB,SAC/CvS,eAAgB,OAChBC,oBAAqB,EAAKA,oBAC1BC,iBAAiB,UAGrB,kBAAC4T,GAAA,EAAD,CACI/T,QAAS4S,EAAkBqB,OAC3BnU,gBAAiBuQ,EACjBtQ,YAAa,kBAAM,EAAKyS,uBAAuB,WAC/CvS,eAAgB,SAChBC,oBAAqB,EAAKA,oBAC1BC,iBAAiB,YAGrB,kBAAC4T,GAAA,EAAD,CACI/T,QAAS4S,EAAkBsB,OAC3BpU,gBAAiB8Q,EACjB7Q,YAAa,kBAAM,EAAKyS,uBAAuB,WAC/CvS,eAAgB,SAChBC,oBAAqB,EAAKA,oBAC1BC,iBAAiB,YAGzB,yBAAKS,UAAWf,EAAQsU,qBACpB,kBAAC/J,GAAA,EAAD,CACIjJ,UAAU,SACVN,QAAS,EAAKkR,0BAEb,EAAK1J,MAAM0I,aAAe,0BAA4B,uBAK/D,yBAAK9P,MAAO,EAAKoH,MAAM0I,aAAe,GAAK,CAAClI,QAAS,SAEjD,kBAACuE,EAAA,EAAD,CAAM5M,MAAI,EAACE,WAAS,EAACD,GAAI,GAAIG,UAAWf,EAAQuU,gBAC5C,kBAAChH,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAAC2S,EAAA,EAAD,CACI1R,KAAK,YACLd,UAAWf,EAAQwU,YACnBC,GAAG,OACH1S,MAAM,aACNoB,KAAK,OACLuR,gBAAiB,CACbC,QAAQ,GAEZlD,MAAOzB,EACPrO,SAAU,EAAK4P,2BAIvB,kBAAChE,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAAC2S,EAAA,EAAD,CACI1R,KAAK,UACLd,UAAWf,EAAQwU,YACnBC,GAAG,OACH1S,MAAM,WACNoB,KAAK,OACLuR,gBAAiB,CACbC,QAAQ,GAEZlD,MAAOxB,EACPtO,SAAU,EAAK4P,4BAK3B,kBAAChE,EAAA,EAAD,CAAM5M,MAAI,EAACE,WAAS,EAACD,GAAI,GAAIG,UAAWf,EAAQuU,gBAE5C,kBAAChH,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAAC2S,EAAA,EAAD,CACI1R,KAAK,WACLd,UAAWf,EAAQwU,YACnBzS,MAAM,gBACNoB,KAAK,SACLyR,WAAY,CACRC,KAAM,GACNC,IAAK,IAETJ,gBAAiB,CACbC,QAAQ,GAEZlD,MAAOrB,EACPzO,SAAU,EAAK4P,2BAIvB,kBAAChE,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAAC2S,EAAA,EAAD,CACI1R,KAAK,SACLd,UAAWf,EAAQwU,YACnBzS,MAAM,cACNoB,KAAK,SACLyR,WAAY,CACRC,KAAM,GACNC,IAAK,IAETJ,gBAAiB,CACbC,QAAQ,GAEZlD,MAAOpB,EACP1O,SAAU,EAAK4P,2BAIvB,kBAAChE,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAAC2S,EAAA,EAAD,CACI1R,KAAK,WACLd,UAAWf,EAAQwU,YACnBzS,MAAM,gBACNoB,KAAK,SACLyR,WAAY,CACRC,KAAM,IACNC,IAAK,KAETJ,gBAAiB,CACbC,QAAQ,GAEZlD,MAAOnB,EACP3O,SAAU,EAAK4P,2BAIvB,kBAAChE,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAAC2S,EAAA,EAAD,CACI1R,KAAK,SACLd,UAAWf,EAAQwU,YACnBzS,MAAM,cACNoB,KAAK,SACLyR,WAAY,CACRC,KAAM,IACNC,IAAK,KAETJ,gBAAiB,CACbC,QAAQ,GAEZlD,MAAOlB,EACP5O,SAAU,EAAK4P,2BAIvB,kBAAChE,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CAAahU,UAAWf,EAAQwU,aAChC,kBAACQ,GAAA,EAAD,qBACA,kBAACC,GAAA,EAAD,CACIxD,MAAO1B,EACPpO,SAAU,EAAK4P,wBACf1P,KAAK,WACLqT,UAAW,CACPC,eAAgB,CACZC,MAAM,GAAD,OAAKpV,EAAQqV,wBAAb,YAAwCrV,EAAQsV,YAEzDlU,MAAO,CAACqI,OAAQC,IAAE6L,qBAGtB,kBAACC,GAAA,EAAD,CAAU/D,MAAM,OAAhB,OACA,kBAAC+D,GAAA,EAAD,CAAU/D,MAAM,OAAhB,mBACA,kBAAC+D,GAAA,EAAD,CAAU/D,MAAM,MAAhB,mBAKJ,kBAAClE,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CAAahU,UAAWf,EAAQwU,aAC5B,kBAACQ,GAAA,EAAD,sBACA,kBAACC,GAAA,EAAD,CACIxD,MAAOX,EACPnP,SAAU,EAAK4P,wBACf1P,KAAK,eACLqT,UAAW,CACPC,eAAgB,CACZC,MAAM,GAAD,OAAKpV,EAAQqV,wBAAb,YAAwCrV,EAAQsV,YAEzDlU,MAAO,CAACqI,OAAQC,IAAE6L,qBAIlB,EAAKxV,MAAMgT,kBAAkB0C,cAAclU,KAAI,SAACC,GAAD,OAC3C,kBAACgU,GAAA,EAAD,CAAU/T,IAAKD,EAAGiQ,MAAOjQ,GAAIA,SAOjD,kBAAC+L,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CAAahU,UAAWf,EAAQwU,aAC5B,kBAACQ,GAAA,EAAD,4BACA,kBAACC,GAAA,EAAD,CACIxD,MAAOf,EACP/O,SAAU,EAAK4P,wBACf1P,KAAK,qBACLqT,UAAW,CACPC,eAAgB,CACZC,MAAM,GAAD,OAAKpV,EAAQqV,wBAAb,YAAwCrV,EAAQsV,YAEzDlU,MAAO,CAACqI,OAAQC,IAAE6L,qBAIlB,EAAKxV,MAAMgT,kBAAkB5L,oBAAoB5F,KAAI,SAACC,GAAD,OACjD,kBAACgU,GAAA,EAAD,CAAU/T,IAAKD,EAAGiQ,MAAOjQ,GAAIA,SAOjD,kBAAC+L,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CAAahU,UAAWf,EAAQwU,aAC5B,kBAACQ,GAAA,EAAD,2BACA,kBAACC,GAAA,EAAD,CACIxD,MAAOd,EACPhP,SAAU,EAAK4P,wBACf1P,KAAK,oBACLqT,UAAW,CACPC,eAAgB,CACZC,MAAM,GAAD,OAAKpV,EAAQqV,wBAAb,YAAwCrV,EAAQsV,YAEzDlU,MAAO,CAACqI,OAAQC,IAAE6L,qBAIlB,EAAKxV,MAAMgT,kBAAkB9K,mBAAmB1G,KAAI,SAACC,GAAD,OAChD,kBAACgU,GAAA,EAAD,CAAU/T,IAAKD,EAAGiQ,MAAOjQ,GAAIA,SAOjD,kBAAC+L,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IACX,kBAAC8U,GAAA,EAAD,CACIvV,QAAS,EAAKJ,MAAMgT,kBAAkB4C,YACtCC,YAAa,SAACC,GAAD,OAAY,kBAACtC,EAAA,EAAD,eAAWvU,OAAO,QAAW6W,EAA7B,CAAqC9T,MAAM,cAAc2S,gBAAiB,CAACtT,MAAM,CAAC/B,SAAU,OAAQS,UAAW,YACxIgW,eAAgB,SAAAC,GAAM,OAAIA,GAC1BpU,SAAU,EAAK+P,yBAAyB,cACxCsE,eAAa,EACbhW,QAAS,CACLoV,MAAM,GAAD,OAAKpV,EAAQiW,yBAAb,YAAyCjW,EAAQqV,wBAAjD,YAA4ErV,EAAQsV,UAApF,KACLY,MAAOlW,EAAQmW,oBACfJ,OAAQ/V,EAAQoW,oBAChBC,oBAAqBrW,EAAQsW,0BAC7BC,QAASvW,EAAQwW,4BAErB/E,MAAOb,KAKf,kBAACrD,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IACf,kBAAC8U,GAAA,EAAD,CACQvV,QAAS,EAAKJ,MAAMgT,kBAAkB0D,YACtCb,YAAa,SAACC,GAAD,OAAY,kBAACtC,EAAA,EAAD,eAAWvU,OAAO,QAAW6W,EAA7B,CAAqC9T,MAAM,cAAc2S,gBAAiB,CAACtT,MAAM,CAAC/B,SAAU,OAAQS,UAAW,YACxIgW,eAAgB,SAAAC,GAAM,OAAIA,GAC1BpU,SAAU,EAAK+P,yBAAyB,eACxCsE,eAAa,EACbhW,QAAS,CACLoV,MAAM,GAAD,OAAKpV,EAAQiW,yBAAb,YAAyCjW,EAAQqV,wBAAjD,YAA4ErV,EAAQsV,UAApF,KACLY,MAAOlW,EAAQmW,oBACfJ,OAAQ/V,EAAQoW,oBAChBC,oBAAqBrW,EAAQsW,0BAC7BC,QAASvW,EAAQwW,4BAErB/E,MAAOZ,OAMvB,kBAACtD,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GAAIG,UAAWf,EAAQuU,gBAClC,kBAACtB,EAAA,EAAD,CAAQpF,QAAQ,WAAW7M,QAAS,EAAKmR,kBAAmBpR,UAAWf,EAAQ0W,aAA/E,mBAMR,kBAACnJ,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGQ,MAAO,CAACiK,WAAY,SAClC,kBAAC,GAAD,CACIlL,QAAS2S,EACT9G,uBAAwBA,EACxBqD,0BAA2B,EAAKA,0BAChCjD,KAAMA,EACNuK,kBAAmB,EAAK5W,MAAM4W,kBAC9B1K,2BAA4B,EAAKlM,MAAMkM,iC,YAjb1C1L,IAAMqW,WA0bhBrO,gBA5iBS,SAACC,EAAOC,GAAR,MAAsB,CAC1CqK,iBAAkBtK,EAAMsK,iBACxBjH,6BAA8BrD,EAAMqD,6BACpCmH,0BAA2BxK,EAAMwK,0BACjCD,kBAAmBvK,EAAMuK,kBACzB7D,aAAc1G,EAAM0G,gBAuiBgB7G,GAAzBE,CAA6C7J,aA5hB7C,SAACC,GAAD,MAAY,CACvBgV,UAAW,CACPkD,OAAO,aAAD,OAAe/X,IAAOC,UAGhCsW,wBAAyB,CACrB3V,gBAAiB,QACjB+J,OAAQC,IAAE6L,mBAGda,oBAAqB,CACjB,uBAAwB,CACpB1W,gBAAiBZ,IAAOa,YAE1BT,UAAW,QAGjBwX,YAAa,CACTI,cAAe,OACf7L,MAAO,QACP1L,OAAQ,OACRV,MAAOF,EAAMsK,QAAQlK,QAAQmK,KAC7B6N,YAAapY,EAAMsK,QAAQlK,QAAQmK,KACnCpJ,UAAW,QAGfyU,eAAgB,CACZzU,UAAW,QAGf0U,YAAa,CACTvJ,MAAO,MACP6C,aAAc,OAGlBkJ,aAAc,CACV/L,MAAO,qBAGXqJ,oBAAqB,CACjBpV,UAAW,OACXY,UAAW,OACXmL,MAAO,QAGXkL,oBAAqB,CACjB9W,SAAU,QAGdiW,UAAW,CACPuB,OAAO,aAAD,OAAe/X,IAAOC,UAGhCuX,0BAA2B,CACvB/W,OAAQ,QACR0L,MAAO,QACP6I,SAAU,WACVmD,OAAQ,SAGZhB,yBAA0B,CACtBiB,UAAY,SAGhBV,2BAA4B,CACxBlD,UAAW,EACX4D,UAAY,QACZC,UAAW,UAGf9D,UAAW,CACP+D,MAAO,QACPxX,OAAQ,UACRf,MAAOC,IAAOC,QACd+X,cAAe,OACfzX,SAAU,WAid0CX,CAAmBsS,K,UClchEtS,gBAhHA,SAACC,GAAD,MAAY,CACvB0Y,yBAA0B,CACtBpM,MAAO,OACP,aAAc,CACZvL,gBAAiB,gBAIvB4X,YAAa,CACT5X,gBAAiBZ,IAAO8J,gBAG5B2O,gBAAiB,CACf,UAAW,CAAC7X,gBAAiBZ,IAAOa,aAGtC6X,gBAAiB,CACbV,cAAe,OACfvX,OAAQ,OACRkY,aAAc,EACd/X,gBAAiBZ,IAAO8J,eACxB/J,MAAOF,EAAMsK,QAAQlK,QAAQmK,KAC7BwO,YAAa,SACb,aAAc,CACZhY,gBAAiB,eAEnB,UAAW,CACPA,gBAAiBZ,IAAOa,WACtBd,MAAO,UAIjB8Y,iBAAkB,CACd9Y,MAAO,aA+EAH,EA3EM,SAACqB,GAAW,IAEzBC,EAeAD,EAfAC,QACA4X,EAcA7X,EAdA6X,sBACAC,EAaA9X,EAbA8X,eACAC,EAYA/X,EAZA+X,eACAC,EAWAhY,EAXAgY,kBACAC,EAUAjY,EAVAiY,iBACAC,EASAlY,EATAkY,kBACAC,EAQAnY,EARAmY,oBACAC,EAOApY,EAPAoY,iBACAC,EAMArY,EANAqY,uBACAC,EAKAtY,EALAsY,wBACAC,EAIAvY,EAJAuY,gBACAC,EAGAxY,EAHAwY,uBACAC,EAEAzY,EAFAyY,gBACAC,EACA1Y,EADA0Y,SAGJ,OACI,kBAAC,IAAMnJ,SAAP,KACQ,kBAAC/B,EAAA,EAAD,CAAM1M,WAAS,GACX,kBAAC0M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IACX,kBAACmU,GAAA,EAAD,CAAalH,QAAQ,SAAS9M,UAAWf,EAAQqX,0BAC7C,kBAACqB,GAAA,EAAD,CAAY/D,QAAM,EAACgE,QAAQ,cAAcvX,MAAOqX,EAAW,CAAC5Z,MAAO,mBAAqB,IAAxF,qBACA,kBAAC,KAAD,CACI4Z,SAAUA,EACV1X,UAAWf,EAAQqX,yBACnBjW,MAAOwW,EACPnG,MAAO6G,EACPzK,QAAQ,SAERlM,SAAU4W,EACV3D,WAAY,CACR/S,KAAM,kBACN4S,GAAI,cACJ5G,QAAS,UAEbqH,UAAW,CACP0D,cAAe,CACX7X,UAAWf,EAAQsX,gBAIzBO,GAAkB,kBAACrC,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYP,QAASjI,MAAOya,GAAjF,YAClBC,GAAkB,kBAACtC,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYO,YAAjE,oBAClB4R,GAAqB,kBAACvC,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYC,YAAjE,gBACrBkS,GAAqB,kBAACvC,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYI,mBAAjE,wBACrBgS,GAAoB,kBAACxC,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYK,WAAjE,cACpBgS,GAAqB,kBAACzC,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYH,YAAjE,gBACrByS,GAAuB,kBAAC1C,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYJ,cAAjE,kBACvB2S,GAAoB,kBAAC3C,GAAA,EAAD,CAAUzU,UAAWf,EAAQuX,gBAAiB9F,MAAO7L,IAAYN,QAAjE,2BAKlC,kBAACoI,EAAA,EAAD,CAASE,UAAU,QAAQxQ,MAAOgb,EAAwBrX,UAAWf,EAAQ2X,kBACzE,kBAACpK,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IACX,kBAACqS,EAAA,EAAD,CACIlS,UAAWf,EAAQwX,gBACnB3J,QAAQ,YACR7M,QAAS,kBAAMwX,KACfC,SAAU7O,QAAQyO,KAA6BC,GAAmBG,EAClEjF,WAAS,GALb,+B,kDC1EtBnL,GAAqB,CACvBwQ,mBA0JWtQ,gBA/JS,SAACC,EAAOC,GAAR,MAAsB,CAC1CpK,KAAMmK,EAAMsQ,mBA8JwBzQ,GAAzBE,CAA6C7J,aA5K7C,SAAAC,GAAK,MAAK,CACrBgK,YAAa,CACTjJ,gBAAiBZ,IAAO8J,eACxBqC,MAAO,SAGXoI,UAAW,CACPrK,QAAS,SACToO,MAAO,QACPxX,OAAQ,cAmK4ClB,EAvJ9B,SAACqB,GAAW,IAC9B1B,EAAgF0B,EAAhF1B,KAAM2B,EAA0ED,EAA1EC,QAAS6Y,EAAiE9Y,EAAjE8Y,cAAelC,EAAkD5W,EAAlD4W,kBAAmB1K,EAA+BlM,EAA/BkM,2BAEzD1L,IAAMgJ,WAAU,WACZsP,EAAclC,KACf,CAACA,IAEJ,IAAMoC,EAAc,SAACvX,GACjBA,EAAEkN,kBACFzC,EAA2B,MAC3B4M,EAAc,OAGlB,OAAOlC,EACH,kBAACnN,GAAA,EAAD,CAEIpI,MAAO,CAACqI,OAAQC,IAAEC,iBAClBlJ,KAAMmJ,QAAQ+M,GACd9M,QAASkP,EACTjP,WAAY,CACR/I,UAAWf,EAAQ2I,cAGvB,kBAACoB,GAAA,EAAD,KAAc1L,EAAOA,EAAKwQ,UAAY,kBAAC5E,GAAA,EAAD,MAAtC,IAAmD,kBAACkJ,GAAA,EAAD,CAAOpS,UAAWf,EAAQqT,UAAWxU,MAAM,UAAUmC,QAAS+X,KACjH,kBAAC7O,GAAA,EAAD,KAEQ7L,EACI,oCACA,kBAAC2a,GAAA,EAAD,KACK3a,EAAK4a,QAAU5a,EAAK4a,QAAU,IAGnC,kBAACC,GAAA,EAAD,CAAOjY,KAAK,SACR,kBAACkY,GAAA,EAAD,KACQ,kBAACC,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,gBACA,kBAACA,GAAA,EAAD,CAAWjc,MAAOiB,EAAKqM,cAAerM,EAAKqM,aAAajM,OAAS,GAAKJ,EAAKqM,aAAarD,MAAM,EAAE,IAAM,MAAQhJ,EAAKqM,eAGvH,kBAAC0O,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,mBACA,kBAACA,GAAA,EAAD,CAAWjc,MAAOiB,EAAKC,YAAaD,EAAKC,WAAa,GAAKD,EAAKC,WAAW+I,MAAM,EAAE,IAAM,MAAQhJ,EAAKC,aAG1G,kBAAC8a,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,eACA,kBAACA,GAAA,EAAD,CAAWjc,MAAOiB,EAAKsX,aAActX,EAAKsX,YAAc,GAAKtX,EAAKsX,YAAYtO,MAAM,EAAE,IAAM,MAAQhJ,EAAKsX,cAG7G,kBAACyD,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,oBACA,kBAACA,GAAA,EAAD,CAAWjc,MAAOiB,EAAKoY,aAAcpY,EAAKoY,YAAYhY,OAAS,GAAKJ,EAAKoY,YAAYpP,MAAM,EAAE,IAAM,MAAQhJ,EAAKoY,cAGpH,kBAAC2C,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,eACA,kBAACA,GAAA,EAAD,KAAYhb,EAAK+V,SAGrB,kBAACgF,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,2BACA,kBAACA,GAAA,EAAD,KAAYhb,EAAK4J,qBAGrB,kBAACmR,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,4BACA,kBAACA,GAAA,EAAD,KAAYhb,EAAK8I,sBAGrB,kBAACiS,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,gCACA,kBAACA,GAAA,EAAD,KAAYhb,EAAK+I,SAAW/I,EAAK+I,SAASC,MAAM,EAAE,IAAM,cAG5D,kBAAC+R,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,8BACA,kBAACA,GAAA,EAAD,KAAYhb,EAAKiJ,SAAWjJ,EAAKiJ,SAASD,MAAM,EAAE,IAAM,cAG5D,kBAAC+R,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,2BACA,kBAACA,GAAA,EAAD,eAAehb,EAAKoJ,QAApB,UAEJ,kBAAC2R,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,yBACA,kBAACA,GAAA,EAAD,eAAehb,EAAKsJ,QAApB,UAGJ,kBAACyR,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,2BACA,kBAACA,GAAA,EAAD,eAAehb,EAAKuJ,QAApB,UAGJ,kBAACwR,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,yBACA,kBAACA,GAAA,EAAD,eAAehb,EAAKwJ,QAApB,UAGJ,kBAACuR,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,6BACA,kBAACA,GAAA,EAAD,KAAYhb,EAAK0J,UAAL,UAAoB1J,EAAK6J,UAAzB,OAA0C,iBAG1D,kBAACkR,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,2BACA,kBAACA,GAAA,EAAD,KAAYhb,EAAK0J,UAAL,UAAoB1J,EAAK0J,UAAzB,OAA0C,sBAInCuR,IAAtBjb,EAAKkb,aACF,kBAACH,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,sBAA0Bhb,EAAKmb,KAA/B,KACA,kBAACH,GAAA,EAAD,KAAYhb,EAAKkb,eACP,QAGKD,IAAtBjb,EAAKob,aACF,kBAACL,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,sBAA0Bhb,EAAKmb,KAA/B,KACA,kBAACH,GAAA,EAAD,KAAYhb,EAAKob,eACP,QAGMH,IAAvBjb,EAAKqb,cACF,kBAACN,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,mBAAuBhb,EAAKmb,KAA5B,KACA,kBAACH,GAAA,EAAD,KAAYhb,EAAKqb,gBACP,QAGKJ,IAAtBjb,EAAKsb,aACF,kBAACP,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,2BAA+Bhb,EAAKmb,KAApC,KACA,kBAACH,GAAA,EAAD,KAAYhb,EAAKsb,eACP,KA3G9B,KAkHA,oCACI,kBAACtP,EAAA,EAAD,CAAYwD,QAAQ,MAApB,IAA0B,kBAAC5D,GAAA,EAAD,MAA1B,KACA,kBAACA,GAAA,EAAD,CAAUgB,MAAO,IAAK1L,OAAQ,SAKlD,OCxKF8I,GAAqB,CACvBuR,yCA8EWrR,gBAnFS,SAACC,EAAOC,GAAR,MAAsB,CAC1CoR,kCAAmCrR,EAAMqR,qCAkFLxR,GAAzBE,CAA6C7J,aA3E7C,SAAAC,GAAK,MAAK,CACrBgK,YAAa,CACTjJ,gBAAiBZ,IAAO8J,eACxBC,SAAU,QACVC,SAAU,QAGdgR,cAAe,CACXxP,QAAS,uBAGbyP,mBAAoB,CAChB1a,SAAU,QAGd2a,sBAAuB,CACnBta,gBAAiB,qBACjB4K,QAAS,MACTtL,OAAQ,UAGZqU,UAAW,CACPhU,SAAU,OACVR,MAAO,QACPe,OAAQ,UACRkU,SAAU,WACVmG,IAAK,EACLC,MAAO,GAGXC,KAAM,CACF7P,QAAS,oBAGb8P,SAAU,CACN/a,SAAU,OACViL,QAAS,uBAuC2C5L,EAnCtB,SAACqB,GAAW,IACtC6Z,EAAoF7Z,EAApF6Z,oCAAqCC,EAA+C9Z,EAA/C8Z,kCAAmC7Z,EAAYD,EAAZC,QAChF,GAAyC,OAAtC6Z,EAA4C,MAAO,GAFT,IAGrCQ,EAA0BR,EAA1BQ,KAEFtB,GAF4Bc,EAApBlX,IAAoBkX,EAAf9W,IAAe8W,EAAV3X,MAEJ,kBAAM0X,EAAoC,QAE9D,OACI,kBAACpQ,GAAA,EAAD,CACIK,QAASkP,EACTtY,KAAMmJ,QAAQiQ,GACdzY,MAAO,CAACqI,OAAQC,IAAEC,iBAClBG,WAAY,CACR/I,UAAWf,EAAQ2I,cAGvB,kBAACwK,GAAA,EAAD,CAAOpS,UAAWf,EAAQqT,UAAWrS,QAAS+X,IAE9C,kBAAC7O,GAAA,EAAD,CAAenJ,UAAWf,EAAQ8Z,eAC9B,kBAACzP,EAAA,EAAD,iRAKA,yBAAKtJ,UAAWf,EAAQga,uBACpB,kBAAC3P,EAAA,EAAD,CAAYjJ,MAAO,CAAC/B,SAAU,SAA9B,8DACgEgb,EAAKC,QAAQ,IAAK,KAAKA,QAAQ,IAAK,IADpG,0CACgJD,EAAKC,QAAQ,IAAK,KAAKA,QAAQ,IAAK,IADpL,gCCpCdjS,GAAqB,CACvBkS,gCACAC,gBACAC,2BACAC,iBACAC,wCACAC,+BACAC,wBACAC,4CAKElD,GAAwB,CAC1BlY,gBAAiB,eAGfqb,GAAgB,CAClB5X,KAAM,aACN6X,aAAc,CACV,CACI7X,KAAM,OACN8X,SAAU,CACVpc,MAAO,CAAC,EAAG,IAAK,IAAK,KAErBqc,QAAS,CACLrc,MAAO,CAAC,EAAG,IAAK,IAAK,GACrBoC,KAAM,UAyHhBka,G,4MAEF3S,MAAQ,CACJmO,kBAAmB,KACnByE,kBAAkB,EAClBC,oBAAoB,EACpBxU,UAAW,GACX3I,OAAQ,EACRC,OAAQ,EACRkI,IAAK,aACLC,KAAK,IAAI4J,MAAOC,cAAc9I,MAAM,EAAE,IACtCb,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACN2R,gBAAiB,GACjBxQ,aAAa,EACbE,4BAA4B,EAC5BsT,uBAAuB,EACvBC,cAAc,EACdC,aAAc,CACVtd,OAAQ,EACRC,OAAQ,EACRkI,IAAK,aACLC,KAAK,IAAI4J,MAAOC,cAAc9I,MAAM,EAAE,IACtCb,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,I,EAIdsN,eAAiB1T,IAAMyO,Y,EAEvBsC,kBAAoB,WACZ,EAAKvR,MAAM0b,MAAM,EAAK1b,MAAM+a,wCAAuC,I,EAG3EY,mBAAqB,SAACC,EAAWC,GAM7B,GAJGD,EAAU3W,OAAOvG,SAAW,EAAKsB,MAAMiF,OAAOvG,QAC7C,EAAKsB,MAAM8b,kBAGX,EAAK9b,MAAM+b,gBAAgBrP,UAAamP,EAAUpV,OAAS,EAAKgC,MAAMhC,MAAQoV,EAAUnV,OAAS,EAAK+B,MAAM/B,MAAQmV,EAAUlV,OAAS,EAAK8B,MAAM9B,MAAQkV,EAAUjV,OAAS,EAAK6B,MAAM7B,MAAM,CAE9L,IAAMH,EAAOM,WAAW,EAAK0B,MAAMhC,MAC7BC,EAAOK,WAAW,EAAK0B,MAAM/B,MAC7BC,EAAOI,WAAW,EAAK0B,MAAM9B,MAC/BqV,EAAQjV,WAAW,EAAK0B,MAAM7B,MAC5BA,EAAOoV,EAAQrV,EAAOqV,EAAQ,IAAMA,EAE1C,EAAKhc,MAAM+b,gBAAgBrP,QAAQuP,YAAYC,YAC/C,IAAIC,EAAU,CACV/Y,KAAM,UACNgZ,MAAO,CACH,CAACzV,EAAMF,GACP,CAACG,EAAMH,GACP,CAACG,EAAMF,GACP,CAACC,EAAMD,GACP,CAACC,EAAMF,KAIX4V,EAAgB,IAAI,EAAKrc,MAAM+b,gBAAgBrP,QAAQ1M,MAAMsc,YAAYC,QAAQ,CACjFC,SAAUL,EACVM,OAAQzB,KAGZ,EAAKhb,MAAM+b,gBAAgBrP,QAAQuP,YAAYvJ,IAAI2J,GAGvD,GAAG,EAAKrc,MAAM0c,0BAA4B,EAAK1c,MAAM0c,2BAA6Bd,EAAUc,yBAAyB,CAEjH,IAAIpe,EAAO,EAAK0B,MAAM0c,yBAClB3U,GAAezJ,EAAK0J,UACpBC,EAAyD,cAA5B3J,EAAK4J,mBAElCyU,EAAgBzV,EAAkC5I,GAEhDmI,EAA2BkW,EAA3BlW,KAAMC,EAAqBiW,EAArBjW,KAAMC,EAAegW,EAAfhW,KAAMC,EAAS+V,EAAT/V,KAErBqB,GAA8B,EAAKjI,MAAM4c,WAAWlQ,SACnD,EAAK1M,MAAM4c,WAAWlQ,QAAQ1M,MAAM6c,KAAKC,KAAK,CAC1CrS,OAAQ,EAAE1D,WAAWJ,GAAQI,WAAWH,IAAS,GAAIG,WAAWN,GAAQM,WAAWL,IAAS,GAC5FqW,KAAM,GACP,CACCC,YAAa,KACbC,YAAa,KAIjBhV,GAA8B3J,EAAKqS,qBAAuBtM,IAAoBQ,oBAC9E,EAAK7E,MAAM2a,aAAa,2IAG5B,EAAK5I,SAAL,uCAAkB,EAAKtJ,OAAvB,IACIV,cACAE,8BACG0U,GAHP,IAIIpE,gBAAiB,GACjBkD,aAAa,2BACN,EAAKhT,MAAMgT,cACXkB,Q,EAMnBO,qBAAuB,WACnB,EAAKld,MAAM4a,oCAAoC,MAC/C,EAAK5a,MAAM+b,gBAAgBrP,SAAW,EAAK1M,MAAM+b,gBAAgBrP,QAAQuP,aAAe,EAAKjc,MAAM+b,gBAAgBrP,QAAQuP,YAAYC,a,EAG3IiB,8BAAgC,SAACC,GAG7B,IAFA,IAAIC,EAAQD,EAAOE,KAEbD,GAAS,KAAKA,GAAS,IAC7B,KAAOA,EAAQ,KAAKA,GAAS,IAI7B,IAFA,IAAIrB,EAAQoB,EAAOG,KAEbvB,GAAS,KAAKA,GAAS,IAC7B,KAAMA,EAAQ,KAAKA,GAAS,IAE5B,IAAIwB,EAAiB,CACjB/W,KAAMM,WAAWqW,EAAOK,KAAKpV,QAAQ,IACrC3B,KAAMK,WAAWqW,EAAOM,KAAKrV,QAAQ,IACrC1B,KAAMI,WAAWsW,EAAMhV,QAAQ,IAC/BzB,KAAMG,WAAWiV,EAAM3T,QAAQ,KAGnC,EAAK0J,SAAL,uCAAkB,EAAKtJ,OAAU+U,GAAjC,IAAiD/B,aAAa,2BAAK,EAAKhT,MAAMgT,cAAiB+B,O,EAGnGG,uBAAyB,SAACC,GAAgB,IAC9BnX,EAAoDmX,EAApDnX,KAAMC,EAA8CkX,EAA9ClX,KAAMC,EAAwCiX,EAAxCjX,KAAMC,EAAkCgX,EAAlChX,KAAMzI,EAA4Byf,EAA5Bzf,OAAQC,EAAoBwf,EAApBxf,OAAQkI,EAAYsX,EAAZtX,IAAKC,EAAOqX,EAAPrX,IACrD,EAAKwL,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8BhC,OAAMC,OAAMC,OAAMC,OAAMzI,SAAQC,SAAQkI,MAAKC,U,EAG/EsX,sBAAwB,WACa,IAA9B,EAAK7d,MAAM8d,eACV,EAAK9d,MAAM+d,wBAAwB,KAAM,GAIzC,EAAK/d,MAAM+d,wBAAwB,KAAM,I,EAIjDtF,gBAAkB,WAAO,IAAD,EAC0D,EAAKhQ,MAA3EtK,EADY,EACZA,OAAQC,EADI,EACJA,OAAQkI,EADJ,EACIA,IAAKC,EADT,EACSA,IAAKE,EADd,EACcA,KAAMC,EADpB,EACoBA,KAAMC,EAD1B,EAC0BA,KAAMC,EADhC,EACgCA,KAAM2R,EADtC,EACsCA,gBAEtDyF,EAAmB,EAAKhe,MAAM0c,yBAAyBxU,qBAAuB+V,IAAmBrZ,UAEjGsZ,EAAUvY,EAAW4S,GAmBrB4F,EAAU,CACVP,WAnBavX,EAAc,CAC3BlI,SACAC,SACAkI,IAAK,EAAKtG,MAAM0c,yBAAyBtV,sBAAwB/C,IAAoBQ,mBACjFyB,EAAM,WACNA,EACJC,IAAK,EAAKvG,MAAM0c,yBAAyBtV,sBAAwB/C,IAAoBQ,mBACjF0B,EAAM,WACNA,EAAM,YACVE,OACAC,OACAC,OACAC,OACAJ,OAAQ,EAAKxG,MAAM0c,yBAAyB0B,SAC5CtX,UAAW,EAAK9G,MAAM0c,yBAAyBne,WAC/CsI,OAAQqX,EAAQnY,KAKhBX,QAAS8Y,EAAQ9Y,QACjBiZ,SAAU,EAAKre,MAAM0c,0BAGtBsB,GAAoBE,EAAQnY,KAAOC,IAAiBP,aAAc,EAAKzF,MAAM8a,oBAAoBqD,GAC/F,EAAKne,MAAM6a,2BAA2BsD,I,EAG/CG,gBAAkB,WAAO,IAAD,EACiB,EAAKte,MAAM4c,WAAWlQ,QAAQ1M,MAA3Dsc,EADY,EACZA,YAAaL,EADD,EACCA,YACfsC,EAAgB,EAAKve,MAAM4c,WAAWlQ,QAAtC6R,YAEN,IAAI,EAAK9V,MAAM8S,sBAAsB,CACjC,IAAMiD,EAAkBC,YAAS,IAAI,SAAC/P,GACf,WAAhBA,EAAMjG,OACL,EAAK0U,8BAA8Bb,EAAYoC,MAAMC,wBAAwBjQ,EAAMkQ,QAAQpC,SAASY,YAI5GmB,EAAYM,GAAG,UAAU,SAACnQ,GACH,WAAhBA,EAAMjG,OAAsBiG,EAAMoQ,eAA8C,eAA7BpQ,EAAMoQ,cAAc1b,MACtEmb,EAAYQ,WAGbrQ,EAAMkQ,SAAWlQ,EAAMkQ,QAAQI,UAC9BtQ,EAAMkQ,QAAQI,SAAU,GAGT,WAAhBtQ,EAAMjG,QACL8V,EAAYU,SACZ,EAAKlN,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B+S,cAAc,MAG7B,UAAhB9M,EAAMjG,OACLwT,EAAYC,YAGG,aAAhBxN,EAAMjG,QACL,EAAKsJ,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B+S,cAAc,KAC5C,EAAK2B,8BAA8Bb,EAAYoC,MAAMC,wBAAwBjQ,EAAMkQ,QAAQpC,SAASY,aAI5GmB,EAAYM,GAAG,SAAUL,GAEzBD,EAAYM,GAAG,UAAU,SAACnQ,GACtB,GAAGA,EAAMoQ,eAA8C,cAA7BpQ,EAAMoQ,cAAc1b,KAAqB,CAC/D,GAAmB,WAAhBsL,EAAMjG,MAAoB,OAC7B,EAAK0U,8BAA8BzO,EAAMwQ,SAAS,GAAG1C,SAASY,YAK1E,EAAKrL,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B+S,cAAc,EAAMD,uBAAuB,KAEtE,EAAK9S,MAAM+S,aAAc+C,EAAYU,SAGpCV,EAAYY,OAAO,WAAY,CAC3BC,KAAK,W,EAKjBnT,uBAAyB,SAACxB,GACtB,EAAKsH,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B6S,oBAAoB,KAClD,EAAKtb,MAAM4a,oCAAoCnQ,I,EAGnD4I,sBAAwB,WACjB,EAAK5K,MAAM6S,oBACV,EAAKvJ,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B6S,oBAAoB,M,EAI1DpP,2BAA6B,SAAC0K,GAC1B,EAAK7E,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8BmO,wB,EAGlC4B,uBAAyB,SAAC/W,GACtB,IAEIiQ,EADA2N,EAAStY,WAAWtF,EAAEgJ,OAAOiH,OAKzBA,EANS,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,SAAU,UAI9C4N,SAAS7d,EAAEgJ,OAAO3I,MACzByd,MAAMF,GACG5d,EAAEgJ,OAAOiH,MAGR2N,EAIL5d,EAAEgJ,OAAOiH,MAGrB,EAAKK,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B,CAAChH,EAAEgJ,OAAO3I,MAAO4P,EAAO+J,aAAa,2BAAK,EAAKhT,MAAMgT,cAAjB,IAA+B,CAACha,EAAEgJ,OAAO3I,MAAO4P,Q,EAGtH8N,mBAAqB,a,EAIrBC,iBAAmB,WAAO,IACd/C,EAA6B,EAAK1c,MAAlC0c,yBADa,EAEyD,EAAKjU,MAA3EnC,EAFa,EAEbA,IAAKC,EAFQ,EAERA,IAAKE,EAFG,EAEHA,KAAMC,EAFH,EAEGA,KAAMC,EAFT,EAESA,KAAMC,EAFf,EAEeA,KAAMzI,EAFrB,EAEqBA,OAAQC,EAF7B,EAE6BA,OAAQma,EAFrC,EAEqCA,gBAE1D,IAAImE,EAA0B,OAAO,EAErC,GAAGA,EAAyBxU,qBAAuB+V,IAAmBrZ,UAClE,OAAO,EAIP,IAAM8a,EAAQhD,EAAyBtV,sBAAwB/C,IAAoBQ,mBAAqByB,EAAM6J,KAAKwP,MAAMrZ,GACnHsZ,EAAQlD,EAAyBtV,sBAAwB/C,IAAoBQ,mBAAqB0B,EAAM4J,KAAKwP,MAAMpZ,GAEnHsZ,GAAWD,EAAQF,GAAS,MAE5BI,EAAMC,YAA6BrD,EAAyBxU,oBAC9D8X,EAAYtD,EAAyBtV,sBAAwB/C,IAAoBQ,mBAAqB+a,EAAQF,EAAQ,EACpHlY,KAAKC,MAAMoY,EAAU1b,EAA8BuY,EAAyBtV,uBAAyB,EAE3G4Y,GAAa,IAEb,IAKMC,GAFWrZ,EAAOD,GAAQC,EAAOD,GAAQmZ,GACvC,IAAMnZ,GAASC,EAAO,MAAQkZ,KAFpBpZ,EAAOD,GAAQqZ,IAFd1X,IAAWnK,MAAM,CAACK,KAAMoe,GAA2Bve,EAAQC,IAAW,GAKnC4hB,EACtD,OAAGzH,IAAoB1S,IAAYH,YAAc6S,IAAoB1S,IAAYJ,aAAqBwa,EAAa,IAE5GA,G,EAKfC,gBAAkB,WACd,OAAG,EAAKzX,MAAMtK,OAAS,EAAU,2BAC9B,EAAKsK,MAAMtK,OAAS,EAAKsK,MAAMrK,OAAe,mCAC9C,EAAKqK,MAAMtK,OAAS,EAAK6B,MAAM0c,yBAAyB1U,UAAiB,0BAAN,OAAiC,EAAKhI,MAAM0c,yBAAyB1U,WACpI,I,EAGXmY,cAAgB,WACZ,OAAG,EAAK1X,MAAMrK,OAAS,EAAU,2BAC9B,EAAKqK,MAAMtK,OAAS,EAAKsK,MAAMrK,OAAe,mCAC9C,EAAKqK,MAAMrK,OAAS,EAAK4B,MAAM0c,yBAAyBvU,UAAiB,wBAAN,OAA+B,EAAKnI,MAAM0c,yBAAyBvU,WAClI,I,EAGXiY,eAAiB,WACb,OAAG,EAAKpgB,MAAM0c,yBAAyBtV,sBAAwB/C,IAAoBQ,mBAC5E,EAAK4D,MAAMnC,IAAM,EAAKmC,MAAMlC,IAAY,mCACpC,GAIH,EAAKkC,MAAMnC,IACZ,EAAKmC,MAAMnC,IAAM,EAAKmC,MAAMlC,IAAY,mCACxC,EAAKkC,MAAMnC,IAAM,EAAKtG,MAAM0c,yBAAyBrV,SAASC,MAAM,EAAE,IAC/D,yBAAN,OAAgC,EAAKtH,MAAM0c,yBAAyBrV,SAASC,MAAM,EAAG,IAAM,IAAM,EAAKtH,MAAM0c,yBAAyBrV,SAASC,MAAM,EAAG,IAErJ,GALoB,gB,EASnC+Y,aAAe,WACX,OAAG,EAAKrgB,MAAM0c,yBAAyBtV,sBAAwB/C,IAAoBQ,mBAC5E,EAAK4D,MAAMnC,IAAM,EAAKmC,MAAMlC,IAAY,mCACpC,GAIH,EAAKkC,MAAMlC,IACZ,EAAKkC,MAAMnC,IAAM,EAAKmC,MAAMlC,IAAY,mCACxC,EAAKkC,MAAMlC,IAAM,EAAKvG,MAAM0c,yBAAyBnV,SAASD,MAAM,EAAE,IAC/D,uBAAN,OAA8B,EAAKtH,MAAM0c,yBAAyBnV,SAASD,MAAM,EAAG,IAAM,IAAM,EAAKtH,MAAM0c,yBAAyBnV,SAASD,MAAM,EAAG,IAEnJ,GALoB,gB,EASnCgZ,cAAgB,WACZ,OAAG,EAAK7X,MAAMhC,KAAO,EAAKzG,MAAM0c,yBAAyB9U,QAAe,wBAAN,OAA+B,EAAK5H,MAAM0c,yBAAyB9U,SAClI,EAAKa,MAAMhC,KAAO,EAAKgC,MAAM/B,KAAY,mCACrC,I,EAGX6Z,YAAc,WACV,OAAG,EAAK9X,MAAM/B,KAAO,EAAK1G,MAAM0c,yBAAyBhV,QAAe,sBAAN,OAA6B,EAAK1H,MAAM0c,yBAAyBhV,SAChI,EAAKe,MAAMhC,KAAO,EAAKgC,MAAM/B,KAAY,mCACrC,I,EAGX8Z,cAAgB,WAAO,IAAD,EACK,EAAK/X,MAApB9B,EADU,EACVA,KAAMC,EADI,EACJA,KADI,EAEW,EAAK5G,MAAM0c,yBAAhC7U,EAFU,EAEVA,QAASC,EAFC,EAEDA,QAEjB,GAAGlB,GAAQD,GACP,GAAGA,EAAOmB,EAAS,MAAM,wBAAN,OAA+BA,QAIlD,KAAGD,EAAUlB,GAAQmB,EAAUnB,GAAQkB,EAAUjB,GAAQkB,EAAUlB,GAC9D,2CAET,MAAO,I,EAGX6Z,YAAc,WAAO,IAAD,EACO,EAAKhY,MAApB9B,EADQ,EACRA,KAAMC,EADE,EACFA,KADE,EAEa,EAAK5G,MAAM0c,yBAAhC7U,EAFQ,EAERA,QAFQ,EAECC,QAEjB,OAAGlB,GAAQD,GACJC,EAAOiB,EAAe,sBAAN,OAA6BA,GAG7C,I,EAGX6Y,aAAe,WACX,OAAG,EAAKjY,MAAMR,2BAAmC/F,EAAWkB,KAAKC,gBAAgBkX,QAAQ,IAAK,WACvF,I,EAGXoG,aAAe,WACX,OAAG,EAAKlY,MAAMR,2BAAmC/F,EAAWkB,KAAKC,gBAAgBkX,QAAQ,IAAK,WACvF,I,EAGXqG,aAAe,WACX,OAAG,EAAKnY,MAAMV,YAAoB7F,EAAWkB,KAAKI,mBAAmB+W,QAAQ,IAAK,YAC/E,EAAK9R,MAAMR,2BAAmC/F,EAAWkB,KAAKC,gBAAgBkX,QAAQ,IAAK,eACvF,I,EAGXsG,eAAiB,WACb,MAAO,I,EAGXC,gBAAkB,WACd,OAAG,EAAKrY,MAAMR,2BAAmC/F,EAAWkB,KAAKC,gBAAgBkX,QAAQ,IAAK,eACvF,I,EAGXwG,kBAAoB,WAChB,OAAG,EAAKtY,MAAMV,YAAoB7F,EAAWkB,KAAKI,mBAAmB+W,QAAQ,IAAK,YAC3E,I,EAGXyG,eAAiB,WACb,OAAI,EAAKvY,MAAMR,2BACR,GAD2C/F,EAAWkB,KAAKK,e,EAItEwd,iBAAmB,SAACC,GAChB,OAAI,EAAKlhB,MAAMuY,iBACZ2I,EAAW,KAAgBhf,EAAW0B,QAAQE,gBADV,I,EAK3Cqd,oBAAsB,SAACD,GACnB,IAAME,EAAaC,EAAmB,EAAKrhB,MAAMiF,QAC3Cqc,EAAgBta,EAAuB,EAAKhH,MAAMiF,QAExD,IAAI,EAAKjF,MAAM0b,KAAK,CAChB,IAAI6F,EAAiBC,SAASC,IAAQC,IAAI,mBAC1C,GAAGH,GAAkBA,GAAkB,GAAI,OAAOrf,EAAW0B,QAAQM,oBAGzE,IAAI,EAAKuE,MAAM8P,gBAAiB,OAAOrW,EAAW0B,QAAQK,eAC1D,GAAG,EAAKwE,MAAM8P,kBAAoB1S,IAAYP,SAAW8b,EAAa,GAAI,OAAOlf,EAAWkB,KAAKO,kBACjG,GAAG,EAAK8E,MAAM8P,kBAAoB1S,IAAYN,QAAU6b,EAAa,GAAI,OAAOlf,EAAWkB,KAAKO,kBAEhG,GAAG,EAAK8E,MAAM8P,kBAAoB1S,IAAYP,SAClB,GAAK8b,GACVhZ,IAAWnK,MAAM,CAACK,KAAM,EAAK0B,MAAM0c,0BAA2B,EAAK1c,MAAM7B,OAAQ,EAAK6B,MAAM5B,SAAW,GACtF,EAAG,MAAO,+FAGlD,OAAG,EAAKqK,MAAM8P,kBAAoB1S,IAAYK,WAAa,EAAKlG,MAAMuY,kBAAoB1S,IAAYP,SAAW4b,EAAW,MAIzHA,EAAW,IAHHhf,EAAW0B,QAAQG,gBAI1B,EAAK/D,MAAM0c,yBACZ,EAAK1c,MAAMiF,OAAOvG,OAAS,EAAU,8DACrC4iB,EAAgBJ,EAAW,IAAgB,2EAGzC,EAAKzY,MAAMR,4BACZ,EAAKQ,MAAM8P,kBAAoB1S,IAAYH,YAC1CyK,KAAKwP,MAAM,EAAKlX,MAAMlC,KAAO4J,KAAKwP,MAAM,EAAKlX,MAAMnC,KAAO,QAClD,yEACN,GATyCpE,EAAW0B,QAAQI,iB,EAYvE8O,OAAS,WAAO,IAAD,EAQP,EAAK9S,MANLC,EAFO,EAEPA,QACA0hB,EAHO,EAGPA,mBACAC,EAJO,EAIPA,WACAlF,EALO,EAKPA,yBACAzX,EANO,EAMPA,OACA6Y,EAPO,EAOPA,eAPO,EAuBP,EAAKrV,MAZLmO,EAXO,EAWPA,kBACAyE,EAZO,EAYPA,iBACAC,EAbO,EAaPA,mBACAnd,EAdO,EAcPA,OACAC,EAfO,EAePA,OACAkI,EAhBO,EAgBPA,IACAC,EAjBO,EAiBPA,IACAE,EAlBO,EAkBPA,KACAC,EAnBO,EAmBPA,KACAC,EApBO,EAoBPA,KACAC,EArBO,EAqBPA,KACA2R,EAtBO,EAsBPA,gBAGAsJ,EAAUnF,EAGRwE,EAAW,EAAKzB,mBA5BX,EA8BRoC,EACe,CACV,EAAK3B,kBACL,EAAKC,gBACL,EAAKG,gBACL,EAAKC,cACL,EAAKC,gBACL,EAAKC,cACL,EAAKC,eACL,EAAKC,eACL,EAAKC,eACL,EAAKC,iBACL,EAAKC,kBACL,EAAKC,oBACL,EAAKC,iBACL,EAAKC,iBAAiBC,GACtB,EAAKC,oBAAoBD,GACzB,EAAKd,iBACL,EAAKC,gBAGCyB,MAAM,IAAIC,KAAK,IAnDlB,oBAsDPC,EAtDO,KAuDPC,EAvDO,KAwDPC,EAxDO,KAyDPC,EAzDO,KA0DPC,EA1DO,KA2DPC,EA3DO,KA4DPvK,EA5DO,KA6DPC,EA7DO,KA8DPC,GA9DO,KA+DPC,GA/DO,KAgEPC,GAhEO,MAiEPC,GAjEO,MAkEPC,GAlEO,MAmEPkK,GAnEO,MAoEPC,GApEO,MAqEPC,GArEO,MAsEPC,GAtEO,MAyELC,GAA4B,CAC9BV,EACAC,EACAC,EACAC,EACAC,EACAC,EACAE,GACAC,GACAC,IAWEnK,GARwB,WAC1B,IAAI,IAAI7Z,EAAI,EAAGA,EAAIikB,GAA0BhkB,OAAQD,IACjD,GAAGikB,GAA0BjkB,GAAI,OAAOikB,GAA0BjkB,GAGtE,OAAO,EAGqBkkB,GAE1BtK,GAAyBC,KAAoDgK,IAA0C,IAE7H,OACI,kBAAC,IAAM/S,SAAP,KAGI,kBAAC,GAAD,CAAuBqH,kBAAmBA,EAAmB1K,2BAA4B,EAAKA,6BAC9F,kBAAC,GAAD,MAGQ,EAAKzD,MAAM+S,aAEX,kBAAClR,EAAA,EAAD,CAAYtJ,UAAWf,EAAQ2iB,cAA/B,6DAIE,GAGRvH,EAEF,6BACI,kBAAC1N,EAAA,EAAD,CAAStQ,MAAM,qBAAqBwQ,UAAU,SAC1C,kBAACgV,EAAA,EAAD,CACI7hB,UAAWf,EAAQ6iB,kBACnBC,aAAW,eACXjkB,MAAM,UACNmC,QAAS,kBAAM,EAAK8Q,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B4S,kBAAkB,OAC/D,kBAAC2H,EAAA,EAAD,SAOZ,kBAACrV,EAAA,EAAD,CAAStQ,MAAM,qBAAqBwQ,UAAU,SAC1C,kBAACgV,EAAA,EAAD,CACI7hB,UAAWf,EAAQgjB,iBACnBF,aAAW,eACXjkB,MAAM,UACNmC,QAAS,kBAAM,EAAK8Q,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B4S,kBAAkB,OAC/D,kBAAC7M,EAAA,EAAD,CAAcnN,MAAO,CAAC/B,SAAU,QAKxC,kBAAC4jB,EAAA,EAAD,CACIliB,UAAWf,EAAQkjB,OACnBrV,QAAQ,aACRpN,KAAM2a,EACNpb,QAAS,CACLoV,MAAM,GAAD,OAAKpV,EAAQmjB,cAEtBC,OAAO,QAIHzB,EACI,kBAACpU,EAAA,EAAD,CAAM1M,WAAS,EAACO,MAAO,CAACiiB,aAAc,oBAClC,kBAAC9V,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IACX,kBAACqS,EAAA,EAAD,CACIO,WAAW,EACXzS,UAAWf,EAAQsjB,iBACnBpQ,UAAW,kBAACa,EAAA,EAAD,CAAQ3S,MAAO,CAAC/B,SAAU,OAAQL,OAAQ,kBACrDgC,QAAS,kBAAM,EAAK8Q,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B6S,oBAAoB,MACjErb,QAAS,CACL+B,MAAO/B,EAAQujB,sBACfrQ,UAAWlT,EAAQwjB,2BAEvB/K,SAAU,EAAKjQ,MAAM+S,eAAiBkB,GAEtC,0BAAMrb,MAAO,CAACvC,MAAO,EAAK2J,MAAM+S,aAAe,sBAAwB,UAAWoG,EAAW9S,aAIrG,kBAACtB,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGQ,MAAO,CAACqiB,WAAY,oBAClC,kBAAC/V,EAAA,EAAD,CAAStQ,MAAM,wBAAwBwQ,UAAU,OAC7C,8BACI,kBAACgV,EAAA,EAAD,CACI5hB,QAAS,SAACQ,GACN,EAAKyK,2BAA2B0V,EAAW7S,IAC3CtN,EAAEkN,mBAEN+J,SAAU,EAAKjQ,MAAM+S,eAAiBkB,GAEtC,kBAACjO,EAAA,EAAD,CAAMpN,MAAO,CAAC/B,SAAU,OAAQS,UAAW,cASvE,kBAACmT,EAAA,EAAD,CACIO,WAAW,EACXzS,UAAWf,EAAQsjB,iBACnBliB,MAAO,CAACiiB,aAAc,mBACtBnQ,UAAW,kBAACa,EAAA,EAAD,CAAQ3S,MAAO,CAAC/B,SAAU,OAAQL,OAAQ,kBACrDgC,QAAS,kBAAM,EAAK8Q,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B6S,oBAAoB,MACjErb,QAAS,CACL+B,MAAO/B,EAAQujB,sBACfrQ,UAAWlT,EAAQwjB,2BAEvB/K,SAAU,EAAKjQ,MAAM+S,cAVzB,8BAgBA,oCAEQ,kBAAChO,EAAA,EAAD,CAAM1M,WAAS,GAEP+gB,GAAWA,EAAQza,sBAAwB/C,IAAoBQ,mBAC/D,oCACI,kBAAC2I,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACI1R,KAAK,MACLd,UAAWf,EAAQ2jB,UACnBlP,GAAG,MACH1S,MAAM,cACNoB,KAAK,SACLsO,MAAOpL,EACPud,MAAOha,QAAQ2Y,IACfsB,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAYvB,GACZ7O,WAAY,CACR3S,UAAUf,EAAQ+jB,cAClBnP,WAAY,CACRC,IAAK,EACLC,IAAK,KAGbJ,gBAAiB,CACbC,QAAQ,EACR5T,UAAUf,EAAQgkB,SAEtBriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,KAI9C,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACI1R,KAAK,MACLd,UAAWf,EAAQ2jB,UACnBlP,GAAG,MACH1S,MAAM,YACNoB,KAAK,SACL0R,IAAK,EACLC,IAAK,GACLmP,KAAM,EACNxS,MAAOnL,EACPsd,MAAOha,QAAQ2Y,IACfsB,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAYvB,GACZ7O,WAAY,CACR3S,UAAUf,EAAQ+jB,cAClBnP,WAAY,CACRC,IAAK,EACLC,IAAK,KAGbJ,gBAAiB,CACbC,QAAQ,EACR5T,UAAUf,EAAQgkB,SAEtBriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,MAOlD,oCACI,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACI1R,KAAK,MACLd,UAAWf,EAAQ2jB,UACnBlP,GAAG,MACH1S,MAAM,oBACNkiB,KAAM,EACN9gB,KAAK,OACLsO,MAAOpL,EACPud,MAAOha,QAAQ2Y,IACfsB,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAYvB,GACZ7O,WAAY,CACR3S,UAAUf,EAAQ+jB,cAClBnP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQxa,SAASC,MAAM,EAAE,IAC9ByN,IAAK8M,EAAQta,SAASD,MAAM,EAAE,KAC9B,IAERqN,gBAAiB,CACbC,QAAQ,EACR5T,UAAUf,EAAQgkB,SAEtBriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,KAI9C,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACI1R,KAAK,MACLd,UAAWf,EAAQ2jB,UACnBlP,GAAG,MACH1S,MAAM,kBACNoB,KAAK,OACLsO,MAAOnL,EACPsd,MAAOha,QAAQ4Y,IACfqB,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAYtB,GACZ9O,WAAY,CACR3S,UAAUf,EAAQ+jB,cAClBnP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQxa,SAASC,MAAM,EAAE,IAC9ByN,IAAK8M,EAAQta,SAASD,MAAM,EAAE,KAC9B,IAERqN,gBAAiB,CACbC,QAAQ,EACR5T,UAAUf,EAAQgkB,SAEtBriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,MAQtD,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACIpQ,KAAK,SACLsR,GAAG,aACH1S,MAAO,kBACPhB,UAAWf,EAAQ2jB,UACnBlS,MAAOjL,EACP7E,SAAU+f,EACVkC,MAAOha,QAAQqY,GACf4B,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAY7B,EACZvO,WAAY,CACR3S,UAAUf,EAAQgkB,QAClBpP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQna,QACbqN,IAAK8M,EAAQja,QACbsc,KAAM,MACN,IAERvP,gBAAiB,CAAC3T,UAAUf,EAAQgkB,SACpCniB,KAAK,OACLF,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,KAK9C,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACIpQ,KAAK,SACLsR,GAAG,aACHmP,MAAOha,QAAQsY,GACfngB,MAAO,gBACPhB,UAAWf,EAAQ2jB,UACnBlS,MAAOhL,EACP9E,SAAU+f,EACVmC,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAY5B,EACZrgB,KAAK,OACL6R,WAAY,CACR3S,UAAUf,EAAQgkB,QAClBpP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQna,QACbqN,IAAK8M,EAAQja,QACbsc,KAAM,MACN,IAERvP,gBAAiB,CAAC3T,UAAUf,EAAQgkB,SACpCriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,KAK9C,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACIpQ,KAAK,SACLsR,GAAG,aACHmP,MAAOha,QAAQuY,GACfpgB,MAAO,kBACPhB,UAAWf,EAAQ2jB,UACnBlS,MAAO/K,EACP/E,SAAU+f,EACVmC,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAY3B,EACZtgB,KAAK,OACL6R,WAAY,CACR3S,UAAUf,EAAQgkB,QAClBpP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQha,QACbkN,IAAK8M,EAAQ/Z,QACboc,KAAM,MACN,IAERvP,gBAAiB,CAAC3T,UAAUf,EAAQgkB,SACpCriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,KAK9C,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACIpQ,KAAK,SACLsR,GAAG,aACHmP,MAAOha,QAAQwY,GACfrgB,MAAO,gBACPhB,UAAWf,EAAQ2jB,UACnBlS,MAAO9K,EACPhF,SAAU+f,EACVmC,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAY1B,EACZvgB,KAAK,OACL6R,WAAY,CACR3S,UAAUf,EAAQgkB,QAClBpP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQha,QACbkN,IAAK8M,EAAQ/Z,QACboc,KAAM,MACN,IAERvP,gBAAiB,CAAC3T,UAAUf,EAAQgkB,SACpCriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,eAAiBkB,IAIzCrB,EACG,kBAAC8I,EAAA,EAAD,CAAOnjB,UAAWf,EAAQmkB,kBAAmB/iB,MAAO,CAACgjB,KAAMC,IAAiBpK,IAAK,UAC7E,kBAACvM,EAAA,EAAD,CAAStQ,MAAM,wBACX,8BACI,kBAACwlB,EAAA,EAAD,CACI7hB,UAAWf,EAAQskB,iBACnBtjB,QAAS,EAAKqd,gBACd5F,UAAWmJ,GAA8B,IAAnB/D,GAEtB,kBAAC0G,EAAA,EAAD,CAAMxjB,UAAWf,EAAQwkB,uBAK3C,IAGN,kBAACjX,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACIpQ,KAAK,SACLsR,GAAG,eACHmP,MAAOha,QAAQmY,GACfhgB,MAAM,iBACNhB,UAAWf,EAAQ2jB,UACnBlS,MAAOvT,EACP2lB,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAY/B,EACZlgB,KAAK,SACL6R,WAAY,CACR3S,UAAUf,EAAQgkB,QAClBpP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQ7Z,UAAY6Z,EAAQ1Z,UAAY,EAC7C4M,IAAK8M,EAAQ7Z,UAAY6Z,EAAQ7Z,UAAY,EAC7Ckc,KAAM,IACN,IAERvP,gBAAiB,CAAC3T,UAAUf,EAAQgkB,SACpCriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,cAAgB,EAAK/S,MAAMV,cAAgB2U,KAKxE,kBAAClP,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQ0jB,cACjC,kBAACnQ,EAAA,EAAD,CACIpQ,KAAK,SACLsR,GAAG,eACHmP,MAAOha,QAAQoY,GACfjgB,MAAM,eACNhB,UAAWf,EAAQ2jB,UACnBlS,MAAOtT,EACP0lB,oBAAqB,CAAC9iB,UAAWf,EAAQ8jB,YACzCA,WAAY9B,EACZngB,KAAK,SACL6R,WAAY,CACR3S,UAAUf,EAAQgkB,QAClBpP,WAAYgN,EAAU,CAClB/M,IAAK+M,EAAQ7Z,UAAY6Z,EAAQ1Z,UAAY,EAC7C4M,IAAK8M,EAAQ7Z,UAAY6Z,EAAQ7Z,UAAY,EAC7Ckc,KAAM,IACN,IAERvP,gBAAiB,CAAC3T,UAAUf,EAAQgkB,SACpCriB,SAAU,EAAK4W,uBACfE,SAAU,EAAKjQ,MAAM+S,cAAgB,EAAK/S,MAAMV,cAAgB2U,KAKxE,kBAAC,GAAD,CACI7E,sBAAuBA,GACvBC,eAAgBA,EAChBC,eAAgBA,EAChBC,kBAAmBA,GACnBC,iBAAkBA,GAClBC,kBAAmBA,GACnBC,oBAAqBA,GACrBC,iBAAkBA,GAClBC,uBAAwBA,GACxBC,wBAAyBA,GACzBC,gBAAiBA,EACjBC,uBAAwB,EAAKA,uBAC7BkM,YAAa,EAAKjM,gBAClBkM,iBAAkB,EAAKlc,MAAMkc,iBAC7B5L,gBAAiB,EAAK/Y,MAAM0c,yBAC5BjE,gBAAiB,EAAKA,gBACtBC,SAAU,EAAKjQ,MAAM+S,eAAiBkB,IAItCzX,EAAOvG,QAAU2c,EAEjB,kBAAC8I,EAAA,EAAD,CAAOnjB,UAAWf,EAAQmkB,kBAAmB/iB,MAAO,CAACgjB,KAAM,QAASnK,IAAK,UACrE,kBAACvM,EAAA,EAAD,CAAStQ,MAA0B,IAAnBygB,EAAuB,kBAAoB,eACvD,kBAAC+E,EAAA,EAAD,CAAYnK,SAAU,EAAKjQ,MAAM+S,aAAcxa,UAAWf,EAAQskB,iBAAkBtjB,QAAS,EAAK4c,uBAEvE,IAAnBC,EACA,kBAAC8G,EAAA,EAAD,CAAU5jB,UAAWf,EAAQwkB,iBAAkBpjB,MAAO,CAACvC,MAAMC,IAAOC,WAEpE,kBAAC6lB,EAAA,EAAD,CAAOC,aAAc7f,EAAOvG,OAAQI,MAAM,WACtC,kBAACimB,EAAA,EAAD,CAAW/jB,UAAWf,EAAQwkB,iBAAkBpjB,MAAO,CAACvC,MAAMC,IAAOC,eAOvF,MAMlB,kBAACmlB,EAAA,EAAD,CAAOnjB,UAAWf,EAAQ+kB,oBAAqB3jB,MAAOia,EAAqB,GAAK,CAACrS,QAAS,SACtF,kBAAC,GAAD,CACIgD,uBAAwB,EAAKA,uBAC7BC,2BAA4B,EAAKA,2BACjCmH,sBAAuB,EAAKA,sBAC5Ba,eAAgB,EAAKA,oB,YAvgCnB1T,IAAMqW,WAghCrBrO,gBAlrCS,SAACC,EAAOC,GAAR,MAAsB,CAC1CpK,KAAMmK,EAAMnK,KACZd,QAASiL,EAAMjL,QACfynB,oBAAqBxc,EAAMwc,oBAC3BC,iBAAkBzc,EAAMyc,iBACxBC,SAAU1c,EAAM0c,SAChBC,SAAU3c,EAAM2c,SAChBngB,OAAQwD,EAAMxD,OACd8G,KAAMtD,EAAMsD,KACZ6V,WAAYnZ,EAAM4c,kBAClB3I,yBAA0BjU,EAAMiU,yBAChChB,KAAMjT,EAAMiT,QAuqCwBpT,GAAzBE,CAA6C7J,aAnoC7C,SAACC,GAAD,MAAY,CACvBwkB,YAAa,CACTlY,MAxBY,IAyBZ1L,OAAQ,OACR0a,IAAK,IACLxC,aAAc,cACd5X,UAAW,2BACXgX,OAAQ,OACR9L,SAAU,UACVrL,gBAAiBZ,IAAO8J,gBAG5Boa,iBAAkB,CACdlP,SAAU,QACVsQ,KAAM,MACNnK,IAAK,QACLxQ,OAAQC,IAAE2b,iBAGZxC,kBAAmB,CACjB/O,SAAU,QACVsQ,KAAMC,IACNpK,IAAK,QACLxQ,OAAQC,IAAE2b,iBAGdN,oBAAqB,CACjBjR,SAAU,QACVmG,IAAK,IACLhD,OAAQ,GACRmN,KAAM,EACNnZ,MAAO,OACP1L,OAAQ,OACRkK,OAAQC,IAAE2b,gBACV3lB,gBAAiB,iBACjB4lB,eAAgB,aAGpB5B,aAAc,CACV7M,OAAQ,oBACRwM,aAAc,OACdkC,UAAW,OACX7lB,gBAAiBZ,IAAO8J,gBAG9Bob,QAAS,CACP1Z,QAAS,iBAGXyZ,cAAe,CACbzZ,QAAS,gBACTxJ,WAAY,SAGdgjB,WAAY,CACVjlB,MAAO,SACPQ,SAAU,QAGVikB,iBAAkB,CACdxM,cAAe,OACf5X,UAAW,OACXG,SAAU,OACVkM,WAAY,IACZ1M,MAAOC,IAAOC,QACdymB,eAAgB,aAChBjmB,OAAQ,QAGZgkB,sBAAuB,CACrBzY,WAAY,SACZC,SAAU,SACVC,aAAc,WACdhC,QAAS,gBAGXwa,0BAA2B,CACvBxa,QAAS,gBAGb2a,UAAW,CACP1Y,MAAO,QAGX0X,aAAc,CACV7O,SAAU,QACVmG,IAAK,IACLjb,OAAQ,uBACRyK,OAAQC,IAAE2b,gBACVxmB,MAAO,QACPQ,SAAU,OACVK,gBAAiB,oBACjB4K,QAAS,MACTgb,eAAgB,YAChB7N,aAAc,OAGlB0M,kBAAmB,CACfrQ,SAAU,WACV9K,QAAS,OACTyO,aAAc,MACd5X,UAAW,2BACXH,gBAAiBZ,IAAO8J,gBAG5B4b,iBAAkB,CACdvZ,MAAO,OACP1L,OAAQ,QAGZ+kB,iBAAkB,CACdha,QAAS,UAohC2C5L,CAAmByc,K,4BC1qCzE9S,GAAqB,CACvByS,2CACA2K,oBACAC,4BAoEWnd,gBA7ES,SAACC,GAAD,MAAY,CAChCmd,oCAAqCnd,EAAMmd,oCAC3ClK,KAAMjT,EAAMiT,KACZmK,YAAapd,EAAMod,eA0EiBvd,GAAzBE,CAA6C7J,aAlG7C,SAACC,GAAD,MAAY,CACvBknB,cAAe,CACXnmB,gBAAiBZ,IAAO8J,gBAG5Bkd,WAAY,CACRrc,OAAO,GAAD,OAAKC,IAAEC,gBAAkB,EAAzB,gBAGVoc,KAAM,CACF1mB,SAAU,OACVyL,WAAY,WACZ9B,QAAS,eACTgd,cAAe,OAGnBC,mBAAoB,CAChBnP,cAAe,WAiFqCpY,CAAmBwnB,aAjE5C,SAACnmB,GAAW,IACnCC,EAAYD,EAAZC,QAEFmmB,EAAyB,WAE3BpmB,EAAM0lB,mBAONnE,EAAiBC,SAASC,IAAQC,IAAI,oBAAsB,EAE5D2E,EAAexc,QAAQ7J,EAAM4lB,sCAAwC5lB,EAAM0b,MAE/E,OACI,kBAACjS,GAAA,EAAD,CACI/I,KAAM2lB,EACNvc,QAXc,WACf9J,EAAM6lB,aAAa7lB,EAAM+a,wCAAuC,IAW/DhR,WAAY,CACR/I,UAAWf,EAAQ6lB,eAEvB7lB,QAAS,CACLgC,KAAMhC,EAAQ8lB,aAIlB,kBAAC5b,GAAA,EAAD,KACI,kBAACG,EAAA,EAAD,CAAYjJ,MAAO,CAAC0M,aAAc,SAAlC,+RAMA,kBAACzD,EAAA,EAAD,CAAYjJ,MAAO,CAAC0M,aAAc,SAAlC,WACY,kBAACvD,GAAA,EAAD,CAAMjJ,UAAU,SAASN,QAASjB,EAAM2lB,sBAAuB3kB,UAAWf,EAAQ+lB,MAAlF,uBADZ,UAEU,GAAKzE,EAFf,wBAKA,kBAACjX,EAAA,EAAD,CAAYjJ,MAAO,CAAC0M,aAAc,SAAlC,aAEI,kBAACvD,GAAA,EAAD,CAAMjJ,UAAW+kB,KAAYC,GAAI,YAAavlB,UAAWf,EAAQ+lB,MAAjE,aAFJ,MAGI,kBAACxb,GAAA,EAAD,CAAMjJ,UAAU,SAASN,QAASmlB,EAAwBplB,UAAWf,EAAQ+lB,MAA7E,WAHJ,0DAOA,kBAACQ,GAAA,EAAD,KACI,kBAACtT,EAAA,EAAD,CAAQpF,QAAQ,WAAW9M,UAAWf,EAAQimB,mBAAoBjlB,QAASmlB,GAA3E,SAIA,kBAAClT,EAAA,EAAD,CAAQjS,SAAO,EAAC6M,QAAQ,WAAW7M,QAAS,kBAAMjB,EAAMymB,QAAQC,KAAK,cAAc1lB,UAAWf,EAAQimB,oBAAtG,YAIA,kBAAChT,EAAA,EAAD,CAAQpF,QAAQ,WAAW9M,UAAWf,EAAQimB,mBAAoBjlB,QAASjB,EAAM2lB,uBAAjF,6B,yCC1GL,IACX,KACA,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YCXW,YAACgB,EAAYC,EAASC,GACjC,OAAOA,EAAYC,GAAOtF,SAASmF,IAAeC,EAAUD,EAAWrf,MAAM,EAAE,IAAM,IAAMqf,EAAWrf,MAAM,GAAG,IAAKqf,EAAWrf,MAAM,EAAE,KCC5H,IACXyf,OAAQ,CACJC,KAAM,CAACloB,MAAO,WACdmoB,cAAeloB,IAAO8J,eACtBqe,UAAU,EACVjoB,OAAQ,CACJkoB,EAAG,IACHC,EAAG,MAIXC,OAAQ,CACJC,aAAa,GAGjBC,YAAa,SAACzW,EAAaD,GAcvB,MACI,CACI,CAII2W,MAlBM3W,EAAWnS,OAAS,GAC9B,gBAAkBmS,EAAWvJ,MAAM,EAAG,IAAM,MAC5C,gBAAkBuJ,IAEPC,EACfA,EAAYpS,OAAS,GACjB,oBAAsBoS,EAAYxJ,MAAM,EAAG,IAAM,MACjD,oBAAsBwJ,EAC1B,IAEa,4CASLkW,KAAM,CACFloB,MAAO,QACPoC,KAAM,IAEVumB,KAAM,QACNC,KAAM,QAGNC,QAAS,MACTC,EAAG,GAEHC,EAAG,EACHC,QAAS,GACTC,WAAW,EACXC,QAAS,a,4ICrCvB1f,GAAqB,CACvBuR,yCA+DEoO,GAAoB,CACtB,UACA,QACA,SACA,SACA,SACA,UACA,OACA,OACA,QACA,SACA,UACA,WACA,MACA,MACA,YACA,QACA,WACA,UACA,WA6BJ,IA0aezf,eAAQ,KAAMF,GAAdE,CAAkC7J,aAthBlC,SAAAC,GAAK,MAAK,CACrBspB,QAAS,CACLhd,MAAO,QACP1L,OAAQ,QACR8L,WAAY1M,EAAMupB,QAAQ,GAC1BlC,cAAernB,EAAMupB,QAAQ,GAC7B/oB,YAAaR,EAAMupB,QAAQ,KAC3BC,aAAcxpB,EAAMupB,QAAQ,KAC5Bze,OAAQC,IAAE2b,iBAGd+C,WAAY,CACRvoB,UAAW,2BAGfwoB,UAAW,CACPpd,MAAO,QAGXqd,SAAU,CACNC,qBAAsB,MACtBC,wBAAyB,OAG7BC,YAAa,CACTzf,QAAS,QACThK,OAAQ,oBACR8J,SAAU,QACV5J,UAAW,SACXwpB,cAAe,QAGnBC,UAAW,CACP9oB,UAAW,6BAGf+oB,eAAgB,CACZtV,UAAW,QACX7J,OAAQC,IAAE2b,iBAGdwD,YAAa,CACTpf,OAAO,GAAD,OAAKC,IAAE2b,gBAAP,gBAGVyD,eAAgB,CACZppB,gBAAiBZ,IAAO8J,gBAG5BmgB,6BAA8B,CAC1BlqB,MAAOC,IAAOkqB,YACdlV,SAAU,WACVmG,IAAK,OACLmK,KAAM,mBACNxkB,OAAQ,UACR6J,OAAQC,IAAE2b,gBAAkB,EAC5BqD,cAAe,WA8d0BhqB,EA1avB,SAACqB,GAAW,IAG9BC,EAgBAD,EAhBAC,QACAipB,EAeAlpB,EAfAkpB,oBACAC,EAcAnpB,EAdAmpB,YACAC,EAaAppB,EAbAopB,qBACAC,EAYArpB,EAZAqpB,aACAC,EAWAtpB,EAXAspB,YACAC,EAUAvpB,EAVAupB,YACAC,EASAxpB,EATAwpB,oBACAC,EAQAzpB,EARAypB,QACAC,EAOA1pB,EAPA0pB,cACAC,EAMA3pB,EANA2pB,2BACAC,EAKA5pB,EALA4pB,cACAC,EAIA7pB,EAJA6pB,uBACAC,EAGA9pB,EAHA8pB,UACAC,EAEA/pB,EAFA+pB,mBACA5kB,EACAnF,EADAmF,MAlB6B,EAqBuB1E,mBAAS,MArBhC,mBAqB1BupB,EArB0B,KAqBJC,EArBI,OAiCmCzpB,IAAMC,SAAS,MAjClD,mBAiC1BypB,EAjC0B,KAiCEC,EAjCF,OAkCC3pB,IAAMC,SAASgpB,GAAWA,EAAQ,IAlCnC,mBAkC1BW,EAlC0B,KAkCfC,EAlCe,OAmCC7pB,IAAMC,SAASgpB,GAAWA,EAAQ,IAnCnC,mBAmC1Ba,EAnC0B,KAmCfC,EAnCe,KAqC3BC,EAAoB3gB,QAAQqgB,GAC5BO,EAAkBD,EAAoB,sBAAmBjR,EAEzDmR,EAA2B,WAC7BP,EAA8B,OAa5BQ,EAAoB,CATnBP,EAAYE,EAAiB,8BAC5B,yBAAyBM,KAAKR,QAAlC,EAAqD,gBAIlDA,EAAYE,EAAiB,8BAC5B,yBAAyBM,KAAKN,QAAlC,EAAqD,iBASrDO,EAEAF,EA9D6B,GA6D7BG,EACAH,EA9D6B,KAyEmCnqB,IAAMC,SAAS,MAzElD,mBAyE1BsqB,EAzE0B,KAyEEC,EAzEF,OA0EmBxqB,IAAMC,SAASipB,GAAiBA,EAAcuB,SA1EjE,oBA0E1BC,GA1E0B,MA0ENC,GA1EM,SA2Ee3qB,IAAMC,SAASipB,GAAiBA,EAAc5qB,OA3E7D,qBA2E1BssB,GA3E0B,MA2ERC,GA3EQ,SA4Ea7qB,IAAMC,SAASipB,GAAiBA,EAAcxoB,MA5E3D,qBA4E1BoqB,GA5E0B,MA4ETC,GA5ES,MA8E7BC,GAvFR,SAA4B9Z,GACxB,IAAIuZ,EAAUvZ,EAAQA,EAAMuZ,QAAU,KAChCjd,EAAMyd,mBAIZ,OAHAjiB,qBAAU,WACNwE,EAAItB,QAAUue,KAEXjd,EAAItB,QAiFWgf,CAAmBhC,GACrCiC,GAjGR,SAA0Bja,GACtB,IAAI5S,EAAQ4S,EAAQA,EAAM5S,MAAQ,KAC5BkP,EAAMyd,mBAIZ,OAHAjiB,qBAAU,WACNwE,EAAItB,QAAU5N,KAEXkP,EAAItB,QA2FSkf,CAAiBlC,GACjCmC,GA3GR,SAAyBna,GACrB,IAAIxQ,EAAOwQ,EAAQA,EAAMxQ,KAAO,KAC1B8M,EAAMyd,mBAIZ,OAHAjiB,qBAAU,WACNwE,EAAItB,QAAUxL,KAEX8M,EAAItB,QAqGQof,CAAgBpC,GAEnClgB,qBAAU,WACHkgB,IACIA,EAAcuB,UAAYO,IACzBL,GAAsBzB,EAAcuB,SAGrCvB,EAAc5qB,QAAU6sB,IACvBN,GAAoB3B,EAAc5qB,OAGnC4qB,EAAcxoB,OAAS2qB,IACtBN,GAAmB7B,EAAcxoB,UAK7C,IAAM6qB,GAAoBliB,QAAQkhB,GAC5BiB,GAAkBD,GAAoB,sBAAmBxS,EAEzD0S,GAA2B,WAC7BjB,EAA8B,OAe5BkB,GAA2B,CAZD,WAC5B,GAAGhB,GAAqB,IAAOA,GAAqB,IAAM,yBAAyBN,KAAKM,IACpF,MAAO,6BAWXiB,GAPyB,WACzB,GAAGb,GAAkB,GAAKA,GAAkB,KAAO,yBAAyBV,KAAKU,IAC7E,MAAO,yBAMXc,IAIAC,GAEAH,GA7H6B,GA4H7BI,GACAJ,GA7H6B,GAoI3BK,GAA4B1iB,QAAQ1E,IACrCA,EAAM7G,KAAK+f,SAASnW,qBAAuB+V,IAAmBrZ,WAAaO,EAAM7G,KAAK+f,SAASjX,sBAAwB/C,IAAoBO,YAC5IO,EAAM7G,MAAQ6G,EAAM7G,KAAKkH,gBAAkBL,EAAM7G,KAAKkH,eAAe9G,QAAU8tB,MAEnF,OACI,kBAAC,IAAMjd,SAAP,KACI,yBAAKlO,MAAO,CAAC0S,SAAU,WAAY4U,cAAe,OAAQ1pB,OAAQ,OAAQ8J,SAAU,QAC/EwjB,GACG,kBAAC5e,EAAA,EAAD,CAAStQ,MAAM,2EACX,kBAACovB,GAAA,EAAD,CAASzrB,UAAWf,EAAQ+oB,6BAA8B/nB,QAxE5C,WAC9BjB,EAAM6Z,oCAAoC6S,aAA8B1sB,EAAMmF,MAAM7G,WAyExE,GAGJ,kBAACquB,GAAA,EAAD,CAAa3rB,UAAWf,EAAQyoB,aAE3B7e,QAAQqf,IACL,kBAACvb,EAAA,EAAD,CAASE,UAAU,MAAMxQ,MAAM,iBAC3B,kBAACwlB,EAAA,EAAD,CAAY/jB,MAAM,UAAUkC,UAAS,UAAKf,EAAQooB,WAAb,YAA2Bc,GAAelpB,EAAQ2oB,WACnF3nB,QAASioB,GAET,kBAAC0D,GAAA,EAAD,QAKX/iB,QAAQuf,IACL,kBAACzb,EAAA,EAAD,CAASE,UAAU,MAAMxQ,MAAuB,UAAhBisB,EAA0B,oBAAsB,sBAC5E,kBAACzG,EAAA,EAAD,CAAY/jB,MAAM,UAAUkC,UAAS,UAAKf,EAAQooB,WAAb,YAA2BgB,GAAgBppB,EAAQ2oB,WACpF3nB,QAASmoB,GAET,kBAACyD,GAAA,EAAD,QAKZ,kBAAClf,EAAA,EAAD,CAASE,UAAU,MAAMxQ,MAAM,gBAC3B,kBAACwlB,EAAA,EAAD,CAAY/jB,MAAM,UAAUmC,QAASsoB,EAAavoB,UAAWf,EAAQooB,YACjE,kBAACyE,GAAA,EAAD,QAIPjjB,QAAQ2f,IACL,kBAAC7b,EAAA,EAAD,CAAStQ,MAAM,0BAA0BwQ,UAAU,OAC/C,kBAACgV,EAAA,EAAD,CAAY/jB,MAAM,UAAUmC,QAAS,SAACyN,GAAD,OAAWyb,EAA8Bzb,EAAMqe,gBAAgB/rB,UAAWf,EAAQooB,YACnH,kBAAC2E,GAAA,EAAD,QAKXnjB,QAAQkgB,IACL,kBAACpc,EAAA,EAAD,CAAStQ,MAAOysB,EAAY,iBAAmB,iBAAkBjc,UAAU,OACvE,kBAACgV,EAAA,EAAD,CAAY/jB,MAAM,UAAUmC,QAAS,kBAAM8oB,GAAoBD,IAAY9oB,UAAS,UAAKf,EAAQooB,WAAb,YAA2ByB,GAAa7pB,EAAQ2oB,YAChI,kBAAC7D,EAAA,EAAD,QAKXlb,QAAQggB,IACL,kBAAClc,EAAA,EAAD,CAAStQ,MAAOusB,EAAgB,kBAAoB,kBAAmB/b,UAAU,OAC7E,kBAACgV,EAAA,EAAD,CAAY/jB,MAAM,UAAUmC,QAAS,kBAAM4oB,GAAwBD,IAAgB5oB,UAAS,UAAKf,EAAQooB,WAAb,YAA2BuB,GAAiB3pB,EAAQ2oB,YAC5I,kBAACqE,GAAA,EAAD,QAKXpjB,QAAQ7J,EAAMktB,sBACX,kBAACvf,EAAA,EAAD,CAAStQ,MAAM,iBAAiBwQ,UAAU,OACtC,kBAACgV,EAAA,EAAD,CAAYnK,UAAW7O,QAAQ7J,EAAMktB,qBAAsBpuB,MAAM,UAAUmC,QAjL3E,SAACyN,GACrBub,EAAwBvb,EAAMqe,gBAgL6F/rB,UAAWf,EAAQooB,YACtH,kBAAC8E,GAAA,EAAD,QAKXtjB,QAAQ7J,EAAM2pB,6BACX,kBAAChc,EAAA,EAAD,CAAStQ,MAAM,iBAAiBwQ,UAAU,OACtC,kBAACgV,EAAA,EAAD,CAAY/jB,MAAM,UAAUmC,QAAS,SAACyN,GAAD,OAAWsc,EAA8Btc,EAAMqe,gBAAgB/rB,UAAS,UAAKf,EAAQooB,WAAb,YAA2BpoB,EAAQsoB,WAC5I,kBAAC6E,GAAA,EAAD,UAQpB,kBAACC,GAAA,EAAD,CACI3Y,GAAG,cACH4Y,SAAUtD,EACVuD,aAAW,EACX7sB,KAAMmJ,QAAQmgB,GACdlgB,QAAS,kBAAMmgB,EAAwB,OACvCjpB,UAAWf,EAAQ4oB,eACnBhQ,cAAgB,CACZ7X,UAAWf,EAAQ8oB,iBAGtBd,GAAkBzmB,KAAI,SAACwU,EAAQ1H,GAAT,OACnB,kBAACmH,GAAA,EAAD,CAAUxU,QAAS,kBAzMT,SAAC+U,GACvBiU,EAAwB,MACxBjqB,EAAMktB,oBAAoBlX,GAuMWkX,CAA+B,YAAXlX,EAAuB,UAAYA,IAAStU,IAAK4M,GAAQ0H,OAM9G,kBAACwX,GAAA,EAAD,CACI9Y,GAAI+V,EACJ/pB,KAAM8pB,EACN8C,SAAUpD,EACVpgB,QAAS4gB,EACT+C,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBC,gBAAiB,CACbF,SAAU,MACVC,WAAY,UAEhB5jB,WAAY,CACR/I,UAAWf,EAAQ8oB,gBAGvB9oB,QAAS,CACLgC,KAAMhC,EAAQ6oB,cAGlB,yBAAK9nB,UAAWf,EAAQioB,SACpB,kBAAC1a,EAAA,EAAD,CAAM1M,WAAS,EAACqnB,QAAS,GACrB,kBAAC3a,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CACIlH,QAAQ,WACR+V,MAAOha,QAAQghB,IAEf,kBAAClS,GAAA,EAAD,CAAYC,QAAQ,eAApB,OACA,kBAACiV,GAAA,EAAD,CACInZ,GAAG,cACHhD,MAAO0Y,EACPxoB,SAAU,SAAC8M,GAAD,OAAW2b,EAAa3b,EAAMjE,OAAOiH,QAC/Coc,mBAAiB,mBACjBC,WAAY,GACZjsB,KAAK,eAET,kBAACmT,GAAA,EAAD,CAAgBP,GAAG,oBAAoBmW,KAI/C,kBAACrd,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CACIlH,QAAQ,WACR+V,MAAOha,QAAQihB,IAEf,kBAACnS,GAAA,EAAD,CAAYC,QAAQ,eAApB,OACA,kBAACiV,GAAA,EAAD,CACInZ,GAAG,cACHhD,MAAO4Y,EACP1oB,SAAU,SAAC8M,GAAD,OAAW6b,EAAa7b,EAAMjE,OAAOiH,QAC/Coc,mBAAiB,mBACjBC,WAAY,GACZjsB,KAAK,eAET,kBAACmT,GAAA,EAAD,CAAgBP,GAAG,oBAAoBoW,KAI/C,kBAACtd,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IAGf,kBAAC2M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACqS,EAAA,EAAD,CAAQjS,QAASypB,GAAjB,WAKJ,kBAACld,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACqS,EAAA,EAAD,CACIpU,MAAM,UACNmC,QAlPA,WACxBuoB,EAAoB,CAACY,EAAWE,IAChCI,KAiPwBhS,SAAU7O,QAAQghB,GAAeC,IAHrC,YASJ,kBAACtd,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,OAQ3B,kBAAC2sB,GAAA,EAAD,CACI9Y,GAAIsX,GACJtrB,KAAMqrB,GACNuB,SAAUvC,EACVjhB,QAASmiB,GACTwB,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBC,gBAAiB,CACbF,SAAU,MACVC,WAAY,UAEhB1tB,QAAS,CACLgC,KAAMhC,EAAQ6oB,aAElB/e,WAAY,CACR/I,UAAWf,EAAQ8oB,iBAGvB,yBAAK/nB,UAAWf,EAAQioB,SACpB,kBAAC1a,EAAA,EAAD,CAAM1M,WAAS,EAACqnB,QAAS,GACrB,kBAAC3a,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CACIlH,QAAQ,WACR+V,MAAOha,QAAQwiB,KAEf,kBAAC1T,GAAA,EAAD,CAAYC,QAAQ,wBAApB,WACA,kBAACiV,GAAA,EAAD,CACInZ,GAAG,uBACHhD,MAAOwZ,GACPtpB,SAAU,SAAC8M,GAAD,OAAWyc,GAAsBzc,EAAMjE,OAAOiH,QACxDoc,mBAAiB,uBACjBC,WAAY,GACZjsB,KAAK,yBAEb,kBAACmT,GAAA,EAAD,CAAgBP,GAAG,8BAA8B2X,MAIrD,kBAAC7e,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CACIlH,QAAQ,YAGR,kBAAC6K,GAAA,EAAD,CAAYC,QAAQ,qBAApB,QACA,kBAACiV,GAAA,EAAD,CACIhK,MAAOha,QAAQyiB,IACf5X,GAAG,oBACHhD,MAAO4Z,GACP1pB,SAAU,SAAC8M,GAAD,OAAW6c,GAAmB7c,EAAMjE,OAAOiH,QACrDoc,mBAAiB,oBACjBC,WAAY,GACZjsB,KAAK,sBAET,kBAACmT,GAAA,EAAD,CAAgBP,GAAG,2BAA2B4X,MAItD,kBAAC9e,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACmU,GAAA,EAAD,CACIlH,QAAQ,WACR9M,UAAWf,EAAQqoB,WAEnB,kBAAC3P,GAAA,EAAD,CAAYC,QAAQ,eAApB,SACA,kBAACiV,GAAA,EAAD,CACIzqB,KAAK,QACLsR,GAAG,eACHhD,MAAO0Z,GACPxpB,SAAU,SAAC8M,GAAD,OAAW2c,GAAoB3c,EAAMjE,OAAOiH,QACtDoc,mBAAiB,qBACjBC,WAAY,GACZjsB,KAAK,yBAKjB,kBAAC0L,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IAEf,kBAAC2M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACqS,EAAA,EAAD,CAAQjS,QAASgrB,IAAjB,WAKJ,kBAACze,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACqS,EAAA,EAAD,CACIpU,MAAM,UACNmC,QA1RY,WACpC0oB,EAA2B,CAACsB,QAASC,GAAoBpsB,MAAOssB,GAAkBlqB,KAAMoqB,KACxFW,MAyRwBvT,SAAU7O,QAAQwiB,IAA6BC,KAHnD,YASJ,kBAAC9e,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,YC9fjCyH,GAAqB,CACvB0lB,2BA8FWxlB,eAAQ,KAAMF,GAAdE,CAAkC7J,aA/GlC,SAAAC,GAAK,MAAK,CACrBqvB,aAAc,CACVhlB,QAAS,eACTtJ,gBAAiBZ,IAAO8J,eACxB/I,UAAW,wGACXb,OAAQ,OACRH,MAAO,SAEXovB,YAAa,CACTjlB,QAAQ,SAEZklB,kBAAmB,CACfllB,QAAS,mBAmGgCtK,EA1F/B,SAAAqB,GAAU,IAChBguB,EAA0BhuB,EAA1BguB,sBACA1vB,EAAS0B,EAAMmF,MAAf7G,KACA+f,EAAyB/f,EAAzB+f,SAAUT,EAAetf,EAAfsf,WAMZpb,EAAOob,EAAWtX,MAAQsX,EAAWrX,IAAM6nB,GAAsBxQ,EAAWtX,KAC9E8nB,GAAsBxQ,EAAWtX,KAAO,OAAS8nB,GAAsBxQ,EAAWrX,KAEhF3D,EAAMgb,EAAWnX,OAASmX,EAAWlX,KAAOkX,EAAWnX,KAAO,OAChEmX,EAAWnX,KAAO,WAAamX,EAAWlX,KAAO,OAE/C1D,EAAM4a,EAAWjX,OAASiX,EAAWhX,KAAOgX,EAAWjX,KAAO,OAChEiX,EAAWjX,KAAO,WAAaiX,EAAWhX,KAAO,OAE/CzE,EAAS7D,EAAK0R,SAChB4N,EAAWzf,SAAWyf,EAAWxf,OAAjC,UAA6Cwf,EAAWzf,OAAxD,iBACGyf,EAAWzf,OADd,kBAC8Byf,EAAWxf,OADzC,OAD2B,UAI/B,OACI,kBAAC,IAAMmR,SAAP,KACI,kBAAC,GAAD,CACIga,YApBQ,WAChByE,EAAsB1vB,EAAM+f,EAAS9f,WAAY8f,EAASD,SAAUC,EAASvP,YAoBrE3J,MAAOnF,EAAMmF,QAErB,kBAAC,KAAD,CACI9D,MAAQ,CACJ0S,SAAU,WAEV7I,MAAO,OACP1L,OAAQ,QAaZ6uB,kBAAkB,EAElB/vB,KAAM,CACF,CACIspB,EAAGtpB,EAAKkH,eACR1D,KAAK,GAAD,OAAKuc,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC5F1L,KAAM,YACNkrB,OAAQ,CACJxvB,MAAO,aAKnBioB,OAAM,2BACCwH,GAAUxH,QADX,IAEFyH,aAAc,cACdnxB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,MAGFL,EAHE,mBAIUS,EAJV,qBAKMI,GACZgkB,KAAM,CACF9lB,KAAM,KAGdutB,MAAO,CACHpxB,MAAM,GAAD,OAAKghB,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAQ+W,EAASvP,UAAzF,aAAuGuP,EAAS5E,KAAhH,KACLiV,eAAgB,QAChB5vB,MAAO,WAEX6vB,MAAM,CACF7vB,MAAO,UACPzB,MAAO,aAEXkqB,YAAagH,GAAUhH,YAAYlJ,EAAS3H,YAAa2H,EAASzI,eAEtEyR,OAAM,eAAMkH,GAAUlH,eC5HnB,YAACuH,GAEZ,IAEIC,EAFAC,EAAWF,EAAWG,OAASH,EAAWI,OAI1CH,EADDC,EAAW,GACKA,EAAW,GAAGzmB,QAAQ,GAEvBb,KAAKC,MAAMqnB,EAAW,GAGxC,IAAIG,EAAWnN,MAAMoN,KAAKpN,MAAM,IAAI,SAACrgB,EAAGhD,GAAJ,OAAU+I,KAAKG,KAAKinB,EAAWI,QAAWvwB,EAAI,GAAKowB,MACnFM,EAAWF,EAASztB,KAAI,SAAAC,GAAC,OAAIA,EAAI,IAAMA,EAAI,IAAMA,KAErD,MAAO,CACH2tB,SAAU,QACVH,WACAE,aCjBO,YAACP,GACZ,IAEMS,GAFST,EAAWG,OAASH,EAAWI,SAC/BJ,EAAWU,OAASV,EAAWW,QAG1C/vB,EAAS,GACT0L,EAAQ,GAgBZ,OAdGqU,MAAM8P,GACL7vB,GAAkB,KACX6vB,EAAY,EAChBA,GAAa,IACZnkB,GAAgBmkB,GAGhBnkB,GAAgB,IAChB1L,EAAS6vB,EAAY,EAAI7vB,EAAS,KAAOA,GAAU,IAAM6vB,IAG7DnkB,EAAQmkB,EAAY,GAAa,GAARnkB,EAAaA,EAAQmkB,EAG3C,CAAC7vB,EAAQ0L,I,UCqQd5C,GAAqB,CACvBknB,sBACA7U,iBACAqT,2BA4GWxlB,gBA/WS,SAACC,EAAOC,GAAR,MAAsB,CAC1CzD,OAAQwD,EAAMxD,UA8WsBqD,GAAzBE,CAA6C7J,aA/H7C,SAAAC,GAAK,MAAK,CACrBqvB,aAAc,CACVhlB,QAAS,eACTtJ,gBAAiBZ,IAAO8J,eACxB/I,UAAW,wGACXb,OAAQ,OACRH,MAAO,SAEXovB,YAAa,CACTjlB,QAAQ,SAEZklB,kBAAmB,CACfllB,QAAS,mBAmH2CtK,EAzGrC,SAACqB,GAAW,IAa3ByvB,EAXI9U,EAA+C3a,EAA/C2a,aAAcqT,EAAiChuB,EAAjCguB,sBAAuB7oB,EAAUnF,EAAVmF,MACrC7G,EAAkB6G,EAAlB7G,KAAM8G,EAAYD,EAAZC,QACNsqB,EAAoCpxB,EAApCoxB,MAAOC,EAA6BrxB,EAA7BqxB,OAAQvS,EAAqB9e,EAArB8e,OAAQiB,EAAa/f,EAAb+f,SAJD,EAMQ5d,oBAAS,GANjB,mBAMvB0oB,EANuB,KAMVyG,EANU,OAOUnvB,oBAAS,GAPnB,mBAOvBovB,EAPuB,KAOTC,EAPS,OAQArvB,mBAAS,WART,mBAQvByI,EARuB,KAQd6mB,EARc,OASAtvB,mBAAS,CAACnC,EAAK0xB,KAAM1xB,EAAK2xB,OAT1B,mBASvBxG,EATuB,KASdyG,EATc,mBAUTzG,EAVS,GAUvBuG,EAVuB,KAUjBC,EAViB,KAYxBE,EAAU7xB,EAAK8xB,iBAAiBhrB,EAAS+jB,EAAa0G,GAE5D,OAAOzqB,GACH,KAAKS,IAAYO,WACbqpB,EAlRa,SAACY,EAASzB,EAAYzF,EAAa0G,EAAc3mB,EAAS8mB,EAAMC,GAAU,IACvFrS,EAAyBgR,EAAzBhR,WAAYS,EAAauQ,EAAbvQ,SAEdsR,EAAS7N,MAAMoN,KAAKN,EAAWe,QAAQnuB,KAAI,SAAAW,GAAK,OAAI4E,WAAW5E,MAC/DutB,EAAQ5N,MAAMoN,KAAKN,EAAWc,OAGhCY,EAAS1B,EAAWhR,WAAWjX,KAAOioB,EAAWhR,WAAWhX,KAAO2pB,GAAa3B,GAAc,GAPJ,EASpE4B,GAAmB5B,GATiD,mBAStFpvB,EATsF,KAS9E0L,EAT8E,KAW9F,OAAOmlB,EAAQ7uB,KAAI,SAACivB,EAAQniB,GAExB,IAAM9L,EAAOktB,EAAMhxB,QAAU,EAAI0vB,GAAsBsB,EAAM,GAAId,EAAWhI,QAASgI,EAAW/H,WAC3FsC,EACciF,GAAfyB,EAAqCH,EAAMloB,KAAKC,MAAM6G,EAAMqhB,EAAOjxB,SAC7CgxB,EAAMphB,GADiDsgB,EAAWhI,QAASgI,EAAW/H,WAD5G,0BAAkCuH,GAAsBsB,EAAM,GAAId,EAAWhI,QAASgI,EAAW/H,WAAjG,eAAkHuH,GAAsBsB,EAAMA,EAAMhxB,OAAS,GAAIkwB,EAAWhI,QAASgI,EAAW/H,YAI9L1kB,EAASysB,EAAW5e,SACJ,IAAlB2f,EAAOjxB,OAAeixB,EAAO,GAAK,MACjCE,EACD1G,EAAcwG,EAAOrhB,EAAQqhB,EAAOjxB,QAAQ2J,QAAQ,GAAK,MAAQsnB,EAAOrhB,GAAOjG,QAAQ,GAAK,MAD5F,0BAAmCuV,EAAWzf,OAA9C,eAA2Dyf,EAAWxf,QAFrC,UAK/BsyB,EAAW9S,EAAWnX,OAASmX,EAAWlX,KAA/B,UAAyCkX,EAAWnX,KAApD,kBACVmX,EAAWnX,KADD,mBACgBmX,EAAWlX,KAD3B,QAGXiqB,EAAW/S,EAAWjX,OAASiX,EAAWhX,KAA/B,UAAyCgX,EAAWjX,KAApD,kBACViX,EAAWjX,KADD,mBACgBiX,EAAWhX,KAD3B,QAGbgqB,EAAYH,EAAOjvB,KAAI,SAACkQ,EAAOjT,GAC/B,IAAIoyB,EAAMrpB,KAAKqpB,IAAInf,GACfof,EAAYD,EAAM,KAAOA,EAAM,IAAO,MAAQ,MAClD,OAAa,OAAVnf,EAAuB,eAAQqf,aAAO,MAAPA,CAAcnC,EAAWoC,KAAKvyB,IAAtC,8BAEdmwB,EAAWqC,KAAKxyB,GAAK,IAAMsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,GAAK,KAAOsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,IAFrF,QAInB,eAAQsyB,aAAO,MAAPA,CAAcnC,EAAWoC,KAAKvyB,IAAtC,8BAECmwB,EAAWqC,KAAKxyB,GAAK,IAAMsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,GAAK,KAAOsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,IAFpG,QAGP,OAHO,UAIJmwB,EAAWhR,WAAWpX,OAJlB,aAI6BuqB,aAAOD,EAAPC,CAAkBrf,GAJ/C,aAI0Dkd,EAAWvQ,SAAS5E,KAJ9E,QAOX,OACA,kBAAC,KAAD,CACIpY,MAAQ,CACJ0S,SAAU,WAEV7I,MAAM,GAAD,OAAKA,EAAL,MACL1L,OAAO,GAAD,OAAKA,EAAL,MACNsJ,SAAS,GAAD,OAAa,GAARoC,EAAL,MACRiM,UAAU,GAAD,OAAc,GAAT3X,EAAL,MACTP,OAAQ,UAGZovB,kBAAkB,EAElB/vB,KAAM,CACF,CACI4yB,OAAO,EACPC,KAAMnB,EACNoB,KAAMnB,EACNrI,EAAGgH,EAAWqC,KACdpJ,EAAG+G,EAAWoC,KACdrnB,EAAG8mB,EACHY,aAAa,EACbC,gBAAgB,EAChBC,WAAYroB,EAEZsoB,UAAW,OACXZ,YAEA9uB,KAAK,GAAD,OAAKuc,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC5F1L,KAAM,UACNquB,SAAU,CACNC,SAAUxoB,EACVyoB,YAAY,EACZC,UAAW,CACPC,OAAQ,UACR3wB,KAAM,GACNpC,MAAO,SAEXgzB,YAAalD,EAAWoB,KAAO,GAAKpB,EAAWoB,KAAO,IAAO,MAAQ,OAEzE+B,SAAU,CACN10B,MAAO,CACHmqB,KAAK,IAAD,OAAMoH,EAAWvQ,SAAS5E,KAA1B,MAERiV,eAAgB,WAK5BrH,OAAM,eAAMkH,GAAUlH,QAEtB3lB,IAAK4M,EACLyY,OAAM,2BACCwH,GAAUxH,QADX,IAGF1pB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,gBAGCL,EAHD,wBAIMuuB,EAJN,qBAKMC,GACZ3J,KAAM,CACF9lB,KAAM,KAGdutB,MAAM,aAAEpxB,MAAO,YAAayB,MAAO,WAAcwxB,GACjD3B,MAAO,CAACtxB,MAAO,WAAYyB,MAAO,WAClCyoB,YAAagH,GAAUhH,YAAYqH,EAAWvQ,SAAS3H,YAAa2H,EAASzI,oBAkKzEoc,CAAiB7B,EAAS7xB,EAAM6qB,EAAa0G,EAAc3mB,EAAS8mB,EAAMC,GAClF,MAEJ,KAAKpqB,IAAYP,QACbmqB,EAhKU,SAACY,EAASzB,EAAYzF,EAAa0G,EAAc3mB,EAAS8mB,EAAMC,GAAU,IACpFrS,EAAyBgR,EAAzBhR,WAAYS,EAAauQ,EAAbvQ,SAEdsR,EAAS7N,MAAMoN,KAAKN,EAAWe,QAAQnuB,KAAI,SAAAW,GAAK,OAAI4E,WAAW5E,MAC/DutB,EAAQ5N,MAAMoN,KAAKN,EAAWc,OAEhCY,EAAS1B,EAAWhR,WAAWjX,KAAOioB,EAAWhR,WAAWhX,KAAO2pB,GAAa3B,GAAc,GANP,EAQjE4B,GAAmB5B,GAR8C,mBAQnFpvB,EARmF,KAQ3E0L,EAR2E,KAU3F,OAAOmlB,EAAQ7uB,KAAI,SAACivB,EAAQniB,GAExB,IAAM9L,EAAOktB,EAAMhxB,QAAU,EAAI0vB,GAAsBsB,EAAM,GAAId,EAAWhI,QAASgI,EAAW/H,WAC3FsC,EACciF,GAAfyB,EAAqCH,EAAMloB,KAAKC,MAAM6G,EAAMqhB,EAAOjxB,SAC7CgxB,EAAMphB,GADiDsgB,EAAWhI,QAASgI,EAAW/H,WAD5G,0BAAkCuH,GAAsBsB,EAAM,GAAId,EAAWhI,QAASgI,EAAW/H,WAAjG,eAAkHuH,GAAsBsB,EAAMA,EAAMhxB,OAAS,GAAIkwB,EAAWhI,QAASgI,EAAW/H,YAI9L1kB,EAASysB,EAAW5e,SACJ,IAAlB2f,EAAOjxB,OAAeixB,EAAO,GAAK,MACjCE,EACD1G,EAAcwG,EAAOrhB,EAAQqhB,EAAOjxB,QAAQ2J,QAAQ,GAAK,MAAQsnB,EAAOrhB,GAAOjG,QAAQ,GAAK,MAD5F,0BAAmCuV,EAAWzf,OAA9C,eAA2Dyf,EAAWxf,QAFrC,UAK/BsyB,EAAW9S,EAAWnX,OAASmX,EAAWlX,KAA/B,UAAyCkX,EAAWnX,KAApD,kBACVmX,EAAWnX,KADD,mBACgBmX,EAAWlX,KAD3B,QAGXiqB,EAAW/S,EAAWjX,OAASiX,EAAWhX,KAA/B,UAAyCgX,EAAWjX,KAApD,kBACViX,EAAWjX,KADD,mBACgBiX,EAAWhX,KAD3B,QAGbgqB,EAAYH,EAAOjvB,KAAI,SAACkQ,EAAOjT,GAC/B,IAAIoyB,EAAMrpB,KAAKqpB,IAAInf,GACfof,EAAYD,EAAM,KAAOA,EAAM,IAAO,MAAQ,MAClD,OAAa,OAAVnf,GAAkB6N,MAAM7N,GAAe,eAAQqf,aAAO,MAAPA,CAAcnC,EAAWoC,KAAKvyB,IAAtC,8BAE9BmwB,EAAWqC,KAAKxyB,GAAK,IAAMsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,GAAK,KAAOsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,IAFrE,QAInC,eAAQsyB,aAAO,MAAPA,CAAcnC,EAAWoC,KAAKvyB,IAAtC,8BAECmwB,EAAWqC,KAAKxyB,GAAK,IAAMsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,GAAK,KAAOsyB,aAAO,MAAPA,CAAcnC,EAAWqC,KAAKxyB,IAFpG,QAGP,OAHO,UAIJmwB,EAAWhR,WAAWpX,OAJlB,aAI6BuqB,aAAOD,EAAPC,CAAkBrf,GAJ/C,aAI0Dkd,EAAWvQ,SAAS5E,KAJ9E,QAOX,OACA,kBAAC,KAAD,CACIpY,MAAQ,CACJ0S,SAAU,WAEV7I,MAAM,GAAD,OAAKA,EAAL,MACL1L,OAAO,GAAD,OAAKA,EAAL,MACNsJ,SAAS,GAAD,OAAa,GAARoC,EAAL,MACRiM,UAAU,GAAD,OAAc,GAAT3X,EAAL,OAGb6uB,kBAAkB,EAElB/vB,KAAM,CACF,CACI4yB,OAAO,EACPC,KAAMnB,EACNoB,KAAMnB,EACNgC,QAASxB,EAAO/xB,OAAS,IAAQ,OAAS,QAC1CkpB,EAAGgH,EAAWqC,KACdpJ,EAAG+G,EAAWoC,KACdrnB,EAAG8mB,EACHY,aAAa,EACbvvB,KAAK,GAAD,OAAKuc,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC5F1L,KAAM,UACNmuB,WAAYroB,EACZooB,gBAAgB,EAEhBE,UAAW,OACXhK,KAAMoJ,EAENmB,SAAU,CACN10B,MAAO,CACHmqB,KAAK,IAAD,OAAMoH,EAAWvQ,SAAS5E,KAA1B,MAERiV,eAAe,WAM3BhtB,IAAK4M,EAEL+Y,OAAM,eAAMkH,GAAUlH,QAEtBN,OAAM,2BACCwH,GAAUxH,QADX,IAGF1pB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,gBAGCL,EAHD,wBAIMuuB,EAJN,qBAKMC,GACZ3J,KAAM,CACF9lB,KAAM,KAGdutB,MAAM,aACFpxB,MAAO,kBACPyB,MAAO,UACP4vB,eAAgB,SACb4B,GAEP3B,MAAO,CACHtxB,MAAO,iBACPyB,MAAO,UACP4vB,eAAgB,SAEpBnH,YAAagH,GAAUhH,YAAYqH,EAAWvQ,SAAS3H,YAAa2H,EAASzI,oBAgDzEsc,CAAc/B,EAAS7xB,EAAM6qB,EAAa0G,EAAc3mB,EAAS8mB,EAAMC,GAC/E,MAEJ,KAAKpqB,IAAYK,UACb,OAAO,kBAAC,GAAD,CAAWf,MAAO,CAAC7G,UAE9B,QACImxB,EAAQ,GA2DhB,OACI,kBAAC,IAAMlgB,SAAP,KACI,kBAAC,GAAD,CACI2d,oBAAqB9nB,IAAY+sB,IAASjsB,WAvB1B,SAAC8P,GACzBhW,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DO,EAAW/Z,KACZ,MAmBKsc,qBAAoC,IAAd3C,EAAOzuB,KAAW,KAhCvB,WACzBlB,EAAMwvB,kBAAkB,mBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DM,GAAiBD,KAClB,MA4BK3G,oBAAkC,IAAbwG,EAAMxuB,KAAW,KA3DtB,WACxB,IAAIqxB,EAAa5C,EAASA,EAAOzuB,KAAO,EAExC,GAAGkE,IAAYS,IAAYP,QAAQ,CAC/B,IAAIktB,EAAuB,GAAKnR,EAAmBrhB,EAAMiF,QAEzD,IAAIkkB,GAAeoJ,EAAa7C,EAAMxuB,KAAOsxB,EAEzC,YADA7X,EAAa,8CAKlBvV,IAAYS,IAAYO,aACnB+iB,GAAeoJ,EAAa7C,EAAMxuB,KAAO,GAC7CyZ,EAAa,+CAKjB3a,EAAMwvB,kBAAkB,mBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DI,GAAgBzG,KACjB,OAqCK0G,aAAcA,EACd1G,YAAaA,EACbK,oBAAqBpkB,IAAY+sB,IAASjsB,WApB1B,SAACusB,GACzBzyB,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DU,EAAWuC,KACZ,MAgBKhJ,QAASrkB,IAAY+sB,IAASjsB,WAAaujB,EAC3CrM,OAAQhY,IAAY+sB,IAASjsB,WAAakX,EAC1CmM,YAfQ,WAChByE,EAAsB1vB,EAAM+f,EAAS9f,WAAY8f,EAASD,SAAUC,EAASvP,YAerE3J,MAAOA,IAEVsqB,OCnWPnnB,GAAqB,CACvBknB,sBACAxB,2BA4IWxlB,eAAQ,KAAMF,GAAdE,CAAkC7J,aA3JlC,SAAAC,GAAK,MAAK,CACrBqvB,aAAc,CACVhlB,QAAS,eACTtJ,gBAAiBZ,IAAO8J,eACxB/I,UAAW,wGACXb,OAAQ,OACRH,MAAO,SAEXovB,YAAa,CACTjlB,QAAQ,YAkJiCtK,EAzIzB,SAACqB,GAAW,IACxBguB,EAA0BhuB,EAA1BguB,sBACA1vB,EAAS0B,EAAMmF,MAAf7G,KACAo0B,EAAsDp0B,EAAtDo0B,KAAMltB,EAAgDlH,EAAhDkH,eAAgBkqB,EAAgCpxB,EAAhCoxB,MAAO9R,EAAyBtf,EAAzBsf,WAAYS,EAAa/f,EAAb+f,SAHlB,EAKa7d,IAAMC,SAAS,CAACwqB,QAAS,GAAInsB,MAAM,UAAWoC,KAAM,IALjE,mBAKvBwoB,EALuB,KAKRiJ,EALQ,OAMKnyB,IAAMC,UAAS,GANpB,mBAMvBqpB,EANuB,KAMZ8I,EANY,OAOapyB,IAAMC,YAAS+E,GAAkBA,EAAe9G,QAAU,KAPvE,mBAOvBkrB,EAPuB,KAORiJ,EAPQ,KAqC3BjC,EAAYprB,EAAehE,KAAI,SAACkQ,EAAOjT,GACvC,MAAM,SAAN,OAAgBixB,EAAMjxB,GAAG6I,MAAM,EAAE,IAAjC,eAA2CsW,EAAWpX,OAAtD,aAAiEuqB,aAAO,MAAPA,CAAcrf,GAA/E,iBAA8Fqf,aAAO,MAAPA,CAAc2B,EAAKj0B,IAAjH,aAAyH4f,EAAS5E,KAAlI,QAGEjX,EAAOob,EAAWtX,MAAQsX,EAAWrX,IAAM6nB,GAAsBsB,EAAM,GAAIpxB,EAAKsoB,QAAStoB,EAAKuoB,WAChGuH,GAAsBsB,EAAM,GAAIpxB,EAAKsoB,QAAStoB,EAAKuoB,WAAa,OAASuH,GAAsBsB,EAAMA,EAAMhxB,OAAS,GAAIJ,EAAKsoB,QAAStoB,EAAKuoB,WAEzIjkB,EAAMgb,EAAWnX,OAASmX,EAAWlX,KAAOkX,EAAWnX,KAAO,OAChEmX,EAAWnX,KAAO,WAAamX,EAAWlX,KAAO,OAE/C1D,EAAM4a,EAAWjX,OAASiX,EAAWhX,KAAOgX,EAAWjX,KAAO,OAChEiX,EAAWjX,KAAO,WAAaiX,EAAWhX,KAAO,OAE/CzE,EAA8B,IAAtByb,EAAWxf,OAAe,UACpCwf,EAAWzf,SAAWyf,EAAWxf,OAAjC,UAA6Cwf,EAAWzf,OAAxD,iBACGyf,EAAWzf,OADd,kBAC8Byf,EAAWxf,OADzC,OAGEwpB,EAAItpB,EAAKuoB,UAAY6I,EAAMluB,KAAI,SAAAgB,GAAI,OAAIskB,GAAOtF,SAAShf,OAAUktB,EAEvE,OACI,6BACI,kBAAC,GAAD,CACInG,YAlDQ,WAChByE,EAAsB1vB,EAAM+f,EAAS9f,WAAY8f,EAASD,SAAUC,EAASvP,YAkDrE6a,2BA/CuB,SAAC8I,GAChCzyB,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DmD,EAAiBF,KAClB,KA2CK/I,cAAeA,EACfE,cAAeA,EACfC,uBAlCmB,SAACnY,GAC5B1R,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DqD,EAAiBnhB,KAClB,KA8BKoY,UAAWA,EACXC,mBA5Ce,SAACrY,GACxB1R,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DoD,EAAalhB,KACd,KAwCKvM,MAAOnF,EAAMmF,QAEjB,kBAAC,KAAD,CACI9D,MAAQ,CACJ0S,SAAU,WACV7I,MAAO,OACP1L,OAAQ,QAGZ6uB,kBAAkB,EAElB/vB,KAAM,CACJ,CAEE8gB,KAAM0K,EAAY,gBAAkB,UACpClC,EAAGA,EACHC,EAAGriB,EACHstB,QAAS,CACL1vB,KAAM,OACN2vB,MAAOL,EACPzH,QAAS,GACTnsB,MAAO8qB,EAAgB,UAAY,cACnC5K,SAAS,GAGbld,KAAK,GAAD,OAAKuc,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAE5F1L,KAAMoC,EAAe9G,OAAS,IAAQ,YAAc,UACpDs0B,KAAM,CAACl0B,MAAO4qB,EAAc5qB,OAC5BwvB,OAAQ,CACJrD,QAASvB,EAAcuB,QACvB/pB,KAAMwoB,EAAcxoB,KACpBpC,MAAO4qB,EAAc5qB,OAEzB0yB,UAAW,OACXZ,cAGJvJ,OAAM,eAAMkH,GAAUlH,QACtBN,OAAM,2BACCwH,GAAUxH,QADX,IAEFyH,aAAc,cACdnxB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,MAGFL,EAHE,mBAIUS,EAJV,qBAKMI,GACZgkB,KAAM,CACF9lB,KAAM,KAGhButB,MAAO,CACHpxB,MAAOiB,EAAK20B,SAAU,QAAU,OAChCn0B,MAAO,UACP4vB,eAAgB,SAEpBC,MAAO,CACHtxB,MAAM,GAAD,OAAKghB,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAQ+W,EAASvP,UAAzF,aAAuGuP,EAAS5E,KAAhH,KACL3a,MAAO,UACP4vB,eAAgB,SAEpBnH,YAAagH,GAAUhH,YAAYlJ,EAAS3H,YAAa2H,EAASzI,sBCtI9EtN,GAAqB,CACvBknB,sBACAxB,2BAyIWxlB,eAAQ,KAAMF,GAAdE,CAAkC7J,aAxJlC,SAAAC,GAAK,MAAK,CACrBqvB,aAAc,CACVhlB,QAAS,eACTtJ,gBAAiBZ,IAAO8J,eACxB/I,UAAW,wGACXb,OAAQ,OACRH,MAAO,SAEXovB,YAAa,CACTjlB,QAAQ,YA+IiCtK,EAtIvB,SAACqB,GAE8BA,EAA7CwvB,kBAF0B,IAEPxB,EAA0BhuB,EAA1BguB,sBACnB1vB,EAAS0B,EAAMmF,MAAf7G,KACAo0B,EAAuDp0B,EAAvDo0B,KAAMltB,EAAiDlH,EAAjDkH,eAAgBmqB,EAAiCrxB,EAAjCqxB,OAAQ/R,EAAyBtf,EAAzBsf,WAAYS,EAAa/f,EAAb+f,SAJjB,EAMG7d,IAAMC,UAAS,GANlB,mBAMzBqpB,EANyB,KAMd8I,EANc,OAOWpyB,IAAMC,YAAS+E,GAAkBA,EAAe9G,QAAU,KAPrE,mBAOzBkrB,EAPyB,KAOViJ,EAPU,KAS7BjE,EAAatwB,EATgB,EAWSkC,IAAMC,SAAS,CAACwqB,QAAS,GAAInsB,MAAM,UAAWoC,KAAM,IAX7D,mBAW1BwoB,EAX0B,KAWXiJ,EAXW,KAa7B/B,EAAYprB,EAAehE,KAAI,SAACkQ,EAAOjT,GACvC,MAAM,UAAN,OAAiBsyB,aAAO,MAAPA,CAAcpB,EAAOlxB,IAAtC,oBAAqDmf,EAAWpX,OAAhE,aAA2EuqB,aAAO,MAAPA,CAAcrf,GAAzF,iBAAwGqf,aAAO,MAAPA,CAAc2B,EAAKj0B,IAA3H,aAAmI4f,EAAS5E,KAA5I,QA+BEiG,EAAQkP,EAAW/H,UAAY,IAAI1W,KAAKyN,EAAWtX,KAAK4sB,WAAa,EAAItV,EAAWtX,IACpFsZ,EAAQgP,EAAW/H,UAAY,IAAI1W,KAAKyN,EAAWrX,KAAK2sB,WAAa,EAAItV,EAAWrX,IAEpF/D,EAAOkd,IAAUE,EAAQwO,GAAsB1O,EAAOkP,EAAWhI,QAASgI,EAAW/H,WACnFuH,GAAsB1O,EAAOkP,EAAWhI,QAASgI,EAAW/H,WAAa,OAASuH,GAAsBxO,EAAOgP,EAAWhI,QAASgI,EAAW/H,WAC9I,OACJ,6BACI,kBAAC,GAAD,CACI0C,YApCQ,WAChByE,EAAsB1vB,EAAM+f,EAAS9f,WAAY8f,EAASD,SAAUC,EAASvP,YAoCrE6a,2BAjCuB,SAAC8I,GAChCzyB,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DmD,EAAiBF,KAClB,MA6BK/I,cAAeA,EACfE,cAAeA,EACfC,uBApBmB,SAACnY,GAC5B1R,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DqD,EAAiBnhB,KAClB,KAgBKoY,UAAWA,EACXC,mBA9Be,SAACrY,GACxB1R,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DoD,EAAalhB,KACd,KA0BKvM,MAAOnF,EAAMmF,QAEjB,kBAAC,KAAD,CACI9D,MAAQ,CACJ0S,SAAU,WACV7I,MAAO,OACP1L,OAAQ,QAGZ6uB,kBAAkB,EAElB/vB,KAAM,CACF,CAEI8gB,KAAM0K,EAAY,gBAAkB,UACpCjC,EAAG8H,EACH/H,EAAGpiB,EACH2tB,QAAS,CACL/vB,KAAM,OACN2vB,MAAOL,EACPzH,QAAS,GACTnsB,MAAO8qB,EAAgB,UAAY,cACnC5K,SAAS,GAEbld,KAAK,GAAD,OAAKuc,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAE5F1L,KAAMoC,EAAe9G,OAAS,IAAQ,YAAc,UAEpD4vB,OAAQ,CACJ0E,KAAM,CAACl0B,MAAO4qB,EAAc5qB,OAC5BmsB,QAASvB,EAAcuB,QACvB/pB,KAAMwoB,EAAcxoB,KACpBpC,MAAO4qB,EAAc5qB,OAGzB0yB,UAAW,OACXZ,cAGRvJ,OAAM,eAAMkH,GAAUlH,QACtBN,OAAM,2BACCwH,GAAUxH,QADX,IAEFyH,aAAc,cACdnxB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,gBAGCob,EAAWzf,OAHZ,kBAG4Byf,EAAWxf,OAHvC,2BAIMwf,EAAWnX,KAJjB,mBAIgCmX,EAAWlX,KAJ3C,yBAKMkX,EAAWjX,KALjB,mBAKgCiX,EAAWhX,KAL3C,QAMNogB,KAAM,CACF9lB,KAAM,KAIhBytB,MAAO,CACHtxB,MAAO,WACPyB,MAAO,UACP4vB,eAAgB,QAChB0E,UAAU,YAEd3E,MAAO,CACHpxB,MAAM,GAAD,OAAKghB,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAQ+W,EAASvP,UAAzF,aAAuGuP,EAAS5E,KAAhH,KACL3a,MAAO,UACP4vB,eAAgB,SAEpBnH,YAAagH,GAAUhH,YAAYlJ,EAAS3H,YAAa2H,EAASzI,sBCoC9EtN,GAAqB,CACvBknB,sBACA7U,iBACAqT,2BAsGWxlB,eAAQ,KAAMF,GAAdE,CAAkC7J,aAtHlC,SAAAC,GAAK,MAAK,CACrBqvB,aAAc,CACVhlB,QAAS,eACTtJ,gBAAiBZ,IAAO8J,eACxB/I,UAAW,wGACXb,OAAQ,OACRH,MAAO,SAEXovB,YAAa,CACTjlB,QAAQ,YA6GiCtK,EAnGzB,SAACqB,GAAW,IAExBC,EAAiDD,EAAjDC,QAAS0a,EAAwC3a,EAAxC2a,aAAcqT,EAA0BhuB,EAA1BguB,sBACvB1vB,EAAS0B,EAAMmF,MAAf7G,KACAoxB,EAAwCpxB,EAAxCoxB,MAAOtS,EAAiC9e,EAAjC8e,OAAQ4T,EAAyB1yB,EAAzB0yB,KAAMC,EAAmB3yB,EAAnB2yB,KAAM5S,EAAa/f,EAAb+f,SAJJ,EAMO5d,oBAAS,GANhB,mBAMxB0oB,EANwB,KAMXyG,EANW,OAOSnvB,oBAAS,GAPlB,mBAOxB4oB,EAPwB,KAOVgK,EAPU,OAQO5yB,mBAASnC,EAAKgrB,aARrB,mBAQxBA,EARwB,KAQXgK,EARW,OASD7yB,mBAAS,WATR,mBASxByI,EATwB,KASf6mB,EATe,OAUDtvB,mBAAS,CAACnC,EAAK0xB,KAAM1xB,EAAK2xB,OAVzB,mBAUxBxG,EAVwB,KAUfyG,EAVe,mBAWVzG,EAXU,GAWxBuG,EAXwB,KAWlBC,EAXkB,KAa3BsD,EAAyB,UAAhBjK,EAA0B0H,EAAOC,EAG1CxB,EAxMiB,SAACY,EAASzB,EAAYzF,EAAaE,EAAcC,EAAapgB,EAAS8mB,EAAMC,GAAU,IACpGrS,EAAyBgR,EAAzBhR,WAAYS,EAAauQ,EAAbvQ,SAEdqR,EAAQ5N,MAAMoN,KAAKN,EAAWc,OAC9BC,EAAS7N,MAAMoN,KAAKN,EAAWe,QAC/BqB,EAAOlP,MAAMoN,KAAKN,EAAWoC,MAC7BC,EAAOnP,MAAMoN,KAAKN,EAAWqC,MAE7BuC,EACc,UAAhBlK,EACA0H,EACAC,EAEEwC,EAAwB,UAAhBnK,EACV,YACA,WAEAgH,EAAS1S,EAAWjX,KAAOiX,EAAWhX,MAAwB,UAAhB0iB,EAA0BiH,GAAa3B,GAAc,GAGvG,OAAOyB,EAAQ7uB,KAAI,SAACivB,EAAQniB,GACxB,IAAI3E,EAAI8mB,EACJ7I,EAAI,GACJC,EAAI,GAER,GAAmB,UAAhByB,EACC,IAAI,IAAI7qB,EAAI,EAAGA,EAAIgyB,EAAO/xB,OAAQD,IAC9BmpB,EAAElB,KAAKuK,EAAKzpB,KAAKC,MAAMhJ,EAAIkxB,EAAOjxB,eAGtC,IAAI,IAAID,EAAI,EAAGA,EAAIgyB,EAAO/xB,OAAQD,IAC9BmpB,EAAElB,KAAKsK,EAAKxpB,KAAKC,MAAMhJ,EAAIkxB,EAAOjxB,UAI1C,IAAI,IAAID,EAAI,EAAGA,EAAIgyB,EAAO/xB,OAAQD,IAC9BopB,EAAEnB,KAAKiJ,EAAOlxB,EAAIkxB,EAAOjxB,SAG7B,IAAMgyB,EAA2B,eAAhBpH,EAAA,UAAkC1L,EAAWnX,KAA7C,mBAA4DmX,EAAWlX,KAAvE,QACb2iB,EAAemK,EAAyCllB,EAAQklB,EAAyC90B,QAAU,OAAvG,0BACOkf,EAAWnX,KADlB,mBACiCmX,EAAWlX,KAD5C,QAGViqB,EAA2B,UAAhBrH,EAAA,UAA6B1L,EAAWjX,KAAxC,mBAAuDiX,EAAWhX,KAAlE,QACbyiB,EAAemK,EAAyCllB,EAAQklB,EAAyC90B,QAAU,OAAvG,0BACOkf,EAAWjX,KADlB,mBACiCiX,EAAWhX,KAD5C,QAGVpE,EAAOktB,EAAMhxB,OAAS,EAAI0vB,GAAsBsB,EAAM,GAAId,EAAWhI,QAASgI,EAAW/H,WAC3FsC,GAAeE,EAAe+E,GAAsBsB,EAAMloB,KAAKC,MAAM6G,EAAQklB,EAAyC90B,SAAUkwB,EAAWhI,QAASgI,EAAW/H,WAC/JsC,EAAciF,GAAsBsB,EAAMphB,GAAQsgB,EAAWhI,QAASgI,EAAW/H,WACjF,mBAAqBuH,GAAsBsB,EAAM,GAAId,EAAWhI,QAASgI,EAAW/H,WAAa,OAASuH,GAAsBsB,EAAMA,EAAMhxB,OAAS,GAAIkwB,EAAWhI,QAASgI,EAAW/H,WAExL+J,EAAYjnB,EAAEnI,KAAI,SAACkQ,EAAOjT,GAE1B,GAAmB,UAAhB6qB,EAAwB,CACvB,IAAIwH,EAAYpf,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,OAAG6N,MAAM7N,GAAe,iBAAUqf,aAAO,MAAPA,CAAclJ,EAAEppB,IAA1B,8BAEZsyB,aAAO,MAAPA,CAAcnJ,EAAEnpB,GAAK,IAAMmpB,EAAEnpB,GAAK,IAAMmpB,EAAEnpB,IAF9B,QAIjB,iBAAUsyB,aAAO,MAAPA,CAAclJ,EAAEppB,IAA1B,8BAECsyB,aAAO,MAAPA,CAAcnJ,EAAEnpB,GAAK,IAAMmpB,EAAEnpB,GAAK,IAAMmpB,EAAEnpB,IAF3C,QAGP,OAHO,UAIJmf,EAAWpX,OAJP,aAIkBuqB,aAAOD,EAAPC,CAAkBrf,GAJpC,aAI+C2M,EAAS5E,KAJxD,KAMP,IAAIqX,EAAYpf,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,OAAG6N,MAAM7N,GAAe,iBAAUqf,aAAO,MAAPA,CAAclJ,EAAEppB,IAA1B,8BAEZsyB,aAAO,MAAPA,CAAcnJ,EAAEnpB,IAFJ,QAIjB,iBAAUsyB,aAAO,MAAPA,CAAclJ,EAAEppB,IAA1B,8BAECsyB,aAAO,MAAPA,CAAcnJ,EAAEnpB,IAFjB,QAGP,OAHO,UAIJmf,EAAWpX,OAJP,aAIkBuqB,aAAOD,EAAPC,CAAkBrf,GAJpC,aAI+C2M,EAAS5E,KAJxD,QAQf,OACA,kBAAC,KAAD,CACIpY,MAAQ,CACJ0S,SAAU,WAEV7I,MAAO,OACP1L,OAAQ,OACRsJ,SAAU,QACVqO,UAAW,SAGfkX,kBAAkB,EAElB/vB,KAAM,CACF,CACI4yB,OAAO,EACPC,KAAMnB,EACNoB,KAAMnB,EAENoB,aAAa,EACbC,gBAAgB,EAChBC,WAAYroB,EACZ+oB,QAASxB,EAAO/xB,OAAS,IAAQ,OAAS,OAC1CkpB,IACAC,IACAle,IACA7H,KAAM8b,EAAWpX,OACjBpD,KAAMwrB,EAAWxpB,UAAYC,IAAsBY,kBAAoB,UAAY,UACnF8rB,SAAU,CACN10B,MAAO,CACHmqB,KAAK,IAAD,OAAMnJ,EAAS5E,KAAf,MAERiV,eAAe,SAGnB+C,SAAU,CACNC,SAAUxoB,EACVyoB,YAAY,EACZC,UAAW,CACPC,OAAQ,UACR3wB,KAAM,GACNpC,MAAO,SAEXgzB,YAAa,OAGjBN,UAAW,OACXZ,cAGRlvB,IAAK4M,EAELyY,OAAS,CACLC,KAAM,CAACloB,MAAO,WACdzB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,gBAGCob,EAAWzf,OAHZ,kBAG4Byf,EAAWxf,OAHvC,2BAIMsyB,EAJN,qBAKMC,GACZ3J,KAAM,CACF9lB,KAAM,KAGdutB,MAAM,aACFpxB,MAAM,GAAD,OAAKo2B,EAAL,UACL30B,MAAO,UACP4vB,eAAgB,SACb4B,GAEP3B,MAAO,CACHtxB,MAAO,WACPyB,MAAO,UACP4vB,eAAgB,QAChB0E,UAAW,YAEfnM,cAAeloB,IAAO8J,eACtB0e,YAAagH,GAAUhH,YAAYlJ,EAAS3H,YAAa2H,EAASzI,mBA2ClE8d,CADIp1B,EAAK8xB,iBAAiB9G,EAAaH,EAAaE,GAC1B/qB,EAAM6qB,EAAaE,EAAcC,EAAapgB,EAAS8mB,EAAMC,GA4DnG,OACI,6BACI,yBAAKjvB,UAAWf,EAAQiuB,aACxB,kBAAC,GAAD,CACI5E,YAAaA,EACbqK,kBAbc,WACtB3zB,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3D8D,EAA+B,UAAhBhK,EAA0B,aAAe,WACzD,MASKF,qBAAsC,IAAhBmK,EAAOryB,KAAa,KA5CzB,WACzB,IAAIqxB,EAAapJ,EAAcuG,EAAMxuB,KAAO,GACxCmoB,GAAgBkJ,EAAagB,EAAOryB,KAAO,GAC3CyZ,EAAa,+CAIb3a,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3D6D,GAAiBhK,KAClB,OAkCCA,aAAcA,EACdH,oBAAoC,IAAfwG,EAAMxuB,KAAa,KA/BxB,WACxB,IAAIqxB,EAAalJ,EAAekK,EAAOryB,KAAO,GAC1CioB,GAAeoJ,EAAa7C,EAAMxuB,KAAO,GACzCyZ,EAAa,+CAIb3a,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DI,GAAgBzG,KACjB,OAqBCA,YAAaA,EACb+D,oBAhEgB,SAAClX,GACzBhW,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DO,EAAW/Z,KACZ,MA4DKwT,oBAzDgB,SAACiJ,GACzBzyB,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DU,EAAWuC,KACZ,MAqDKhJ,QAASA,EACTrM,OAAQA,EACRmM,YAxEQ,WAChByE,EAAsB1vB,EAAM+f,EAAS9f,WAAY8f,EAASD,SAAUC,EAASvP,YAwErE3J,MAAOnF,EAAMmF,SAGhBsqB,O,oBCjKEmE,GAlIO,SAAC5zB,GAAW,IAa1B4wB,EAXAiD,EAOA7zB,EAPA6zB,QACAC,EAMA9zB,EANA8zB,QACApK,EAKA1pB,EALA0pB,cACAkF,EAIA5uB,EAJA4uB,WACAmF,EAGA/zB,EAHA+zB,OACAC,EAEAh0B,EAFAg0B,OACA5wB,EACApD,EADAoD,KAGIwa,EAA8EgR,EAA9EhR,WAAYS,EAAkEuQ,EAAlEvQ,SAAUrO,EAAwD4e,EAAxD5e,SAAUxK,EAA8CopB,EAA9CppB,eAAgByuB,EAA8BrF,EAA9BqF,MAAOjD,EAAuBpC,EAAvBoC,KAAMC,EAAiBrC,EAAjBqC,KAAMtB,EAAWf,EAAXe,OAI3E,OAAOvsB,GACH,IAAK,OACDwtB,EAAYprB,EAAehE,KAAI,SAACkQ,EAAOjT,GACnC,IAAIqyB,EAAYpf,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MAChD4I,EAAM2Z,EAAMx1B,GAAG6I,MAAM,EAAE,IAE3B,OADAgT,EAAOA,EAAKC,QAAQ,IAAK,KACnB,SAAN,OAAgBD,EAAhB,eAA2BsD,EAAWpX,OAAtC,aAAiDuqB,aAAOD,EAAPC,CAAkBrf,GAAnE,aAA8E2M,EAAS5E,KAAvF,QAEJ,MAEJ,IAAK,WACDmX,EAAYprB,EAAehE,KAAI,SAACkQ,EAAOjT,GACnC,IAAIqyB,EAAYpf,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,MAAM,QAAN,OAAesf,EAAKvyB,GAAG4J,QAAQ,GAA/B,eAAwCuV,EAAWpX,OAAnD,aAA8DuqB,aAAOD,EAAPC,CAAkBrf,GAAhF,aAA2F2M,EAAS5E,KAApG,QAEJ,MAEJ,IAAK,YACDmX,EAAYprB,EAAehE,KAAI,SAACkQ,EAAOjT,GACnC,IAAIqyB,EAAYpf,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,MAAM,QAAN,OAAeuf,EAAKxyB,GAAG4J,QAAQ,GAA/B,eAAwCuV,EAAWpX,OAAnD,aAA8DuqB,aAAOD,EAAPC,CAAkBrf,GAAhF,aAA2F2M,EAAS5E,KAApG,QAEJ,MAEJ,IAAK,QACDmX,EAAYprB,EAAehE,KAAI,SAACkQ,EAAOjT,GACnC,IAAIqyB,EAAYpf,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,MAAM,UAAN,OAAiBie,EAAOlxB,GAAG4J,QAAQ,GAAnC,eAA4CuV,EAAWpX,OAAvD,aAAkEuqB,aAAOD,EAAPC,CAAkBrf,GAApF,aAA+F2M,EAAS5E,KAAxG,QAEJ,MAEJ,QACImX,EAAYprB,EAAehE,KAAI,SAACkQ,EAAOjT,GACnC,IAAIqyB,EAAYpf,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MAChD4I,EAAM2Z,EAAMx1B,GAAG6I,MAAM,EAAE,IAE3B,OADAgT,EAAOA,EAAKC,QAAQ,IAAK,KACnB,SAAN,OAAgBD,EAAhB,eAA2BsD,EAAWpX,OAAtC,aAAiDuqB,aAAOD,EAAPC,CAAkBrf,GAAnE,aAA8E2M,EAAS5E,KAAvF,QAIZ,IAAMjX,EAAOob,EAAWtX,MAAQsX,EAAWrX,IAAM6nB,GAAsBxQ,EAAWtX,KAC9E8nB,GAAsBxQ,EAAWtX,KAAO,OAAS8nB,GAAsBxQ,EAAWrX,KAEhF3D,EAAMgb,EAAWnX,OAASmX,EAAWlX,KAAOkX,EAAWnX,KAAO,OAChEmX,EAAWnX,KAAO,WAAamX,EAAWlX,KAAO,OAE/C1D,EAAM4a,EAAWjX,OAASiX,EAAWhX,KAAOgX,EAAWjX,KAAO,OAChEiX,EAAWjX,KAAO,WAAaiX,EAAWhX,KAAO,OAE/CzE,EAAS6N,EACX4N,EAAWzf,SAAWyf,EAAWxf,OAAjC,UAA6Cwf,EAAWzf,OAAxD,iBACGyf,EAAWzf,OADd,kBAC8Byf,EAAWxf,OADzC,OADsB,UAI1B,OACI,kBAAC,KAAD,CACIiD,MAAQ,CACJ0S,SAAU,WAEV7I,MAAO,OACP1L,OAAQ,QAGZ6uB,kBAAkB,EAElB/vB,KAAM,CACF,CACIspB,EAAGiM,EACHhM,EAAGiM,EACH1U,KAAM,UACNtd,KAAK,GAAD,OAAKuc,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC5F1L,KAAMoC,EAAe9G,OAAS,IAAQ,YAAc,UAEpD4vB,OAAQ,CACJrD,QAASvB,EAAcuB,QACvB/pB,KAAMwoB,EAAcxoB,KACpBpC,MAAO4qB,EAAc5qB,OAEzB0yB,UAAW,OACXZ,cAGRvJ,OAAM,eAAMkH,GAAUlH,QACtBN,OAAM,2BACCwH,GAAUxH,QADX,IAEFyH,aAAc,cAGdnxB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,MAGFL,EAHE,mBAIUS,EAJV,qBAKMI,GACZgkB,KAAM,CACF9lB,KAAM,KAGdutB,MAAO,CACHpxB,MAAO02B,EACPj1B,MAAO,UACP4vB,eAAgB,SAEpBC,MAAO,CACHtxB,MAAO22B,EACPl1B,MAAO,UACP4vB,eAAgB,QAChB0E,UAAoB,UAAThwB,GAAmB,YAElCmkB,YAAagH,GAAUhH,YAAYlJ,EAAS3H,YAAa2H,EAASzI,kBCM5EtN,GAAqB,CACvBknB,sBACAxB,2BAGJ,SAASkG,GAAS5lB,GACd,MAAO,CACLoG,GAAG,cAAD,OAAgBpG,GAClB,gBAAgB,cAAhB,OAA+BA,IAIrC,IAAM6lB,GAAiB,SAACn0B,GAAW,IACvBo0B,EAAoDp0B,EAApDo0B,SAAUC,EAA0Cr0B,EAA1Cq0B,YAAa/lB,EAA6BtO,EAA7BsO,MAAOgmB,EAAsBt0B,EAAtBs0B,kBAEtC,OACI,yBAAKC,OAAQF,IAAgB/lB,GACzB,kBAAC,GAAD,iBACQgmB,EADR,CAEInvB,MAAOnF,EAAMmF,SAEhBivB,IAMPI,GAAYh0B,IAAMwL,MAAK,SAAChM,GAAW,IAE7BC,EAAmCD,EAAnCC,QAAS+tB,EAA0BhuB,EAA1BguB,sBACT1vB,EAAS0B,EAAMmF,MAAf7G,KACA+f,EAAa/f,EAAb+f,SAJ4B,EAMN5d,mBAAS,WANH,mBAM7ByI,EAN6B,KAMpB6mB,EANoB,OAONtvB,mBAAS,CAACnC,EAAK0xB,KAAM1xB,EAAK2xB,OAPpB,mBAO7BxG,EAP6B,KAOpByG,EAPoB,OAQMzvB,mBAAS,CAACwqB,QAAS,GAAInsB,MAAM,UAAWoC,KAAM,IARpD,mBAQ7BwoB,EAR6B,KAQdiJ,EARc,OASdlyB,mBAAS,GATK,mBAS7Bg0B,EAT6B,KASxBC,EATwB,KAW9BC,EA3Jc,SAAC/F,EAAY1lB,EAASugB,GAAa,IAE/C7L,EAAyBgR,EAAzBhR,WAAYS,EAAauQ,EAAbvQ,SAEd7b,EAAOob,EAAWtX,MAAQsX,EAAWrX,IAAM6nB,GAAsBxQ,EAAWtX,KAC9E8nB,GAAsBxQ,EAAWtX,KAAO,OAAS8nB,GAAsBxQ,EAAWrX,KAEhF3D,EAAMgb,EAAWnX,OAASmX,EAAWlX,KAAOkX,EAAWnX,KAAO,OAChEmX,EAAWnX,KAAO,WAAamX,EAAWlX,KAAO,OAE/C1D,EAAM4a,EAAWjX,OAASiX,EAAWhX,KAAOgX,EAAWjX,KAAO,OAChEiX,EAAWjX,KAAO,WAAaiX,EAAWhX,KAAO,OAE/CzE,EAASysB,EAAW5e,SACtB4N,EAAWzf,SAAWyf,EAAWxf,OAAjC,UAA6Cwf,EAAWzf,OAAxD,iBACGyf,EAAWzf,OADd,kBAC8Byf,EAAWxf,OADzC,OADiC,UAIrC,OACI,kBAAC,KAAD,CACIiD,MAAQ,CACJ0S,SAAU,WAEV7I,MAAO,OACP1L,OAAQ,OACRsJ,SAAU,QACVqO,UAAW,SAGfkX,kBAAkB,EAElB/vB,KAAM,CACF,CACI4yB,OAAO,EACPC,KAAM1H,EAAQ,GACd2H,KAAM3H,EAAQ,GACdzmB,IAAK4rB,EAAWqC,KAChBruB,IAAKgsB,EAAWoC,KAChBrnB,EAAGilB,EAAWppB,eACd8rB,gBAAgB,EAChBC,WAAYroB,EACZ0rB,OAAQ,EACR9yB,KAAK,GAAD,OAAKuc,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC5F1L,KAAM,gBAEN2uB,SAAU,CACN10B,MAAO,CACHmqB,KAAK,IAAD,OAAMoH,EAAWvQ,SAAS5E,KAA1B,MAERiV,eAAgB,WAK5B3H,OAAM,2BACCwH,GAAUxH,QADX,IAEF1pB,MAAO,CACHmqB,KAAM,UAAGnJ,EAAS1T,cAAZ,cACK0T,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UADxF,aACsGuP,EAAS5E,KAD/G,mBAEKjX,EAFL,MAGFL,EAHE,mBAIUS,EAJV,qBAKMI,GACZgkB,KAAM,CACF9lB,KAAM,KAGd2zB,OAAQ,CACJxzB,MAAO,WACPyzB,OAAQ,CACJ,CACIC,WAAY,SACZ3qB,OAAQ,CAAC,iGACT4qB,MAAO,WAGfC,OAAQrG,EAAWqG,OACnBlY,KAAM6R,EAAW7R,MAGrBwK,YAAagH,GAAUhH,YAAYqH,EAAWvQ,SAAS3H,YAAa2H,EAASzI,eAGjFyR,OAAM,2BACCkH,GAAUlH,QADX,IAEF6N,kBACE,iGAsEDC,CAAgB72B,EAAM4K,EAASugB,GAsBtCF,EAAc,WAChByE,EAAsB1vB,EAAM+f,EAAS9f,WAAY8f,EAASD,SAAUC,EAASvP,YAe3EwlB,EAAoB,CACtB9yB,IAAK,CACD0H,UACAgkB,oBAvCoB,SAAClX,GACzBhW,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DO,EAAW/Z,KACZ,MAmCCyT,UACAD,oBAjCoB,SAACiJ,GACzBzyB,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DU,EAAWuC,KACZ,MA6BClJ,eAGJ6L,QAAS,CACL7L,cACAG,gBACAiJ,mBACAhJ,2BAzB2B,SAAC8I,GAChCzyB,EAAMwvB,kBAAkB,gBACxBziB,YAAW,WACPqlB,OAAOC,uBAAsB,kBAAMryB,EAAMwvB,kBAAkB,OAC3DmD,EAAiBF,KAClB,QAwBP,OACI,6BACI,kBAAC4C,GAAA,EAAD,CACI3jB,MAAO+iB,EACP7yB,SAzCY,SAAC8M,EAAO4mB,GAC5BZ,EAAOY,IAyCCvS,aAAW,cACXwS,UAAQ,EACRC,eAAe,UACfx0B,UAAWf,EAAQw1B,MAEnB,kBAACC,GAAA,EAAD,eAAK1zB,MAAM,OAAUkyB,GAAS,GAA9B,CAAkClzB,UAAWf,EAAQw0B,IAAKxzB,QA/BlD,WAChB8L,YAAW,kBAAMqlB,OAAOuD,cAAc,IAAIC,MAAM,aAAY,QA+BpD,kBAACF,GAAA,EAAD,eAAK1zB,MAAM,WAAckyB,GAAS,GAAlC,CAAsClzB,UAAWf,EAAQw0B,OACzD,kBAACiB,GAAA,EAAD,eAAK1zB,MAAM,UAAakyB,GAAS,GAAjC,CAAqClzB,UAAWf,EAAQw0B,OACxD,kBAACiB,GAAA,EAAD,eAAK1zB,MAAM,UAAakyB,GAAS,GAAjC,CAAqClzB,UAAWf,EAAQw0B,OACvDn2B,EAAK0R,UAAY,kBAAC0lB,GAAA,EAAD,eAAK1zB,MAAM,YAAekyB,GAAS,GAAnC,CAAuClzB,UAAWf,EAAQw0B,QAEhF,kBAAC,GAAD,CAAgBJ,YAAaI,EAAKnmB,MAAO,EAAGgmB,kBAAmBA,EAAkB9yB,IAAK2D,MAAOnF,EAAMmF,OACtF,IAARsvB,GAAaE,GAGlB,kBAAC,GAAD,CAAgBN,YAAaI,EAAKnmB,MAAO,EAAGgmB,kBAAmBA,EAAkBc,QAASjwB,MAAOnF,EAAMmF,OAC1F,IAARsvB,GACG,kBAAC,GAAD,CACIZ,QAASv1B,EAAK21B,MACdH,QAASx1B,EAAKkH,eACdkkB,cAAeA,EACfkF,WAAYtwB,EACZy1B,OAAO,OACPC,OAAM,UAAK3V,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,UAAxF,aAAsGuP,EAAS5E,KAA/G,KACNrW,KAAK,UAKjB,kBAAC,GAAD,CAAgBixB,YAAaI,EAAKnmB,MAAO,EAAGgmB,kBAAmBA,EAAkBc,QAASjwB,MAAOnF,EAAMmF,OAC1F,IAARsvB,GACG,kBAAC,GAAD,CACIZ,QAASv1B,EAAK0yB,KACd8C,QAASx1B,EAAKkH,eACdkkB,cAAeA,EACfkF,WAAYtwB,EACZy1B,OAAO,WACPC,OAAM,UAAK3V,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC9F1L,KAAK,cAKjB,kBAAC,GAAD,CAAgBixB,YAAaI,EAAKnmB,MAAO,EAAGgmB,kBAAmBA,EAAkBc,QAASjwB,MAAOnF,EAAMmF,OAC1F,IAARsvB,GACG,kBAAC,GAAD,CACIZ,QAASv1B,EAAK2yB,KACd6C,QAASx1B,EAAKkH,eACdkkB,cAAeA,EACfkF,WAAYtwB,EACZy1B,OAAO,YACPC,OAAM,UAAK3V,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC9F1L,KAAK,eAKhB9E,EAAK0R,UACF,kBAAC,GAAD,CAAgBqkB,YAAaI,EAAKnmB,MAAO,EAAGgmB,kBAAmBA,EAAkBc,QAASjwB,MAAOnF,EAAMmF,OAC1F,IAARsvB,GACG,kBAAC,GAAD,CACIZ,QAASv1B,EAAKkH,eACdsuB,QAASx1B,EAAKqxB,OACdjG,cAAeA,EACfkF,WAAYtwB,EACZy1B,OAAM,UAAK1V,EAASvP,UAAUpQ,OAAS,GAAK2f,EAASvP,UAAUxH,MAAM,EAAG,IAAM,MAAO+W,EAASvP,WAC9FklB,OAAO,WACP5wB,KAAK,eAUlBoF,eAAQ,KAAMF,GAAdE,CAAkC7J,aAxMlC,SAAAC,GAAK,MAAK,CACrBqvB,aAAc,CACVhlB,QAAS,eACTtJ,gBAAiBZ,IAAO8J,eACxB/I,UAAW,wGACXb,OAAQ,OACRH,MAAO,SAGXovB,YAAa,CACTjlB,QAAQ,SAGZwsB,KAAM,CACF1nB,aAAcnP,EAAMupB,QAAQ,IAGhCsM,IAAK,CACD30B,UAAW,0BACXR,SAAU,OACVyX,cAAe,OACfjY,MAAOF,EAAMsK,QAAQlK,QAAQmK,SAmLYxK,CAAmB61B,KC5R9DlsB,GAAqB,CACzButB,iBAuHIC,GAAiBn3B,YAnBE,CACrBo3B,eAAgB,CACd1e,MAAO,QACPtX,UAAW,QACXuB,YAAa,SAeI3C,EAXC,SAACqB,GAAW,IAC1BC,EAAYD,EAAZC,QACR,OACE,kBAAC,IAAMsP,SAAP,KACE,kBAACsT,EAAA,EAAD,CAAY7hB,UAAWf,EAAQ81B,eAAgBj3B,MAAM,UAAUmC,QAAS,kBAAMjB,EAAMg2B,kBAAkBh2B,EAAMi2B,aAAaC,oBAAkB,EAACC,eAAa,GACvJ,kBAACC,GAAA,EAAD,WAQFC,G,4MAEJL,kBAAoB,SAACC,GACnB,EAAKj2B,MAAM61B,YAAYI,I,uDAGd,IAAD,SACwCK,KAAKt2B,MAAzCC,EADJ,EACIA,QAASgF,EADb,EACaA,OADb,EACqB6Y,eAEzB,OACI,kBAAC,IAAMvO,SAAP,KACKtK,EAAOzD,KAAI,SAAC2D,EAAOmJ,GAChB,OAAOnJ,EAAM7G,KAAKsf,WAAW/W,QAEzB,KAAKb,IAAiBG,UACpB,OAAGhB,EAAMC,UAAYS,IAAYN,OAE7B,yBAAK7D,IAAKyD,EAAMuP,IACd,kBAACyP,EAAA,EAAD,CAAOoS,UAAW,GAAIv1B,UAAWf,EAAQu2B,WAAY90B,IAAKyD,EAAMuP,IAE9D,kBAACohB,GAAD,CAAgBG,WAAY3nB,EAAO0nB,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAW7wB,MAAOA,MAIhBA,EAAM7G,KAAK+f,SAASnW,qBAAuB+V,IAAmBrZ,UAEpE,yBAAKlD,IAAKyD,EAAMuP,IACd,kBAACyP,EAAA,EAAD,CAAOoS,UAAW,GAAIv1B,UAAWf,EAAQu2B,WAAY90B,IAAKyD,EAAMuP,IAE9D,kBAACohB,GAAD,CAAgBG,WAAY3nB,EAAO0nB,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAW7wB,MAAOA,MAMxB,yBAAKzD,IAAKyD,EAAMuP,IACd,kBAACyP,EAAA,EAAD,CAAOoS,UAAW,GAAIv1B,UAAWf,EAAQu2B,WAAY90B,IAAKyD,EAAMuP,IAE9D,kBAACohB,GAAD,CAAgBG,WAAY3nB,EAAO0nB,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAgB7wB,MAAOA,MAK/B,KAAKa,IAAiBN,WACpB,OACE,yBAAKhE,IAAKyD,EAAMuP,IACd,kBAACyP,EAAA,EAAD,CAAOoS,UAAW,GAAIv1B,UAAWf,EAAQu2B,WAAY90B,IAAKyD,EAAMuP,IAE9D,kBAACohB,GAAD,CAAgBG,WAAY3nB,EAAO0nB,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAiB7wB,MAAOA,MAKhC,KAAKa,IAAiBP,aACpB,OACE,yBAAK/D,IAAKyD,EAAMuP,IACd,kBAACyP,EAAA,EAAD,CAAOoS,UAAW,GAAIv1B,UAAWf,EAAQu2B,WAAY90B,IAAKyD,EAAMuP,IAE9D,kBAACohB,GAAD,CAAgBG,WAAY3nB,EAAO0nB,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAmB7wB,MAAOA,MAKlC,KAAKa,IAAiBF,WACpB,OACE,yBAAKpE,IAAKyD,EAAMuP,IACd,kBAACyP,EAAA,EAAD,CAAOoS,UAAW,GAAIv1B,UAAWf,EAAQu2B,WAAY90B,IAAKyD,EAAMuP,IAE9D,kBAACohB,GAAD,CAAgBG,WAAY3nB,EAAO0nB,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAiB7wB,MAAOA,MAKhC,QACE,MAAO,Y,GAhFZ0R,aAwFNrO,gBAvNS,SAACC,EAAOC,GAAR,MAAsB,CAC1CzD,OAAQwD,EAAMxD,OACd6Y,eAAgBrV,EAAMqV,kBAqNcxV,GAAzBE,CAA6C7J,aA9M7C,SAACC,GAAD,MAAY,CACzB43B,WAAY,CACV72B,gBAAiBZ,IAAO8J,eACxBkF,aAAc,KACdzC,WAAY1M,EAAMupB,QAAQ,GAC1BroB,UAAW,0BACXoL,MAAO,cACPjM,OAAQ,kBACR,6BAA8B,CAC5BE,UAAW,OACXF,OAAQ,qBAoM8CN,CAAmB03B,K,UCjOzErb,GAAgB,CAClB5X,KAAM,aACN6X,aAAc,CACV,CACI7X,KAAM,OACN8X,SAAU,CACVpc,MAAO,CAAC,EAAG,IAAK,IAAK,KAErBqc,QAAS,CACLrc,MAAO,CAAC,EAAG,IAAK,IAAK,GACrBoC,KAAM,UAMhBu1B,GAAiB,CACnBrzB,KAAM,UACF6X,aAAc,CACV,CACI7X,KAAM,OACNlC,KAAM,MACNga,SAAU,CACNpc,MAAO,CACH43B,EAAG,EACHC,EAAG,IACHvP,EAAG,IACHwP,EAAG,OAOrBC,G,kDAEF,WAAY72B,GAAQ,IAAD,8BACf,cAAMA,IAaV82B,sBAAwB,SAACC,EAAWC,GAChC,OAAO,GAbP,EAAKzY,YAAc,IAAIve,EAAMsc,YAAY2a,gBAAgB,CACrDC,MAAOl3B,EAAMic,YACbY,KAAM7c,EAAM6c,KACZ7B,cAHqD,GAIrDyb,kBACAU,qBAAsB,CAClBC,mBAAmB,EACnBC,KAAM,eATC,E,qDAkBT,IACExa,EAASyZ,KAAKt2B,MAAd6c,KAOR,OALAA,EAAKya,GAAGC,OAAO,QACf1a,EAAKya,GAAGC,OAAO,qBACf1a,EAAKya,GAAGC,OAAO,WACf1a,EAAKya,GAAGC,OAAO,eAER,S,GA5BY/2B,IAAMqW,WAgC3B2gB,GAAuBh3B,IAAMwL,MAAK,SAAChM,GAAW,IACxCklB,EAAmDllB,EAAnDklB,iBAAkBuS,EAAiCz3B,EAAjCy3B,gBAAiBnb,EAAgBtc,EAAhBsc,YAE3C,GAAG4I,EAAiB,CAAC,IACT+L,EAAe/L,EAAf+L,KAAMD,EAAS9L,EAAT8L,KAEV0G,EAAWlwB,KAAKC,MAAMwpB,EAAKvyB,OAAS,GAExC+4B,EAAgBvb,YAEhB,IAAIyb,EAAY,CAAC,IACbC,EAAY,EAEZrnB,EAAW0gB,EAAK,GAChB5gB,EAAW2gB,EAAK,GAChB6G,EAAc,EAGlB5G,EAAK/rB,SAAQ,SAAClC,EAAKvE,GACf,IAAImE,EAAMouB,EAAKvyB,GAEXq5B,EAActwB,KAAKqpB,IAAIjuB,EAAMyN,GAC7B0nB,EAAevwB,KAAKqpB,IAAI7tB,EAAMuN,GAC9BynB,EAAcD,EAAe,IAAK,IAAMA,EAAeA,EAEvDE,EAAWzwB,KAAK0wB,KAAKJ,EAAcA,EAAcE,EAAcA,GACnEH,EAAcI,EAAWJ,EAAcI,EAAWJ,EAElDF,EAAUC,GAAWlR,KAAK,CAAC1jB,EAAKJ,IAE7BnE,EAAIwyB,EAAKvyB,OAAS,IACbsE,EAAM,KAAOA,EAAM,KAASiuB,EAAKxyB,EAAI,IAAM,KAAOwyB,EAAKxyB,EAAI,IAAM,MACjEk5B,EAAUjR,KAAK,IACfkR,KAGA50B,GAAO,KAAOA,GAAO,KAASA,EAAIvE,EAAI,GAAK,KAAOuE,EAAIvE,EAAI,GAAK,MAC/Dk5B,EAAUjR,KAAK,IACfkR,SAKZ,IAAIO,EAAyB,CACzB/0B,KAAM,UACN6X,aAAc,CAAC,CACX7X,KAAM,OACN8X,SAAU,CAAEpc,MAAO,CAAC,EAAG,IAAK,IAAK,IACjCs5B,IAAM,QACNC,KAAM,QACNn3B,KAAM,KAIdy2B,EAAUzyB,SAAQ,SAAA8tB,GAEd,IAAIsF,EAA2B,CAC3Bl1B,KAAM,WACNm1B,MAAOvF,GAGPpU,EAAU,IAAItC,EAAYC,QAAQ,CAClCC,SAAU8b,EACV7b,OAAQ0b,IAGZV,EAAgB/kB,IAAIkM,MAGxB,IACI,IAAMqW,EAAS,CAAChE,EAAKyG,GAAW1G,EAAK0G,IAEjC3a,EAAO,EAAIvV,KAAKC,MAAMowB,EAAc,GAExC73B,EAAM6c,KAAKC,KAAK,CACZrS,OAAQwqB,EACRlY,QACD,CACCC,YAAa,KACbC,YAAa,KAGnB,MAAMxb,GAAI+2B,QAAQC,IAAIh3B,SAGxBg2B,EAAgBvb,YAEhBlc,EAAM6c,KAAKC,KAAK,CACZrS,OAAQ,EAAE,IAAK,IACfsS,KAAM,GACP,CACCC,YAAa,KACbC,YAAa,KAGrB,MAAO,MAGLyb,G,kDACF,WAAY14B,GAAO,IAAD,8BACd,cAAMA,IAQV8S,OAAS,WAAO,IAAD,EACoD,EAAK9S,MAA5DC,EADG,EACHA,QAASqc,EADN,EACMA,YAAa4I,EADnB,EACmBA,iBAAkBtI,EADrC,EACqCA,WAEhD,OACI,yBAAK5b,UAAWf,EAAQa,UAAW4T,GAAG,aAClC,kBAAC,KAAD,CACIikB,cAAe,CACXC,QAAS,YACT9D,OAAQ,CACJ,EAAK7Y,YACL,EAAKwb,kBAIboB,eAAgB,CACZ5D,OAAQ,EAAE,IAAK,IACflY,KAAM,EACN+b,iBAAkB,CACdC,YAAa,EACbC,UAAW,mBACXC,YAAa,EACbn6B,MAAO,sBAIf,kBAAC04B,GAAD,CACItS,iBAAkBA,EAClBuS,gBAAiB,EAAKA,gBACtBnb,YAAaA,IAEjB,kBAAC,GAAD,CACIa,8BAAiC,EAAKnd,MAAMmd,8BAC5Cb,YAAaA,EACb4c,qBAAsB,EAAKl5B,MAAMk5B,qBACjCjd,YAAa,EAAKA,YAClBkd,YAAa,SAAChU,GAAD,OAAc,EAAKpT,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B0c,eACzDnX,IAAK4O,OA3CrB,EAAKnU,MAAQ,CACT0c,UAAU,GAEd,EAAKlJ,YAAc,IAAIjc,EAAMsc,YAAY8c,cACzC,EAAK3B,gBAAkB,IAAIz3B,EAAMsc,YAAY8c,cAN/B,E,UADKviB,aAsDZlY,gBAlOA,SAACC,GAAD,MAAY,CACvBkC,UAAW,CACP7B,OAAQ,gBACRiM,MAAO,QACP1L,OAAQ,YA8NDb,CAAmB+5B,IC9NnBW,GAZW,SAAC72B,GACvB,IAAI82B,EAAO92B,EAAK+2B,cACZC,EAAQh3B,EAAK0wB,WAAa,EAC1BuG,EAAMj3B,EAAKk3B,UAMf,OAJYJ,EAAKK,WAIF,KAHFH,EAAQ,GAAK,IAAMA,EAAMG,WAAaH,EAAMG,YAG3B,KAFnBF,EAAM,GAAK,IAAMA,EAAIE,WAAaF,EAAIE,aCItCC,GAXc,SAACC,GAC1B,IAAIr3B,EAAO,IAAI2N,KAAK0pB,GAChBC,EAAUt3B,EAAKu3B,iBACfC,EAAWx3B,EAAKy3B,cAChBC,EAAU13B,EAAK23B,aAEfC,EAAU,IAAIjqB,KAElB,OADAiqB,EAAQC,YAAYP,EAASE,EAAUE,GAChCE,G,UCoDIz7B,gBArDA,SAACC,GAAD,MAAY,CACvBgK,YAAa,CACTjJ,gBAAiB,QACjBuL,MAAO,QACP1L,OAAQ,SAGZ86B,OAAQ,CACJvjB,cAAe,OACfwjB,WAAY,OACZx6B,UAAW,WA2CJpB,CAAmBwnB,aAvCX,SAACnmB,GAAW,IACvBymB,EAAqBzmB,EAArBymB,QAASxmB,EAAYD,EAAZC,QAEjB,OACI,kBAAC,IAAMsP,SAAP,KACI,kBAAC9F,GAAA,EAAD,CACI/I,MAAI,EACJqJ,WAAY,CACR/I,UAAWf,EAAQ2I,cAGvB,kBAACoB,GAAA,EAAD,sCAIA,kBAACG,GAAA,EAAD,KACI,kBAAC+I,EAAA,EAAD,CACIpF,QAAQ,WACR7M,QAAS,kBAAMwlB,EAAQC,KAAK,0BAC5B1lB,UAAWf,EAAQq6B,OACnBx7B,MAAM,WAJV,oBASA,kBAACoU,EAAA,EAAD,CACIpF,QAAQ,WACR7M,QAAS,kBAAMwlB,EAAQC,KAAK,2BAC5B5nB,MAAM,UACNkC,UAAWf,EAAQq6B,QAJvB,0B,mBC3BLE,GAnBM,SAACpgB,EAAMqgB,GAExB,IAAIC,EAAS,GAcb,OAZAD,EAAQv1B,SAAQ,SAAAxD,GAAG,OAAIg5B,EAAOh5B,GAAO,IAAI5D,OAEzCsc,EAAKlV,SAAQ,SAAAtE,GACT65B,EAAQv1B,SAAQ,SAAAxD,GACTogB,MAAM6Y,QAAQ/5B,EAAKc,IAClBd,EAAKc,GAAKwD,SAAQ,SAAA01B,GAAO,OAAIF,EAAOh5B,GAAKgR,IAAIkoB,MAGzCh6B,EAAKc,IAAMg5B,EAAOh5B,GAAKgR,IAAI9R,EAAKc,UAIzCg5B,GCWLpyB,GAAqB,CACvBuyB,0BACArgB,gCACAsgB,2BAGEC,GAAY,gEAgJZC,GAA2B,SAACC,EAASC,EAAaC,EAAeC,EAAyBC,EAAiBC,EAAgBC,GAC7HN,EAAO,aAAOA,GACXC,IAAaD,EAAUM,EAAOA,OAAOL,IACrCC,GAAiBA,EAAcj6B,OAAM+5B,EAAUA,EAAQO,QAAO,SAAA/5B,GAAC,OAAI05B,EAAc38B,IAAIiD,EAAEg6B,UACvFL,GAA2BA,EAAwBl6B,OAAM+5B,EAAUA,EAAQO,QAAO,SAAA/5B,GAAC,OAAI25B,EAAwB58B,IAAIiD,EAAEi6B,gBACrHL,GAAmBA,EAAgBn6B,OAAM+5B,EAAUA,EAAQO,QAAO,SAAA/5B,GAAC,OAAIA,EAAEk6B,QAAQC,MAAK,SAAA5qB,GAAM,OAAIqqB,EAAgB78B,IAAIwS,UACpHsqB,GAAkBA,EAAep6B,OAAM+5B,EAAUA,EAAQO,QAAO,SAAA/5B,GAAC,OAAI65B,EAAe98B,IAAIiD,EAAEo6B,YAE7F,IAAIC,EAAuBb,EAAQ/tB,QAAO,SAACC,EAAKC,GAG5C,OAFID,EAAIC,EAAIquB,QAAOtuB,EAAIC,EAAIquB,MAAQ,IACnCtuB,EAAIC,EAAIquB,MAAM/U,KAAKtZ,GACZD,IACR,IAIH,MAAO,CAAC2uB,qBAFRA,EAAuBC,OAAOC,KAAKF,GAAsBt6B,KAAI,SAAAE,GAAG,MAAK,CAAC43B,KAAM53B,EAAKu5B,QAASa,EAAqBp6B,OAAQu6B,MAAK,SAACrF,EAAGxP,GAAJ,OAAUwP,EAAE0C,KAAOlS,EAAEkS,KAAO,GAAK,KAE/H2B,YAG5BiB,GAA8B,CAChCf,cAAe,IAAIr9B,IACnBs9B,wBAAyB,IAAIt9B,IAC7Bu9B,gBAAiB,IAAIv9B,IACrBo9B,YAAa,GACbiB,cAAe,KACfb,eAAgB,IAAIx9B,KAUlBsO,IANO,IAAItO,IACP,IAAIA,IACE,IAAIA,IACR,IAAIA,IAGA0C,IAAMyO,aAChBmtB,G,kDAEF,WAAYp8B,GAAO,IAAD,uBACd,cAAMA,IAqCVuR,kBAAoB,WAChB,EAAKvR,MAAM8b,kBACP,EAAK9b,MAAMq8B,YAAe,EAAKr8B,MAAMq8B,WAAW39B,QAAQ,EAAKsB,MAAM66B,yBAxCzD,EA2ClB3d,qBAAuB,WACnB,EAAKld,MAAM86B,yBA5CG,EA+ClBwB,mBAAqB,SAACC,GACfA,GACC,EAAKv8B,MAAMwa,4BAA4B+hB,EAAUxtB,IAGrD,EAAKgD,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B+zB,eAAgBD,EAAWE,gBAAgB,MApD3D,EAuDlB9gB,mBAAqB,SAACC,EAAWC,GAC7B,KAAKD,EAAUygB,aAAczgB,EAAUygB,WAAW39B,SAAY,EAAKsB,MAAMq8B,YAAc,EAAKr8B,MAAMq8B,WAAW39B,OAAQ,CACjH,EAAK+J,MAAM8yB,OAAOmB,aAAa,EAAK18B,MAAMq8B,YADuE,MAEzErB,GAAyB,EAAKh7B,MAAMq8B,WAAY,GAAI,IAAIv+B,IAAO,IAAIA,IAAO,IAAIA,IAAO,IAAIA,IAAO,EAAK2K,MAAM8yB,QAA7IO,EAF2G,EAE3GA,qBAAsBb,EAFqF,EAErFA,QACxB0B,EAAanC,GAAaS,EAAS,CAAC,aAAc,OAAQ,UAAW,WAEzE,EAAKlpB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8BqzB,uBAAsBb,UAAS0B,gBAG9D9gB,EAAUigB,uBAAyB,EAAKrzB,MAAMqzB,sBAAsB1vB,GAAQM,QAAQC,gBAAgB,IAhEzF,EAmElB6E,wBAA0B,SAAC/P,GAAM,MAEWu5B,GACpC,EAAKh7B,MAAMq8B,WACX56B,EAAEgJ,OAAOiH,MACT,EAAKjJ,MAAM0yB,cACX,EAAK1yB,MAAM2yB,wBACX,EAAK3yB,MAAM4yB,gBACX,EAAK5yB,MAAM6yB,eACX,EAAK7yB,MAAM8yB,QAPTO,EAFuB,EAEvBA,qBAAsBb,EAFC,EAEDA,QAUxB2B,EAAgBpC,GAAaS,EAAS,CAAC,aAAc,OAAQ,UAAW,WACxE4B,EAAa,eAAO,EAAKp0B,MAAMk0B,YAE/BA,EAAa,CACbjB,WAAY,EAAKjzB,MAAM2yB,wBAAwBl6B,KAAO27B,EAAcnB,WAAakB,EAAclB,WAC/FD,KAAM,EAAKhzB,MAAM0yB,cAAcj6B,KAAO27B,EAAcpB,KAAOmB,EAAcnB,KACzEE,QAAS,EAAKlzB,MAAM4yB,gBAAgBn6B,KAAO27B,EAAclB,QAAUiB,EAAcjB,QACjFE,OAAQ,EAAKpzB,MAAM6yB,eAAep6B,KAAO27B,EAAchB,OAASe,EAAcf,QAGlF,EAAK9pB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8ByyB,YAAaz5B,EAAEgJ,OAAOiH,MAAOoqB,uBAAsBb,UAAS0B,iBAzF5E,EA4FlBG,kBAAoB,WAChB,EAAK/qB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8Bg0B,gBAAgB,MA7FhC,EAgGlB7pB,uBAAyB,SAAChB,GACtB,IAAImrB,EAAY,2BAAO,EAAKt0B,OAAZ,IAAmB,CAACmJ,GAAa,IAAI9T,MADhB,EAEGk9B,GACpC,EAAKh7B,MAAMq8B,WACXU,EAAa7B,YACb6B,EAAa5B,cACb4B,EAAa3B,wBACb2B,EAAa1B,gBACb0B,EAAazB,eACb,EAAK7yB,MAAM8yB,QAPTO,EAF+B,EAE/BA,qBAAsBb,EAFS,EAETA,QAUxB0B,EAAanC,GAAaS,EAAS,CAAC,aAAc,OAAQ,UAAW,WAEzE,EAAKlpB,SAAL,2BAAkBgrB,GAAlB,IAAgCjB,uBAAsBb,UAAS0B,iBA9GjD,EAiHlBvqB,kBAAoB,WAChB,IAAI2qB,EAAY,2BAAO,EAAKt0B,OAAUyzB,IADhB,EAGkBlB,GACpC,EAAKh7B,MAAMq8B,WACXU,EAAa7B,YACb6B,EAAa5B,cACb4B,EAAa3B,wBACb2B,EAAa1B,gBACb0B,EAAazB,eACb,EAAK7yB,MAAM8yB,QAPTO,EAHgB,EAGhBA,qBAAsBb,EAHN,EAGMA,QAUxB0B,EAAanC,GAAaS,EAAS,CAAC,aAAc,OAAQ,UAAW,WAEzE,EAAKlpB,SAAL,2BAAkBgrB,GAAlB,IAAgCjB,uBAAsBb,UAAS0B,iBAhIjD,EAmIlBr8B,oBAAsB,SAACmB,EAAGM,GAAa,IAAD,EACVN,EAAEgJ,OAAO3I,KAAKyQ,MAAM,MADV,mBAC5BC,EAD4B,KACpBd,EADoB,KAE9Be,EAAS,IAAI3U,IAAI,EAAK2K,MAAM+J,IAEhCzQ,EAAU0Q,EAAOC,IAAIhB,GAASe,EAAOE,OAAOjB,GAE5C,IAAIqrB,EAAY,2BAAO,EAAKt0B,OAAZ,IAAmB,CAAC+J,GAASC,IANX,EAQMuoB,GACpC,EAAKh7B,MAAMq8B,WACX56B,EAAEgJ,OAAOiH,MACTqrB,EAAa5B,cACb4B,EAAa3B,wBACb2B,EAAa1B,gBACb0B,EAAazB,eACb,EAAK7yB,MAAM8yB,QAPTO,EAR4B,EAQ5BA,qBAAsBb,EARM,EAQNA,QAUxB2B,EAAgBpC,GAAaS,EAAS,CAAC,aAAc,OAAQ,UAAW,WACxE4B,EAAa,eAAO,EAAKp0B,MAAMk0B,YAE/BA,EAAa,CACbjB,WAAYqB,EAAa3B,wBAAwBl6B,KAAO27B,EAAcnB,WAAakB,EAAclB,WACjGD,KAAMsB,EAAa5B,cAAcj6B,KAAO27B,EAAcpB,KAAOmB,EAAcnB,KAC3EE,QAASoB,EAAa1B,gBAAgBn6B,KAAO27B,EAAclB,QAAUiB,EAAcjB,QACnFE,OAAQkB,EAAazB,eAAep6B,KAAO27B,EAAchB,OAASe,EAAcf,QAGpF,EAAK9pB,SAAL,2BAAkBgrB,GAAlB,IAAgCjB,uBAAsBb,UAAS0B,iBA/JjD,EAkKlBK,uBAAyB,SAAC1uB,EAAOgrB,GAC7B,GAAGltB,GAAQM,QAAS,CAGhB,IAAIuwB,EAAa,EAAKj9B,MAAMmP,aAAe,IACvCvC,EAAgBR,GAAQM,QAAQjE,MAAMoE,aACtCC,EAAuB,GAARwB,EAEN,OAAVA,IAAmBxB,EAAeF,EAAgB,IAAME,EAAeF,EAAgBqwB,EAAa,KACnGlwB,YAAW,kBAAMX,GAAQM,QAAQM,aAAasB,EAAO,WAAU,IAGnElC,GAAQM,QAAQC,gBAAgB,GAGpC,EAAKoF,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B0zB,cAAe,EAAK1zB,MAAM0zB,gBAAkB7C,EAAO,KAAOA,MA9KxF,IAAIiC,EAAS,IAAI2B,UAAgB,MACjC3B,EAAO4B,YAAc,IAAID,wBACzB3B,EAAO6B,SAAS,YAChB7B,EAAO6B,SAAS,QAChB7B,EAAO6B,SAAS,cAChB7B,EAAO6B,SAAS,YAEhB,IACOp9B,EAAMq8B,YAAcr8B,EAAMq8B,WAAW39B,QACpC68B,EAAOmB,aAAa18B,EAAMq8B,YAEhC,MAAM56B,GACJ+2B,QAAQC,IAAIh3B,GACZ+2B,QAAQC,IAAIz4B,EAAMq8B,YAhBR,MAmB0B,EAAKr8B,MAAMq8B,YAAc,EAAKr8B,MAAMq8B,WAAW39B,OACnFs8B,GACIh7B,EAAMq8B,WAAY,GAAI,IAAIv+B,IAAO,IAAIA,IAAO,IAAIA,IAAO,IAAIA,IAAOy9B,GAEtE,CAACO,qBAAsB,GAAIb,QAAS,IAJlCa,EAnBQ,EAmBRA,qBAAsBb,EAnBd,EAmBcA,QAMxB0B,EAAanC,GAAaS,EAAS,CAAC,aAAc,OAAQ,UAAW,WAzB3D,OA2Bd,EAAKxyB,MAAL,aACI8yB,SACAiB,eAAgB,KAChBC,gBAAgB,EAChBX,uBACAb,UACA0B,cACGT,IAlCO,E,qDAoLT,IAAD,SAaA5F,KAAK7tB,MAXLyyB,EAFA,EAEAA,YACAsB,EAHA,EAGAA,eACAC,EAJA,EAIAA,eACAtB,EALA,EAKAA,cACAC,EANA,EAMAA,wBACAC,EAPA,EAOAA,gBACAC,EARA,EAQAA,eACAa,EATA,EASAA,cACAQ,EAVA,EAUAA,WACAb,EAXA,EAWAA,qBACAb,EAZA,EAYAA,QAZA,EAe8B3E,KAAKt2B,MAA/BC,EAfJ,EAeIA,QAASkP,EAfb,EAeaA,aAEjB,OACI,oCACI,kBAACgV,EAAA,EAAD,CAAOnjB,UAAWf,EAAQo9B,gBAAiBh8B,MAAOo7B,EAAiB,GAAK,CAACxzB,QAAS,SAC9E,kBAACuE,EAAA,EAAD,CAAM1M,WAAS,GACX,kBAAC0M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IACX,kBAACyJ,EAAA,EAAD,CAAYjJ,MAAO,CAAC4H,QAAS,iBAA7B,iGAIA,kBAACiK,EAAA,EAAD,CACIC,UAAW,kBAACC,GAAA,EAAD,CAAO/R,MAAO,CAAC/B,SAAU,UACpC2B,QAASq1B,KAAKwG,kBACd97B,UAAWf,EAAQqT,WAHvB,UASJ,kBAAC9F,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGQ,MAAO,CAAC+M,UAAW,OAAQmF,UAAWpE,EAAe,IAAK5E,QAAS,OAAQ5K,gBAAiB,mBACtG,kBAAC6T,EAAA,EAAD,CACIC,WAAS,EACT3R,KAAK,cACLF,SAAU00B,KAAK9kB,wBACfkC,YAAY,SACZhC,MAAOwpB,EACPvnB,WAAY,CACR1T,QAAS,CACLgC,KAAMhC,EAAQ2T,WAElBC,eACI,kBAAC,IAAMtE,SAAP,KACI,kBAACuE,EAAA,EAAD,CAAgBC,SAAS,SACrB,kBAACC,EAAA,EAAD,CAAQ3S,MAAO,CAACvC,MAAOC,IAAOC,cAK9C8O,QAAQ,aAGhB,kBAACqG,GAAA,EAAD,CACI/T,QAAS0hB,MAAMoN,KAAKyN,EAAWhB,SAASM,OACxC/7B,gBAAiBm7B,EACjBl7B,YAAa,kBAAM,EAAKyS,uBAAuB,oBAC/CvS,eAAgB,kBAChBC,oBAAqBg2B,KAAKh2B,oBAC1BC,iBAAiB,WAGrB,kBAAC4T,GAAA,EAAD,CACI/T,QAAS0hB,MAAMoN,KAAKyN,EAAWlB,MAAMQ,MAAK,SAACrF,EAAGxP,GAAJ,OAAUwP,EAAIxP,EAAI,GAAK,KACjElnB,gBAAiBi7B,EACjBh7B,YAAa,kBAAM,EAAKyS,uBAAuB,kBAC/CvS,eAAgB,gBAChBC,oBAAqBg2B,KAAKh2B,oBAC1BC,iBAAiB,SAGrB,kBAAC4T,GAAA,EAAD,CACI/T,QAAS0hB,MAAMoN,KAAKyN,EAAWjB,YAAYO,OAC3C/7B,gBAAiBk7B,EACjBj7B,YAAa,kBAAM,EAAKyS,uBAAuB,4BAC/CvS,eAAgB,0BAChBC,oBAAqBg2B,KAAKh2B,oBAC1BC,iBAAiB,oBAGrB,kBAAC4T,GAAA,EAAD,CACI/T,QAAS0hB,MAAMoN,KAAKyN,EAAWd,QAAQI,OACvC/7B,gBAAiBo7B,EACjBn7B,YAAa,kBAAM,EAAKyS,uBAAuB,mBAC/CvS,eAAgB,iBAChBC,oBAAqBg2B,KAAKh2B,oBAC1BC,iBAAiB,kBAGrB,kBAACiN,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GAAIG,UAAWf,EAAQuU,gBAClC,kBAACtB,EAAA,EAAD,CAAQpF,QAAQ,WAAW7M,QAASq1B,KAAKlkB,kBAAmBpR,UAAWf,EAAQ0W,aAA/E,mBAMR,kBAACnJ,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGQ,MAAO,CAACiK,WAAY,SAEtC,kBAACkC,EAAA,EAAD,CAAM1M,WAAS,GACX,kBAAC0M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GACX,kBAACyJ,EAAA,EAAD,CAAYtJ,UAAWf,EAAQkL,SAA/B,WACa8vB,EAAQv8B,OADrB,+BAKJ,kBAAC8O,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGC,WAAS,EAACM,QAAQ,aAAaL,WAAW,UACxD,kBAACuJ,EAAA,EAAD,CAAYwD,QAAQ,UAAUzM,MAAO,CAACvC,MAAOC,IAAOC,QAAS+O,aAAc,UAA3E,kBAMR,kBAAC,KAAD,CACIC,IAAK5B,GACL6B,SAAU6tB,EACV5tB,UAAW4tB,EAAqBp9B,OAChCc,OAAQ2P,EAAe,IACvBjE,MAAM,OACNiD,kBAAmB,GACnB9M,MAAO,CAAC+M,UAAW,UACnBC,SAAU,SAAC5P,GAAD,OAAO09B,IAAkBL,EAAqBr9B,GAAG66B,KAAgD,GAAzCwC,EAAqBr9B,GAAGw8B,QAAQv8B,OAAc,GAAK,EAAI,GAAK,MAG7H,gBAAG4P,EAAH,EAAGA,MAAOjN,EAAV,EAAUA,MAAV,OACG,yBAAKA,MAAOA,GACR,kBAACmM,EAAA,EAAD,CACI1M,WAAS,EACTE,UAAWf,EAAQ4K,aACnB5J,QAAS,kBAAM,EAAK+7B,uBAAuB1uB,EAAOwtB,EAAqBxtB,GAAOgrB,QAE9E,kBAAC9rB,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGC,WAAS,EAACC,WAAW,UAClCo7B,IAAkBL,EAAqBxtB,GAAOgrB,KAC3C,kBAAC/qB,GAAA,EAAD,CAAYvN,UAAWf,EAAQwL,kBAC/B,kBAAC+C,EAAA,EAAD,CAAcxN,UAAWf,EAAQwL,kBAErC,0BAAMzK,UAAWf,EAAQ6K,2BAA4BgxB,EAAqBxtB,GAAOgrB,OAGrF,kBAAC9rB,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IAIf,kBAAC8M,EAAA,EAAD,CAAStQ,MAAK,UAAKy+B,EAAqBxtB,GAAO2sB,QAAQv8B,OAAzC,sDACV,kBAAC8O,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQsL,YAAazK,WAAS,EAACC,WAAW,SAASK,QAAQ,UACnF06B,EAAqBxtB,GAAO2sB,QAAQv8B,UAM7Co9B,EAAqBxtB,GAAOgrB,OAAS6C,EACrC,kBAAC3uB,EAAA,EAAD,CAAM1M,WAAS,EAACE,UAAWf,EAAQoL,kBAC/B,kBAACmC,EAAA,EAAD,CAAM5M,MAAI,EAACE,WAAS,EAACC,WAAW,UAC5B,kBAACyM,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,GAAf,KAEA,kBAAC2M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQq9B,kBAArC,wBAIA,kBAAC9vB,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQq9B,kBAArC,aAKHxB,EAAqBxtB,GAAO2sB,QAAQz5B,KAAI,SAACC,EAAGhD,GAAJ,OACrC,kBAAC+O,EAAA,EAAD,CACI5M,MAAI,EACJC,GAAI,GACJa,IAAKD,EAAE87B,KACPv8B,UAAWf,EAAQmL,aACnBtK,WAAS,EACTC,WAAW,SACXE,QAAS,kBAAM,EAAKq7B,mBAAmB76B,KAEvC,kBAAC+L,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,IAEf,kBAAC2M,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQu9B,YAAa/7B,EAAE87B,MAEpD,kBAAC5vB,EAAA,EAAD,CAAStQ,MAAOoE,EAAEg8B,SAAU7vB,WAAY,KACpC,kBAACJ,EAAA,EAAD,CAAM5M,MAAI,EAACC,GAAI,EAAGG,UAAWf,EAAQu9B,YAAa/7B,EAAEg8B,gBAKlE,UAS1B,yBAAK/oB,GAAG,kBAAkB1T,UAAWf,EAAQy9B,UAEzC,kBAACvZ,EAAA,EAAD,CAAOnjB,UAAWf,EAAQ09B,uBACtB,kBAACzqB,EAAA,EAAD,CACIC,UAAW,kBAACa,EAAA,EAAD,MACXhT,UAAWf,EAAQ29B,iBACnB38B,QAAS,kBAAM,EAAK8Q,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8Bg0B,gBAAgB,OAHjE,mBASHD,GACG,oCACA,kBAACrjB,GAAA,EAAD,CAAOjY,KAAK,QAAQF,UAAWf,EAAQ49B,YACnC,kBAACzkB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBAA9B,WAGA,kBAACxkB,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBACzBtB,EAAee,OAIxB,kBAAClkB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBAA9B,aAGA,kBAACxkB,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBACzBtB,EAAeiB,WAKpBjB,EAAeuB,YACf,kBAAC1kB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBAA9B,eAGA,kBAACxkB,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBACzBtB,EAAeuB,WAAWz2B,MAAM,EAAE,MAM3Ck1B,EAAewB,UACf,kBAAC3kB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBAA9B,aAGA,kBAACxkB,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBACzBtB,EAAewB,SAAS12B,MAAM,EAAE,MAMzCk1B,EAAed,YACf,kBAACriB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBAA9B,oBAGA,kBAACxkB,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBACzBtB,EAAed,aAMxBc,EAAeyB,WACf,kBAAC5kB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBAA9B,SAGA,kBAACxkB,GAAA,EAAD,CAAWtY,UAAWf,EAAQ69B,gBACzBtB,EAAeyB,cAOhC,yBAAKj9B,UAAWf,EAAQi+B,aACpB,kBAAC1zB,GAAA,EAAD,CACIjJ,UAAW+kB,KACXC,GAAE,2BAAsBiW,EAAee,MACvC9yB,OAAO,UAHX,oC,GAhdHoM,aAgedrO,gBAhqBS,SAACC,EAAOC,GAAR,MAAsB,CAC1C2zB,WAAY5zB,EAAM4zB,WAClB8B,mBAAoB11B,EAAM01B,mBAC1BhvB,aAAc1G,EAAM0G,gBA6pBgB7G,GAAzBE,CAA6C7J,aAjpB7C,SAAAC,GAAK,MAAK,CACrB8+B,SAAU,CACNnzB,QAAQ,OACRxB,SAAU,QACVpJ,gBAAiB,cACjBb,MAPc,QAQd4Y,aAAc,MACd5X,UAAW,MACXylB,eAAgB,YAChB6Y,UAAW,mBACXr+B,UAAW,OACXgU,SAAU,QACVsQ,KAAM,EACNnK,IAAK,KAGT2jB,WAAY,CACR/+B,MAnBc,QAoBdu/B,WAAYtD,GACZ97B,OAAQ,oBAGZ6+B,eAAgB,CACZh/B,MAzBc,QA0Bdu/B,WAAYtD,GACZuD,YAAa,QAGjBJ,YAAa,CACT3zB,QAAS,OACTjL,SAAU,QAGd+9B,gBAAiB,CACbtpB,SAAU,QACVmG,IAAK,IACLhD,OAAQ,GACRmN,KAAM,EACNnZ,MAAO,OACP1L,OAAQ,OACRkK,OAAQ,KACR/J,gBAAiB,iBACjB4lB,eAAgB,aAGpBjS,UAAW,CACP+D,MAAO,QACPxX,OAAQ,UACRf,MAAOC,IAAOC,QACd+X,cAAe,OACfzX,SAAU,QAGdsU,UAAW,CACPkD,OAAO,aAAD,OAAe/X,IAAOC,UAGhC2+B,sBAAuB,CACnBh+B,gBAAiBZ,IAAO8J,eACxB/I,UAAW,2BAGf89B,iBAAkB,CACd7mB,cAAe,OACfjY,MAAOC,IAAOC,QACdM,SAAU,OACViL,QAAS,YAGboM,YAAa,CACTI,cAAe,OACf7L,MAAO,QACP1L,OAAQ,OACRV,MAAOF,EAAMsK,QAAQlK,QAAQmK,KAC7B6N,YAAapY,EAAMsK,QAAQlK,QAAQmK,KACnCpJ,UAAW,QAGfw+B,WAAY,CACR5+B,gBAAiB,oBACjBH,OAAQ,OACRF,SAAU,OACV2J,QAAS,OACTlI,WAAY,SACZy9B,eAAgB,UAGpB3zB,aAAc,CACV,UAAW,CACPlL,gBAAiBZ,IAAOa,YAG5BC,OAAQ,UACRL,OAAQ,OACRM,UAAW,0BACXH,gBAAiB,kBAGrB4L,YAAa,CACTzM,MAAOC,IAAOC,QACdwM,WAAY,QAGhBH,iBAAkB,CACd1L,gBAAiB,iBACjB2L,WAAY,OAGhBF,aAAc,CACV5L,OAAQ,OACRL,UAAW,OACXG,SAAU,OACVO,OAAQ,UACR,UAAW,CACPF,gBAAiBZ,IAAOa,aAIhC49B,WAAY,CACRtyB,MAAO,OACPH,WAAY,SACZC,SAAU,SACVC,aAAc,YAGlBE,QAAS,CACLhM,UAAW,OACXoL,QAAS,UACTzL,MAAOC,IAAOC,QACdM,SAAU,OACVS,UAAW,MACXJ,gBAAiB,kBAGrB29B,iBAAkB,CACdn+B,UAAW,OACXG,SAAU,MACVR,MAAOC,IAAOC,YAwgBsCL,CAAmBy9B,KCrpBzEz2B,GAAa,SAACC,GAoChB,MAnCgB,CACZ,CAACC,IAAYC,YAAa,CACtBC,GAAIC,IAAiBF,WACrBV,QAASS,IAAYC,YAEzB,CAACD,IAAYI,mBAAoB,CAC7BF,GAAIC,IAAiBF,WACrBV,QAASS,IAAYI,mBAEzB,CAACJ,IAAYH,YAAa,CACtBK,GAAIC,IAAiBN,WACrBN,QAASS,IAAYH,YAEzB,CAACG,IAAYK,WAAY,CACrBH,GAAIC,IAAiBG,UACrBf,QAASS,IAAYK,WAEzB,CAACL,IAAYJ,cAAe,CACxBM,GAAIC,IAAiBP,aACrBL,QAASS,IAAYJ,cAEzB,CAACI,IAAYP,SAAU,CACnBS,GAAIC,IAAiBG,UACrBf,QAASS,IAAYP,SAEzB,CAACO,IAAYO,YAAa,CACtBL,GAAIC,IAAiBG,UACrBf,QAASS,IAAYO,YAEzB,CAACP,IAAYN,QAAS,CAClBQ,GAAIC,IAAiBG,UACrBf,QAASS,IAAYN,SAIdK,IAoBb0C,GAAqB,CACvBod,oBACA+Y,qBACAC,0BACA7jB,+BACAF,iBACAkgB,0BACA8D,wBACAC,iCACAC,sBACA9jB,4CAyBE+jB,GAAe,CACjBh4B,UAAW,GACXN,OAAQ,KACRrI,OAAQ,EACRC,OAAQ,EACRkI,IAAK,IAAI6J,KACT5J,IAAK,IAAI4J,KACT1J,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACN2R,gBAAiB,IAGfwmB,G,4MACFniB,WAAapc,IAAMyO,Y,EACnB8M,gBAAkBvb,IAAMyO,Y,EAExBxG,MAAQ,CACJu2B,aAAc,GACd/T,QAAS,EACTgU,YAAY,EACZC,QAAQ,EACRn3B,aAAa,EACbE,4BAA4B,EAC5Bk3B,mBAAmB,EACnBC,SAAUN,I,EAiCd5hB,qBAAuB,WACnBmiB,SAAShiC,MAAQF,KAASC,QAAQC,MAClCgiC,SAAS/hC,YAAcH,KAASC,QAAQE,a,EAU5CgiC,aAAe,SAAC5wB,GACZ,EAAKqD,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B22B,SAAS,2BAAK,EAAK32B,MAAM22B,UAAjB,IAA2B,CAAC1wB,EAAMjE,OAAO3I,MAAO4M,EAAMjE,OAAOiH,Y,EAGvGiQ,mBAAqB,SAACjT,GAClB,EAAKqD,SAAL,2BACO,EAAKtJ,OADZ,IAEI22B,SAAS,2BAAK,EAAK32B,MAAM22B,UAAjB,IAA2B,CAAC1wB,EAAMjE,OAAO3I,MAAO4M,EAAMjE,OAAOiH,Y,EAI7E6tB,sBAAwB,SAAC/8B,GACrB,GAAGA,EAAK,CACJ,IAAI43B,EAAU,IAAIjqB,KAClBiqB,EAAQC,YAAY73B,EAAK+2B,cAAe/2B,EAAK0wB,WAAY1wB,EAAKk3B,WAC9D,EAAK3nB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B22B,SAAS,2BAAK,EAAK32B,MAAM22B,UAAjB,IAA2B94B,IAAI8zB,S,EAI7EoF,oBAAsB,SAACh9B,GACnB,GAAGA,EAAK,CACJ,IAAI43B,EAAU,IAAIjqB,KAClBiqB,EAAQC,YAAY73B,EAAK+2B,cAAe/2B,EAAK0wB,WAAY1wB,EAAKk3B,WAC9D,EAAK3nB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B22B,SAAS,2BAAK,EAAK32B,MAAM22B,UAAjB,IAA2B74B,IAAI6zB,S,EAI7E1V,YAAc,WAAO,IAAD,EAC8D,EAAKjc,MAAM22B,SAAjFjhC,EADQ,EACRA,OAAQC,EADA,EACAA,OAAQkI,EADR,EACQA,IAAKC,EADb,EACaA,IAAKE,EADlB,EACkBA,KAAMC,EADxB,EACwBA,KAAMC,EAD9B,EAC8BA,KAAMC,EADpC,EACoCA,KAAM2R,EAD1C,EAC0CA,gBAEtD2F,EAAUvY,GAAW4S,GAerB4F,EAAU,CACVP,WAfavX,EAAc,CAC3BlI,SACAC,SACAkI,IAAK+yB,GAAkB/yB,GACvBC,IAAK8yB,GAAkB9yB,GACvBE,OACAC,OACAC,OACAC,OACAJ,OAAQ,EAAKiC,MAAM22B,SAAS54B,QAAU,EAAKiC,MAAM22B,SAAS54B,OAAOkL,MACjE5K,UAAW,EAAK2B,MAAM22B,SAAS54B,QAAU,EAAKiC,MAAM22B,SAASt4B,UAC7DD,OAAQqX,EAAQnY,KAKhBX,QAAS8Y,EAAQ9Y,QACjBiZ,SAAU,EAAK5V,MAAM22B,SAAS54B,QAAU,EAAKiC,MAAM22B,SAAS54B,OAAOlI,MAGvE,EAAK0B,MAAM6a,2BAA2BsD,I,EAG1CJ,wBAA0B,SAACrP,EAAO4mB,GAC9B,EAAKt1B,MAAM6+B,kBAAkBvJ,I,EAGjCmK,aAAe,SAACj5B,GACZ,GAAGA,EAAQ,CACP,IAAIuB,GAAevB,EAAOlI,KAAK0J,UAC3BC,EAAgE,cAAnCzB,EAAOlI,KAAK4J,mBAEzCw3B,EAAgB9F,GAAqBpzB,EAAOlI,KAAKiJ,UACrDm4B,EAAcC,QAAQD,EAAchG,UAAY,GAEhD,IAAIpzB,EAAME,EAAOlI,KAAK8I,sBAAwB/C,IAAoBQ,mBAC9D,EAAK4D,MAAM22B,SAAS94B,IAAMszB,GAAqBpzB,EAAOlI,KAAK+I,UAC3Dd,EAAMC,EAAOlI,KAAK8I,sBAAwB/C,IAAoBQ,mBAC9D,EAAK4D,MAAM22B,SAAS74B,IACpB0B,EAA6By3B,EAC7B9F,GAAqBpzB,EAAOlI,KAAK+I,UAEjCkoB,EAAS/nB,KAAKC,MAA4B,IAAtBjB,EAAOlI,KAAKoJ,SAAiB,IACjD4nB,EAAS9nB,KAAKG,KAA2B,IAAtBnB,EAAOlI,KAAKsJ,SAAiB,IAChDonB,EAASxnB,KAAKC,MAA4B,IAAtBjB,EAAOlI,KAAKuJ,SAAiB,IACjDknB,EAASvnB,KAAKG,KAA2B,IAAtBnB,EAAOlI,KAAKwJ,SAAiB,IAEhDrB,EAAOwB,EAA6BsnB,EAAS,EAAK9mB,MAAM22B,SAAS34B,KACjEC,EAAOuB,EAA6BqnB,EAAS,EAAK7mB,MAAM22B,SAAS14B,KACjEC,EAAOsB,EAA6B+mB,EAAS,EAAKvmB,MAAM22B,SAASz4B,KACjEC,EAAOqB,EAA6B8mB,EAAS,EAAKtmB,MAAM22B,SAASx4B,KACjEzI,EAAS8J,EAA6BzB,EAAOlI,KAAK6J,WAAa,EAC/DC,IAAWvK,YAAYW,IAAIgI,EAAOlI,KAAKC,aACvC6J,IAAWrK,YAAYS,IAAIgI,EAAOlI,KAAKC,YADc,EAErD,EAAKkK,MAAM22B,SAASjhC,OAEpBC,EAAS6J,EAA6BzB,EAAOlI,KAAK0J,WAAa,EAC/DI,IAAWvK,YAAYW,IAAIgI,EAAOlI,KAAKC,cAAgB6J,IAAWxK,aAAa,GAAKwK,IAAWxK,aAAa,IAAM,GAAGyK,QAAQ,GAC7HD,IAAWrK,YAAYS,IAAIgI,EAAOlI,KAAKC,aAAgB6J,IAAWzK,aAAa,GAAKyK,IAAWzK,aAAa,IAAM,EAClH,EAAK8K,MAAM22B,SAAShhC,OAErB6J,GACC,EAAK2U,WAAWlQ,QAAQ1M,MAAM6c,KAAKC,KAAK,CACpCrS,OAAQ,EAAE1D,WAAWJ,GAAQI,WAAWH,IAAS,GAAIG,WAAWN,GAAQM,WAAWL,IAAS,GAC5FqW,KAAM,GACP,CACCC,YAAa,KACbC,YAAa,KAIrB,IAAInW,EAAYN,EAAOlI,KAAKC,WAE5B,EAAKwT,SAAL,2BAAkB,EAAKtJ,OAAvB,IACIV,cACAE,6BACAm3B,SAAS,2BAAK,EAAK32B,MAAM22B,UAAjB,IACJ54B,SACAF,MACAC,MACAE,OACAC,OACAC,OACAC,OACAzI,SACAC,SACA0I,YACAyR,gBAAiB,aAIzB,EAAKxG,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B22B,SAAS,2BAAK,EAAK32B,MAAM22B,UAAjB,IAA2B54B,SAAQM,UAAW,S,EAI5F84B,iBAAmB,WACf,EAAK7tB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8Bw2B,YAAY,M,EAG9CnjB,gBAAkB,WACd,EAAK/J,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8Bw2B,YAAY,M,EAG9CY,wBAA0B,WACtB,EAAK9tB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B02B,mBAAoB,EAAK12B,MAAM02B,sB,EAGjEW,aAAe,WACX,EAAK/tB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8By2B,QAAS,EAAKz2B,MAAMy2B,W,EAGtD/hB,8BAAgC,SAACC,GAG7B,IAFA,IAAIC,EAAQD,EAAOE,KAEbD,GAAS,KAAKA,GAAS,IAC7B,KAAOA,EAAQ,KAAKA,GAAS,IAI7B,IAFA,IAAIrB,EAAQoB,EAAOG,KAEbvB,GAAS,KAAKA,GAAS,IAC7B,KAAMA,EAAQ,KAAKA,GAAS,IAE5B,IAAIwB,EAAiB,CACjB/W,KAAM2W,EAAOK,KAAKpV,QAAQ,GAC1B3B,KAAM0W,EAAOM,KAAKrV,QAAQ,GAC1B1B,KAAM0W,EAAMhV,QAAQ,GACpBzB,KAAMoV,EAAM3T,QAAQ,IAGxB,EAAK0J,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B22B,SAAS,2BAAK,EAAK32B,MAAM22B,UAAa5hB,O,EAGxEuiB,cAAgB,WACZ,EAAKhuB,SAAL,2BAAkB,EAAKtJ,OAAvB,IAA8B22B,SAAUN,O,6LA7MxCO,SAAShiC,MAAQF,KAASI,cAAcF,MACxCgiC,SAAS/hC,YAAcH,KAASI,cAAcD,YAExC0iC,EAAkB,CACpB,oBACA,SACA,gBACA,kBACA,QACA,W,SAGsBC,uBAAY,CAClC,iCACA,sBACA,4BACA,sCACA,yCACA,gBACD,CAACC,QAAS,S,OAPTC,E,OASA7jB,EAAc0jB,EAAgB9yB,QAAO,SAACkzB,EAAaC,EAAcC,GAEjE,OADAF,EAAYC,GAAgBF,EAAcG,GACnCF,IACR,IAEH9J,KAAKvkB,SAAL,2BAAkBukB,KAAK7tB,OAAvB,IAA8B6T,iB,+IAQfV,GACZ0a,KAAKt2B,MAAMugC,iBACVjK,KAAKt2B,MAAM2+B,sBACXrI,KAAKvkB,SAAL,2BAAkBukB,KAAK7tB,OAAvB,IAA8Bw2B,YAAY,Q,+BA2KzC,IAAD,OACIh/B,EAAYq2B,KAAKt2B,MAAjBC,QAER,OACI,yBAAKe,UAAWf,EAAQugC,YACpB,kBAAC,GAAD,MAEElK,KAAK7tB,MAAM6T,aACT,yBAAKtb,UAAS,UAAmC,IAA9Bs1B,KAAKt2B,MAAM8d,eAAuB,GAAK7d,EAAQwgC,cAC9D,kBAAC,GAAD,CACI7jB,WAAY0Z,KAAK1Z,WACjBO,8BAA+BmZ,KAAKnZ,8BACpCb,YAAaga,KAAK7tB,MAAM6T,YACxB8iB,SAAU9I,KAAK7tB,MAAM22B,SACrBla,iBAAkBoR,KAAKt2B,MAAMklB,iBAC7Bia,kBAAmB7I,KAAK7tB,MAAM02B,kBAC9BuB,qBAAsBpK,KAAKoK,qBAC3B1yB,IAAKsoB,KAAKva,mBAKtB,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO4kB,OAAK,EAACC,KAAK,iBAAiBr/B,UAAWs/B,KAC9C,kBAAC,IAAD,CACID,KAAK,wBACL9tB,OAAQ,SAAC9S,GAAD,OACJ,kBAAC,GAAD,iBACIA,EADJ,CAEA8gC,gBAAiB,EAAKA,gBACtBhB,aAAc,EAAKA,aACnBR,aAAc,EAAKA,aACnB3d,mBAAoB,EAAKA,mBACzB4d,sBAAuB,EAAKA,sBAC5BC,oBAAqB,EAAKA,oBAC1BN,OAAQ,EAAKz2B,MAAMy2B,OACnBxa,YAAa,EAAKA,YAClB+a,aAAc,EAAKA,cACf,EAAKh3B,MAAM22B,SAXf,CAYAr3B,YAAa,EAAKU,MAAMV,YACxBE,2BAA4B,EAAKQ,MAAMR,2BACvCg3B,WAAY,EAAKx2B,MAAMw2B,WACvBW,iBAAkB,EAAKA,iBACvB9jB,gBAAiB,EAAKA,gBACtBikB,cAAe,EAAKA,cACpBF,wBAAyB,EAAKA,wBAC9BV,kBAAmB,EAAK12B,MAAM02B,kBAC9BviB,WAAY,EAAKA,WACjBb,gBAAiB,EAAKA,gBACtBgC,wBAAyB,EAAKA,wBAC9BD,eAAgB,EAAK9d,MAAM8d,qBAKnC,kBAAC,IAAD,CACI8iB,KAAK,yBACL9tB,OAAQ,SAAC9S,GAAD,OACJ,kBAAC,GAAD,CAAgB8b,gBAAiB,kBAAM,EAAKiC,wBAAwB,KAAM,UAKtF,yBAAK/c,UAAyC,IAA9Bs1B,KAAKt2B,MAAM8d,eAAuB7d,EAAQwgC,YAAcxgC,EAAQg/B,YAC5E,kBAAC,GAAD,Y,GAhSQpoB,aAuSbrO,uBAzWS,SAACC,EAAOC,GAAR,MAAsB,CAC1CgT,KAAMjT,EAAMiT,KACZqlB,WAAYt4B,EAAMs4B,WAClBC,kBAAmBv4B,EAAMu4B,kBACzBC,KAAMx4B,EAAMw4B,KACZh8B,OAAQwD,EAAMxD,OACd3G,KAAMmK,EAAMnK,KACZ4iC,eAAgBz4B,EAAMy4B,eACtBhc,iBAAkBzc,EAAMyc,iBACxBmX,WAAY5zB,EAAM4zB,WAClBkE,eAAgB93B,EAAM83B,eACtBnb,SAAU3c,EAAM2c,SAChB5nB,QAASiL,EAAMjL,QACfsgB,eAAgBrV,EAAMqV,eACtB+H,YAAapd,EAAMod,eA2ViBvd,GAAzBE,CAA6C7J,aA3U7C,SAACC,GAAD,MAAY,CACvB6hC,YAAa,CACTx3B,QAAS,QAGbk4B,WAAY,CACRxhC,gBAAiBZ,IAAO8J,gBAG5Bo2B,WAAY,CACRh2B,QAAS,eACTqC,WAAY,QACZJ,MAAO,qBACP/L,UAAW,QAGfqhC,WAAY,CACRrpB,UAAW,QACXgqB,WAAW,OAAD,OCvHH,quDDuHG,SAyT0CxiC,CAAmBogC","file":"static/js/15.83e542c9.chunk.js","sourcesContent":["const metaTags = {\r\n    default: {\r\n        title: 'Simons Collaborative Marine Ocean Atlas',\r\n        description: \"Simons Collaborative Marine Atlas Project is an open-source data portal interconnecting data sets across Oceanography disciplines. It enables scientists and the public to dive into the vast and often underutilized ocean datasets to retrieve custom subsets of data.\",\r\n    },\r\n\r\n    visualization: {\r\n        title: 'CMAP Data Visualization',\r\n        description: 'Generate scatter plots, heatmaps, cruise routes, and more using oceanographic data from from CMAP datasets.'\r\n    },\r\n\r\n    catalog: {\r\n        title: 'CMAP Catalog',\r\n        description: 'Search for oceanographic datasets in the CMAP database using keywords, or temporal or spatial coverage.'\r\n    },\r\n\r\n    dataSubmission: {\r\n        title: 'CMAP Data Submission',\r\n        description: 'Validate and submit your dataset. Track the progress of your previous submissions.'\r\n    },\r\n\r\n    community: {\r\n        title: 'CMAP Community',\r\n        description: 'Join the CMAP team on slack, follow us on github, or download the CMAP software package for Python, R, Julia, or MATLAB.'\r\n    }\r\n}\r\n\r\nexport default metaTags;","\r\nconst darwinDepths = [\r\n    5,\r\n    15,\r\n    25,\r\n    35,\r\n    45,\r\n    55,\r\n    65,\r\n    75.005,\r\n    85.025,\r\n    95.095,\r\n    105.31,\r\n    115.87,\r\n    127.15,\r\n    139.74,\r\n    154.47,\r\n    172.4,\r\n    194.735,\r\n    222.71,\r\n    257.47,\r\n    299.93,\r\n    350.68,\r\n    409.93,\r\n    477.47,\r\n    552.71,\r\n    634.735,\r\n    722.4,\r\n    814.47,\r\n    909.74,\r\n    1007.155,\r\n    1105.905,\r\n    1205.535,\r\n    1306.205,\r\n    1409.15,\r\n    1517.095,\r\n    1634.175,\r\n    1765.135,\r\n    1914.15,\r\n    2084.035,\r\n    2276.225,\r\n    2491.25,\r\n    2729.25,\r\n    2990.25,\r\n    3274.25,\r\n    3581.25,\r\n    3911.25,\r\n    4264.25,\r\n    4640.25,\r\n    5039.25,\r\n    5461.25,\r\n    5906.25\r\n]\r\n\r\nconst piscesDepths = [\r\n    0.494024991989,\r\n    1.54137504101,\r\n    2.64566898346,\r\n    3.81949496269,\r\n    5.07822418213,\r\n    6.44061422348,\r\n    7.92956018448,\r\n    9.5729970932,\r\n    11.404999733,\r\n    13.4671401978,\r\n    15.8100700378,\r\n    18.4955596924,\r\n    21.5988197327,\r\n    25.2114105225,\r\n    29.4447307587,\r\n    34.4341506958,\r\n    40.3440513611,\r\n    47.3736915588,\r\n    55.764289856,\r\n    65.8072662354,\r\n    77.8538513184,\r\n    92.3260726929,\r\n    109.729301453,\r\n    130.666000366,\r\n    155.850692749,\r\n    186.125595093,\r\n    222.475204468,\r\n    266.040313721,\r\n    318.127410889,\r\n    380.213012695,\r\n    453.937713623,\r\n    541.088928223,\r\n    643.566772461,\r\n    763.333129883,\r\n    902.339294434,\r\n    1062.43994141,\r\n    1245.29101562,\r\n    1452.25097656,\r\n    1684.28405762,\r\n    1941.89294434,\r\n    2225.07788086,\r\n    2533.3359375,\r\n    2865.70288086,\r\n    3220.82006836,\r\n    3597.03198242,\r\n    3992.48388672,\r\n    4405.22412109,\r\n    4833.29101562,\r\n    5274.78417969,\r\n    5727.91699219\r\n]\r\n\r\nconst _piscesTables = [\r\n    'tblPisces_NRT',\r\n    'tblPisces_NRT_Calendar'\r\n]\r\n\r\nconst _darwinTable = [\r\n    'tblDarwin_Chl_Climatology',\r\n    'tblDarwin_Ecosystem',\r\n    'tblDarwin_Nutrient',\r\n    'tblDarwin_Nutrient_Climatology',\r\n    'tblDarwin_Ocean_Color',\r\n    'tblDarwin_Phytoplankton',\r\n    'tblDarwin_Plankton_Climatology'\r\n]\r\n\r\nconst piscesTable = new Set(_piscesTables);\r\nconst darwinTable = new Set(_darwinTable);\r\n\r\nconst exports = {\r\n    count: (field, depth1, depth2) => {\r\n        const { Table_Name: table } = field.data;\r\n        var count = 0;\r\n    \r\n        if(piscesTable.has(table)) {\r\n            for(let i = 0; i < piscesDepths.length; i++){\r\n                if(piscesDepths[i] > depth2) break;\r\n                if(piscesDepths[i] > depth1) count ++; \r\n            }\r\n        } else if (darwinTable.has(table)) {\r\n            for(let i = 0; i < darwinDepths.length; i++){\r\n                if(darwinDepths[i] > depth2) break;\r\n                if(darwinDepths[i] > depth1) count ++; \r\n            }\r\n        } else {}\r\n        return count;\r\n    },\r\n\r\n    piscesTable,\r\n    darwinTable,\r\n    piscesDepths,\r\n    darwinDepths\r\n}\r\n\r\nexport default exports;","// Expandable list of checkboxes used in search components\r\n\r\nimport React from 'react';\r\n\r\nimport { withStyles, Grid, FormGroup, Checkbox, Link, FormControlLabel } from '@material-ui/core';\r\nimport { ExpandMore, ChevronRight } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    menuOpenIcon:{\r\n        color:colors.primary, \r\n        margin: '0 8px 0 4px'\r\n    },\r\n\r\n    formGroupWrapper: {\r\n        textAlign: 'left',\r\n        paddingLeft: '20px'\r\n    },\r\n\r\n    multiSelectHeader: {\r\n        fontSize: '13px',\r\n        margin: '6px 0px 2px 0px'\r\n    },\r\n\r\n    formControlLabelRoot: {\r\n        height: '30px'\r\n    },\r\n\r\n    formControlLabelLabel: {\r\n        fontSize: '14px'\r\n    },\r\n\r\n    checkboxGroupHeader: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 0px 0px 1px #242424',\r\n        marginTop: '8px'\r\n    }\r\n});\r\n\r\n//component expects to be wrapped in a grid\r\nconst MultiCheckboxDrowndown = (props) => {\r\n\r\n    const {\r\n        classes,\r\n        selectedOptions, //set\r\n        handleClear,\r\n        options,\r\n        parentStateKey,\r\n        handleClickCheckbox,\r\n        groupHeaderLabel\r\n    } = props;\r\n\r\n    const [ open, setOpen ] = React.useState(false);\r\n    \r\n    return (\r\n        <> \r\n            <Grid \r\n                item xs={12} \r\n                container \r\n                alignItems='center' \r\n                className={classes.checkboxGroupHeader} \r\n                onClick={() => setOpen(!open)}\r\n                >\r\n                {open ? \r\n                    <ExpandMore className={classes.menuOpenIcon}/> : \r\n                    <ChevronRight className={classes.menuOpenIcon}/>\r\n                }\r\n                {groupHeaderLabel}\r\n            </Grid>\r\n\r\n            {\r\n                open ?\r\n\r\n                <Grid item xs={12} className={classes.formGroupWrapper}>\r\n                    {\r\n                        selectedOptions.size ?\r\n\r\n                        <Grid item container cs={12} justify='flex-start' className={classes.multiSelectHeader}>\r\n                            <span style={{marginRight: '8px'}}>{selectedOptions.size} Selected </span>\r\n                            <Link component='button' onClick={handleClear}>Reset</Link>\r\n                        </Grid> : ''\r\n                    }                                \r\n                    \r\n                    <FormGroup>\r\n                        {options.map((e, i) => (\r\n                            <Grid item xs={12} key={i}>\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Checkbox \r\n                                            color='primary' \r\n                                            onChange={handleClickCheckbox} \r\n                                            className={classes.checkbox} \r\n                                            size='small'\r\n                                            name={parentStateKey + '!!' + e}\r\n                                            checked={selectedOptions.has(e)}\r\n                                        />\r\n                                    }\r\n                                    label={e}\r\n                                    classes={{\r\n                                        root: classes.formControlLabelRoot,\r\n                                        label: classes.formControlLabelLabel\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n                        ))}\r\n                    </FormGroup>\r\n                </Grid>\r\n\r\n                : ''\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(MultiCheckboxDrowndown);\r\n\r\n\r\n","const validation = {\r\n    depth: {\r\n        depthOneIsLower: 'Cannot be larger than end',\r\n        depthOneOutOfBounds: 'Data ends at $',\r\n        depthTwoOutOfBounds: 'Data begins at $',\r\n        negative: 'Cannot be negative'\r\n    },\r\n\r\n    date: {\r\n        dateOneIsLater: 'Cannot be after end',\r\n        dateOneOutOfBounds: 'Data ends at $',\r\n        dateTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lat: {\r\n        latOneIsHigher: 'Cannot be larger than end',\r\n        latOneOutOfBounds: 'Data ends at $',\r\n        latTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lon: {\r\n        lonOneIsHigher: 'Cannot be larger than end',\r\n        lonOneOutOfBounds: 'Data ends at $',\r\n        lonTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    type: {\r\n        dataIsIrregular: '$ is not available for sparse data',\r\n        dateRangeRequired: '$ requires a range of dates',\r\n        depthRangeRequired: '$ requires a range of depths',\r\n        surfaceOnlyDataset: '$ contains only surface data',\r\n        irregularOnly: 'Sparse map is only available for sparse data',\r\n        dataSizeTooLarge: 'Data set is too large for this visualization type.',\r\n        webGLContextLimit: 'Rendering limit exceeded for plots. Please delete one or more.'\r\n    },\r\n\r\n    generic: {\r\n        invalid: 'Invalid input',\r\n        dataSizeWarning: 'Wait time and application performance may be poor due to size of data.',\r\n        dataSizePrevent: 'Data set is too large. Please reduce date range or area size.',\r\n        variableMissing: 'Please select a variable',\r\n        vizTypeMissing: 'Please select a visualization type',\r\n        guestMaximumReached: 'Guests are limited to creating 10 plots per day. Please log in or register.'\r\n    }\r\n}\r\n\r\nexport default validation;","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nconst mapTemporalResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [temporalResolutions.threeMinutes] : 1,\r\n        [temporalResolutions.sixHourly] : 1,\r\n        [temporalResolutions.daily] : 1,\r\n        [temporalResolutions.weekly] : 7,\r\n        [temporalResolutions.monthly] : 30,\r\n        [temporalResolutions.annual] : 365,\r\n        [temporalResolutions.irregular] : null,\r\n        [temporalResolutions.monthlyClimatology]: 30,\r\n        [temporalResolutions.threeDay]: 3,\r\n        [temporalResolutions.eightDayRunning]: 8,\r\n        [temporalResolutions.eightDays]: 8\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapTemporalResolutionToNumber;","// Webgl visualizations consume a webgl context which are limited by the browser. We use this to prevent people\r\n// from exceeding the limit and breaking existing plots\r\n\r\nimport visualizationSubTypes from '../Enums/visualizationSubTypes';\r\n\r\nexport default (charts) => {\r\n    let count = 0;\r\n    charts.forEach(chart => {\r\n        if(chart.subType === visualizationSubTypes.heatmap) count ++;\r\n        if(chart.subType === visualizationSubTypes.sparse){\r\n            count ++;\r\n            if(chart.data.variableValues.length > 10000) count +=3;\r\n        }\r\n        if(chart.subType === visualizationSubTypes.depthProfile && chart.data.variableValues.length > 10000) count ++;\r\n        if(chart.subType === visualizationSubTypes.timeSeries && chart.data.variableValues.length > 10000) count ++;\r\n\r\n    })\r\n    return count;\r\n}","import vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nexport default mapVizType;","const cleanSPParams = ({depth1, depth2, dt1, dt2, fields, lat1, lat2, lon1, lon2, spName, tableName}) => ({\r\n    depth1: parseFloat(depth1),\r\n    depth2: parseFloat(depth2),\r\n    dt1,\r\n    dt2,\r\n    fields,\r\n    lat1: parseFloat(lat1),\r\n    lat2: parseFloat(lat2),\r\n    lon1: parseFloat(lon1),\r\n    lon2: parseFloat(lon2),\r\n    spName,\r\n    tableName,\r\n})\r\n\r\nexport default cleanSPParams;","const aggregateChartDataSize = (charts) => {\r\n    let size = 0;\r\n\r\n    charts.forEach(ch => {\r\n        size += ch.data.variableValues && ch.data.variableValues.length ? ch.data.variableValues.length : 0;\r\n    });\r\n\r\n\r\n    return size;\r\n}\r\n\r\nexport default aggregateChartDataSize;","import depthUtils from '../depthCounter';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\n\r\nconst generateVariableSampleRangeParams = (varDetails) => {\r\n    let dt1 = varDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n        1 : \r\n        varDetails.Time_Min.slice(0, 10);\r\n    let dt2 = varDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n        1 : \r\n        // varDetails.Time_Min.slice(0, 10);\r\n        varDetails.Time_Max.slice(0, 10);\r\n\r\n    let lat1 = Math.floor(varDetails.Lat_Min * 1000) /1000;\r\n    let lat2 = Math.ceil(varDetails.Lat_Max * 1000) /1000;\r\n    let lon1 = Math.floor(varDetails.Lon_Min * 1000) /1000;\r\n    let lon2 = Math.ceil(varDetails.Lon_Max * 1000) /1000;\r\n\r\n    let surfaceOnly = !varDetails.Depth_Max;\r\n    let irregularSpatialResolution = varDetails.Spatial_Resolution === 'Irregular';\r\n\r\n    let depth1 = surfaceOnly ? 0 : irregularSpatialResolution ? Math.floor(varDetails.Depth_Min * 1000) / 1000 || 0 : 0;\r\n\r\n    let depth2 = surfaceOnly ? 0 : \r\n        irregularSpatialResolution ? Math.ceil(varDetails.Depth_Max * 1000) / 1000|| 0 : \r\n        depthUtils.piscesTable.has(varDetails.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n        depthUtils.darwinTable.has(varDetails.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2).toFixed(2) : \r\n        11000\r\n\r\n    return {\r\n        lat1,\r\n        lat2,\r\n        lon1,\r\n        lon2,\r\n        depth1,\r\n        depth2,\r\n        dt1,\r\n        dt2\r\n    };\r\n}\r\n\r\nexport default generateVariableSampleRangeParams;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","// Dialog opened when clicking the info icon next to a dataset in viz search\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogTitle, DialogContent, Link, Typography } from '@material-ui/core';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nimport { datasetSummaryFetch } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        minWidth: '700px',\r\n        maxWidth: '60vw',\r\n    },\r\n\r\n    markdown: {\r\n        '& img': {\r\n            maxWidth: '100%',\r\n            margin: '20px auto 20px auto',\r\n            display: 'block'\r\n        },\r\n        '& a': {\r\n            color: theme.palette.primary.main,\r\n            textDecoration: 'none'\r\n        },\r\n\r\n        '& p': {\r\n            lineHeight: 1.25\r\n        }\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    datasetSummary: state.datasetSummary\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    datasetSummaryFetch\r\n}\r\n\r\nconst DatasetInfoDialog = (props) => {\r\n    const { datasetSummary, classes, datasetSummaryFetch, datasetSummaryID, setDatasetSummaryID } = props;\r\n\r\n    React.useEffect(() => {\r\n        datasetSummaryFetch(datasetSummaryID);\r\n    }, [datasetSummaryID]);\r\n\r\n    const handleClose = () => {\r\n        setDatasetSummaryID(null);\r\n        datasetSummaryFetch(null);\r\n    }\r\n\r\n    return (\r\n        <Dialog\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            open={Boolean(datasetSummaryID)}\r\n            onClose={handleClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <DialogTitle>{datasetSummary ? datasetSummary.Dataset_Long_Name : <Skeleton/>}</DialogTitle>\r\n            <DialogContent>\r\n                {\r\n                    datasetSummary ?\r\n                    <ReactMarkdown source={datasetSummary.Description} className={classes.markdown}/> :\r\n                        <>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                        <Typography><Skeleton/></Typography>\r\n                    </>                    \r\n                }\r\n            </DialogContent>\r\n\r\n            <DialogContent style={{padding: '16px 24px'}}>{\r\n                datasetSummary ?\r\n                    <span>\r\n                        Detailed information for this dataset and its member variables is available\r\n                        <Link target='_blank' href={`/catalog/datasets/${datasetSummary.Dataset_Name}`}> here</Link>.  \r\n                    </span> \r\n                : \r\n                <Skeleton/>\r\n            }                \r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DatasetInfoDialog));","// Virtualized product list used on viz page for catalog-like and related-data searches\r\n// Each child will be a dataset, which will have variable children\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, Grid, Tooltip, Typography } from '@material-ui/core';\r\nimport { Info, ExpandMore, ChevronRight, Star } from '@material-ui/icons';\r\n\r\nimport { VariableSizeList } from 'react-window';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nimport DatasetInfoDialog from './DatasetInfoDialog';\r\n\r\nconst makeGroupStyles = {\r\n\r\n    searchOption: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    searchOptionsMenuItemText: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        width: 'calc(100% - 36px)',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    heading: {\r\n        textAlign: 'left',\r\n        padding: '8px 6px',\r\n        color: colors.primary,\r\n        fontSize: '16px',\r\n        marginTop: '5px',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    variableItem: {\r\n        height: '32px',\r\n        // paddingLeft: '48px', \r\n        textAlign: 'left',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n    },\r\n\r\n    variablesWrapper: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        paddingTop: '8px'\r\n    },\r\n\r\n    memberCount: {\r\n        color: colors.primary,\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    datasetOpenIcon:{\r\n        color:colors.primary, \r\n        margin: '0 8px 0 4px',\r\n    },\r\n\r\n    infoIcon: {\r\n        color: colors.primary,\r\n        cursor: 'pointer'\r\n    },\r\n\r\n    listHeader: {\r\n        color: colors.primary,\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    variableName: {\r\n        paddingLeft: '48px'\r\n    }\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    vizSearchResultsLoadingState: state.vizSearchResultsLoadingState,\r\n    cart: state.cart\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\n// One section of the product list corresponding to one make\r\nconst MakeGroup = connect(mapStateToProps, mapDispatchToProps)(withStyles(makeGroupStyles)(React.memo((props) => {\r\n\r\n    const { classes, options, vizSearchResultsLoadingState, handleSelectDataTarget, handleSetVariableDetailsID, setdatasetSummaryID, listRef, make, fullCount, cart } = props;\r\n    const [ openIndex, setOpenIndex ] = React.useState(null);\r\n\r\n    const handleSetOpenClick = (i) => {\r\n        if(listRef.current) {\r\n            listRef.current.resetAfterIndex(0);\r\n            \r\n            // Make sure the group being opened is in view\r\n            let currentOffset = listRef.current.state.scrollOffset;\r\n            let targetOffset = i * 38;\r\n\r\n            if(i !== null && (targetOffset < currentOffset - 10 || targetOffset > currentOffset + props.height - 20)){\r\n                setTimeout(() => listRef.current.scrollToItem(i, 'start'), 10);\r\n            }\r\n        }\r\n        setOpenIndex(i);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(listRef.current) listRef.current.resetAfterIndex(0);\r\n    }, [options])\r\n\r\n    const varCount = options.reduce((acc, cur) => acc + cur.variables.length, 0);\r\n    const nonvisualizableDatasetCount = fullCount - options.length;\r\n    const nonvisualizableString = nonvisualizableDatasetCount === 0 ?\r\n        '' :\r\n        ` (${nonvisualizableDatasetCount} hidden)`\r\n\r\n    return (\r\n        <>\r\n        <Grid container>\r\n            <Grid item xs={9}>\r\n                <Typography className={classes.heading}>\r\n                    {\r\n                        vizSearchResultsLoadingState === states.inProgress ?\r\n                        'Searching....' :\r\n                        varCount ? <>{make} Data - Showing {options.length} datasets \r\n                                <Tooltip enterDelay={50} placement='top' title='Variables and datasets which are not flagged as visualizable are not shown on this list, but can be found on the catalog page.'>\r\n                                    <span>{nonvisualizableString}</span>\r\n                                </Tooltip>\r\n                            </>\r\n                        : `${make} Data - No variables found for current search parameters`\r\n                    }\r\n                </Typography>\r\n            </Grid>\r\n\r\n            <Grid item xs={3} container justify='flex-start' alignItems='center'>\r\n                <Typography variant='caption' style={{color: colors.primary, marginBottom: '-16px'}}>\r\n                    Variable Count\r\n                </Typography>\r\n            </Grid>\r\n        </Grid>\r\n        \r\n            <VariableSizeList\r\n                ref={listRef}\r\n                itemData={options}\r\n                itemCount={options.length}\r\n                height={props.height || 270}\r\n                width='100%'\r\n                estimatedItemSize={38}\r\n                style={{overflowY: 'scroll'}}\r\n                itemSize={(i) => openIndex === i ? options[i].variables.length * 32 + 38 + 8: 38}\r\n            >\r\n                {({ index, style }) => (\r\n                    <div style={style}>\r\n                        <Grid \r\n                            container \r\n                            className={classes.searchOption}\r\n                            onClick={() => index === openIndex ? handleSetOpenClick(null) : handleSetOpenClick(index)}\r\n                        >            \r\n                            <Grid item xs={9} container alignItems='center'>\r\n                                {openIndex === index ? \r\n                                    <ExpandMore className={classes.datasetOpenIcon}/> : \r\n                                    <ChevronRight className={classes.datasetOpenIcon}/>\r\n                                }\r\n                                <span className={classes.searchOptionsMenuItemText}>{options[index].Dataset_Name || options[index].Dataset_Name}</span>\r\n                            </Grid>\r\n\r\n                            <Tooltip title={`Dataset contains ${options[index].variables.length} variables matching the search criteria`}>\r\n                                <Grid item xs={1} className={classes.memberCount} container alignItems='center' justify='center'>\r\n                                    {options[index].variables.length}\r\n                                </Grid>\r\n                            </Tooltip>\r\n\r\n                            <Grid item xs={1} style={{paddingLeft: '12px'}} container alignItems='center'>\r\n                                <Tooltip title='View Dataset Details'>\r\n                                    <Info \r\n                                        className={classes.infoIcon}\r\n                                        onClick={(event) => {\r\n                                            event.stopPropagation();\r\n                                            setdatasetSummaryID(options[index].variables[0].Dataset_ID);\r\n                                        }}\r\n                                    />\r\n                                </Tooltip>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={1} container alignItems='center'>\r\n                                {\r\n                                    cart[options[index].Dataset_Name] ?\r\n\r\n                                    <Tooltip title='This dataset is on your favorites list'>\r\n                                        <Star/>\r\n                                    </Tooltip> \r\n                                    \r\n                                    : ''\r\n                                }\r\n                            </Grid>                           \r\n                        </Grid>\r\n                        \r\n                        {\r\n                            index === openIndex ?\r\n                            <Grid container className={classes.variablesWrapper}>\r\n                                {options[index].variables.map((e, i) => (\r\n                                    <Grid \r\n                                        item \r\n                                        xs={12} \r\n                                        key={e.Long_Name} \r\n                                        className={classes.variableItem} \r\n                                        container \r\n                                        alignItems='center'\r\n                                        onClick={() => handleSelectDataTarget(e)}\r\n                                    >\r\n                                        <Grid item xs={10} className={classes.variableName}>{e.Long_Name}</Grid>\r\n                                        <Grid item xs={2}>\r\n                                            <Tooltip title='View Variable Details'>\r\n                                                <Info onClick={(event) => {\r\n                                                        event.stopPropagation();\r\n                                                        handleSetVariableDetailsID(e.ID);\r\n                                                    }}\r\n                                                    style={{paddingLeft: '12px'}}\r\n                                                    className={classes.infoIcon}\r\n                                                    />\r\n                                            </Tooltip>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                ))}\r\n                            </Grid>\r\n                            : ''\r\n                        }\r\n                    </div>\r\n                )}\r\n            </VariableSizeList>\r\n        </>\r\n    )\r\n})));\r\n\r\nconst observationListRef = React.createRef();\r\nconst modelListRef = React.createRef();\r\n\r\nconst plMapStateToProps = (state, ownProps) => ({\r\n    windowHeight: state.windowHeight,\r\n    windowWidth: state.windowWidth,\r\n    vizSearchResultsFullCounts: state.vizSearchResultsFullCounts\r\n});\r\n// const sortCartFirst\r\n\r\nconst ProductList = (props) => {\r\n\r\n    const { options, classes, handleSelectDataTarget, handleShowMemberVariables, vizSearchResultsLoadingState, make, windowWidth, windowHeight, handleSetVariableDetailsID, vizSearchResultsFullCounts } = props;\r\n    \r\n    const [ datasetSummaryID, setDatasetSummaryID ] = React.useState(null);\r\n\r\n    return (\r\n        <React.Fragment>                \r\n                <DatasetInfoDialog datasetSummaryID={datasetSummaryID} setDatasetSummaryID={setDatasetSummaryID}/>\r\n\r\n            {\r\n                (make.has('Observation') && make.has('Model')) || make.size === 0 ?\r\n                <>\r\n                    <MakeGroup\r\n                        make='Observation'\r\n                        options={options.Observation}\r\n                        handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                        listRef = {observationListRef}\r\n                        handleSelectDataTarget={handleSelectDataTarget}\r\n                        height={(windowHeight - 204) / 2 - 45}\r\n                        setdatasetSummaryID={setDatasetSummaryID}\r\n                        fullCount={vizSearchResultsFullCounts.Observation}\r\n                    />\r\n\r\n                    <MakeGroup\r\n                        make='Model'\r\n                        options={options.Model}\r\n                        handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                        listRef={modelListRef}\r\n                        handleSelectDataTarget={handleSelectDataTarget}\r\n                        height={(windowHeight - 204) / 2 - 45}\r\n                        setdatasetSummaryID={setDatasetSummaryID}\r\n                        fullCount={vizSearchResultsFullCounts.Model}\r\n                    />\r\n                </> : make.has(\"Observation\") ?\r\n\r\n                <MakeGroup\r\n                    make='Observation'\r\n                    options={options.Observation}\r\n                    handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                    listRef = {observationListRef}\r\n                    handleSelectDataTarget={handleSelectDataTarget}\r\n                    height={windowHeight - 249}\r\n                    setdatasetSummaryID={setDatasetSummaryID}\r\n                    fullCount={vizSearchResultsFullCounts.Observation}\r\n                /> : \r\n\r\n                <MakeGroup\r\n                    make='Model'\r\n                    options={options.Model}\r\n                    handleSetVariableDetailsID={handleSetVariableDetailsID}\r\n                    listRef={modelListRef}\r\n                    height={windowHeight - 249}\r\n                    handleSelectDataTarget={handleSelectDataTarget}\r\n                    setdatasetSummaryID={setDatasetSummaryID}\r\n                    fullCount={vizSearchResultsFullCounts.Model}\r\n                />        \r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(plMapStateToProps, null)(ProductList);","// Search overlay for viz page\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, TextField, MenuItem, InputAdornment, Grid, Link, Typography, FormControl, Select, FormHelperText, Button, } from '@material-ui/core';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { Search, Close } from '@material-ui/icons';\r\n\r\nimport ProductList from './ProductList';\r\nimport MultiCheckboxDropdown from '../UI/MultiCheckboxDropdown';\r\n\r\nimport { vizSearchResultsFetch, vizSearchResultsSetLoadingState, variableNameAutocompleteFetch, vizSearchResultsStore } from '../../Redux/actions/visualization';\r\nimport { searchOptionsFetch } from '../../Redux/actions/catalog';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    vizSearchResults: state.vizSearchResults,\r\n    vizSearchResultsLoadingState: state.vizSearchResultsLoadingState,\r\n    autocompleteVariableNames: state.autocompleteVariableNames,\r\n    submissionOptions: state.submissionOptions,\r\n    windowHeight: state.windowHeight\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    vizSearchResultsFetch,\r\n    vizSearchResultsSetLoadingState,\r\n    variableNameAutocompleteFetch,\r\n    vizSearchResultsStore,\r\n    searchOptionsFetch\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    inputRoot: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    autocompletePopperPaper: {\r\n        backgroundColor: 'black',\r\n        zIndex: z.CONTROL_SECONDARY\r\n    },\r\n\r\n    autocompleteOptions: {\r\n        '&[data-focus=\"true\"]': {\r\n            backgroundColor: colors.greenHover,\r\n          },\r\n          textAlign: 'left'\r\n    },\r\n\r\n    resetButton: {\r\n        textTransform: 'none',\r\n        width: '160px',\r\n        height: '37px',\r\n        color: theme.palette.primary.main,\r\n        borderColor: theme.palette.primary.main,\r\n        marginTop: '12px'\r\n    },\r\n\r\n    searchPanelRow: {\r\n        marginTop: '10px',\r\n    },\r\n\r\n    formControl: {\r\n        width: '90%',\r\n        marginBottom: '6px'\r\n    },\r\n\r\n    autoComplete: {\r\n        width: 'calc(100% - 48px)'\r\n    },\r\n\r\n    showAdvancedWrapper: {\r\n        textAlign: 'left',\r\n        marginTop: '16px',\r\n        width: '100%'\r\n    },\r\n\r\n    regionSelectorInput: {\r\n        fontSize: '13px',\r\n    },\r\n\r\n    addBorder: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    shiftedAutocompletePopper: {\r\n        height: '400px',\r\n        width: '500px',\r\n        position: 'absolute',\r\n        bottom: '190px',\r\n    },\r\n\r\n    shiftedAutocompletePaper: {\r\n        minHeight : '400px',\r\n    },\r\n\r\n    shiftedAutocompleteListbox: {\r\n        maxHeight: 0,\r\n        minHeight : '400px',\r\n        overflowX: 'hidden'\r\n    },\r\n\r\n    closeIcon: {\r\n        float: 'right',\r\n        cursor: 'pointer',\r\n        color: colors.primary,\r\n        textTransform: 'none',\r\n        fontSize: '15px'\r\n    }\r\n});\r\n\r\nconst defaultState = {\r\n    hasDepth: 'any',\r\n    timeStart: '1900-01-01',\r\n    timeEnd: new Date().toISOString().slice(0,10),\r\n    latStart: -90,\r\n    latEnd: 90,\r\n    lonStart: -180,\r\n    lonEnd: 180,\r\n    sensor: new Set(),\r\n    searchTerms: '',\r\n    temporalResolution: 'Any',\r\n    spatialResolution: 'Any',\r\n    dataSource: 'Any',\r\n    distributor: 'Any',\r\n    processLevel: 'Any',\r\n    make: new Set(),\r\n    region: new Set()\r\n}\r\n\r\nclass DataSearch extends React.Component {\r\n\r\n    state = {\r\n        memberVariablesDataset: null,\r\n        showAdvanced: false,\r\n        sensorsMenuOpen: false,\r\n        regionsMenuOpen: false,\r\n        makesMenuOpen: false,\r\n        ...defaultState\r\n    }\r\n\r\n\r\n    componentDidMount = () => {\r\n        this.props.vizSearchResultsFetch({});\r\n    }\r\n\r\n    handleChangeSearchValue = (e) => {      \r\n        this.updateStateAndSearch({...this.state, [e.target.name]: e.target.value});\r\n    }\r\n\r\n    handleChangeAutocomplete = (statePiece) => {\r\n        return (e, v) => {\r\n            let newState = {...this.state, [statePiece]: v}\r\n            this.updateStateAndSearch(newState);\r\n        }\r\n    }\r\n\r\n    updateStateAndSearch = (newState) => {\r\n        this.props.vizSearchResultsSetLoadingState(states.inProgress);\r\n        this.props.vizSearchResultsStore({Observation: [], Model: []});\r\n\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleChangeSensor = (e, altTypeValue) => {\r\n        let newState = {...this.state, sensor: altTypeValue};\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleChangeMake = (e, altTypeValue) => {\r\n        let newState = {...this.state, make: altTypeValue};\r\n        this.setState(newState);\r\n        this.props.vizSearchResultsFetch(newState);\r\n    }\r\n\r\n    handleToggleShowAdvanced = () => {\r\n        this.setState({...this.state, showAdvanced: !this.state.showAdvanced});\r\n    }\r\n\r\n    handleResetSearch = () => {\r\n        let newState = {...this.state, ...defaultState};\r\n        this.updateStateAndSearch(newState);\r\n    }\r\n\r\n    handleToggleMenu = (menu) => {\r\n        this.setState({...this.state, [menu]: !this.state[menu]})\r\n    }\r\n\r\n    handleClickCheckbox = (e, checked) => {\r\n        let [ column, value ] = e.target.name.split('!!');\r\n        let newSet = new Set(this.state[column]);\r\n\r\n        checked ? newSet.add(value) : newSet.delete(value);\r\n\r\n        this.updateStateAndSearch({...this.state, [column]: newSet});\r\n    }\r\n\r\n    handleClearMultiSelect = (param) => {\r\n        let newState = {...this.state};\r\n        newState[param] = defaultState[param];\r\n        this.updateStateAndSearch(newState);\r\n    }\r\n\r\n    render = () => {\r\n        const {\r\n            classes,\r\n            handleSelectDataTarget,\r\n            vizSearchResults,\r\n            autocompleteVariableNames,\r\n            submissionOptions,\r\n            windowHeight\r\n        } = this.props;\r\n\r\n        const { \r\n            searchTerms, \r\n            memberVariablesDataset,\r\n            hasDepth, \r\n            timeStart, \r\n            timeEnd, \r\n            latStart, \r\n            latEnd, \r\n            lonStart, \r\n            lonEnd,\r\n            temporalResolution,\r\n            spatialResolution,\r\n            dataSource,\r\n            distributor,\r\n            processLevel,\r\n            make,\r\n            region,\r\n            sensor,\r\n        } = this.state;\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <Grid container>\r\n                    <Grid item xs={12}>\r\n                        <Typography style={{display: 'inline-block'}}>\r\n                            Search and filter using the controls on the left. Select a variable to plot from the list on the right.\r\n                        </Typography>\r\n\r\n                        <Button\r\n                            startIcon={<Close style={{fontSize: '22px'}}/>}\r\n                            onClick={this.props.handleCloseDataSearch}\r\n                            className={classes.closeIcon}\r\n                        >\r\n                            Close\r\n                        </Button>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={4} style={{overflowY: 'auto', maxHeight: windowHeight - 204, padding: '16px', backgroundColor: 'rgba(0,0,0,.4)', display: memberVariablesDataset ? 'none' : ''}}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    name='searchTerms'\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    placeholder='Search'\r\n                                    value={searchTerms}\r\n                                    InputProps={{\r\n                                        classes: {\r\n                                            root: classes.inputRoot\r\n                                        },\r\n                                        startAdornment: (\r\n                                            <React.Fragment>\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <Search style={{color: colors.primary}}/>\r\n                                                </InputAdornment>\r\n                                            </React.Fragment>\r\n                                        )\r\n                                    }}\r\n                                    variant=\"outlined\"\r\n                                    inputRef={this.props.searchInputRef}                        \r\n                                />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Make}\r\n                            selectedOptions={make}\r\n                            handleClear={() => this.handleClearMultiSelect('make')}\r\n                            parentStateKey={'make'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Makes'\r\n                        />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Sensor}\r\n                            selectedOptions={sensor}\r\n                            handleClear={() => this.handleClearMultiSelect('sensor')}\r\n                            parentStateKey={'sensor'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Sensors'\r\n                        />\r\n\r\n                        <MultiCheckboxDropdown\r\n                            options={submissionOptions.Region}\r\n                            selectedOptions={region}\r\n                            handleClear={() => this.handleClearMultiSelect('region')}\r\n                            parentStateKey={'region'}\r\n                            handleClickCheckbox={this.handleClickCheckbox}\r\n                            groupHeaderLabel='Regions'\r\n                        />\r\n\r\n                    <div className={classes.showAdvancedWrapper}>\r\n                        <Link\r\n                            component='button'\r\n                            onClick={this.handleToggleShowAdvanced}\r\n                        >\r\n                            {this.state.showAdvanced ? 'Hide Additional Filters' : 'Additional Filters'}\r\n                        </Link>\r\n                    </div>\r\n\r\n\r\n                    <div style={this.state.showAdvanced ? {} : {display: 'none'}}>\r\n\r\n                        <Grid item container xs={12} className={classes.searchPanelRow}>\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='timeStart'\r\n                                    className={classes.formControl}\r\n                                    id=\"date\"\r\n                                    label=\"Start Date\"\r\n                                    type=\"date\"\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={timeStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='timeEnd'\r\n                                    className={classes.formControl}\r\n                                    id=\"date\"\r\n                                    label=\"End Date\"\r\n                                    type=\"date\"\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={timeEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n                        </Grid>                        \r\n\r\n                        <Grid item container xs={12} className={classes.searchPanelRow}>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='latStart'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lat Start&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -90,\r\n                                        max: 90\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={latStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='latEnd'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lat End&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -90,\r\n                                        max: 90\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={latEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='lonStart'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lon Start&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -180,\r\n                                        max: 180\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={lonStart}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <TextField\r\n                                    name='lonEnd'\r\n                                    className={classes.formControl}\r\n                                    label=\"Lon End&deg;\"\r\n                                    type=\"number\"\r\n                                    inputProps={{\r\n                                        min: -180,\r\n                                        max: 180\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        shrink: true,\r\n                                    }}\r\n                                    value={lonEnd}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                />\r\n                            </Grid>                            \r\n\r\n                            <Grid item xs={6}>\r\n                                <FormControl className={classes.formControl}>\r\n                                <FormHelperText>Depth Levels</FormHelperText>\r\n                                <Select\r\n                                    value={hasDepth}\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    name='hasDepth'\r\n                                    MenuProps={{\r\n                                        PopoverClasses: {\r\n                                            paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                        },\r\n                                        style: {zIndex: z.CONTROL_SECONDARY}\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value='any'>Any</MenuItem>\r\n                                    <MenuItem value='yes'>Multiple Levels</MenuItem>\r\n                                    <MenuItem value='no'>Surface Only</MenuItem>\r\n                                </Select>                            \r\n                                </FormControl>\r\n                            </Grid>\r\n                                \r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Process Level</FormHelperText>\r\n                                        <Select\r\n                                            value={processLevel}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='processLevel'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Process_Level.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Temporal Resolution</FormHelperText>\r\n                                        <Select\r\n                                            value={temporalResolution}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='temporalResolution'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Temporal_Resolution.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6}>\r\n                                    <FormControl className={classes.formControl}>\r\n                                        <FormHelperText>Spatial Resolution</FormHelperText>\r\n                                        <Select\r\n                                            value={spatialResolution}\r\n                                            onChange={this.handleChangeSearchValue}\r\n                                            name='spatialResolution'\r\n                                            MenuProps={{\r\n                                                PopoverClasses: {\r\n                                                    paper: `${classes.autocompletePopperPaper} ${classes.addBorder}`\r\n                                                },\r\n                                                style: {zIndex: z.CONTROL_SECONDARY}\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                this.props.submissionOptions.Spatial_Resolution.map((e) => (\r\n                                                    <MenuItem key={e} value={e}>{e}</MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>                            \r\n                                    </FormControl>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12}>\r\n                                    <Autocomplete\r\n                                        options={this.props.submissionOptions.Data_Source}\r\n                                        renderInput={(params) => <TextField margin='none' {...params} label=\"Data Source\" InputLabelProps={{style:{fontSize: '12px', marginTop: '4px'}}}/>}\r\n                                        getOptionLabel={option => option}\r\n                                        onChange={this.handleChangeAutocomplete('dataSource')}\r\n                                        disablePortal\r\n                                        classes={{\r\n                                            paper: `${classes.shiftedAutocompletePaper} ${classes.autocompletePopperPaper} ${classes.addBorder} `,\r\n                                            input: classes.regionSelectorInput,\r\n                                            option: classes.autocompleteOptions,\r\n                                            popperDisablePortal: classes.shiftedAutocompletePopper,\r\n                                            listbox: classes.shiftedAutocompleteListbox\r\n                                        }}\r\n                                        value={dataSource}\r\n                                    />\r\n\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12}>\r\n                                <Autocomplete\r\n                                        options={this.props.submissionOptions.Distributor}\r\n                                        renderInput={(params) => <TextField margin='none' {...params} label=\"Distributor\" InputLabelProps={{style:{fontSize: '12px', marginTop: '4px'}}}/>}\r\n                                        getOptionLabel={option => option}\r\n                                        onChange={this.handleChangeAutocomplete('distributor')}\r\n                                        disablePortal\r\n                                        classes={{\r\n                                            paper: `${classes.shiftedAutocompletePaper} ${classes.autocompletePopperPaper} ${classes.addBorder} `,\r\n                                            input: classes.regionSelectorInput,\r\n                                            option: classes.autocompleteOptions,\r\n                                            popperDisablePortal: classes.shiftedAutocompletePopper,\r\n                                            listbox: classes.shiftedAutocompleteListbox\r\n                                        }}\r\n                                        value={distributor}\r\n                                    />\r\n                                </Grid>\r\n                            </Grid>                        \r\n                        </div>\r\n\r\n                        <Grid item xs={12} className={classes.searchPanelRow}>\r\n                            <Button variant='outlined' onClick={this.handleResetSearch} className={classes.resetButton}>\r\n                                Reset Filters\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={8} style={{paddingTop: '12px'}}>\r\n                        <ProductList \r\n                            options={vizSearchResults}\r\n                            handleSelectDataTarget={handleSelectDataTarget}\r\n                            handleShowMemberVariables={this.handleShowMemberVariables}\r\n                            make={make}\r\n                            variableDetailsID={this.props.variableDetailsID}\r\n                            handleSetVariableDetailsID={this.props.handleSetVariableDetailsID}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DataSearch));","// Select viz type and create viz button\r\n\r\nimport React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Paper, Grid, MenuItem, FormControl, InputLabel, Button, Tooltip } from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    vizTypeSelectFormControl: {\r\n        width: '100%',\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent'\r\n      }\r\n    },\r\n\r\n    vizTypeMenu: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n  \r\n    vizTypeMenuItem: {\r\n      '&:hover': {backgroundColor: colors.greenHover}\r\n    },\r\n\r\n    visualizeButton: {\r\n        textTransform: 'none',\r\n        height: '56px',\r\n        borderRadius: 0,\r\n        backgroundColor: colors.backgroundGray,\r\n        color: theme.palette.primary.main,\r\n        fontVariant: 'normal',\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent'\r\n      },\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover,\r\n              color: 'white'\r\n          }\r\n    },\r\n\r\n    vizButtonTooltip: {\r\n        color: 'yellow'\r\n    },\r\n});\r\n\r\nconst ChartControl = (props) => {\r\n    const { \r\n        classes,\r\n        overrideDisabledStyle,\r\n        heatmapMessage,\r\n        contourMessage,\r\n        sectionMapMessage,\r\n        histogramMessage,\r\n        timeSeriesMessage,\r\n        depthProfileMessage,\r\n        sparseMapMessage,\r\n        visualizeButtonTooltip,\r\n        disableVisualizeMessage,\r\n        selectedVizType,\r\n        handleChangeInputValue,\r\n        handleVisualize,\r\n        disabled\r\n    } = props;\r\n\r\n    return (\r\n        <React.Fragment>\r\n                <Grid container>\r\n                    <Grid item xs={12}>\r\n                        <FormControl variant='filled' className={classes.vizTypeSelectFormControl}>\r\n                            <InputLabel shrink htmlFor=\"vizSelector\" style={disabled ? {color: 'rgba(0,0,0,.38)'} : {}}>Select Chart Type</InputLabel>\r\n                            <MUISelect\r\n                                disabled={disabled}\r\n                                className={classes.vizTypeSelectFormControl}\r\n                                style={overrideDisabledStyle}\r\n                                value={selectedVizType}\r\n                                variant='filled'\r\n                                // onChange={handleChangeInputValue}\r\n                                onChange={handleChangeInputValue}\r\n                                inputProps={{\r\n                                    name: 'selectedVizType',\r\n                                    id: 'vizSelector',\r\n                                    variant: 'filled'\r\n                                }}\r\n                                MenuProps={{\r\n                                    MenuListProps: {\r\n                                        className: classes.vizTypeMenu\r\n                                    }\r\n                                }}\r\n                                >\r\n                                {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Time and Space Plots</MenuItem>}\r\n                            </MUISelect>\r\n                        </FormControl>\r\n                    </Grid>\r\n\r\n                    <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                        <Grid item xs={12}>\r\n                            <Button\r\n                                className={classes.visualizeButton}\r\n                                variant='contained'\r\n                                onClick={() => handleVisualize()}\r\n                                disabled={Boolean(disableVisualizeMessage) || !selectedVizType || disabled}\r\n                                fullWidth\r\n                            >\r\n                                Create Visualization\r\n                            </Button>\r\n                        </Grid>\r\n                    </Tooltip>\r\n\r\n                </Grid>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ChartControl);","// Popup showing table stats for selected variable on viz page\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Close } from '@material-ui/icons';\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, Table, TableRow, TableCell, TableBody, Typography } from '@material-ui/core';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nimport { variableFetch } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        width: '700px',\r\n    },\r\n\r\n    closeIcon: {\r\n        display: 'inline',\r\n        float: 'right',\r\n        cursor: 'pointer'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.variableDetails\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    variableFetch\r\n}\r\n\r\nconst VariableDetailsDialog = (props) => {\r\n    const { data, classes, variableFetch, variableDetailsID, handleSetVariableDetailsID } = props;\r\n\r\n    React.useEffect(() => {\r\n        variableFetch(variableDetailsID);\r\n    }, [variableDetailsID]);\r\n\r\n    const handleClose = (e) => {\r\n        e.stopPropagation();\r\n        handleSetVariableDetailsID(null);\r\n        variableFetch(null);\r\n    }\r\n\r\n    return variableDetailsID ? (\r\n        <Dialog\r\n            // style={{zIndex: 5000}}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            open={Boolean(variableDetailsID)}\r\n            onClose={handleClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >            \r\n            <DialogTitle>{data ? data.Long_Name : <Skeleton/>} <Close className={classes.closeIcon} color='primary' onClick={handleClose}/></DialogTitle>\r\n            <DialogContent>\r\n                {\r\n                    data ? \r\n                        <>\r\n                        <DialogContentText>\r\n                            {data.Comment ? data.Comment : ''}\r\n                        </DialogContentText>\r\n                        \r\n                        <Table size='small'>\r\n                            <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell>Dataset</TableCell>\r\n                                        <TableCell title={data.Dataset_Name}>{data.Dataset_Name.length > 25 ? data.Dataset_Name.slice(0,23) + '...' : data.Dataset_Name}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Table Name</TableCell>\r\n                                        <TableCell title={data.Table_Name}>{data.Table_Name > 25 ? data.Table_Name.slice(0,23) + '...' : data.Table_Name}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Source</TableCell>\r\n                                        <TableCell title={data.Data_Source}>{data.Data_Source > 25 ? data.Data_Source.slice(0,23) + '...' : data.Data_Source}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Distributor</TableCell>\r\n                                        <TableCell title={data.Distributor}>{data.Distributor.length > 25 ? data.Distributor.slice(0,23) + '...' : data.Distributor}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Sensor</TableCell>\r\n                                        <TableCell>{data.Sensor}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Spatial Resolution</TableCell>\r\n                                        <TableCell>{data.Spatial_Resolution}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Resolution</TableCell>\r\n                                        <TableCell>{data.Temporal_Resolution}</TableCell>\r\n                                    </TableRow>\r\n                                    \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Coverage Begin</TableCell>\r\n                                        <TableCell>{data.Time_Min ? data.Time_Min.slice(0,10) : 'Irregular'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Temporal Coverage End</TableCell>\r\n                                        <TableCell>{data.Time_Max ? data.Time_Max.slice(0,10) : 'Irregular'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lat Coverage Begin</TableCell>\r\n                                        <TableCell>{`${data.Lat_Min}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell>Lat Coverage End</TableCell>\r\n                                        <TableCell>{`${data.Lat_Max}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lon Coverage Begin</TableCell>\r\n                                        <TableCell>{`${data.Lon_Min}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Lon Coverage End</TableCell>\r\n                                        <TableCell>{`${data.Lon_Max}\\xB0`}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Depth Coverage Begin</TableCell>\r\n                                        <TableCell>{data.Depth_Max ? `${data.Depth_Min}(m)` : 'Surface Only'}</TableCell>\r\n                                    </TableRow>\r\n        \r\n                                    <TableRow>\r\n                                        <TableCell>Depth Coverage End</TableCell>\r\n                                        <TableCell>{data.Depth_Max ? `${data.Depth_Max}(m)` : 'Surface Only'}</TableCell>\r\n                                    </TableRow>\r\n                        \r\n        \r\n                                    {data.Variable_Min !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Minimum Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Min}</TableCell>\r\n                                        </TableRow> : ''                      \r\n                                    }\r\n        \r\n                                    {data.Variable_Max !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Maximum Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Max}</TableCell>\r\n                                        </TableRow> : ''                       \r\n                                    }\r\n        \r\n                                    {data.Variable_Mean !== undefined ? \r\n                                        <TableRow>\r\n                                            <TableCell>Mean Value({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Mean}</TableCell>\r\n                                        </TableRow> : ''                      \r\n                                    }\r\n        \r\n                                    {data.Variable_Std !== undefined ?\r\n                                        <TableRow>\r\n                                            <TableCell>Standard Deviation({data.Unit})</TableCell>\r\n                                            <TableCell>{data.Variable_Std}</TableCell>\r\n                                        </TableRow> : ''                       \r\n                                    }\r\n                            </TableBody>\r\n                        </Table> </> \r\n                        \r\n                        : \r\n                        \r\n                        <>\r\n                            <Typography variant='h1'> <Skeleton/> </Typography>\r\n                            <Skeleton width={500} height={600}></Skeleton>\r\n                        </>\r\n                        }\r\n                    </DialogContent>            \r\n        </Dialog>\r\n    ) : ''\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VariableDetailsDialog));","// Modal notification for when sparse data queries is of max size\r\n\r\nimport React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { Dialog, DialogContent, Typography, withStyles } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\n\r\nimport z from '../../Enums/zIndex';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { sparseDataMaxSizeNotificationUpdate } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    sparseDataMaxSizeNotificationData: state.sparseDataMaxSizeNotificationData\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    sparseDataMaxSizeNotificationUpdate\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        minWidth: '700px',\r\n        maxWidth: '60vw',\r\n    },\r\n\r\n    dialogContent: {\r\n        padding: '20px 20px 12px 20px'\r\n    },\r\n\r\n    lastPointValueText: {\r\n        fontSize: '13px'\r\n    },\r\n\r\n    lastPointValueWrapper: {\r\n        backgroundColor: 'rgba(0, 0, 0, .15)',\r\n        padding: '8px',\r\n        margin: '12px 0'\r\n    },\r\n\r\n    closeIcon: {\r\n        fontSize: '20px',\r\n        color: 'white',\r\n        cursor: 'pointer',\r\n        position: 'absolute',\r\n        top: 2,\r\n        right: 2\r\n    },\r\n\r\n    list: {\r\n        padding: '0px 0px 0px 24px'\r\n    },\r\n\r\n    listItem: {\r\n        fontSize: '13px',\r\n        padding: '3px 0px 2px 24px'\r\n    }\r\n})\r\n\r\nconst SparseDataMaxSizeNotification = (props) => {\r\n    const { sparseDataMaxSizeNotificationUpdate, sparseDataMaxSizeNotificationData, classes } = props;\r\n    if(sparseDataMaxSizeNotificationData === null) return '';\r\n    const { time, lat, lon, depth } = sparseDataMaxSizeNotificationData;\r\n\r\n    const handleClose = () => sparseDataMaxSizeNotificationUpdate(null);\r\n\r\n    return(\r\n        <Dialog\r\n            onClose={handleClose}\r\n            open={Boolean(sparseDataMaxSizeNotificationData)}\r\n            style={{zIndex: z.NON_HELP_DIALOG}}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <Close className={classes.closeIcon} onClick={handleClose}/>\r\n\r\n            <DialogContent className={classes.dialogContent}>\r\n                <Typography>\r\n                    The data requested exceeds the maximum retrievable amount. A visualization has been created from a subset* of the data.\r\n                    If this does not include your data of interest, please reduce the range of the parameters in the control panel and create another visualization.\r\n                </Typography>    \r\n\r\n                <div className={classes.lastPointValueWrapper}>\r\n                    <Typography style={{fontSize: '13px'}}>\r\n                        *The subset includes all requested data with a time before {time.replace('T', ' ').replace('Z', '')} UTC. Some data with a time of exactly {time.replace('T', ' ').replace('Z', '')} may not be included.              \r\n                    </Typography>\r\n                </div>       \r\n\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SparseDataMaxSizeNotification));","// Monolith component for charts/plots control\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\nimport Cookies from 'js-cookie';\r\n\r\nimport { withStyles, Paper, Badge, Grid, IconButton, Typography, Drawer, TextField, Button, Tooltip } from '@material-ui/core';\r\nimport { Edit, ShowChart, Search, ChevronLeft, ChevronRight, Language, Info } from '@material-ui/icons';\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend, vizPageDataTargetSetAndFetchDetails, storedProcedureRequestSend, sparseDataQuerySend, guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport validation from '../../Enums/validation';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\nimport mapVizType from '../../Utility/Visualization/mapVizType';\r\nimport cleanSPParams from '../../Utility/Visualization/cleanSPParams'\r\nimport aggregateChartDataSize from '../../Utility/Visualization/aggregateChartDataSize';\r\nimport generateVariableSampleRangeParams from '../../Utility/Visualization/generateVariableSampleRangeParams';\r\n\r\nimport DataSearch from './DataSearch';\r\nimport ChartControl from './ChartControl';\r\nimport VariableDetailsDialog from './VariableDetailsDialog';\r\nimport SparseDataMaxSizeNotification from './SparseDataMaxSizeNotification';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts,\r\n    cart: state.cart,\r\n    dataTarget: state.vizPageDataTarget,\r\n    vizPageDataTargetDetails: state.vizPageDataTargetDetails,\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen,\r\n    vizPageDataTargetSetAndFetchDetails,\r\n    storedProcedureRequestSend,\r\n    sparseDataQuerySend,\r\n    guestPlotLimitNotificationSetIsVisible\r\n}\r\n\r\nconst drawerWidth = 280;\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        height: 'auto',\r\n        top: 180,\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    openPanelChevron: {\r\n        position: 'fixed',\r\n        left: '5px',\r\n        top: '380px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n      },\r\n    \r\n      closePanelChevron: {\r\n        position: 'fixed',\r\n        left: drawerWidth + 5,\r\n        top: '380px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n      },\r\n\r\n    dataSearchMenuPaper: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        bottom: 60,\r\n        left: 0,\r\n        width: '98vw',\r\n        height: 'auto',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n    \r\n    formGridItem: {\r\n        border: '1px solid #313131',\r\n        borderBottom: 'none',\r\n        borderTop: 'none',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  padLeft: {\r\n    padding: '6px 0 2px 7px',\r\n  },\r\n\r\n  dateTimeInput: {\r\n    padding: '6px 0 2px 7px',\r\n    alignItems: 'start'\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow',\r\n    fontSize: '12px'\r\n  },\r\n\r\n    controlPanelItem: {\r\n        textTransform: 'none',\r\n        textAlign: 'left',\r\n        fontSize: '17px',\r\n        fontWeight: 200,\r\n        color: colors.primary,\r\n        justifyContent: 'flex-start',\r\n        height: '56px'\r\n    },\r\n\r\n    controlPanelItemLabel: {\r\n      whiteSpace: 'nowrap',\r\n      overflow: 'hidden',\r\n      textOverflow: 'ellipsis',\r\n      display: 'inline-block'\r\n    },\r\n\r\n    controlPanelItemStartIcon: {\r\n        display: 'inline-block'\r\n    },\r\n\r\n    textField: {\r\n        width: '100%'\r\n    },\r\n\r\n    drawHelpText: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        margin: '0 calc(50vw - 226px)',\r\n        zIndex: z.CONTROL_PRIMARY,\r\n        color: 'white',\r\n        fontSize: '18px',\r\n        backgroundColor: 'rgba(0, 0, 0, .6)',\r\n        padding: '8px',\r\n        backdropFilter: 'blur(5px)',\r\n        borderRadius: '4px'\r\n    },\r\n\r\n    popoutButtonPaper: {\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        borderRadius: '2px',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    popoutButtonIcon: {\r\n        width: '24px',\r\n        height: '24px'\r\n    },\r\n\r\n    popoutButtonBase: {\r\n        padding: '9px'\r\n    }\r\n});\r\n\r\nclass VizControlPanel extends React.Component {\r\n\r\n    state = {\r\n        variableDetailsID: null,\r\n        showControlPanel: true,\r\n        dataSearchMenuOpen: false,\r\n        tableName: '',\r\n        depth1: 0,\r\n        depth2: 0,\r\n        dt1: '1900-01-01',\r\n        dt2: new Date().toISOString().slice(0,10),\r\n        lat1: 0,\r\n        lat2: 0,\r\n        lon1: 0,\r\n        lon2: 0,\r\n        selectedVizType: '',\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        addedGlobeUIListeners: false,\r\n        showDrawHelp: false,\r\n        storedParams: {\r\n            depth1: 0,\r\n            depth2: 0,\r\n            dt1: '1900-01-01',\r\n            dt2: new Date().toISOString().slice(0,10),\r\n            lat1: 0,\r\n            lat2: 0,\r\n            lon1: 0,\r\n            lon2: 0,\r\n        }\r\n    }\r\n\r\n    searchInputRef = React.createRef();\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.user) this.props.guestPlotLimitNotificationSetIsVisible(true);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n\r\n        if(prevProps.charts.length && !this.props.charts.length){\r\n            this.props.handleShowGlobe();\r\n        }\r\n\r\n        if((this.props.mapContainerRef.current) && (prevState.lat1 !== this.state.lat1 || prevState.lat2 !== this.state.lat2 || prevState.lon1 !== this.state.lon1 || prevState.lon2 !== this.state.lon2)){\r\n            \r\n            const lat1 = parseFloat(this.state.lat1);\r\n            const lat2 = parseFloat(this.state.lat2);\r\n            const lon1 = parseFloat(this.state.lon1);\r\n            let _lon2 = parseFloat(this.state.lon2);\r\n            const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n            this.props.mapContainerRef.current.regionLayer.removeAll();\r\n            var polygon = {\r\n                type: 'polygon', \r\n                rings: [\r\n                    [lon1, lat1],\r\n                    [lon2, lat1],\r\n                    [lon2, lat2],\r\n                    [lon1, lat2],\r\n                    [lon1, lat1]\r\n                ]\r\n            };\r\n\r\n            let regionGraphic = new this.props.mapContainerRef.current.props.esriModules.Graphic({\r\n                geometry: polygon,\r\n                symbol: polygonSymbol\r\n            })\r\n\r\n            this.props.mapContainerRef.current.regionLayer.add(regionGraphic);\r\n        }\r\n\r\n        if(this.props.vizPageDataTargetDetails && this.props.vizPageDataTargetDetails !== prevProps.vizPageDataTargetDetails){\r\n\r\n            let data = this.props.vizPageDataTargetDetails;\r\n            let surfaceOnly = !data.Depth_Max;\r\n            let irregularSpatialResolution = data.Spatial_Resolution === 'Irregular';\r\n\r\n            let derivedParams = generateVariableSampleRangeParams(data);\r\n\r\n            let { lat1, lat2, lon1, lon2 } = derivedParams;\r\n\r\n            if(irregularSpatialResolution && this.props.globeUIRef.current){\r\n                this.props.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            if(!irregularSpatialResolution && data.temporalResolution !== temporalResolutions.monthlyClimatology){\r\n                this.props.snackbarOpen('Default parameters for satellite and model data will exceed the maximum visualizable size. Please reduce the time range or region size.')\r\n            }\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                ...derivedParams,\r\n                selectedVizType: '',\r\n                storedParams: {\r\n                    ...this.state.storedParams,\r\n                    ...derivedParams\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.vizPageDataTargetSetAndFetchDetails(null);\r\n        this.props.mapContainerRef.current && this.props.mapContainerRef.current.regionLayer && this.props.mapContainerRef.current.regionLayer.removeAll();\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: parseFloat(extent.ymin.toFixed(3)),\r\n            lat2: parseFloat(extent.ymax.toFixed(3)),\r\n            lon1: parseFloat(_lon1.toFixed(3)),\r\n            lon2: parseFloat(_lon2.toFixed(3))\r\n        };\r\n\r\n        this.setState({...this.state, ...newCoordinates, storedParams: {...this.state.storedParams, ...newCoordinates}});\r\n    }\r\n\r\n    handleUpdateParameters = (parameters) => {\r\n        const { lat1, lat2, lon1, lon2, depth1, depth2, dt1, dt2} = parameters;\r\n        this.setState({...this.state, lat1, lat2, lon1, lon2, depth1, depth2, dt1, dt2});\r\n    }\r\n\r\n    handleShowChartsClick = () => {\r\n        if(this.props.plotsActiveTab === 0){\r\n            this.props.handlePlotsSetActiveTab(null, 1);\r\n        }\r\n\r\n        else {\r\n            this.props.handlePlotsSetActiveTab(null, 0);\r\n        }\r\n    }\r\n\r\n    handleVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state;\r\n\r\n        let isSparseVariable = this.props.vizPageDataTargetDetails.Spatial_Resolution === spatialResolutions.irregular;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                dt1 + '-01-1900' :\r\n                dt1,\r\n            dt2: this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                dt2 + '-01-1900' :\r\n                dt2 + 'T23:59:59',\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.props.vizPageDataTargetDetails.Variable,\r\n            tableName: this.props.vizPageDataTargetDetails.Table_Name,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.props.vizPageDataTargetDetails\r\n        }\r\n\r\n        if(isSparseVariable && mapping.sp !== storedProcedures.depthProfile) this.props.sparseDataQuerySend(payload);\r\n        else this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    handleDrawClick = () => {\r\n        const { esriModules, regionLayer } = this.props.globeUIRef.current.props;\r\n        var { sketchModel } = this.props.globeUIRef.current;\r\n\r\n        if(!this.state.addedGlobeUIListeners){\r\n            const throttledUpdate = throttle(75, (event) => {\r\n                if(event.state === 'active'){\r\n                    this.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                }\r\n            })\r\n    \r\n            sketchModel.on(\"create\", (event) => {\r\n                if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n                    sketchModel.complete();\r\n                }\r\n    \r\n                if(event.graphic && event.graphic.visible) {\r\n                    event.graphic.visible = false;\r\n                }\r\n\r\n                if(event.state === 'cancel'){\r\n                    sketchModel.cancel();\r\n                    this.setState({...this.state, showDrawHelp: false});\r\n                }\r\n\r\n                if(event.state === 'start'){\r\n                    regionLayer.removeAll();\r\n                }\r\n    \r\n                if(event.state === \"complete\") {\r\n                    this.setState({...this.state, showDrawHelp: false});\r\n                    this.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                }\r\n            });\r\n    \r\n            sketchModel.on('create', throttledUpdate)\r\n    \r\n            sketchModel.on('update', (event) => {\r\n                if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n                    if(event.state === 'cancel') return;\r\n                    this.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n                }\r\n            });          \r\n        }\r\n                \r\n        this.setState({...this.state, showDrawHelp: true, addedGlobeUIListeners: true});\r\n\r\n        if(this.state.showDrawHelp) sketchModel.cancel();\r\n\r\n        else {\r\n            sketchModel.create('polyline', {\r\n                mode:'click'            \r\n            });\r\n        }\r\n    }\r\n\r\n    handleSelectDataTarget = (target) => {\r\n        this.setState({...this.state, dataSearchMenuOpen: false});\r\n        this.props.vizPageDataTargetSetAndFetchDetails(target);\r\n    }\r\n\r\n    handleCloseDataSearch = () => {\r\n        if(this.state.dataSearchMenuOpen){\r\n            this.setState({...this.state, dataSearchMenuOpen: false});\r\n        }\r\n    }\r\n\r\n    handleSetVariableDetailsID = (variableDetailsID) => {\r\n        this.setState({...this.state, variableDetailsID})\r\n    }\r\n\r\n    handleChangeInputValue = (e) => {\r\n        let parseThese = ['lat1', 'lat2', 'lon1', 'lon2', 'depth1', 'depth2'];\r\n        let parsed = parseFloat(e.target.value);\r\n        let value;\r\n\r\n        if(parseThese.includes(e.target.name)){\r\n            if(isNaN(parsed)){\r\n                value = e.target.value;\r\n            }\r\n\r\n            else value = parsed;\r\n        }\r\n\r\n        else {\r\n            value = e.target.value;\r\n        }\r\n\r\n        this.setState({...this.state, [e.target.name]: value, storedParams: {...this.state.storedParams, [e.target.name]: value}});        \r\n    }\r\n\r\n    handleToggleCharts = () => {\r\n\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { vizPageDataTargetDetails } = this.props;\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2, selectedVizType } = this.state;\r\n        \r\n        if(!vizPageDataTargetDetails) return 0;        \r\n\r\n        if(vizPageDataTargetDetails.Spatial_Resolution === spatialResolutions.irregular) {\r\n            return 1;\r\n        }\r\n        \r\n        else {\r\n            const date1 = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? dt1 : Date.parse(dt1);\r\n            const date2 = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? dt2 : Date.parse(dt2);\r\n            \r\n            const dayDiff = (date2 - date1) / 86400000;\r\n            \r\n            const res = mapSpatialResolutionToNumber(vizPageDataTargetDetails.Spatial_Resolution);\r\n            var dateCount = vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology ? date2 - date1 + 1\r\n                : Math.floor(dayDiff / mapTemporalResolutionToNumber(vizPageDataTargetDetails.Temporal_Resolution)) || 1;\r\n\r\n            dateCount *= 1.4 // add more weight to date because of sql indexing\r\n\r\n            const depthCount = depthUtils.count({data: vizPageDataTargetDetails}, depth1, depth2) || 1;\r\n            \r\n            const latCount = (lat2 - lat1) / res;\r\n            const lonCount = lon2 > lon1 ? (lon2 - lon1) / res\r\n                : ((180 - lon1) + (lon2 + 180)) / res;\r\n            const pointCount = lonCount * latCount * depthCount * dateCount;\r\n            if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return pointCount / 200;\r\n\r\n            return pointCount;\r\n        }\r\n\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        if(this.state.depth1 < 0) return 'Depth cannot be negative';\r\n        if(this.state.depth1 > this.state.depth2) return 'Start cannot be greater than end';\r\n        if(this.state.depth1 > this.props.vizPageDataTargetDetails.Depth_Max) return `Maximum depth start is ${this.props.vizPageDataTargetDetails.Depth_Max}`\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        if(this.state.depth2 < 0) return 'Depth cannot be negative';\r\n        if(this.state.depth1 > this.state.depth2) return 'Start cannot be greater than end';\r\n        if(this.state.depth2 < this.props.vizPageDataTargetDetails.Depth_Min) return `Minimum depth end is ${this.props.vizPageDataTargetDetails.Depth_Min}`;\r\n        return ''; \r\n    }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology) {\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            return '';\r\n        }\r\n\r\n        else {\r\n            if(!this.state.dt1) return \"Invalid date\"\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            if(this.state.dt1 < this.props.vizPageDataTargetDetails.Time_Min.slice(0,10)) {\r\n                return `Minimum start date is ${this.props.vizPageDataTargetDetails.Time_Min.slice(5, 10) + '-' + this.props.vizPageDataTargetDetails.Time_Min.slice(0, 4)}`\r\n            };\r\n            return '';\r\n        }\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.vizPageDataTargetDetails.Temporal_Resolution === temporalResolutions.monthlyClimatology) {\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            return '';\r\n        }\r\n\r\n        else {\r\n            if(!this.state.dt2) return \"Invalid date\"\r\n            if(this.state.dt1 > this.state.dt2) return 'Start cannot be greater than end';\r\n            if(this.state.dt2 > this.props.vizPageDataTargetDetails.Time_Max.slice(0,10)) {\r\n                return `Maximum end date is ${this.props.vizPageDataTargetDetails.Time_Max.slice(5, 10) + '-' + this.props.vizPageDataTargetDetails.Time_Max.slice(0, 4)}`\r\n            };\r\n            return '';\r\n        }\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        if(this.state.lat1 > this.props.vizPageDataTargetDetails.Lat_Max) return `Maximum start lat is ${this.props.vizPageDataTargetDetails.Lat_Max}`;\r\n        if(this.state.lat1 > this.state.lat2) return `Start cannot be greater than end`;\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        if(this.state.lat2 < this.props.vizPageDataTargetDetails.Lat_Min) return `Minimum end lat is ${this.props.vizPageDataTargetDetails.Lat_Min}`;\r\n        if(this.state.lat1 > this.state.lat2) return `Start cannot be greater than end`;\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        const { lon1, lon2 } = this.state;\r\n        const { Lon_Min, Lon_Max } = this.props.vizPageDataTargetDetails;\r\n\r\n        if(lon2 >= lon1){\r\n            if(lon1 > Lon_Max) return `Maximum start lon is ${Lon_Max}` \r\n        }\r\n\r\n        else {\r\n            if(Lon_Min > lon1 || Lon_Max > lon1 || Lon_Min < lon2 || Lon_Max < lon2){}\r\n            else return `Longitude outside dataset coverage`\r\n        }\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        const { lon1, lon2 } = this.state;\r\n        const { Lon_Min, Lon_Max } = this.props.vizPageDataTargetDetails;\r\n        \r\n        if(lon2 >= lon1) {\r\n            if(lon2 < Lon_Min) return `Minimum end lon is ${Lon_Min}`\r\n        }\r\n        \r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.state.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', 'variable');\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.state.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.state.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', 'variable');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.state.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        const aggregateSize = aggregateChartDataSize(this.props.charts);\r\n\r\n        if(!this.props.user){\r\n            let guestPlotCount = parseInt(Cookies.get('guestPlotCount'));\r\n            if(guestPlotCount && guestPlotCount >= 10) return validation.generic.guestMaximumReached;\r\n        }\r\n\r\n        if(!this.state.selectedVizType) return validation.generic.vizTypeMissing;\r\n        if(this.state.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.state.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n        \r\n        if(this.state.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count({data: this.props.vizPageDataTargetDetails}, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n\r\n        if(this.state.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1500000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.vizPageDataTargetDetails) return validation.generic.variableMissing;\r\n        if(this.props.charts.length > 9) return 'Total number of plots is too large. Please delete 1 or more'\r\n        if(aggregateSize + dataSize > 4000000) return 'Total rendered data amount is too large. Please delete 1 or more plots.'\r\n        \r\n        if(\r\n            !this.state.irregularSpatialResolution && \r\n            this.state.selectedVizType !== vizSubTypes.timeSeries && \r\n            (Date.parse(this.state.dt2) - Date.parse(this.state.dt1) > 86400000 * 365)\r\n            ) return \"Maximum date range for non-time series plots of gridded data is 1 year\";\r\n        return ''\r\n    }\r\n\r\n    render = () => {\r\n        const { \r\n            classes,            \r\n            handleLatLonChange,\r\n            dataTarget,\r\n            vizPageDataTargetDetails,\r\n            charts,\r\n            plotsActiveTab\r\n        } = this.props;\r\n\r\n        const {\r\n            variableDetailsID,\r\n            showControlPanel,\r\n            dataSearchMenuOpen,\r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType\r\n        } = this.state;\r\n\r\n        let details = vizPageDataTargetDetails;\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n\r\n        if(details) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDate(),\r\n                this.checkEndDate()\r\n            ];\r\n        } else \r\n        validations = Array(14).fill('');\r\n        \r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateMessage,\r\n            endDateMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            startDateMessage,\r\n            endDateMessage\r\n        ];\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {/* <ChartControlTabs handlePlotsSetActiveTab={this.props.handlePlotsSetActiveTab} plotsActiveTab={plotsActiveTab}/> */}\r\n\r\n                <VariableDetailsDialog variableDetailsID={variableDetailsID} handleSetVariableDetailsID={this.handleSetVariableDetailsID}/>\r\n                <SparseDataMaxSizeNotification/>\r\n\r\n                    {\r\n                        this.state.showDrawHelp ? \r\n\r\n                        <Typography className={classes.drawHelpText}>\r\n                            Click on the globe to start drawing, and again to finish.\r\n                        </Typography>\r\n\r\n                        : ''\r\n                    }\r\n\r\n                { showControlPanel ?\r\n\r\n                <div>\r\n                    <Tooltip title=\"Hide control panel\" placement='right'>\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={() => this.setState({...this.state, showControlPanel: false})}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </div>\r\n\r\n                :\r\n                \r\n                <Tooltip title='Show control panel' placement='right'>\r\n                    <IconButton \r\n                        className={classes.openPanelChevron} \r\n                        aria-label=\"toggle-panel\" \r\n                        color=\"primary\" \r\n                        onClick={() => this.setState({...this.state, showControlPanel: true})}>\r\n                        <ChevronRight style={{fontSize: 32}}/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n\r\n                    {\r\n                        dataTarget ? \r\n                            <Grid container style={{borderBottom: '1px solid black'}}>\r\n                                <Grid item xs={10}>\r\n                                    <Button\r\n                                        fullWidth={true}\r\n                                        className={classes.controlPanelItem}                                        \r\n                                        startIcon={<Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>}\r\n                                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                                        classes={{\r\n                                            label: classes.controlPanelItemLabel,\r\n                                            startIcon: classes.controlPanelItemStartIcon\r\n                                        }}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                        <span style={{color: this.state.showDrawHelp ? 'rgba(0, 0, 0, 0.38)' : 'white'}}>{dataTarget.Long_Name}</span>\r\n                                    </Button>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={2} style={{borderLeft: '1px solid black'}}>\r\n                                    <Tooltip title='Show variable details' placement='top'>\r\n                                        <span>\r\n                                            <IconButton \r\n                                                onClick={(e) => {\r\n                                                    this.handleSetVariableDetailsID(dataTarget.ID);\r\n                                                    e.stopPropagation();\r\n                                                }}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            >\r\n                                                <Info style={{fontSize: '26px', marginTop: '3px'}}/>\r\n                                            </IconButton>                                   \r\n                                        </span>\r\n                                    </Tooltip>\r\n                                </Grid>\r\n                            </Grid> \r\n                    \r\n                    :\r\n\r\n                    <Button\r\n                        fullWidth={true}\r\n                        className={classes.controlPanelItem}\r\n                        style={{borderBottom: '1px solid black'}}\r\n                        startIcon={<Search style={{fontSize: '22px', margin: '0 0 -6px 4px'}}/>}\r\n                        onClick={() => this.setState({...this.state, dataSearchMenuOpen: true})}\r\n                        classes={{\r\n                            label: classes.controlPanelItemLabel,\r\n                            startIcon: classes.controlPanelItemStartIcon\r\n                        }}\r\n                        disabled={this.state.showDrawHelp}\r\n                    >\r\n                        Select a Variable to Begin\r\n                    </Button>\r\n                    }                    \r\n\r\n                    <>\r\n\r\n                            <Grid container>\r\n                                {\r\n                                    details && details.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n                                    <>\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt1'\r\n                                                className={classes.textField}\r\n                                                id=\"dt1\"\r\n                                                label=\"Start Month\"\r\n                                                type=\"number\"\r\n                                                value={dt1}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: {\r\n                                                        min: 1,\r\n                                                        max: 12\r\n                                                    },\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt2'\r\n                                                className={classes.textField}\r\n                                                id=\"dt2\"\r\n                                                label=\"End Month\"\r\n                                                type=\"number\"\r\n                                                min={1}\r\n                                                max={12}\r\n                                                step={1}\r\n                                                value={dt2}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: {\r\n                                                        min: 1,\r\n                                                        max: 12,\r\n                                                    },\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n                                    </>\r\n\r\n                                    :\r\n\r\n                                    <>\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt1'\r\n                                                className={classes.textField}\r\n                                                id=\"dt1\"\r\n                                                label=\"Start Date(m/d/y)\"\r\n                                                step={1}\r\n                                                type=\"date\"\r\n                                                value={dt1}\r\n                                                error={Boolean(startDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={startDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: details ? {\r\n                                                        min: details.Time_Min.slice(0,10),\r\n                                                        max: details.Time_Max.slice(0,10)\r\n                                                    } : {}\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>  \r\n\r\n                                        <Grid item xs={6} className={classes.formGridItem}>\r\n                                            <TextField\r\n                                                name='dt2'\r\n                                                className={classes.textField}\r\n                                                id=\"dt2\"\r\n                                                label=\"End Date(m/d/y)\"\r\n                                                type=\"date\"\r\n                                                value={dt2}\r\n                                                error={Boolean(endDateMessage)}\r\n                                                FormHelperTextProps={{className: classes.helperText}}\r\n                                                helperText={endDateMessage}\r\n                                                InputProps={{\r\n                                                    className:classes.dateTimeInput,\r\n                                                    inputProps: details ? {\r\n                                                        min: details.Time_Min.slice(0,10),\r\n                                                        max: details.Time_Max.slice(0,10)\r\n                                                    } : {}\r\n                                                }}\r\n                                                InputLabelProps={{\r\n                                                    shrink: true,\r\n                                                    className:classes.padLeft\r\n                                                }}\r\n                                                onChange={this.handleChangeInputValue}\r\n                                                disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                            />\r\n                                        </Grid>\r\n                                    </>\r\n\r\n                                }\r\n                                \r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lat1-input\"\r\n                                        label={\"Start Lat(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lat1}\r\n                                        onChange={handleLatLonChange}\r\n                                        error={Boolean(startLatMessage)}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startLatMessage}\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lat_Min,\r\n                                                max: details.Lat_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        name='lat1'\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lat2-input\"\r\n                                        error={Boolean(endLatMessage)}\r\n                                        label={\"End Lat(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lat2}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endLatMessage}\r\n                                        name='lat2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lat_Min,\r\n                                                max: details.Lat_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lon1-input\"\r\n                                        error={Boolean(startLonMessage)}\r\n                                        label={\"Start Lon(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lon1}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startLonMessage}\r\n                                        name='lon1'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lon_Min,\r\n                                                max: details.Lon_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"lon2-input\"\r\n                                        error={Boolean(endLonMessage)}\r\n                                        label={\"End Lon(\\xB0)\"}\r\n                                        className={classes.textField}\r\n                                        value={lon2}\r\n                                        onChange={handleLatLonChange}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endLonMessage}\r\n                                        name='lon2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Lon_Min,\r\n                                                max: details.Lon_Max,\r\n                                                step: .001\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n\r\n                                    {showControlPanel ? \r\n                                        <Paper className={classes.popoutButtonPaper} style={{left: drawerWidth + 1, top: '146px'}}>\r\n                                            <Tooltip title='Draw Region on Globe'>\r\n                                                <span>\r\n                                                    <IconButton \r\n                                                        className={classes.popoutButtonBase} \r\n                                                        onClick={this.handleDrawClick}\r\n                                                        disabled={!details || plotsActiveTab !== 0}\r\n                                                    >\r\n                                                        <Edit className={classes.popoutButtonIcon}/>                                            \r\n                                                    </IconButton>\r\n                                                </span>\r\n                                            </Tooltip>\r\n                                        </Paper>                                   \r\n                                    : ''}\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"depth1-input\"\r\n                                        error={Boolean(startDepthMessage)}\r\n                                        label=\"Start Depth(m)\"\r\n                                        className={classes.textField}\r\n                                        value={depth1}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={startDepthMessage}\r\n                                        name='depth1'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Depth_Max ? details.Depth_Min : 0,\r\n                                                max: details.Depth_Max ? details.Depth_Max : 0,\r\n                                                step: .1\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || this.state.surfaceOnly || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={6} className={classes.formGridItem}>\r\n                                    <TextField\r\n                                        type='number'\r\n                                        id=\"depth2-input\"\r\n                                        error={Boolean(endDepthMessage)}\r\n                                        label=\"End Depth(m)\"\r\n                                        className={classes.textField}\r\n                                        value={depth2}\r\n                                        FormHelperTextProps={{className: classes.helperText}}\r\n                                        helperText={endDepthMessage}\r\n                                        name='depth2'\r\n                                        InputProps={{\r\n                                            className:classes.padLeft,\r\n                                            inputProps: details ? {\r\n                                                min: details.Depth_Max ? details.Depth_Min : 0,\r\n                                                max: details.Depth_Max ? details.Depth_Max : 0,\r\n                                                step: .1\r\n                                            } : {}\r\n                                        }}\r\n                                        InputLabelProps={{className:classes.padLeft}}\r\n                                        onChange={this.handleChangeInputValue}\r\n                                        disabled={this.state.showDrawHelp || this.state.surfaceOnly || !vizPageDataTargetDetails}\r\n                                    >\r\n                                    </TextField>\r\n                                </Grid>\r\n\r\n                                <ChartControl\r\n                                    overrideDisabledStyle={overrideDisabledStyle}\r\n                                    heatmapMessage={heatmapMessage}\r\n                                    contourMessage={contourMessage}\r\n                                    sectionMapMessage={sectionMapMessage}\r\n                                    histogramMessage={histogramMessage}\r\n                                    timeSeriesMessage={timeSeriesMessage}\r\n                                    depthProfileMessage={depthProfileMessage}\r\n                                    sparseMapMessage={sparseMapMessage}\r\n                                    visualizeButtonTooltip={visualizeButtonTooltip}\r\n                                    disableVisualizeMessage={disableVisualizeMessage}\r\n                                    selectedVizType={selectedVizType}\r\n                                    handleChangeInputValue={this.handleChangeInputValue}\r\n                                    onVisualize={this.handleVisualize}\r\n                                    showChartControl={this.state.showChartControl}\r\n                                    variableDetails={this.props.vizPageDataTargetDetails}\r\n                                    handleVisualize={this.handleVisualize}\r\n                                    disabled={this.state.showDrawHelp || !vizPageDataTargetDetails}\r\n                                />  \r\n\r\n                                {\r\n                                    charts.length && showControlPanel ?\r\n                                    \r\n                                    <Paper className={classes.popoutButtonPaper} style={{left: '281px', top: '343px'}}>\r\n                                        <Tooltip title={plotsActiveTab !== 0 ? 'Return to Globe' : 'Show Charts'}>\r\n                                            <IconButton disabled={this.state.showDrawHelp} className={classes.popoutButtonBase} onClick={this.handleShowChartsClick}>\r\n                                                {\r\n                                                    plotsActiveTab !== 0 ?\r\n                                                    <Language className={classes.popoutButtonIcon} style={{color:colors.primary}}/> \r\n                                                    :                                                    \r\n                                                    <Badge badgeContent={charts.length} color='primary'>\r\n                                                        <ShowChart className={classes.popoutButtonIcon} style={{color:colors.primary}}/>\r\n                                                    </Badge>\r\n                                                }                                                \r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </Paper>\r\n\r\n                                    : ''\r\n                                }                                    \r\n                            </Grid>\r\n                            </>\r\n\r\n                </Drawer>\r\n                    <Paper className={classes.dataSearchMenuPaper} style={dataSearchMenuOpen ? {} : {display: 'none'}}>\r\n                        <DataSearch\r\n                            handleSelectDataTarget={this.handleSelectDataTarget}\r\n                            handleSetVariableDetailsID={this.handleSetVariableDetailsID}\r\n                            handleCloseDataSearch={this.handleCloseDataSearch}\r\n                            searchInputRef={this.searchInputRef}\r\n                        />\r\n                    </Paper>\r\n            </React.Fragment>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VizControlPanel));","// guest login pop-up\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { Dialog, DialogContent, DialogActions, Button, Link, Typography, withStyles } from '@material-ui/core';\r\n\r\nimport { guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\nimport { guestTokenRequestSend } from '../../Redux/actions/user';\r\n\r\nimport z from '../../Enums/zIndex';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogWrapper: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    dialogRoot: {\r\n        zIndex: `${z.NON_HELP_DIALOG + 1} !important`\r\n    },\r\n\r\n    link: {\r\n        fontSize: '16px',\r\n        whiteSpace: 'pre-wrap',\r\n        display: 'inline-block',\r\n        paddingBottom: '1px'\r\n    },\r\n\r\n    dialogActionButton: {\r\n        textTransform: 'none',\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n    guestPlotLimitNotificationIsVisible: state.guestPlotLimitNotificationIsVisible,\r\n    user: state.user,\r\n    userIsGuest: state.userIsGuest\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    guestPlotLimitNotificationSetIsVisible,\r\n    showLoginDialog,\r\n    guestTokenRequestSend\r\n}\r\n\r\nconst GuestPlotLimitNotification = (props) => {\r\n    const { classes } = props;\r\n\r\n    const handleLoginButtonClick = () => {\r\n        // props.guestPlotLimitNotificationSetIsVisible(false);\r\n        props.showLoginDialog();\r\n    }\r\n\r\n    const handleOnClose = () => {\r\n        if(props.userIsGuest) props.guestPlotLimitNotificationSetIsVisible(false)\r\n    }\r\n\r\n    let guestPlotCount = parseInt(Cookies.get('guestPlotCount')) || 0;\r\n\r\n    let dialogIsOpen = Boolean(props.guestPlotLimitNotificationIsVisible && !props.user)\r\n\r\n    return (\r\n        <Dialog\r\n            open={dialogIsOpen}\r\n            onClose={handleOnClose}\r\n            PaperProps={{\r\n                className: classes.dialogWrapper\r\n            }}\r\n            classes={{\r\n                root: classes.dialogRoot\r\n            }}\r\n        >\r\n\r\n            <DialogContent>\r\n                <Typography style={{marginBottom: '14px'}}>\r\n                    Welcome to the Simons CMAP visualization tools. You can explore the visualization features as a guest without \r\n                    registering and create up to 10 plots per day. Registration provides access to the full suite of data submission tools, \r\n                    the data visualization tools and the Simons CMAP API.\r\n                </Typography>\r\n\r\n                <Typography style={{marginBottom: '14px'}}>\r\n                    You can <Link component='button' onClick={props.guestTokenRequestSend} className={classes.link}>Continue as a Guest</Link>, \r\n                    with {10 - guestPlotCount}/10 plots remaining,\r\n                </Typography>\r\n\r\n                <Typography style={{marginBottom: '14px'}}>\r\n                    Or you can\r\n                    <Link component={RouterLink} to={'/register'} className={classes.link}> Register</Link> or\r\n                    <Link component='button' onClick={handleLoginButtonClick} className={classes.link}> Log in</Link> to your existing account \r\n                    for expanded access to CMAP.\r\n                </Typography>\r\n\r\n                <DialogActions>\r\n                    <Button variant='outlined' className={classes.dialogActionButton} onClick={handleLoginButtonClick}>\r\n                        Login\r\n                    </Button>\r\n\r\n                    <Button onClick variant='outlined' onClick={() => props.history.push('/register')} className={classes.dialogActionButton}>\r\n                        Register\r\n                    </Button>\r\n\r\n                    <Button variant='outlined' className={classes.dialogActionButton} onClick={props.guestTokenRequestSend}>\r\n                        Continue As Guest\r\n                    </Button>\r\n                </DialogActions>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(withRouter(GuestPlotLimitNotification)));","export default [\r\n    null,\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n]","import months from '../Enums/months';\r\n\r\nexport default (dateString, hasHour, isMonthly) => {\r\n    return isMonthly ? months[parseInt(dateString)] : hasHour ? dateString.slice(0,10) + ' ' + dateString.slice(11,16): dateString.slice(0,10);\r\n}","import colors from '../Enums/colors';\r\n\r\nconst spanStyles = 'style=\"width:50%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\"'\r\n\r\nexport default {\r\n    layout: {\r\n        font: {color: '#ffffff'},\r\n        paper_bgcolor: colors.backgroundGray,\r\n        autosize: true,\r\n        margin: {\r\n            t: 116,\r\n            b: 104\r\n        },\r\n    },\r\n\r\n    config: {\r\n        displaylogo: false\r\n    },    \r\n\r\n    annotations: (distributor, dataSource) => {\r\n        // let yshift = ((document.documentElement.clientWidth * (height / 100)) / -2) + 20;\r\n        let _dataSource = dataSource.length > 70 ? \r\n                'Data Source: ' + dataSource.slice(0, 67) + '...' : \r\n                'Data Source: ' + dataSource;\r\n\r\n        let _distributor = distributor ?\r\n            distributor.length > 70 ?\r\n                '<br>Distributor: ' + distributor.slice(0, 67) + '...' :\r\n                '<br>Distributor: ' + distributor :\r\n            '';\r\n\r\n        let cmapCredit = '<br>Visualization provided by Simons CMAP';        \r\n        \r\n        return (\r\n            [\r\n                {\r\n                    // text: `Data Source: ${distributor.length < 35 ? \r\n                    //     distributor : \r\n                    //     distributor.slice(0,32) + '...'} -- Provided by Simons CMAP`,\r\n                    text: _dataSource + _distributor + cmapCredit,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                    xref: 'paper',\r\n                    yref: 'paper',\r\n                    // yshift: height ? 0 - height + 160 : -290,\r\n                    // yshift,\r\n                    yanchor: 'top',\r\n                    x: .5,\r\n                    // y: -.1,\r\n                    y: 0,\r\n                    yshift: -56,\r\n                    showarrow: false,\r\n                    xanchor: 'center',\r\n                }\r\n            ]\r\n        )   \r\n    }\r\n}","// Wrapper for chart controls\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles, Tooltip, IconButton, Menu, MenuItem, Popover, Grid, FormControl, InputLabel, OutlinedInput, FormHelperText, Button, ButtonGroup } from '@material-ui/core';\r\nimport { DateRange, CloudDownload, Palette, SwapVert, Gamepad, LineWeight, ShowChart, Tune, Warning } from '@material-ui/icons';\r\n\r\nimport { sparseDataMaxSizeNotificationUpdate } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport z from '../../Enums/zIndex';\r\nimport SPARSE_DATA_QUERY_MAX_SIZE from '../../Enums/sparseDataQueryMaxSize';\r\nimport lastRowTimeSpaceDataFromChart from '../../Utility/Visualization/lastRowTimeSpaceDataFromChart';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\n\r\nconst mapDispatchToProps = {\r\n    sparseDataMaxSizeNotificationUpdate\r\n}\r\n\r\nconst styles = theme => ({\r\n    popover: {\r\n        width: '470px',\r\n        height: '120px',\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2.5),\r\n        paddingRight: theme.spacing(2.5),\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    iconButton: {\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n    },\r\n\r\n    colorForm: {\r\n        width: '100%'\r\n    },\r\n\r\n    lastIcon: {\r\n        borderTopRightRadius: '10%',\r\n        borderBottomRightRadius: '10%'\r\n    },\r\n\r\n    buttonGroup: {\r\n        display: 'block',\r\n        margin: '0px auto 8px auto',\r\n        maxWidth: '700px',\r\n        textAlign: 'center',\r\n        pointerEvents: 'auto'\r\n    },\r\n\r\n    depressed: {\r\n        boxShadow: 'inset 1px 1px 5px #262626'\r\n    },\r\n\r\n    colorscaleMenu: {\r\n        maxHeight: '400px',\r\n        zIndex: z.CONTROL_PRIMARY\r\n    },\r\n\r\n    setPopoverZ: {\r\n        zIndex: `${z.CONTROL_PRIMARY} !important`\r\n    },\r\n\r\n    grayBackground: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    sparseDataMaxSizeWarningIcon: {\r\n        color: colors.errorYellow,\r\n        position: 'absolute',\r\n        top: '60px',\r\n        left: 'calc(50% - 12px)',\r\n        cursor: 'pointer',\r\n        zIndex: z.CONTROL_PRIMARY - 1,\r\n        pointerEvents: 'auto'\r\n    }\r\n})\r\n\r\nconst colorscaleOptions = [\r\n    'Default',\r\n    'Greys', \r\n    'YlGnBu', \r\n    'Greens', \r\n    'YlOrRd',\r\n    'Bluered',\r\n    'RdBu',\r\n    'Reds',\r\n    'Blues',\r\n    'Picnic',\r\n    'Rainbow',\r\n    'Portland',\r\n    'Jet',\r\n    'Hot',\r\n    'Blackbody',\r\n    'Earth',\r\n    'Electric',\r\n    'Viridis',\r\n    'Cividis'];\r\n\r\nfunction usePreviousSize(value) {\r\n    let size = value ? value.size : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = size;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousColor(value) {\r\n    let color = value ? value.color : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = color;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousOpacity(value) {\r\n    let opacity = value ? value.opacity : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = opacity;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nconst ChartControlPanel = (props) => {\r\n\r\n    const { \r\n        classes, \r\n        onToggleSplitByDate,\r\n        splitByDate,\r\n        onToggleSplitBySpace,\r\n        splitBySpace,\r\n        orientation, \r\n        downloadCsv, \r\n        handleZValueConfirm,\r\n        zValues,\r\n        markerOptions,\r\n        handleMarkerOptionsConfirm,\r\n        showErrorBars,\r\n        handleSetShowErrorBars,\r\n        showLines,\r\n        handleSetShowLines,\r\n        chart\r\n    } = props;\r\n\r\n    const [paletteAnchorElement, setPaletteAnchorElement] = useState(null);\r\n\r\n    let handleOpenPalette = (event) => {\r\n        setPaletteAnchorElement(event.currentTarget);\r\n    }\r\n\r\n    // Local version, not from props\r\n    let handlePaletteChoice = (option) => {\r\n        setPaletteAnchorElement(null);\r\n        props.handlePaletteChoice(option);\r\n    }\r\n\r\n    const [zScalePopoverAnchorElement, setZScalePopoverAnchorElement] = React.useState(null);\r\n    const [localZMin, setLocalZMin] = React.useState(zValues && zValues[0]);\r\n    const [localZMax, setLocalZMax] = React.useState(zValues && zValues[1]);\r\n\r\n    const zScalePopoverOpen = Boolean(zScalePopoverAnchorElement);\r\n    const zScalePopoverID = zScalePopoverOpen ? 'zscale-popover' : undefined;\r\n\r\n    const handleZScalePopoverClose = () => {\r\n        setZScalePopoverAnchorElement(null);\r\n    };\r\n    \r\n    const checkLocalZMin = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMin)) return 'Invalid value';\r\n    }\r\n\r\n    const checkLocalZMax = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMax)) return 'Invalid value';\r\n    }\r\n\r\n    const zScaleValidations = [\r\n        checkLocalZMin(),\r\n        checkLocalZMax()\r\n    ];\r\n\r\n    const [\r\n        zMinMessage,\r\n        zMaxMessage\r\n    ] = zScaleValidations;\r\n\r\n    const handleLocalZConfirm = () => {\r\n        handleZValueConfirm([localZMin, localZMax]);\r\n        handleZScalePopoverClose();\r\n    }\r\n\r\n    const showMaxSizeWarningAndInfo = () => {\r\n        props.sparseDataMaxSizeNotificationUpdate(lastRowTimeSpaceDataFromChart(props.chart.data));\r\n    }\r\n\r\n    const [markerOptionsAnchorElement, setMarkerOptionsAnchorElement] = React.useState(null);\r\n    const [localMarkerOpacity, setLocalMarkerOpacity] = React.useState(markerOptions && markerOptions.opacity);\r\n    const [localMarkerColor, setLocalMarkerColor] = React.useState(markerOptions && markerOptions.color);\r\n    const [localMarkerSize, setLocalMarkerSize] = React.useState(markerOptions && markerOptions.size);\r\n\r\n    var previousOpacity = usePreviousOpacity(markerOptions);\r\n    var previousColor = usePreviousColor(markerOptions);\r\n    var previousSize = usePreviousSize(markerOptions);\r\n\r\n    useEffect(() => {\r\n        if(markerOptions){\r\n            if(markerOptions.opacity !== previousOpacity){\r\n                setLocalMarkerOpacity(markerOptions.opacity);\r\n            }\r\n    \r\n            if(markerOptions.color !== previousColor){\r\n                setLocalMarkerColor(markerOptions.color);\r\n            }\r\n    \r\n            if(markerOptions.size !== previousSize){\r\n                setLocalMarkerSize(markerOptions.size);\r\n            }\r\n        }\r\n    })\r\n\r\n    const markerPopoverOpen = Boolean(markerOptionsAnchorElement);\r\n    const markerPopoverID = markerPopoverOpen ? 'marker-popover' : undefined;\r\n\r\n    const handleMarkerOptionsClose = () => {\r\n        setMarkerOptionsAnchorElement(null);\r\n    }\r\n\r\n    const checkLocalMarkerOpacity = () => {\r\n        if(localMarkerOpacity < 0.1 || localMarkerOpacity > 1 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerOpacity)){\r\n            return 'Opacity should be 0.1 to 1'\r\n        }\r\n    }\r\n\r\n    const checkLocalMarkerSize = () => {\r\n        if(localMarkerSize < 1 || localMarkerSize > 18 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerSize)){\r\n            return 'Size should be 1 to 18'\r\n        }\r\n    }\r\n\r\n    const markerOptionsValidations = [\r\n        checkLocalMarkerOpacity(),\r\n        checkLocalMarkerSize()\r\n    ]\r\n\r\n    const [\r\n        localMarkerOpacityMessage,\r\n        localMarkerSizeMessage\r\n    ] = markerOptionsValidations;\r\n\r\n    const handleLocalMarkerOptionsConfirm = () => {\r\n        handleMarkerOptionsConfirm({opacity: localMarkerOpacity, color: localMarkerColor, size: localMarkerSize});\r\n        handleMarkerOptionsClose();\r\n    }\r\n\r\n    const showSparseDataSizeWarning = Boolean(chart && \r\n        (chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular || chart.data.metadata.Temporal_Resolution === temporalResolutions.irregular) &&\r\n        chart.data && chart.data.variableValues && chart.data.variableValues.length >= SPARSE_DATA_QUERY_MAX_SIZE);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div style={{position: 'relative', pointerEvents: 'none', margin: 'auto', maxWidth: '80%'}}>\r\n                {showSparseDataSizeWarning ?\r\n                    <Tooltip title='Visualization does not contain all requested data. Click for more info.'>\r\n                        <Warning className={classes.sparseDataMaxSizeWarningIcon} onClick={showMaxSizeWarningAndInfo}/>\r\n                    </Tooltip>  :\r\n                    ''\r\n                }\r\n\r\n                <ButtonGroup className={classes.buttonGroup}>\r\n\r\n                    {Boolean(onToggleSplitByDate) && \r\n                        <Tooltip placement='top' title='Split By Date'>\r\n                            <IconButton color='inherit' className={`${classes.iconButton} ${splitByDate && classes.depressed}`} \r\n                                onClick={onToggleSplitByDate}\r\n                            >\r\n                                <DateRange/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(onToggleSplitBySpace) && \r\n                        <Tooltip placement='top' title={orientation === 'zonal' ? 'Split by Latitude' : 'Split by Longitude'}>\r\n                            <IconButton color='inherit' className={`${classes.iconButton} ${splitBySpace && classes.depressed}`} \r\n                                onClick={onToggleSplitBySpace}\r\n                            >\r\n                                <LineWeight/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    <Tooltip placement='top' title='Download CSV'>\r\n                        <IconButton color='inherit' onClick={downloadCsv} className={classes.iconButton} >\r\n                            <CloudDownload/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    {Boolean(handleZValueConfirm) &&\r\n                        <Tooltip title='Change Colorscale Range' placement='top'>\r\n                            <IconButton color='inherit' onClick={(event) => setZScalePopoverAnchorElement(event.currentTarget)} className={classes.iconButton}>\r\n                                <SwapVert/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(handleSetShowLines) &&\r\n                        <Tooltip title={showLines ? 'Hide Plot Line' : 'Show Plot Line'} placement='top'>\r\n                            <IconButton color='inherit' onClick={() => handleSetShowLines(!showLines)} className={`${classes.iconButton} ${showLines && classes.depressed}`}>\r\n                                <ShowChart/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(handleSetShowErrorBars) &&\r\n                        <Tooltip title={showErrorBars ? 'Hide Error Bars' : 'Show Error Bars'} placement='top'>\r\n                            <IconButton color='inherit' onClick={() => handleSetShowErrorBars(!showErrorBars)} className={`${classes.iconButton} ${showErrorBars && classes.depressed}`}>\r\n                                <Tune/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n\r\n                    {Boolean(props.handlePaletteChoice) &&\r\n                        <Tooltip title='Change Palette' placement='top'>\r\n                            <IconButton disabled={!Boolean(props.handlePaletteChoice)} color='inherit' onClick={handleOpenPalette} className={classes.iconButton}>\r\n                                <Palette/>\r\n                            </IconButton>                \r\n                        </Tooltip>      \r\n                    }\r\n\r\n                    {Boolean(props.handleMarkerOptionsConfirm) &&\r\n                        <Tooltip title='Marker Options' placement='top'>\r\n                            <IconButton color='inherit' onClick={(event) => setMarkerOptionsAnchorElement(event.currentTarget)} className={`${classes.iconButton} ${classes.lastIcon}`} >\r\n                                <Gamepad/>\r\n                            </IconButton>                \r\n                        </Tooltip>\r\n                    }\r\n                    \r\n                </ButtonGroup>   \r\n            </div>\r\n            \r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={paletteAnchorElement}\r\n                keepMounted\r\n                open={Boolean(paletteAnchorElement)}\r\n                onClose={() => setPaletteAnchorElement(null)}\r\n                className={classes.colorscaleMenu}\r\n                MenuListProps= {{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                {colorscaleOptions.map((option, index) => (\r\n                    <MenuItem onClick={() => handlePaletteChoice(option === 'Default' ? 'heatmap' : option)} key={index}>{option}</MenuItem>\r\n                ))}\r\n                \r\n            </Menu>\r\n            \r\n            {/* zscale popover */}\r\n            <Popover\r\n                id={zScalePopoverID}\r\n                open={zScalePopoverOpen}\r\n                anchorEl={zScalePopoverAnchorElement}\r\n                onClose={handleZScalePopoverClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n\r\n                classes={{\r\n                    root: classes.setPopoverZ\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMinMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-min-input' >Min</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-min-input'\r\n                                    value={localZMin}\r\n                                    onChange={(event) => setLocalZMin(event.target.value)}\r\n                                    aria-describedby='local-zmin-error'\r\n                                    labelWidth={36}\r\n                                    name='local-zmin'\r\n                                />\r\n                                <FormHelperText id='local-zmin-error'>{zMinMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-max-input' >Max</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-max-input'\r\n                                    value={localZMax}\r\n                                    onChange={(event) => setLocalZMax(event.target.value)}\r\n                                    aria-describedby=\"local-zmax-error\"\r\n                                    labelWidth={36}\r\n                                    name='local-zmax'\r\n                                />\r\n                                <FormHelperText id=\"local-zmax-error\">{zMaxMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={7}>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleZScalePopoverClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalZConfirm}\r\n                                disabled={Boolean(zMinMessage || zMaxMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n                \r\n            {/* Marker popover */}\r\n            <Popover\r\n                id={markerPopoverID}\r\n                open={markerPopoverOpen}\r\n                anchorEl={markerOptionsAnchorElement}\r\n                onClose={handleMarkerOptionsClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                classes={{\r\n                    root: classes.setPopoverZ\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(localMarkerOpacityMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-opacity' >Opacity</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='local-marker-opacity'\r\n                                    value={localMarkerOpacity}\r\n                                    onChange={(event) => setLocalMarkerOpacity(event.target.value)}\r\n                                    aria-describedby='local-marker-opacity'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-opacity'\r\n                                />\r\n                            <FormHelperText id=\"local-marker-opacity-error\">{localMarkerOpacityMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                // error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-size' >Size</InputLabel>\r\n                                <OutlinedInput\r\n                                    error={Boolean(localMarkerSizeMessage)}\r\n                                    id='local-marker-size'\r\n                                    value={localMarkerSize}\r\n                                    onChange={(event) => setLocalMarkerSize(event.target.value)}\r\n                                    aria-describedby=\"local-marker-size\"\r\n                                    labelWidth={36}\r\n                                    name='local-marker-size'\r\n                                />\r\n                                <FormHelperText id=\"local-marker-size-error\">{localMarkerSizeMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                className={classes.colorForm}\r\n                            >\r\n                                <InputLabel htmlFor='z-min-input'>Color</InputLabel>\r\n                                <OutlinedInput\r\n                                    type='color'\r\n                                    id='marker-color'\r\n                                    value={localMarkerColor}\r\n                                    onChange={(event) => setLocalMarkerColor(event.target.value)}\r\n                                    aria-describedby='local-marker-color'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-color'\r\n                                />\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={1}></Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleMarkerOptionsClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalMarkerOptionsConfirm}\r\n                                disabled={Boolean(localMarkerOpacityMessage || localMarkerSizeMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(ChartControlPanel));","// Wrapper for histogram plots\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    csvFromVizRequestSend\r\n}\r\n\r\n// User for all histograms sparse or otherwise\r\nconst Histogram = props => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata, parameters } = data;\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !data.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n        \r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                chart={props.chart}\r\n            />\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            // onHover={(e, e2) => {\r\n            //     console.log(e);\r\n            //     console.log(e2)\r\n            // }}\r\n\r\n            // onUnhover={(e, e2) => {\r\n            //     console.log(e);\r\n            //     console.log(e2)\r\n            // }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {\r\n                    x: data.variableValues,\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'histogram',\r\n                    marker: {\r\n                        color: '#00FFFF'\r\n                    }\r\n                }\r\n            ]}\r\n            \r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                    exponentformat: 'power',\r\n                    color: '#ffffff'\r\n                },\r\n                yaxis:{\r\n                    color: '#ffffff',\r\n                    title: 'Frequency'\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)             \r\n            }}\r\n            config={{...chartBase.config}}\r\n        />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(Histogram));","export default (infoObject) => {\r\n\r\n    let lonRange = infoObject.lonMax - infoObject.lonMin;\r\n\r\n    let sectionSize;\r\n    if(lonRange < 2){\r\n        sectionSize = (lonRange / 6).toFixed(2);\r\n    } else {\r\n        sectionSize = Math.floor(lonRange / 6);\r\n    }\r\n\r\n    let tickvals = Array.from(Array(5), (e, i) => Math.ceil(infoObject.lonMin + ((i + 1) * sectionSize)));\r\n    let ticktext = tickvals.map(e => e > 180 ? e - 360 : e);\r\n\r\n    return {\r\n        tickmode: 'array',\r\n        tickvals,\r\n        ticktext\r\n    }\r\n}","export default (infoObject) => {    \r\n    const xRange = infoObject.lonMax - infoObject.lonMin;\r\n    const yRange = infoObject.latMax - infoObject.latMin;\r\n    const sizeRatio = xRange / yRange;\r\n\r\n    let height = 40;\r\n    let width = 40;\r\n\r\n    if(isNaN(sizeRatio)){\r\n        height = height / 1.65;\r\n    } else if (sizeRatio > 1) {\r\n        if(sizeRatio <= 1.5){\r\n            width = width * sizeRatio;\r\n            // height = sizeRatio > 2 ? height / 2 : height / sizeRatio;\r\n        } else {\r\n            width = width * 1.5;\r\n            height = sizeRatio > 3 ? height / 1.65 : height * (1.8 / sizeRatio);\r\n        }\r\n    } else {\r\n        width = sizeRatio < .5 ? width * .5 : width * sizeRatio;\r\n    }\r\n\r\n    return [height, width];\r\n}","// Wrapper for heatmaps and non-sparse histograms\r\n\r\nimport React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Histogram from './Histogram';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport getChartDimensions from '../../Utility/getChartDimensions';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\nimport subTypes from '../../Enums/visualizationSubTypes';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst handleContourMap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n    \r\n    // Handle axis labels when crossing 180th meridian\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`; \r\n\r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n                margin: '0 auto'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext,\r\n                    \r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'contour',\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: infoObject.zMin > 1 && infoObject.zMin < 1000 ? '.2f' : '.2e'\r\n                    },\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    }\r\n                }\r\n            ]}\r\n\r\n            config={{...chartBase.config}}\r\n            \r\n            key={index}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                // autosize: true,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {title: 'Longitude', color: '#ffffff', ...xTicks},\r\n                yaxis: {title: 'Latitude', color: '#ffffff'},\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst handleHeatmap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n        \r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null || isNaN(value)) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    zsmooth: subset.length < 20000 ? 'fast' : 'false',\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'heatmap',\r\n                    colorscale: palette,\r\n                    autocolorscale: false,\r\n                    \r\n                    hoverinfo: 'text',\r\n                    text: hovertext,\r\n\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n                    \r\n                },\r\n\r\n            ]}                \r\n            key={index}\r\n\r\n            config={{...chartBase.config}}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,               \r\n\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: 'Longitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Latitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SpaceTimeChart = (props) => {\r\n\r\n    const { snackbarOpen, csvFromVizRequestSend, chart } = props;\r\n    const { data, subType } = chart;\r\n    const { dates, depths, extent, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitByDepth, setSplitByDepth] = useState(true);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    const subSets = data.generatePlotData(subType, splitByDate, splitByDepth);\r\n    var plots;\r\n    switch(subType){\r\n        case vizSubTypes.contourMap:\r\n            plots = handleContourMap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.heatmap:\r\n            plots = handleHeatmap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.histogram:\r\n            return <Histogram chart={{data}}/>;\r\n\r\n        default:\r\n            plots = '';\r\n            break;        \r\n\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = depths ? depths.size : 1;\r\n\r\n        if(subType === vizSubTypes.heatmap){\r\n            let availableWGLContexts = 15 - countWebGLContexts(props.charts);\r\n\r\n            if(!splitByDate && chartCount * dates.size > availableWGLContexts){\r\n                snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(subType === vizSubTypes.contourMap){\r\n            if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n            }\r\n        }\r\n\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDate(!splitByDate);\r\n        }, 100)\r\n    }\r\n \r\n    const onToggleSplitByDepth = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDepth(!splitByDepth);\r\n        }, 100)\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                handlePaletteChoice={subType !== subTypes.histogram && handlePaletteChoice}\r\n                onToggleSplitByDepth={depths.size===1 ? null : onToggleSplitByDepth}\r\n                onToggleSplitByDate={dates.size===1 ? null : onToggleSplitByDate}\r\n                splitByDepth={splitByDepth}\r\n                splitByDate={splitByDate}\r\n                handleZValueConfirm={subType !== subTypes.histogram && handleZValueConfirm}\r\n                zValues={subType !== subTypes.histogram && zValues}\r\n                extent={subType !== subTypes.histogram && extent}\r\n                downloadCsv={downloadCsv}\r\n                chart={chart}\r\n            />\r\n            {plots}     \r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SpaceTimeChart));","// Wrapper for time series\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport months from '../../Enums/months';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst TimeSeriesChart = (props) => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, dates, parameters, metadata } = data;\r\n\r\n    const [ markerOptions, setMarkerOptions ] = React.useState({opacity: .2, color:'#ff1493', size: 6});\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Time: ${dates[i].slice(0,10)}<br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(dates[0], data.hasHour, data.isMonthly) :\r\n        handleChartDateString(dates[0], data.hasHour, data.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], data.hasHour, data.isMonthly);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = parameters.depth2 === 0 ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    const x = data.isMonthly ? dates.map(date => months[parseInt(date)]) : dates;\r\n\r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n                chart={props.chart}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                  {\r\n                    // mode: 'lines+markers',\r\n                    mode: showLines ? 'lines+markers' : 'markers',\r\n                    x: x,\r\n                    y: variableValues,\r\n                    error_y: {\r\n                        type: 'data',\r\n                        array: stds,\r\n                        opacity: 0.3,\r\n                        color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                        visible: true\r\n                    },\r\n\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    // type: 'scatter',\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    line: {color: markerOptions.color},\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                  },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${metadata.Dataset_Name}` +\r\n                            `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            depth + \r\n                            `<br>Lat: ${lat}, ` +\r\n                            `Lon: ${lon}`,\r\n                        font: {\r\n                            size: 12\r\n                        }\r\n                    },\r\n                  xaxis: {\r\n                      title: data.isMonthy? 'Month' : 'Time',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  yaxis: {\r\n                      title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(TimeSeriesChart));","// Wrapper component for depth profile\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst DepthProfileChart = (props) => {\r\n\r\n    const { setLoadingMessage, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, depths, parameters, metadata } = data;\r\n\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    var infoObject = data;\r\n\r\n    const [markerOptions, setMarkerOptions] = React.useState({opacity: .2, color:'#ff1493', size: 6})\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Depth: ${format('.2f')(depths[i])} [m] <br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }    \r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    const date1 = infoObject.isMonthly ? new Date(parameters.dt1).getMonth() + 1 : parameters.dt1;\r\n    const date2 = infoObject.isMonthly ? new Date(parameters.dt2).getMonth() + 1 : parameters.dt2;\r\n\r\n    const date = date1 === date2 ? handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) :\r\n            handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(date2, infoObject.hasHour, infoObject.isMonthly);\r\n            return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n                chart={props.chart}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                    {   \r\n                        // mode: 'lines+markers',\r\n                        mode: showLines ? 'lines+markers' : 'markers',\r\n                        y: depths,\r\n                        x: variableValues,\r\n                        error_x: {\r\n                            type: 'data',\r\n                            array: stds,\r\n                            opacity: 0.3,\r\n                            color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                            visible: true\r\n                        },\r\n                        name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                        // type: 'scatter',\r\n                        type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n\r\n                        marker: {\r\n                            line: {color: markerOptions.color},\r\n                            opacity: markerOptions.opacity,\r\n                            size: markerOptions.size,\r\n                            color: markerOptions.color\r\n                        },\r\n\r\n                        hoverinfo: 'text',\r\n                        hovertext\r\n                    },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${metadata.Dataset_Name}` +\r\n                            `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                            `Lat: ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0, ` +\r\n                            `Lon: ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`,\r\n                        font: {\r\n                            size: 12\r\n                        }\r\n                    },\r\n                        \r\n                  yaxis: {\r\n                      title: 'Depth[m]',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power',\r\n                      autorange:'reversed'\r\n                    },\r\n                  xaxis: {\r\n                      title: `${metadata.Long_Name.length > 35 ? metadata.Long_Name.slice(0, 35) + '...' : metadata.Long_Name} [${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(DepthProfileChart));","// Wrapper for section map charts\r\n\r\nimport React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport visualizationSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nconst handleSectionMap = (subsets, infoObject, splitByDate, splitBySpace, orientation, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const dates = Array.from(infoObject.dates);\r\n    const depths = Array.from(infoObject.depths);\r\n    const lats = Array.from(infoObject.lats);\r\n    const lons = Array.from(infoObject.lons);\r\n\r\n    const distinctMeridiansOrParallelsForSplitting = \r\n        orientation === 'zonal' ?\r\n        lats : \r\n        lons;\r\n\r\n    const xAxis = orientation === 'zonal' ?\r\n        'Longitude' :\r\n        'Latitude';\r\n\r\n    let xTicks = parameters.lon1 > parameters.lon2 && orientation === 'zonal' ? handleXTicks(infoObject) : {};\r\n\r\n\r\n    return subsets.map((subset, index) => {\r\n        let z = subset;\r\n        let x = [];\r\n        let y = [];\r\n\r\n        if(orientation === 'zonal'){\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lons[Math.floor(i / depths.length)])\r\n            }\r\n        } else {\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lats[Math.floor(i / depths.length)])\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < subset.length; i++){\r\n            y.push(depths[i % depths.length]);\r\n        }\r\n\r\n        const latTitle = orientation === 'meridional' ? `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = orientation === 'zonal' ? `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n\r\n        const date = dates.length < 2 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            splitByDate && splitBySpace ? handleChartDateString(dates[Math.floor(index / distinctMeridiansOrParallelsForSplitting.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            splitByDate ? handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly) :\r\n            'Averaged Values ' + handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        let hovertext = z.map((value, i) => {\r\n            \r\n            if(orientation === 'zonal'){\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            } else {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lat: ${format('.2f')(x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lat: ${format('.2f')(x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            }\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    zsmooth: subset.length < 20000 ? 'best' : 'fast',\r\n                    x,\r\n                    y,\r\n                    z,\r\n                    name: parameters.fields,\r\n                    type: infoObject.subType === visualizationSubTypes.contourSectionMap ? 'contour' : 'heatmap',\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: '.2e'\r\n                    },\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                }\r\n            ]}                \r\n            key={index}\r\n\r\n            layout= {{\r\n                font: {color: '#ffffff'},\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${xAxis}[\\xB0]`,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Depth[m]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: 'reversed'\r\n                },\r\n                paper_bgcolor: colors.backgroundGray,\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n\r\n            }}   \r\n        />\r\n        )\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SectionMapChart = (props) => {\r\n\r\n    const { classes, snackbarOpen, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { dates, extent, lats, lons, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitBySpace, setSplitBySpace] = useState(false);\r\n    const [orientation, setOrientation] = useState(data.orientation);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    var spaces = orientation === 'zonal' ? lats : lons;\r\n\r\n    const subsets = data.generatePlotData(orientation, splitByDate, splitBySpace);\r\n    var plots = handleSectionMap(subsets, data, splitByDate, splitBySpace, orientation, palette, zMin, zMax);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const onToggleSplitBySpace = () => {\r\n        let chartCount = splitByDate ? dates.size : 1;\r\n        if(!splitBySpace && chartCount * spaces.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitBySpace(!splitBySpace);\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = splitBySpace ? spaces.size : 1;\r\n        if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitByDate(!splitByDate);\r\n            }, 100)\r\n        }     \r\n    }\r\n\r\n    const switchOrientation = () => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setOrientation(orientation === 'zonal' ? 'meridional' : 'zonal');\r\n        }, 100)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.buttonBlock}>\r\n            <ChartControlPanel\r\n                orientation={orientation}\r\n                switchOrientation={switchOrientation}\r\n                onToggleSplitBySpace={spaces.size === 1 ? null : onToggleSplitBySpace}\r\n                splitBySpace={splitBySpace}\r\n                onToggleSplitByDate={dates.size === 1 ? null : onToggleSplitByDate}\r\n                splitByDate={splitByDate}\r\n                handlePaletteChoice={handlePaletteChoice}\r\n                handleZValueConfirm={handleZValueConfirm}\r\n                zValues={zValues}\r\n                extent={extent}\r\n                downloadCsv={downloadCsv}\r\n                chart={props.chart}\r\n            />\r\n            </div>\r\n            {plots}      \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SectionMapChart));","// Wrapper for scatter / line plots\r\n\r\nimport React from 'react';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst SparseScatter = (props) => {\r\n    const {\r\n        xValues,\r\n        yValues,\r\n        markerOptions,\r\n        infoObject,\r\n        xTitle,\r\n        yTitle,\r\n        type\r\n    } = props;\r\n\r\n    const { parameters, metadata, hasDepth, variableValues, times, lats, lons, depths } = infoObject;\r\n\r\n    var hovertext;\r\n\r\n    switch(type){\r\n        case 'time':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'latitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lat: ${lats[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'longitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lon: ${lons[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'depth':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Depth: ${depths[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        default:\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n        }\r\n        \r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n    \r\n            data={[\r\n                {\r\n                    x: xValues,\r\n                    y: yValues,\r\n                    mode: 'markers',\r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    // type: 'scatter',\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                },\r\n            ]}\r\n            config={{...chartBase.config}}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                // width: 800,\r\n                // height: 570,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: xTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                yaxis: {\r\n                    title: yTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: type === 'depth' ? 'reversed' : true\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor, metadata.Data_Source)\r\n            }}            \r\n        />\r\n    )\r\n}\r\n\r\nexport default SparseScatter;","// Container for grouped plots for sparse data\r\n\r\nimport React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport SparseScatter from './SparseScatter';\r\n\r\nconst handleSparseMap = (infoObject, palette, zValues) => {\r\n\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !infoObject.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n            \r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zValues[0],\r\n                    zmax: zValues[1],\r\n                    lon: infoObject.lons,\r\n                    lat: infoObject.lats,\r\n                    z: infoObject.variableValues,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    radius: 6,                    \r\n                    name: `${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`,\r\n                    type: 'densitymapbox',\r\n                    \r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    },\r\n                }\r\n            ]}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${metadata.Dataset_Name}` +\r\n                        `<br>${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 12\r\n                    }\r\n                },\r\n                mapbox: {\r\n                    style: \"white-bg\",\r\n                    layers: [\r\n                        {\r\n                            sourcetype: \"raster\",\r\n                            source: [\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"],\r\n                            below: \"traces\"\r\n                        }\r\n                    ],\r\n                    center: infoObject.center,\r\n                    zoom: infoObject.zoom\r\n                },\r\n\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, metadata.Data_Source)\r\n            }}\r\n            \r\n            config={{\r\n                ...chartBase.config,\r\n                mapboxAccessToken:\r\n                  \"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w\",\r\n                \r\n              }}\r\n        />)\r\n}\r\n\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n\r\n    tabs: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    tab: {\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        fontSize: '15px',\r\n        textTransform: 'none',\r\n        color: theme.palette.primary.main\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nfunction tabProps(index) {\r\n    return {\r\n      id: `sparse-tab-${index}`,\r\n      'aria-controls': `sparse-tab-${index}`,\r\n    };\r\n  }\r\n\r\nconst SparseTabPanel = (props) => {\r\n    const { children, selectedTab, index, controlPanelProps } = props;\r\n\r\n    return (\r\n        <div hidden={selectedTab !== index}>\r\n            <ChartControlPanel\r\n                {...controlPanelProps}\r\n                chart={props.chart}\r\n            />\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst SparseMap = React.memo((props) => {\r\n\r\n    const { classes, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata } = data;\r\n\r\n    const [palette, setPalette] = useState('Heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [markerOptions, setMarkerOptions] = useState({opacity: .7, color:'#ff1493', size: 6});\r\n    const [tab, setTab] = useState(0);\r\n\r\n    const plot = handleSparseMap(data, palette, zValues)\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleTabChange = (event, newValue) => {\r\n        setTab(newValue)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const forceResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);        \r\n    }\r\n\r\n    const controlPanelProps = {\r\n        map: {\r\n            palette,\r\n            handlePaletteChoice,\r\n            zValues,\r\n            handleZValueConfirm,\r\n            downloadCsv\r\n        },\r\n\r\n        scatter: {\r\n            downloadCsv,\r\n            markerOptions,\r\n            setMarkerOptions,\r\n            handleMarkerOptionsConfirm\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Tabs \r\n                value={tab} \r\n                onChange={handleTabChange} \r\n                aria-label=\"Sparse tabs\" \r\n                centered\r\n                indicatorColor='primary'\r\n                className={classes.tabs}\r\n            >\r\n                <Tab label=\"Map\" {...tabProps(0)} className={classes.tab} onClick={forceResize}/>\r\n                <Tab label=\"By Time\" {...tabProps(1)} className={classes.tab}/>\r\n                <Tab label=\"By Lat\" {...tabProps(2)} className={classes.tab}/>\r\n                <Tab label=\"By Lon\" {...tabProps(3)} className={classes.tab}/>\r\n                {data.hasDepth && <Tab label=\"By Depth\" {...tabProps(4)} className={classes.tab}/>}\r\n            </Tabs>\r\n            <SparseTabPanel selectedTab={tab} index={0} controlPanelProps={controlPanelProps.map} chart={props.chart}>\r\n                {tab === 0 && plot}\r\n            </SparseTabPanel>\r\n            \r\n            <SparseTabPanel selectedTab={tab} index={1} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 1 &&\r\n                    <SparseScatter\r\n                        xValues={data.times}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Time'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name} [${metadata.Unit}]`}\r\n                        type='time'\r\n                    />\r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={2} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 2 &&\r\n                    <SparseScatter\r\n                        xValues={data.lats}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Latitude'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                        type='latitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={3} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                {tab === 3 && \r\n                    <SparseScatter\r\n                        xValues={data.lons}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Longitude'\r\n                        yTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                        type='longitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            {data.hasDepth &&\r\n                <SparseTabPanel selectedTab={tab} index={4} controlPanelProps={controlPanelProps.scatter} chart={props.chart}>\r\n                    {tab === 4 &&\r\n                        <SparseScatter\r\n                            xValues={data.variableValues}\r\n                            yValues={data.depths}\r\n                            markerOptions={markerOptions}\r\n                            infoObject={data}\r\n                            xTitle={`${metadata.Long_Name.length > 60 ? metadata.Long_Name.slice(0, 60) + '...': metadata.Long_Name}`}\r\n                            yTitle='Depth[m]'\r\n                            type='depth'\r\n                        />                    \r\n                    }\r\n                </SparseTabPanel>            \r\n            }\r\n                \r\n        </div>\r\n    )\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseMap));","// Wrapper for charts\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { IconButton, Paper } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport SpaceTimeChart from './SpaceTimeChart';\r\nimport TimeSeriesChart from './TimeSeriesChart';\r\nimport DepthProfileChart from './DepthProfileChart';\r\nimport SectionMapChart from './SectionMapChart';\r\nimport SparseMap from './SparseMap';\r\nimport Histogram from './Histogram';\r\n\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts,\r\n    plotsActiveTab: state.plotsActiveTab\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  deleteChart\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  chartPaper: {\r\n    backgroundColor: colors.backgroundGray,\r\n    marginBottom: '5h',\r\n    paddingTop: theme.spacing(1),\r\n    boxShadow: '2px 2px 2px 2px #242424',    \r\n    width: 'max-content',\r\n    margin: '0 auto 5vh auto',\r\n    '@media (min-width: 1280px)': {\r\n      textAlign: 'left',\r\n      margin: '0 0 5vh 360px'\r\n    }\r\n  }\r\n})\r\n\r\nconst SamplePlot = () => {\r\n  let x = [0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4];\r\n  let y = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,];\r\n  let z = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4];\r\n  \r\n  return (\r\n\r\n      <Plot\r\n      useResizeHandler={true}\r\n      style= {{\r\n          position: 'relative',\r\n          display:'inline-block',\r\n          // marginTop: '30px',\r\n          width: '66vw',\r\n          height: '44vw'\r\n      }}\r\n      \r\n      data={[\r\n          {   \r\n              x,\r\n              y,\r\n              z,\r\n              connectgaps: false,\r\n              zsmooth: 'best',\r\n\r\n              name: 'Test',\r\n              type: 'heatmap',\r\n              contours: {\r\n                  showlabels: true,\r\n                  labelfont: {\r\n                      family: 'Raleway',\r\n                      size: 12,\r\n                      color: 'white',\r\n                  },\r\n                  labelformat: '.2e'\r\n              },\r\n              colorbar: {\r\n                  title: {\r\n                      text: `test`\r\n                  },\r\n                  exponentformat: 'power'\r\n              }\r\n          }\r\n      ]}\r\n\r\n      config={{responsive: true}}\r\n      \r\n      layout= {{\r\n        autosize: true,\r\n          font: {color: '#ffffff'},\r\n          margin: {\r\n            t: 50\r\n          },\r\n          title: {\r\n              text: `A sample chart title`,\r\n              font: {\r\n                size: 16\r\n              }\r\n          },\r\n          paper_bgcolor: colors.backgroundGray,\r\n          xaxis: {title: 'Longitude', color: '#ffffff'},\r\n          yaxis: {title: 'Latitude', color: '#ffffff'},\r\n          annotations: [\r\n              {\r\n                  text: `Brought to you by chef boyardee`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                  yref: 'paper',\r\n                  y: -.24,\r\n                  showarrow: false,\r\n                  xref: 'paper',\r\n                  x: .5\r\n                  }\r\n              ]\r\n              \r\n          }}   \r\n          />\r\n          )\r\n}\r\n\r\nconst closeChartStyles = {\r\n    closeChartIcon: {\r\n      float: 'right',\r\n      marginTop: '-12px',\r\n      marginRight: '-8px'\r\n    }\r\n}\r\n\r\nconst _CloseChartIcon = (props) => {\r\n  const { classes } = props;\r\n  return (\r\n    <React.Fragment>\r\n      <IconButton className={classes.closeChartIcon} color=\"inherit\" onClick={() => props.handleDeleteChart(props.chartIndex)} disableFocusRipple disableRipple>\r\n        <Delete/>\r\n      </IconButton>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst CloseChartIcon = withStyles(closeChartStyles)(_CloseChartIcon);\r\n\r\nclass Charts extends Component {\r\n\r\n  handleDeleteChart = (chartIndex) => {\r\n    this.props.deleteChart(chartIndex);\r\n  }\r\n\r\n    render(){\r\n        const { classes, charts, plotsActiveTab } = this.props;\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                {charts.map((chart, index) => {\r\n                    switch(chart.data.parameters.spName){\r\n\r\n                        case storedProcedures.spaceTime:\r\n                          if(chart.subType === vizSubTypes.sparse) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseMap chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          } else if(chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <Histogram chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          }\r\n                          else return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SpaceTimeChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.timeSeries:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <TimeSeriesChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.depthProfile:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <DepthProfileChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.sectionMap:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                              {/* <Paper elevation={12} className={classes.chartPaper} key={chart.id} style={index === plotsActiveTab - 1 ? {} : {display: 'none'}}> */}\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SectionMapChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n                        \r\n                        default:\r\n                          return '';\r\n                  }\r\n                })}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Charts));","// Container for ArcGIS globe. The \"scene\" component injects control props into its children\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Scene } from '@esri/react-arcgis';\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        margin: '0 auto 0 auto',\r\n        width: '100vw',\r\n        height: '100vh',\r\n    }\r\n})\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst polylineSymbol = {\r\n    type: \"line-3d\",\r\n        symbolLayers: [\r\n            {\r\n                type: \"line\",\r\n                size: \"3px\",\r\n                material: {\r\n                    color: {\r\n                        r: 0,\r\n                        g: 255,\r\n                        b: 255,\r\n                        a: 0\r\n                    }\r\n                },\r\n            }\r\n        ]\r\n}\r\n\r\nclass UiComponents extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.sketchModel = new props.esriModules.SketchViewModel({\r\n            layer: props.regionLayer,\r\n            view: props.view,\r\n            polygonSymbol,\r\n            polylineSymbol,\r\n            defaultUpdateOptions: {\r\n                toggleToolOnClick: false,\r\n                tool: \"transform\"\r\n            }\r\n        })\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const { view } = this.props;\r\n\r\n        view.ui.remove('zoom');\r\n        view.ui.remove('navigation-toggle');\r\n        view.ui.remove('compass');\r\n        view.ui.remove('attribution');\r\n\r\n        return null;\r\n    }\r\n}\r\n\r\nconst TrajectoryController = React.memo((props) => {\r\n    const { cruiseTrajectory, trajectoryLayer, esriModules } = props;\r\n    \r\n    if(cruiseTrajectory){\r\n        const { lons, lats } = cruiseTrajectory;\r\n\r\n        let midIndex = Math.floor(lons.length / 2);\r\n\r\n        trajectoryLayer.removeAll();\r\n\r\n        var polyLines = [[]];\r\n        var lineIndex = 0;\r\n\r\n        let lonStart = lons[0];\r\n        let latStart = lats[0];\r\n        let maxDistance = 0;\r\n\r\n        // Create a new path array each time 180 lon is crossed\r\n        lons.forEach((lon, i) => {\r\n            let lat = lats[i];\r\n\r\n            let latDistance = Math.abs(lat - latStart);\r\n            let _lonDistance = Math.abs(lon - lonStart);\r\n            let lonDistance = _lonDistance > 180? 360 - _lonDistance : _lonDistance;\r\n\r\n            let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n            maxDistance = distance > maxDistance ? distance : maxDistance;\r\n\r\n            polyLines[lineIndex].push([lon, lat]);\r\n\r\n            if(i < lons.length - 1){\r\n                if((lon > 160 && lon < 180) && (lons[i + 1] > -180 && lons[i + 1] < -160)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n\r\n                if((lon > -180 && lon < -160) && (lon[i + 1] > 160 && lon[i + 1] < 180)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n            }\r\n        })\r\n\r\n        var cruiseTrajectorySymbol = {\r\n            type: 'line-3d',\r\n            symbolLayers: [{\r\n                type: 'line',\r\n                material: { color: [0, 255, 255, 1] },\r\n                cap:  'round',\r\n                join: 'round',\r\n                size: 2\r\n            }]\r\n        }\r\n\r\n        polyLines.forEach(line => {\r\n\r\n            let cruiseTrajectoryGeometry = {\r\n                type: 'polyline',\r\n                paths: line\r\n            }\r\n\r\n            let graphic = new esriModules.Graphic({\r\n                geometry: cruiseTrajectoryGeometry,\r\n                symbol: cruiseTrajectorySymbol\r\n            });\r\n\r\n            trajectoryLayer.add(graphic);\r\n        })\r\n\r\n        try {\r\n            const center = [lons[midIndex], lats[midIndex]];\r\n\r\n            var zoom = 7 - Math.floor(maxDistance / 6);            \r\n    \r\n            props.view.goTo({\r\n                target: center,\r\n                zoom\r\n            }, {\r\n                maxDuration: 2500,\r\n                speedFactor: .5\r\n            });    \r\n\r\n        } catch(e) {console.log(e)}\r\n\r\n    } else {\r\n        trajectoryLayer.removeAll();\r\n\r\n        props.view.goTo({\r\n            target: [-140, 30],\r\n            zoom: 3\r\n        }, {\r\n            maxDuration: 2500,\r\n            speedFactor: .5\r\n        }); \r\n    }\r\n    return '';\r\n})\r\n\r\nclass MapContainer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            showHelp: false\r\n        }\r\n        this.regionLayer = new props.esriModules.GraphicsLayer();\r\n        this.trajectoryLayer = new props.esriModules.GraphicsLayer();\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, esriModules, cruiseTrajectory, globeUIRef } = this.props;\r\n\r\n        return (\r\n            <div className={classes.container} id='found-you'>\r\n                <Scene\r\n                    mapProperties={{ \r\n                        basemap: 'satellite',\r\n                        layers: [\r\n                            this.regionLayer,\r\n                            this.trajectoryLayer\r\n                        ],\r\n\r\n                    }}\r\n                    viewProperties={{\r\n                        center: [-140, 30],\r\n                        zoom: 3,\r\n                        highlightOptions: {\r\n                            haloOpacity: 0,\r\n                            haloColor: 'rgba(0, 0, 0, 0)',\r\n                            fillOpacity: 0,\r\n                            color: \"rgba(0, 0, 0, 0)\"\r\n                        }\r\n                    }}\r\n                >\r\n                    <TrajectoryController \r\n                        cruiseTrajectory={cruiseTrajectory}\r\n                        trajectoryLayer={this.trajectoryLayer}\r\n                        esriModules={esriModules}\r\n                    />\r\n                    <UiComponents\r\n                        updateDomainFromGraphicExtent = {this.props.updateDomainFromGraphicExtent}\r\n                        esriModules={esriModules}\r\n                        measurementPositions={this.props.measurementPositions}\r\n                        regionLayer={this.regionLayer}\r\n                        setShowHelp={(showHelp) => this.setState({...this.state, showHelp})}\r\n                        ref={globeUIRef}\r\n                    />\r\n                </Scene>\r\n            </div>            \r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(MapContainer);","const localDateToString = (date) => {\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate()\r\n\r\n    let nYear = year.toString();\r\n    let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n    let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n    return nYear + '-' + nMonth + '-' + nDay;\r\n}\r\n\r\nexport default localDateToString;","const utcDateStringToLocal = (utcString) => {\r\n    let date = new Date(utcString);\r\n    let utcYear = date.getUTCFullYear();\r\n    let utcMonth = date.getUTCMonth();\r\n    let utcDate = date.getUTCDate();\r\n\r\n    let newDate = new Date();\r\n    newDate.setFullYear(utcYear, utcMonth, utcDate);\r\n    return newDate;\r\n}\r\n\r\nexport default utcDateStringToLocal;","// Popup appearing at /visualization to direct to cruises or plots\r\n\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { withStyles, Dialog, DialogContent, DialogTitle, Button } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: 'black',\r\n        width: '400px',\r\n        height: '180px'\r\n    },\r\n\r\n    button: {\r\n        textTransform: 'none',\r\n        marginLeft: '20px',\r\n        marginTop: '24px'\r\n    },\r\n});\r\n\r\nconst ModuleSelector = (props) => {\r\n    const { history, classes } = props;\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <Dialog \r\n                open\r\n                PaperProps={{\r\n                    className: classes.dialogPaper\r\n                }}\r\n            >\r\n                <DialogTitle>\r\n                    Select a Visualization Module\r\n                </DialogTitle>\r\n\r\n                <DialogContent>\r\n                    <Button\r\n                        variant='outlined'\r\n                        onClick={() => history.push('/visualization/charts')}\r\n                        className={classes.button}\r\n                        color='primary'\r\n                    >\r\n                        Charts and Plots\r\n                    </Button>\r\n\r\n                    <Button\r\n                        variant='outlined'\r\n                        onClick={() => history.push('/visualization/cruises')}\r\n                        color='primary'\r\n                        className={classes.button}\r\n                    >\r\n                        Explore Cruises\r\n                    </Button>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </React.Fragment>\r\n        )\r\n    }\r\n\r\nexport default withStyles(styles)(withRouter(ModuleSelector));","const setsFromList = (list, setKeys) => {\r\n    // return an object literal where each value is a set containing the unique values for that key\r\n    let result = {};\r\n\r\n    setKeys.forEach(key => result[key] = new Set());\r\n\r\n    list.forEach(item => {\r\n        setKeys.forEach(key => {\r\n            if(Array.isArray(item[key])){\r\n                item[key].forEach(subItem => result[key].add(subItem));\r\n            }\r\n\r\n            else if(item[key]) result[key].add(item[key]);\r\n        })\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\nexport default setsFromList;","// Cruise exploration component\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport * as JsSearch from 'js-search';\r\nimport { VariableSizeList } from 'react-window';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Search, ZoomOutMap } from '@material-ui/icons';\r\nimport { Table, TableBody, TableCell, TableRow, Link, Icon, Tooltip, Grid, Typography, TextField, InputAdornment, Paper, Button } from '@material-ui/core';\r\nimport { Close, ExpandMore, ChevronRight } from '@material-ui/icons';\r\n\r\nimport { cruiseListRequestSend, cruiseTrajectoryRequestSend, cruiseTrajectoryClear } from '../../Redux/actions/visualization';\r\n\r\nimport MultiCheckboxDropdown from '../UI/MultiCheckboxDropdown';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport setsFromList from '../../Utility/setsFromList';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    cruiseList: state.cruiseList,\r\n    getCruiseListState: state.getCruiseListState,\r\n    windowHeight: state.windowHeight\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseListRequestSend,\r\n    cruiseTrajectoryRequestSend,\r\n    cruiseTrajectoryClear\r\n}\r\n\r\nconst esriFonts = '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif';\r\nconst esriFontColor = 'white';\r\n\r\nconst styles = theme => ({\r\n    outerDiv: {\r\n        padding:'12px',\r\n        maxWidth: '360px',\r\n        backgroundColor: 'transparent',\r\n        color: esriFontColor,\r\n        borderRadius: '4px',\r\n        boxShadow: '2px',\r\n        backdropFilter: 'blur(2px)',\r\n        transform: 'translateY(35px)',\r\n        marginTop: '24px',\r\n        position: 'fixed',\r\n        left: 0,\r\n        top: 140\r\n    },\r\n\r\n    cruiseInfo: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        margin: '12px auto 0 auto',\r\n    },\r\n\r\n    cruiseInfoCell: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        borderStyle: 'none',\r\n    },\r\n\r\n    linkWrapper: {\r\n        padding: '12px',\r\n        fontSize: '14px'\r\n    },\r\n\r\n    searchMenuPaper: {\r\n        position: 'fixed',\r\n        top: 120,\r\n        bottom: 60,\r\n        left: 0,\r\n        width: '98vw',\r\n        height: 'auto',\r\n        zIndex: 1500,\r\n        backgroundColor: 'rgba(0,0,0,.6)',\r\n        backdropFilter: 'blur(5px)',\r\n    },\r\n\r\n    closeIcon: {\r\n        float: 'right',\r\n        cursor: 'pointer',\r\n        color: colors.primary,\r\n        textTransform: 'none',\r\n        fontSize: '15px'\r\n    },\r\n\r\n    inputRoot: {\r\n        border: `1px solid ${colors.primary}`\r\n    },\r\n\r\n    openSearchButtonPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n    },\r\n\r\n    openSearchButton: {\r\n        textTransform: 'none',\r\n        color: colors.primary,\r\n        fontSize: '15px',\r\n        padding: '6px 42px'\r\n    },\r\n\r\n    resetButton: {\r\n        textTransform: 'none',\r\n        width: '160px',\r\n        height: '37px',\r\n        color: theme.palette.primary.main,\r\n        borderColor: theme.palette.primary.main,\r\n        marginTop: '12px'\r\n    },\r\n\r\n    yearHeader: {\r\n        backgroundColor: 'rgba(0, 0, 0, .7)',\r\n        height: '36px',\r\n        fontSize: '17px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyCOntent: 'center'\r\n    },\r\n\r\n    searchOption: {\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n\r\n        cursor: 'pointer',\r\n        height: '38px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    memberCount: {\r\n        color: colors.primary,\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    variablesWrapper: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        paddingTop: '6px'\r\n    },\r\n\r\n    variableItem: {\r\n        height: '32px',\r\n        textAlign: 'left',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: colors.greenHover\r\n        },\r\n    },\r\n\r\n    cruiseName: {\r\n        width: '100%',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    heading: {\r\n        textAlign: 'left',\r\n        padding: '8px 6px',\r\n        color: colors.primary,\r\n        fontSize: '16px',\r\n        marginTop: '5px',\r\n        backgroundColor: 'rgba(0,0,0,.4)'\r\n    },\r\n\r\n    cruiseYearHeader: {\r\n        textAlign: 'left',\r\n        fontSize: '9px',\r\n        color: colors.primary\r\n    }\r\n})\r\n\r\nconst searchFilterGroupCruises = (cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, selectedSeries, search) => {\r\n    cruises = [...cruises];\r\n    if(searchField) cruises = search.search(searchField);\r\n    if(selectedYears && selectedYears.size) cruises = cruises.filter(e => selectedYears.has(e.Year));\r\n    if(selectedChiefScientists && selectedChiefScientists.size) cruises = cruises.filter(e => selectedChiefScientists.has(e.Chief_Name));\r\n    if(selectedRegions && selectedRegions.size) cruises = cruises.filter(e => e.Regions.some(region => selectedRegions.has(region)));\r\n    if(selectedSeries && selectedSeries.size) cruises = cruises.filter(e => selectedSeries.has(e.Series));\r\n\r\n    let cruisesGroupedByYear = cruises.reduce((acc, cur) => {\r\n        if(!acc[cur.Year]) acc[cur.Year] = [];    \r\n        acc[cur.Year].push(cur);    \r\n        return acc;\r\n    }, {});\r\n\r\n    cruisesGroupedByYear = Object.keys(cruisesGroupedByYear).map(key => ({year: key, cruises: cruisesGroupedByYear[key]})).sort((a, b) => a.year < b.year ? 1 : -1);\r\n\r\n    return {cruisesGroupedByYear, cruises};\r\n}\r\n\r\nconst defaultSearchAndFilterState = {\r\n    selectedYears: new Set(), \r\n    selectedChiefScientists: new Set(), \r\n    selectedRegions: new Set(), \r\n    searchField: '',\r\n    openYearGroup: null,\r\n    selectedSeries: new Set()\r\n};\r\n\r\nconst defaultOptionSets = {\r\n    Regions: new Set(),\r\n    Year: new Set(),\r\n    Chief_Name: new Set(),\r\n    Series: new Set()\r\n}\r\n\r\nconst listRef = React.createRef();\r\nclass CruiseSelector extends Component {\r\n    \r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Nickname');\r\n        search.addIndex('Name');\r\n        search.addIndex('Chief_Name');\r\n        search.addIndex('Keywords');\r\n\r\n        try{\r\n            if(props.cruiseList && props.cruiseList.length) {\r\n                search.addDocuments(props.cruiseList);\r\n            }\r\n        } catch(e) {\r\n            console.log(e);\r\n            console.log(props.cruiseList);\r\n        }\r\n        // cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, search\r\n        let { cruisesGroupedByYear, cruises } = this.props.cruiseList && this.props.cruiseList.length ? \r\n            searchFilterGroupCruises(\r\n                props.cruiseList, '', new Set(), new Set(), new Set(), new Set(), search\r\n            ) : \r\n            {cruisesGroupedByYear: [], cruises: []};\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.state = {\r\n            search,\r\n            selectedCruise: null,\r\n            searchMenuOpen: false,\r\n            cruisesGroupedByYear,\r\n            cruises,\r\n            optionSets,\r\n            ...defaultSearchAndFilterState\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.props.handleShowGlobe();\r\n        if(!this.props.cruiseList || !this.props.cruiseList.length) this.props.cruiseListRequestSend();\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.cruiseTrajectoryClear()\r\n    }\r\n\r\n    handleCruiseSelect = (selection) => {\r\n        if(selection){\r\n            this.props.cruiseTrajectoryRequestSend(selection.ID);\r\n        }\r\n\r\n        this.setState({...this.state, selectedCruise: selection, searchMenuOpen: false});\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);         \r\n            let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(this.props.cruiseList, '', new Set(), new Set(), new Set(), new Set(), this.state.search);\r\n            let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n            this.setState({...this.state, cruisesGroupedByYear, cruises, optionSets});\r\n        }\r\n\r\n        if(prevState.cruisesGroupedByYear !== this.state.cruisesGroupedByYear) listRef.current.resetAfterIndex(0);\r\n    }\r\n\r\n    handleChangeSearchValue = (e) => {\r\n        // cruises, searchField, selectedYears, selectedChiefScientists, selectedRegions, search\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            e.target.value, \r\n            this.state.selectedYears, \r\n            this.state.selectedChiefScientists, \r\n            this.state.selectedRegions,\r\n            this.state.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let newOptionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n        let oldOptionSets = {...this.state.optionSets};\r\n\r\n        let optionSets = {\r\n            Chief_Name: this.state.selectedChiefScientists.size ? oldOptionSets.Chief_Name : newOptionSets.Chief_Name,\r\n            Year: this.state.selectedYears.size ? oldOptionSets.Year : newOptionSets.Year,\r\n            Regions: this.state.selectedRegions.size ? oldOptionSets.Regions : newOptionSets.Regions,\r\n            Series: this.state.selectedSeries.size ? oldOptionSets.Series : newOptionSets.Series\r\n        };\r\n        \r\n        this.setState({...this.state, searchField: e.target.value, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleCloseSearch = () => {\r\n        this.setState({...this.state, searchMenuOpen: false});\r\n    }\r\n\r\n    handleClearMultiSelect = (statePiece) => {\r\n        let tempNewState = {...this.state, [statePiece]: new Set()};\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            tempNewState.searchField, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleResetSearch = () => {\r\n        let tempNewState = {...this.state, ...defaultSearchAndFilterState};\r\n\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            tempNewState.searchField, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let optionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleClickCheckbox = (e, checked) => {\r\n        let [ column, value ] = e.target.name.split('!!');\r\n        let newSet = new Set(this.state[column]);\r\n\r\n        checked ? newSet.add(value) : newSet.delete(value);\r\n\r\n        let tempNewState = {...this.state, [column]: newSet};\r\n\r\n        let { cruisesGroupedByYear, cruises } = searchFilterGroupCruises(\r\n            this.props.cruiseList, \r\n            e.target.value, \r\n            tempNewState.selectedYears, \r\n            tempNewState.selectedChiefScientists, \r\n            tempNewState.selectedRegions,\r\n            tempNewState.selectedSeries,\r\n            this.state.search\r\n        );\r\n\r\n        let newOptionSets = setsFromList(cruises, ['Chief_Name', 'Year', 'Regions', 'Series']);\r\n        let oldOptionSets = {...this.state.optionSets};\r\n\r\n        let optionSets = {\r\n            Chief_Name: tempNewState.selectedChiefScientists.size ? oldOptionSets.Chief_Name : newOptionSets.Chief_Name,\r\n            Year: tempNewState.selectedYears.size ? oldOptionSets.Year : newOptionSets.Year,\r\n            Regions: tempNewState.selectedRegions.size ? oldOptionSets.Regions : newOptionSets.Regions,\r\n            Series: tempNewState.selectedSeries.size ? oldOptionSets.Series : newOptionSets.Series\r\n        };\r\n\r\n        this.setState({...tempNewState, cruisesGroupedByYear, cruises, optionSets});\r\n    }\r\n\r\n    handleSetopenYearGroup = (index, year) => {\r\n        if(listRef.current) {\r\n\r\n            // Make sure the group being opened is in view\r\n            let listHeight = this.props.windowHeight - 249;\r\n            let currentOffset = listRef.current.state.scrollOffset;\r\n            let targetOffset = index * 38;\r\n\r\n            if(index !== null && (targetOffset < currentOffset - 10 || targetOffset > currentOffset + listHeight - 20)){\r\n                setTimeout(() => listRef.current.scrollToItem(index, 'start'), 10);\r\n            }\r\n\r\n            listRef.current.resetAfterIndex(0);\r\n        }\r\n\r\n        this.setState({...this.state, openYearGroup: this.state.openYearGroup === year ? null : year});\r\n    }\r\n\r\n    render(){\r\n        const { \r\n            searchField, \r\n            selectedCruise, \r\n            searchMenuOpen, \r\n            selectedYears, \r\n            selectedChiefScientists, \r\n            selectedRegions,\r\n            selectedSeries,\r\n            openYearGroup,\r\n            optionSets,\r\n            cruisesGroupedByYear,\r\n            cruises\r\n        } = this.state;\r\n\r\n        const { classes, windowHeight } = this.props;\r\n\r\n        return (\r\n            <>\r\n                <Paper className={classes.searchMenuPaper} style={searchMenuOpen ? {} : {display: 'none'}}>\r\n                    <Grid container>\r\n                        <Grid item xs={12}>\r\n                            <Typography style={{display: 'inline-block'}}>\r\n                                Search and filter using the controls on the left. Select a cruise from the list on the right.\r\n                            </Typography>\r\n\r\n                            <Button\r\n                                startIcon={<Close style={{fontSize: '22px'}}/>}\r\n                                onClick={this.handleCloseSearch}\r\n                                className={classes.closeIcon}\r\n                            >\r\n                                Close\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} style={{overflowY: 'auto', maxHeight: windowHeight - 204, padding: '16px', backgroundColor: 'rgba(0,0,0,.4)'}}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    name='searchTerms'\r\n                                    onChange={this.handleChangeSearchValue}\r\n                                    placeholder='Search'\r\n                                    value={searchField}\r\n                                    InputProps={{\r\n                                        classes: {\r\n                                            root: classes.inputRoot\r\n                                        },\r\n                                        startAdornment: (\r\n                                            <React.Fragment>\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <Search style={{color: colors.primary}}/>\r\n                                                </InputAdornment>\r\n                                            </React.Fragment>\r\n                                        )\r\n                                    }}\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Regions).sort()}\r\n                                selectedOptions={selectedRegions}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedRegions')}\r\n                                parentStateKey={'selectedRegions'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Region'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Year).sort((a, b) => a < b ? 1 : -1)}\r\n                                selectedOptions={selectedYears}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedYears')}\r\n                                parentStateKey={'selectedYears'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Year'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Chief_Name).sort()}\r\n                                selectedOptions={selectedChiefScientists}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedChiefScientists')}\r\n                                parentStateKey={'selectedChiefScientists'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Chief Scientist'\r\n                            />\r\n\r\n                            <MultiCheckboxDropdown\r\n                                options={Array.from(optionSets.Series).sort()}\r\n                                selectedOptions={selectedSeries}\r\n                                handleClear={() => this.handleClearMultiSelect('selectedSeries')}\r\n                                parentStateKey={'selectedSeries'}\r\n                                handleClickCheckbox={this.handleClickCheckbox}\r\n                                groupHeaderLabel='Cruise Series'\r\n                            />\r\n\r\n                            <Grid item xs={12} className={classes.searchPanelRow}>\r\n                                <Button variant='outlined' onClick={this.handleResetSearch} className={classes.resetButton}>\r\n                                    Reset Filters\r\n                                </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={8} style={{paddingTop: '12px'}}>\r\n\r\n                        <Grid container>\r\n                            <Grid item xs={9}>\r\n                                <Typography className={classes.heading}>\r\n                                    Showing {cruises.length} cruises (grouped by year)\r\n                                </Typography>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={3} container justify='flex-start' alignItems='center'>\r\n                                <Typography variant='caption' style={{color: colors.primary, marginBottom: '-16px'}}>\r\n                                    Cruise Count\r\n                                </Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n        \r\n                        <VariableSizeList\r\n                            ref={listRef}\r\n                            itemData={cruisesGroupedByYear}\r\n                            itemCount={cruisesGroupedByYear.length}\r\n                            height={windowHeight - 249}\r\n                            width='100%'\r\n                            estimatedItemSize={38}\r\n                            style={{overflowY: 'scroll'}}\r\n                            itemSize={(i) => openYearGroup === cruisesGroupedByYear[i].year ? cruisesGroupedByYear[i].cruises.length * 32 + 38 + 4 + 10 : 38}\r\n                        >\r\n\r\n                            {({ index, style }) => (\r\n                                <div style={style}>\r\n                                    <Grid \r\n                                        container \r\n                                        className={classes.searchOption}\r\n                                        onClick={() => this.handleSetopenYearGroup(index, cruisesGroupedByYear[index].year)}\r\n                                    >            \r\n                                        <Grid item xs={2} container alignItems='center'>\r\n                                            {openYearGroup === cruisesGroupedByYear[index].year ? \r\n                                                <ExpandMore className={classes.datasetOpenIcon}/> : \r\n                                                <ChevronRight className={classes.datasetOpenIcon}/>\r\n                                            }\r\n                                            <span className={classes.searchOptionsMenuItemText}>{cruisesGroupedByYear[index].year}</span>\r\n                                        </Grid>\r\n\r\n                                        <Grid item xs={7}>\r\n\r\n                                        </Grid>\r\n\r\n                                        <Tooltip title={`${cruisesGroupedByYear[index].cruises.length} cruises from this year match the search criteria`}>\r\n                                            <Grid item xs={1} className={classes.memberCount} container alignItems='center' justify='center'>\r\n                                                {cruisesGroupedByYear[index].cruises.length}\r\n                                            </Grid>\r\n                                        </Tooltip>\r\n                                    </Grid>\r\n                                    \r\n                                    {\r\n                                        cruisesGroupedByYear[index].year === openYearGroup ?\r\n                                        <Grid container className={classes.variablesWrapper}>\r\n                                            <Grid item container alignItems='center'>\r\n                                                <Grid item xs={1}> </Grid>\r\n\r\n                                                <Grid item xs={2} className={classes.cruiseYearHeader}>\r\n                                                    Official Designation\r\n                                                </Grid>\r\n\r\n                                                <Grid item xs={8} className={classes.cruiseYearHeader}>\r\n                                                    Nickname\r\n                                                </Grid>\r\n                                            </Grid>\r\n\r\n                                            {cruisesGroupedByYear[index].cruises.map((e, i) => (\r\n                                                <Grid \r\n                                                    item \r\n                                                    xs={12} \r\n                                                    key={e.Name} \r\n                                                    className={classes.variableItem} \r\n                                                    container \r\n                                                    alignItems='center'\r\n                                                    onClick={() => this.handleCruiseSelect(e)}\r\n                                                >   \r\n                                                    <Grid item xs={1}></Grid>\r\n\r\n                                                    <Grid item xs={2} className={classes.cruiseName}>{e.Name}</Grid>\r\n\r\n                                                    <Tooltip title={e.Nickname} enterDelay={300}>\r\n                                                        <Grid item xs={8} className={classes.cruiseName}>{e.Nickname}</Grid>\r\n                                                    </Tooltip>                                                    \r\n                                                </Grid>\r\n                                            ))}\r\n                                        </Grid>\r\n                                        : ''\r\n                                    }\r\n                                </div>\r\n                            )}\r\n                        </VariableSizeList>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n\r\n                <div id='cruise-selector' className={classes.outerDiv}>\r\n\r\n                    <Paper className={classes.openSearchButtonPaper}>\r\n                        <Button\r\n                            startIcon={<Search/>}\r\n                            className={classes.openSearchButton}\r\n                            onClick={() => this.setState({...this.state, searchMenuOpen: true})}\r\n                        >\r\n                            Search Cruises\r\n                        </Button>\r\n                    </Paper>\r\n                    \r\n                    {selectedCruise &&\r\n                        <>\r\n                        <Table size='small' className={classes.cruiseInfo}>\r\n                            <TableBody>\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Cruise:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Nickname:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.Nickname}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n\r\n                                {\r\n                                    selectedCruise.Start_Time &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Start Date:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Start_Time.slice(0,10)}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.End_Time &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            End Date:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.End_Time.slice(0,10)}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.Chief_Name &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Chief Scientist:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Chief_Name}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n\r\n                                {\r\n                                    selectedCruise.Ship_Name &&\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            Ship:\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.cruiseInfoCell}>\r\n                                            {selectedCruise.Ship_Name}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                }\r\n                            </TableBody>\r\n                        </Table>\r\n                        \r\n                            <div className={classes.linkWrapper}>\r\n                                <Link \r\n                                    component={RouterLink} \r\n                                    to={`/catalog/cruises/${selectedCruise.Name}`}\r\n                                    target='_blank'\r\n                                >\r\n                                    Open Cruise Catalog Page\r\n                                </Link>\r\n                            </div>\r\n                        </>\r\n                    }\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(CruiseSelector));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, Switch } from 'react-router-dom'\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport VizControlPanel from './VizControlPanel';\r\nimport GuestPlotLimitNotification from './GuestPlotLimitNotification';\r\n\r\nimport { showLoginDialog, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { queryRequestSend, storedProcedureRequestSend, cruiseListRequestSend, completedShowCharts, plotsActiveTabSet, guestPlotLimitNotificationSetIsVisible } from '../../Redux/actions/visualization';\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\n\r\nimport { loadModules } from 'esri-loader';\r\n\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nimport Charts from './Charts';\r\nimport MapContainer from './MapContainer';\r\nimport colors from '../../Enums/colors'\r\nimport cleanSPParams from '../../Utility/Visualization/cleanSPParams';\r\nimport localDateToString from '../../Utility/localDateToString';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport stars from '../../Utility/starsBase64';\r\nimport metaTags from '../../Enums/metaTags';\r\nimport ModuleSelector from './ModuleSelector';\r\nimport CruiseSelector from './CruiseSelector';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    sampleData: state.sampleData,\r\n    queryRequestState: state.queryRequestState,\r\n    maps: state.maps,\r\n    charts: state.charts,\r\n    data: state.data,\r\n    loadingMessage: state.loadingMessage,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    cruiseList: state.cruiseList,\r\n    showChartsOnce: state.showChartsOnce,\r\n    datasets: state.datasets,\r\n    catalog: state.catalog,\r\n    plotsActiveTab: state.plotsActiveTab,\r\n    userIsGuest: state.userIsGuest\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    queryRequestSend,\r\n    retrievalRequestSend,\r\n    storedProcedureRequestSend,\r\n    snackbarOpen,\r\n    cruiseListRequestSend,\r\n    completedShowCharts,\r\n    datasetRetrievalRequestSend,\r\n    plotsActiveTabSet,\r\n    guestPlotLimitNotificationSetIsVisible\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    displayNone: {\r\n        display: 'none'\r\n    },\r\n\r\n    background: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    showCharts: {\r\n        display: 'inline-block',\r\n        paddingTop: '180px',\r\n        width: 'calc(100vw - 10px)', //new\r\n        textAlign: 'left' //new\r\n    },\r\n\r\n    vizWrapper: {\r\n        minHeight: '100vh',\r\n        background: `url(${stars})`\r\n    }\r\n})\r\n\r\nconst baseSPParams = {\r\n    tableName: '',\r\n    fields: null,\r\n    depth1: 0,\r\n    depth2: 0,\r\n    dt1: new Date(),\r\n    dt2: new Date(),\r\n    lat1: 0,\r\n    lat2: 0,\r\n    lon1: 0,\r\n    lon2: 0,\r\n    selectedVizType: ''\r\n}\r\n\r\nclass Visualization extends Component {\r\n    globeUIRef = React.createRef();\r\n    mapContainerRef = React.createRef();\r\n\r\n    state = {\r\n        filteredData: [],\r\n        opacity: 1,\r\n        showCharts: false,\r\n        showUI: false,\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        showCruiseControl: false,\r\n        spParams: baseSPParams\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        document.title = metaTags.visualization.title;\r\n        document.description = metaTags.visualization.description;\r\n\r\n        const esriModuleNames = [\r\n            'AreaMeasurement3D',\r\n            'Search',\r\n            'GraphicsLayer',\r\n            'SketchViewModel',\r\n            'Utils',\r\n            'Graphic',\r\n        ];\r\n\r\n        var loadedModules = await loadModules([\r\n            'esri/widgets/AreaMeasurement3D',\r\n            'esri/widgets/Search',\r\n            'esri/layers/GraphicsLayer',\r\n            'esri/widgets/Sketch/SketchViewModel',\r\n            'esri/geometry/support/webMercatorUtils',\r\n            'esri/Graphic',\r\n        ], {version: '4.14'});\r\n\r\n        var esriModules = esriModuleNames.reduce((accumulator, currentValue, currentIndex) => {\r\n            accumulator[currentValue] = loadedModules[currentIndex];\r\n            return accumulator;\r\n        }, {});\r\n        \r\n        this.setState({...this.state, esriModules});        \r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        document.title = metaTags.default.title;\r\n        document.description = metaTags.default.description;\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(this.props.showChartsOnce) {\r\n            this.props.completedShowCharts();\r\n            this.setState({...this.state, showCharts: true})\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, spParams: {...this.state.spParams, [event.target.name]: event.target.value}})\r\n    };\r\n\r\n    handleLatLonChange = (event) => {\r\n        this.setState({\r\n            ...this.state, \r\n            spParams: {...this.state.spParams, [event.target.name]: event.target.value},\r\n        })\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt1:newDate}});\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt2:newDate}});\r\n        }\r\n    }\r\n\r\n    onVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state.spParams;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: localDateToString(dt1),\r\n            dt2: localDateToString(dt2),\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.state.spParams.fields && this.state.spParams.fields.value,\r\n            tableName: this.state.spParams.fields && this.state.spParams.tableName,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.state.spParams.fields && this.state.spParams.fields.data\r\n        }\r\n    \r\n        this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    handlePlotsSetActiveTab = (event, newValue) => {\r\n        this.props.plotsActiveTabSet(newValue);\r\n    }\r\n\r\n    updateFields = (fields) => {\r\n        if(fields) {\r\n            let surfaceOnly = !fields.data.Depth_Max;\r\n            let irregularSpatialResolution = fields.data.Spatial_Resolution === 'Irregular';\r\n\r\n            let sparseMaxDate = utcDateStringToLocal(fields.data.Time_Max);\r\n            sparseMaxDate.setDate(sparseMaxDate.getDate() + 1);\r\n\r\n            let dt1 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt1 : utcDateStringToLocal(fields.data.Time_Min);\r\n            let dt2 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt2 : \r\n                irregularSpatialResolution ? sparseMaxDate :\r\n                utcDateStringToLocal(fields.data.Time_Min);\r\n            \r\n            let latMin = Math.floor(fields.data.Lat_Min * 1000) /1000;\r\n            let latMax = Math.ceil(fields.data.Lat_Max * 1000) /1000;\r\n            let lonMin = Math.floor(fields.data.Lon_Min * 1000) /1000;\r\n            let lonMax = Math.ceil(fields.data.Lon_Max * 1000) /1000;\r\n\r\n            let lat1 = irregularSpatialResolution ? latMin : this.state.spParams.lat1;\r\n            let lat2 = irregularSpatialResolution ? latMax : this.state.spParams.lat2;\r\n            let lon1 = irregularSpatialResolution ? lonMin : this.state.spParams.lon1;\r\n            let lon2 = irregularSpatialResolution ? lonMax : this.state.spParams.lon2;\r\n            let depth1 = irregularSpatialResolution ? fields.data.Depth_Min || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? 0 :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? 0 : \r\n                this.state.spParams.depth1;\r\n\r\n            let depth2 = irregularSpatialResolution ? fields.data.Depth_Max || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2) : \r\n                this.state.spParams.depth2;\r\n\r\n            if(irregularSpatialResolution){\r\n                this.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            let tableName = fields.data.Table_Name;\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                spParams: {...this.state.spParams, \r\n                    fields,\r\n                    dt1,\r\n                    dt2,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    depth1,\r\n                    depth2,\r\n                    tableName,\r\n                    selectedVizType: ''\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({...this.state, spParams: {...this.state.spParams, fields, tableName: ''}})\r\n        }\r\n    }\r\n\r\n    handleShowCharts = () => {\r\n        this.setState({...this.state, showCharts: true})\r\n    }\r\n\r\n    handleShowGlobe = () => {\r\n        this.setState({...this.state, showCharts: false})\r\n    }\r\n\r\n    handleShowCruiseControl = () => {\r\n        this.setState({...this.state, showCruiseControl: !this.state.showCruiseControl});\r\n    }\r\n\r\n    toggleShowUI = () => {\r\n        this.setState({...this.state, showUI: !this.state.showUI});\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: extent.ymin.toFixed(3),\r\n            lat2: extent.ymax.toFixed(3),\r\n            lon1: _lon1.toFixed(3),\r\n            lon2: _lon2.toFixed(3)\r\n        };\r\n\r\n        this.setState({...this.state, spParams: {...this.state.spParams, ...newCoordinates}});\r\n    }\r\n\r\n    resetSPParams = () => {\r\n        this.setState({...this.state, spParams: baseSPParams})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n        \r\n        return (\r\n            <div className={classes.vizWrapper}>\r\n                <GuestPlotLimitNotification/>\r\n\r\n                { this.state.esriModules &&\r\n                    <div className={`${this.props.plotsActiveTab === 0 ? '' : classes.displayNone}`}>\r\n                        <MapContainer\r\n                            globeUIRef={this.globeUIRef}\r\n                            updateDomainFromGraphicExtent={this.updateDomainFromGraphicExtent}\r\n                            esriModules={this.state.esriModules}\r\n                            spParams={this.state.spParams}\r\n                            cruiseTrajectory={this.props.cruiseTrajectory}\r\n                            showCruiseControl={this.state.showCruiseControl}\r\n                            chartControlPanelRef={this.chartControlPanelRef}\r\n                            ref={this.mapContainerRef}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n                <Switch>          \r\n                    <Route exact path='/visualization' component={ModuleSelector} />\r\n                    <Route \r\n                        path='/visualization/charts'\r\n                        render={(props) => (\r\n                            <VizControlPanel\r\n                            {...props}\r\n                            toggleChartView={this.toggleChartView}\r\n                            toggleShowUI={this.toggleShowUI}\r\n                            handleChange={this.handleChange}\r\n                            handleLatLonChange={this.handleLatLonChange}\r\n                            handleStartDateChange={this.handleStartDateChange} \r\n                            handleEndDateChange={this.handleEndDateChange} \r\n                            showUI={this.state.showUI}\r\n                            onVisualize={this.onVisualize}\r\n                            updateFields={this.updateFields}\r\n                            {...this.state.spParams}\r\n                            surfaceOnly={this.state.surfaceOnly}\r\n                            irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                            showCharts={this.state.showCharts}\r\n                            handleShowCharts={this.handleShowCharts}\r\n                            handleShowGlobe={this.handleShowGlobe}\r\n                            resetSPParams={this.resetSPParams}\r\n                            handleShowCruiseControl={this.handleShowCruiseControl}\r\n                            showCruiseControl={this.state.showCruiseControl}\r\n                            globeUIRef={this.globeUIRef}\r\n                            mapContainerRef={this.mapContainerRef}\r\n                            handlePlotsSetActiveTab={this.handlePlotsSetActiveTab}\r\n                            plotsActiveTab={this.props.plotsActiveTab}\r\n                        />\r\n                        )}\r\n                    // }\r\n                    />\r\n                    <Route \r\n                        path='/visualization/cruises'\r\n                        render={(props) => (\r\n                            <CruiseSelector handleShowGlobe={() => this.handlePlotsSetActiveTab(null, 0)}/>\r\n                        )}\r\n                    />\r\n                </Switch>              \r\n\r\n                <div className={this.props.plotsActiveTab === 0 ? classes.displayNone : classes.showCharts}>\r\n                    <Charts/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Visualization));","export default 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=';"],"sourceRoot":""}