(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{393:function(e,t,a){e.exports=a(574)},398:function(e,t,a){},516:function(e,t){},518:function(e,t){},536:function(e,t){},538:function(e,t){},545:function(e,t,a){},574:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),i=a.n(o),s=(a(398),a(253));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(30),c=a(119),u=a(10),p="CATALOG_RETRIEVAL_REQUEST_SEND",d={inProgress:"inProgress",failed:"failed",succeeded:"succeeded",expired:"expired"},h="LOG_OUT",m="LOGIN_REQUEST_SEND",f="REGISTRATION_REQUEST_SEND",b="VALIDATION_REQUEST_SEND",g="KEY_RETRIEVAL_REQUEST_SEND",E="KEY_CREATION_REQUEST_SEND",S={catalogRequestState:null,loginDialogIsOpen:!1,registrationActiveStep:0,userLoginState:null,userLoginError:null,userValidationState:null,userValidationError:null,userRegistrationState:null,apiKeyRetrievalState:null,apiKeyCreationState:null},O=a(55),y="QUERY REQUEST SEND",v="STORED_PROCEDURE_REQUEST_SEND",x="GET_TABLE_STATS",j=a(363),C=a(120),w=a.n(C),R={catalogRequestState:null,catalog:null,loginDialogIsOpen:!1,registrationActiveStep:0,snackbarIsOpen:!1,snackbarMessage:null,user:JSON.parse(w.a.get("UserInfo")||null),apiKeys:null,apiKeyRetrievalState:null,apiKeyCreationState:null,clearLoginDialog:!1,userLoginState:null,userValidationState:null,userRegistrationState:null,maps:[],charts:[],sampleData:null,queryRequestState:null,storedProcedureRequestState:null,getTableStatsRequestState:null,tableStats:{}},k=Object(j.a)(R,function(e,t){switch(t.type){case"CATALOG_RETRIEVAL_REQUEST_SUCCESS":return Object(u.a)({},e,{catalogRequestState:d.succeeded,catalog:t.payload.catalog});case"CATALOG_RETRIEVAL_REQUEST_FAILURE":return Object(u.a)({},e,{catalogRequestState:d.failed});case"CATALOG_RETRIEVAL_REQUEST_PROCESSING":return Object(u.a)({},e,{catalogRequestState:d.inProgress});default:return e}},function(e,t){switch(t.type){case"LOGIN_REQUEST_PROCESSING":return Object(u.a)({},e,{userLoginState:d.inProgress});case"LOGIN_REQUEST_SUCCESS":return Object(u.a)({},e,{userLoginState:d.succeeded,userLoginError:null});case"LOGIN_REQUEST_FAILURE":return Object(u.a)({},e,{userLoginState:d.failed});case"LOGIN_REQUEST_CLEAR_ERROR":return Object(u.a)({},e,{userLoginError:null});case"STORE_INFO":return Object(u.a)({},e,{user:t.payload.user});case"DESTROY_INFO":return Object(u.a)({},e,{user:null,apiKeys:null,clearLoginDialog:!0});case"LOGIN_DIALOG_WAS_CLEARED":return Object(u.a)({},e,{clearLoginDialog:!1});case"VALIDATION_REQUEST_PROCESSING":return Object(u.a)({},e,{userValidationState:d.inProgress});case"VALIDATION_REQUEST_FAILURE":return Object(u.a)({},e,{userValidationState:d.failed});case"VALIDATION_REQUEST_SUCCESS":return Object(u.a)({},e,{userValidationState:null});case"REGISTRATION_REQUEST_PROCESSING":return Object(u.a)({},e,{userRegistrationState:d.inProgress});case"REGISTRATION_REQUEST_FAILURE":return Object(u.a)({},e,{userRegistrationState:d.failed});case"REGISTRATION_REQUEST_SUCCESS":return Object(u.a)({},e,{userRegistrationState:d.succeeded});case"KEY_RETRIEVAL_REQUEST_SUCCESS":return Object(u.a)({},e,{apiKeys:t.payload.keys});case"KEY_RETRIEVAL_REQUEST_FAILURE":return Object(u.a)({},e,{apiKeyRetrievalState:d.failed});case"KEY_CREATION_REQUEST_PROCESSING":return Object(u.a)({},e,{apiKeyCreationState:d.inProgress});case"KEY_CREATION_REQUEST_FAILURE":return Object(u.a)({},e,{apiKeyCreationState:d.failed});case"KEY_CREATION_REQUEST_SUCCESS":return Object(u.a)({},e,{apiKeyCreationState:d.succeeded});default:return e}},function(e,t){switch(t.type){case"INTERFACE_SHOW_LOGIN_DIALOG":return Object(u.a)({},e,{loginDialogIsOpen:!0});case"INTERFACE_HIDE_LOGIN_DIALOG":return Object(u.a)({},e,{loginDialogIsOpen:!1,userLoginError:null});case"REGISTRATION_NEXT_ACTIVE_STEP":return Object(u.a)({},e,{registrationActiveStep:e.registrationActiveStep+1});case"REGISTRATION_PREVIOUS_ACTIVE_STEP":return Object(u.a)({},e,{registrationActiveStep:e.registrationActiveStep-1});case"RESTORE_INTERFACE_DEFAULTS":return Object(u.a)({},e,S);case"SNACKBAR_OPEN":return Object(u.a)({},e,{snackbarIsOpen:!0,snackbarMessage:t.payload.message});case"SNACKBAR_CLOSE":return Object(u.a)({},e,{snackbarIsOpen:!1});default:return e}},function(e,t){switch(t.type){case"QUERY REQUEST PROCESSING":return Object(u.a)({},e,{queryRequestState:d.inProgress});case"QUERY REQUEST FAILURE":return Object(u.a)({},e,{queryRequestState:d.failed});case"QUERY REQUEST SUCCESS":return Object(u.a)({},e,{queryRequestState:d.succeeded});case"STORED_PROCEDURE_REQUEST_PROCESSING":return Object(u.a)({},e,{storedProcedureRequestState:d.inProgress});case"STORED_PROCEDURE_REQUEST_FAILURE":return Object(u.a)({},e,{storedProcedureRequestState:d.failed});case"STORED_PROCEDURE_REQUEST_SUCCESS":return Object(u.a)({},e,{storedProcedureRequestState:d.succeeded});case"ADD_LAYER":return Object(u.a)({},e,{layers:[].concat(Object(O.a)(e.layers),[t.payload.newLayer])});case"STORE_SAMPLE_DATA":return Object(u.a)({},e,{sampleData:t.payload.sampleData});case"ADD_MAP":return Object(u.a)({},e,{maps:[].concat(Object(O.a)(e.maps),[t.payload.mapInfo])});case"ADD_CHART":return Object(u.a)({},e,{charts:[].concat(Object(O.a)(e.charts),[t.payload.chartInfo])});case"CLEAR_CHARTS":return Object(u.a)({},e,{charts:[]});case"CLEAR_MAPS":return Object(u.a)({},e,{maps:[]});case"GET_TABLE_STATS_REQUEST_PROCESSING":return Object(u.a)({},e,{getTableStatsRequestState:d.inProgress});case"STORE_TABLE_STATS":return Object(u.a)({},e,{getTableStatsRequestState:d.succeeded,tableStats:Object(u.a)({},e.tableStats,t.payload.tableStats)});default:return e}}),D=a(376),T=a(32),I=a(15),_=a.n(I),A=a(14),N=function(){return{type:"LOGIN_REQUEST_PROCESSING"}},P=function(e){return{type:"LOGIN_REQUEST_FAILURE"}},L=function(){return{type:"LOGIN_REQUEST_SUCCESS"}},z=function(e){return{type:"STORE_INFO",payload:{user:e}}},U=function(){return{type:h}},M=function(){return{type:"DESTROY_INFO"}},F=function(){return{type:"VALIDATION_REQUEST_PROCESSING"}},G=function(){return{type:"VALIDATION_REQUEST_FAILURE"}},V=function(){return{type:"VALIDATION_REQUEST_SUCCESS"}},q=function(){return{type:"REGISTRATION_REQUEST_PROCESSING"}},B=function(){return{type:"REGISTRATION_REQUEST_FAILURE"}},Q=function(){return{type:"REGISTRATION_REQUEST_SUCCESS"}},K=function(){return{type:g}},H=function(e){return{type:"KEY_RETRIEVAL_REQUEST_SUCCESS",payload:{keys:e}}},Y=function(){return{type:"KEY_RETRIEVAL_REQUEST_FAILURE"}},W=function(){return{type:"KEY_CREATION_REQUEST_PROCESSING"}},$=function(){return{type:"KEY_CREATION_REQUEST_SUCCESS"}},X=function(){return{type:p}},J=function(){return{type:"CATALOG_RETRIEVAL_REQUEST_PROCESSING"}},Z=function(e){return{type:"CATALOG_RETRIEVAL_REQUEST_SUCCESS",payload:{catalog:e}}},ee=function(){return{type:"CATALOG_RETRIEVAL_REQUEST_FAILURE"}},te=function(){return{type:"INTERFACE_SHOW_LOGIN_DIALOG"}},ae=function(){return{type:"INTERFACE_HIDE_LOGIN_DIALOG"}},ne=function(){return{type:"REGISTRATION_NEXT_ACTIVE_STEP"}},re=function(){return{type:"RESTORE_INTERFACE_DEFAULTS"}},oe=function(e){return{type:"SNACKBAR_OPEN",payload:{message:e}}},ie=function(e){return{type:"QUERY REQUEST SUCCESS",payload:{data:e}}},se=function(){return{type:"QUERY REQUEST PROCESSING"}},le=function(e){return{type:"STORED_PROCEDURE_REQUEST_SUCCESS",payload:{data:e}}},ce=function(){return{type:"STORED_PROCEDURE_REQUEST_FAILURE"}},ue=function(){return{type:"STORED_PROCEDURE_REQUEST_PROCESSING"}},pe=function(e){return{type:"STORE_SAMPLE_DATA",payload:{sampleData:e}}},de=function(e){return{type:"ADD_CHART",payload:{chartInfo:e}}},he=function(){return{type:"GET_TABLE_STATS_REQUEST_PROCESSING"}},me=function(e){return{type:"STORE_TABLE_STATS",payload:{tableStats:e}}},fe=a(109),be=(a(512),a(258)),ge=a.n(be),Ee="https://simonscmap.dev",Se=a(24),Oe=a(23),ye=a(659),ve={irregular:"Irregular",halfDegree:"1/2\xb0 X 1/2\xb0",quarterDegree:"1/4\xb0 X 1/4\xb0",twentyFifthDegree:"1/25\xb0 X 1/25\xb0",fourKm:"4km X 4km",twelfthDegree:"1/12\xb0 X 1/12\xb0",seventyKm:"70km X 70km",oneDegree:"1\xb0 X 1\xb0"},xe=function(e){var t;return(t={},Object(T.a)(t,ve.halfDegree,.5),Object(T.a)(t,ve.quarterDegree,.25),Object(T.a)(t,ve.twentyFifthDegree,.04),Object(T.a)(t,ve.fourKm,.041672),Object(T.a)(t,ve.twelfthDegree,.083333),Object(T.a)(t,ve.oneDegree,1),Object(T.a)(t,ve.seventyKm,.25),t)[e]},je=function(e,t,a){for(var n=[],r=e;r<=a;r+=t)n.push(r);return n},Ce=function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)t.push(e[a][n]);return t},we=function(e,t,a){for(var n=[],r=0;r<a;r++)n.push([]);for(var o=0;o<e.length;o++)n[Math.floor(o/t)%a].push(e[o]);return n},Re=function(e,t,a,n){for(var r=[],o=t*(n-1),i=0;i+o<e.length;i+=a){for(var s=[],l=0;l<e[i].length;l++){for(var c=0,u=0,p=i;p<i+t*n;p+=t)null!==e[p][l]&&(c+=e[p][l],u++);s.push(u<1?null:c/u)}r.push(s)}return r},ke=function(e,t,a,n){for(var r=[],o=t*(n-1),i=0;i+o<e.length;i+=a){for(var s=[],l=i;l<=i+o;l+=t)s=[].concat(Object(O.a)(s),Object(O.a)(e[l]));r.push(s)}return r},De={sectionMap:"Section Map",timeSeries:"Time Series",histogram:"Histogram",depthProfile:"Depth Profile",heatmap:"Heatmap",contourMap:"Contour Map"},Te=function(){function e(t){Object(Se.a)(this,e),this.parameters=t.parameters,this.metadata=t.metadata,this.hasDepth=null,this.depths=new Set,this.dates=new Set,this.variableValues=[],this.lonStart=null,this.latStart=null,this.lonCount=null,this.latCount=null,this.zMin=null,this.zMax=null,this.depthIndexAdjust=null}return Object(Oe.a)(e,[{key:"add",value:function(e){null===this.hasDepth&&(this.hasDepth=5===e.length,this.lonStart=parseFloat(e[2]),this.latStart=parseFloat(e[1]),this.depthIndexAdjust=this.hasDepth?1:0),this.hasDepth&&this.depths.add(e[3]),this.dates.add(e[0]),this.variableValues.push(parseFloat(e[3+this.depthIndexAdjust]))}},{key:"finalize",value:function(){var e=xe(this.metadata.Spatial_Resolution),t=je(this.lonStart,e,this.parameters.lon2),a=je(this.latStart,e,this.parameters.lat2);this.lonCount=t.length,this.latCount=a.length,console.log("Calculating quantiles");var n=new Date;this.zMin=Object(ye.a)(this.variableValues,.08),console.log(new Date-n),n=new Date,this.zMax=Object(ye.a)(this.variableValues,.92),console.log(new Date-n);var r=[],o=[];console.log("Generating spatial arrays"),n=new Date;for(var i=0;i<a.length;i++)for(var s=0;s<t.length;s++)r.push(a[i]),o.push(t[s]);this.lats=r,this.lons=o,console.log(new Date-n)}},{key:"generatePlotData",value:function(e,t,a){var n=this;0===this.depths.size&&this.depths.add("Surface");var r,o=this.lonCount*this.latCount,i=o*this.depths.size;return r=(r=we(this.variableValues,i,this.dates.size)).map(function(e){return we(e,o,n.depths.size)}),r=Ce(r),e===De.contourMap||e===De.heatmap?t&&a||(r=t?Re(r,1,this.depths.size,this.depths.size):a?Re(r,this.depths.size,1,this.dates.size):Re(r,1,r.length,r.length)):e===De.histogram&&(t&&a||(r=t?ke(r,1,this.depths.size,this.depths.size):a?ke(r,this.depths.size,1,this.dates.size):[this.variableValues])),r}}]),e}(),Ie={sectionMap:"uspSectionMap",timeSeries:"uspTimeSeries",spaceTime:"uspSpaceTime",depthProfile:"uspDepthProfile"},_e=function(){function e(t){Object(Se.a)(this,e),this.parameters=t.parameters,this.metadata=t.metadata,this.variableValues=[],this.stds=[],this.dates=[],this.lat=null,this.lon=null,this.depth=null,this.depthIndexAdjust=null}return Object(Oe.a)(e,[{key:"add",value:function(e){null===this.lat&&(this.depthIndexAdjust=6===e.length?1:0,this.lat=e[1],this.lon=e[2],this.depth=6===e.length&&e[3]),this.variableValues.push(e[3+this.depthIndexAdjust]),this.stds.push(e[4+this.depthIndexAdjust]),this.dates.push(e[0])}},{key:"finalize",value:function(){!1===this.depth&&(this.depth="Surface")}},{key:"generatePlotData",value:function(){return this.variableValues}}]),e}(),Ae=function(){function e(t){Object(Se.a)(this,e),this.parameters=t.parameters,this.metadata=t.metadata,this.variableValues=[],this.stds=[],this.lat=null,this.lon=null,this.depths=[]}return Object(Oe.a)(e,[{key:"add",value:function(e){null===this.lat&&(this.lat=parseFloat(e[0]),this.lon=parseFloat(e[1])),this.variableValues.push(parseFloat(e[2])),this.stds.push(parseFloat(e[3])),this.depths.push(parseFloat(e[4]))}},{key:"finalize",value:function(){}},{key:"generatePlotData",value:function(){return this.variableValues}}]),e}(),Ne=function(){function e(t){Object(Se.a)(this,e),this.parameters=t.parameters,this.metadata=t.metadata,this.depths=new Set,this.dates=new Set,this.variableValues=[],this.lonStart=null,this.latStart=null,this.lonCount=null,this.latCount=null,this.zMin=null,this.zMax=null,this.orientation=null,this.latsDistinct=null,this.lonsDistinct=null,this.plotLats=null,this.plotLons=null,this.zonalPlotDepths=null,this.meridionalPlotDepths=null}return Object(Oe.a)(e,[{key:"add",value:function(e){null===this.latStart&&(this.latStart=parseFloat(e[1]),this.lonStart=parseFloat(e[2])),this.depths.add(e[3]),this.dates.add(e[0]),this.variableValues.push(parseFloat(e[4]))}},{key:"finalize",value:function(){var e=xe(this.metadata.Spatial_Resolution),t=je(this.lonStart,e,this.parameters.lon2),a=je(this.latStart,e,this.parameters.lat2);this.lonCount=t.length,this.latCount=a.length,this.lonsDistinct=t,this.latsDistinct=a,console.log("Calculating quantiles");var n=new Date;this.zMin=Object(ye.a)(this.variableValues,.08),console.log(new Date-n),n=new Date,this.zMax=Object(ye.a)(this.variableValues,.92),console.log(new Date-n);var r=[],o=[];console.log("Generating spatial arrays"),n=new Date;for(var i=0;i<a.length;i++)for(var s=0;s<this.depths.size;s++)r.push(a[i]);for(var l=0;l<t.length;l++)for(var c=0;c<this.depths.size;c++)o.push(t[l]);this.plotLats=r,this.plotLons=o;for(var u=[],p=[],d=Array.from(this.depths).map(function(e){return parseFloat(e)}),h=0;h<this.latsDistinct.length;h++)for(var m=d.length-1;m>-1;m--)p.push(d[m]);for(var f=0;f<this.lonsDistinct.length;f++)for(var b=d.length-1;b>-1;b--)u.push(d[b]);this.zonalPlotDepths=u,this.meridionalPlotDepths=p,this.orientation=this.lonCount>this.latCount?"zonal":"meridional",console.log(new Date-n)}},{key:"generatePlotData",value:function(e,t,a){var n,r,o=this,i=this.depths.size,s=i*this.lonCount,l=s*this.latCount;return n=we(this.variableValues,l,this.dates.size),"zonal"==e?(n=n.map(function(e){return we(e,s,o.latCount)}),n=Ce(n),r=this.latCount):(n=n.map(function(e){return we(e,i,o.lonCount)}),n=Ce(n),r=this.lonCount),t&&a||(n=t?Re(n,1,r,r):a?Re(n,r,1,this.dates.size):Re(n,1,n.length,n.length)),n}}]),e}(),Pe={credentials:"include"},Le=Object(u.a)({},Pe,{method:"POST",headers:{"Content-Type":"application/json"}}),ze=function(e){return Object.keys(e).reduce(function(t,a,n){return"".concat(t).concat(0===n?"":"&&").concat(a,"=").concat(e[a])},"")},Ue={user:{},dataRetrieval:{},catalog:{},visualization:{}};Ue.user.login=function(e){return fetch(Ee+"/user/signin",Object(u.a)({},Le,{body:JSON.stringify(e)}))},Ue.user.logout=function(){return fetch(Ee+"/user/signout",Pe)},Ue.user.register=function(e){return fetch(Ee+"/user/signup",Object(u.a)({},Le,{body:JSON.stringify(e)}))},Ue.user.validate=function(e){return fetch(Ee+"/user/validate",Object(u.a)({},Le,{body:JSON.stringify(e)}))},Ue.catalog.retrieve=Object(fe.a)(_.a.mark(function e(){var t,a,n,r,o,i,s,l;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new TextDecoder,a=[],(n=ge()({columns:!0})).on("readable",function(){for(var e;e=n.read();)a.push(e)}),e.next=6,fetch(Ee+"/catalog/new",Pe);case 6:if((r=e.sent).ok){e.next=9;break}return e.abrupt("return",!1);case 9:o=r.body,i=o.getReader(),s=!1;case 12:if(s){e.next=20;break}return e.next=15,i.read();case 15:(l=e.sent).done?s=!0:n.write(t.decode(l.value)),e.next=12;break;case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},e)})),Ue.user.keyRetrieval=Object(fe.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ee+"/user/retrieveapikeys",Pe);case 2:if((t=e.sent).ok){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)})),Ue.user.keyCreation=function(){var e=Object(fe.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ee+"/user/generateapikey?description=".concat(t.trim()),Pe);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ue.visualization.storedProcedureRequest=function(){var e=Object(fe.a)(_.a.mark(function e(t){var a,n,r,o,i,s,l,c;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=new TextDecoder,e.t0=t.parameters.spName,e.next=e.t0===Ie.spaceTime?4:e.t0===Ie.timeSeries?6:e.t0===Ie.depthProfile?8:e.t0===Ie.sectionMap?10:12;break;case 4:return n=new Te(t),e.abrupt("break",13);case 6:return n=new _e(t),e.abrupt("break",13);case 8:return n=new Ae(t),e.abrupt("break",13);case 10:return n=new Ne(t),e.abrupt("break",13);case 12:console.log("Unknown sproc name");case 13:return e.next=15,fetch(Ee+"/api/data/sp?"+ze(t.parameters),Pe);case 15:if((r=e.sent).ok){e.next=18;break}return e.abrupt("return",!1);case 18:(o=ge()({from:2})).on("readable",function(){for(var e;e=o.read();)n.add(e)}),i=r.body,s=i.getReader(),l=!1;case 23:if(l){e.next=31;break}return e.next=26,s.read();case 26:(c=e.sent).done?l=!0:o.write(a.decode(c.value)),e.next=23;break;case 31:return n.finalize(),e.abrupt("return",n);case 33:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ue.visualization.getTableStats=function(){var e=Object(fe.a)(_.a.mark(function e(t){var a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ee+"/dataretrieval/tablestats?table="+t,Pe);case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var Me=Ue,Fe=_.a.mark(st),Ge=_.a.mark(lt),Ve=_.a.mark(ct),qe=_.a.mark(ut),Be=_.a.mark(pt),Qe=_.a.mark(dt),Ke=_.a.mark(ht),He=_.a.mark(mt),Ye=_.a.mark(ft),We=_.a.mark(bt),$e=_.a.mark(gt),Xe=_.a.mark(Et),Je=_.a.mark(St),Ze=_.a.mark(Ot),et=_.a.mark(yt),tt=_.a.mark(vt),at=_.a.mark(xt),nt=_.a.mark(jt),rt=_.a.mark(Ct),ot=_.a.mark(wt),it=_.a.mark(Rt);function st(e){var t;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(A.c)(N());case 2:return a.next=4,Object(A.b)(Me.user.login,e.payload);case 4:if(!a.sent.ok){a.next=17;break}return t=JSON.parse(w.a.get("UserInfo")),a.next=9,Object(A.c)(L());case 9:return a.next=11,Object(A.c)(ae());case 11:return a.next=13,Object(A.c)(z(t));case 13:return a.next=15,Object(A.c)(oe("Login was successful!"));case 15:a.next=21;break;case 17:return a.next=19,Object(A.c)(P());case 19:return a.next=21,Object(A.c)(oe("Login failed."));case 21:case"end":return a.stop()}},Fe)}function lt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.b)(Me.user.logout);case 2:return e.next=4,Object(A.c)(M());case 4:return e.next=6,Object(A.c)(oe("You have logged out."));case 6:case"end":return e.stop()}},Ge)}function ct(e){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.c)(q());case 2:return t.next=4,Object(A.b)(Me.user.register,e.payload);case 4:if(!t.sent.ok){t.next=16;break}return t.next=8,Object(A.c)(ne());case 8:return t.next=10,Object(A.c)(Q());case 10:return t.next=12,Object(A.c)(oe("Registration was successful. Please log in."));case 12:return t.next=14,Object(A.c)(te());case 14:t.next=20;break;case 16:return t.next=18,Object(A.c)(B());case 18:return t.next=20,Object(A.c)(oe("Registration failed."));case 20:case"end":return t.stop()}},Ve)}function ut(e){var t;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(A.c)(F());case 2:return a.next=4,Object(A.b)(Me.user.validate,e.payload);case 4:return t=a.sent,a.next=7,t.json();case 7:if(!a.sent){a.next=15;break}return a.next=11,Object(A.c)(V());case 11:return a.next=13,Object(A.c)(ne());case 13:a.next=17;break;case 15:return a.next=17,Object(A.c)(G());case 17:case"end":return a.stop()}},qe)}function pt(e){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.c)(J());case 2:return e.next=4,Object(A.b)(Me.catalog.retrieve);case 4:if(t=e.sent){e.next=10;break}return e.next=8,Object(A.c)(ee());case 8:e.next=12;break;case 10:return e.next=12,Object(A.c)(Z(t));case 12:case"end":return e.stop()}},Be)}function dt(e){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.b)(Me.user.keyRetrieval);case 2:if(t=e.sent){e.next=10;break}return e.next=6,Object(A.c)(Y());case 6:return e.next=8,Object(A.c)(oe("API Key Retrieval Failed"));case 8:e.next=12;break;case 10:return e.next=12,Object(A.c)(H(t.keys));case 12:case"end":return e.stop()}},Qe)}function ht(e){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.c)(W());case 2:return t.next=4,Object(A.b)(Me.user.keyCreation,e.payload.description);case 4:if(t.sent.ok){t.next=10;break}return t.next=8,Object(A.c)(oe("We were unable to create a new API key."));case 8:t.next=16;break;case 10:return t.next=12,Object(A.c)(oe("A new API key was created"));case 12:return t.next=14,Object(A.c)($());case 14:return t.next=16,Object(A.c)(K());case 16:case"end":return t.stop()}},Ke)}function mt(e){var t;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(A.c)(se());case 2:return a.next=4,Object(A.b)(Me.visualization.queryRequest,e.payload.query);case 4:return t=a.sent,a.next=7,Object(A.c)(pe(t));case 7:return a.next=9,Object(A.c)(ie());case 9:case"end":return a.stop()}},He)}function ft(e){var t;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),console.log("Retrieving ".concat(e.payload.parameters.fields)),a.next=4,Object(A.c)(ue());case 4:return a.next=6,Object(A.b)(Me.visualization.storedProcedureRequest,e.payload);case 6:if(t=a.sent,console.log("Got ".concat(e.payload.parameters.fields)),t){a.next=15;break}return a.next=11,Object(A.c)(ce());case 11:return a.next=13,Object(A.c)(oe("Request failed"));case 13:a.next=26;break;case 15:if(!(t.variableValues.length>0)){a.next=24;break}return a.next=18,Object(A.c)(le());case 18:return a.next=20,Object(A.c)(oe("".concat(e.payload.subType," ").concat(e.payload.parameters.fields," is ready")));case 20:return a.next=22,Object(A.c)(de({subType:e.payload.subType,data:t}));case 22:a.next=26;break;case 24:return a.next=26,Object(A.c)(oe("No data found for ".concat(e.payload.parameters.fields," in the requested ranges. Try selecting a different date or depth range.")));case 26:case"end":return a.stop()}},Ye)}function bt(e){var t;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(A.c)(he());case 2:return a.next=4,Object(A.b)(Me.visualization.getTableStats,e.payload.tableName);case 4:if(!(t=a.sent)){a.next=10;break}return a.next=8,Object(A.c)(me(Object(T.a)({},e.payload.tableName,t)));case 8:a.next=12;break;case 10:return a.next=12,Object(A.c)(oe("Failed to retrieve table stats for ".concat(e.payload.tableName)));case 12:case"end":return a.stop()}},We)}function gt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(m,st);case 2:case"end":return e.stop()}},$e)}function Et(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(h,lt);case 2:case"end":return e.stop()}},Xe)}function St(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(f,ct);case 2:case"end":return e.stop()}},Je)}function Ot(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(b,ut);case 2:case"end":return e.stop()}},Ze)}function yt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(p,pt);case 2:case"end":return e.stop()}},et)}function vt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(g,dt);case 2:case"end":return e.stop()}},tt)}function xt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(E,ht);case 2:case"end":return e.stop()}},at)}function jt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(y,mt);case 2:case"end":return e.stop()}},nt)}function Ct(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(v,ft);case 2:case"end":return e.stop()}},rt)}function wt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(x,bt);case 2:case"end":return e.stop()}},ot)}function Rt(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.a)([gt(),St(),Ot(),Et(),yt(),vt(),xt(),jt(),Ct(),wt()]);case 2:case"end":return e.stop()}},it)}var kt=Object(D.a)(),Dt=Object(c.d)(k,Object(c.a)(kt));kt.run(Rt);var Tt=Dt,It=a(38),_t=a(37),At=a(39),Nt=a(374),Pt=a(663),Lt=a(153),zt=a(373),Ut=a(195),Mt=a.n(Ut),Ft=(a(545),a(66)),Gt=a(99),Vt=a(8),qt=a(262),Bt=a(634),Qt=a(626),Kt=a(630),Ht=a(629),Yt=a(627),Wt=a(628),$t=a(652),Xt=a(263),Jt=a(625),Zt=a(631),ea=a(620),ta=Object(Vt.a)(function(e){return{centered:{position:"fixed",top:"300px"}}})(function(e){var t=e.classes;return r.a.createElement(ea.a,{size:e.size,className:t[e.customVariant]})}),aa=a(623),na=a(622),ra=a(654),oa=a(624),ia={showLoginDialog:te,logOut:U,restoreInterfaceDefaults:re,snackbarOpen:oe},sa=function(e){function t(e){var a;return Object(Se.a)(this,t),(a=Object(It.a)(this,Object(_t.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.handleLogOut=function(){a.clearState(),a.props.logOut(),a.props.restoreInterfaceDefaults()},a.clearState=function(){a.setState({username:"",password:""})},a.getCurrentPath=function(){switch(a.props.location.pathname){case"/apikeymanagement":return 0;case"/":return 1;case"/visualization":return 2;case"/register":return 3;default:return 0}},a.beepBoop=function(){console.log(a.props),w.a.set("hi","there"),w.a.get()},a.state={username:"",password:""},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){return r.a.createElement(na.a,{position:"sticky"},r.a.createElement(aa.a,null,r.a.createElement(ra.a,{value:this.getCurrentPath()||0,onChange:this.handleChange},r.a.createElement(oa.a,{key:"0",component:Ft.b,to:{pathname:"/apikeymanagement"},label:"API Keys",onClick:this.props.restoreInterfaceDefaults}),r.a.createElement(oa.a,{key:"1",component:Ft.b,to:{pathname:"/"},label:"Catalog",onClick:this.props.restoreInterfaceDefaults}),r.a.createElement(oa.a,{key:"2",component:Ft.b,to:{pathname:"/visualization"},label:"Visualization",onClick:this.props.restoreInterfaceDefaults}),this.props.user?"":r.a.createElement(oa.a,{key:"3",component:Ft.b,to:{pathname:"/register"},label:"Register",onClick:this.props.restoreInterfaceDefaults}),this.props.user?"":r.a.createElement(oa.a,{key:"4",label:"Log In",onClick:this.props.showLoginDialog}),this.props.user?r.a.createElement(oa.a,{key:"5",label:"Welcome ".concat(this.props.user.firstName," ").concat(this.props.user.lastName,"!")}):"",this.props.user?r.a.createElement(oa.a,{key:"4",label:"Log Out",onClick:this.handleLogOut}):"",r.a.createElement(oa.a,{key:"6",label:"Debug",onClick:this.beepBoop}))))}}]),t}(n.Component),la=Object(l.b)(function(e,t){return e},ia)(Object(Gt.e)(Object(Vt.a)(function(e){return{inlineBlock:{display:"inline-block"}}})(sa))),ca={keyRetrievalRequestSend:K,keyCreationRequestSend:function(e){return{type:E,payload:{description:e}}}},ua=function(e){function t(e){var a;return Object(Se.a)(this,t),(a=Object(It.a)(this,Object(_t.a)(t).call(this,e))).componentDidMount=function(){a.props.apiKeys||a.props.keyRetrievalRequestSend()},a.handleClick=function(){a.props.keyCreationRequestSend(a.state.description)},a.handleChange=function(e){a.setState(Object(u.a)({},a.state,{description:e.target.value}))},a.state={description:""},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,this.props.apiKeys?r.a.createElement(qt.a,{className:e.root,elevation:6},r.a.createElement(Xt.a,{variant:"subtitle1",className:e.apiKeyTableHeader},"Your API Keys"),r.a.createElement(Jt.a,null),r.a.createElement(Qt.a,{className:e.table},r.a.createElement(Yt.a,null,r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,{variant:"head",align:"center"},"Description"),r.a.createElement(Ht.a,{variant:"head",align:"center"},"Key (hover mouse to view)"))),r.a.createElement(Kt.a,null,this.props.apiKeys.map(function(t,a){return r.a.createElement(Wt.a,{key:a},r.a.createElement(Ht.a,{align:"center"},t.Description),r.a.createElement(Ht.a,{align:"center",className:e.showChildOnHover},r.a.createElement("span",{className:e.keyTableCell},t.Api_Key)))})))):"",r.a.createElement(qt.a,{className:e.root,elevation:6},r.a.createElement(Xt.a,{variant:"subtitle1"},"Generate a new API key"),r.a.createElement(Zt.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(Zt.a,{item:!0},r.a.createElement($t.a,{margin:"normal",id:"description",type:"text",variant:"outlined",name:"filterText",value:this.state.description,onChange:this.handleChange,placeholder:"Key Description",className:e.descriptionField})),r.a.createElement(Zt.a,{item:!0},r.a.createElement(Bt.a,{variant:"contained",disabled:this.state.description.length<1,color:"primary",onClick:this.handleClick},"Generate API Key"))),this.props.apiKeyCreationState===d.inProgress?r.a.createElement(ta,{size:18}):"",this.props.apiKeyCreationState===d.failed?r.a.createElement("span",null,"Key creation failed"):""))}}]),t}(n.Component),pa=Object(l.b)(function(e,t){return{apiKeys:e.apiKeys,apiKeyCreationState:e.apiKeyCreationState}},ca)(Object(Vt.a)(function(e){return{root:{width:"800px",marginTop:e.spacing(3),margin:"auto",paddingTop:e.spacing(2)},table:{minWidth:700},apiKeyTableHeader:{marginBottom:e.spacing(2)},keyTableCell:{visibility:"hidden"},showChildOnHover:{"&:hover span":{visibility:"visible"}}}})(ua)),da=a(635),ha={showLoginDialog:te},ma=Object(l.b)(null,ha)(function(e){return Object(n.useEffect)(function(){e.showLoginDialog()}),r.a.createElement("p",null,"This feature requires a user account. Please ",r.a.createElement(da.a,{component:Ft.b,to:{pathname:"/apikeymanagement"},onClick:function(){return e.showLoginDialog()}}," log in")," or ",r.a.createElement(da.a,{component:Ft.b,to:{pathname:"/register"}}," register"),".")}),fa={showLoginDialog:te},ba=function(e){function t(){return Object(Se.a)(this,t),Object(It.a)(this,Object(_t.a)(t).apply(this,arguments))}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"componentDidMount",value:function(){this.props.user||this.props.showLoginDialog()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(la,null),this.props.user?r.a.createElement(pa,null):r.a.createElement(ma,null))}}]),t}(n.Component),ga=Object(l.b)(function(e,t){return{user:e.user}},fa)(Object(Vt.a)(function(e){return{}})(ba)),Ea=a(366),Sa=[["Variable Name","Variable"],["Spatial Resolution","Spatial_Resolution"],["Temporal Resolution","Temporal_Resolution"],["Unit","Unit"],["Process Level","Process_Level"],["Study Domain","Study_Domain"],["SQL Table Name","Table_Name"]],Oa=Object(Vt.a)(function(e){return{title:{marginBottom:e.spacing(1)},wrapper:{width:"90%",margin:"-10px auto 0px auto",height:"100%"},infoCard:{padding:e.spacing(2),width:"100%",height:"100%"},gridClass:{marginTop:e.spacing(2),height:"100%"},gridItem:{height:"90%",display:"flex",alignItems:"center",justifyContent:"center"},datasetDescriptionWrapper:{whiteSpace:"normal",height:"100%",overflow:"auto"},datasetDescription:{marginBottom:e.spacing(2),marginTop:e.spacing(1)},vizSampleImage:{width:"90%"},variableDetailTable:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},variableDetailTableRow:{height:"32px"},variableDetailTableCell:{color:"#FFF6EC",borderBottomColor:"black"}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.wrapper},r.a.createElement(Zt.a,{container:!0,spacing:8,className:t.gridClass},r.a.createElement(Zt.a,{item:!0,xs:3,className:t.gridItem},r.a.createElement("img",{src:"https://simonscmap.dev/images/catalog/viz_sample.png",alt:"Sample Visualization",className:t.vizSampleImage})),r.a.createElement(Zt.a,{item:!0,xs:4,className:t.gridItem},r.a.createElement("div",{className:t.datasetDescriptionWrapper},r.a.createElement(Xt.a,{variant:"body2",className:t.datasetDescription},e.data.Dataset_Description),r.a.createElement(Xt.a,{variant:"caption"},"Source: ",e.data.Data_Source)," ",r.a.createElement("br",null),r.a.createElement(Xt.a,{variant:"caption"},"Distributor: ",e.data.Distributor))),r.a.createElement(Zt.a,{item:!0,xs:5,className:t.gridItem},r.a.createElement(Qt.a,{className:t.variableDetailTable,size:"small"},r.a.createElement(Kt.a,null,Sa.map(function(a,n){return r.a.createElement(Wt.a,{key:n,className:t.variableDetailTableRow},r.a.createElement(Ht.a,{className:t.variableDetailTableCell},a[0]),r.a.createElement(Ht.a,{className:t.variableDetailTableCell},e.data[a[1]]))}))))))}),ya={template:'<div style="height: 100%; box-sizing: border-box" class="testClass">  <div style="height: 10%;">Call Details</div>  <div ref="eDetailGrid" style="height: 90%;"></div></div>'},va=[{headerName:"Long Name",field:"Long_Name",sortable:!0,filter:!0,tooltipField:"longName",cellRenderer:"agGroupCellRenderer",cellStyle:{textAlign:"left"}},{headerName:"Variable",field:"Variable",sortable:!0,filter:!0,hide:!0},{headerName:"Table Name",field:"Table_Name",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Dataset Name",field:"Dataset_Name",sortable:!0,filter:!0,enableRowGroup:!0,tooltipField:"datasetName"},{headerName:"Make",field:"Make",sortable:!0,filter:!0,enableRowGroup:!0},{headerName:"Sensor",field:"Sensor",sortable:!0,filter:!0,enableRowGroup:!0},{headerName:"Study Domain",field:"Study_Domain",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Process Level",field:"Process_Level",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Spatial Resolution",field:"Spatial_Resolution",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Temporal Resolution",field:"Temporal_Resolution",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Unit",field:"Unit",sortable:!0,filter:!0,hide:!0},{headerName:"Key Words",field:"Keywords",hide:!0}],xa={resizable:!0},ja={cellStyle:{textAlign:"left"}},Ca=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(It.a)(this,(e=Object(_t.a)(t)).call.apply(e,[this].concat(o)))).state={filterText:""},a.handleChange=function(e){a.setState(Object(u.a)({},a.state,{filterText:e.target.value})),a.gridApi.setQuickFilter(e.target.value)},a.onGridReady=function(e){a.gridApi=e.api,a.columnApi=e.columnApi,a.gridApi.sizeColumnsToFit()},a.handleColumnRowGroupChanged=function(e){e.columns.forEach(function(e){e.columnApi.setColumnVisible(e.colId,!1)})},a.render=function(){var e=a.props.classes;return r.a.createElement(qt.a,{elevation:12,className:e.gridPaper},r.a.createElement($t.a,{className:e.gridSearch,autoFocus:!0,margin:"normal",id:"name",type:"text",variant:"outlined",name:"filterText",value:a.state.filterText,onChange:a.handleChange,label:"Variable Search",InputLabelProps:{shrink:!0}}),r.a.createElement("div",{className:e.gridWrapper+" ag-theme-material"},r.a.createElement(Ea.AgGridReact,{columnDefs:va,defaultColDef:xa,rowData:a.props.catalog,onGridReady:a.onGridReady,suppressDragLeaveHidesColumns:!0,rowGroupPanelShow:"always",groupMultiAutoColumn:!0,onColumnRowGroupChanged:a.handleColumnRowGroupChanged,autoGroupColumnDef:ja,enableBrowserTooltips:!0,masterDetail:!0,frameworkComponents:{myDetailCellRenderer:Oa},detailCellRenderer:"myDetailCellRenderer",detailRowHeight:280,detailCellRendererParams:ya})))},a}return Object(At.a)(t,e),t}(n.Component),wa=Object(Vt.a)(function(e){return{gridWrapper:{height:"60vh",width:"90%",margin:"0 auto"},gridSearch:{margin:"0 auto 30px auto"},gridPaper:{margin:"60px 5vw",padding:"30px"}}})(Ca),Ra={retrievalRequestSend:X},ka=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(It.a)(this,(e=Object(_t.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.props.catalog||a.props.retrievalRequestSend()},a.determineContent=function(){return a.props.catalog?r.a.createElement(wa,{catalog:a.props.catalog}):a.props.catalogRequestState===d.inProgress?r.a.createElement(ta,{size:24}):a.props.catalogRequestState===d.failed?r.a.createElement("p",null,"Failed to get catalog. Have you tried turning it off and then on again?"):r.a.createElement("p",null,"I don't know how we got here. Please debug the catalog retrieval process.")},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this.determineContent();return r.a.createElement(r.a.Fragment,null,r.a.createElement(la,null),e)}}]),t}(n.Component),Da=Object(l.b)(function(e,t){return{catalogRequestState:e.catalogRequestState,catalog:e.catalog}},Ra)(Object(Vt.a)(function(e){return{}})(ka)),Ta=a(662),Ia=a(637),_a=a(655),Aa=a(636),Na=Object(Vt.a)(function(e){return{registrationCard:{marginTop:e.spacing(1),marginBottom:e.spacing(1),height:"200px"},textField:{margin:e.spacing(1),width:"80%"}}})(function(e){var t=e.classes,a=Object.keys(e.inputFieldState);return r.a.createElement(Aa.a,{className:t.registrationCard},r.a.createElement(Zt.a,{container:!0,spacing:1},a.map(function(n,o){return r.a.createElement(Zt.a,{key:o,item:!0,xs:a.length>2?6:12},r.a.createElement($t.a,{key:o,name:e.inputFieldInfo[n].name,label:e.inputFieldInfo[n].label,value:e.inputFieldState[n].value,className:t.textField,onChange:e.onChange,type:e.inputFieldInfo[n].type,error:!e.inputFieldState[n].valid,helperText:e.inputFieldState[n].valid?" ":e.inputFieldInfo[n].requirement}))})))}),Pa={registrationNextActiveStep:ne,registrationPreviousActiveStep:function(){return{type:"REGISTRATION_PREVIOUS_ACTIVE_STEP"}},userRegistrationRequestSend:function(e){return{type:f,payload:e}},userValidationRequestSend:function(e,t){return{type:b,payload:{username:e,email:t}}}},La=function(){return[{firstName:{label:"First Name*",name:"firstName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},lastName:{label:"Last Name*",name:"lastName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},username:{label:"Username*",name:"username",type:"text",requirement:"Must be 6 to 20 alphanumeric characters.",optional:!1},email:{label:"Email Address*",name:"email",type:"email",requirement:"Must be a valid email address.",optional:!1}},{institute:{label:"Institute",name:"institute",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},department:{label:"Department",name:"department",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},country:{label:"Country",name:"country",type:"text",requirement:"Maximum length is 150 characters.",optional:!0}},{password:{label:"Password*",name:"password",type:"password",requirement:"Must be 8 to 32 characters with 1 number and 1 special character.",optional:!1},confirmPassword:{label:"Confirm Password*",name:"confirmPassword",type:"password",requirement:"Passwords must match.",optional:!1}}]},za=function(e){function t(e){var a;Object(Se.a)(this,t),(a=Object(It.a)(this,Object(_t.a)(t).call(this,e))).validateField=function(e,t){var n=t.trim(),r=/$^/;switch(e){case"firstName":case"lastName":r=/^[A-Za-z ]{2,40}$/;break;case"username":r=/^[A-Za-z0-9 ]{6,20}$/;break;case"email":r=/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/;break;case"institute":case"department":case"country":r=/^.{0,150}$/;break;case"password":r=/^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/,a.setState(function(e){var t=Object(O.a)(e.cards);return t[2].confirmPassword.valid=Boolean(t[2].confirmPassword.value===n),{cards:t}});break;case"confirmPassword":return a.state.cards[2].password.value===n}return r.test(n)},a.processStateToActionPayload=function(){var e={};return a.state.cards.forEach(function(t){Object.keys(t).forEach(function(a){e[a]=t[a].value})}),console.log("action payload"),console.log(e),e},a.currentCardIsValid=function(){var e=a.state.cards[a.props.registrationActiveStep];for(var t in e)if(!e[t].optional&&(!e[t].value||!e[t].valid))return!1;return!0},a.handleNext=function(){switch(a.props.registrationActiveStep){case 0:var e=a.state.cards[0].username.value,t=a.state.cards[0].email.value;a.props.userValidationRequestSend(e,t);break;case 1:a.props.registrationNextActiveStep();break;case 2:a.props.userRegistrationRequestSend(a.processStateToActionPayload());break;default:a.props.registrationNextActiveStep()}},a.handleBack=function(){a.props.registrationPreviousActiveStep()},a.handleChange=function(e){var t=e.target.value,n=e.target.name,r=a.validateField(n,t);a.setState(function(e){var o=Object(O.a)(e.cards);return o[a.props.registrationActiveStep][n]=Object(u.a)({},o[a.props.registrationActiveStep][n],{value:t,valid:r}),{cards:o}})};var n=[];return La().forEach(function(e){var t={};Object.keys(e).forEach(function(a){t[a]={value:"",valid:!0,optional:e[a].optional}}),n.push(t)}),a.state={cards:n},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=["Your Information","Optional Organization Info","Security"],a=this.props.registrationActiveStep,n=La();return r.a.createElement(r.a.Fragment,null,r.a.createElement(la,null),r.a.createElement("div",{className:e.root},r.a.createElement(Ta.a,{activeStep:a},t.map(function(e,t){return r.a.createElement(Ia.a,{key:e},r.a.createElement(_a.a,null,e))})),r.a.createElement("div",null,a===t.length?r.a.createElement("div",null,r.a.createElement(Xt.a,{className:e.instructions},"Registration Completed!")):r.a.createElement("div",null,r.a.createElement(Na,{inputFieldState:Object(u.a)({},this.state.cards[this.props.registrationActiveStep]),inputFieldInfo:Object(u.a)({},n[this.props.registrationActiveStep]),onChange:this.handleChange}),r.a.createElement("div",null,r.a.createElement(Bt.a,{disabled:0===a,onClick:this.handleBack,className:e.button},"Back"),r.a.createElement(Bt.a,{variant:"contained",color:"primary",onClick:this.handleNext,className:e.button,disabled:!this.currentCardIsValid()||this.props.userValidationState===d.inProgress},a===t.length-1?"Finish":"Next"),this.props.userValidationState===d.inProgress&&r.a.createElement(ea.a,{size:24,className:e.buttonProgress}),this.props.userValidationState===d.failed&&r.a.createElement("p",null,"That username or email is already in use. Please enter a different username or email address."),this.props.userRegistrationState===d.failed&&r.a.createElement("p",null,"Registration failed. Please try again."))))))}}]),t}(n.Component),Ua=Object(l.b)(function(e,t){return{registrationActiveStep:e.registrationActiveStep,userValidationState:e.userValidationState,userRegistrationState:e.userRegistrationState}},Pa)(Object(Vt.a)(function(e){return{root:{width:"60%",margin:"5% auto"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},registrationCard:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},textField:{margin:e.spacing(1),width:200},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})(za)),Ma=function(e){function t(){return Object(Se.a)(this,t),Object(It.a)(this,Object(_t.a)(t).apply(this,arguments))}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){return r.a.createElement(Ua,null)}}]),t}(n.Component),Fa=a(92),Ga=a(41),Va=a(375),qa=a(261),Ba=a(367),Qa=a(656),Ka=a(660),Ha=a(648),Ya=a(641),Wa=a(642),$a=a(643),Xa=a(644),Ja=a(645),Za=a(646),en=a(647),tn=a(649),an={orange:"#FF8000",backgroundGray:"#424242",aqua:"#22A3B9"},nn=a(658),rn=a(638),on=a(639),sn=a(640),ln=Object(Vt.a)(function(e){return{}})(function(e){e.classes;var t=e.data;return t?r.a.createElement(nn.a,{open:e.open,onClose:e.onClose},r.a.createElement(rn.a,null,t.Variable),r.a.createElement(on.a,null,r.a.createElement(sn.a,null,t.Long_Name),r.a.createElement(Qt.a,{size:"small"},r.a.createElement(Kt.a,null,r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Sensor"),r.a.createElement(Ht.a,null,t.Sensor)),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Spatial Resolution"),r.a.createElement(Ht.a,null,t.Spatial_Resolution)),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Temporal Resolution"),r.a.createElement(Ht.a,null,t.Temporal_Resolution)),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Temporal Coverage Begin"),r.a.createElement(Ht.a,null,t.Time_Min?t.Time_Min.slice(0,10):"Irregular")),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Temporal Coverage End"),r.a.createElement(Ht.a,null,t.Time_Max?t.Time_Max.slice(0,10):"Irregular")),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Lat Coverage Begin"),r.a.createElement(Ht.a,null,t.Lat_Min)),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Lat Coverage End"),r.a.createElement(Ht.a,null,t.Lat_Max)),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Lon Coverage Begin"),r.a.createElement(Ht.a,null,t.Lon_Min)),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Lon Coverage End"),r.a.createElement(Ht.a,null,t.Lon_Max)),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Depth Coverage Begin"),r.a.createElement(Ht.a,null,t.Depth_Min||"Surface Only")),r.a.createElement(Wt.a,null,r.a.createElement(Ht.a,null,"Depth Coverage End"),r.a.createElement(Ht.a,null,t.Depth_Max||"Surface Only")))))):""}),cn=[{icon:r.a.createElement(Ya.a,null),name:De.sectionMap},{icon:r.a.createElement(Wa.a,null),name:De.timeSeries},{icon:r.a.createElement($a.a,null),name:De.histogram},{icon:r.a.createElement(Xa.a,null),name:De.depthProfile},{icon:r.a.createElement(Ja.a,null),name:De.heatmap},{icon:r.a.createElement(Za.a,null),name:De.contourMap}],un=function(e){function t(){return Object(Se.a)(this,t),Object(It.a)(this,Object(_t.a)(t).apply(this,arguments))}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.children,n=e.maxHeight,o=(0,e.getValue)(),i=Object(Fa.a)(o,1)[0],s=35*t.indexOf(i);return r.a.createElement(Ba.a,{style:{backgroundColor:an.backgroundGray},height:(0===t.length?35:n>35*t.length?35*t.length:n)||35,itemCount:a.length,itemSize:35,initialScrollOffset:s||0},function(e){var t=e.index,n=e.style;return r.a.createElement("div",{style:n},a[t])})}}]),t}(n.Component),pn=function(e){return r.a.createElement(Ga.z.DropdownIndicator,e,r.a.createElement(en.a,null))},dn=function(e){return r.a.createElement(Ga.z.SingleValue,Object.assign({},e,{className:e.className+" fa-icon-cmap"}))},hn=function(e){return r.a.createElement(Ga.z.Option,Object.assign({},e,{className:e.className+" fa-icon-cmap"}))},mn=function(e){function t(e){var a;Object(Se.a)(this,t),(a=Object(It.a)(this,Object(_t.a)(t).call(this,e))).componentDidUpdate=function(e){e.catalog&&e.catalog.length||!a.props.catalog||!a.props.catalog.length||(a.state.search.addDocuments(a.props.catalog),a.setState({search:a.state.search}))},a.filterVariables=function(e,t){var a=Object.values(e.data).filter(Boolean).join(" ");return!t.split(" ").some(function(e){return-1===a.indexOf(e)})},a.handleTableStatsDialogClose=function(){a.setState(Object(u.a)({},a.state,{tableStatsDialogIsOpen:!1}))},a.handleTableStatsDialogOpen=function(){a.setState(Object(u.a)({},a.state,{tableStatsDialogIsOpen:!0}))},a.handleVisualizationSpeedDialClose=function(){a.setState({visualizationSpeedDialOpen:!1})},a.handleVisualizationSpeedDialOpen=function(){a.setState({visualizationSpeedDialOpen:!0})},a.handleVisualizationSpeedDialClick=function(){a.setState({visualizationSpeedDialOpen:!a.state.visualizationSpeedDialOpen})},a.getSelectOptionsFromCatalogItems=function(e){return e.map(function(e){return{value:e.Variable,label:e.Variable===e.Long_Name?e.Variable:e.Variable+" : "+e.Long_Name,data:e}})||[]},a.onAutoSuggestChange=function(e,t){"input-change"===t.action&&a.setState(Object(u.a)({},a.state,{searchField:e})),"set-value"!==t.action&&"menu-close"!==t.action||a.setState(Object(u.a)({},a.state,{searchField:""}))};var n=new qa.Search("Variable");return n.searchIndex=new qa.UnorderedSearchIndex,n.addIndex("Variable"),n.addIndex("Make"),n.addIndex("Sensor"),n.addIndex("Data_Source"),n.addIndex("Process_Level"),n.addIndex("Long_Name"),n.addIndex("Keywords"),e.catalog&&n.addDocuments(e.catalog),a.state={visualizationSpeedDialOpen:!1,tableStatsDialogIsOpen:!1,search:n,searchField:""},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.searchField,o=this.props,i=o.classes,s=(o.tableName,o.fields),l=o.depth1,c=o.depth2,p=o.dt1,h=o.dt2,m=o.lat1,f=o.lat2,b=o.lon1,g=o.lon2,E=o.catalog,S=o.depthIsInvalid,O=o.latIsInvalid,y=o.lonIsInvalid,v=o.catalogRequestState,x=n&&E?this.getSelectOptionsFromCatalogItems(a.search(n)):E?this.getSelectOptionsFromCatalogItems(E):[];return r.a.createElement("div",{className:this.props.showUI?"":i.displayNone},r.a.createElement(ln,{open:this.state.tableStatsDialogIsOpen,onClose:this.handleTableStatsDialogClose,data:s&&s.data}),r.a.createElement(qt.a,{className:i.dataRetrievalFormPaper},r.a.createElement(Zt.a,{container:!0,spacing:2},r.a.createElement(Zt.a,{item:!0,xs:11,className:i.shortenHeight},r.a.createElement(Va.a,{isLoading:v===d.inProgress,components:{IndicatorSeparator:"",DropdownIndicator:pn,Option:hn,MenuList:un,SingleValue:dn},isClearable:!0,onInputChange:this.onAutoSuggestChange,filterOption:null,className:i.variableSelect,autoFocus:!0,escapeClearsValue:!0,name:"fields",label:"Variables",options:x,onChange:this.props.updateFields,value:s,placeholder:"Variable Search",styles:{menu:function(e){return Object(u.a)({},e,{zIndex:9999})},input:function(e){return Object(u.a)({},e,{color:"white",fontFamily:'"Lato", sans-serif'})},control:function(e){return Object(u.a)({},e,{backgroundColor:"#424242",border:"1px solid #333333","&:hover":{borderColor:"white"},"&:focus-within":{borderColor:an.orange}})},placeholder:function(e){return Object(u.a)({},e,{fontFamily:'"Lato", sans-serif',color:an.orange,fontSize:"14px"})},noOptionsMessage:function(e){return Object(u.a)({},e,{fontFamily:'"Lato", sans-serif',color:an.orange,backgroundColor:an.backgroundGray})},option:function(e,t){return Object(u.a)({},e,{backgroundColor:"#424242",color:"Satellite"===t.data.data.Sensor?"#1acf02":"Blend"===t.data.data.Sensor?"#fce803":"#009fd4","&:hover":{backgroundColor:"#383838"},"&:after":{content:"Satellite"===t.data.data.Sensor?"'\f7bf'":"Blend"===t.data.data.Sensor?"'\f109'":"'\f21a'",float:"left"}})},singleValue:function(e,t){return Object(u.a)({},e,{fontFamily:"Satellite"===t.data.data.Sensor?"Font Awesome 5 Free":'"Lato", sans-serif',color:"Satellite"===t.data.data.Sensor?"#1acf02":"Blend"===t.data.data.Sensor?"#fce803":"#009fd4",paddingRight:"20px","&:after":{content:"Satellite"===t.data.data.Sensor?"'\f7bf'":"Blend"===t.data.data.Sensor?"'\f109'":"'\f21a'",fontSize:"18px",position:"relative",left:"8px",top:"3px"}})}},theme:function(e){return Object(u.a)({},e,{colors:Object(u.a)({},e.colors,{primary25:"#e0e0e0",primary:"#212121"})})}})),r.a.createElement(Zt.a,{item:!0,xs:1},r.a.createElement(Ha.a,{disabled:null===this.props.fields,onClick:this.handleTableStatsDialogOpen},r.a.createElement(tn.a,null))),r.a.createElement(Zt.a,{item:!0,xs:3,className:i.datePickerGridSection},r.a.createElement(Lt.a,{placeholder:"yyyy-MM-dd",id:"startDate",label:"Start Date",name:"dt1",format:"yyyy-MM-dd",disableFuture:!0,autoOk:!0,value:p,onChange:this.props.handleStartDateChange,inputVariant:"outlined",variant:"inline",InputLabelProps:{shrink:!0}})),r.a.createElement(Zt.a,{item:!0,xs:3,className:i.datePickerGridSection},r.a.createElement(Lt.a,{placeholder:"yyyy-MM-dd",id:"endDate",label:"End Date",name:"dt2",format:"yyyy-MM-dd",disableFuture:!0,autoOk:!0,value:h,onChange:this.props.handleEndDateChange,inputVariant:"outlined",variant:"inline",InputLabelProps:{shrink:!0}})),r.a.createElement(Zt.a,{item:!0,xs:3},r.a.createElement($t.a,{id:"startDepth",label:"Start Depth(m)",name:"depth1",InputLabelProps:{shrink:!0},error:S(this.props.depth1),value:l,onChange:this.props.handleChange,variant:"outlined"})),r.a.createElement(Zt.a,{item:!0,xs:3},r.a.createElement($t.a,{id:"endDepth",label:"End Depth(m)",name:"depth2",InputLabelProps:{shrink:!0},error:S(this.props.depth2),value:c,onChange:this.props.handleChange,variant:"outlined"})),r.a.createElement(Zt.a,{item:!0,xs:3},r.a.createElement($t.a,{id:"startLat",label:"Start Latitude(deg)",name:"lat1",InputLabelProps:{shrink:!0},error:O(m),value:m,onChange:this.props.handleChange,variant:"outlined"})),r.a.createElement(Zt.a,{item:!0,xs:3},r.a.createElement($t.a,{id:"endLat",label:"End Latitude(deg)",name:"lat2",InputLabelProps:{shrink:!0},error:O(f),value:f,onChange:this.props.handleChange,variant:"outlined"})),r.a.createElement(Zt.a,{item:!0,xs:3},r.a.createElement($t.a,{id:"startLon",label:"Start Longitude(deg)",name:"lon1",InputLabelProps:{shrink:!0},error:y(b),value:b,onChange:this.props.handleChange,variant:"outlined"})),r.a.createElement(Zt.a,{item:!0,xs:3},r.a.createElement($t.a,{id:"endLon",label:"End Longitude(deg)",name:"lon2",InputLabelProps:{shrink:!0},error:y(g),value:g,onChange:this.props.handleChange,variant:"outlined"}))),r.a.createElement(Qa.a,{ariaLabel:"Visualization Speed Dial",disabled:!0,ButtonProps:{variant:"round",classes:{root:i.visualizeButton},color:"secondary"},className:i.visualizationSpeedDial,icon:r.a.createElement("svg",{height:"30",width:"200"},r.a.createElement("text",{x:"50%",y:"50%",fill:"white",fontVariant:"normal",className:i.visualizeButtonText},"Visualize")),onBlur:this.handleVisualizationSpeedDialClose,onClick:this.handleVisualizationSpeedDialClick,onClose:this.handleVisualizationSpeedDialClose,onFocus:this.handleVisualizationSpeedDialOpen,onMouseEnter:this.handleVisualizationSpeedDialOpen,onMouseLeave:this.handleVisualizationSpeedDialClose,open:this.state.visualizationSpeedDialOpen,direction:"right"},cn.map(function(t){return r.a.createElement(Ka.a,{key:t.name,icon:t.icon,tooltipTitle:t.name,onClick:function(){return e.props.onVisualize(t.name)},tooltipPlacement:"bottom"})}))))}}]),t}(n.Component),fn=Object(l.b)(function(e,t){return{data:e.data,storedProcedureRequestState:e.storedProcedureRequestState,catalog:e.catalog,catalogRequestState:e.catalogRequestState}},{})(Object(Vt.a)(function(e){return{dataRetrievalFormPaper:{width:"1200px",height:"205px",padding:e.spacing(2.5),position:"fixed",top:"10px",left:"50%",marginLeft:"-600px",zIndex:2,paddingTop:e.spacing(1.5)},dataRetrievalFormField:{padding:"0px ".concat(e.spacing(1))},retrieveDataButton:{margin:"10px auto"},variableSelect:{margin:"0 30px 20px 30px"},visualizationSpeedDial:{position:"relative",top:"5px",left:"30px"},visualizeButton:{borderRadius:"10%",width:"100px",height:"40px",margin:"auto 0",backgroundColor:e.palette},visualizeButtonText:{dominantBaseline:"middle",textAnchor:"middle"},displayNone:{display:"none"},datePickerGridSection:{paddingLeft:"40px !important",paddingRight:"40px !important"},shortenHeight:{height:"60px"}}})(mn)),bn=Object(l.b)(function(e,t){return Object(u.a)({},e)},{})(Object(Vt.a)(function(e){return{buttonPaper:{width:"60px",height:"60px",padding:e.spacing(.5),position:"fixed",left:"10px",bottom:"10px",zIndex:2,textDecoration:"none",cursor:"pointer"},goBackText:{marginTop:"0px"}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(qt.a,{className:t.buttonPaper,onClick:function(){e.statePieces.forEach(function(t){console.log(t),console.log(e[t])})}},r.a.createElement("img",{src:"https://simonscmap.com/images/catalog/coverage_global.png",alt:"Globe",height:"36",width:"36"}),r.a.createElement("h6",{className:t.goBackText},"Debug")))})),gn={clearCharts:function(){return{type:"CLEAR_CHARTS"}},clearMaps:function(){return{type:"CLEAR_MAPS"}}},En=Object(l.b)(function(e,t){return{}},gn)(Object(Vt.a)(function(e){return{buttonPaper:{width:"60px",height:"60px",padding:e.spacing(.5),position:"fixed",left:"10px",top:"250px",zIndex:2,textDecoration:"none",cursor:"pointer"},goBackText:{marginTop:"0px"}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(qt.a,{className:t.buttonPaper,onClick:function(){e.clearCharts(),e.clearMaps()}},r.a.createElement("img",{src:"https://simonscmap.com/images/catalog/coverage_global.png",alt:"Globe",height:"36",width:"36"}),r.a.createElement("h6",{className:t.goBackText},"Clear")))})),Sn=a(192),On=Object(Vt.a)(function(e){return{buttonPaper:{width:"60px",height:"60px",padding:e.spacing(.5),position:"fixed",left:"10px",top:"10px",zIndex:2,textDecoration:"none"},goBackText:{marginTop:"0px"}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(qt.a,{className:t.buttonPaper,component:Ft.b,to:{pathname:"/"}},r.a.createElement("img",{src:"https://simonscmap.com/images/catalog/coverage_global.png",alt:"Globe",height:"36",width:"36"}),r.a.createElement("h6",{className:t.goBackText},"Go Back")))}),yn=a(83),vn=a.n(yn),xn={size:"small",color:"primary",variant:"contained"},jn=Object(Vt.a)(function(e){return{chartWrapper:Object(T.a)({display:"inline-block",backgroundColor:an.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},"backgroundColor",an.backgroundGray),buttonBlock:{display:"block"}}})(function(e){console.log("SpaceTimeChart");var t=e.classes,a=e.chart,o=a.data,i=a.subType,s=(o.lats,o.lons,o.dates),l=o.depths,c=Object(n.useState)(!1),u=Object(Fa.a)(c,2),p=u[0],d=u[1],h=Object(n.useState)(!1),m=Object(Fa.a)(h,2),f=m[0],b=m[1],g=Object(n.useState)(i),E=Object(Fa.a)(g,2),S=E[0],O=E[1];console.log("Generating plot subsets");var y,v=new Date,x=o.generatePlotData(S,p,f);switch(console.log(new Date-v),console.log("Creating plots"),v=new Date,S){case De.contourMap:y=function(e,t,a,n){var o=Array.from(t.depths).map(function(e){return parseFloat(e)}),i=Array.from(t.dates);return e.map(function(e,s){var l=t.parameters.fields,c=a?n?i[Math.floor(s/o.length)].slice(0,10):i[s].slice(0,10):"Merged Dates",u=t.hasDepth?n?o[s%o.length].toFixed(2)+"m depth":"Merged Depths":"Surface";return r.a.createElement(vn.a,{style:{position:"relative",display:"inline-block"},data:[{zauto:!1,zmin:t.zMin,zmax:t.zMax,x:t.lons,y:t.lats,z:e,name:t.parameters.fields,type:"contour",contours:{coloring:"heatmap",showlabels:!0,labelfont:{family:"Raleway",size:12,color:"white"},labelformat:".2e"},colorbar:{title:{text:"[".concat(t.metadata.Unit,"]")},exponentformat:"power"}}],key:s,layout:{font:{color:"#ffffff"},title:"".concat(l,"[").concat(t.metadata.Unit,"]  ").concat(u,"  ").concat(c),xaxis:{title:"Longitude",color:"#ffffff"},yaxis:{title:"Latitude",color:"#ffffff"},paper_bgcolor:an.backgroundGray,annotations:[{text:"Source: ".concat(t.metadata.Distributor.length<30?t.metadata.Distributor:t.metadata.Distributor.slice(0,30)," -- Provided by Simons CMAP"),font:{color:"white",size:10},xref:"paper",yref:"paper",yshift:-202,showarrow:!1}]}})})}(x,o,p,f);break;case De.heatmap:y=function(e,t,a,n){var o=Array.from(t.depths).map(function(e){return parseFloat(e)}),i=Array.from(t.dates);return e.map(function(e,s){var l=t.parameters.fields,c=a?n?i[Math.floor(s/o.length)].slice(0,10):i[s].slice(0,10):"Merged Dates",u=t.hasDepth?n?a?o[s%o.length].toFixed(2)+"m depth":o[s].toFixed(2)+"m depth":"Merged Depths":"Surface";try{return r.a.createElement(vn.a,{style:{position:"relative",display:"inline-block"},data:[{zauto:!1,zmin:t.zMin,zmax:t.zMax,zsmooth:e.length<2e4?"best":"fast",x:t.lons,y:t.lats,z:e,name:t.parameters.fields,type:"heatmap",colorbar:{title:{text:"[".concat(t.metadata.Unit,"]")},exponentformat:"power"}}],key:s,layout:{font:{color:"#ffffff"},title:"".concat(l,"[").concat(t.metadata.Unit,"]  ").concat(u,"   ").concat(c),xaxis:{title:"Longitude[\xb0]",color:"#ffffff",exponentformat:"power"},yaxis:{title:"Latitude[\xb0]",color:"#ffffff",exponentformat:"power"},paper_bgcolor:an.backgroundGray,annotations:[{text:"Source: ".concat(t.metadata.Distributor.length<30?t.metadata.Distributor:t.metadata.Distributor.slice(0,30)," -- Provided by Simons CMAP"),font:{color:"white",size:10},xref:"paper",yref:"paper",yshift:-202,showarrow:!1}]}})}catch(p){console.log("Failed to plot subset"),console.log(e)}})}(x,o,p,f);break;case De.histogram:y=function(e,t,a,n){var o=Array.from(t.depths).map(function(e){return parseFloat(e)}),i=Array.from(t.dates);return e.map(function(e,s){var l=t.parameters.fields,c=a?n?i[Math.floor(s/o.length)].slice(0,10):i[s].slice(0,10):"Aggregated Time",u=t.hasDepth?n?a?o[s%o.length].toFixed(2)+"m depth":o[s].toFixed(2)+"m depth":"Aggregated Depth":"Surface";return r.a.createElement(vn.a,{style:{position:"relative",display:"inline-block"},data:[{x:e,name:t.parameters.fields,type:"histogram"}],key:s,layout:{font:{color:"#ffffff"},title:"".concat(l,"[").concat(t.metadata.Unit,"]  ").concat(u,"  ").concat(c),xaxis:{title:"".concat(t.parameters.fields," [").concat(t.metadata.Unit,"]"),exponentformat:"power",color:"#ffffff"},yaxis:{color:"#ffffff",title:"Frequency"},paper_bgcolor:an.backgroundGray,annotations:[{text:"Source: ".concat(t.metadata.Distributor.length<30?t.metadata.Distributor:t.metadata.Distributor.slice(0,30)," -- Provided by Simons CMAP"),font:{color:"white",size:10},xref:"paper",yref:"paper",yshift:-202,showarrow:!1}]}})})}(x,o,p,f);break;default:y=""}return console.log(new Date-v),r.a.createElement("div",null,r.a.createElement("div",{className:t.buttonBlock},r.a.createElement(Bt.a,Object.assign({},xn,{disabled:1===s.size,onClick:function(){return d(!p)}}),p?"Merge Dates":"Split By Date"),r.a.createElement(Bt.a,Object.assign({},xn,{disabled:1===l.size,onClick:function(){return b(!f)}}),f?"Merge Depths":"Split By Depth"),S==De.heatmap?"":r.a.createElement(Bt.a,Object.assign({},xn,{onClick:function(){return O(De.heatmap)}}),"Switch to Heatmap"),S==De.contourMap?"":r.a.createElement(Bt.a,Object.assign({},xn,{onClick:function(){return O(De.contourMap)}}),"Switch to Contour"),S==De.histogram?"":r.a.createElement(Bt.a,Object.assign({},xn,{onClick:function(){return O(De.histogram)}}),"Switch to Histogram")),y)}),Cn=Object(Vt.a)(function(e){return{chartWrapper:Object(T.a)({display:"inline-block",backgroundColor:an.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},"backgroundColor",an.backgroundGray),buttonBlock:{display:"block"}}})(function(e){var t=e.classes,a=e.chart,n=a.data,o=(a.subType,n.stds),i=n.variableValues,s=n.dates,l=n.parameters,c=n.metadata;n.zMin,n.zMax;return r.a.createElement("div",null,r.a.createElement("div",{className:t.buttonBlock}),r.a.createElement(vn.a,{style:{position:"relative",display:"inline-block"},data:[{x:s,y:i,error_y:{type:"data",array:o,opacity:.2,color:"gray",visible:!0},name:l.fields,type:"scatter",line:{color:"#e377c2"}}],layout:{title:"".concat(l.fields,"[").concat(c.Unit,"]  ").concat(l.dt1," to ").concat(l.dt2),paper_bgcolor:an.backgroundGray,font:{color:"#ffffff"},xaxis:{title:"Time",color:"#ffffff",exponentformat:"power"},yaxis:{title:l.fields,color:"#ffffff",exponentformat:"power"},annotations:[{text:"Source: ".concat(c.Distributor.length<30?c.Distributor:c.Distributor.slice(0,30)," -- Provided by Simons CMAP"),font:{color:"white",size:10},xref:"paper",yref:"paper",yshift:-202,showarrow:!1}]}}))}),wn=Object(Vt.a)(function(e){return{chartWrapper:Object(T.a)({display:"inline-block",backgroundColor:an.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},"backgroundColor",an.backgroundGray),buttonBlock:{display:"block"}}})(function(e){var t=e.classes,a=e.chart,n=a.data,o=(a.subType,n.stds),i=n.variableValues,s=n.depths,l=n.parameters,c=n.metadata;return r.a.createElement("div",null,r.a.createElement("div",{className:t.buttonBlock}),r.a.createElement(vn.a,{style:{position:"relative",display:"inline-block"},data:[{x:s,y:i,error_y:{type:"data",array:o,opacity:.2,color:"gray",visible:!0},name:l.fields,type:"scatter",line:{color:"#e377c2"}}],layout:{title:"".concat(l.fields,"[").concat(c.Unit,"]  ").concat(l.depth1," to ").concat(l.depth2," meters"),paper_bgcolor:an.backgroundGray,font:{color:"#ffffff"},xaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power"},yaxis:{title:"".concat(l.fields,"[").concat(c.Unit,"]"),color:"#ffffff",exponentformat:"power"},annotations:[{text:"Source: ".concat(c.Distributor.length<30?c.Distributor:c.Distributor.slice(0,30)," -- Provided by Simons CMAP"),font:{color:"white",size:10},xref:"paper",yref:"paper",yshift:-202,showarrow:!1}]}}))}),Rn={size:"small",color:"primary",variant:"contained"},kn=Object(Vt.a)(function(e){return{chartWrapper:Object(T.a)({display:"inline-block",backgroundColor:an.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},"backgroundColor",an.backgroundGray),buttonBlock:{display:"block"}}})(function(e){var t=e.classes,a=e.chart.data,o=(a.lats,a.lons,a.dates),i=a.latsDistinct,s=a.lonsDistinct,l=Object(n.useState)(!1),c=Object(Fa.a)(l,2),u=c[0],p=c[1],d=Object(n.useState)(!1),h=Object(Fa.a)(d,2),m=h[0],f=h[1],b=Object(n.useState)(a.orientation),g=Object(Fa.a)(b,2),E=g[0],S=g[1],O="zonal"===E?i.length:s.length,y="zonal"===E?"Longitudes":"Latitudes",v="zonal"===E?"meridional":"zonal",x=function(e,t,a,n,o){var i=Array.from(t.dates),s=(Array.from(t.depths).map(function(e){return parseFloat(e)}),"zonal"===o?t.latsDistinct:t.lonsDistinct),l="zonal"===o?"Longitude":"Latitude";return e.map(function(e,c){var u=t.parameters.fields,p=i.length<2?i[0]:a?n?i[Math.floor(c/s.length)].slice(0,10):i[c]:"Merged Dates",d=s.length<=1?s[0]:n?"".concat(s[c%s.length]," ").concat("zonal"===o?"Parallel":"Meridian"):"Merged ".concat(l,"s");try{return r.a.createElement(vn.a,{style:{position:"relative",display:"inline-block"},data:[{zauto:!1,zmin:t.zMin,zmax:t.zMax,zsmooth:e.length<2e4?"best":"fast",x:"zonal"===o?t.plotLons:t.plotLats,y:"zonal"===o?t.zonalPlotDepths:t.meridionalPlotDepths,z:e,name:t.parameters.fields,type:"heatmap",colorbar:{title:{text:"[".concat(t.metadata.Unit,"]")},exponentformat:"power"}}],key:c,layout:{font:{color:"#ffffff"},title:"".concat(u,"[").concat(t.metadata.Unit,"]  ").concat(d,"   ").concat(p),xaxis:{title:"".concat(l,"[\xb0]"),color:"#ffffff",exponentformat:"power"},yaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power"},paper_bgcolor:an.backgroundGray,annotations:[{text:"Source: ".concat(t.metadata.Distributor.length<30?t.metadata.Distributor:t.metadata.Distributor.slice(0,30)," -- Provided by Simons CMAP"),font:{color:"white",size:10},xref:"paper",yref:"paper",yshift:-202,showarrow:!1}]}})}catch(h){console.log("Failed to plot subset"),console.log(e)}})}(a.generatePlotData(E,u,m),a,u,m,E);return r.a.createElement("div",null,r.a.createElement("div",{className:t.buttonBlock},r.a.createElement(Bt.a,Object.assign({},Rn,{disabled:1===o.size,onClick:function(){return p(!u)}}),u?"Merge Dates":"Split By Date"),r.a.createElement(Bt.a,Object.assign({},Rn,{disabled:1===O,onClick:function(){return f(!m)}}),m?"Merge ".concat(y):"Split By ".concat(y)),r.a.createElement(Bt.a,Object.assign({},Rn,{disabled:1===O,onClick:function(){return S(v)}}),"Switch to ",v)),x)}),Dn=function(e){function t(){return Object(Se.a)(this,t),Object(It.a)(this,Object(_t.a)(t).apply(this,arguments))}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.charts;return r.a.createElement("div",{className:t.chartsContainer},a.map(function(e,t){switch(e.data.parameters.spName){case Ie.spaceTime:return r.a.createElement(jn,{chart:e,key:t});case Ie.timeSeries:return r.a.createElement(Cn,{chart:e,key:t});case Ie.depthProfile:return r.a.createElement(wn,{chart:e,key:t});case Ie.sectionMap:return r.a.createElement(kn,{chart:e,key:t})}}))}}]),t}(n.Component),Tn=Object(l.b)(function(e,t){return{charts:e.charts}},{})(Object(Vt.a)(function(e){return{chartsContainer:{margin:"260px 0 0 100px"},chartWrapper:Object(T.a)({display:"inline-block",backgroundColor:an.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},"backgroundColor",an.backgroundGray)}})(Dn)),In=function(e){return r.a.createElement(r.a.Fragment,null,"Charts",r.a.createElement("span",{className:e.childClass},e.charts.length?"(".concat(e.charts.length,")"):""))},_n=Object(l.b)(function(e,t){return{charts:e.charts}},null)(Object(Vt.a)(function(e){return{buttonPaper:{width:"60px",height:"60px",padding:e.spacing(.5),position:"fixed",left:"10px",top:"90px",zIndex:2,textDecoration:"none",cursor:"pointer"},goBackText:{marginTop:"0px"},numberOfCharts:{color:an.orange}}})(function(e){var t=e.classes,a=e.showCharts,n=e.charts;return r.a.createElement("div",null,r.a.createElement(qt.a,{className:t.buttonPaper,onClick:e.toggleChartView},r.a.createElement("img",{src:"https://simonscmap.com/images/catalog/coverage_global.png",alt:"Globe",height:"36",width:"36"}),r.a.createElement("h6",{className:t.goBackText},a?"Globe":r.a.createElement(In,{charts:n,childClass:t.numberOfCharts}))))})),An=Object(Vt.a)(function(e){return{buttonPaper:{width:"60px",height:"60px",padding:e.spacing(.5),position:"fixed",left:"10px",top:"170px",zIndex:2,textDecoration:"none",cursor:"pointer"},goBackText:{marginTop:"0px"}}})(function(e){var t=e.classes,a=e.showUI;return r.a.createElement("div",null,r.a.createElement(qt.a,{className:t.buttonPaper,onClick:e.toggleShowUI},r.a.createElement("img",{src:"https://simonscmap.com/images/catalog/coverage_global.png",alt:"Globe",height:"36",width:"36"}),r.a.createElement("h6",{className:t.goBackText},a?"Hide UI":"Show UI")))}),Nn=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(It.a)(this,(e=Object(_t.a)(t)).call.apply(e,[this].concat(r)))).shouldComponentUpdate=function(e,t){return!1},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this,t=new this.props.esriModules.AreaMeasurement3D({view:this.props.view});return t.watch("viewModel.measurement.area.text",function(){e.props.updateDomainFromMap(t.viewModel.tool.model.viewData.positionsGeographic)}),this.props.view.ui.add(t,"bottom-right"),this.props.view.ui.add(new this.props.esriModules.Search({view:this.props.view}),"bottom-right"),null}}]),t}(r.a.Component),Pn=function(e){function t(){return Object(Se.a)(this,t),Object(It.a)(this,Object(_t.a)(t).apply(this,arguments))}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.container},r.a.createElement(Sn.a,{mapProperties:{basemap:"satellite"},viewProperties:{center:[-140,30],zoom:3}},r.a.createElement(Nn,{updateDomainFromMap:this.props.updateDomainFromMap,esriModules:Object(u.a)({},this.props.esriModules),measurementPositions:this.props.measurementPositions})))}}]),t}(n.Component),Ln=Object(l.b)(function(e,t){return{}},{})(Object(Vt.a)(function(e){return{container:{margin:"0 auto 0 auto",width:"100vw",height:"100vh"}}})(Pn)),zn=function(e){var t;return(t={},Object(T.a)(t,De.sectionMap,{sp:Ie.sectionMap,subType:De.sectionMap}),Object(T.a)(t,De.timeSeries,{sp:Ie.timeSeries,subType:De.timeSeries}),Object(T.a)(t,De.histogram,{sp:Ie.spaceTime,subType:De.histogram}),Object(T.a)(t,De.depthProfile,{sp:Ie.depthProfile,subType:De.depthProfile}),Object(T.a)(t,De.heatmap,{sp:Ie.spaceTime,subType:De.heatmap}),Object(T.a)(t,De.contourMap,{sp:Ie.spaceTime,subType:De.contourMap}),t)[e]},Un={showLoginDialog:te,queryRequestSend:function(e){return{type:y,payload:{query:e}}},retrievalRequestSend:X,storedProcedureRequestSend:function(e){return{type:v,payload:Object(u.a)({},e)}},snackbarOpen:oe},Mn=function(e){return isNaN(e)||e<0},Fn=function(e){return isNaN(e)||e>180||e<-180},Gn=function(e){return isNaN(e)||e>90||e<-90},Vn=function(e){var t=e.getUTCMonth()+1,a=e.getUTCDate();return[e.getUTCFullYear(),(t>9?"":"0")+t,(a>9?"":"0")+a].join("-")},qn=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(It.a)(this,(e=Object(_t.a)(t)).call.apply(e,[this].concat(r)))).state={filteredData:[],dateSliderPosition:3,variable:"SiO2_darwin_3day",opacity:1,pickedIndex:null,pickedLon:null,pickedLat:null,showCharts:!1,showUI:!0,spParams:{tableName:"",fields:null,depth1:"0",depth2:"3",dt1:"2012-05-05",dt2:"2012-05-12",lat1:"38",lat2:"40",lon1:"-52",lon2:"-50"}},a.handleChange=function(e){a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,Object(T.a)({},e.target.name,e.target.value))}))},a.handleStartDateChange=function(e){var t=e instanceof Date?Vn(e):e;a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{dt1:t})}))},a.handleEndDateChange=function(e){var t=e instanceof Date?Vn(e):e;a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{dt2:t})}))},a.parametersAreInvalid=function(){var e=a.state.spParams,t=e.depth1,n=e.depth2,r=e.dt1,o=e.dt2,i=e.lat1,s=e.lat2,l=e.lon1,c=e.lon2;return e.fields?Mn(t)?(a.props.snackbarOpen("Starting depth must be a positive number."),!0):Mn(n)?(a.props.snackbarOpen("Ending depth must be a positive number."),!0):Gn(i)?(a.props.snackbarOpen("Please select a starting latitude between -90 and 90."),!0):Gn(s)?(a.props.snackbarOpen("Please select an ending latitude between -90 and 90."),!0):Fn(l)?(a.props.snackbarOpen("Please select a starting longitude between -180 and 180."),!0):Fn(c)?(a.props.snackbarOpen("Please select an ending longitude between -180 and 180."),!0):isNaN(Date.parse(r))?(a.props.snackbarOpen("Please enter a valid starting date."),!0):!!isNaN(Date.parse(o))&&(a.props.snackbarOpen("Please enter a valid ending date."),!0):(a.props.snackbarOpen("Please select a variable."),!0)},a.onVisualize=function(e){if(!a.parametersAreInvalid()){var t=a.state.spParams,n=t.depth1,r=t.depth2,o=t.dt1,i=t.dt2,s=t.lat1,l=t.lat2,c=t.lon1,u=t.lon2,p=(t.fields,zn(e)),d={parameters:{depth1:n,depth2:r,dt1:o,dt2:i,lat1:s,lat2:l,lon1:c,lon2:u,fields:a.state.spParams.fields&&a.state.spParams.fields.value,tableName:a.state.spParams.fields&&a.state.spParams.tableName,spName:p.sp},subType:p.subType,metadata:a.state.spParams.fields&&a.state.spParams.fields.data};a.props.storedProcedureRequestSend(d)}},a.updateFields=function(e){console.log("UpdateFields"),e?a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{fields:e,tableName:e.data.Table_Name})})):a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{fields:e,tableName:""})}))},a.handleDateSliderChange=function(e,t){a.setState(Object(u.a)({},a.state,{dateSliderPosition:t,pickedInfo:null,filteredData:a.props.sampleData.filter(function(e){return e.time==="1994-01-".concat(a.state.dateSliderPosition>9?a.state.dateSliderPosition:"0"+a.state.dateSliderPosition,"T00:00:00.000Z")})}))},a.handleOpacitySliderChange=function(e,t){a.setState(Object(u.a)({},a.state,{opacity:t}))},a.toggleChartView=function(){a.setState(Object(u.a)({},a.state,{showCharts:!a.state.showCharts}))},a.toggleShowUI=function(){a.setState(Object(u.a)({},a.state,{showUI:!a.state.showUI}))},a.updateDomainFromMap=function(e){if(!e||!e.length)return null;var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]}),r={lat1:Math.min.apply(Math,Object(O.a)(n)).toFixed(3),lat2:Math.max.apply(Math,Object(O.a)(n)).toFixed(3),lon1:Math.min.apply(Math,Object(O.a)(t)).toFixed(3),lon2:Math.max.apply(Math,Object(O.a)(t)).toFixed(3)};a.setState(Object(u.a)({},a.state,{showUI:!0,spParams:Object(u.a)({},a.state.spParams,r)}))},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(_.a.mark(function e(){var t,a,n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.catalog||this.props.retrievalRequestSend(),t=["AreaMeasurement3D","Search","Fullscreen","EsriSceneView"],e.next=4,Object(Sn.b)(["esri/widgets/AreaMeasurement3D","esri/widgets/Search","esri/widgets/Fullscreen","esri/views/SceneView"]);case 4:a=e.sent,n=t.reduce(function(e,t,n){return e[t]=a[n],e},{}),this.setState(Object(u.a)({},this.state,{esriModules:n}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){!e.sampleData&&this.props.sampleData&&this.handleDateSliderChange(null,3)}},{key:"render",value:function(){var e=this.props.classes;return this.props.user?r.a.createElement("div",null,r.a.createElement(fn,Object.assign({handleChange:this.handleChange,handleStartDateChange:this.handleStartDateChange,handleEndDateChange:this.handleEndDateChange,showUI:this.state.showUI,onVisualize:this.onVisualize,updateFields:this.updateFields,depthIsInvalid:Mn,latIsInvalid:Gn,lonIsInvalid:Fn},this.state.spParams)),r.a.createElement(On,null),r.a.createElement(_n,{toggleChartView:this.toggleChartView,showCharts:this.state.showCharts}),r.a.createElement(An,{toggleShowUI:this.toggleShowUI,showUI:this.state.showUI}),r.a.createElement(bn,{statePieces:["maps","charts","storedProcedureRequestState","catalog"]}),r.a.createElement(En,null),this.state.esriModules&&r.a.createElement("div",{className:"".concat(this.state.showCharts?e.displayNone:"")},r.a.createElement(Ln,{updateDomainFromMap:this.updateDomainFromMap,esriModules:this.state.esriModules})),this.props.storedProcedureRequestState===d.inProgress&&r.a.createElement(ta,{customVariant:"centered",size:"36"}),r.a.createElement("div",{className:this.state.showCharts?"":e.displayNone},r.a.createElement(Tn,null))):r.a.createElement(ma,null)}}]),t}(n.Component),Bn=Object(l.b)(function(e,t){return{user:e.user,sampleData:e.sampleData,queryRequestState:e.queryRequestState,maps:e.maps,charts:e.charts,data:e.data,storedProcedureRequestState:e.storedProcedureRequestState}},Un)(Object(Vt.a)(function(e){return{displayNone:{display:"none"}}})(qn)),Qn=a(650),Kn={hideLoginDialog:ae,showLoginDialog:te,logOut:U,userLoginRequestSend:function(e,t){return{type:m,payload:{username:e,password:t}}},restoreInterfaceDefaults:re},Hn=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(It.a)(this,(e=Object(_t.a)(t)).call.apply(e,[this].concat(r)))).handleLogin=function(e){a.props.userLoginRequestSend(a.props.username,a.props.password)},a.handleClose=function(){a.props.clearState(),a.props.hideLoginDialog(),a.props.restoreInterfaceDefaults()},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(nn.a,{open:this.props.loginDialogIsOpen,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(rn.a,{id:"form-dialog-title"},"Login"),r.a.createElement(on.a,null,r.a.createElement(sn.a,null,"Please enter your username and password, or ",r.a.createElement(da.a,{onClick:this.handleClose,component:Ft.b,to:{pathname:"/register"}},"Register.")),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement($t.a,{autoFocus:!0,margin:"normal",id:"username",label:"Username",type:"text",variant:"outlined",name:"username",value:this.props.username,onChange:this.props.handleChange,InputLabelProps:{shrink:!0}}),r.a.createElement($t.a,{margin:"normal",id:"name",label:"Password",type:"password",variant:"outlined",name:"password",value:this.props.password,onChange:this.props.handleChange,InputLabelProps:{shrink:!0}}),r.a.createElement(Qn.a,null,r.a.createElement(Bt.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement("div",{className:e.wrapper},r.a.createElement(Bt.a,{color:"primary",type:"submit",onClick:this.handleLogin,disabled:!this.props.username||!this.props.password},"Log In"),this.props.userLoginState===d.inProgress&&r.a.createElement(ea.a,{size:24,className:e.buttonProgress})))),this.props.userLoginState===d.failed?r.a.createElement(sn.a,null,"Login failed. Please try again."):""))}}]),t}(n.Component),Yn=Object(l.b)(function(e,t){return{loginDialogIsOpen:e.loginDialogIsOpen,userLoginState:e.userLoginState,userLoginError:e.userLoginError}},Kn)(Object(Vt.a)(function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})(Hn)),Wn=a(657),$n={snackbarClose:function(){return{type:"SNACKBAR_CLOSE"}}},Xn=Object(l.b)(function(e,t){return{snackbarIsOpen:e.snackbarIsOpen,snackbarMessage:e.snackbarMessage}},$n)(Object(Vt.a)(function(e){return{centerText:{textAlign:"center"}}})(function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wn.a,{className:t.centerText,autoHideDuration:4e3,message:e.snackbarMessage,onClose:e.snackbarClose,open:e.snackbarIsOpen,anchorOrigin:{horizontal:"center",vertical:"top"}}))})),Jn={loginDialogWasCleared:function(){return{type:"LOGIN_DIALOG_WAS_CLEARED"}}},Zn=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(It.a)(this,(e=Object(_t.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.handleLogOut=function(){a.clearState()},a.clearState=function(){a.setState({username:"",password:""}),a.props.loginDialogWasCleared()},a.componentDidUpdate=function(e){a.props.clearLoginDialog&&a.clearState()},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yn,{clearState:this.clearState,username:this.state.username,password:this.state.password,handleChange:this.handleChange}),r.a.createElement(Xn,null))}}]),t}(n.Component),er=Object(l.b)(function(e,t){return{clearLoginDialog:e.clearLoginDialog}},Jn)(Object(Vt.a)(function(e){return{inlineBlock:{display:"inline-block"}}})(Zn)),tr=function(e){return r.a.createElement(Ft.a,null,r.a.createElement(er,null),r.a.createElement(Gt.c,null,r.a.createElement(Gt.a,{exact:!0,path:"/apikeymanagement",component:ga}),r.a.createElement(Gt.a,{exact:!0,path:"/",component:Da}),r.a.createElement(Gt.a,{exact:!0,path:"/register",component:Ma}),r.a.createElement(Gt.a,{exact:!0,path:"/visualization",component:Bn})))},ar=Object(Nt.a)({typography:{useNextVariants:!0,fontFamily:['"Lato"',"sans-serif"].join(",")},palette:{primary:{contrastText:"#000000",main:an.orange},secondary:{main:an.aqua},background:{default:Mt.a[800],paper:Mt.a[800]},text:{primary:"#ffffff",secondary:an.orange}},overrides:{MuiIconButton:{root:{color:an.orange}},MuiToolbar:{root:{backgroundColor:Mt.a[800],color:an.orange}},MuiOutlinedInput:{input:{padding:"12px 14px"},root:{"&$focused":{borderColor:an.orange}}},MuiTableCell:{root:{borderBottomColor:"rgba(0, 0, 0, 0.9)"}},MuiFormControl:{marginNormal:{marginTop:"8px"}},MuiDialogContentText:{root:{color:"white"}},MuiDialogTitle:{root:{color:an.orange}}}}),nr=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(It.a)(this,(e=Object(_t.a)(t)).call.apply(e,[this].concat(r)))).componentDidCatch=function(e,t){console.log("Error:"),console.log(e),console.log("Info"),console.log(t)},a}return Object(At.a)(t,e),Object(Oe.a)(t,[{key:"render",value:function(){return r.a.createElement(Lt.b,{utils:zt.a},r.a.createElement("div",{className:"App"},r.a.createElement(Pt.a,{theme:ar},r.a.createElement(tr,null))))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.Component);s.LicenseManager.setLicenseKey("School_of_Oceanography_Simons_CMAP_1Devs_1Deployment_19_June_2020__MTU5MjUyMTIwMDAwMA==aec33f954c06d90afed06467402921bd");var rr=document.getElementById("root");i.a.render(r.a.createElement(l.a,{store:Tt},r.a.createElement(nr,null)),rr),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[393,1,2]]]);
//# sourceMappingURL=main.e1f775af.chunk.js.map