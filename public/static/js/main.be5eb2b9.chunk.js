(this.webpackJsonpcmap_react=this.webpackJsonpcmap_react||[]).push([[0],{400:function(e,t){},436:function(e,t,a){e.exports=a(715)},441:function(e,t,a){},573:function(e,t){},575:function(e,t){},587:function(e,t,a){},709:function(e,t){},710:function(e,t){},715:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),s=a.n(o),i=(a(441),a(285));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(15),c=a(123),u=a(3),d={inProgress:"inProgress",failed:"failed",succeeded:"succeeded",expired:"expired"},p={catalogRequestState:null,loginDialogIsOpen:!1,registrationActiveStep:0,userLoginState:null,userLoginError:null,userValidationState:null,userValidationError:null,userRegistrationState:null,apiKeyRetrievalState:null,apiKeyCreationState:null},m=a(18),h=a(48),b=a(404),f=a(126),g=a.n(f),E={catalogRequestState:null,catalog:null,datasetRequestState:null,datasets:null,submissionOptions:null,loginDialogIsOpen:!1,changePasswordDialogIsOpen:!1,changeEmailDialogIsOpen:!1,registrationActiveStep:0,snackbarIsOpen:!1,snackbarMessage:null,loadingMessage:"",showHelp:!1,user:JSON.parse(g.a.get("UserInfo")||null),apiKeys:null,apiKeyRetrievalState:null,apiKeyCreationState:null,clearLoginDialog:!1,userLoginState:null,userValidationState:null,userRegistrationState:null,choosePasswordState:null,preferences:{},maps:[],charts:[],getCruiseTrajectoryRequestState:null,cruiseTrajectory:null,sampleData:null,queryRequestState:null,storedProcedureRequestState:null,getTableStatsRequestState:null,cruiseList:[],getCruiseListRequestState:null,showChartsOnce:null,chartID:0,dataSubmissions:[],submissionComments:[],submissionCommentHistoryRetrievalState:d.succeeded,submissionFile:null,submissionUploadState:null},x=Object(b.a)(E,(function(e,t){switch(t.type){case"CATALOG_RETRIEVAL_REQUEST_SUCCESS":return Object(u.a)({},e,{catalogRequestState:d.succeeded,catalog:t.payload.catalog});case"CATALOG_RETRIEVAL_REQUEST_FAILURE":return Object(u.a)({},e,{catalogRequestState:d.failed});case"CATALOG_RETRIEVAL_REQUEST_PROCESSING":return Object(u.a)({},e,{catalogRequestState:d.inProgress});case"DATASET_CATALOG_RETRIEVAL_REQUEST_SUCCESS":return Object(u.a)({},e,{datasetsRequestState:d.succeeded,datasets:t.payload.datasets});case"DATASET_CATALOG_RETRIEVAL_REQUEST_FAILURE":return Object(u.a)({},e,{datasetsRequestState:d.failed});case"DATASET_CATALOG_RETRIEVAL_REQUEST_PROCESSING":return Object(u.a)({},e,{datasetsRequestState:d.inProgress});case"STORE_SUBMISSION_OPTIONS":return Object(u.a)({},e,{submissionOptions:t.payload.options});default:return e}}),(function(e,t){switch(t.type){case"LOGIN_REQUEST_PROCESSING":return Object(u.a)({},e,{userLoginState:d.inProgress});case"LOGIN_REQUEST_SUCCESS":return Object(u.a)({},e,{userLoginState:d.succeeded,userLoginError:null});case"LOGIN_REQUEST_FAILURE":return Object(u.a)({},e,{userLoginState:d.failed});case"LOGIN_REQUEST_CLEAR_ERROR":return Object(u.a)({},e,{userLoginError:null});case"STORE_INFO":return Object(u.a)({},e,{user:Object(u.a)({},t.payload.user)});case"DESTROY_INFO":return Object(u.a)({},e,{user:null,apiKeys:null,clearLoginDialog:!0});case"LOGIN_DIALOG_WAS_CLEARED":return Object(u.a)({},e,{clearLoginDialog:!1});case"VALIDATION_REQUEST_PROCESSING":return Object(u.a)({},e,{userValidationState:d.inProgress});case"VALIDATION_REQUEST_FAILURE":return Object(u.a)({},e,{userValidationState:d.failed});case"VALIDATION_REQUEST_SUCCESS":return Object(u.a)({},e,{userValidationState:null});case"REGISTRATION_REQUEST_PROCESSING":return Object(u.a)({},e,{userRegistrationState:d.inProgress});case"REGISTRATION_REQUEST_FAILURE":return Object(u.a)({},e,{userRegistrationState:d.failed});case"REGISTRATION_REQUEST_SUCCESS":return Object(u.a)({},e,{userRegistrationState:d.succeeded});case"KEY_RETRIEVAL_REQUEST_SUCCESS":return Object(u.a)({},e,{apiKeys:t.payload.keys});case"KEY_RETRIEVAL_REQUEST_FAILURE":return Object(u.a)({},e,{apiKeyRetrievalState:d.failed});case"KEY_CREATION_REQUEST_PROCESSING":return Object(u.a)({},e,{apiKeyCreationState:d.inProgress});case"KEY_CREATION_REQUEST_FAILURE":return Object(u.a)({},e,{apiKeyCreationState:d.failed});case"KEY_CREATION_REQUEST_SUCCESS":return Object(u.a)({},e,{apiKeyCreationState:d.succeeded});case"CHOOSE_PASSWORD_REQUEST_SUCCESS":return Object(u.a)({},e,{choosePasswordState:d.succeeded});case"CHOOSE_PASSWORD_REQUEST_FAILURE":return Object(u.a)({},e,{choosePasswordState:d.failed});case"CHOOSE_PASSWORD_REQUEST_RESET":return Object(u.a)({},e,{choosePasswordState:null});default:return e}}),(function(e,t){switch(t.type){case"INTERFACE_SHOW_LOGIN_DIALOG":return Object(u.a)({},e,{loginDialogIsOpen:!0});case"INTERFACE_HIDE_LOGIN_DIALOG":return Object(u.a)({},e,{loginDialogIsOpen:!1,userLoginError:null});case"REGISTRATION_NEXT_ACTIVE_STEP":return Object(u.a)({},e,{registrationActiveStep:e.registrationActiveStep+1});case"REGISTRATION_PREVIOUS_ACTIVE_STEP":return Object(u.a)({},e,{registrationActiveStep:e.registrationActiveStep-1});case"RESTORE_INTERFACE_DEFAULTS":return Object(u.a)({},e,{},p);case"SNACKBAR_OPEN":return Object(u.a)({},e,{snackbarIsOpen:!0,snackbarMessage:t.payload.message});case"SNACKBAR_CLOSE":return Object(u.a)({},e,{snackbarIsOpen:!1});case"SET_LOADING_MESSAGE":return Object(u.a)({},e,{loadingMessage:t.payload.message});case"TOGGLE_SHOW_HELP":return Object(u.a)({},e,{showHelp:!e.showHelp});case"SHOW_CHANGE_EMAIL_DIALOG":return Object(u.a)({},e,{changeEmailDialogIsOpen:!0});case"HIDE_CHANGE_EMAIL_DIALOG":return Object(u.a)({},e,{changeEmailDialogIsOpen:!1});case"SHOW_CHANGE_PASSWORD_DIALOG":return Object(u.a)({},e,{changePasswordDialogIsOpen:!0});case"HIDE_CHANGE_PASSWORD_DIALOG":return Object(u.a)({},e,{changePasswordDialogIsOpen:!1});default:return e}}),(function(e,t){switch(t.type){case"QUERY REQUEST PROCESSING":return Object(u.a)({},e,{queryRequestState:d.inProgress});case"QUERY REQUEST FAILURE":return Object(u.a)({},e,{queryRequestState:d.failed});case"QUERY REQUEST SUCCESS":return Object(u.a)({},e,{queryRequestState:d.succeeded});case"STORED_PROCEDURE_REQUEST_PROCESSING":return Object(u.a)({},e,{storedProcedureRequestState:d.inProgress});case"STORED_PROCEDURE_REQUEST_FAILURE":return Object(u.a)({},e,{storedProcedureRequestState:d.failed});case"STORED_PROCEDURE_REQUEST_SUCCESS":return Object(u.a)({},e,{storedProcedureRequestState:d.succeeded});case"ADD_LAYER":return Object(u.a)({},e,{layers:[].concat(Object(h.a)(e.layers),[t.payload.newLayer])});case"STORE_SAMPLE_DATA":return Object(u.a)({},e,{sampleData:t.payload.sampleData});case"ADD_MAP":return Object(u.a)({},e,{maps:[].concat(Object(h.a)(e.maps),[t.payload.mapInfo])});case"ADD_CHART":return Object(u.a)({},e,{charts:[Object(u.a)({},t.payload.chartInfo,{id:e.chartID})].concat(Object(h.a)(e.charts)),chartID:e.chartID+1});case"CLEAR_CHARTS":return Object(u.a)({},e,{charts:[]});case"CLEAR_MAPS":return Object(u.a)({},e,{maps:[]});case"DELETE_CHART":return Object(u.a)({},e,{charts:[].concat(Object(h.a)(e.charts.slice(0,t.payload.chartIndex)),Object(h.a)(e.charts.slice(t.payload.chartIndex+1)))});case"CRUISE_TRAJECTORY_REQUEST_PROCESSING":return Object(u.a)({},e,{getCruiseTrajectoryRequestState:d.inProgress});case"CRUISE_TRAJECTORY_REQUEST_SUCCESS":return Object(u.a)({},e,{cruiseTrajectory:t.payload.trajectory,getCruiseTrajectoryRequestState:d.succeeded});case"CRUISE_TRAJECTORY_CLEAR":return Object(u.a)({},e,{cruiseTrajectory:null});case"CRUISE_TRAJECTORY_REQUEST_FAILURE":return Object(u.a)({},e,{getCruiseTrajectoryRequestState:d.failed});case"CRUISE_LIST_REQUEST_PROCESSING":return Object(u.a)({},e,{getCruiseListRequestState:d.inProgress});case"CRUISE_LIST_REQUEST_SUCCESS":return Object(u.a)({},e,{getCruiseListRequestState:d.succeeded,cruiseList:t.payload.cruiseList});case"TRIGGER_SHOW_CHARTS":return Object(u.a)({},e,{showChartsOnce:!0});case"COMPLETED_SHOW_CHARTS":return Object(u.a)({},e,{showChartsOnce:!1});case"TABLE_STATS_REQUEST_SUCCESS":return Object(u.a)({},e,{datasets:Object(u.a)({},e.datasets,Object(m.a)({},t.payload.datasetLongName,Object(u.a)({},e.datasets[t.payload.datasetLongName],{tableStats:t.payload.tableStats})))});default:return e}}),(function(e,t){switch(t.type){case"STORE_SUBMISSIONS":return Object(u.a)({},e,{dataSubmissions:t.payload.submissions});case"SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE":return Object(u.a)({},e,{submissionCommentHistoryRetrievalState:t.payload.state});case"STORE_SUBMISSION_COMMENTS":var a=Object(h.a)(e.submissionComments);return a[t.payload.submissionID]=t.payload.comments,Object(u.a)({},e,{submissionComments:a});case"STORE_SUBMISSION_FILE":return Object(u.a)({},e,{submissionFile:t.payload.file});case"SET_UPLOAD_STATE":return Object(u.a)({},e,{submissionUploadState:t.payload.state});default:return e}})),v=a(419),y=a(20),S=a(4),O=a.n(S),w=a(2),C=function(e){return{type:"STORE_INFO",payload:{user:e}}},k=function(e){return{type:"GOOGLE_LOGIN_REQUEST_SEND",payload:{userIDToken:e}}},A=function(){return{type:"LOG_OUT"}},_=function(){return{type:"KEY_RETRIEVAL_REQUEST_SEND"}},j=function(){return{type:"INITIALIZE_GOOGLE_AUTH"}},T=function(){return{type:"CATALOG_RETRIEVAL_REQUEST_SEND"}},N=function(e){return{type:"CATALOG_RETRIEVAL_REQUEST_SUCCESS",payload:{catalog:e}}},R=function(){return{type:"DATASET_CATALOG_RETRIEVAL_REQUEST_SEND"}},D=function(e){return{type:"DATASET_CATALOG_RETRIEVAL_REQUEST_SUCCESS",payload:{datasets:e}}},I=function(e){return{type:"STORE_SUBMISSION_OPTIONS",payload:{options:e}}},L=function(){return{type:"INTERFACE_SHOW_LOGIN_DIALOG"}},M=function(){return{type:"INTERFACE_HIDE_LOGIN_DIALOG"}},P=function(){return{type:"REGISTRATION_NEXT_ACTIVE_STEP"}},F=function(){return{type:"RESTORE_INTERFACE_DEFAULTS"}},U=function(e){return{type:"SNACKBAR_OPEN",payload:{message:e}}},z=function(e){return{type:"SET_LOADING_MESSAGE",payload:{message:e}}},B=function(){return{type:"TOGGLE_SHOW_HELP"}},V=function(){return{type:"HIDE_CHANGE_PASSWORD_DIALOG"}},G=function(){return{type:"HIDE_CHANGE_EMAIL_DIALOG"}},H=function(e){return{type:"CRUISE_TRAJECTORY_REQUEST_SEND",payload:{id:e}}},W=function(e){return{type:"CRUISE_LIST_REQUEST_SEND"}},q=function(e){return{type:"CRUISE_LIST_REQUEST_SUCCESS",payload:{cruiseList:e}}},Q=function(e,t,a){return{type:"CSV_DOWNLOAD_REQUEST_SEND",payload:{query:e,fileName:t,tableName:a}}},K=function(e,t){return{type:"DOWNLOAD_TEXT_AS_CSV",payload:{text:e,fileName:t}}},Y=function(e,t,a,n){return{type:"CSV_FROM_VIZ_REQUEST_SEND",payload:{vizObject:e,tableName:t,shortName:a,longName:n}}},$=function(e,t){return{type:"ADD_SUBMISSION_COMMENT",payload:{submissionID:e,comment:t}}},Z=function(e){return{type:"RETRIEVE_SUBMISSION_COMMENT_HISTORY",payload:{submissionID:e}}},J=function(e){return{type:"STORE_SUBMISSIONS",payload:{submissions:e}}},X=function(e){return{type:"STORE_SUBMISSION_COMMENTS",payload:e}},ee=function(){return{type:"RETRIEVE_ALL_SUBMISSIONS"}},te=function(e){return{type:"SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE",payload:{state:e}}},ae=function(e){return{type:"STORE_SUBMISSION_FILE",payload:{file:e}}},ne=function(e){return{type:"CHECK_SUBMISSION_OPTIONS_AND_STORE_FILE",payload:{file:e}}},re=function(e){return{type:"SET_UPLOAD_STATE",payload:{state:e}}},oe=function(e){return{type:"DOWNLOAD_MOST_RECENT_FILE",payload:{submissionID:e}}},se=a(44),ie=a(168),le=a.n(ie),ce="http://localhost:3000"===window.location.origin?"http://localhost:8080":window.location.origin,ue=a(19),de=a(25),pe=a(833),me=a(765),he={irregular:"Irregular",halfDegree:"1/2\xb0 X 1/2\xb0",quarterDegree:"1/4\xb0 X 1/4\xb0",twentyFifthDegree:"1/25\xb0 X 1/25\xb0",fourKm:"4km X 4km",twelfthDegree:"1/12\xb0 X 1/12\xb0",seventyKm:"70km X 70km",oneDegree:"1\xb0 X 1\xb0",nineKm:"9km X 9km",twentyFiveKm:"25km X 25km"},be=function(e){var t;return(t={},Object(m.a)(t,he.halfDegree,.5),Object(m.a)(t,he.quarterDegree,.25),Object(m.a)(t,he.twentyFifthDegree,.04),Object(m.a)(t,he.fourKm,.041672),Object(m.a)(t,he.twelfthDegree,.083333),Object(m.a)(t,he.oneDegree,1),Object(m.a)(t,he.seventyKm,.25),Object(m.a)(t,he.nineKm,.083333),Object(m.a)(t,he.twentyFiveKm,.23148),t)[e]},fe=function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)t.push(e[a][n]);return t},ge=function(e,t,a){for(var n=[],r=0;r<a;r++)n.push([]);for(var o=0;o<e.length;o++){n[Math.floor(o/t)%a].push(e[o])}return n},Ee=function(e,t,a,n){for(var r=[],o=t*(n-1),s=0;s+o<e.length;s+=a){for(var i=[],l=0;l<e[s].length;l++){for(var c=0,u=0,d=s;d<s+t*n;d+=t)isNaN(e[d][l])||(c+=e[d][l],u++);i.push(u<1?null:c/u)}r.push(i)}return r},xe=function(e,t,a,n){for(var r=[],o=t*(n-1),s=0;s+o<e.length;s+=a){for(var i=[],l=s;l<=s+o;l+=t)i=[].concat(Object(h.a)(i),Object(h.a)(e[l]));r.push(i)}return r},ve={sectionMap:"Section Map",contourSectionMap:"Contour Section Map",timeSeries:"Time Series",histogram:"Histogram",depthProfile:"Depth Profile",heatmap:"Heatmap",contourMap:"Contour Map",sparse:"Sparse"},ye={threeMinutes:"Three Minutes",sixHourly:"Six Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",annual:"Annual",irregular:"Irregular",monthlyClimatology:"Monthly Climatology",threeDay:"Three Days",eightDayRunning:"Eight Day Running",eightDays:"Eight Days "},Se=function(){function e(t){var a=this;Object(ue.a)(this,e),this.generateCsv=function(){var e,t=Array.from(a.dates),n=Array.from(a.depths);if(a.hasDepth){e=["time,lat,lon,depth,".concat(a.parameters.fields)];for(var r=0;r<a.variableValues.length;r++)e.push("".concat(t[Math.floor(r/(a.variableValues.length/t.length))],",").concat(a.lats[r],",").concat(a.lons[r]>180?a.lons[r]-360:a.lons[r],",").concat(n[Math.floor(r/(a.variableValues.length/(t.length*n.length)))%n.length],",").concat(isNaN(a.variableValues[r])?"":a.variableValues[r]))}else{e=["time,lat,lon,".concat(a.parameters.fields)];for(var o=0;o<a.variableValues.length;o++)e.push("".concat(t[Math.floor(o/(a.variableValues.length/t.length))],",").concat(a.lats[o],",").concat(a.lons[o]>180?a.lons[o]-360:a.lons[o],",").concat(isNaN(a.variableValues[o])?"":a.variableValues[o]))}return e.join("\n")},this.parameters=t.parameters,this.metadata=t.metadata,this.hasDepth=null,this.hasHours=null,this.isMonthly=null,this.depths=new Set,this.dates=new Set,this.variableValues=[],this.zMin=null,this.zMax=null,this.extent=[null,null],this.indexAdjust=null,this.payload=t,this.lats=[],this.lons=[],this.lonMin=null,this.lonMax=null,this.latMin=null,this.latMax=null,this.distinctLatCount=null,this.distinctLonCount=null}return Object(de.a)(e,[{key:"add",value:function(e){var t=parseFloat(e[1]),a=parseFloat(e[2]),n=a<this.parameters.lon1?a+360:a;null===this.hasDepth&&(this.hasHour="tblWind_NRT"===this.metadata.Table_Name,this.isMonthly=this.metadata.Temporal_Resolution===ye.monthlyClimatology,this.hasDepth=5===e.length&&!this.hasHour,this.indexAdjust=this.hasDepth||this.hasHour?1:0,this.lonMin=n,this.lonMax=n,this.latMin=t,this.latMax=t);var r,o=parseFloat(e[3+this.indexAdjust]);this.hasDepth&&this.depths.add(e[3]),this.hasHour?((r=new Date(e[0])).setUTCHours(e[3]),r=r.toISOString()):r=e[0],this.dates.add(r),this.lats.push(t),this.lons.push(n),n<this.lonMin&&(this.lonMin=n),n>this.lonMax&&(this.lonMax=n),t<this.latMin&&(this.latMin=t),t>this.latMax&&(this.latMax=t),this.variableValues.push(o)}},{key:"finalize",value:function(){0===this.depths.size&&this.depths.add("Surface"),this.lonCount=this.lons.length/this.dates.size/this.depths.size,this.latCount=this.lats.length/this.dates.size/this.depths.size;var e=Object(pe.a)(this.variableValues,.05),t=Object(pe.a)(this.variableValues,.95);this.zMin=void 0===e?null:parseFloat(e.toPrecision(4)),this.zMax=void 0===t?null:parseFloat(t.toPrecision(4)),this.extent=Object(me.a)(this.variableValues);var a=be(this.metadata.Spatial_Resolution);this.distinctLatCount=Math.round((this.latMax-this.latMin)/a)+1,this.distinctLonCount=Math.round((this.lonMax-this.lonMin)/a)+1}},{key:"generatePlotData",value:function(e,t,a){var n,r=this,o=this.distinctLonCount*this.distinctLatCount,s=o*this.depths.size;return n=(n=ge(this.variableValues,s,this.dates.size)).map((function(e){return ge(e,o,r.depths.size)})),n=fe(n),e===ve.contourMap||e===ve.heatmap?t&&a||(n=t?Ee(n,1,this.depths.size,this.depths.size):a?Ee(n,this.depths.size,1,this.dates.size):Ee(n,1,n.length,n.length)):e===ve.histogram&&(t&&a||(n=t?xe(n,1,this.depths.size,this.depths.size):a?xe(n,this.depths.size,1,this.dates.size):[this.variableValues])),n}}]),e}(),Oe={sectionMap:"uspSectionMap",timeSeries:"uspTimeSeries",spaceTime:"uspSpaceTime",depthProfile:"uspDepthProfile"},we=function(){function e(t){Object(ue.a)(this,e),this.parameters=t.parameters,this.metadata=t.metadata,this.variableValues=[],this.stds=[],this.dates=[],this.lat=null,this.lon=null,this.depth=null,this.depthIndexAdjust=null}return Object(de.a)(e,[{key:"add",value:function(e){null===this.lat&&(this.depthIndexAdjust=6===e.length?1:0,this.lat=e[1],this.lon=e[2],this.depth=6===e.length&&e[3],this.hasHour="tblWind_NRT"===this.metadata.Table_Name,this.isMonthly=this.metadata.Temporal_Resolution===ye.monthlyClimatology),this.variableValues.push(e[3+this.depthIndexAdjust]),this.stds.push(e[4+this.depthIndexAdjust]),this.dates.push(e[0])}},{key:"finalize",value:function(){!1===this.depth&&(this.depth="Surface")}},{key:"generatePlotData",value:function(){return this.variableValues}},{key:"generateCsv",value:function(){for(var e="time,".concat(this.parameters.fields,",").concat(this.parameters.fields,"_std"),t=0;t<this.variableValues.length;t++)e+="\n".concat(this.dates[t],",").concat(isNaN(this.variableValues[t])?"":this.variableValues[t],",").concat(isNaN(this.stds[t])?"":this.stds[t]);return e}}]),e}(),Ce=function(){function e(t){Object(ue.a)(this,e),this.parameters=t.parameters,this.metadata=t.metadata,this.variableValues=[],this.stds=[],this.lat=null,this.lon=null,this.depths=[]}return Object(de.a)(e,[{key:"add",value:function(e){null===this.lat&&(this.lat=parseFloat(e[0]),this.lon=parseFloat(e[1]),this.isMonthly=this.metadata.Temporal_Resolution===ye.monthlyClimatology),this.variableValues.push(parseFloat(e[2])),this.stds.push(parseFloat(e[3])),this.depths.push(parseFloat(e[4]))}},{key:"finalize",value:function(){}},{key:"generatePlotData",value:function(){return this.variableValues}},{key:"generateCsv",value:function(){for(var e="depth,".concat(this.parameters.fields,",").concat(this.parameters.fields,"_std"),t=0;t<this.variableValues.length;t++)e+="\n".concat(this.depths[t],",").concat(isNaN(this.variableValues[t])?"":this.variableValues[t],",").concat(isNaN(this.stds[t])?"":this.stds[t]);return e}}]),e}(),ke=function(){function e(t){var a=this;Object(ue.a)(this,e),this.generateCsv=function(){for(var e=Array.from(a.dates),t=Array.from(a.depths),n=Array.from(a.lons),r=Array.from(a.lats),o=t.length,s=o*n.length,i=["time,lat,lon,depth,".concat(a.parameters.fields)],l=0;l<a.variableValues.length;l++)i.push("".concat(e[Math.floor(l/(a.variableValues.length/e.length))],",").concat(r[Math.floor(l/s)%r.length],",").concat(n[Math.floor(l/o)%n.length],",").concat(t[l%t.length],",").concat(isNaN(a.variableValues[l])?"":a.variableValues[l]));return i.join("\n")},this.parameters=t.parameters,this.metadata=t.metadata,this.subType=t.subType,this.dates=new Set,this.depths=new Set,this.lats=new Set,this.lons=new Set,this.lonMin=null,this.lonMax=null,this.variableValues=[],this.zMin=null,this.zMax=null,this.extent=[null,null],this.orientation=null}return Object(de.a)(e,[{key:"add",value:function(e){var t=e[0],a=parseFloat(e[1]),n=parseFloat(e[2]),r=n<this.parameters.lon1?n+360:n,o=parseFloat(e[3]),s=parseFloat(e[4]);0===this.variableValues.length&&(this.isMonthly=this.metadata.Temporal_Resolution===ye.monthlyClimatology),this.depths.add(o),this.dates.add(t),this.lats.add(a),this.lons.add(r),this.variableValues.push(s)}},{key:"finalize",value:function(){var e=Object(pe.a)(this.variableValues,.05),t=Object(pe.a)(this.variableValues,.95);this.zMin=void 0===e?null:parseFloat(e.toPrecision(4)),this.zMax=void 0===t?null:parseFloat(t.toPrecision(4)),this.extent=Object(me.a)(this.variableValues),this.orientation=this.lons.size>this.lats.size?"zonal":"meridional";var a=Array.from(this.lons);this.lonMax=Math.max.apply(Math,Object(h.a)(a)),this.lonMin=Math.min.apply(Math,Object(h.a)(a))}},{key:"generatePlotData",value:function(e,t,a){var n,r=this.lats.size,o=this.lons.size,s=this.depths.size,i=s*o,l=i*r,c=ge(this.variableValues,l,this.dates.size);return"zonal"===e?(c=c.map((function(e){return ge(e,i,r)})),c=fe(c),n=r):(c=c.map((function(e){return ge(e,s,o)})),c=fe(c),n=o),t&&a||(c=t?Ee(c,1,n,n):a?Ee(c,n,1,this.dates.size):Ee(c,1,c.length,c.length)),c}}]),e}(),Ae=function(){function e(t){Object(ue.a)(this,e),this.parameters=t.parameters,this.metadata=t.metadata,this.hasDepth=null,this.variableIndex=t.metadata.Depth_Min?4:3,this.depths=[],this.times=[],this.variableValues=[],this.lats=[],this.lons=[],this.zMin=null,this.zMax=null,this.extent=[null,null],this.latMin=null,this.latMax=null,this.lonMin=null,this.lonMax=null}return Object(de.a)(e,[{key:"add",value:function(e){var t=parseFloat(e[1]),a=parseFloat(e[2]);null===this.hasDepth&&(this.hasDepth=Boolean(this.metadata.Depth_Min),this.latMin=t,this.latMax=t,this.lonMin=a,this.lonMax=a),e[this.variableIndex]&&(this.times.push(e[0]),this.lats.push(t),this.lons.push(a),this.hasDepth&&this.depths.push(parseFloat(e[3])),this.variableValues.push(parseFloat(e[this.variableIndex])),t<this.latMin&&(this.latMin=t),t>this.latMax&&(this.latMax=t),a<this.lonMin&&(this.lonMin=a),a>this.lonMax&&(this.lonMax=a))}},{key:"finalize",value:function(){var e=Object(pe.a)(this.variableValues,.05),t=Object(pe.a)(this.variableValues,.95);this.zMin=void 0===e?null:e.toPrecision(4),this.zMax=void 0===t?null:t.toPrecision(4),this.extent=Object(me.a)(this.variableValues);var a=Math.abs(this.latMax-this.latMin),n=Math.abs(this.lonMax-this.lonMin),r=Math.sqrt(a*a+n*n),o=4-Math.floor(r/12);this.zoom=o<0?0:o;var s=(this.lonMax+this.lonMin)/2,i=(this.latMax+this.latMin)/2;this.center={lon:s,lat:i}}},{key:"generatePlotData",value:function(e,t,a){return this.variableValues}},{key:"generateCsv",value:function(){var e;if(this.hasDepth){e=["time,lat,lon,depth,".concat(this.parameters.fields)];for(var t=0;t<this.variableValues.length;t++)e.push("".concat(this.times[t],",").concat(this.lats[t],",").concat(this.lons[t],",").concat(this.depths[t],",").concat(isNaN(this.variableValues[t])?"":this.variableValues[t]))}else{e=["time,lat,lon,".concat(this.parameters.fields)];for(var a=0;a<this.variableValues.length;a++)e.push("".concat(this.times[a],",").concat(this.lats[a],",").concat(this.lons[a],",").concat(isNaN(this.variableValues[a])?"":this.variableValues[a]))}return e.join("\n")}}]),e}(),_e=a(169),je=a.n(_e),Te={credentials:"include"},Ne=Object(u.a)({},Te,{method:"POST",headers:{"Content-Type":"application/json"}}),Re=function(e){return Object.keys(e).reduce((function(t,a,n){return"".concat(t).concat(0===n?"":"&&").concat(a,"=").concat(e[a])}),"")},De={user:{},dataRetrieval:{},catalog:{},visualization:{},dataSubmission:{}};De.user.login=function(e){return fetch(ce+"/user/signin",Object(u.a)({},Ne,{body:JSON.stringify(e)}))},De.user.logout=function(){return fetch(ce+"/user/signout",Te)},De.user.register=function(e){return fetch(ce+"/user/signup",Object(u.a)({},Ne,{body:JSON.stringify(e)}))},De.user.validate=function(e){return fetch(ce+"/user/validate",Object(u.a)({},Ne,{body:JSON.stringify(e)}))},De.user.googleLoginRequest=function(){var e=Object(se.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/user/googleauth",Object(u.a)({},Ne,{body:JSON.stringify({userIDToken:t})}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.user.contactUs=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/user/contactus",Object(u.a)({},Ne,{body:JSON.stringify(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.user.changePassword=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/user/changepassword",Object(u.a)({},Ne,{body:JSON.stringify(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.user.changeEmail=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/user/changeemail",Object(u.a)({},Ne,{body:JSON.stringify(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.catalog.retrieve=Object(se.a)(O.a.mark((function e(){var t,a,n,r,o,s,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new je.a.TextDecoder,a=[],(n=le()({columns:!0})).on("readable",(function(){for(var e;e=n.read();)a.push(e)})),e.next=6,fetch(ce+"/api/catalog",Te);case 6:if((r=e.sent).ok){e.next=9;break}return e.abrupt("return",!1);case 9:o=r.body,s=o.getReader(),i=!1;case 12:if(i){e.next=20;break}return e.next=15,s.read();case 15:(l=e.sent).done?i=!0:n.write(t.decode(l.value)),e.next=12;break;case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)}))),De.catalog.datasets=Object(se.a)(O.a.mark((function e(){var t,a,n,r,o,s,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new je.a.TextDecoder,a={},(n=le()({columns:!0})).on("readable",(function(){for(var e;e=n.read();)a[e.Dataset_Long_Name.trim()]=e})),e.next=6,fetch(ce+"/api/catalog/datasets",Te);case 6:if((r=e.sent).ok){e.next=9;break}return e.abrupt("return",!1);case 9:o=r.body,s=o.getReader(),i=!1;case 12:if(i){e.next=20;break}return e.next=15,s.read();case 15:(l=e.sent).done?i=!0:n.write(t.decode(l.value)),e.next=12;break;case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)}))),De.catalog.submissionOptions=Object(se.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/catalog/submissionoptions");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),De.user.keyRetrieval=Object(se.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/user/retrieveapikeys",Te);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),De.user.keyCreation=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/user/generateapikey?description=".concat(t.trim()),Te);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.user.updateUserInfo=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/user/updateinfo",Object(u.a)({},Ne,{body:JSON.stringify(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.user.recoverPassword=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(ce+"/api/user/forgotpassword",Object(u.a)({},Ne,{body:JSON.stringify({email:t})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.user.choosePassword=function(){var e=Object(se.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.password,n=t.token,e.next=3,fetch(ce+"/api/user/choosepassword",Object(u.a)({},Ne,{body:JSON.stringify({password:a,token:n})}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.visualization.storedProcedureRequest=function(){var e=Object(se.a)(O.a.mark((function e(t){var a,n,r,o,s,i,l,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new je.a.TextDecoder,e.t0=t.parameters.spName,e.next=e.t0===Oe.spaceTime?4:e.t0===Oe.timeSeries?6:e.t0===Oe.depthProfile?8:e.t0===Oe.sectionMap?10:12;break;case 4:return n="Sparse"===t.subType?new Ae(t):new Se(t),e.abrupt("break",13);case 6:return n=new we(t),e.abrupt("break",13);case 8:return n=new Ce(t),e.abrupt("break",13);case 10:return n=new ke(t),e.abrupt("break",13);case 12:console.log("Unknown sproc name");case 13:return e.next=15,fetch(ce+"/api/data/sp?"+Re(t.parameters),Te);case 15:if((r=e.sent).ok){e.next=18;break}return e.abrupt("return",{failed:!0,status:r.status});case 18:(o=le()({from:2})).on("readable",(function(){for(var e;e=o.read();)n.add(e)})),o.on("error",(function(e){console.log(e)})),s=r.body,i=s.getReader(),l=!1;case 24:if(l){e.next=32;break}return e.next=27,i.read();case 27:(c=e.sent).done?l=!0:o.write(a.decode(c.value)),e.next=24;break;case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.visualization.getTableStats=function(){var e=Object(se.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/dataretrieval/tablestats?table="+t,Te);case 2:if((a=e.sent).ok){e.next=5;break}return e.abrupt("return",{failed:!0,status:a.status});case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.visualization.cruiseTrajectoryRequest=function(){var e=Object(se.a)(O.a.mark((function e(t){var a,n,r,o,s,i,l,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new je.a.TextDecoder,n={lats:[],lons:[]},e.next=4,fetch(ce+"/api/data/cruisetrajectory?"+"id=".concat(t.id),Te);case 4:if((r=e.sent).ok){e.next=7;break}return e.abrupt("return",{failed:!0,status:r.status});case 7:(o=le()({from:2})).on("readable",(function(){for(var e;e=o.read();)n.lats.push(parseFloat(e[1])),n.lons.push(parseFloat(e[2]))})),s=r.body,i=s.getReader(),l=!1;case 12:if(l){e.next=20;break}return e.next=15,i.read();case 15:(c=e.sent).done?l=!0:o.write(a.decode(c.value)),e.next=12;break;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.visualization.cruiseList=Object(se.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/data/cruiselist",Te);case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)}))),De.visualization.csvDownload=function(){var e=Object(se.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,fetch(ce+"/api/data/query?query=".concat(t),Te);case 4:if(!(a=e.sent).ok){e.next=11;break}return e.next=8,a.text();case 8:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",{failed:!0,status:a.status});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.retrieveSubmissionByUser=Object(se.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/datasubmission/submissionsbyuser",Te);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),De.dataSubmission.retrieveAllSubmissions=Object(se.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/datasubmission/submissions",Te);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),De.dataSubmission.addSubmissionComment=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/datasubmission/addcomment",Object(u.a)({},Ne,{body:JSON.stringify(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.beginUploadSession=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/datasubmission/beginuploadsession",{method:"POST",credentials:"include",body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.uploadPart=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/datasubmission/uploadfilepart",{method:"POST",credentials:"include",body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.commitUpload=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/datasubmission/commitupload",{method:"POST",credentials:"include",body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.setPhase=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce+"/api/datasubmission/setphase",Object(u.a)({},Ne,{body:JSON.stringify(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.retrieveCommentHistory=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ce,"/api/datasubmission/commenthistory?submissionID=").concat(t.submissionID),Te);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.retrieveMostRecentFile=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ce,"/api/datasubmission/retrievemostrecentfile?submissionID=").concat(t),Te);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De.dataSubmission.getFileFromLink=function(){var e=Object(se.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ie=De,Le=O.a.mark(Jt),Me=O.a.mark(Xt),Pe=O.a.mark(ea),Fe=O.a.mark(ta),Ue=O.a.mark(aa),ze=O.a.mark(na),Be=O.a.mark(ra),Ve=O.a.mark(oa),Ge=O.a.mark(sa),He=O.a.mark(ia),We=O.a.mark(la),qe=O.a.mark(ca),Qe=O.a.mark(ua),Ke=O.a.mark(da),Ye=O.a.mark(pa),$e=O.a.mark(ma),Ze=O.a.mark(ha),Je=O.a.mark(ba),Xe=O.a.mark(fa),et=O.a.mark(ga),tt=O.a.mark(Ea),at=O.a.mark(xa),nt=O.a.mark(va),rt=O.a.mark(ya),ot=O.a.mark(Sa),st=O.a.mark(Oa),it=O.a.mark(wa),lt=O.a.mark(Ca),ct=O.a.mark(ka),ut=O.a.mark(Aa),dt=O.a.mark(_a),pt=O.a.mark(ja),mt=O.a.mark(Ta),ht=O.a.mark(Na),bt=O.a.mark(Ra),ft=O.a.mark(Da),gt=O.a.mark(Ia),Et=O.a.mark(La),xt=O.a.mark(Ma),vt=O.a.mark(Pa),yt=O.a.mark(Fa),St=O.a.mark(Ua),Ot=O.a.mark(za),wt=O.a.mark(Ba),Ct=O.a.mark(Va),kt=O.a.mark(Ga),At=O.a.mark(Ha),_t=O.a.mark(Wa),jt=O.a.mark(qa),Tt=O.a.mark(Qa),Nt=O.a.mark(Ka),Rt=O.a.mark(Ya),Dt=O.a.mark($a),It=O.a.mark(Za),Lt=O.a.mark(Ja),Mt=O.a.mark(Xa),Pt=O.a.mark(en),Ft=O.a.mark(tn),Ut=O.a.mark(an),zt=O.a.mark(nn),Bt=O.a.mark(rn),Vt=O.a.mark(on),Gt=O.a.mark(sn),Ht=O.a.mark(ln),Wt=O.a.mark(cn),qt=O.a.mark(un),Qt=O.a.mark(dn),Kt=O.a.mark(pn),Yt=O.a.mark(mn),$t=O.a.mark(hn),Zt=O.a.mark(bn);function Jt(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"LOGIN_REQUEST_PROCESSING"});case 2:return a.next=4,Object(w.b)(Ie.user.login,e.payload);case 4:if(!a.sent.ok){a.next=18;break}return a.next=8,Object(w.d)({type:"INTERFACE_HIDE_LOGIN_DIALOG"});case 8:return t=JSON.parse(g.a.get("UserInfo")),a.next=11,Object(w.d)({type:"LOGIN_REQUEST_SUCCESS"});case 11:return a.next=13,Object(w.d)(C(t));case 13:return a.next=15,Object(w.d)(U("Login was successful!"));case 15:"/login"===window.location.pathname&&(window.location.href="/catalog"),a.next=22;break;case 18:return a.next=20,Object(w.d)({type:"LOGIN_REQUEST_FAILURE"});case 20:return a.next=22,Object(w.d)(U("Login failed."));case 22:case"end":return a.stop()}}),Le)}function Xt(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.gapi.auth2.getAuthInstance();case 2:return e=t.sent,t.next=5,e.signOut();case 5:return t.next=7,Object(w.b)(Ie.user.logout);case 7:return t.next=9,Object(w.d)({type:"DESTROY_INFO"});case 9:return t.next=11,window.location.href="/";case 11:case"end":return t.stop()}}),Me)}function ea(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.d)({type:"REGISTRATION_REQUEST_PROCESSING"});case 2:return t.next=4,Object(w.b)(Ie.user.register,e.payload);case 4:if(!t.sent.ok){t.next=10;break}return t.next=8,Object(w.d)({type:"REGISTRATION_NEXT_ACTIVE_STEP"});case 8:t.next=14;break;case 10:return t.next=12,Object(w.d)({type:"REGISTRATION_REQUEST_FAILURE"});case 12:return t.next=14,Object(w.d)(U("Registration failed. Please try again later."));case 14:case"end":return t.stop()}}),Pe)}function ta(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"VALIDATION_REQUEST_PROCESSING"});case 2:return a.next=4,Object(w.b)(Ie.user.validate,e.payload);case 4:return t=a.sent,a.next=7,t.json();case 7:if(!a.sent){a.next=15;break}return a.next=11,Object(w.d)({type:"VALIDATION_REQUEST_SUCCESS"});case 11:return a.next=13,Object(w.d)({type:"REGISTRATION_NEXT_ACTIVE_STEP"});case 13:a.next=17;break;case 15:return a.next=17,Object(w.d)({type:"VALIDATION_REQUEST_FAILURE"});case 17:case"end":return a.stop()}}),Fe)}function aa(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"GOOGLE_LOGIN_REQUEST_SEND_PROCESSING"});case 2:return a.next=4,Object(w.b)(Ie.user.googleLoginRequest,e.payload.userIDToken);case 4:if(!a.sent.ok){a.next=16;break}return a.next=8,Object(w.d)({type:"INTERFACE_HIDE_LOGIN_DIALOG"});case 8:return t=JSON.parse(g.a.get("UserInfo")),a.next=11,Object(w.d)({type:"LOGIN_REQUEST_SUCCESS"});case 11:return a.next=13,Object(w.d)(C(t));case 13:"/login"===window.location.pathname&&(window.location.href="/catalog"),a.next=20;break;case 16:return a.next=18,Object(w.d)({type:"LOGIN_REQUEST_FAILURE"});case 18:return a.next=20,Object(w.d)(U("Login failed."));case 20:case"end":return a.stop()}}),Ue)}function na(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.d)(z("Fetching Data"));case 2:return t.next=4,Object(w.b)(Ie.catalog.retrieve);case 4:if(e=t.sent){t.next=10;break}return t.next=8,Object(w.d)({type:"CATALOG_RETRIEVAL_REQUEST_FAILURE"});case 8:t.next=12;break;case 10:return t.next=12,Object(w.d)(N(e));case 12:return t.next=14,Object(w.d)(z(""));case 14:case"end":return t.stop()}}),ze)}function ra(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.d)({type:"DATASET_CATALOG_RETRIEVAL_REQUEST_PROCESSING"});case 2:return t.next=4,Object(w.b)(Ie.catalog.datasets);case 4:if(e=t.sent){t.next=10;break}return t.next=8,Object(w.d)({type:"CATALOG_RETRIEVAL_REQUEST_FAILURE"});case 8:t.next=12;break;case 10:return t.next=12,Object(w.d)(D(e));case 12:case"end":return t.stop()}}),Be)}function oa(e){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.b)(Ie.user.keyRetrieval);case 2:if(401!==(t=e.sent).status){e.next=6;break}return e.next=6,Object(w.d)({type:"REFRESH_LOGIN"});case 6:if(t.ok){e.next=13;break}return e.next=9,Object(w.d)({type:"KEY_RETRIEVAL_REQUEST_FAILURE"});case 9:return e.next=11,Object(w.d)(U("API Key Retrieval Failed"));case 11:e.next=18;break;case 13:return e.next=15,t.json();case 15:return a=e.sent,e.next=18,Object(w.d)({type:"KEY_RETRIEVAL_REQUEST_SUCCESS",payload:{keys:a.keys}});case 18:case"end":return e.stop()}}),Ve)}function sa(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"KEY_CREATION_REQUEST_PROCESSING"});case 2:return a.next=4,Object(w.b)(Ie.user.keyCreation,e.payload.description);case 4:if(401!==(t=a.sent).status){a.next=9;break}return a.next=8,Object(w.d)({type:"REFRESH_LOGIN"});case 8:return a.abrupt("return");case 9:if(t.ok){a.next=14;break}return a.next=12,Object(w.d)(U("We were unable to create a new API key."));case 12:a.next=20;break;case 14:return a.next=16,Object(w.d)(U("A new API key was created"));case 16:return a.next=18,Object(w.d)({type:"KEY_CREATION_REQUEST_SUCCESS"});case 18:return a.next=20,Object(w.d)({type:"KEY_RETRIEVAL_REQUEST_SEND"});case 20:case"end":return a.stop()}}),Ge)}function ia(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"QUERY REQUEST PROCESSING"});case 2:return a.next=4,Object(w.b)(Ie.visualization.queryRequest,e.payload.query);case 4:return t=a.sent,a.next=7,Object(w.d)({type:"STORE_SAMPLE_DATA",payload:{sampleData:t}});case 7:return a.next=9,Object(w.d)({type:"QUERY REQUEST SUCCESS",payload:{data:void 0}});case 9:case"end":return a.stop()}}),He)}function la(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"STORED_PROCEDURE_REQUEST_PROCESSING"});case 2:return a.next=4,Object(w.d)(z("Fetching Data"));case 4:return a.next=6,Object(w.b)(Ie.visualization.storedProcedureRequest,e.payload);case 6:return t=a.sent,a.next=9,Object(w.c)(50);case 9:return a.next=11,Object(w.d)(z("Processing Data"));case 11:return a.next=13,Object(w.c)(70);case 13:if(!t.failed){a.next=27;break}return a.next=16,Object(w.d)(z(""));case 16:return a.next=18,Object(w.d)({type:"STORED_PROCEDURE_REQUEST_FAILURE"});case 18:if(401!==t.status){a.next=23;break}return a.next=21,Object(w.d)({type:"REFRESH_LOGIN"});case 21:a.next=25;break;case 23:return a.next=25,Object(w.d)(U("An error occurred. Please try again."));case 25:a.next=44;break;case 27:if(!(t.variableValues.length>0)){a.next=40;break}return t.finalize(),a.next=31,Object(w.d)(z(""));case 31:return a.next=33,Object(w.d)({type:"STORED_PROCEDURE_REQUEST_SUCCESS",payload:{data:void 0}});case 33:return a.next=35,Object(w.d)({type:"TRIGGER_SHOW_CHARTS"});case 35:return a.next=37,Object(w.d)({type:"ADD_CHART",payload:{chartInfo:{subType:e.payload.subType,data:t}}});case 37:window.scrollTo(0,0),a.next=44;break;case 40:return a.next=42,Object(w.d)(z(""));case 42:return a.next=44,Object(w.d)(U("No data found for ".concat(e.payload.parameters.fields," in the requested ranges. Try selecting a different date or depth range.")));case 44:case"end":return a.stop()}}),We)}function ca(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"CRUISE_TRAJECTORY_REQUEST_PROCESSING"});case 2:return a.next=4,Object(w.d)(z("Fetching Cruise Data"));case 4:return a.next=6,Object(w.b)(Ie.visualization.cruiseTrajectoryRequest,e.payload);case 6:return t=a.sent,a.next=9,Object(w.d)(z(""));case 9:if(!t.failed){a.next=19;break}if(401!==t.status){a.next=15;break}return a.next=13,Object(w.d)({type:"REFRESH_LOGIN"});case 13:a.next=17;break;case 15:return a.next=17,Object(w.d)(U("Unable to Fetch Cruise Data"));case 17:a.next=23;break;case 19:return a.next=21,Object(w.d)({type:"CRUISE_TRAJECTORY_REQUEST_SUCCESS",payload:{trajectory:t}});case 21:return a.next=23,Object(w.d)(z(""));case 23:case"end":return a.stop()}}),qe)}function ua(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.d)({type:"CRUISE_LIST_REQUEST_PROCESSING"});case 2:return t.next=4,Object(w.b)(Ie.visualization.cruiseList);case 4:if(e=t.sent){t.next=10;break}return t.next=8,Object(w.d)({type:"CRUISE_LIST_REQUEST_FAILURE"});case 8:t.next=12;break;case 10:return t.next=12,Object(w.d)(q(e));case 12:case"end":return t.stop()}}),Qe)}function da(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)({type:"TABLE_STATS_REQUEST_PROCESSING"});case 2:return a.next=4,Object(w.d)(z("Fetching Dataset Information"));case 4:return a.next=6,Object(w.b)(Ie.visualization.getTableStats,e.payload.tableName);case 6:return t=a.sent,a.next=9,Object(w.d)(z(""));case 9:if(!t.failed){a.next=19;break}if(401!==t.status){a.next=15;break}return a.next=13,Object(w.d)({type:"REFRESH_LOGIN"});case 13:a.next=17;break;case 15:return a.next=17,Object(w.d)(U("Unable to Fetch Dataset Information"));case 17:a.next=21;break;case 19:return a.next=21,Object(w.d)((n=t,r=e.payload.datasetLongName,{type:"TABLE_STATS_REQUEST_SUCCESS",payload:{tableStats:n,datasetLongName:r}}));case 21:case"end":return a.stop()}var n,r}),Ke)}function pa(e){var t,a,n,r,o;return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(w.d)({type:"CSV_DOWNLOAD_REQUEST_PROCESSING"});case 2:return s.next=4,Object(w.d)(z("Fetching Data"));case 4:return t="exec uspDatasetMetadata '".concat(e.payload.tableName,"'"),s.next=7,Object(w.a)([Object(w.b)(Ie.visualization.csvDownload,e.payload.query),Object(w.b)(Ie.visualization.csvDownload,t)]);case 7:return a=s.sent,n=Object(y.a)(a,2),r=n[0],o=n[1],s.next=13,Object(w.d)(z(""));case 13:if(!r.failed&&!o.failed){s.next=23;break}if(401!==r.status&&401!==o.status){s.next=19;break}return s.next=17,Object(w.d)({type:"REFRESH_LOGIN"});case 17:s.next=21;break;case 19:return s.next=21,Object(w.d)(U("An error occurred. Please try again."));case 21:s.next=32;break;case 23:if(!(r.length>1)){s.next=30;break}return s.next=26,Object(w.d)(K(r,e.payload.fileName));case 26:return s.next=28,Object(w.d)(K(o,e.payload.fileName+"_METADATA"));case 28:s.next=32;break;case 30:return s.next=32,Object(w.d)(U("No data found. Please expand query range."));case 32:case"end":return s.stop()}}),Ye)}function ma(e){var t,a,n;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(w.d)(z("Processing Data"));case 2:return r.next=4,e.payload.vizObject.generateCsv();case 4:return t=r.sent,r.next=7,Object(w.d)(z("Fetching metadata"));case 7:return a="exec uspVariableMetadata '".concat(e.payload.tableName,"', '").concat(e.payload.shortName,"'"),r.next=10,Object(w.b)(Ie.visualization.csvDownload,a);case 10:return n=r.sent,r.next=13,Object(w.d)(z(""));case 13:if(!n.failed){r.next=16;break}return r.next=16,Object(w.d)(U("Failed to download variable metadata"));case 16:return r.next=18,Object(w.d)(K(t,e.payload.longName));case 18:return r.next=20,Object(w.d)(K(n,e.payload.longName+"_Metadata"));case 20:case"end":return r.stop()}}),$e)}function ha(e){var t,a,n,r;return O.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(w.d)(z("Processing Data"));case 2:return t=e.payload.text,a=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(a),(r=document.createElement("a")).setAttribute("hidden",""),r.setAttribute("href",n),r.setAttribute("download","".concat(e.payload.fileName,".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r),o.next=14,Object(w.d)(z(""));case 14:case"end":return o.stop()}}),Ze)}function ba(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.b)(Ie.user.logout);case 2:return e.next=4,Object(w.d)({type:"DESTROY_INFO"});case 4:return e.next=6,Object(w.d)({type:"INTERFACE_SHOW_LOGIN_DIALOG"});case 6:return e.next=8,Object(w.d)(U("Your session has expired. Please log in again."));case 8:case"end":return e.stop()}}),Je)}function fa(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)(z("Updating your information"));case 2:return a.next=4,Object(w.b)(Ie.user.updateUserInfo,e.payload);case 4:if(!(t=a.sent).failed){a.next=17;break}return a.next=8,Object(w.d)(z(""));case 8:if(401!==t.status){a.next=13;break}return a.next=11,Object(w.d)({type:"REFRESH_LOGIN"});case 11:a.next=15;break;case 13:return a.next=15,Object(w.d)(U("An error occurred. Please try again."));case 15:a.next=21;break;case 17:return a.next=19,Object(w.d)(C(JSON.parse(g.a.get("UserInfo"))));case 19:return a.next=21,Object(w.d)(U("Your information was updated"));case 21:return a.next=23,Object(w.d)(z(""));case 23:case"end":return a.stop()}}),Xe)}function ga(){var e,t,a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.gapi.auth2.getAuthInstance();case 3:e=n.sent,n.next=13;break;case 6:return n.prev=6,n.t0=n.catch(0),n.next=10,Object(w.c)(100);case 10:return n.next=12,Object(w.d)({type:"INITIALIZE_GOOGLE_AUTH"});case 12:return n.abrupt("return");case 13:return n.next=15,e.currentUser.get();case 15:return t=n.sent,n.next=18,t.getAuthResponse(!0);case 18:if(!(a=n.sent)){n.next=22;break}return n.next=22,Object(w.d)(k(a.id_token));case 22:case"end":return n.stop()}}),et,null,[[0,6]])}function Ea(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.b)(Ie.user.recoverPassword,e.payload.email);case 2:case"end":return t.stop()}}),tt)}function xa(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)(z("Confirming change"));case 2:return a.next=4,Object(w.b)(Ie.user.choosePassword,e.payload);case 4:return t=a.sent,a.next=7,Object(w.d)(z(""));case 7:if(!t.ok){a.next=12;break}return a.next=10,Object(w.d)({type:"CHOOSE_PASSWORD_REQUEST_SUCCESS"});case 10:a.next=14;break;case 12:return a.next=14,Object(w.d)({type:"CHOOSE_PASSWORD_REQUEST_FAILURE"});case 14:case"end":return a.stop()}}),at)}function va(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)(z("Sending"));case 2:return a.next=4,Object(w.b)(Ie.user.contactUs,e.payload);case 4:return t=a.sent,a.next=7,Object(w.d)(z(""));case 7:if(!t.ok){a.next=12;break}return a.next=10,Object(w.d)(U("Your message was successfully sent!"));case 10:a.next=14;break;case 12:return a.next=14,Object(w.d)(U("Message failed. Please try again or contact simonscmap@uw.edu"));case 14:case"end":return a.stop()}}),nt)}function ya(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)(z("Confirming Changes"));case 2:return a.next=4,Object(w.b)(Ie.user.changePassword,e.payload);case 4:return t=a.sent,a.next=7,Object(w.d)(z(""));case 7:if(!t.ok){a.next=14;break}return a.next=10,Object(w.d)({type:"HIDE_CHANGE_PASSWORD_DIALOG"});case 10:return a.next=12,Object(w.d)(U("Your password has been updated."));case 12:a.next=21;break;case 14:if(401!==t.status){a.next=19;break}return a.next=17,Object(w.d)(U("The current password you entered is not correct."));case 17:a.next=21;break;case 19:return a.next=21,Object(w.d)(U("An error occurred with your request."));case 21:case"end":return a.stop()}}),rt)}function Sa(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)(z("Confirming Changes"));case 2:return a.next=4,Object(w.b)(Ie.user.changeEmail,e.payload);case 4:if(!(t=a.sent).ok){a.next=14;break}return a.next=8,Object(w.d)(C(JSON.parse(g.a.get("UserInfo"))));case 8:return a.next=10,Object(w.d)({type:"HIDE_CHANGE_EMAIL_DIALOG"});case 10:return a.next=12,Object(w.d)(U("Your email address has been updated."));case 12:a.next=26;break;case 14:if(401!==t.status){a.next=19;break}return a.next=17,Object(w.d)(U("The current password you entered is not correct."));case 17:a.next=26;break;case 19:if(409!==t.status){a.next=24;break}return a.next=22,Object(w.d)(U("That email address is already in use."));case 22:a.next=26;break;case 24:return a.next=26,Object(w.d)(U("We were not able to update your email address."));case 26:return a.next=28,Object(w.d)(z(""));case 28:case"end":return a.stop()}}),ot)}function Oa(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=document.createElement("textarea")).value=e.payload.text,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove(),a.next=8,Object(w.d)(U("Copied to Clipboard"));case 8:case"end":return a.stop()}}),st)}function wa(){var e,t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.d)(z("Fetching submission information"));case 2:return a.next=4,Object(w.b)(Ie.dataSubmission.retrieveSubmissionByUser);case 4:if(!(e=a.sent).ok){a.next=13;break}return a.next=8,e.json();case 8:return t=a.sent,a.next=11,Object(w.d)(J(t));case 11:a.next=20;break;case 13:if(401!==e.status){a.next=18;break}return a.next=16,Object(w.d)({type:"REFRESH_LOGIN"});case 16:a.next=20;break;case 18:return a.next=20,Object(w.d)(U("Unable to retrieve submissions"));case 20:return a.next=22,Object(w.d)(z(""));case 22:case"end":return a.stop()}}),it)}function Ca(){var e,t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.b)(Ie.dataSubmission.retrieveAllSubmissions);case 2:if(!(e=a.sent).ok){a.next=16;break}return a.next=6,e.json();case 6:if(!((t=a.sent).length<1)){a.next=12;break}return a.next=10,Object(w.d)(U("No submissions found"));case 10:a.next=14;break;case 12:return a.next=14,Object(w.d)(J(t));case 14:a.next=23;break;case 16:if(401!==e.status){a.next=21;break}return a.next=19,Object(w.d)({type:"REFRESH_LOGIN"});case 19:a.next=23;break;case 21:return a.next=23,Object(w.d)(U("Unable to retrieve submissions"));case 23:case"end":return a.stop()}}),lt)}function ka(e){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(w.b)(Ie.dataSubmission.addSubmissionComment,e.payload);case 2:if(!(t=a.sent).ok){a.next=8;break}return a.next=6,Object(w.d)(Z(e.payload.submissionID));case 6:a.next=15;break;case 8:if(401!==t.status){a.next=13;break}return a.next=11,Object(w.d)({type:"REFRESH_LOGIN"});case 11:a.next=15;break;case 13:return a.next=15,Object(w.d)(U("Failed to submit comment. Please try again."));case 15:case"end":return a.stop()}}),ct)}function Aa(e){var t,a,n;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(w.d)(te(d.inProgress));case 2:return r.next=4,Object(w.b)(Ie.dataSubmission.retrieveCommentHistory,e.payload);case 4:if(!(t=r.sent).ok){r.next=17;break}return r.next=8,t.json();case 8:if(!((a=r.sent).length<1)){r.next=12;break}r.next=15;break;case 12:return n={comments:a,submissionID:e.payload.submissionID},r.next=15,Object(w.d)(X(n));case 15:r.next=24;break;case 17:if(401!==t.status){r.next=22;break}return r.next=20,Object(w.d)({type:"REFRESH_LOGIN"});case 20:r.next=24;break;case 22:return r.next=24,Object(w.d)(U("Failed to retrieve comment history."));case 24:return r.next=26,Object(w.d)(te(d.succeeded));case 26:case"end":return r.stop()}}),ut)}function _a(e){var t,a,n,r,o,s,i,l,c,u,p,m,h,b,f,g;return O.a.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Object(w.d)(z("Uploading Workbook"));case 2:if(t=e.payload,a=t.file,n=t.datasetName,r=a.size,o=5242880,s=0,i=0,!(r<=0)){E.next=11;break}return E.next=10,Object(w.d)(U("The selected file is empty"));case 10:return E.abrupt("return");case 11:(c=new FormData).append("datasetName",n);case 13:if(!(i<3)||l){E.next=40;break}return E.next=16,Object(w.b)(Ie.dataSubmission.beginUploadSession,c);case 16:if(!(u=E.sent).ok){E.next=24;break}return E.next=20,u.json();case 20:p=E.sent,l=p.sessionID,E.next=38;break;case 24:return E.next=26,u.text();case 26:if("wrongUser"!==E.sent){E.next=35;break}return E.next=30,Object(w.d)(re(d.failed));case 30:return E.next=32,Object(w.d)(z(""));case 32:return E.abrupt("return");case 35:return i++,E.next=38,Object(w.c)(2e3);case 38:E.next=13;break;case 40:if(l){E.next=44;break}return E.next=43,Object(w.d)(U("Failed to begin upload session"));case 43:return E.abrupt("return");case 44:i=0,m=!1;case 46:if(!(s<r)){E.next=75;break}m=!1;case 48:if(!(!1===m&&i<3)){E.next=66;break}return h=a.slice(s,s+o),(b=new FormData).append("part",h),b.append("offset",s),b.append("sessionID",l),E.next=56,Object(w.b)(Ie.dataSubmission.uploadPart,b);case 56:if(!E.sent.ok){E.next=61;break}m=!0,E.next=64;break;case 61:return i++,E.next=64,Object(w.c)(2e3);case 64:E.next=48;break;case 66:if(!1!==m){E.next=72;break}return E.next=69,Object(w.d)(U("Upload failed"));case 69:return E.abrupt("return");case 72:s+=o;case 73:E.next=46;break;case 75:i=0,(f=new FormData).append("fileName",n),f.append("offset",r),f.append("sessionID",l),g=!1;case 81:if(!(i<4&&!1===g)){E.next=94;break}return E.next=84,Object(w.b)(Ie.dataSubmission.commitUpload,f);case 84:if(!E.sent.ok){E.next=89;break}g=!0,E.next=92;break;case 89:return i++,E.next=92,Object(w.c)(2e3);case 92:E.next=81;break;case 94:if(!0!==g){E.next=101;break}return E.next=97,Object(w.d)(z(""));case 97:return E.next=99,Object(w.d)(re(d.succeeded));case 99:E.next=106;break;case 101:return E.next=103,Object(w.d)(z(""));case 103:return E.next=105,Object(w.d)(U("Failed to upload"));case 105:return E.abrupt("return");case 106:case"end":return E.stop()}}),dt)}function ja(e){var t,a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={phaseID:e.payload.phaseID,submissionID:e.payload.submissionID},n.next=3,Object(w.b)(Ie.dataSubmission.setPhase,t);case 3:if(!(a=n.sent).ok){n.next=9;break}return n.next=7,Object(w.d)({type:"RETRIEVE_ALL_SUBMISSIONS"});case 7:n.next=16;break;case 9:if(401!==a.status){n.next=14;break}return n.next=12,Object(w.d)({type:"REFRESH_LOGIN"});case 12:n.next=16;break;case 14:return n.next=16,Object(w.d)(U("Failed to retrieve submissions"));case 16:case"end":return n.stop()}}),pt)}function Ta(e){var t,a,n,r,o,s,i;return O.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload.submissionID,l.next=3,Object(w.d)(z("Fetching the latest submission"));case 3:return l.next=5,Object(w.b)(Ie.dataSubmission.retrieveMostRecentFile,t);case 5:if(!(a=l.sent).ok){l.next=22;break}return l.next=9,a.json();case 9:return n=l.sent,r=n.link,o=n.dataset,l.next=13,Object(w.b)(Ie.dataSubmission.getFileFromLink,r);case 13:return s=l.sent,l.next=16,s.blob();case 16:return(i=l.sent).name="".concat(o,".xlsx"),l.next=20,Object(w.d)(ne(i));case 20:l.next=33;break;case 22:if(401!==a.status){l.next=29;break}return l.next=25,Object(w.d)(z(""));case 25:return l.next=27,Object(w.d)({type:"REFRESH_LOGIN"});case 27:l.next=33;break;case 29:return l.next=31,Object(w.d)(z(""));case 31:return l.next=33,Object(w.d)(U("Failed to retrieve submissions"));case 33:case"end":return l.stop()}}),mt)}function Na(e){var t,a,n;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(w.e)((function(e){return e.submissionOptions}));case 2:if(!(t=r.sent)){r.next=7;break}a=t,r.next=19;break;case 7:return r.next=9,Object(w.b)(Ie.catalog.submissionOptions);case 9:if((n=r.sent).ok){r.next=14;break}return r.abrupt("return",Object(w.d)(U("Unable to retrieve validation options")));case 14:return r.next=16,n.json();case 16:return a=r.sent,r.next=19,Object(w.d)(I(a));case 19:return r.next=21,Object(w.d)(ae(e.payload.file));case 21:case"end":return r.stop()}}),ht)}function Ra(e){var t,a,n,r,o,s,i,l,c;return O.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload.submissionID,u.next=3,Object(w.d)(z("Downloading the latest submission"));case 3:return u.next=5,Object(w.b)(Ie.dataSubmission.retrieveMostRecentFile,t);case 5:if(!(a=u.sent).ok){u.next=29;break}return u.next=9,a.json();case 9:return n=u.sent,r=n.link,o=n.dataset,u.next=13,Object(w.b)(Ie.dataSubmission.getFileFromLink,r);case 13:return s=u.sent,u.next=16,s.blob();case 16:return i=u.sent,l=window.URL.createObjectURL(i),(c=document.createElement("a")).setAttribute("hidden",""),c.setAttribute("href",l),c.setAttribute("download","".concat(o,".xlsx")),document.body.appendChild(c),c.click(),document.body.removeChild(c),u.next=27,Object(w.d)(z(""));case 27:u.next=40;break;case 29:if(401!==a.status){u.next=36;break}return u.next=32,Object(w.d)(z(""));case 32:return u.next=34,Object(w.d)({type:"REFRESH_LOGIN"});case 34:u.next=40;break;case 36:return u.next=38,Object(w.d)(z(""));case 38:return u.next=40,Object(w.d)(U("Unable to download"));case 40:case"end":return u.stop()}}),bt)}function Da(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("LOGIN_REQUEST_SEND",Jt);case 2:case"end":return e.stop()}}),ft)}function Ia(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("REGISTRATION_REQUEST_SEND",ea);case 2:case"end":return e.stop()}}),gt)}function La(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("VALIDATION_REQUEST_SEND",ta);case 2:case"end":return e.stop()}}),Et)}function Ma(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("LOG_OUT",Xt);case 2:case"end":return e.stop()}}),xt)}function Pa(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("GOOGLE_LOGIN_REQUEST_SEND",aa);case 2:case"end":return e.stop()}}),vt)}function Fa(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CATALOG_RETRIEVAL_REQUEST_SEND",na);case 2:case"end":return e.stop()}}),yt)}function Ua(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("DATASET_CATALOG_RETRIEVAL_REQUEST_SEND",ra);case 2:case"end":return e.stop()}}),St)}function za(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("KEY_RETRIEVAL_REQUEST_SEND",oa);case 2:case"end":return e.stop()}}),Ot)}function Ba(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("KEY_CREATION_REQUEST_SEND",sa);case 2:case"end":return e.stop()}}),wt)}function Va(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("QUERY REQUEST SEND",ia);case 2:case"end":return e.stop()}}),Ct)}function Ga(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("STORED_PROCEDURE_REQUEST_SEND",la);case 2:case"end":return e.stop()}}),kt)}function Ha(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CRUISE_TRAJECTORY_REQUEST_SEND",ca);case 2:case"end":return e.stop()}}),At)}function Wa(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CRUISE_LIST_REQUEST_SEND",ua);case 2:case"end":return e.stop()}}),_t)}function qa(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("ABLE_STATS_REQUEST_SEND",da);case 2:case"end":return e.stop()}}),jt)}function Qa(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CSV_DOWNLOAD_REQUEST_SEND",pa);case 2:case"end":return e.stop()}}),Tt)}function Ka(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("DOWNLOAD_TEXT_AS_CSV",ha);case 2:case"end":return e.stop()}}),Nt)}function Ya(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("REFRESH_LOGIN",ba);case 2:case"end":return e.stop()}}),Rt)}function $a(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("UPDATE_USER_INFO_REQUEST_SEND",fa);case 2:case"end":return e.stop()}}),Dt)}function Za(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("INITIALIZE_GOOGLE_AUTH",ga);case 2:case"end":return e.stop()}}),It)}function Ja(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("RECOVER_PASSWORD_REQUEST_SEND",Ea);case 2:case"end":return e.stop()}}),Lt)}function Xa(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CHOOSE_PASSWORD_REQUEST_SEND",xa);case 2:case"end":return e.stop()}}),Mt)}function en(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CONTACT_US_REQUEST_SEND",va);case 2:case"end":return e.stop()}}),Pt)}function tn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CHANGE_PASSWORD_REQUEST_SEND",ya);case 2:case"end":return e.stop()}}),Ft)}function an(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CHANGE_EMAIL_REQUEST_SEND",Sa);case 2:case"end":return e.stop()}}),Ut)}function nn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CSV_FROM_VIZ_REQUEST_SEND",ma);case 2:case"end":return e.stop()}}),zt)}function rn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("COPY_TEXT_TO_CLIPBOARD",Oa);case 2:case"end":return e.stop()}}),Bt)}function on(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("RETRIEVE_SUBMISSIONS_BY_USER",wa);case 2:case"end":return e.stop()}}),Vt)}function sn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("RETRIEVE_ALL_SUBMISSIONS",Ca);case 2:case"end":return e.stop()}}),Gt)}function ln(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("ADD_SUBMISSION_COMMENT",ka);case 2:case"end":return e.stop()}}),Ht)}function cn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("RETRIEVE_SUBMISSION_COMMENT_HISTORY",Aa);case 2:case"end":return e.stop()}}),Wt)}function un(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("UPLOAD_SUBMISSION",_a);case 2:case"end":return e.stop()}}),qt)}function dn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("SET_SUBMISSION_PHASE",ja);case 2:case"end":return e.stop()}}),Qt)}function pn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("RETRIEVE_MOST_RECENT_FILE",Ta);case 2:case"end":return e.stop()}}),Kt)}function mn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("CHECK_SUBMISSION_OPTIONS_AND_STORE_FILE",Na);case 2:case"end":return e.stop()}}),Yt)}function hn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)("DOWNLOAD_MOST_RECENT_FILE",Ra);case 2:case"end":return e.stop()}}),$t)}function bn(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)([Da(),Ia(),La(),Ma(),Pa(),Fa(),Ua(),za(),Ba(),Va(),Ga(),Ha(),Wa(),qa(),Qa(),Ka(),Ya(),$a(),Za(),Ja(),Xa(),en(),tn(),an(),nn(),rn(),on(),sn(),ln(),cn(),un(),dn(),pn(),mn(),hn()]);case 2:case"end":return e.stop()}}),Zt)}var fn=Object(v.a)(),gn=Object(c.d)(x,Object(c.a)(fn));fn.run(bn);var En=gn,xn=a(22),vn=a(23),yn=a(24),Sn=a(417),On=a(828),wn=a(68),Cn=a(416),kn=(a(587),{primary:"#9dd162",solidPaper:"#184562",backgroundGray:"#424242",secondary:"#22A3B9",errorYellow:"#ffe336",greenHover:"rgba(97, 149, 38, .4)"}),An=a(31),_n=a(49),jn=a(8),Tn=a(292),Nn=a(104),Rn=a(770),Dn=a(771),In=a(772),Ln=a(773),Mn=a(774),Pn=a(775),Fn=a(776),Un=a(842),zn=a(777),Bn=a(725),Vn={copyTextToClipboard:function(e){return{type:"COPY_TEXT_TO_CLIPBOARD",payload:{text:e}}}},Gn=Object(l.b)(null,Vn,null,{forwardRef:!0})((function(e){var t=e.copyTextToClipboard,a=e.tooltipPlacement,n=e.text,o=e.innerSpanProps,s=function(e){t(e.target.innerText)};return e.hideTooltip?r.a.createElement("span",Object.assign({style:{cursor:"copy"},onClick:s},o),n):r.a.createElement(Un.a,{placement:a||"top",title:"Click to Copy"},r.a.createElement("span",Object.assign({style:{cursor:"copy"},onClick:s},o),n))})),Hn={keyRetrievalRequestSend:_,keyCreationRequestSend:function(e){return{type:"KEY_CREATION_REQUEST_SEND",payload:{description:e}}},snackbarOpen:U},Wn=function(e){function t(e){var a;return Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).componentDidMount=function(){a.props.apiKeys||a.props.keyRetrievalRequestSend()},a.handleClick=function(){a.props.keyCreationRequestSend(a.state.description)},a.handleChange=function(e){a.setState(Object(u.a)({},a.state,{description:e.target.value}))},a.state={description:"API Access"},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.wrapper},this.props.apiKeys?r.a.createElement(Tn.a,{className:e.root,elevation:6},r.a.createElement(Nn.a,{variant:"subtitle1",className:e.apiKeyTableHeader},"Your API Key"),r.a.createElement(Rn.a,null),r.a.createElement(Dn.a,{className:e.table},r.a.createElement(In.a,null,r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,{variant:"head",align:"center"},"Description"),r.a.createElement(Mn.a,{variant:"head",align:"center"},"Key (hover mouse to view)"))),r.a.createElement(Pn.a,null,this.props.apiKeys.map((function(t,a){return r.a.createElement(Ln.a,{key:a},r.a.createElement(Mn.a,{align:"center"},t.Description),r.a.createElement(Mn.a,{align:"center",className:e.showChildOnHover},r.a.createElement(Gn,{text:t.Api_Key,tooltipPlacement:"right"})))})))),r.a.createElement(Nn.a,{variant:"caption",className:e.warningCaption},"This API key is a unique identifier, and should not be shared.")):"",r.a.createElement(Tn.a,{className:e.root,elevation:6},r.a.createElement(Nn.a,{variant:"body2"},"Generate a new API key"),r.a.createElement(Fn.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(Fn.a,{item:!0},r.a.createElement(Un.a,{placement:"bottom",title:"Optionally Add a Custom Description"},r.a.createElement(zn.a,{margin:"normal",id:"description",type:"text",variant:"outlined",name:"description",value:this.state.description,onChange:this.handleChange,placeholder:"Key Description",className:e.descriptionField,autoComplete:"off"}))),r.a.createElement(Fn.a,{item:!0},r.a.createElement(Bn.a,{variant:"contained",disabled:this.state.description.length<1,color:"primary",onClick:this.handleClick},"Generate API Key"))),this.props.apiKeyCreationState===d.failed?r.a.createElement("span",null,"Key creation failed"):""))}}]),t}(n.Component),qn=Object(l.b)((function(e,t){return{apiKeys:e.apiKeys,apiKeyCreationState:e.apiKeyCreationState}}),Hn)(Object(jn.a)((function(e){return{root:{width:"800px",marginTop:e.spacing(3),margin:"auto",paddingTop:e.spacing(2)},table:{minWidth:700},apiKeyTableHeader:{marginBottom:e.spacing(2)},showChildOnHover:{"& span":{visibility:"hidden"},"&:hover span":{visibility:"visible"}},warningCaption:{color:kn.primary,fontSize:"11px",marginTop:e.spacing(2),marginBottom:e.spacing(2)},wrapper:{marginTop:e.spacing(15)}}}))(Wn)),Qn=a(778),Kn={showLoginDialog:L},Yn=Object(l.b)(null,Kn)(Object(jn.a)((function(e){return{loginRequiredMessage:{marginTop:e.spacing(10),color:"white"}}}))((function(e){var t=e.classes,a=e.showLoginDialog;return Object(n.useEffect)((function(){a()})),r.a.createElement(Nn.a,{className:t.loginRequiredMessage},"This feature requires a user account. Please ",r.a.createElement(Qn.a,{component:An.b,to:{pathname:window.location.pathname},onClick:function(){return e.showLoginDialog()}}," log in")," or ",r.a.createElement(Qn.a,{component:An.b,to:{pathname:"/register"}}," register"),".")}))),$n={showLoginDialog:L},Zn=function(e){function t(){return Object(ue.a)(this,t),Object(xn.a)(this,Object(vn.a)(t).apply(this,arguments))}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){return this.props.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(qn,null)):r.a.createElement(Yn,null)}}]),t}(n.Component),Jn=Object(l.b)((function(e,t){return{user:e.user}}),$n)(Object(jn.a)((function(e){return{}}))(Zn)),Xn=a(213),er=[["Long Name","Long_Name"],["Short Name","Variable"],["Study Domain","Study_Domain"],["Process Level","Process_Level"]],tr=[["Unit","Unit"],["Mean Value","Variable_Mean"],["Value Std","Variable_Std"]],ar=[["Start Latitude[\xb0]","Lat_Min"],["End Latitude[\xb0]","Lat_Max"],["Start Longitude[\xb0]","Lon_Min"],["End Longitude[\xb0]","Lon_Max"]],nr=Object(jn.a)((function(e){return{title:{marginBottom:e.spacing(1)},wrapper:{padding:"10px",height:"100%",userSelect:"auto"},infoCard:{padding:e.spacing(1),width:"100%",height:"100%"},gridClass:{height:"100%",maxHeight:"180px"},gridItem:{display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",maxHeight:"180px"},datasetDescriptionWrapper:{whiteSpace:"normal",height:"100%",overflow:"auto"},datasetDescription:{marginBottom:e.spacing(2),marginTop:e.spacing(1)},vizSampleImage:{maxWidth:"80%",maxHeight:"260px"},variableDetailTable:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%",tableLayout:"fixed",marginBottom:e.spacing(1)},variableDetailTableRow:{height:"24px",width:"100%"},variableDetailTableCell:{color:"#FFF6EC",borderBottomColor:"black",fontSize:"11px",maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",paddingRight:"14px"},gridDetailTypography:{fontSize:"11px",whiteSpace:"normal",width:"100%",display:"block"},boldText:{fontWeight:"bold"},rightGridItem:{maxWidth:"100%",paddingTop:"10px",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},datasetDescriptionButton:{backgroundColor:kn.primary,color:"white","&:hover":{backgroundColor:"#518516"},fontSize:"12px",maxWidth:"100%",marginTop:"50px"},buttonTextWrapper:{textOverflow:"ellipsis",maxWidth:"100%",overflow:"hidden"}}}))((function(e){var t=e.classes;return r.a.createElement("div",{className:"ag-selectable ".concat(t.wrapper)},r.a.createElement(Fn.a,{container:!0,className:t.gridClass},r.a.createElement(Fn.a,{container:!0,item:!0,xs:10,spacing:2},r.a.createElement(Fn.a,{item:!0,xs:4,className:t.gridItem},r.a.createElement(Dn.a,{className:t.variableDetailTable,size:"small"},r.a.createElement(Pn.a,null,er.map((function(a,n){return r.a.createElement(Ln.a,{key:n,className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:t.variableDetailTableCell},a[0]),r.a.createElement(Mn.a,{className:t.variableDetailTableCell,title:e.data[a[1]]},e.data[a[1]]))}))))),r.a.createElement(Fn.a,{item:!0,xs:4,className:t.gridItem},r.a.createElement(Dn.a,{className:t.variableDetailTable,size:"small"},r.a.createElement(Pn.a,null,tr.map((function(a,n){return r.a.createElement(Ln.a,{key:n,className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:t.variableDetailTableCell},a[0]),r.a.createElement(Mn.a,{className:t.variableDetailTableCell},e.data[a[1]]))})),r.a.createElement(Ln.a,{key:er.length+1,className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:t.variableDetailTableCell},"Start Date"),r.a.createElement(Mn.a,{className:t.variableDetailTableCell},e.data.Time_Min.slice(0,10))),r.a.createElement(Ln.a,{key:er.length+2,className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:t.variableDetailTableCell},"End Date"),r.a.createElement(Mn.a,{className:t.variableDetailTableCell},e.data.Time_Max.slice(0,10)))))),r.a.createElement(Fn.a,{item:!0,xs:4,className:t.gridItem},r.a.createElement(Dn.a,{className:t.variableDetailTable,size:"small"},r.a.createElement(Pn.a,null,ar.map((function(a,n){return r.a.createElement(Ln.a,{key:n,className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:t.variableDetailTableCell},a[0]),r.a.createElement(Mn.a,{className:t.variableDetailTableCell},e.data[a[1]]))})),r.a.createElement(Ln.a,{key:tr.length+1,className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:t.variableDetailTableCell},"Maximum Depth[m]"),r.a.createElement(Mn.a,{className:t.variableDetailTableCell},e.data.Depth_Max||"Surface Only")))))),r.a.createElement(Fn.a,{item:!0,xs:2,className:t.rightGridItem},e.data.Comment&&r.a.createElement(Bn.a,{variant:"contained",className:t.datasetDescriptionButton,onClick:function(){return e.context.handleDescribeVariable(e.data.ID)}},r.a.createElement("span",{className:t.buttonTextWrapper},"Comment")))))})),rr=a(779),or=a(780),sr=a(781),ir=a(408),lr=a.n(ir),cr=function(e){function t(){return Object(ue.a)(this,t),Object(xn.a)(this,Object(vn.a)(t).apply(this,arguments))}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props,t=e.description,a=e.classes,n=e.datasetName,o=e.clearDescription;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(rr.a,{open:Boolean(t),onClose:o,maxWidth:!1,PaperProps:{className:a.dialogPaper}},r.a.createElement(or.a,null,n),r.a.createElement(sr.a,null,r.a.createElement(lr.a,{source:t,className:a.markdown}))):"")}}]),t}(n.Component),ur=Object(jn.a)((function(e){return{dialogPaper:{backgroundColor:kn.solidPaper},markdown:{"& img":{maxWidth:"100%",margin:"20px auto 20px auto",display:"block"},"& a":{color:e.palette.primary.main,textDecoration:"none"}}}}))(cr),dr=Object(l.b)((function(e,t){return{catalog:e.catalog}}),{})(Object(jn.a)((function(e){return{dialogPaper:{backgroundColor:kn.solidPaper,padding:"8px 16px 16px 16px"}}}))((function(e){var t=e.catalog,a=e.describedVariable,n=e.classes,o=t.find((function(e){return e.ID===a}));return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(rr.a,{open:Boolean(a),onClose:e.clearDescription,maxWidth:!1,PaperProps:{className:n.dialogPaper}},r.a.createElement(or.a,null,o.Long_Name),o.Comment&&r.a.createElement(sr.a,null,o.Comment)):"")}))),pr=a(409),mr=a.n(pr),hr=a(784),br=a(785),fr=(Object(l.b)((function(e,t){return{showHelp:e.showHelp}}),null)(Object(jn.a)((function(e){return{tooltip:{color:"#00FFFF",fontSize:"13px",boxShadow:"0px 1px 1px 1px #242424",padding:"12px",borderRadius:"7px",textAlign:"center"}}}))((function(e){var t=e.classes,a=e.showHelp;return a?r.a.createElement(Un.a,{placement:e.placement,open:a,title:e.title,classes:{tooltip:t.tooltip}},e.children):r.a.createElement(r.a.Fragment,null,e.children)}))),a(727)),gr=a(782),Er=a(783),xr=Object(jn.a)((function(e){return{title:{marginBottom:e.spacing(1)},datasetGroupWrapper:{padding:"10px",height:"100%",userSelect:"auto",textAlign:"left",bozSizing:"border-box"},nonDatasetGroupWrapper:{height:"100%",userSelect:"auto",textAlign:"left",paddingLeft:"18px",paddingTop:"10px"},infoCard:{padding:e.spacing(1),width:"100%",height:"100%"},gridClass:{height:"100%",maxHeight:"200px"},datasetGridClass:{height:"100%",maxHeight:"200px"},gridItem:{display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",maxHeight:"200px"},adjustGridLeft:{marginLeft:"-7vw"},datasetDescriptionWrapper:{whiteSpace:"normal",height:"100%",overflow:"auto"},datasetDescription:{marginBottom:e.spacing(2),marginTop:e.spacing(1)},vizSampleImage:{maxWidth:"15vw",maxHeight:"180px"},variableDetailTable:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%",tableLayout:"fixed",marginBottom:e.spacing(1)},variableDetailTableRow:{height:"24px",width:"100%"},variableDetailTableCell:{color:"#FFF6EC",borderBottomColor:"black",fontSize:"11px",maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",paddingRight:"14px"},gridDetailTypography:{fontSize:"11px",whiteSpace:"normal",width:"100%",display:"block"},boldText:{fontWeight:"bold"},rightGridItem:{maxWidth:"100%",paddingTop:"10px",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},datasetDescriptionButton:{backgroundColor:kn.primary,color:"white","&:hover":{backgroundColor:"#518516"},fontSize:"12px",maxWidth:"100%",margin:"0 auto",verticalAlign:"middle"},buttonTextWrapper:{textOverflow:"ellipsis",maxWidth:"100%",overflow:"hidden"},groupName:{textAlign:"left",fontSize:"13px",fontWeight:700,marginLeft:"-2px",display:"inline-block",marginTop:"3px",color:kn.primary},chevronButton:{marginBottom:"4px",marginRight:"21px","&:hover":{backgroundColor:"transparent"}},datasetChevronButton:{marginTop:"75px","&:hover":{backgroundColor:"transparent"}},chevronIcon:{transform:"scale(0.8)",color:kn.primary},datasetButtonWrapper:{width:"70px",display:"inline-block"},datasetName:{marginTop:"-32px",fontSize:"19px",marginBottom:"-48px",fontWeight:700},tableGridSection:{padding:"8px 8px 0 8px",marginBottom:"-24px"},shortCell:{maxWidth:"35%",width:"35%"},acknowledgement:{fontSize:"11px",textAlign:"center",padding:"0 10px 0 10px",maxWidth:"20vw",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxHeight:"100px"},acknowledgementHeader:{padding:"0 6px 0 6px",maxWidth:"20vw",fontSize:"13px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",marginBottom:"8px"},buttonMarginLeft:{marginLeft:"auto",marginRight:"auto",display:"block"},buttonMarginTop:{marginTop:"-60px",marginLeft:"auto",marginRight:"auto",display:"block"},tooltip:{backgroundColor:kn.solidPaper,color:kn.primary}}}))((function(e){var t=e.classes,a=e.node,n=e.context,o=e.value,s=a.allLeafChildren[0].data,i=r.a.useState(a.expanded),l=Object(y.a)(i,2),c=l[0],u=l[1],d=function(){a.setExpanded(!a.expanded),u(a.expanded)};return"Dataset_Name"===e.node.field?r.a.createElement("div",{className:"ag-selectable ".concat(t.datasetGroupWrapper),onDoubleClick:d},r.a.createElement(Fn.a,{container:!0,className:t.datasetGridClass},r.a.createElement(Fn.a,{xs:1,item:!0,className:t.datasetButtonWrapper},c?r.a.createElement(fr.a,{onClick:d,size:"small",className:"".concat(t.datasetChevronButton)},r.a.createElement(gr.a,{className:t.chevronIcon})):r.a.createElement(Un.a,{title:"Show member variables",enterDelay:300},r.a.createElement(fr.a,{onClick:d,size:"small",className:"".concat(t.datasetChevronButton)},r.a.createElement(Er.a,{className:t.chevronIcon})))),r.a.createElement(Fn.a,{item:!0,container:!0,xs:11,className:"".concat(t.gridItem," ").concat(t.adjustGridLeft)},r.a.createElement(Fn.a,{item:!0,xs:4,className:t.gridItem},r.a.createElement("img",{src:n.datasets[e.value].Icon_URL,alt:"Mission Icon",className:t.vizSampleImage,onClick:d})),r.a.createElement(Fn.a,{justify:"space-between",direction:"column",container:!0,item:!0,xs:8,className:t.gridItem},r.a.createElement(Fn.a,{container:!0,item:!0,xs:12},r.a.createElement(Nn.a,{className:t.datasetName},o)),r.a.createElement(Fn.a,{container:!0,item:!0,xs:12},r.a.createElement(Fn.a,{item:!0,xs:8,className:t.tableGridSection},r.a.createElement(Dn.a,{className:t.variableDetailTable,size:"small"},r.a.createElement(Pn.a,null,r.a.createElement(Ln.a,{className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:"".concat(t.variableDetailTableCell," ").concat(t.shortCell)},r.a.createElement("strong",null,"Source")),r.a.createElement(Mn.a,{className:t.variableDetailTableCell,title:s.Data_Source},s.Data_Source)),r.a.createElement(Ln.a,{className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:"".concat(t.variableDetailTableCell," ").concat(t.shortCell)},r.a.createElement("strong",null,"Distributor")),r.a.createElement(Mn.a,{className:t.variableDetailTableCell,title:s.Distributor},s.Distributor)),r.a.createElement(Ln.a,{className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:"".concat(t.variableDetailTableCell," ").concat(t.shortCell)},"SQL Table"),r.a.createElement(Mn.a,{className:t.variableDetailTableCell,title:s.Distributor},s.Table_Name)),r.a.createElement(Ln.a,{className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:"".concat(t.variableDetailTableCell," ").concat(t.shortCell)},"Temporal Resolution"),r.a.createElement(Mn.a,{className:t.variableDetailTableCell,title:s.Distributor},s.Temporal_Resolution)),r.a.createElement(Ln.a,{className:t.variableDetailTableRow},r.a.createElement(Mn.a,{className:"".concat(t.variableDetailTableCell," ").concat(t.shortCell)},"Spatial Resolution"),r.a.createElement(Mn.a,{className:t.variableDetailTableCell,title:s.Distributor},s.Spatial_Resolution))))),r.a.createElement(Fn.a,{item:!0,xs:4,container:!0,direction:"column",className:t.tableGridSection},r.a.createElement("div",{style:{height:"70%",justifyContent:"center",width:"100%"}},s.Acknowledgement&&r.a.createElement("div",null,r.a.createElement(Nn.a,{className:t.acknowledgementHeader},r.a.createElement("strong",null,"Acknowledgement:")),r.a.createElement(Nn.a,{title:s.Acknowledgement,className:t.acknowledgement},s.Acknowledgement))),r.a.createElement("div",{style:{height:"30%",justifyContent:"center",width:"100%"}},r.a.createElement(Bn.a,{variant:"contained",className:"".concat(t.datasetDescriptionButton," ").concat(s.Acknowledgement?t.buttonMarginLeft:t.buttonMarginTop),onClick:function(){return e.context.handleDescribeDataset(s.Dataset_Name)}},r.a.createElement("span",{className:t.buttonTextWrapper},"Dataset Details"))))))))):r.a.createElement("div",{className:"ag-selectable ".concat(t.nonDatasetGroupWrapper)},r.a.createElement("div",{style:{display:"inline-block",marginLeft:"".concat(36*a.level,"px")}}),c?r.a.createElement(fr.a,{onClick:d,size:"small",className:"".concat(t.chevronButton)},r.a.createElement(gr.a,{className:t.chevronIcon})):r.a.createElement(fr.a,{onClick:d,size:"small",className:"".concat(t.chevronButton),disableRipple:!0,disableFocusRipple:!0},r.a.createElement(Er.a,{className:t.chevronIcon})),r.a.createElement(Nn.a,{className:t.groupName,variant:"h6"},e.value))})),vr=[{headerName:"Long Name",field:"Long_Name",sortable:!0,filter:!0,tooltipField:"longName",cellRenderer:"agGroupCellRenderer"},{headerName:"Variable",field:"Variable",sortable:!0,filter:!0,hide:!0},{headerName:"Table Name",field:"Table_Name",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Dataset Name",field:"Dataset_Name",sortable:!0,filter:!0,tooltipField:"datasetName",rowGroup:!0,enableRowGroup:!0,hide:!0},{headerName:"Make",field:"Make",sortable:!0,filter:!0,enableRowGroup:!0,maxWidth:160},{headerName:"Sensor",field:"Sensor",sortable:!0,filter:!0,enableRowGroup:!0,maxWidth:160},{headerName:"Study Domain",field:"Study_Domain",sortable:!0,filter:!0,maxWidth:160,enableRowGroup:!0},{headerName:"Process Level",field:"Process_Level",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Spatial Resolution",field:"Spatial_Resolution",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Temporal Resolution",field:"Temporal_Resolution",sortable:!0,filter:!0,hide:!0,enableRowGroup:!0},{headerName:"Unit",field:"Unit",sortable:!0,filter:!0,hide:!0},{headerName:"Key Words",field:"Keywords",hide:!0},{headerName:"Data Source",field:"Data_Source",hide:!0}],yr={resizable:!0,cellStyle:{textAlign:"left"}},Sr={cellStyle:{textAlign:"left"}},Or=function(e){return e.node.group&&"Dataset_Name"===e.node.field?200:e.node.detail?180:48},wr=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(o)))).state={filterText:"",describedDataset:"",describedVariable:null},a.handleDescribeDataset=function(e){a.setState(Object(u.a)({},a.state,{describedDataset:e}))},a.handleDescribeVariable=function(e){a.setState(Object(u.a)({},a.state,{describedVariable:e}))},a.handleChange=function(e){a.setState(Object(u.a)({},a.state,{filterText:e.target.value})),a.gridApi.setQuickFilter(e.target.value)},a.onGridReady=function(e){a.gridApi=e.api,a.columnApi=e.columnApi,a.gridApi.sizeColumnsToFit()},a.onGridSizeChanged=function(e){a.gridApi.sizeColumnsToFit()},a.handleColumnRowGroupChanged=function(e){a.gridApi.sizeColumnsToFit(),e.columns.forEach((function(e){e.columnApi.setColumnVisible(e.colId,!1)}))},a.handleDownloadCatalog=function(){var e=mr()(a.props.catalog,{header:!0}),t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.setAttribute("hidden",""),r.setAttribute("href",n),r.setAttribute("download","CMAP_Catalog.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},a.render=function(){var e=a.props,t=e.classes,n=e.datasets,o=a.state,s=o.describedDataset,i=o.describedVariable,l=n&&n[s]?n[s].Description:"";return r.a.createElement(Tn.a,{elevation:12,className:t.gridPaper},r.a.createElement(ur,{description:l,clearDescription:function(){return a.handleDescribeDataset("")},datasetName:s}),r.a.createElement(dr,{clearDescription:function(){return a.handleDescribeVariable(null)},describedVariable:i}),r.a.createElement(Fn.a,{container:!0},r.a.createElement(Fn.a,{item:!0,xs:3}),r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(zn.a,{className:t.gridSearch,autoFocus:!0,margin:"normal",id:"name",type:"text",variant:"outlined",name:"filterText",value:a.state.filterText,onChange:a.handleChange,placeholder:"Search Catalog",InputProps:{startAdornment:r.a.createElement(hr.a,{position:"start"},r.a.createElement(br.a,{style:{color:kn.primary}}))}})),r.a.createElement(Fn.a,{item:!0,xs:2},r.a.createElement(Un.a,{placement:"top",title:"Download the full catalog in CSV format"},r.a.createElement(Bn.a,{className:t.downloadButton,variant:"contained",color:"primary",onClick:a.handleDownloadCatalog},"Download Catalog"))),r.a.createElement(Fn.a,{item:!0,xs:1})),r.a.createElement("div",{className:t.gridWrapper+" ag-theme-material"},r.a.createElement(Xn.AgGridReact,{columnDefs:vr,defaultColDef:yr,rowData:a.props.catalog,onGridReady:a.onGridReady,onGridSizeChanged:a.onGridSizeChanged,suppressDragLeaveHidesColumns:!0,enableCellTextSelection:!0,suppressContextMenu:!0,getRowHeight:Or,context:{datasets:n,handleDescribeDataset:a.handleDescribeDataset,handleDescribeVariable:a.handleDescribeVariable},getRowStyle:function(e){var t={};return e.node.detail&&(t.background="transparent"),e.node.level>0&&(t.marginLeft="32px"),t},rowGroupPanelShow:"always",groupMultiAutoColumn:!0,onColumnRowGroupChanged:a.handleColumnRowGroupChanged,autoGroupColumnDef:Sr,enableBrowserTooltips:!0,groupUseEntireRow:!0,groupRowRenderer:"datasetGroupRowRenderer",masterDetail:!0,frameworkComponents:{myDetailCellRenderer:nr,datasetGroupRowRenderer:xr},detailCellRenderer:"myDetailCellRenderer",detailRowHeight:200})))},a}return Object(yn.a)(t,e),t}(n.Component),Cr=Object(jn.a)((function(e){return{gridWrapper:{height:"80vh",width:"96%",margin:"0 auto"},gridSearch:{margin:"0 auto 20px auto",width:"60%"},gridPaper:{marginTop:"68px",padding:"20px",height:"calc(100vh - 68px)",boxSizing:"border-box",overflow:"hidden"},downloadButton:{margin:"6px 0 0 0",textTransform:"none",color:"white",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark}}}}))(wr),kr={retrievalRequestSend:T,datasetRetrievalRequestSend:R},Ar=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.props.catalog||a.props.retrievalRequestSend(),a.props.datasets||a.props.datasetRetrievalRequestSend()},a.determineContent=function(){if(a.props.catalog&&a.props.datasets)return r.a.createElement(Cr,{catalog:a.props.catalog,datasets:a.props.datasets})},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.determineContent();return r.a.createElement(r.a.Fragment,null,e)}}]),t}(n.Component),_r=Object(l.b)((function(e,t){return{catalogRequestState:e.catalogRequestState,catalog:e.catalog,datasets:e.datasets}}),kr)(Object(jn.a)((function(e){return{}}))(Ar)),jr=a(144),Tr=a(839),Nr=a(787),Rr=a(835),Dr=a(788),Ir=a(786),Lr=Object(jn.a)((function(e){return{registrationCard:{marginTop:e.spacing(1),marginBottom:e.spacing(1),height:"200px"},textField:{margin:e.spacing(1),width:"80%"}}}))((function(e){var t=e.classes,a=Object.keys(e.inputFieldState),n=function(t){"Enter"===t.key&&e.buttonRef.current.click()};return r.a.createElement(Ir.a,{className:t.registrationCard},r.a.createElement(Fn.a,{container:!0,spacing:1},a.map((function(o,s){return r.a.createElement(Fn.a,{key:s,item:!0,xs:a.length>2?6:12},r.a.createElement(zn.a,{key:s,autoFocus:Boolean(0===s),name:e.inputFieldInfo[o].name,label:e.inputFieldInfo[o].label,value:e.inputFieldState[o].value,className:t.textField,onChange:e.onChange,type:e.inputFieldInfo[o].type,error:!e.inputFieldState[o].valid,helperText:e.inputFieldState[o].valid?" ":e.inputFieldInfo[o].requirement,onKeyPress:n}))}))))})),Mr={registrationNextActiveStep:P,registrationPreviousActiveStep:function(){return{type:"REGISTRATION_PREVIOUS_ACTIVE_STEP"}},userRegistrationRequestSend:function(e){return{type:"REGISTRATION_REQUEST_SEND",payload:e}},userValidationRequestSend:function(e,t){return{type:"VALIDATION_REQUEST_SEND",payload:{username:e,email:t}}}},Pr=r.a.createRef(),Fr=function(e){function t(e){var a;Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).componentDidMount=function(){a.props.userValidationState===d.failed&&a.props.userValidationRequestSuccess()},a.validateField=function(e,t){var n=t.trim(),r=/$^/;switch(e){case"firstName":case"lastName":r=/^[A-Za-z ]{2,40}$/;break;case"username":r=/^[A-Za-z0-9 ]{6,20}$/;break;case"email":r=/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-.]+)\.([a-zA-Z]{2,5})$/;break;case"institute":case"department":case"country":r=/^.{0,150}$/;break;case"password":r=/^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/,a.setState((function(e){var t=Object(h.a)(e.cards);return t[2].confirmPassword.valid=Boolean(t[2].confirmPassword.value===n),{cards:t}}));break;case"confirmPassword":return a.state.cards[2].password.value===n}return r.test(n)},a.processStateToActionPayload=function(){var e={};return a.state.cards.forEach((function(t){Object.keys(t).forEach((function(a){e[a]=t[a].value}))})),e},a.currentCardIsValid=function(){var e=a.state.cards[a.props.registrationActiveStep];for(var t in e)if(!e[t].optional&&(!e[t].value||!e[t].valid))return!1;return!0},a.handleNext=function(){switch(a.props.registrationActiveStep){case 0:var e=a.state.cards[0].username.value,t=a.state.cards[0].email.value;a.props.userValidationRequestSend(e,t);break;case 1:a.props.userRegistrationRequestSend(a.processStateToActionPayload());break;default:a.props.registrationNextActiveStep()}},a.handleBack=function(){a.props.registrationPreviousActiveStep()},a.handleChange=function(e){var t=e.target.value,n=e.target.name,r=a.validateField(n,t);a.setState((function(e){var o=Object(h.a)(e.cards);return o[a.props.registrationActiveStep][n]=Object(u.a)({},o[a.props.registrationActiveStep][n],{value:t,valid:r}),{cards:o}}))};var n=[];return[{firstName:{label:"First Name*",name:"firstName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},lastName:{label:"Last Name*",name:"lastName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},username:{label:"Username*",name:"username",type:"text",requirement:"Must be 6 to 20 alphanumeric characters.",optional:!1},email:{label:"Email Address*",name:"email",type:"email",requirement:"Must be a valid email address.",optional:!1}},{institute:{label:"Institute",name:"institute",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},department:{label:"Department",name:"department",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},country:{label:"Country",name:"country",type:"text",requirement:"Maximum length is 150 characters.",optional:!0}}].forEach((function(e){var t={};Object.keys(e).forEach((function(a){t[a]={value:"",valid:!0,optional:e[a].optional}})),n.push(t)})),a.state={cards:n},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=["Your Information","Optional Organization Info"],a=this.props.registrationActiveStep,n=[{firstName:{label:"First Name*",name:"firstName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},lastName:{label:"Last Name*",name:"lastName",type:"text",requirement:"Must be 2 or more alphabetical characters.",optional:!1},username:{label:"Username*",name:"username",type:"text",requirement:"Must be 6 to 20 alphanumeric characters.",optional:!1},email:{label:"Email Address*",name:"email",type:"email",requirement:"Must be a valid email address.",optional:!1}},{institute:{label:"Institute",name:"institute",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},department:{label:"Department",name:"department",type:"text",requirement:"Maximum length is 150 characters.",optional:!0},country:{label:"Country",name:"country",type:"text",requirement:"Maximum length is 150 characters.",optional:!0}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.root},r.a.createElement(Tr.a,{activeStep:a},t.map((function(e,t){return r.a.createElement(Nr.a,{key:e},r.a.createElement(Rr.a,null,e))}))),r.a.createElement("div",null,a===t.length?r.a.createElement(Tn.a,{className:e.instructionsPaper},r.a.createElement(Nn.a,{className:e.instructions},"We've sent you an email with a link for finalizing your registration and choosing a password. If you don't receive the email within the next few minute please check your spam folder.")):r.a.createElement("div",null,r.a.createElement(Lr,{inputFieldState:Object(u.a)({},this.state.cards[this.props.registrationActiveStep]),inputFieldInfo:Object(u.a)({},n[this.props.registrationActiveStep]),onChange:this.handleChange,buttonRef:Pr}),r.a.createElement("div",null,r.a.createElement(Bn.a,{onClick:0===a?this.props.handleHideStepper:this.handleBack,className:e.button},"Back"),r.a.createElement(Bn.a,{variant:"contained",color:"primary",onClick:this.handleNext,className:e.button,disabled:!this.currentCardIsValid()||this.props.userValidationState===d.inProgress,ref:Pr},a===t.length-1?"Finish":"Next"),this.props.userValidationState===d.inProgress&&r.a.createElement(Dr.a,{size:24,className:e.buttonProgress}),this.props.userValidationState===d.failed&&r.a.createElement(Nn.a,{className:e.bottomError},"That username or email address is already in use. If you previously registered you can recover your password ",r.a.createElement(Qn.a,{onClick:this.handleClose,component:An.b,to:{pathname:"/forgotpass"}},"here"),"."),this.props.userRegistrationState===d.failed&&r.a.createElement(Nn.a,{className:e.bottomError},"Registration failed. Please try again."))))))}}]),t}(n.Component),Ur=Object(l.b)((function(e,t){return{registrationActiveStep:e.registrationActiveStep,userValidationState:e.userValidationState,userRegistrationState:e.userRegistrationState}}),Mr)(Object(jn.a)((function(e){return{root:{width:"60%",margin:"10% auto"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},instructionsPaper:{width:"60%",margin:"5% auto",padding:"24px"},registrationCard:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},textField:{margin:e.spacing(1),width:200},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},bottomError:{color:"white",marginTop:e.spacing(2)}}}))(Fr)),zr=Object(jn.a)((function(e){return{wrapper:{height:"46px",display:"flex",cursor:"pointer",borderRadius:"4px","&:hover":{boxShadow:"0 0 3px 3px rgba(66,133,244,.3)"},paddingRight:"14px",width:"200px",color:"#ffffff"},textSpan:{marginTop:"13px",marginLeft:"10px",fontFamily:"'Roboto', sans-serif"}}}))((function(e){var t=e.classes,a=e.clickHandlerTarget;return r.a.createElement("div",{id:a,className:t.wrapper},r.a.createElement("svg",{width:"46px",height:"46px",viewBox:"0 0 46 46",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r.a.createElement("title",null,"btn_google_dark_normal_ios"),r.a.createElement("desc",null,"Created with Sketch."),r.a.createElement("defs",null,r.a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.a.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.a.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.a.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.a.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.a.createElement("feMergeNode",{in:"SourceGraphic"}))),r.a.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"}),r.a.createElement("rect",{id:"path-3",x:"5",y:"5",width:"38",height:"38",rx:"1"})),r.a.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -219.000000)"}),r.a.createElement("g",{id:"btn_google_dark_normal",transform:"translate(-1.000000, -1.000000)"},r.a.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},r.a.createElement("g",{id:"button-bg"},r.a.createElement("use",{fill:"#4285F4",fillRule:"evenodd",xlinkHref:"#path-2"}),r.a.createElement("use",{fill:"none",xlinkHref:"#path-2"}),r.a.createElement("use",{fill:"none",xlinkHref:"#path-2"}),r.a.createElement("use",{fill:"none",xlinkHref:"#path-2"}))),r.a.createElement("g",{id:"button-bg-copy"},r.a.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd",xlinkHref:"#path-3"}),r.a.createElement("use",{fill:"none",xlinkHref:"#path-3"}),r.a.createElement("use",{fill:"none",xlinkHref:"#path-3"}),r.a.createElement("use",{fill:"none",xlinkHref:"#path-3"})),r.a.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.a.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.a.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.a.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.a.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.a.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.a.createElement("g",{id:"handles_square"})))),r.a.createElement("span",{className:t.textSpan},e.text))})),Br={snackbarOpen:U,googleLoginRequestSend:k},Vr=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(r)))).state={showStepper:!1},a.onGoogleSignup=function(e){var t=e.getAuthResponse(!0).id_token;a.props.googleLoginRequestSend(t)},a.registerGoogleClickHandler=function(){var e=Object(jr.a)(a),t=window.gapi.auth2;t?t.getAuthInstance().attachClickHandler("g-signup",null,e.onGoogleSignup,(function(){return e.props.snackbarOpen("There was a problem accessing your google account")})):setTimeout(e.registerGoogleClickHandler,20)},a.componentDidMount=function(){a.registerGoogleClickHandler()},a.handleShowStepper=function(){a.setState({showStepper:!0})},a.handleHideStepper=function(){a.setState({showStepper:!1})},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,!this.state.showStepper&&r.a.createElement(Tn.a,{className:e.paper},r.a.createElement(Nn.a,{className:e.description},"Create an account to visualize data, and access the Simons CMAP API."),r.a.createElement("div",{className:e.googleWrapper},r.a.createElement(zr,{clickHandlerTarget:"g-signup",text:"Sign up with Google"})),r.a.createElement("div",{className:e.emailSignUpWrapper},r.a.createElement(Bn.a,{variant:"contained",color:"primary",className:e.emailSignUpButton,onClick:this.handleShowStepper},"Sign up with an Email Address"))),this.state.showStepper&&r.a.createElement(Ur,{handleHideStepper:this.handleHideStepper}))}}]),t}(n.Component),Gr=Object(l.b)(null,Br)(Object(jn.a)((function(e){return{paper:{width:"60%",margin:"10% auto",padding:"24px"},emailSignUpButton:{textTransform:"none",height:"46px",color:"white"},googleWrapper:{margin:"50px auto 0 0",display:"inline-block"},description:{paddingTop:"50px"},emailSignUpWrapper:{marginTop:"40px"}}}))(Vr)),Hr=a(46),Wr=a(217),qr=a(91),Qr=a(410),Kr=a(728),Yr=a(790),$r=a(838),Zr=a(795),Jr=a(720),Xr=a(731),eo=a(802),to=a(729),ao=a(829),no=a(791),ro=a(792),oo=a(793),so=a(794),io=a(796),lo=a(797),co=a(798),uo=a(799),po=a(800),mo={depth:{depthOneIsLower:"Cannot be larger than end",depthOneOutOfBounds:"Data ends at $",depthTwoOutOfBounds:"Data begins at $",negative:"Cannot be negative"},date:{dateOneIsLater:"Cannot be after end",dateOneOutOfBounds:"Data ends at $",dateTwoOutOfBounds:"Data begins at $"},lat:{latOneIsHigher:"Cannot be larger than end",latOneOutOfBounds:"Data ends at $",latTwoOutOfBounds:"Data begins at $"},lon:{lonOneIsHigher:"Cannot be larger than end",lonOneOutOfBounds:"Data ends at $",lonTwoOutOfBounds:"Data begins at $"},type:{dataIsIrregular:"$ is not available for sparse data",dateRangeRequired:"$ requires a range of dates",depthRangeRequired:"$ requires a range of depths",surfaceOnlyDataset:"$ contains only surface data",irregularOnly:"Sparse map is only available for sparse data",dataSizeTooLarge:"Data set is too large for this visualization type.",webGLContextLimit:"Limit exceeded for sparse and heatmaps. Please delete one or more to proceed."},generic:{invalid:"Invalid input",dataSizeWarning:"Wait time and application performance may be poor due to size of data.",dataSizePrevent:"Data set is too large. Please reduce date range or area size.",variableMissing:"Please select a variable",vizTypeMissing:"Please select a visualization type"}},ho=a(789),bo=Object(jn.a)((function(e){return{dialogPaper:{backgroundColor:kn.backgroundGray,width:"700px"}}}))((function(e){var t=e.data,a=e.classes;return t?r.a.createElement(rr.a,{open:e.open,onClose:e.onClose,PaperProps:{className:a.dialogPaper}},r.a.createElement(or.a,null,t.Long_Name),r.a.createElement(sr.a,null,t.Comment&&r.a.createElement(ho.a,null,t.Comment),r.a.createElement(Dn.a,{size:"small"},r.a.createElement(Pn.a,null,r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Dataset"),r.a.createElement(Mn.a,{title:t.Dataset_Name},t.Dataset_Name.length>25?t.Dataset_Name.slice(0,23)+"...":t.Dataset_Name)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Table Name"),r.a.createElement(Mn.a,{title:t.Table_Name},t.Table_Name>25?t.Table_Name.slice(0,23)+"...":t.Table_Name)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Source"),r.a.createElement(Mn.a,{title:t.Data_Source},t.Data_Source>25?t.Data_Source.slice(0,23)+"...":t.Data_Source)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Distributor"),r.a.createElement(Mn.a,{title:t.Distributor},t.Distributor.length>25?t.Distributor.slice(0,23)+"...":t.Distributor)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Sensor"),r.a.createElement(Mn.a,null,t.Sensor)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Spatial Resolution"),r.a.createElement(Mn.a,null,t.Spatial_Resolution)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Temporal Resolution"),r.a.createElement(Mn.a,null,t.Temporal_Resolution)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Temporal Coverage Begin"),r.a.createElement(Mn.a,null,t.Time_Min?t.Time_Min.slice(0,10):"Irregular")),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Temporal Coverage End"),r.a.createElement(Mn.a,null,t.Time_Max?t.Time_Max.slice(0,10):"Irregular")),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Lat Coverage Begin"),r.a.createElement(Mn.a,null,"".concat(t.Lat_Min,"\xb0"))),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Lat Coverage End"),r.a.createElement(Mn.a,null,"".concat(t.Lat_Max,"\xb0"))),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Lon Coverage Begin"),r.a.createElement(Mn.a,null,"".concat(t.Lon_Min,"\xb0"))),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Lon Coverage End"),r.a.createElement(Mn.a,null,"".concat(t.Lon_Max,"\xb0"))),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Depth Coverage Begin"),r.a.createElement(Mn.a,null,t.Depth_Min?"".concat(t.Depth_Min,"(m)"):"Surface Only")),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Depth Coverage End"),r.a.createElement(Mn.a,null,t.Depth_Max?"".concat(t.Depth_Max,"(m)"):"Surface Only")),t.Variable_Min&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Minimum Value(",t.Unit,")"),r.a.createElement(Mn.a,null,t.Variable_Min)),t.Variable_Max&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Maximum Value(",t.Unit,")"),r.a.createElement(Mn.a,null,t.Variable_Max)),t.Variable_Mean&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Mean Value(",t.Unit,")"),r.a.createElement(Mn.a,null,t.Variable_Mean)),t.Variable_Std&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Standard Deviation(",t.Unit,")"),r.a.createElement(Mn.a,null,t.Variable_Std)))))):""})),fo=function(e){var t;return(t={},Object(m.a)(t,ye.threeMinutes,1),Object(m.a)(t,ye.sixHourly,1),Object(m.a)(t,ye.daily,1),Object(m.a)(t,ye.weekly,7),Object(m.a)(t,ye.monthly,30),Object(m.a)(t,ye.annual,365),Object(m.a)(t,ye.irregular,null),Object(m.a)(t,ye.monthlyClimatology,30),Object(m.a)(t,ye.threeDay,3),Object(m.a)(t,ye.eightDayRunning,8),Object(m.a)(t,ye.eightDays,8),t)[e]},go=function(e){var t=new Date(e),a=t.getUTCFullYear(),n=t.getUTCMonth(),r=t.getUTCDate(),o=new Date;return o.setFullYear(a,n,r),o},Eo=[5,15,25,35,45,55,65,75.005,85.025,95.095,105.31,115.87,127.15,139.74,154.47,172.4,194.735,222.71,257.47,299.93,350.68,409.93,477.47,552.71,634.735,722.4,814.47,909.74,1007.155,1105.905,1205.535,1306.205,1409.15,1517.095,1634.175,1765.135,1914.15,2084.035,2276.225,2491.25,2729.25,2990.25,3274.25,3581.25,3911.25,4264.25,4640.25,5039.25,5461.25,5906.25],xo=[.494024991989,1.54137504101,2.64566898346,3.81949496269,5.07822418213,6.44061422348,7.92956018448,9.5729970932,11.404999733,13.4671401978,15.8100700378,18.4955596924,21.5988197327,25.2114105225,29.4447307587,34.4341506958,40.3440513611,47.3736915588,55.764289856,65.8072662354,77.8538513184,92.3260726929,109.729301453,130.666000366,155.850692749,186.125595093,222.475204468,266.040313721,318.127410889,380.213012695,453.937713623,541.088928223,643.566772461,763.333129883,902.339294434,1062.43994141,1245.29101562,1452.25097656,1684.28405762,1941.89294434,2225.07788086,2533.3359375,2865.70288086,3220.82006836,3597.03198242,3992.48388672,4405.22412109,4833.29101562,5274.78417969,5727.91699219],vo=new Set(["tblPisces_NRT","tblPisces_NRT_Calendar"]),yo=new Set(["tblDarwin_Chl_Climatology","tblDarwin_Ecosystem","tblDarwin_Nutrient","tblDarwin_Nutrient_Climatology","tblDarwin_Ocean_Color","tblDarwin_Phytoplankton","tblDarwin_Plankton_Climatology"]),So={count:function(e,t,a){var n=e.data.Table_Name,r=0;if(vo.has(n))for(var o=0;o<xo.length&&!(xo[o]>a);o++)xo[o]>t&&r++;else if(yo.has(n))for(var s=0;s<Eo.length&&!(Eo[s]>a);s++)Eo[s]>t&&r++;return r},piscesTable:vo,darwinTable:yo,piscesDepths:xo,darwinDepths:Eo},Oo=function(e){var t=0;return e.forEach((function(e){e.subType===ve.heatmap&&t++,e.subType===ve.sparse&&(t++,e.data.variableValues.length>1e4&&(t+=3))})),t},wo={backgroundColor:"transparent"},Co={cruiseTrajectoryRequestSend:H,clearCharts:function(){return{type:"CLEAR_CHARTS"}},csvDownloadRequestSend:Q,snackbarOpen:U},ko=function(e){if(isNaN(new Date(e)).valueOf())return"yyyy-MM-dd";var t=e.getMonth()+1,a=e.getDate();return[e.getFullYear(),t<10?"0"+t:t,a<10?"0"+a:a].join("-")},Ao=r.a.createRef(),_o=r.a.createRef(),jo=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(r)))).componentDidUpdate=function(e,t){if(Ao.current&&Ao.current.resetAfterIndex(0),a.props.children&&a.props.children.length){var n=0,r=!1;a.props.children.forEach((function(e){if(!r){for(var t=37,a=!1,o=0;o<e.props.children.length;o++){if(e.props.children[o].props.isFocused){r=!0,a=!0;break}t+=37.6}n+=a?t:37.6}})),r&&Ao.current.scrollTo(n>150?n-150:0)}},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.children,n=e.getValue;if(!a||!a.length)return"";var o=n(),s=Object(y.a)(o,1)[0],i=35*t.indexOf(s),l=a.map((function(e){return e.props.children.some((function(e){return e.props.isFocused}))?37.6*e.props.children.length+37:37})),c=l.reduce((function(e,t){return e+t}),0),d=c/a.length;return r.a.createElement(Qr.a,{height:c<400?c:400,estimatedItemSize:d,itemCount:a.length,itemSize:function(e){return l[e]},initialScrollOffset:i||0,ref:Ao},(function(e){var t=e.index,n=e.style;return r.a.createElement("div",{style:Object(u.a)({},n)},a[t])}))}}]),t}(n.Component),To=function(e){function t(){return Object(ue.a)(this,t),Object(xn.a)(this,Object(vn.a)(t).apply(this,arguments))}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.children.some((function(e){return e.props.isFocused})),t=this.props.children[0].props.data.data.Sensor;return r.a.createElement(r.a.Fragment,null,r.a.createElement(No,Object.assign({},this.props.headingProps,{headingLabel:this.props.data.label,firstChild:this.props.children[0].props.data,hasFocus:e,sensor:t,tableName:this.props.children[0].props.data.data.Table_Name,selectProps:this.props.selectProps})),r.a.createElement("div",{hidden:!e},this.props.children.map((function(e){return e}))))}}]),t}(n.Component),No=Object(jn.a)((function(e){return{customHeading:{backgroundColor:"rgba(0,0,0,.5)",height:37,"&:hover":{backgroundColor:kn.greenHover},boxShadow:"0px 1px 1px 1px #242424"},icon:{marginRight:"10px",width:"30px"},typography:{width:"650px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}}))((function(e){var t,a=e.classes,n=e.sensor,o=e.selectProps;return t="Satellite"===n?"fa-satellite":"Blend"===n?"fa-laptop":"fa-ship",r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr.a,{button:!0,alignItems:"center",onClick:function(){return _o.current.select.setState({focusedOption:e.hasFocus?null:e.firstChild})},className:a.customHeading},r.a.createElement(Yr.a,{fontSize:"small",color:"inherit",className:"fas ".concat(t," ").concat(a.icon)}),r.a.createElement(Nn.a,{className:a.typography},e.headingLabel.length>70?e.headingLabel.slice(0,67)+"...":e.headingLabel),r.a.createElement(Un.a,{title:"Download Data",placement:"right"},r.a.createElement(fr.a,{color:"inherit",onClick:function(t){o.handleSetDownloadTarget({dataset:e.headingLabel}),t.stopPropagation()}},r.a.createElement(no.a,null))),o.datasets[e.headingLabel]&&r.a.createElement(Un.a,{title:"Dataset Info",placement:"right"},r.a.createElement(fr.a,{color:"inherit",onClick:function(t){window.open(o.datasets[e.headingLabel].Doc_URL),t.stopPropagation()}},r.a.createElement(ro.a,null)))))})),Ro=function(e){return r.a.createElement(Hr.z.DropdownIndicator,e,r.a.createElement(oo.a,null))},Do=function(e){return r.a.createElement(Hr.z.Menu,Object.assign({},e,{className:"react-select-menu-cmap"}))},Io=function(e){return r.a.createElement(Hr.z.Option,Object.assign({},e,{innerProps:Object(u.a)({},e.innerProps,{onMouseMove:function(e){return e.preventDefault()},onMouseOver:function(e){return e.preventDefault()}})}))},Lo=function(e){return""},Mo=function(e){return r.a.createElement(Hr.z.SingleValue,Object.assign({},e,{children:null}),e.data.label)},Po={display:"inline-block",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"15px",marginRight:"32px",width:"calc(60% - 32px)",textAlign:"left"},Fo=Object(u.a)({},Po,{marginRight:"24px",width:"calc(15% - 24px)"}),Uo=Object(u.a)({},Po,{textAlign:"right",marginRight:"0px",width:"25%"}),zo=function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:Po},e.label),r.a.createElement("span",{style:Fo},"Irregular"===e.data.Spatial_Resolution?"Irregular":"Gridded"),r.a.createElement("span",{style:Uo},e.data.Data_Source))},Bo=function(e){return r.a.createElement(Hr.z.ValueContainer,e,r.a.createElement(br.a,{color:"primary",style:{position:"absolute",left:6}}),e.children)},Vo=function(e){function t(e){var a;Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).componentDidUpdate=function(e){e.catalog&&e.catalog.length||!a.props.catalog||!a.props.catalog.length||(a.state.search.addDocuments(a.props.catalog),a.setState({search:a.state.search}))},a.handleOpenControlPanel=function(){a.setState(Object(u.a)({},a.state,{showControlPanel:!0}))},a.handleCloseControlPanel=function(){a.setState(Object(u.a)({},a.state,{showControlPanel:!1}))},a.handleTableStatsDialogClose=function(){a.setState(Object(u.a)({},a.state,{tableStatsDialogIsOpen:!1}))},a.handleTableStatsDialogOpen=function(e){e.stopPropagation(),a.setState(Object(u.a)({},a.state,{tableStatsDialogIsOpen:!0}))},a.getSelectOptionsFromCatalogItems=function(e){var t={};return e.forEach((function(e){1==e.Visualize&&(t[e.Dataset_Name]||(t[e.Dataset_Name]={label:e.Dataset_Name,options:[]}),t[e.Dataset_Name].options.push({value:e.Variable,label:e.Long_Name.length<80?e.Long_Name:e.Long_Name.slice(0,78)+"...",data:e}))})),Object.values(t).sort((function(e,t){return e.label<t.label?-1:1}))},a.estimateCsvSize=function(e){var t=0;return a.props.catalog.forEach((function(a,n){a.Dataset_Name===e&&(t+=parseInt(a.Variable_Count)||0)})),t},a.handleResetSPParams=function(){a.props.resetSPParams(),a.setState(Object(u.a)({},a.state,{searchField:""}))},a.onAutoSuggestChange=function(e,t){"input-change"===t.action&&(a.setState(Object(u.a)({},a.state,{searchField:e})),_o.current.select.setState({focusedOption:-1})),"escape-clear"===t.action&&(a.setState(Object(u.a)({},a.state,{searchField:e})),_o.current.select.setState({focusedOption:-1}))},a.estimateDataSize=function(){var e=a.props,t=e.dt1,n=e.dt2,r=e.lat1,o=e.lat2,s=e.lon1,i=e.lon2,l=e.fields,c=e.depth1,u=e.depth2,d=e.selectedVizType;if(!l)return 0;if(l.data.Spatial_Resolution===he.irregular)return 0;if(d===ve.timeSeries||d===ve.depthProfile)return 0;var p=Date.parse(t),m=(Date.parse(n)-p)/864e5,h=be(l.data.Spatial_Resolution),b=Math.floor(m/fo(l.data.Temporal_Resolution))||1;return(i-s)/h*((o-r)/h)*(So.count(l,c,u)||1)*b},a.checkStartDepth=function(){return a.props.surfaceOnly?"":/^[-+]?[0-9]*\.?[0-9]+$/.test(a.props.depth1)?parseFloat(a.props.depth1)<0?mo.depth.negative:parseFloat(a.props.depth1)>parseFloat(a.props.depth2)?mo.depth.depthOneIsLower:parseFloat(a.props.depth1)>parseFloat(a.props.fields.data.Depth_Max)?mo.depth.depthOneOutOfBounds.replace("$",parseFloat(a.props.fields.data.Depth_Max).toFixed(2)):"":mo.generic.invalid},a.checkEndDepth=function(){return a.props.surfaceOnly?"":/^[-+]?[0-9]*\.?[0-9]+$/.test(a.props.depth2)?parseFloat(a.props.depth2)<0?mo.depth.negative:parseFloat(a.props.depth1)>parseFloat(a.props.depth2)?mo.depth.depthOneIsLower:parseFloat(a.props.depth2)<parseFloat(a.props.fields.data.Depth_Min)?mo.depth.depthTwoOutOfBounds.replace("$",parseFloat(a.props.fields.data.Depth_Min).toFixed(2)):"":mo.generic.invalid},a.checkStartDateValid=function(){if(isNaN(new Date(a.props.dt1)).valueOf()||!a.props.dt1)return"Start date is invalid"},a.checkEndDateValid=function(){if(isNaN(new Date(a.props.dt2)).valueOf()||!a.props.dt1)return"End date is invalid"},a.checkStartDate=function(){return a.props.dt1>a.props.dt2?mo.date.dateOneIsLater:a.props.dt1>a.props.fields.data.Time_Max?mo.date.dateOneOutOfBounds.replace("$",a.props.fields.data.Time_Max):""},a.checkEndDate=function(){return a.props.dt2<a.props.fields.data.Time_Min?mo.date.dateTwoOutOfBounds.replace("$",a.props.fields.data.Time_Min):""},a.checkStartLat=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(a.props.lat1)?parseFloat(a.props.lat1)<-90||parseFloat(a.props.lat1)>90?mo.generic.invalid:parseFloat(a.props.lat1)>parseFloat(a.props.lat2)?mo.lat.latOneIsHigher:parseFloat(a.props.lat1)>parseFloat(a.props.fields.data.Lat_Max)?mo.lat.latOneOutOfBounds.replace("$",a.props.fields.data.Lat_Max):"":mo.generic.invalid},a.checkEndLat=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(a.props.lat2)?parseFloat(a.props.lat2)<-90||parseFloat(a.props.lat2)>90?mo.generic.invalid:parseFloat(a.props.lat2)<parseFloat(a.props.fields.data.Lat_Min)?mo.lat.latTwoOutOfBounds.replace("$",a.props.fields.data.Lat_Min):"":mo.generic.invalid},a.checkStartLon=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(a.props.lon1)?parseFloat(a.props.lon1)<-180||parseFloat(a.props.lon1)>180?mo.generic.invalid:a.props.lon1>a.props.lon2?"":parseFloat(a.props.lon1)>parseFloat(a.props.fields.data.Lon_Max)?mo.lon.lonOneOutOfBounds.replace("$",a.props.fields.data.Lon_Max):"":mo.generic.invalid},a.checkEndLon=function(){return/^[-+]?[0-9]*\.?[0-9]+$/.test(a.props.lon2)?parseFloat(a.props.lon2)<-180||parseFloat(a.props.lon2)>180?mo.generic.invalid:parseFloat(a.props.lon2)<parseFloat(a.props.fields.data.Lon_Min)?mo.lon.lonTwoOutOfBounds.replace("$",a.props.fields.data.Lon_Max):"":mo.generic.invalid},a.checkHeatmap=function(){return a.props.irregularSpatialResolution?mo.type.dataIsIrregular.replace("$","Heatmap"):""},a.checkContour=function(){return a.props.irregularSpatialResolution?mo.type.dataIsIrregular.replace("$","Contour"):""},a.checkSection=function(){return a.props.surfaceOnly?mo.type.surfaceOnlyDataset.replace("$",a.props.fields.value):a.props.irregularSpatialResolution?mo.type.dataIsIrregular.replace("$","Section Map"):a.props.depth1===a.props.depth2?mo.type.depthRangeRequired.replace("$","Section Map"):""},a.checkHistogram=function(){return""},a.checkTimeSeries=function(){return a.props.irregularSpatialResolution?mo.type.dataIsIrregular.replace("$","Time Series"):a.props.dt1===a.props.dt2?mo.type.dateRangeRequired.replace("$","Time Series"):""},a.checkDepthProfile=function(){return a.props.surfaceOnly?mo.type.surfaceOnlyDataset.replace("$",a.props.fields.value):a.props.depth1===a.props.depth2?mo.type.depthRangeRequired.replace("$","Depth Profile"):""},a.checkSparseMap=function(){return a.props.irregularSpatialResolution?"":mo.type.irregularOnly},a.checkGeneralWarn=function(e){return a.props.selectedVizType&&e>12e5?mo.generic.dataSizeWarning:""},a.checkGeneralPrevent=function(e){var t=Oo(a.props.charts);if(a.props.selectedVizType===ve.heatmap&&t>14)return mo.type.webGLContextLimit;if(a.props.selectedVizType===ve.sparse&&t>11)return mo.type.webGLContextLimit;if(a.props.selectedVizType===ve.heatmap&&16-t-(So.count(a.props.fields,a.props.depth1,a.props.depth2)||1)<1)return"Too many distinct depths to render heatmap. Please reduce depth range or select section map.";return a.props.selectedVizType!==ve.histogram&&a.props.selectedVizType!==ve.heatmap&&e>12e5||e>6e6?mo.generic.dataSizePrevent:a.props.fields?a.props.selectedVizType?"":mo.generic.vizTypeMissing:mo.generic.variableMissing},a.handleShowChartsAndResize=function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),30),a.props.handleShowCharts()},a.handleUpdateFields=function(e,t){a.props.updateFields(e),a.setState(Object(u.a)({},a.state,{searchField:"",lastSelectedFieldId:e?e.data.ID:a.state.lastSelectedFieldId}))};var n=new qr.Search("ID");return n.indexStrategy=new qr.AllSubstringsIndexStrategy,n.searchIndex=new qr.UnorderedSearchIndex,n.addIndex("Variable"),n.addIndex("Unit"),n.addIndex("Make"),n.addIndex("Sensor"),n.addIndex("Data_Source"),n.addIndex("Process_Level"),n.addIndex("Long_Name"),n.addIndex("Keywords"),n.addIndex("Table_Name"),n.addIndex("Dataset_Name"),n.addIndex("Study_Domain"),n.addIndex("Spatial_Resolution"),n.addIndex("Temporal_Resolution"),e.catalog&&n.addDocuments(e.catalog),a.state={tableStatsDialogIsOpen:!1,search:n,searchField:"",showControlPanel:!0,lastSelectedFieldId:null},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e,t,a=this,n=this.state,o=n.search,s=n.searchField,i=n.showControlPanel,l=this.props,c=l.classes,p=l.fields,m=l.depth1,h=l.depth2,b=l.dt1,f=l.dt2,g=l.lat1,E=l.lat2,x=l.lon1,v=l.lon2,S=l.selectedVizType,O=l.catalog,w=l.catalogRequestState,C=l.showCharts,k=l.handleShowGlobe,A=l.handleChange,_=l.handleLatLonChange,j=l.datasets,T=s&&O?this.getSelectOptionsFromCatalogItems(o.search(s)):O?this.getSelectOptionsFromCatalogItems(O):[],N=this.estimateDataSize(),R=p&&go(p.data.Time_Min).setHours(0,0,0,0),D=p&&go(p.data.Time_Max).setHours(0,0,0,0),I=b.setHours(0,0,0,0),L=f.setHours(0,0,0,0),M=p?R:go("1900-01-01").setHours(0,0,0,0),P=p&&L<R?"End cannot be before dataset start date":"";e=p&&D<L?I>(t=D)?"Start cannot be after dataset end date":"":I>(t=L)?"Start cannot be after end":"";var F=p?[this.checkStartDepth(),this.checkEndDepth(),this.checkStartLat(),this.checkEndLat(),this.checkStartLon(),this.checkEndLon(),this.checkHeatmap(),this.checkContour(),this.checkSection(),this.checkHistogram(),this.checkTimeSeries(),this.checkDepthProfile(),this.checkSparseMap(),this.checkGeneralWarn(N),this.checkGeneralPrevent(N),this.checkStartDateValid(),this.checkEndDateValid()]:Array(16).fill(""),U=Object(y.a)(F,17),z=U[0],B=U[1],V=U[2],G=U[3],H=U[4],W=U[5],q=U[6],Q=U[7],K=U[8],Y=U[9],$=U[10],Z=U[11],J=U[12],X=U[13],ee=[z,B,V,G,H,W,U[14],P,e,U[15],U[16]],te=0;(ee[0]||ee[1])&&te++,(ee[2]||ee[3])&&te++,(ee[4]||ee[5])&&te++,(ee[7]||ee[9])&&te++,(ee[8]||ee[10])&&te++;var ae=te>0?"drawerPaperError"+te:"",ne=function(){for(var e=0;e<ee.length;e++)if(ee[e])return ee[e];return!1}(),re=ne||(X||"");return r.a.createElement("div",null,r.a.createElement(bo,{open:this.state.tableStatsDialogIsOpen,onClose:this.handleTableStatsDialogClose,data:p&&p.data}),i?r.a.createElement(fr.a,{className:c.closePanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:this.handleCloseControlPanel},r.a.createElement(so.a,null)):r.a.createElement(fr.a,{className:c.openPanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:this.handleOpenControlPanel},r.a.createElement(Er.a,null)),r.a.createElement($r.a,{className:c.drawer,variant:"persistent",open:i,classes:{paper:"".concat(c.drawerPaper," ").concat(c[ae])},anchor:"left"},r.a.createElement(Zr.a,null,r.a.createElement(Un.a,{title:"Show Globe",placement:"top"},r.a.createElement(fr.a,{className:"".concat(c.groupedButtons," ").concat(!C&&c.depressed),onClick:k,color:"inherit"},r.a.createElement(io.a,null))),r.a.createElement(Un.a,{title:"Show Charts",placement:"top"},r.a.createElement(fr.a,{className:"".concat(c.groupedButtons," ").concat(C&&c.depressed),onClick:this.handleShowChartsAndResize,color:"inherit"},r.a.createElement(lo.a,null)))),r.a.createElement(Fn.a,{container:!0},r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(Un.a,{title:"Clear Charts",placement:"bottom"},r.a.createElement(fr.a,{color:"inherit",onClick:this.props.clearCharts,className:c.clearChartsButton},r.a.createElement(co.a,null)))),r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(Un.a,{title:"Reset Parameters",placement:"right"},r.a.createElement(fr.a,{color:"inherit",onClick:this.handleResetSPParams,className:c.resetSPParamsButton},r.a.createElement(uo.a,null))))),r.a.createElement("form",null,r.a.createElement(Fn.a,{container:!0},r.a.createElement(Fn.a,{item:!0,xs:10},r.a.createElement(Wr.a,{formatOptionLabel:zo,handleSetDownloadTarget:this.props.handleSetDownloadTarget,handleTableStatsDialogOpen:this.handleTableStatsDialogOpen,isLoading:w===d.inProgress,onAutoSuggestChange:this.onAutoSuggestChange,datasets:j,components:{IndicatorSeparator:"",DropdownIndicator:Ro,GroupHeading:Lo,Group:To,Option:Io,MenuList:jo,SingleValue:Mo,Menu:Do,ValueContainer:Bo},lastSelectedFieldId:this.state.lastSelectedFieldId,escapeClearsValue:!0,ref:_o,onInputChange:this.onAutoSuggestChange,filterOption:null,className:c.variableSelect,isClearable:!0,inputValue:this.state.searchField,name:"fields",label:"Variables",options:T,onChange:this.handleUpdateFields,value:p,placeholder:"Search Catalog",styles:{menu:function(e){return Object(u.a)({},e,{zIndex:1300,width:"980px",maxWidth:"90vw",borderRadius:"4px",boxShadow:"2px 2px 2px 2px #242424",overflow:"hidden",backgroundColor:"rgba(0,0,0,.5)",backdropFilter:"blur(5px)"})},valueContainer:function(e){return Object(u.a)({},e,{padding:"0 0 0 34px",fontWeight:100})},input:function(e){return Object(u.a)({},e,{color:"white",fontFamily:'"Lato", sans-serif'})},control:function(e){return Object(u.a)({},e,{backgroundColor:kn.backgroundGray,border:"none",borderBottom:"1px solid #333333",borderRadius:0,"&:hover":{borderColor:"white"},"&:focus-within":{borderColor:kn.primary},height:"56px"})},placeholder:function(e){return Object(u.a)({},e,{fontFamily:'"Lato", sans-serif',color:kn.primary,fontSize:"14px",fontWeight:300})},noOptionsMessage:function(e){return Object(u.a)({},e,{fontFamily:'"Lato", sans-serif',color:kn.primary,backgroundColor:kn.backgroundGray})},option:function(e,t){t.data;var a=t.isFocused;return Object(u.a)({},e,{fontWeight:400,fontSize:"16px",backgroundColor:"transparent",color:a?kn.primary:"white","&:hover":{backgroundColor:kn.greenHover}})},singleValue:function(e,t){return Object(u.a)({},e,{color:"white",fontWeight:400,zIndex:1290})}},theme:function(e){return Object(u.a)({},e,{colors:Object(u.a)({},e.colors)})}})),r.a.createElement(Fn.a,{item:!0,xs:2,className:c.tableStatsButton},p?r.a.createElement(Un.a,{placement:"right",title:"View Variable Summary Statistics"},r.a.createElement(fr.a,{size:"small",onClick:this.handleTableStatsDialogOpen,disabled:!p},r.a.createElement(po.a,null))):r.a.createElement(fr.a,{size:"small",onClick:this.handleTableStatsDialogOpen,disabled:!p},r.a.createElement(po.a,null))),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(ao.a,{className:c.datePicker,placeholder:ko(b),id:"startDate",label:"Start Date",name:"dt1",format:"yyyy-MM-dd",maxDate:t,maxDateMessage:e,autoOk:!0,value:b,onChange:this.props.handleStartDateChange,inputVariant:"filled",variant:"inline",KeyboardButtonProps:{className:c.datePickerInputAdornment}})),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(ao.a,{className:c.datePicker,placeholder:ko(f),id:"endDate",label:"End Date",name:"dt2",format:"yyyy-MM-dd",minDate:M,minDateMessage:P,autoOk:!0,value:f,onChange:this.props.handleEndDateChange,inputVariant:"filled",variant:"inline",KeyboardButtonProps:{className:c.datePickerInputAdornment}})),r.a.createElement(Fn.a,{item:!0,xs:6,className:c.formGridItem},r.a.createElement(zn.a,{id:"lat1-input",error:Boolean(V),label:"Start Lat(\xb0)",className:c.textField,value:g,onChange:_,FormHelperTextProps:{className:c.helperText},helperText:V,name:"lat1",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),r.a.createElement(Fn.a,{item:!0,xs:6,className:c.formGridItem},r.a.createElement(zn.a,{id:"lat2-input",error:Boolean(G),label:"End Lat(\xb0)",className:c.textField,value:E,onChange:_,FormHelperTextProps:{className:c.helperText},helperText:G,name:"lat2",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),r.a.createElement(Fn.a,{item:!0,xs:6,className:c.formGridItem},r.a.createElement(zn.a,{id:"lon1-input",error:Boolean(H),label:"Start Lon(\xb0)",className:c.textField,value:x,onChange:_,FormHelperTextProps:{className:c.helperText},helperText:H,name:"lon1",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),r.a.createElement(Fn.a,{item:!0,xs:6,className:c.formGridItem},r.a.createElement(zn.a,{id:"lon2-input",error:Boolean(W),label:"End Lon(\xb0)",className:c.textField,value:v,onChange:_,FormHelperTextProps:{className:c.helperText},helperText:W,name:"lon2",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),r.a.createElement(Fn.a,{item:!0,xs:6,className:c.formGridItem},r.a.createElement(zn.a,{id:"depth1-input",error:Boolean(z),label:"Start Depth(m)",className:c.textField,value:isNaN(Math.floor(1e3*m)/1e3)?m:Math.ceil(1e3*m)/1e3,onChange:A,FormHelperTextProps:{className:c.helperText},helperText:z,name:"depth1",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),r.a.createElement(Fn.a,{item:!0,xs:6,className:c.formGridItem},r.a.createElement(zn.a,{id:"depth2-input",error:Boolean(B),label:"End Depth(m)",className:c.textField,value:isNaN(Math.ceil(1e3*h)/1e3)?h:Math.ceil(1e3*h)/1e3,onChange:A,FormHelperTextProps:{className:c.helperText},helperText:B,name:"depth2",InputProps:{className:c.padLeft},InputLabelProps:{className:c.padLeft}})),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(Jr.a,{variant:"filled",className:c.vizTypeSelectFormControl,disabled:!p},r.a.createElement(Xr.a,{shrink:!0,htmlFor:"vizSelector"},"Type"),r.a.createElement(to.a,{className:c.vizTypeSelectFormControl,style:wo,value:S,variant:"filled",onChange:this.props.handleChange,inputProps:{name:"selectedVizType",id:"vizSelector",variant:"filled"},MenuProps:{MenuListProps:{className:c.vizTypeMenu}}},!q&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.heatmap,title:q},"Heatmap"),!Q&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.contourMap},"Contour Heatmap"),!K&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.sectionMap},"Section Map"),!K&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.contourSectionMap},"Contour Section Map"),!Y&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.histogram},"Histogram"),!$&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.timeSeries},"Time Series"),!Z&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.depthProfile},"Depth Profile"),!J&&r.a.createElement(eo.a,{className:c.vizTypeMenuItem,value:ve.sparse},"Sparse Map")))),r.a.createElement(Un.a,{placement:"right",title:re,className:c.vizButtonTooltip},r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(Bn.a,{className:c.visualizeButton,variant:"contained",onClick:function(){return a.props.onVisualize()},disabled:Boolean(ne)||!p||!S,fullWidth:!0},"Visualize")))))))}}]),t}(r.a.Component),Go=Object(l.b)((function(e,t){return{data:e.data,storedProcedureRequestState:e.storedProcedureRequestState,catalog:e.catalog,catalogRequestState:e.catalogRequestState,cruiseTrajectory:e.cruiseTrajectory,showHelp:e.showHelp,datasets:e.datasets,charts:e.charts}}),Co)(Object(jn.a)((function(e){return{drawer:{width:320,top:32,bottom:"auto",overflow:"visible"},drawerPaper:{width:320,height:"540px",top:"calc(50% - 270px)",borderRadius:"0 4px 4px 0",boxShadow:"2px 2px  2px 2px #242424",border:"none",overflow:"visible",backgroundColor:kn.backgroundGray},drawerPaperError1:{height:"".concat(563,"px")},drawerPaperError2:{height:"".concat(586,"px")},drawerPaperError3:{height:"".concat(609,"px")},drawerPaperError4:{height:"".concat(632,"px")},drawerPaperError5:{height:"".concat(655,"px")},openPanelChevron:{position:"fixed",left:"5px",top:"calc(50% - 8px)",zIndex:1100},closePanelChevron:{position:"fixed",left:325,top:"calc(50% - 8px)",zIndex:1100},groupedButtons:{width:"50%",border:"1px solid #313131",borderRadius:0,backgroundColor:"#3c3c3c"},controlPanelForm:{marginTop:e.spacing(1)},tableStatsButton:{borderRadius:0,paddingTop:"11px",backgroundColor:kn.backgroundGray},formGridItem:{borderLeft:"1px solid #313131",backgroundColor:kn.backgroundGray},vizTypeSelectFormControl:{width:"100%","&:disabled":{backgroundColor:"transparent"}},depressed:{boxShadow:"inset 1px 1px 5px #1c1c1c"},padLeft:{padding:"6px 0 2px 7px"},visualizeButton:{height:"56px",borderRadius:0,backgroundColor:kn.backgroundGray,color:e.palette.primary.main,fontVariant:"normal","&:disabled":{backgroundColor:"transparent"},"&:hover":{backgroundColor:kn.greenHover,color:"white"}},helperText:{color:"yellow"},vizButtonTooltip:{color:"yellow"},datePickerInputAdornment:{padding:0},clearChartsButton:{borderRadius:0,backgroundColor:"#3c3c3c",width:"100%",borderRight:"1px solid #313131"},resetSPParamsButton:{borderRadius:0,backgroundColor:"#3c3c3c",width:"100%"},datePicker:{width:"100%"},vizTypeMenu:{backgroundColor:kn.backgroundGray},vizTypeMenuItem:{"&:hover":{backgroundColor:kn.greenHover}}}}))(Vo)),Ho=a(801),Wo={tableStatsRequestSend:function(e,t){return{type:"ABLE_STATS_REQUEST_SEND",payload:{tableName:e,datasetLongName:t}}},csvDownloadRequestSend:Q},qo=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(r)))).componentDidUpdate=function(){var e=a.props,t=e.downloadTarget,n=e.datasets,r=e.catalog,o=e.tableStatsRequestSend;t&&n&&!n[t.dataset].tableStats&&o(r.find((function(e){return e.Dataset_Name===t.dataset})).Table_Name,t.dataset)},a.handleFullDatasetDownload=function(e){var t="select%20*%20from%20".concat(e),n=a.props.downloadTarget.variable||a.props.downloadTarget.dataset;a.props.csvDownloadRequestSend(t,n,e)},a.handleSubsetDownload=function(e,t,n,r,o,s,i,l,c){var u=a.props.catalog.find((function(e){return e.Dataset_Name===a.props.downloadTarget.dataset})),d=Boolean(u.Temporal_Resolution===ye.monthlyClimatology),p=d?"month":"time",m=d?new Date(t).getMonth()+1:t,h=d?new Date(n).getMonth()+1:n,b="select * from ".concat(e," where ").concat(p," between '").concat(m,"' and '").concat(h,"' and ")+"lat between ".concat(r," and ").concat(o," and ")+"lon between ".concat(s," and ").concat(i);Boolean(u.Depth_Max)&&(b+="and depth between ".concat(l," and ").concat(c));var f=a.props.downloadTarget.variable||a.props.downloadTarget.dataset;a.props.csvDownloadRequestSend(b,f,e)},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.datasets,o=t.downloadTarget,s=t.lat1,i=t.lat2,l=t.lon1,c=t.lon2,u=t.dt1,d=t.dt2,p=t.depth1,m=t.depth2,h=t.catalog;if(!o||!n||!h)return"";var b=n[o.dataset].tableStats;if(!b)return"";var f=h.find((function(e){return e.Dataset_Name===o.dataset})),g=f.Lat_Min,E=f.Lat_Max,x=f.Lon_Min,v=f.Lon_Max,y=f.Time_Min,S=f.Time_Max,O=f.Depth_Min,w=f.Depth_Max,C=(f.Table_Name,parseFloat(g)),k=parseFloat(E),A=parseFloat(x),_=parseFloat(v),j=Date.parse(y),T=Date.parse(S),N=s<C?C:s>k?k:s,R=i<C?C:i>k?k:i,D=l<A?A:l>_?_:l,I=c<A?A:c>_?_:c,L=u<j?j:u>T?T:u,M=d<j?j:d>T?T:d;if(w)var P=parseFloat(O),F=parseFloat(w),U=p<P?P:p>F?F:p,z=m<P?P:m>F?F:m;var B,V=f.Table_Name,G=b.lat.count*((n[o.dataset].Variables&&n[o.dataset].Variables.split(",").length)+(b.depth?1:0)+3),H=G<2e7;if(f.Temporal_Resolution===ye.monthlyClimatology){B=(new Date(M).getMonth()-new Date(L).getMonth()+1)/12}else{var W=(T-j)/864e5||1,q=(M-L)/864e5||1;B=W>q?q/W:1}var Q=k-C||1,K=R-N||1,Y=Q>K?K/Q:1,$=_-A||1,Z=I>D?I-D||1:I+360-D||1,J=$>Z?Z/$:1,X=1;if(f.Depth_Max)if(So.piscesTable.has(f.Table_Name))X=So.count({data:f},U,z)/So.piscesDepths.length||1;else if(So.darwinTable.has(f.Table_Name)){X=So.count({data:f},U,z)/So.darwinDepths.length||1}else{var ee=F-P||1,te=z-U||1;X=te>ee?1:te/ee}var ae=Math.floor(G*B*Y*J*X),ne=ae<=2e7,re=new Date(L).toISOString().slice(0,10),oe=new Date(M).toISOString().slice(0,10),se=f.Temporal_Resolution===ye.monthlyClimatology?"Monthly":new Date(j).toISOString().slice(0,10),ie=f.Temporal_Resolution===ye.monthlyClimatology?"Monthly":new Date(T).toISOString().slice(0,10);return r.a.createElement(r.a.Fragment,null,r.a.createElement(rr.a,{PaperProps:{className:a.dialogPaper},open:Boolean(o),onClose:function(){return e.props.handleSetDownloadTarget(null)},maxWidth:!1},r.a.createElement(or.a,null,"Downloading ",o.variable&&"".concat(o.variable," from ")," ",o.dataset),r.a.createElement(sr.a,null,H?"The full dataset is available for download.":"The full dataset is too large for download."),r.a.createElement(sr.a,null,r.a.createElement(Nn.a,null,ne?"The described subset is available for download":"The described subset contains approximately ".concat(ae," data points. Maximum download size is 20000000. Please reduce subset size.")),r.a.createElement(Dn.a,{size:"small"},r.a.createElement(In.a,null,r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Parameter"),r.a.createElement(Mn.a,null,"Subset Start"),r.a.createElement(Mn.a,null,"Subset End"),r.a.createElement(Mn.a,null,"Dataset Min"),r.a.createElement(Mn.a,null,"Dataset Max"))),r.a.createElement(Pn.a,null,r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Time"),r.a.createElement(Mn.a,null,re),r.a.createElement(Mn.a,null,oe),r.a.createElement(Mn.a,null,se),r.a.createElement(Mn.a,null,ie)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Latitude[","\xb0","]"),r.a.createElement(Mn.a,null,N),r.a.createElement(Mn.a,null,R),r.a.createElement(Mn.a,null,C),r.a.createElement(Mn.a,null,k)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Longitude[","\xb0","]"),r.a.createElement(Mn.a,null,D),r.a.createElement(Mn.a,null,I),r.a.createElement(Mn.a,null,A),r.a.createElement(Mn.a,null,_)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,null,"Depth[m]"),r.a.createElement(Mn.a,null,isNaN(U)?"NA":U),r.a.createElement(Mn.a,null,isNaN(z)?"NA":z),r.a.createElement(Mn.a,null,isNaN(P)?"NA":P),r.a.createElement(Mn.a,null,isNaN(F)?"NA":F)))),r.a.createElement(Nn.a,{className:a.tableFooter},"*Subset start and end values may automatically adjust to fit dataset boundaries.")),r.a.createElement(Ho.a,null,r.a.createElement(Bn.a,{onClick:function(){return e.props.handleSetDownloadTarget(null)}},"Cancel"),ne&&r.a.createElement(Bn.a,{onClick:function(){return e.handleSubsetDownload(V,re,oe,N,R,D,I,U,z)}},"Download Subset"),H&&r.a.createElement(Bn.a,{onClick:function(){return e.handleFullDatasetDownload(V)}},"Download Full Dataset"))))}}]),t}(n.Component),Qo=Object(l.b)((function(e,t){return{datasets:e.datasets,catalog:e.catalog}}),Wo)(Object(jn.a)((function(e){return{tableFooter:{fontSize:"11px",margin:"5px 0px 0px 10px"},table:{marginTop:"9px"},dialogPaper:{backgroundColor:kn.backgroundGray}}}))(qo)),Ko=a(412),Yo=a(65),$o=a.n(Yo),Zo=a(811),Jo=[null,"January","February","March","April","May","June","July","August","September","October","November","December"],Xo=function(e,t,a){return a?Jo[parseInt(e)]:t?e.slice(0,10)+" "+e.slice(11,16):e.slice(0,10)},es={layout:{font:{color:"#ffffff"},paper_bgcolor:kn.backgroundGray,autosize:!0},config:{displaylogo:!1},annotations:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,a=document.documentElement.clientWidth*(t/100)/-2+20;return[{text:"Data Source: ".concat(e.length<35?e:e.slice(0,32)+"..."," -- Provided by Simons CMAP"),font:{color:"white",size:10},xref:"paper",yref:"paper",yshift:a,showarrow:!1}]}},ts=a(406),as=a(721),ns=a(730),rs=a(724),os=a(803),ss=a(804),is=a(805),ls=a(806),cs=a(807),us=a(808),ds=a(809),ps=["Default","Greys","YlGnBu","Greens","YlOrRd","Bluered","RdBu","Reds","Blues","Picnic","Rainbow","Portland","Jet","Hot","Blackbody","Earth","Electric","Viridis","Cividis"];var ms=Object(jn.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:kn.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},popover:{width:"470px",height:"120px",paddingTop:e.spacing(3),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2.5),paddingRight:e.spacing(2.5)},iconButton:{boxShadow:"0px 1px 1px 1px #242424"},colorForm:{width:"100%"},lastIcon:{borderTopRightRadius:"10%",borderBottomRightRadius:"10%"},buttonGroup:{display:"block",margin:"0px auto 8px auto",maxWidth:"700px"},depressed:{boxShadow:"inset 1px 1px 5px #262626"},colorscaleMenu:{maxHeight:"400px"},grayBackground:{backgroundColor:kn.backgroundGray}}}))((function(e){var t=e.classes,a=e.onToggleSplitByDate,o=e.splitByDate,s=e.onToggleSplitBySpace,i=e.splitBySpace,l=e.orientation,c=e.downloadCsv,u=e.handleZValueConfirm,d=e.zValues,p=e.markerOptions,m=e.handleMarkerOptionsConfirm,h=e.showErrorBars,b=e.handleSetShowErrorBars,f=e.showLines,g=e.handleSetShowLines,E=Object(n.useState)(null),x=Object(y.a)(E,2),v=x[0],S=x[1],O=r.a.useState(null),w=Object(y.a)(O,2),C=w[0],k=w[1],A=r.a.useState(d&&d[0]),_=Object(y.a)(A,2),j=_[0],T=_[1],N=r.a.useState(d&&d[1]),R=Object(y.a)(N,2),D=R[0],I=R[1],L=Boolean(C),M=L?"zscale-popover":void 0,P=function(){k(null)},F=[j>D?"Min must be higher than max":/^[-+]?[0-9]*\.?[0-9]+$/.test(j)?void 0:"Invalid value",j>D?"Min must be higher than max":/^[-+]?[0-9]*\.?[0-9]+$/.test(D)?void 0:"Invalid value"],U=F[0],z=F[1],B=r.a.useState(null),V=Object(y.a)(B,2),G=V[0],H=V[1],W=r.a.useState(p&&p.opacity),q=Object(y.a)(W,2),Q=q[0],K=q[1],Y=r.a.useState(p&&p.color),$=Object(y.a)(Y,2),Z=$[0],J=$[1],X=r.a.useState(p&&p.size),ee=Object(y.a)(X,2),te=ee[0],ae=ee[1],ne=function(e){var t=e?e.opacity:null,a=Object(n.useRef)();return Object(n.useEffect)((function(){a.current=t})),a.current}(p),re=function(e){var t=e?e.color:null,a=Object(n.useRef)();return Object(n.useEffect)((function(){a.current=t})),a.current}(p),oe=function(e){var t=e?e.size:null,a=Object(n.useRef)();return Object(n.useEffect)((function(){a.current=t})),a.current}(p);Object(n.useEffect)((function(){p&&(p.opacity!==ne&&K(p.opacity),p.color!==re&&J(p.color),p.size!==oe&&ae(p.size))}));var se=Boolean(G),ie=se?"marker-popover":void 0,le=function(){H(null)},ce=[function(){if(Q<.1||Q>1||!/^[-+]?[0-9]*\.?[0-9]+$/.test(Q))return"Opacity should be 0.1 to 1"}(),function(){if(te<1||te>18||!/^[-+]?[0-9]*\.?[0-9]+$/.test(te))return"Size should be 1 to 18"}()],ue=ce[0],de=ce[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zr.a,{className:t.buttonGroup},Boolean(a)&&r.a.createElement(Un.a,{placement:"top",title:"Split By Date"},r.a.createElement(fr.a,{color:"inherit",className:"".concat(t.iconButton," ").concat(o&&t.depressed),onClick:a},r.a.createElement(os.a,null))),Boolean(s)&&r.a.createElement(Un.a,{placement:"top",title:"zonal"===l?"Split by Latitude":"Split by Longitude"},r.a.createElement(fr.a,{color:"inherit",className:"".concat(t.iconButton," ").concat(i&&t.depressed),onClick:s},r.a.createElement(ss.a,null))),r.a.createElement(Un.a,{placement:"top",title:"Download CSV"},r.a.createElement(fr.a,{color:"inherit",onClick:c,className:t.iconButton},r.a.createElement(no.a,null))),Boolean(u)&&r.a.createElement(Un.a,{title:"Change Colorscale Range",placement:"top"},r.a.createElement(fr.a,{color:"inherit",onClick:function(e){return k(e.currentTarget)},className:t.iconButton},r.a.createElement(is.a,null))),Boolean(g)&&r.a.createElement(Un.a,{title:f?"Hide Plot Line":"Show Plot Line",placement:"top"},r.a.createElement(fr.a,{color:"inherit",onClick:function(){return g(!f)},className:"".concat(t.iconButton," ").concat(f&&t.depressed)},r.a.createElement(ls.a,null))),Boolean(b)&&r.a.createElement(Un.a,{title:h?"Hide Error Bars":"Show Error Bars",placement:"top"},r.a.createElement(fr.a,{color:"inherit",onClick:function(){return b(!h)},className:"".concat(t.iconButton," ").concat(h&&t.depressed)},r.a.createElement(cs.a,null))),Boolean(e.handlePaletteChoice)&&r.a.createElement(Un.a,{title:"Change Palette",placement:"top"},r.a.createElement(fr.a,{disabled:!Boolean(e.handlePaletteChoice),color:"inherit",onClick:function(e){S(e.currentTarget)},className:t.iconButton},r.a.createElement(us.a,null))),Boolean(e.handleMarkerOptionsConfirm)&&r.a.createElement(Un.a,{title:"Marker Options",placement:"top"},r.a.createElement(fr.a,{color:"inherit",onClick:function(e){return H(e.currentTarget)},className:"".concat(t.iconButton," ").concat(t.lastIcon)},r.a.createElement(ds.a,null)))),r.a.createElement(ts.a,{id:"simple-menu",anchorEl:v,keepMounted:!0,open:Boolean(v),onClose:function(){return S(null)},className:t.colorscaleMenu,MenuListProps:{className:t.grayBackground}},ps.map((function(t,a){return r.a.createElement(eo.a,{onClick:function(){return function(t){S(null),e.handlePaletteChoice(t)}("Default"===t?"heatmap":t)},key:a},t)}))),r.a.createElement(as.a,{id:M,open:L,anchorEl:C,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{className:t.grayBackground}},r.a.createElement("div",{className:t.popover},r.a.createElement(Fn.a,{container:!0,spacing:1},r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(Jr.a,{variant:"outlined",error:Boolean(U)},r.a.createElement(Xr.a,{htmlFor:"z-min-input"},"Min"),r.a.createElement(ns.a,{id:"z-min-input",value:j,onChange:function(e){return T(e.target.value)},"aria-describedby":"local-zmin-error",labelWidth:36,name:"local-zmin"}),r.a.createElement(rs.a,{id:"local-zmin-error"},U))),r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(Jr.a,{variant:"outlined",error:Boolean(z)},r.a.createElement(Xr.a,{htmlFor:"z-max-input"},"Max"),r.a.createElement(ns.a,{id:"z-max-input",value:D,onChange:function(e){return I(e.target.value)},"aria-describedby":"local-zmax-error",labelWidth:36,name:"local-zmax"}),r.a.createElement(rs.a,{id:"local-zmax-error"},z))),r.a.createElement(Fn.a,{item:!0,xs:7}),r.a.createElement(Fn.a,{item:!0,xs:2},r.a.createElement(Bn.a,{onClick:P},"Cancel")),r.a.createElement(Fn.a,{item:!0,xs:2},r.a.createElement(Bn.a,{color:"primary",onClick:function(){u([j,D]),P()},disabled:Boolean(U||z)},"Confirm")),r.a.createElement(Fn.a,{item:!0,xs:1})))),r.a.createElement(as.a,{id:ie,open:se,anchorEl:G,onClose:le,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{className:t.grayBackground}},r.a.createElement("div",{className:t.popover},r.a.createElement(Fn.a,{container:!0,spacing:1},r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(Jr.a,{variant:"outlined",error:Boolean(ue)},r.a.createElement(Xr.a,{htmlFor:"local-marker-opacity"},"Opacity"),r.a.createElement(ns.a,{id:"local-marker-opacity",value:Q,onChange:function(e){return K(e.target.value)},"aria-describedby":"local-marker-opacity",labelWidth:44,name:"local-marker-opacity"}),r.a.createElement(rs.a,{id:"local-marker-opacity-error"},ue))),r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(Jr.a,{variant:"outlined"},r.a.createElement(Xr.a,{htmlFor:"local-marker-size"},"Size"),r.a.createElement(ns.a,{error:Boolean(de),id:"local-marker-size",value:te,onChange:function(e){return ae(e.target.value)},"aria-describedby":"local-marker-size",labelWidth:36,name:"local-marker-size"}),r.a.createElement(rs.a,{id:"local-marker-size-error"},de))),r.a.createElement(Fn.a,{item:!0,xs:6},r.a.createElement(Jr.a,{variant:"outlined",className:t.colorForm},r.a.createElement(Xr.a,{htmlFor:"z-min-input"},"Color"),r.a.createElement(ns.a,{type:"color",id:"marker-color",value:Z,onChange:function(e){return J(e.target.value)},"aria-describedby":"local-marker-color",labelWidth:44,name:"local-marker-color"}))),r.a.createElement(Fn.a,{item:!0,xs:1}),r.a.createElement(Fn.a,{item:!0,xs:2},r.a.createElement(Bn.a,{onClick:le},"Cancel")),r.a.createElement(Fn.a,{item:!0,xs:2},r.a.createElement(Bn.a,{color:"primary",onClick:function(){m({opacity:Q,color:Z,size:te}),le()},disabled:Boolean(ue||de)},"Confirm")),r.a.createElement(Fn.a,{item:!0,xs:1})))))})),hs={csvFromVizRequestSend:Y},bs=Object(l.b)(null,hs)(Object(jn.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:kn.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},iconButtonWrapper:{display:"inline-block"}}}))((function(e){var t=e.csvFromVizRequestSend,a=e.chart.data,n=a.metadata,o=a.parameters,s=o.dt1===o.dt2?Xo(o.dt1):Xo(o.dt1)+" to "+Xo(o.dt2),i=o.lat1===o.lat2?o.lat1+"\xb0":o.lat1+"\xb0 to "+o.lat2+"\xb0",l=o.lon1===o.lon2?o.lon1+"\xb0":o.lon1+"\xb0 to "+o.lon2+"\xb0",c=a.hasDepth?o.depth1===o.depth2?"".concat(o.depth1,"[m]"):"".concat(o.depth1,"[m] to ").concat(o.depth2,"[m]"):"Surface";return r.a.createElement(r.a.Fragment,null,r.a.createElement(ms,{downloadCsv:function(){t(a,n.Table_Name,n.Variable,n.Long_Name)}}),r.a.createElement($o.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{x:a.variableValues,name:a.parameters.fields,type:"histogram",marker:{color:"#00FFFF"}}],layout:Object(u.a)({},es.layout,{plot_bgcolor:"transparent",title:{text:"".concat(o.fields," [").concat(n.Unit,"]")+"<br>".concat(s,", ")+c+"<br>Lat: ".concat(i,", ")+"Lon: ".concat(l),font:{size:13}},xaxis:{title:"".concat(o.fields," [").concat(n.Unit,"]"),exponentformat:"power",color:"#ffffff"},yaxis:{color:"#ffffff",title:"Frequency"},annotations:es.annotations(n.Distributor)}),config:Object(u.a)({},es.config)}))}))),fs=function(e){var t,a=e.lonMax-e.lonMin;t=a<2?(a/6).toFixed(2):Math.floor(a/6);var n=Array.from(Array(5),(function(a,n){return Math.ceil(e.lonMin+(n+1)*t)})),r=n.map((function(e){return e>180?e-360:e}));return{tickmode:"array",tickvals:n,ticktext:r}},gs=function(e){var t=(e.lonMax-e.lonMin)/(e.latMax-e.latMin),a=40,n=40;return isNaN(t)?a/=1.65:t>1?t<=1.5?n*=t:(n*=1.5,a=t>3?a/1.65:a*(1.8/t)):n=t<.5?.5*n:n*t,[a,n]},Es=a(831),xs={setLoadingMessage:z,snackbarOpen:U,csvFromVizRequestSend:Y},vs=Object(l.b)((function(e,t){return{charts:e.charts}}),xs)(Object(jn.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:kn.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},iconButtonWrapper:{display:"inline-block"}}}))((function(e){var t,a=e.snackbarOpen,o=e.csvFromVizRequestSend,s=e.chart,i=s.data,l=s.subType,c=i.dates,d=i.depths,p=i.extent,m=i.metadata,h=Object(n.useState)(!1),b=Object(y.a)(h,2),f=b[0],g=b[1],E=Object(n.useState)(!0),x=Object(y.a)(E,2),v=x[0],S=x[1],O=Object(n.useState)("heatmap"),w=Object(y.a)(O,2),C=w[0],k=w[1],A=Object(n.useState)([i.zMin,i.zMax]),_=Object(y.a)(A,2),j=_[0],T=_[1],N=Object(y.a)(j,2),R=N[0],D=N[1],I=i.generatePlotData(l,f,v);switch(l){case ve.contourMap:t=function(e,t,a,n,o,s,i){var l=t.parameters,c=t.metadata,d=Array.from(t.depths).map((function(e){return parseFloat(e)})),p=Array.from(t.dates),m=t.parameters.lon1>t.parameters.lon2?fs(t):{},h=gs(t),b=Object(y.a)(h,2),f=b[0],g=b[1];return e.map((function(e,h){var b=p.length<=1?Xo(p[0],t.hasHour,t.isMonthly):a?Xo(n?p[Math.floor(h/d.length)]:p[h],t.hasHour,t.isMonthly):"Averaged Values ".concat(Xo(p[0],t.hasHour,t.isMonthly)," to ").concat(Xo(p[p.length-1],t.hasHour,t.isMonthly)),E=t.hasDepth?1===d.length?d[0]+"[m]":n?a?d[h%d.length].toFixed(2)+"[m]":d[h].toFixed(2)+"[m]":"Averaged Values ".concat(l.depth1," to ").concat(l.depth2):"Surface",x=l.lat1===l.lat2?"".concat(l.lat1,"\xb0"):"".concat(l.lat1,"\xb0 to ").concat(l.lat2,"\xb0"),v=l.lon1===l.lon2?"".concat(l.lon1,"\xb0"):"".concat(l.lon1,"\xb0 to ").concat(l.lon2,"\xb0"),y=e.map((function(e,a){var n=Math.abs(e),r=n>.01&&n<1e3?".2f":".2e";return null===e?"Lat: ".concat(Object(Es.a)(".2f")(t.lats[a]),"\xb0")+"<br>"+"Lon: ".concat(t.lons[a]>180?Object(Es.a)(".2f")(t.lons[a]-360):Object(Es.a)(".2f")(t.lons[a]),"\xb0"):"Lat: ".concat(Object(Es.a)(".2f")(t.lats[a]),"\xb0")+"<br>"+"Lon: ".concat(t.lons[a]>180?Object(Es.a)(".2f")(t.lons[a]-360):Object(Es.a)(".2f")(t.lons[a]),"\xb0")+"<br>"+"".concat(t.parameters.fields,": ").concat(Object(Es.a)(r)(e)," [").concat(t.metadata.Unit,"]")}));return r.a.createElement($o.a,{style:{position:"relative",width:"".concat(g,"vw"),height:"".concat(f,"vw"),minWidth:"".concat(10*g,"px"),minHeight:"".concat(10*f,"px"),margin:"0 auto"},useResizeHandler:!0,data:[{zauto:!1,zmin:s,zmax:i,x:t.lons,y:t.lats,z:e,connectgaps:!1,autocolorscale:!1,colorscale:o,hoverinfo:"text",hovertext:y,name:t.parameters.fields,type:"contour",contours:{coloring:o,showlabels:!0,labelfont:{family:"Raleway",size:12,color:"white"},labelformat:t.zMin>1&&t.zMin<1e3?".2f":".2e"},colorbar:{title:{text:"[".concat(t.metadata.Unit,"]")},exponentformat:"power"}}],config:Object(u.a)({},es.config),key:h,layout:Object(u.a)({},es.layout,{title:{text:"".concat(l.fields," [").concat(c.Unit,"]")+"<br>".concat(b,", ")+"".concat(E," <br>")+"Lat: ".concat(x,", ")+"Lon: ".concat(v),font:{size:13}},xaxis:Object(u.a)({title:"Longitude",color:"#ffffff"},m),yaxis:{title:"Latitude",color:"#ffffff"},annotations:es.annotations(t.metadata.Distributor,f)})})}))}(I,i,f,v,C,R,D);break;case ve.heatmap:t=function(e,t,a,n,o,s,i){var l=t.parameters,c=t.metadata,d=Array.from(t.depths).map((function(e){return parseFloat(e)})),p=Array.from(t.dates),m=t.parameters.lon1>t.parameters.lon2?fs(t):{},h=gs(t),b=Object(y.a)(h,2),f=b[0],g=b[1];return e.map((function(e,h){var b=p.length<=1?Xo(p[0],t.hasHour,t.isMonthly):a?Xo(n?p[Math.floor(h/d.length)]:p[h],t.hasHour,t.isMonthly):"Averaged Values ".concat(Xo(p[0],t.hasHour,t.isMonthly)," to ").concat(Xo(p[p.length-1],t.hasHour,t.isMonthly)),E=t.hasDepth?1===d.length?d[0]+"[m]":n?a?d[h%d.length].toFixed(2)+"[m]":d[h].toFixed(2)+"[m]":"Averaged Values ".concat(l.depth1," to ").concat(l.depth2):"Surface",x=l.lat1===l.lat2?"".concat(l.lat1,"\xb0"):"".concat(l.lat1,"\xb0 to ").concat(l.lat2,"\xb0"),v=l.lon1===l.lon2?"".concat(l.lon1,"\xb0"):"".concat(l.lon1,"\xb0 to ").concat(l.lon2,"\xb0"),y=e.map((function(e,a){var n=Math.abs(e),r=n>.01&&n<1e3?".2f":".2e";return null===e||isNaN(e)?"Lat: ".concat(Object(Es.a)(".2f")(t.lats[a]),"\xb0")+"<br>"+"Lon: ".concat(t.lons[a]>180?Object(Es.a)(".2f")(t.lons[a]-360):Object(Es.a)(".2f")(t.lons[a]),"\xb0"):"Lat: ".concat(Object(Es.a)(".2f")(t.lats[a]),"\xb0")+"<br>"+"Lon: ".concat(t.lons[a]>180?Object(Es.a)(".2f")(t.lons[a]-360):Object(Es.a)(".2f")(t.lons[a]),"\xb0")+"<br>"+"".concat(t.parameters.fields,": ").concat(Object(Es.a)(r)(e)," [").concat(t.metadata.Unit,"]")}));return r.a.createElement($o.a,{style:{position:"relative",width:"".concat(g,"vw"),height:"".concat(f,"vw"),minWidth:"".concat(10*g,"px"),minHeight:"".concat(10*f,"px")},useResizeHandler:!0,data:[{zauto:!1,zmin:s,zmax:i,zsmooth:e.length<2e4?"fast":"false",x:t.lons,y:t.lats,z:e,connectgaps:!1,name:t.parameters.fields,type:"heatmap",colorscale:o,autocolorscale:!1,hoverinfo:"text",text:y,colorbar:{title:{text:"[".concat(t.metadata.Unit,"]")},exponentformat:"power"}}],key:h,config:Object(u.a)({},es.config),layout:Object(u.a)({},es.layout,{title:{text:"".concat(l.fields," [").concat(c.Unit,"]")+"<br>".concat(b,", ")+"".concat(E," <br>")+"Lat: ".concat(x,", ")+"Lon: ".concat(v),font:{size:13}},xaxis:Object(u.a)({title:"Longitude[\xb0]",color:"#ffffff",exponentformat:"power"},m),yaxis:{title:"Latitude[\xb0]",color:"#ffffff",exponentformat:"power"},annotations:es.annotations(t.metadata.Distributor,f)})})}))}(I,i,f,v,C,R,D);break;case ve.histogram:return r.a.createElement(bs,{chart:{data:i}});default:t=""}return r.a.createElement(r.a.Fragment,null,r.a.createElement(ms,{handlePaletteChoice:l!==ve.histogram&&function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),k(t)}),100)},onToggleSplitByDepth:1===d.size?null:function(){e.setLoadingMessage("Processing Data"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),S(!v)}),100)},onToggleSplitByDate:1===c.size?null:function(){var t=d?d.size:1;if(l===ve.heatmap){var n=15-Oo(e.charts);if(!f&&t*c.size>n)return void a("Unable to split. Rendering limit exceeded.")}l===ve.contourMap&&!f&&t*c.size>20?a("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Processing Data"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),g(!f)}),100))},splitByDepth:v,splitByDate:f,handleZValueConfirm:l!==ve.histogram&&function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),T(t)}),100)},zValues:l!==ve.histogram&&j,extent:l!==ve.histogram&&p,downloadCsv:function(){o(i,m.Table_Name,m.Variable,m.Long_Name)}}),t)}))),ys={setLoadingMessage:z,csvFromVizRequestSend:Y},Ss=Object(l.b)(null,ys)(Object(jn.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:kn.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){var t=e.csvFromVizRequestSend,a=e.chart.data,n=a.stds,o=a.variableValues,s=a.dates,i=a.parameters,l=a.metadata,c=r.a.useState({opacity:.2,color:"#ff1493",size:12}),d=Object(y.a)(c,2),p=d[0],m=d[1],h=r.a.useState(!0),b=Object(y.a)(h,2),f=b[0],g=b[1],E=r.a.useState(!!(o&&o.length<=40)),x=Object(y.a)(E,2),v=x[0],S=x[1],O=o.map((function(e,t){return"Time: ".concat(s[t].slice(0,10),"<br>").concat(i.fields,": ").concat(Object(Es.a)(".2e")(e)," \xb1 ").concat(Object(Es.a)(".2e")(n[t])," [").concat(l.Unit,"]")})),w=i.dt1===i.dt2?Xo(s[0],a.hasHour,a.isMonthly):Xo(s[0],a.hasHour,a.isMonthly)+" to "+Xo(s[s.length-1],a.hasHour,a.isMonthly),C=i.lat1===i.lat2?i.lat1+"\xb0":i.lat1+"\xb0 to "+i.lat2+"\xb0",k=i.lon1===i.lon2?i.lon1+"\xb0":i.lon1+"\xb0 to "+i.lon2+"\xb0",A=0===i.depth2?"Surface":i.depth1===i.depth2?"".concat(i.depth1,"[m]"):"".concat(i.depth1,"[m] to ").concat(i.depth2,"[m]"),_=a.isMonthly?s.map((function(e){return Jo[parseInt(e)]})):s;return r.a.createElement("div",null,r.a.createElement(ms,{downloadCsv:function(){t(a,l.Table_Name,l.Variable,l.Long_Name)},handleMarkerOptionsConfirm:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),m(t)}),50)},markerOptions:p,showErrorBars:v,handleSetShowErrorBars:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),S(t)}),50)},showLines:f,handleSetShowLines:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),g(t)}),50)}}),r.a.createElement($o.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{mode:f?"lines+markers":"markers",x:_,y:o,error_y:{type:"data",array:n,opacity:.3,color:v?"#f2f2f2":"transparent",visible:!0},name:i.fields,type:"scatter",line:{color:p.color},marker:{opacity:p.opacity,size:p.size,color:p.color},hoverinfo:"text",hovertext:O}],config:Object(u.a)({},es.config),layout:Object(u.a)({},es.layout,{plot_bgcolor:"transparent",title:{text:"".concat(i.fields," [").concat(l.Unit,"]")+"<br>".concat(w,", ")+A+"<br>Lat: ".concat(C,", ")+"Lon: ".concat(k),font:{size:13}},xaxis:{title:a.isMonthy?"Month":"Time",color:"#ffffff",exponentformat:"power"},yaxis:{title:"".concat(i.fields,"[").concat(l.Unit,"]"),color:"#ffffff",exponentformat:"power"},annotations:es.annotations(l.Distributor)})}))}))),Os={setLoadingMessage:z,csvFromVizRequestSend:Y},ws=Object(l.b)(null,Os)(Object(jn.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:kn.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){e.setLoadingMessage;var t=e.csvFromVizRequestSend,a=e.chart.data,n=a.stds,o=a.variableValues,s=a.depths,i=a.parameters,l=a.metadata,c=r.a.useState(!0),d=Object(y.a)(c,2),p=d[0],m=d[1],h=r.a.useState(!!(o&&o.length<=40)),b=Object(y.a)(h,2),f=b[0],g=b[1],E=a,x=r.a.useState({opacity:.2,color:"#ff1493",size:12}),v=Object(y.a)(x,2),S=v[0],O=v[1],w=o.map((function(e,t){return"Depth: ".concat(Object(Es.a)(".2f")(s[t])," [m] <br>").concat(i.fields,": ").concat(Object(Es.a)(".2e")(e)," \xb1 ").concat(Object(Es.a)(".2e")(n[t])," [").concat(l.Unit,"]")})),C=E.isMonthly?new Date(i.dt1).getMonth()+1:i.dt1,k=E.isMonthly?new Date(i.dt2).getMonth()+1:i.dt2,A=C===k?Xo(C,E.hasHour,E.isMonthly):Xo(C,E.hasHour,E.isMonthly)+" to "+Xo(k,E.hasHour,E.isMonthly);return console.log(a),r.a.createElement("div",null,r.a.createElement(ms,{downloadCsv:function(){t(a,l.Table_Name,l.Variable,l.Long_Name)},handleMarkerOptionsConfirm:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),O(t)}),100)},markerOptions:S,showErrorBars:f,handleSetShowErrorBars:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),g(t)}),50)},showLines:p,handleSetShowLines:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),m(t)}),50)}}),r.a.createElement($o.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{mode:p?"lines+markers":"markers",y:s,x:o,error_x:{type:"data",array:n,opacity:.3,color:f?"#f2f2f2":"transparent",visible:!0},name:i.fields,type:"scatter",marker:{line:{color:S.color},opacity:S.opacity,size:S.size,color:S.color},hoverinfo:"text",hovertext:w}],config:Object(u.a)({},es.config),layout:Object(u.a)({},es.layout,{plot_bgcolor:"transparent",title:{text:"".concat(i.fields," [").concat(l.Unit,"]")+"<br>".concat(A,", ")+"".concat(i.depth1,"[m] to ").concat(i.depth2,"[m] <br>")+"Lat: ".concat(i.lat1,"\xb0 to ").concat(i.lat2,"\xb0, ")+"Lon: ".concat(i.lon1,"\xb0 to ").concat(i.lon2,"\xb0"),font:{size:13}},yaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power",autorange:"reversed"},xaxis:{title:"".concat(i.fields,"[").concat(l.Unit,"]"),color:"#ffffff",exponentformat:"power"},annotations:es.annotations(l.Distributor)})}))}))),Cs={setLoadingMessage:z,snackbarOpen:U,csvFromVizRequestSend:Y},ks=Object(l.b)(null,Cs)(Object(jn.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:kn.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){var t=e.classes,a=e.snackbarOpen,o=e.csvFromVizRequestSend,s=e.chart.data,i=s.dates,l=s.extent,c=s.lats,d=s.lons,p=s.metadata,m=Object(n.useState)(!1),h=Object(y.a)(m,2),b=h[0],f=h[1],g=Object(n.useState)(!1),E=Object(y.a)(g,2),x=E[0],v=E[1],S=Object(n.useState)(s.orientation),O=Object(y.a)(S,2),w=O[0],C=O[1],k=Object(n.useState)("heatmap"),A=Object(y.a)(k,2),_=A[0],j=A[1],T=Object(n.useState)([s.zMin,s.zMax]),N=Object(y.a)(T,2),R=N[0],D=N[1],I=Object(y.a)(R,2),L=I[0],M=I[1],P="zonal"===w?c:d,F=function(e,t,a,n,o,s,i,l){var c=t.parameters,d=t.metadata,p=Array.from(t.dates),m=Array.from(t.depths),h=Array.from(t.lats),b=Array.from(t.lons),f="zonal"===o?h:b,g="zonal"===o?"Longitude":"Latitude",E=c.lon1>c.lon2&&"zonal"===o?fs(t):{};return e.map((function(e,x){var v=e,y=[],S=[];if("zonal"===o)for(var O=0;O<e.length;O++)y.push(b[Math.floor(O/m.length)]);else for(var w=0;w<e.length;w++)y.push(h[Math.floor(w/m.length)]);for(var C=0;C<e.length;C++)S.push(m[C%m.length]);var k="meridional"===o?"".concat(c.lat1,"\xb0 to ").concat(c.lat2,"\xb0"):n?f[x%f.length]+"\xb0":"Averaged Values ".concat(c.lat1,"\xb0 to ").concat(c.lat2,"\xb0"),A="zonal"===o?"".concat(c.lon1,"\xb0 to ").concat(c.lon2,"\xb0"):n?f[x%f.length]+"\xb0":"Averaged Values ".concat(c.lon1,"\xb0 to ").concat(c.lon2,"\xb0"),_=p.length<2?Xo(p[0],t.hasHour,t.isMonthly):a&&n?Xo(p[Math.floor(x/f.length)],t.hasHour,t.isMonthly):a?Xo(p[x],t.hasHour,t.isMonthly):"Averaged Values "+Xo(p[0],t.hasHour,t.isMonthly)+" to "+Xo(p[p.length-1],t.hasHour,t.isMonthly),j=v.map((function(e,t){if("zonal"===o){var a=e>1&&e<1e3?".2f":".2e";return isNaN(e)?"Depth: ".concat(Object(Es.a)(".2f")(S[t])," [m]")+"<br>"+"Lon: ".concat(Object(Es.a)(".2f")(y[t]>180?y[t]-360:y[t]),"\xb0"):"Depth: ".concat(Object(Es.a)(".2f")(S[t])," [m]")+"<br>"+"Lon: ".concat(Object(Es.a)(".2f")(y[t]>180?y[t]-360:y[t]),"\xb0")+"<br>"+"".concat(c.fields,": ").concat(Object(Es.a)(a)(e)," [").concat(d.Unit,"]")}var n=e>1&&e<1e3?".2f":".2e";return isNaN(e)?"Depth: ".concat(Object(Es.a)(".2f")(S[t])," [m]")+"<br>"+"Lat: ".concat(Object(Es.a)(".2f")(y[t]),"\xb0"):"Depth: ".concat(Object(Es.a)(".2f")(S[t])," [m]")+"<br>"+"Lat: ".concat(Object(Es.a)(".2f")(y[t]),"\xb0")+"<br>"+"".concat(c.fields,": ").concat(Object(Es.a)(n)(e)," [").concat(d.Unit,"]")}));return r.a.createElement($o.a,{style:{position:"relative",width:"60vw",height:"40vw",minWidth:"510px",minHeight:"340px"},useResizeHandler:!0,data:[{zauto:!1,zmin:i,zmax:l,connectgaps:!1,autocolorscale:!1,colorscale:s,zsmooth:e.length<2e4?"best":"fast",x:y,y:S,z:v,name:c.fields,type:t.subType===ve.contourSectionMap?"contour":"heatmap",colorbar:{title:{text:"[".concat(d.Unit,"]")},exponentformat:"power"},contours:{coloring:s,showlabels:!0,labelfont:{family:"Raleway",size:12,color:"white"},labelformat:".2e"},hoverinfo:"text",hovertext:j}],key:x,layout:{font:{color:"#ffffff"},title:{text:"".concat(c.fields," [").concat(d.Unit,"]")+"<br>".concat(_,", ")+"".concat(c.depth1,"[m] to ").concat(c.depth2,"[m] <br>")+"Lat: ".concat(k,", ")+"Lon: ".concat(A),font:{size:13}},xaxis:Object(u.a)({title:"".concat(g,"[\xb0]"),color:"#ffffff",exponentformat:"power"},E),yaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power",autorange:"reversed"},paper_bgcolor:kn.backgroundGray,annotations:es.annotations(d.Distributor)}})}))}(s.generatePlotData(w,b,x),s,b,x,w,_,L,M);return r.a.createElement("div",null,r.a.createElement("div",{className:t.buttonBlock},r.a.createElement(ms,{orientation:w,switchOrientation:function(){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),C("zonal"===w?"meridional":"zonal")}),100)},onToggleSplitBySpace:1===P.size?null:function(){var t=b?i.size:1;!x&&t*P.size>20?a("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),v(!x)}),100))},splitBySpace:x,onToggleSplitByDate:1===i.size?null:function(){var t=x?P.size:1;!b&&t*i.size>20?a("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),f(!b)}),100))},splitByDate:b,handlePaletteChoice:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),j(t)}),100)},handleZValueConfirm:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),D(t)}),100)},zValues:R,extent:l,downloadCsv:function(){o(s,p.Table_Name,p.Variable,p.Long_Name)}})),F)}))),As=a(832),_s=a(810),js=function(e){var t,a=e.xValues,n=e.yValues,o=e.markerOptions,s=e.infoObject,i=e.xTitle,l=e.yTitle,c=e.type,d=s.parameters,p=s.metadata,m=s.hasDepth,h=s.variableValues,b=s.times,f=s.lats,g=s.lons,E=s.depths;switch(c){case"time":t=h.map((function(e,t){var a=e>1&&e<1e3?".2f":".2e",n=b[t].slice(0,20);return n=n.replace("T"," "),"Time: ".concat(n,"<br>").concat(d.fields,": ").concat(Object(Es.a)(a)(e)," [").concat(p.Unit,"]")}));break;case"latitude":t=h.map((function(e,t){var a=e>1&&e<1e3?".2f":".2e";return"Lat: ".concat(f[t].toFixed(2),"<br>").concat(d.fields,": ").concat(Object(Es.a)(a)(e)," [").concat(p.Unit,"]")}));break;case"longitude":t=h.map((function(e,t){var a=e>1&&e<1e3?".2f":".2e";return"Lon: ".concat(g[t].toFixed(2),"<br>").concat(d.fields,": ").concat(Object(Es.a)(a)(e)," [").concat(p.Unit,"]")}));break;case"depth":t=h.map((function(e,t){var a=e>1&&e<1e3?".2f":".2e";return"Depth: ".concat(E[t].toFixed(2),"<br>").concat(d.fields,": ").concat(Object(Es.a)(a)(e)," [").concat(p.Unit,"]")}));break;default:t=h.map((function(e,t){var a=e>1&&e<1e3?".2f":".2e",n=b[t].slice(0,20);return n=n.replace("T"," "),"Time: ".concat(n,"<br>").concat(d.fields,": ").concat(Object(Es.a)(a)(e)," [").concat(p.Unit,"]")}))}var x=d.dt1===d.dt2?Xo(d.dt1):Xo(d.dt1)+" to "+Xo(d.dt2),v=d.lat1===d.lat2?d.lat1+"\xb0":d.lat1+"\xb0 to "+d.lat2+"\xb0",y=d.lon1===d.lon2?d.lon1+"\xb0":d.lon1+"\xb0 to "+d.lon2+"\xb0",S=m?d.depth1===d.depth2?"".concat(d.depth1,"[m]"):"".concat(d.depth1,"[m] to ").concat(d.depth2,"[m]"):"Surface";return r.a.createElement($o.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{x:a,y:n,mode:"markers",name:d.fields,type:h.length>1e4?"scattergl":"scatter",marker:{opacity:o.opacity,size:o.size,color:o.color},hoverinfo:"text",hovertext:t}],config:Object(u.a)({},es.config),layout:Object(u.a)({},es.layout,{plot_bgcolor:"transparent",title:{text:"".concat(d.fields," [").concat(p.Unit,"]")+"<br>".concat(x,", ")+S+"<br>Lat: ".concat(v,", ")+"Lon: ".concat(y),font:{size:13}},xaxis:{title:i,color:"#ffffff",exponentformat:"power"},yaxis:{title:l,color:"#ffffff",exponentformat:"power",autorange:"depth"!==c||"reversed"},annotations:es.annotations(p.Distributor)})})},Ts={setLoadingMessage:z,csvFromVizRequestSend:Y};function Ns(e){return{id:"sparse-tab-".concat(e),"aria-controls":"sparse-tab-".concat(e)}}var Rs,Ds=function(e){var t=e.children,a=e.selectedTab,n=e.index,o=e.controlPanelProps;return r.a.createElement("div",{hidden:a!==n},r.a.createElement(ms,o),t)},Is=Object(l.b)(null,Ts)(Object(jn.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:kn.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},tabs:{marginBottom:e.spacing(2)},tab:{boxShadow:"1px 1px 1px 1px #242424",fontSize:"15px",textTransform:"none",color:e.palette.primary.main}}}))((function(e){var t=e.classes,a=e.csvFromVizRequestSend,o=e.chart.data,s=o.metadata,i=Object(n.useState)("Heatmap"),l=Object(y.a)(i,2),c=l[0],d=l[1],p=Object(n.useState)([o.zMin,o.zMax]),m=Object(y.a)(p,2),h=m[0],b=m[1],f=Object(n.useState)({opacity:.7,color:"#ff1493",size:12}),g=Object(y.a)(f,2),E=g[0],x=g[1],v=Object(n.useState)(0),S=Object(y.a)(v,2),O=S[0],w=S[1],C=function(e,t,a){var n=e.parameters,o=e.metadata,s=n.dt1===n.dt2?Xo(n.dt1):Xo(n.dt1)+" to "+Xo(n.dt2),i=n.lat1===n.lat2?n.lat1+"\xb0":n.lat1+"\xb0 to "+n.lat2+"\xb0",l=n.lon1===n.lon2?n.lon1+"\xb0":n.lon1+"\xb0 to "+n.lon2+"\xb0",c=e.hasDepth?n.depth1===n.depth2?"".concat(n.depth1,"[m]"):"".concat(n.depth1,"[m] to ").concat(n.depth2,"[m]"):"Surface";return r.a.createElement($o.a,{style:{position:"relative",width:"60vw",height:"40vw",minWidth:"510px",minHeight:"340px"},useResizeHandler:!0,data:[{zauto:!1,zmin:a[0],zmax:a[1],lon:e.lons,lat:e.lats,z:e.variableValues,autocolorscale:!1,colorscale:t,radius:6,name:e.parameters.fields,type:"densitymapbox",colorbar:{title:{text:"[".concat(e.metadata.Unit,"]")},exponentformat:"power"}}],layout:Object(u.a)({},es.layout,{title:{text:"".concat(n.fields," [").concat(o.Unit,"]")+"<br>".concat(s,", ")+c+"<br>Lat: ".concat(i,", ")+"Lon: ".concat(l),font:{size:13}},mapbox:{style:"white-bg",layers:[{sourcetype:"raster",source:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],below:"traces"}],center:e.center,zoom:e.zoom},annotations:es.annotations(e.metadata.Distributor)}),config:Object(u.a)({},es.config,{mapboxAccessToken:"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w"})})}(o,c,h),k=function(){a(o,s.Table_Name,s.Variable,s.Long_Name)},A={map:{palette:c,handlePaletteChoice:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),d(t)}),100)},zValues:h,handleZValueConfirm:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),b(t)}),100)},downloadCsv:k},scatter:{downloadCsv:k,markerOptions:E,setMarkerOptions:x,handleMarkerOptionsConfirm:function(t){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),x(t)}),100)}}};return r.a.createElement("div",null,r.a.createElement(As.a,{value:O,onChange:function(e,t){w(t)},"aria-label":"Sparse tabs",centered:!0,indicatorColor:"primary",className:t.tabs},r.a.createElement(_s.a,Object.assign({label:"Map"},Ns(0),{className:t.tab,onClick:function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),30)}})),r.a.createElement(_s.a,Object.assign({label:"By Time"},Ns(1),{className:t.tab})),r.a.createElement(_s.a,Object.assign({label:"By Lat"},Ns(2),{className:t.tab})),r.a.createElement(_s.a,Object.assign({label:"By Lon"},Ns(3),{className:t.tab})),o.hasDepth&&r.a.createElement(_s.a,Object.assign({label:"By Depth"},Ns(4),{className:t.tab}))),r.a.createElement(Ds,{selectedTab:O,index:0,controlPanelProps:A.map},0===O&&C),r.a.createElement(Ds,{selectedTab:O,index:1,controlPanelProps:A.scatter},1===O&&r.a.createElement(js,{xValues:o.times,yValues:o.variableValues,markerOptions:E,infoObject:o,xTitle:"Time",yTitle:"".concat(o.parameters.fields,"[").concat(s.Unit,"]"),type:"time"})),r.a.createElement(Ds,{selectedTab:O,index:2,controlPanelProps:A.scatter},2===O&&r.a.createElement(js,{xValues:o.lats,yValues:o.variableValues,markerOptions:E,infoObject:o,xTitle:"Latitude",yTitle:o.parameters.fields,type:"latitude"})),r.a.createElement(Ds,{selectedTab:O,index:3,controlPanelProps:A.scatter},3===O&&r.a.createElement(js,{xValues:o.lons,yValues:o.variableValues,markerOptions:E,infoObject:o,xTitle:"Longitude",yTitle:o.parameters.fields,type:"longitude"})),o.hasDepth&&r.a.createElement(Ds,{selectedTab:O,index:4,controlPanelProps:A.scatter},4===O&&r.a.createElement(js,{xValues:o.variableValues,yValues:o.depths,markerOptions:E,infoObject:o,xTitle:o.parameters.fields,yTitle:"Depth[m]",type:"depth"})))}))),Ls={deleteChart:function(e){return{type:"DELETE_CHART",payload:{chartIndex:e}}}},Ms=Object(jn.a)({closeChartIcon:{float:"right",marginTop:"-12px",marginRight:"-8px"}})((function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fr.a,{className:t.closeChartIcon,color:"inherit",onClick:function(){return e.handleDeleteChart(e.chartIndex)},disableFocusRipple:!0,disableRipple:!0},r.a.createElement(Zo.a,null)))})),Ps=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(r)))).handleDeleteChart=function(e){a.props.deleteChart(e)},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.charts;return r.a.createElement(r.a.Fragment,null,n.map((function(t,n){switch(t.data.parameters.spName){case Oe.spaceTime:return t.subType===ve.sparse?r.a.createElement("div",{key:t.id},r.a.createElement(Tn.a,{elevation:12,className:a.chartPaper,key:t.id},r.a.createElement(Ms,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),r.a.createElement(Is,{chart:t}))):t.data.metadata.Spatial_Resolution===he.irregular?r.a.createElement("div",{key:t.id},r.a.createElement(Tn.a,{elevation:12,className:a.chartPaper,key:t.id},r.a.createElement(Ms,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),r.a.createElement(bs,{chart:t}))):r.a.createElement("div",{key:t.id},r.a.createElement(Tn.a,{elevation:12,className:a.chartPaper,key:t.id},r.a.createElement(Ms,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),r.a.createElement(vs,{chart:t})));case Oe.timeSeries:return r.a.createElement("div",{key:t.id},r.a.createElement(Tn.a,{elevation:12,className:a.chartPaper,key:t.id},r.a.createElement(Ms,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),r.a.createElement(Ss,{chart:t})));case Oe.depthProfile:return r.a.createElement("div",{key:t.id},r.a.createElement(Tn.a,{elevation:12,className:a.chartPaper,key:t.id},r.a.createElement(Ms,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),r.a.createElement(ws,{chart:t})));case Oe.sectionMap:return r.a.createElement("div",{key:t.id},r.a.createElement(Tn.a,{elevation:12,className:a.chartPaper,key:t.id},r.a.createElement(Ms,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),r.a.createElement(ks,{chart:t})));default:return""}})))}}]),t}(n.Component),Fs=Object(l.b)((function(e,t){return{charts:e.charts}}),Ls)(Object(jn.a)((function(e){return{chartPaper:{backgroundColor:kn.backgroundGray,marginTop:"5vh",marginBottom:"2vh",padding:e.spacing(1),boxShadow:"2px 2px 2px 2px #242424"}}}))(Ps)),Us=a(418),zs={cruiseListRequestSend:W,cruiseTrajectoryRequestSend:H,cruiseTrajectoryClear:function(){return{type:"CRUISE_TRAJECTORY_CLEAR"}}},Bs='"Avenir Next W00","Helvetica Neue",Helvetica,Arial,sans-serif',Vs=function(e){return r.a.createElement(Hr.z.SingleValue,Object.assign({},e,{className:e.className}))},Gs=function(e){return r.a.createElement(Hr.z.Option,Object.assign({},e,{innerProps:Object(u.a)({},e.innerProps,{onMouseMove:function(e){return e.preventDefault()},onMouseOver:function(e){return e.preventDefault()}})}))},Hs=function(e,t){return e.Name<t.Name?-1:1},Ws=function(e){return r.a.createElement(Hr.z.ValueContainer,e,r.a.createElement(br.a,{color:"primary",style:{position:"absolute",left:6}}),e.children)},qs=function(e){function t(e){var a;Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).componentDidMount=function(){a.props.cruiseList&&a.props.cruiseList.length||a.props.cruiseListRequestSend()},a.formatOptionLabel=function(e){return e.data.Name===e.data.Nickname?e.data.Name:"".concat(e.data.Name," - ").concat(e.data.Nickname)},a.getSelectOptionsFromCruiseList=function(e){return e.map((function(e){return{value:e.Name,label:e.Name,data:e}}))||[]},a.handleCruiseSelect=function(e){if(e&&e.data){var t=e.data.ID;a.props.cruiseTrajectoryRequestSend(t)}else a.props.cruiseTrajectoryClear();a.setState(Object(u.a)({},a.state,{selectedCruise:e})),a.props.updateParametersFromCruiseBoundary(e)},a.componentDidUpdate=function(e){e.cruiseList&&e.cruiseList.length||!a.props.cruiseList||!a.props.cruiseList.length||(a.state.search.addDocuments(a.props.cruiseList),a.setState({search:a.state.search}))},a.onAutoSuggestChange=function(e,t){"input-change"===t.action&&a.setState(Object(u.a)({},a.state,{searchField:e})),"set-value"!==t.action&&"menu-close"!==t.action||a.setState(Object(u.a)({},a.state,{searchField:""}))};var n=new qr.Search("ID");n.searchIndex=new qr.UnorderedSearchIndex,n.addIndex("Nickname"),n.addIndex("Name"),n.addIndex("Chief_Name"),n.addIndex("Keywords");try{e.cruiseList&&e.cruiseList.length&&n.addDocuments(e.cruiseList)}catch(r){console.log(r),console.log(e.cruiseList)}return a.state={search:n,searchField:"",selectedCruise:null},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.state,t=e.search,a=e.searchField,n=e.selectedCruise,o=this.props,s=o.classes,i=o.cruiseList,l=a&&i?this.getSelectOptionsFromCruiseList(t.search(a).sort(Hs)):i?this.getSelectOptionsFromCruiseList(i):[];return r.a.createElement("div",{id:"cruise-selector",className:s.outerDiv},r.a.createElement("div",{className:s.blurEffectDiv}),r.a.createElement(Wr.a,{isLoading:this.props.getCruiseListState===d.inProgress,components:{IndicatorSeparator:"",Option:Gs,SingleValue:Vs,ValueContainer:Ws},isClearable:!0,formatOptionLabel:this.formatOptionLabel,onInputChange:this.onAutoSuggestChange,filterOption:null,className:s.cruiseSelect,escapeClearsValue:!0,label:"Cruise",options:l,onChange:this.handleCruiseSelect,value:this.state.selectedCruise,placeholder:"Search Cruises",styles:{menu:function(e){return Object(u.a)({},e,{zIndex:9999})},menuList:function(e){return Object(u.a)({},e,{backgroundColor:kn.backgroundGray})},input:function(e){return Object(u.a)({},e,{color:"inherit",fontFamily:Bs})},control:function(e){return Object(u.a)({},e,{backgroundColor:kn.backgroundGray,border:"none",boxShadow:"1px 1px 1px 1px #242424",color:"white",borderRadius:4,"&:hover":{border:"1px solid white"},"&:focus-within":{borderColor:kn.primary}})},placeholder:function(e){return Object(u.a)({},e,{fontFamily:Bs,color:kn.primary,fontSize:"14px"})},noOptionsMessage:function(e){return Object(u.a)({},e,{fontFamily:Bs,color:"white",backgroundColor:kn.backgroundGray})},option:function(e,t){return Object(u.a)({},e,{backgroundColor:kn.backgroundGray,color:t.isFocused?kn.primary:"white","&:hover":{backgroundColor:kn.greenHover}})},singleValue:function(e,t){return Object(u.a)({},e,{fontFamily:Bs,color:"inherit",paddingRight:"20px"})},valueContainer:function(e){return Object(u.a)({},e,{padding:"0 0 0 34px",fontWeight:100})}},theme:function(e){return Object(u.a)({},e,{colors:Object(u.a)({},e.colors,{primary25:"#e0e0e0",primary:"#212121"})})}}),n&&r.a.createElement(Dn.a,{size:"small",className:s.cruiseInfo},r.a.createElement(Pn.a,null,r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,{className:s.cruiseInfoCell},"Cruise:"),r.a.createElement(Mn.a,{className:s.cruiseInfoCell},n.data.Name)),r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,{className:s.cruiseInfoCell},"Nickname:"),r.a.createElement(Mn.a,{className:s.cruiseInfoCell},n.data.Nickname)),n.data.Start_Time&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,{className:s.cruiseInfoCell},"Start Date:"),r.a.createElement(Mn.a,{className:s.cruiseInfoCell},n.data.Start_Time.slice(0,10))),n.data.End_Time&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,{className:s.cruiseInfoCell},"End Date:"),r.a.createElement(Mn.a,{className:s.cruiseInfoCell},n.data.End_Time.slice(0,10))),n.data.Chief_Name&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,{className:s.cruiseInfoCell},"Chief Scientist:"),r.a.createElement(Mn.a,{className:s.cruiseInfoCell},n.data.Chief_Name)),n.data.Ship_Name&&r.a.createElement(Ln.a,null,r.a.createElement(Mn.a,{className:s.cruiseInfoCell},"Ship:"),r.a.createElement(Mn.a,{className:s.cruiseInfoCell},n.data.Ship_Name)))))}}]),t}(n.Component),Qs=Object(l.b)((function(e,t){return{cruiseList:e.cruiseList,getCruiseListState:e.getCruiseListState}}),zs)(Object(jn.a)((function(e){return{outerDiv:{padding:"12px",maxWidth:"260px",backgroundColor:"transparent",color:"white",borderRadius:"4px",boxShadow:"2px",position:"relative",backdropFilter:"blur(2px)",transform:"translateY(35px)",marginTop:"24px"},cruiseSelect:{width:"260px",borderRadius:"4px"},cruiseInfo:{color:"white",fontFamily:Bs,margin:"12px auto 0 auto"},cruiseInfoCell:{color:"white",fontFamily:Bs,borderStyle:"none"}}}))(qs)),Ks=a(413),Ys=Object(jn.a)((function(e){return{outerDiv:{backgroundColor:"transparent",borderRadius:"4px",marginRight:"20px"},drawButton:{border:"1px solid #333333",borderRadius:"4px",color:kn.primary,cursor:"pointer",padding:"6px",width:"160px",fontSize:"14px",backgroundColor:kn.backgroundGray,boxShadow:"1px 1px 1px 1px #242424",fontFamily:'"Avenir Next W00","Helvetica Neue",Helvetica,Arial,sans-serif',"&:hover":{borderColor:"white"}},helpText:{marginTop:0,color:"white",fontFamily:'"Avenir Next W00","Helvetica Neue",Helvetica,Arial,sans-serif'},cancelButton:{display:"none",color:"white"}}}))((function(e){var t=e.classes,a=e.showHelp;return r.a.createElement("div",{className:t.outerDiv,id:"draw-region-div"},a&&r.a.createElement("p",{className:t.helpText},"Click once to draw ",r.a.createElement("br",null),"and again to finish"),r.a.createElement("button",{id:"draw-button",className:t.drawButton},"Select Region"),r.a.createElement("button",{id:"cancel-button",className:"".concat(t.drawButton," ").concat(t.cancelButton)},"Cancel"))})),$s={type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:[0,255,255,.3]},outline:{color:[0,255,255,1],size:"2px"}}]},Zs={type:"line-3d",symbolLayers:[{type:"line",size:"3px",material:{color:{r:0,g:255,b:255,a:0}}}]},Js=function(e){function t(e){var a;return Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).shouldComponentUpdate=function(e,t){return!1},a.sketchModel=new e.esriModules.SketchViewModel({layer:e.regionLayer,view:e.view,polygonSymbol:$s,polylineSymbol:Zs,defaultUpdateOptions:{toggleToolOnClick:!1,tool:"transform"}}),a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.view,n=t.esriModules,r=t.regionLayer,o=t.setShowHelp,s=this.sketchModel,i=document.getElementById("draw-button"),l=document.getElementById("cancel-button"),c=Object(Ks.a)(75,(function(t){"active"===t.state&&e.props.updateDomainFromGraphicExtent(n.Utils.webMercatorToGeographic(t.graphic.geometry.extent))}));return s.on("create",(function(t){"active"===t.state&&t.toolEventInfo&&"vertex-add"===t.toolEventInfo.type&&s.complete(),t.graphic&&t.graphic.visible&&(t.graphic.visible=!1),"cancel"===t.state&&(o(!1),i.style.display="inline-block",l.style.display="none"),"complete"===t.state&&(o(!1),e.props.updateDomainFromGraphicExtent(n.Utils.webMercatorToGeographic(t.graphic.geometry.extent)),i.style.display="inline-block",l.style.display="none")})),s.on("create",c),s.on("update",(function(t){if(t.toolEventInfo&&"move-stop"===t.toolEventInfo.type){if("cancel"===t.state)return;e.props.updateDomainFromGraphicExtent(t.graphics[0].geometry.extent),i.style.display="inline-block",l.style.display="none"}})),i.addEventListener("click",(function(e){r.removeAll(),o(!0),s.create("polyline",{mode:"click"}),i.style.display="none",l.style.display="inline-block"})),l.addEventListener("click",(function(e){s.cancel(),o(!1),i.style.display="inline-block",l.style.display="none"})),a.ui.add("draw-region-div","bottom-right"),a.ui.add("cruise-selector","top-right"),a.ui.remove("zoom"),a.ui.remove("navigation-toggle"),a.ui.remove("compass"),a.ui.remove("attribution"),null}}]),t}(r.a.Component),Xs=r.a.memo((function(e){var t=e.cruiseTrajectory,a=e.trajectoryLayer,n=e.esriModules;if(t){var r=t.lons,o=t.lats,s=Math.floor(r.length/2);a.removeAll();var i=[[]],l=0,c=r[0],u=o[0],d=0;r.forEach((function(e,t){var a=o[t],n=Math.abs(a-u),s=Math.abs(e-c),p=s>180?360-s:s,m=Math.sqrt(n*n+p*p);d=m>d?m:d,i[l].push([e,a]),t<r.length-1&&(e>160&&e<180&&r[t+1]>-180&&r[t+1]<-160&&(i.push([]),l++),e>-180&&e<-160&&e[t+1]>160&&e[t+1]<180&&(i.push([]),l++))}));var p={type:"line-3d",symbolLayers:[{type:"line",material:{color:[0,255,255,1]},cap:"round",join:"round",size:2}]};i.forEach((function(e){var t={type:"polyline",paths:e},r=new n.Graphic({geometry:t,symbol:p});a.add(r)}));try{var m=[r[s],o[s]],h=7-Math.floor(d/6);e.view.goTo({target:m,zoom:h},{maxDuration:2500,speedFactor:.5})}catch(b){console.log(b)}}else a.removeAll(),e.view.goTo({target:[-140,30],zoom:3},{maxDuration:2500,speedFactor:.5});return""})),ei=function(e){function t(e){var a;return Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).render=function(){var e=a.props,t=e.classes,n=e.esriModules,o=e.spParams,s=e.cruiseTrajectory,i=e.globeUIRef,l=parseFloat(o.lat1),c=parseFloat(o.lat2),d=parseFloat(o.lon1),p=parseFloat(o.lon2),m=p<d?p+360:p;a.regionLayer.removeAll();var h={type:"polygon",rings:[[d,l],[m,l],[m,c],[d,c],[d,l]]},b=new n.Graphic({geometry:h,symbol:$s});return a.regionLayer.add(b),r.a.createElement("div",{className:t.container},r.a.createElement(Us.a,{mapProperties:{basemap:"satellite",layers:[a.regionLayer,a.trajectoryLayer]},viewProperties:{center:[-140,30],zoom:3,highlightOptions:{haloOpacity:0,haloColor:"rgba(0, 0, 0, 0)",fillOpacity:0,color:"rgba(0, 0, 0, 0)"}}},r.a.createElement(Xs,{cruiseTrajectory:s,trajectoryLayer:a.trajectoryLayer,esriModules:n}),r.a.createElement(Js,{updateDomainFromGraphicExtent:a.props.updateDomainFromGraphicExtent,esriModules:n,measurementPositions:a.props.measurementPositions,regionLayer:a.regionLayer,setShowHelp:function(e){return a.setState(Object(u.a)({},a.state,{showHelp:e}))},ref:i})),r.a.createElement(Ys,{showHelp:a.state.showHelp}),r.a.createElement(Qs,{updateParametersFromCruiseBoundary:a.props.updateParametersFromCruiseBoundary}))},a.state={showHelp:!1},a.regionLayer=new e.esriModules.GraphicsLayer,a.trajectoryLayer=new e.esriModules.GraphicsLayer,a}return Object(yn.a)(t,e),t}(n.Component),ti=Object(jn.a)((function(e){return{container:{margin:"0 auto 0 auto",width:"100vw",height:"100vh"}}}))(ei),ai=function(e){var t=e.depth1,a=e.depth2,n=e.dt1,r=e.dt2,o=e.fields,s=e.lat1,i=e.lat2,l=e.lon1,c=e.lon2,u=e.spName,d=e.tableName;return{depth1:parseFloat(t),depth2:parseFloat(a),dt1:n,dt2:r,fields:o,lat1:parseFloat(s),lat2:parseFloat(i),lon1:parseFloat(l),lon2:parseFloat(c),spName:u,tableName:d}},ni=function(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return t.toString()+"-"+(a<10?"0"+a.toString():a.toString())+"-"+(n<10?"0"+n.toString():n.toString())},ri=function(e){var t;return(t={},Object(m.a)(t,ve.sectionMap,{sp:Oe.sectionMap,subType:ve.sectionMap}),Object(m.a)(t,ve.contourSectionMap,{sp:Oe.sectionMap,subType:ve.contourSectionMap}),Object(m.a)(t,ve.timeSeries,{sp:Oe.timeSeries,subType:ve.timeSeries}),Object(m.a)(t,ve.histogram,{sp:Oe.spaceTime,subType:ve.histogram}),Object(m.a)(t,ve.depthProfile,{sp:Oe.depthProfile,subType:ve.depthProfile}),Object(m.a)(t,ve.heatmap,{sp:Oe.spaceTime,subType:ve.heatmap}),Object(m.a)(t,ve.contourMap,{sp:Oe.spaceTime,subType:ve.contourMap}),Object(m.a)(t,ve.sparse,{sp:Oe.spaceTime,subType:ve.sparse}),t)[e]},oi={showLoginDialog:L,queryRequestSend:function(e){return{type:"QUERY REQUEST SEND",payload:{query:e}}},retrievalRequestSend:T,storedProcedureRequestSend:function(e){return{type:"STORED_PROCEDURE_REQUEST_SEND",payload:Object(u.a)({},e)}},snackbarOpen:U,cruiseListRequestSend:W,completedShowCharts:function(){return{type:"COMPLETED_SHOW_CHARTS"}},datasetRetrievalRequestSend:R},si={tableName:"",fields:null,depth1:0,depth2:0,dt1:new Date,dt2:new Date,lat1:0,lat2:0,lon1:0,lon2:0,selectedVizType:""},ii=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(o)))).globeUIRef=r.a.createRef(),a.state={filteredData:[],opacity:1,showCharts:!1,showUI:!1,surfaceOnly:!1,irregularSpatialResolution:!1,downloadTarget:null,spParams:si},a.handleSetDownloadTarget=function(e){a.setState(Object(u.a)({},a.state,{downloadTarget:e}))},a.handleChange=function(e){a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,Object(m.a)({},e.target.name,e.target.value))}))},a.handleLatLonChange=function(e){a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,Object(m.a)({},e.target.name,e.target.value))}))},a.handleStartDateChange=function(e){if(e){var t=new Date;t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{dt1:t})}))}},a.handleEndDateChange=function(e){if(e){var t=new Date;t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{dt2:t})}))}},a.onVisualize=function(){var e=a.state.spParams,t=e.depth1,n=e.depth2,r=e.dt1,o=e.dt2,s=e.lat1,i=e.lat2,l=e.lon1,c=e.lon2,u=e.selectedVizType,d=ri(u),p={parameters:ai({depth1:t,depth2:n,dt1:ni(r),dt2:ni(o),lat1:s,lat2:i,lon1:l,lon2:c,fields:a.state.spParams.fields&&a.state.spParams.fields.value,tableName:a.state.spParams.fields&&a.state.spParams.tableName,spName:d.sp}),subType:d.subType,metadata:a.state.spParams.fields&&a.state.spParams.fields.data};a.props.storedProcedureRequestSend(p)},a.updateFields=function(e){if(e){var t=!e.data.Depth_Min,n="Irregular"===e.data.Spatial_Resolution,r=go(e.data.Time_Max);r.setDate(r.getDate()+1);var o=e.data.Temporal_Resolution===ye.monthlyClimatology?a.state.spParams.dt1:go(e.data.Time_Min),s=e.data.Temporal_Resolution===ye.monthlyClimatology?a.state.spParams.dt2:n?r:go(e.data.Time_Min),i=Math.floor(1e3*e.data.Lat_Min)/1e3,l=Math.ceil(1e3*e.data.Lat_Max)/1e3,c=Math.floor(1e3*e.data.Lon_Min)/1e3,d=Math.ceil(1e3*e.data.Lon_Max)/1e3,p=n?i:a.state.spParams.lat1,m=n?l:a.state.spParams.lat2,h=n?c:a.state.spParams.lon1,b=n?d:a.state.spParams.lon2,f=n?e.data.Depth_Min||0:So.piscesTable.has(e.data.Table_Name)||So.darwinTable.has(e.data.Table_Name)?0:a.state.spParams.depth1,g=n?e.data.Depth_Max||0:So.piscesTable.has(e.data.Table_Name)?((So.piscesDepths[0]+So.piscesDepths[1])/2).toFixed(2):So.darwinTable.has(e.data.Table_Name)?(So.darwinDepths[0]+So.darwinDepths[1])/2:a.state.spParams.depth2;n&&a.globeUIRef.current.props.view.goTo({target:[(parseFloat(h)+parseFloat(b))/2,(parseFloat(p)+parseFloat(m))/2],zoom:3},{maxDuration:2500,speedFactor:.5});var E=e.data.Table_Name;a.setState(Object(u.a)({},a.state,{surfaceOnly:t,irregularSpatialResolution:n,spParams:Object(u.a)({},a.state.spParams,{fields:e,dt1:o,dt2:s,lat1:p,lat2:m,lon1:h,lon2:b,depth1:f,depth2:g,tableName:E,selectedVizType:""})}))}else a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{fields:e,tableName:""})}))},a.updateParametersFromCruiseBoundary=function(e){if(e&&a.state.spParams.fields){a.props.snackbarOpen("Setting chart parameters to cruise boundaries.");var t=Math.floor(1e3*e.data.Lat_Min)/1e3,n=Math.ceil(1e3*e.data.Lat_Max)/1e3,r=Math.floor(1e3*e.data.Lon_Min)/1e3,o=Math.ceil(1e3*e.data.Lon_Max)/1e3;a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{lat1:t,lat2:n,lon1:r,lon2:o,dt1:go(e.data.Start_Time),dt2:go(e.data.End_Time)})}))}},a.handleShowCharts=function(){a.setState(Object(u.a)({},a.state,{showCharts:!0}))},a.handleShowGlobe=function(){a.setState(Object(u.a)({},a.state,{showCharts:!1}))},a.toggleShowUI=function(){a.setState(Object(u.a)({},a.state,{showUI:!a.state.showUI}))},a.updateDomainFromGraphicExtent=function(e){for(var t=e.xmin;t<-180;)t+=360;for(;t>180;)t-=360;for(var n=e.xmax;n<-180;)n+=360;for(;n>180;)n-=360;var r={lat1:e.ymin.toFixed(3),lat2:e.ymax.toFixed(3),lon1:t.toFixed(3),lon2:n.toFixed(3)};a.setState(Object(u.a)({},a.state,{spParams:Object(u.a)({},a.state.spParams,{},r)}))},a.resetSPParams=function(){a.setState(Object(u.a)({},a.state,{spParams:si}))},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){var e=Object(se.a)(O.a.mark((function e(){var t,a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.catalog||this.props.retrievalRequestSend(),this.props.cruiseList||this.props.cruiseListRequestSend(),this.props.datasets||this.props.datasetRetrievalRequestSend(),t=["AreaMeasurement3D","Search","GraphicsLayer","SketchViewModel","Utils","Graphic"],e.next=6,Object(Ko.loadModules)(["esri/widgets/AreaMeasurement3D","esri/widgets/Search","esri/layers/GraphicsLayer","esri/widgets/Sketch/SketchViewModel","esri/geometry/support/webMercatorUtils","esri/Graphic"],{version:"4.14"});case 6:a=e.sent,n=t.reduce((function(e,t,n){return e[t]=a[n],e}),{}),this.setState(Object(u.a)({},this.state,{esriModules:n}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.showChartsOnce&&(this.props.completedShowCharts(),this.setState(Object(u.a)({},this.state,{showCharts:!0})))}},{key:"render",value:function(){var e=this.props.classes;return this.props.user?r.a.createElement("div",{className:e.vizWrapper},r.a.createElement(Qo,Object.assign({},this.state.spParams,{downloadTarget:this.state.downloadTarget,handleSetDownloadTarget:this.handleSetDownloadTarget})),r.a.createElement(Go,Object.assign({handleSetDownloadTarget:this.handleSetDownloadTarget,toggleChartView:this.toggleChartView,toggleShowUI:this.toggleShowUI,handleChange:this.handleChange,handleLatLonChange:this.handleLatLonChange,handleStartDateChange:this.handleStartDateChange,handleEndDateChange:this.handleEndDateChange,showUI:this.state.showUI,onVisualize:this.onVisualize,updateFields:this.updateFields},this.state.spParams,{surfaceOnly:this.state.surfaceOnly,irregularSpatialResolution:this.state.irregularSpatialResolution,showCharts:this.state.showCharts,handleShowCharts:this.handleShowCharts,handleShowGlobe:this.handleShowGlobe,resetSPParams:this.resetSPParams})),this.state.esriModules&&r.a.createElement("div",{className:"".concat(this.state.showCharts?e.displayNone:"")},r.a.createElement(ti,{globeUIRef:this.globeUIRef,updateDomainFromGraphicExtent:this.updateDomainFromGraphicExtent,updateParametersFromCruiseBoundary:this.updateParametersFromCruiseBoundary,esriModules:this.state.esriModules,spParams:this.state.spParams,cruiseTrajectory:this.props.cruiseTrajectory})),r.a.createElement("div",{className:this.state.showCharts?e.showCharts:e.displayNone},r.a.createElement(Fs,null))):r.a.createElement(Yn,null)}}]),t}(n.Component),li=Object(l.b)((function(e,t){return{user:e.user,sampleData:e.sampleData,queryRequestState:e.queryRequestState,maps:e.maps,charts:e.charts,data:e.data,storedProcedureRequestState:e.storedProcedureRequestState,loadingMessage:e.loadingMessage,cruiseTrajectory:e.cruiseTrajectory,cruiseList:e.cruiseList,showChartsOnce:e.showChartsOnce,datasets:e.datasets,catalog:e.catalog}}),oi)(Object(jn.a)((function(e){return{displayNone:{display:"none"},background:{backgroundColor:kn.backgroundGray},showCharts:{display:"inline-block",paddingTop:e.spacing(6)},vizWrapper:{minHeight:"100vh",background:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=",")")}}}))(ii)),ci={hideLoginDialog:M,showLoginDialog:L,logOut:A,userLoginRequestSend:function(e,t){return{type:"LOGIN_REQUEST_SEND",payload:{username:e,password:t}}},restoreInterfaceDefaults:F,googleLoginRequestSend:k,snackbarOpen:U},ui=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(r)))).handleLogin=function(e){a.props.userLoginRequestSend(a.props.username,a.props.password)},a.handleClose=function(){a.props.clearState(),a.props.hideLoginDialog(),a.props.restoreInterfaceDefaults()},a.onGoogleSignin=function(e){var t=e.getAuthResponse(!0).id_token;a.props.googleLoginRequestSend(t)},a.onDialogEnter=function(){var e=Object(jr.a)(a),t=window.gapi.auth2;t?t.getAuthInstance().attachClickHandler("g-signin",null,e.onGoogleSignin,(function(){return e.props.snackbarOpen("There was a problem accessing your google account")})):setTimeout(e.onDialogEnter,20)},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=!this.props.username||!this.props.password;return r.a.createElement(rr.a,{open:this.props.loginDialogIsOpen,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",onEnter:this.onDialogEnter,PaperProps:{className:e.dialogWrapper}},r.a.createElement(or.a,{id:"form-dialog-title"},"Login"),r.a.createElement(sr.a,null,r.a.createElement(ho.a,null,"Please enter your username and password, or ",r.a.createElement(Qn.a,{className:e.colorCorrectionPrimary,onClick:this.handleClose,component:An.b,to:{pathname:"/register"}},"Register.")),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement(zn.a,{autoFocus:!0,margin:"normal",id:"username",label:"Username",type:"text",variant:"outlined",name:"username",value:this.props.username,onChange:this.props.handleChange,InputLabelProps:{shrink:!0}}),r.a.createElement(zn.a,{margin:"normal",id:"name",label:"Password",type:"password",variant:"outlined",name:"password",value:this.props.password,onChange:this.props.handleChange,InputLabelProps:{shrink:!0},helperText:r.a.createElement(Qn.a,{className:e.colorCorrectionPrimary,onClick:this.handleClose,component:An.b,to:{pathname:"/forgotpass"}},"Forgot Username or Password")}),r.a.createElement(Ho.a,null,r.a.createElement("div",{className:e.googleIconWrapper},r.a.createElement(zr,{clickHandlerTarget:"g-signin",text:"Sign in with Google"})),r.a.createElement(Bn.a,{onClick:this.handleClose},r.a.createElement("span",{className:e.colorCorrectionWhite},"Cancel")),r.a.createElement("div",{className:e.wrapper},r.a.createElement(Bn.a,{color:"primary",type:"submit",onClick:this.handleLogin,disabled:t,className:t?"":e.colorCorrection},"Log In")))),this.props.userLoginState===d.failed?r.a.createElement(ho.a,null,"Login failed. Please try again."):""))}}]),t}(n.Component),di=Object(l.b)((function(e,t){return{loginDialogIsOpen:e.loginDialogIsOpen,userLoginState:e.userLoginState,userLoginError:e.userLoginError}}),ci)(Object(jn.a)((function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},googleIconWrapper:{marginRight:"100px",marginLeft:"-8px"},dialogWrapper:{backgroundColor:kn.solidPaper},colorCorrectionPrimary:{color:kn.primary},colorCorrectionWhite:{color:"white"}}}))(ui)),pi=a(841),mi={snackbarClose:function(){return{type:"SNACKBAR_CLOSE"}}},hi=Object(l.b)((function(e,t){return{snackbarIsOpen:e.snackbarIsOpen,snackbarMessage:e.snackbarMessage}}),mi)(Object(jn.a)((function(e){return{}}))((function(e){e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(pi.a,{autoHideDuration:2500,message:e.snackbarMessage,onClose:e.snackbarClose,open:e.snackbarIsOpen,anchorOrigin:{horizontal:"center",vertical:"top"}}))}))),bi=a(414),fi=Object(jn.a)((function(e){return{loader:{backgroundColor:"#000000",position:"fixed",top:0,right:0,bottom:0,left:0,opacity:.5,display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh",zIndex:9998},loaderContent:{display:"flex",flexDirection:"column",alignItem:"center",justifyContent:"center",zIndex:9999,opacity:1},spinnerText:{zIndex:1e4,color:e.palette.primary.main,marginTop:"25px",opacity:1},spinner:{opacity:1}}}))((function(e){var t=e.classes,a=e.loadingMessage;return a&&a.length?r.a.createElement("div",{className:t.loader},r.a.createElement("div",{className:t.loaderContent},r.a.createElement(bi,{className:t.spinner,color:kn.primary,name:"ball-pulse-rise",fadeIn:"quarter"}),r.a.createElement(Nn.a,{variant:"h6",className:t.spinnerText},a))):""})),gi={loginDialogWasCleared:function(){return{type:"LOGIN_DIALOG_WAS_CLEARED"}}},Ei=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleChange=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value))},a.handleLogOut=function(){a.clearState()},a.clearState=function(){a.setState({username:"",password:""}),a.props.loginDialogWasCleared()},a.componentDidUpdate=function(e){a.props.clearLoginDialog&&a.clearState()},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(di,{clearState:this.clearState,username:this.state.username,password:this.state.password,handleChange:this.handleChange}),r.a.createElement(hi,null),r.a.createElement(fi,{loadingMessage:this.props.loadingMessage}))}}]),t}(n.Component),xi=Object(l.b)((function(e,t){return{clearLoginDialog:e.clearLoginDialog,loadingMessage:e.loadingMessage}}),gi)(Object(jn.a)((function(e){return{inlineBlock:{display:"inline-block"}}}))(Ei)),vi=function(e){function t(){return Object(ue.a)(this,t),Object(xn.a)(this,Object(vn.a)(t).apply(this,arguments))}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.landingWrapper},r.a.createElement("img",{src:"/images/large_cmap_logo.png",alt:"Simons CMAP Logo",height:"290",width:"600"}))}}]),t}(n.Component),yi=Object(jn.a)((function(e){return{landingWrapper:{margin:"15vh auto"}}}))(vi),Si=a(813),Oi=a(767),wi=a(716),Ci=a(812),ki=a(722),Ai={navLink:function(e){var t;return t={textDecoration:"none",marginRight:40,fontFamily:'"Lato",sans-serif',color:"white","&:hover":{color:e.palette.primary.main},fontSize:"15px",fontWeight:100,display:"inline-block",cursor:"pointer",verticalAlign:"middle",pointerEvents:"all"},Object(m.a)(t,"fontWeight",500),Object(m.a)(t,"letterSpacing","normal"),t}},_i={logOut:A},ji=Object(l.b)((function(e,t){return{}}),_i)(Object(_n.f)(Object(jn.a)((function(e){return{navLink:Ai.navLink(e),icon:{display:"inline-flex",verticalAlign:"middle",color:kn.primary},dropdown:{zIndex:1300,marginTop:"21px",width:"200px"},popperPaperBlue:{borderTopLeftRadius:0,borderTopRightRadius:0,backgroundColor:"#1D4962"},popperPaperBlack:{borderTopLeftRadius:0,borderTopRightRadius:0,backgroundColor:"black"}}}))((function(e){var t=e.classes,a=e.user,n=(e.pathname,e.logOut),o=r.a.useState(null),s=Object(y.a)(o,2),i=s[0],l=s[1],c=function(){l(null)},u="/visualization"===window.location.pathname?t.popperPaperBlack:t.popperPaperBlue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{variant:"caption",className:"".concat(t.navLink),onClick:function(e){l(e.currentTarget)}},a.email,i?r.a.createElement(Si.a,{className:t.icon,color:"primary",fontSize:"small"}):r.a.createElement(gr.a,{className:t.icon,color:"primary",fontSize:"small"})),r.a.createElement(Oi.a,{open:Boolean(i),anchorEl:i,role:void 0,transition:!0,className:t.dropdown},(function(e){var t=e.TransitionProps,a=e.placement;return r.a.createElement(wi.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),r.a.createElement(Tn.a,{className:u},r.a.createElement(Ci.a,{onClickAway:c},r.a.createElement(ki.a,{id:"menu-list-grow"},r.a.createElement(eo.a,{onClick:c,component:An.b,to:"/profile"},"Profile"),r.a.createElement(eo.a,{onClick:c,component:An.b,to:"/apikeymanagement"},"API Access"),r.a.createElement(eo.a,{onClick:n},"Logout")))))})))})))),Ti={logOut:A},Ni=Object(l.b)((function(e,t){return{user:e.user}}),Ti)(Object(_n.f)(Object(jn.a)((function(e){var t;return t={navLink:Ai.navLink(e),icon:{display:"inline-flex",verticalAlign:"middle"}},Object(m.a)(t,"icon",{display:"inline-flex",verticalAlign:"middle",color:kn.primary}),Object(m.a)(t,"dropdown",{zIndex:1300,marginTop:"21px",width:"200px"}),Object(m.a)(t,"popperPaperBlue",{borderTopLeftRadius:0,borderTopRightRadius:0,backgroundColor:"#1D4962"}),Object(m.a)(t,"popperPaperBlack",{borderTopLeftRadius:0,borderTopRightRadius:0,backgroundColor:"black"}),t}))((function(e){var t=e.classes,a=e.user,n=(e.pathname,e.logOut,r.a.useState(null)),o=Object(y.a)(n,2),s=o[0],i=o[1],l="/visualization"===window.location.pathname?t.popperPaperBlack:t.popperPaperBlue,c=function(){i(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{variant:"caption",className:"".concat(t.navLink),onClick:function(e){i(e.currentTarget)}},"Data Submission",s?r.a.createElement(Si.a,{className:t.icon,color:"primary",fontSize:"small"}):r.a.createElement(gr.a,{className:t.icon,color:"primary",fontSize:"small"})),r.a.createElement(Oi.a,{open:Boolean(s),anchorEl:s,role:void 0,transition:!0,className:t.dropdown},(function(e){var t=e.TransitionProps,n=e.placement;return r.a.createElement(wi.a,Object.assign({},t,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(Tn.a,{className:l},r.a.createElement(Ci.a,{onClickAway:c},r.a.createElement(ki.a,{id:"menu-list-grow"},r.a.createElement(eo.a,{onClick:c,component:An.b,to:"/datasubmission/guide"},"Submission Guide"),r.a.createElement(eo.a,{onClick:c,component:An.b,to:"/datasubmission/validationtool"},"Submit Data"),r.a.createElement(eo.a,{onClick:c,component:An.b,to:"/datasubmission/userdashboard"},"User Dashboard"),a&&a.isDataSubmissionAdmin&&r.a.createElement(eo.a,{onClick:c,component:An.b,to:"/datasubmission/admindashboard"},"Admin Dashboard")))))})))})))),Ri=a(723),Di=a(814),Ii=Object(_n.f)(Object(jn.a)((function(e){return{menuIcon:{color:"white",cursor:"pointer"},iconButton:Object(u.a)({},Ai.navLink(e),{padding:"8px"}),drawerPaper:{backgroundColor:kn.solidPaper,paddingLeft:"8px"},listItem:{"&:hover":{color:e.palette.primary.main}}}}))((function(e){var t=e.classes,a=e.user,n=e.handleLogOut,o=e.showLoginDialog,s=r.a.useState(!1),i=Object(y.a)(s,2),l=i[0],c=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(fr.a,{onClick:function(){return c(!0)},className:t.iconButton},r.a.createElement(Di.a,{className:t.menuIcon})),r.a.createElement($r.a,{anchor:"top",open:l,onClose:function(){return c(!1)},PaperProps:{className:t.drawerPaper}},r.a.createElement(Ri.a,null,r.a.createElement(Kr.a,{button:!0,component:An.b,to:"/catalog",onClick:function(){return c(!1)}},"Catalog"),r.a.createElement(Kr.a,{button:!0,component:An.b,to:"/visualization",onClick:function(){return c(!1)}},"Visualization"),r.a.createElement(Kr.a,{button:!0,component:An.b,to:"/community",onClick:function(){return c(!1)}},"Community"),r.a.createElement(Kr.a,{button:!0,component:An.b,to:"/datasubmission",onClick:function(){return c(!1)}},"Data Submission")),r.a.createElement(Rn.a,null),a&&r.a.createElement(Ri.a,null,r.a.createElement(Kr.a,{button:!0,component:An.b,to:"/profile",onClick:function(){return c(!1)}},"Profile"),r.a.createElement(Kr.a,{button:!0,component:An.b,to:"/apikeymanagement",onClick:function(){return c(!1)}},"API Access"),r.a.createElement(Kr.a,{button:!0,onClick:function(){n(),c(!1)}},"Log Out")),!a&&r.a.createElement(Ri.a,null,r.a.createElement(Kr.a,{button:!0,onClick:function(){o(),c(!1)}},"Log In"),r.a.createElement(Kr.a,{button:!0,component:An.b,to:"/register",onClick:function(){return c(!1)}},"Register"))))}))),Li={showLoginDialog:L,logOut:A,restoreInterfaceDefaults:F,snackbarOpen:U,toggleShowHelp:B},Mi=function(e){function t(e){var a;return Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).componentDidMount=function(){window.addEventListener("resize",a.handleResize)},a.handleResize=function(e){var t=e.target.innerWidth;t<860&&"desktop"===a.state.layout?a.setState(Object(u.a)({},a.state,{layout:"mobile"})):t>=860&&"mobile"===a.state.layout&&a.setState(Object(u.a)({},a.state,{layout:"desktop"}))},a.handleChange=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value))},a.handleLogOut=function(){a.clearState(),a.props.logOut(),a.props.restoreInterfaceDefaults()},a.clearState=function(){a.setState({username:"",password:""})},a.state={username:"",password:"",layout:window.innerWidth>=860?"desktop":"mobile"},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.history,o=t.user,s=(t.showHelp,n.location.pathname);return r.a.createElement("div",{className:"".concat(a.navWrapper," ").concat("/visualization"!==s&&a.navWrapperBlue)},"desktop"===this.state.layout?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Nn.a,{variant:"caption",href:"/",component:"a",className:"".concat(a.navLink," ").concat(a.simonsLogoWrapper)},r.a.createElement("img",{src:"/images/CMAP_white_logo_2.png",width:"40",alt:"CMAP logo",className:a.simonsLogo})),r.a.createElement(Nn.a,{variant:"caption",to:"/catalog",component:An.b,className:a.navLink},"Catalog"),r.a.createElement(Nn.a,{variant:"caption",to:"/visualization",component:An.b,className:a.navLink},"Visualization"),r.a.createElement(Nn.a,{variant:"caption",to:"/community",component:An.b,className:a.navLink},"Community"),r.a.createElement(Ni,null)),r.a.createElement("div",{className:a.rightSectionWrapper},r.a.createElement("div",null,o&&r.a.createElement(ji,{pathname:s,user:o}),!o&&r.a.createElement(Nn.a,{variant:"caption",onClick:function(){return e.props.showLoginDialog()},className:"".concat(a.navLink," ").concat(a.rightNavLink)},"Log In"),!o&&r.a.createElement(Nn.a,{variant:"caption",to:"/register",component:An.b,className:"".concat(a.navLink," ").concat(a.rightNavLink)},"Register")))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{variant:"caption",href:"/",component:"a",className:"".concat(a.navLink," ").concat(a.simonsLogoWrapper)},r.a.createElement("img",{src:"/images/CMAP_white_logo_2.png",width:"40",alt:"CMAP logo",className:a.simonsLogo})),r.a.createElement(Ii,{handleLogOut:this.handleLogOut,showLoginDialog:this.props.showLoginDialog,user:o})))}}]),t}(n.Component),Pi=Object(l.b)((function(e,t){return{user:e.user,showHelp:e.showHelp}}),Li)(Object(_n.f)(Object(jn.a)((function(e){return{simonsLogo:{verticalAlign:"middle",display:"inline-block"},simonsLogoWrapper:{pointerEvents:"all",display:"inline-block",marginRight:"60px !important",verticalAlign:"middle"},navWrapper:{position:"fixed",width:"100vw",top:"0px",backgroundColor:"transparent",zIndex:50,paddingTop:"14px",paddingBottom:"14px",paddingLeft:"20px",paddingRight:"20px",textAlign:"left",boxSizing:"border-box",display:"flex",justifyContent:"space-between",pointerEvents:"none"},navWrapperBlue:{backgroundColor:"#1D4962"},rightSectionWrapper:{display:"flex",flexDirection:"column",justifyContent:"space-around"},navLink:Ai.navLink(e),rightNavLink:{marginRight:30}}}))(Mi))),Fi={showLoginDialog:L},Ui=Object(l.b)((function(e,t){return{user:e.user}}),Fi)((function(e){return Object(n.useEffect)((function(){e.user?window.location.href="/catalog":e.showLoginDialog()})),""})),zi=a(815),Bi={changePasswordRequestSend:function(e,t,a){return{type:"CHANGE_PASSWORD_REQUEST_SEND",payload:{password:e,newPassword:t,username:a}}},hideChangePasswordDialog:V},Vi=Object(l.b)((function(e,t){return{user:e.user}}),Bi)(Object(jn.a)((function(e){return{dialogPaper:{backgroundColor:kn.solidPaper,"@media (max-width: 768px)":{margin:0}},formWrapper:{padding:"3vh 5vw"}}}))((function(e){var t=e.classes,a=r.a.useState(""),n=Object(y.a)(a,2),o=n[0],s=n[1],i=r.a.useState(""),l=Object(y.a)(i,2),c=l[0],u=l[1],d=r.a.useState(""),p=Object(y.a)(d,2),m=p[0],h=p[1],b=Boolean(/^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(c)||!c),f=Boolean(!m||m===c),g=function(){s(""),u(""),h("")},E=function(){e.hideChangePasswordDialog(),g()},x=r.a.useRef(),v=function(e){"Enter"===e.key&&x.current.click()},S=Boolean(!c||!m||!b||!f);return r.a.createElement(rr.a,{open:e.open,onClose:E,"aria-labelledby":"form-dialog-title",PaperProps:{className:t.dialogPaper},onEnter:g},r.a.createElement(or.a,{id:"form-dialog-title"},"Change Password"),r.a.createElement(sr.a,null,r.a.createElement(ho.a,null,"Please enter your current and new password."),r.a.createElement(Fn.a,{container:!0,className:t.formWrapper},r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{autoFocus:!0,margin:"normal",id:"currentPassword",label:"Current Password",type:"password",variant:"outlined",name:"currentPassword",value:o,onChange:function(e){return s(e.target.value)},InputLabelProps:{shrink:!0},fullWidth:!0,onKeyPress:v})),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{margin:"normal",id:"newPassword",label:"New Password",type:"password",variant:"outlined",name:"newPassword",value:c,onChange:function(e){return u(e.target.value)},InputLabelProps:{shrink:!0},fullWidth:!0,error:!b,helperText:b?"":"Must be 8 to 32 characters with 1 number and 1 special character.",onKeyPress:v})),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{margin:"normal",id:"newPasswordConfirm",label:"Confirm New Password",type:"password",variant:"outlined",name:"newPasswordConfirm",value:m,onChange:function(e){return h(e.target.value)},InputLabelProps:{shrink:!0},fullWidth:!0,error:!f,helperText:f?"":"Passwords must match.",onKeyPress:v}))),r.a.createElement(Ho.a,null,r.a.createElement(Bn.a,{onClick:function(){return E()},color:"primary"},"Cancel"),r.a.createElement(Bn.a,{color:"primary",variant:"contained",onClick:function(){e.changePasswordRequestSend(o,c,e.user.username)},disabled:S,ref:x},"Confirm"))))}))),Gi={changeEmailRequestSend:function(e,t,a){return{type:"CHANGE_EMAIL_REQUEST_SEND",payload:{email:e,password:t,username:a}}},hideChangeEmailDialog:G},Hi=Object(l.b)((function(e,t){return{user:e.user}}),Gi)(Object(jn.a)((function(e){return{dialogPaper:{backgroundColor:kn.solidPaper,"@media (max-width: 768px)":{margin:0}},formWrapper:{padding:"3vh 5vw"}}}))((function(e){var t=e.classes,a=r.a.useState(""),n=Object(y.a)(a,2),o=n[0],s=n[1],i=r.a.useState(""),l=Object(y.a)(i,2),c=l[0],u=l[1],d=r.a.useState(""),p=Object(y.a)(d,2),m=p[0],h=p[1],b=function(){s(""),u(""),h("")},f=function(){b(),e.hideChangeEmailDialog()},g=r.a.useRef(),E=function(e){"Enter"===e.key&&g.current.click()},x=Boolean(function(e){return/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-.]+)\.([a-zA-Z]{2,5})$/.test(e)}(c)||!c),v=Boolean(!m||c===m),S=Boolean(!c||!m||!x||!v);return r.a.createElement(rr.a,{open:e.open,onClose:f,"aria-labelledby":"form-dialog-title",PaperProps:{className:t.dialogPaper},onEnter:b},r.a.createElement(or.a,{id:"form-dialog-title"},"Change Email"),r.a.createElement(sr.a,null,r.a.createElement(ho.a,null,"Please enter your account password, and new email address."),r.a.createElement(Fn.a,{container:!0,className:t.formWrapper},r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{autoFocus:!0,margin:"normal",id:"currentPassword",label:"Password",type:"password",variant:"outlined",name:"currentPassword",value:o,onChange:function(e){return s(e.target.value)},InputLabelProps:{shrink:!0},onKeyPress:E,fullWidth:!0})),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{margin:"normal",id:"email",label:"New Email",type:"text",variant:"outlined",name:"email",value:c,onChange:function(e){return u(e.target.value)},InputLabelProps:{shrink:!0},fullWidth:!0,error:!x,helperText:x?"":"Please enter a valid email address"})),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{margin:"normal",id:"emailConfirm",label:"Confirm Email",type:"text",variant:"outlined",name:"emailConfirm",value:m,onChange:function(e){return h(e.target.value)},InputLabelProps:{shrink:!0},fullWidth:!0,onKeyPress:E,error:!v,helperText:v?"":"Email addresses must match."}))),r.a.createElement(Ho.a,null,r.a.createElement(Bn.a,{onClick:f,color:"primary"},"Cancel"),r.a.createElement(Bn.a,{color:"primary",variant:"contained",onClick:function(){e.changeEmailRequestSend(c,o,e.user.username)},ref:g,disabled:S},"Confirm"))))}))),Wi={updateUserInfoRequestSend:function(e){return{type:"UPDATE_USER_INFO_REQUEST_SEND",payload:{userInfo:e}}},showChangePasswordDialog:function(){return{type:"SHOW_CHANGE_PASSWORD_DIALOG"}},showChangeEmailDialog:function(){return{type:"SHOW_CHANGE_EMAIL_DIALOG"}}},qi={firstName:{label:"First Name",name:"firstName",type:"text",requirement:"Must be 2 or more alphabetical characters."},lastName:{label:"Last Name",name:"lastName",type:"text",requirement:"Must be 2 or more alphabetical characters."},institute:{label:"Institute",name:"institute",type:"text",requirement:"Maximum length is 150 characters."},department:{label:"Department",name:"department",type:"text",requirement:"Maximum length is 150 characters."},country:{label:"Country",name:"country",type:"text",requirement:"Maximum length is 150 characters."}},Qi=function(e){return{editable:!1,firstName:{value:e.firstName,valid:!0},lastName:{value:e.lastName,valid:!0},institute:{value:e.institute||"",valid:!0},department:{value:e.department||"",valid:!0},country:{value:e.country||"",valid:!0},email:{value:e.email||"",valid:!0}}},Ki=function(e){function t(e){var a;return Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value,n=e.target.name,r=a.handleValidation(n,t);a.setState(Object(u.a)({},a.state,Object(m.a)({infoHasChanged:!0},n,{value:t,valid:r})))},a.componentDidUpdate=function(e){e.user!==a.props.user&&a.setState(Object(u.a)({},a.state,{},Qi(a.props.user)))},a.handleValidation=function(e,t){var a=t.trim(),n=/$^/;switch(e){case"firstName":case"lastName":n=/^[A-Za-z ]{2,40}$/;break;case"email":n=/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-.]+)\.([a-zA-Z]{2,5})$/;break;case"institute":case"department":case"country":n=/^.{0,150}$/}return n.test(a)},a.handleEdit=function(){a.setState(Object(u.a)({},a.state,{editable:!0}))},a.handleCancel=function(){a.setState(Object(u.a)({},Qi(a.props.user),{editable:!1,infoHasChanged:!1}))},a.handleConfirm=function(){a.props.updateUserInfoRequestSend({firstName:a.state.firstName.value.trim(),lastName:a.state.lastName.value.trim(),institute:a.state.institute.value.trim(),department:a.state.department.value.trim(),country:a.state.country.value.trim()})},e.user?(a.state=Object(u.a)({},Qi(e.user),{editable:!1,infoHasChanged:!1}),a):Object(xn.a)(a)}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.user)return window.location.href="/login","";var t=this.props,a=t.classes,n=t.changeEmailDialogIsOpen,o=t.changePasswordDialogIsOpen,s=t.showChangePasswordDialog,i=t.showChangeEmailDialog,l=this.state,c=l.editable,d=l.infoHasChanged,p=!0;return Object.keys(qi).forEach((function(t){e.state[t].valid||(p=!1)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Vi,{open:o,close:function(){return e.setState(Object(u.a)({},e.state,{changePasswordDialogOpen:!1}))}}),r.a.createElement(Hi,{open:n,close:function(){return e.setState(Object(u.a)({},e.state,{changeEmailDialogOpen:!1}))}}),r.a.createElement(Tn.a,{className:a.profilePaper,elevation:6},r.a.createElement(Nn.a,{variant:"h5",align:"left",className:a.header},"Profile"),r.a.createElement(Un.a,{title:"Edit Information"},r.a.createElement(fr.a,{className:a.editButton,color:"primary",onClick:this.handleEdit,disableFocusRipple:!0,disableRipple:!0},r.a.createElement(zi.a,null))),r.a.createElement(Fn.a,{container:!0,spacing:1},Object.keys(qi).map((function(t,n){return r.a.createElement(Fn.a,{key:n,item:!0,xs:12,md:6},r.a.createElement(zn.a,{name:t,label:qi[t].label,value:e.state[t].value,error:!e.state[t].valid,helperText:e.state[t].valid?"":qi[t].requirement,key:n,onChange:e.handleChange,inputProps:{readOnly:!c},InputLabelProps:{shrink:!0},className:a.textField}))})),r.a.createElement(Fn.a,{item:!0,xs:6})),c&&r.a.createElement(Fn.a,{className:a.buttonGrid,container:!0},r.a.createElement(Fn.a,{item:!0,md:9,xs:!1}),r.a.createElement(Fn.a,{item:!0,md:1,xs:6},r.a.createElement(Bn.a,{onClick:this.handleCancel},"Cancel")),r.a.createElement(Fn.a,{item:!0,md:2,xs:6},r.a.createElement(Bn.a,{onClick:this.handleConfirm,variant:"contained",color:"primary",disabled:!d||!p},"Confirm")))),r.a.createElement(Tn.a,{className:a.accountPaper,elevation:6},r.a.createElement(Nn.a,{variant:"h5",align:"left",className:a.header},"Account"),r.a.createElement(Fn.a,{container:!0},r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{name:"email",label:"Email",value:this.state.email.value,inputProps:{readOnly:!0},InputLabelProps:{shrink:!0},className:a.textField}),r.a.createElement(Un.a,{title:"Change Email"},r.a.createElement(fr.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:function(){return i()}},r.a.createElement(zi.a,null)))),r.a.createElement(Fn.a,{item:!0,xs:12},r.a.createElement(zn.a,{name:"Password",label:"Password",value:"********",inputProps:{readOnly:!0},InputLabelProps:{shrink:!0},className:a.textField}),r.a.createElement(Un.a,{title:"Change Password"},r.a.createElement(fr.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:function(){return s()}},r.a.createElement(zi.a,null)))))))}}]),t}(n.Component),Yi=Object(l.b)((function(e,t){return{user:e.user,changePasswordDialogIsOpen:e.changePasswordDialogIsOpen,changeEmailDialogIsOpen:e.changeEmailDialogIsOpen}}),Wi)(Object(jn.a)((function(e){return{profilePaper:{"@media (min-width: 768px)":{width:"60vw"},width:"100vw",margin:"".concat(e.spacing(16),"px auto 0 auto"),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},accountPaper:{"@media (min-width: 768px)":{width:"60vw"},width:"100vw",margin:"".concat(e.spacing(6),"px auto 0 auto"),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},textField:{margin:e.spacing(1),width:"80%",maxWidth:"calc(100% - 52px)"},buttonGrid:{marginTop:e.spacing(1)},editButton:{float:"right",display:"inline-block",marginTop:"-16px"},header:{paddingLeft:e.spacing(3),display:"inline-block",marginTop:"-4px",float:"left"},accountEditButton:{float:"left",marginTop:"6px"}}}))(Ki)),$i=(Object(jn.a)((function(e){return{root:{marginTop:"70px",display:"flex"},descriptionPaper:{padding:"6vh 6vw",margin:"110px 10vw 0px 10vw"}}}))((function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(Tn.a,{className:t.descriptionPaper,elevation:8},r.a.createElement(Nn.a,{variant:"body1"},"If you wish to suggest a dataset be added to the database or have some data that you would like added, an overview of our data submission process can be found ",r.a.createElement(Qn.a,{target:"_blank",href:"https://cmap.readthedocs.io/en/latest/faq_and_contributing/datasubmission.html"},"here"),".")))})),a(50)),Zi=a.n($i),Ji=a(817),Xi=a(822),el=a(823),tl=a(818),al=a(819),nl=a(820),rl=a(821),ol=function(e){function t(e){var a;Object(ue.a)(this,t);var n=e.context,o=n.getAuditReport,s=n.sheet,i=e.rowIndex,l=e.column.colId,c=o();return(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value,n=a.props.context.auditCell(t,a.props.column.colId,a.props.rowIndex);a.setState(Object(u.a)({},a.state,{value:t,errors:n}))},a.afterGuiAttached=function(){a.inputRef.current.focus(),a.inputRef.current.select(),setTimeout((function(){a.setState(Object(u.a)({},a.state,{attached:!0}))}),20)},a.handleClickAway=function(){a.state.attached&&a.props.stopEditing()},a.inputRef=r.a.createRef(),a.parseValue=e.parseValue,a.state={value:e.value||"",errors:c[s][i]&&c[s][i][l]?c[s][i][l]:[],attached:!1},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"getValue",value:function(){return this.parseValue(this.state.value)}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{style:{maxWidth:"175px",margin:"0 auto"}},r.a.createElement(Ci.a,{onClickAway:this.handleClickAway},r.a.createElement("div",null,r.a.createElement("input",{spellCheck:"false",ref:this.inputRef,value:this.state.value,onChange:this.handleChange,style:{backgroundColor:"transparent",color:"white",height:"28px",border:"1px solid black",borderRadius:"2px",padding:"2px 6px",maxWidth:"100%"}}),e.map((function(e,t){return r.a.createElement("p",{key:t,style:{lineHeight:1.2,margin:"6px auto",textAlign:"left",maxWidth:"100%",whiteSpace:"pre-wrap"}},e)})))))}}]),t}(r.a.Component),sl=function(e){function t(e){var a;Object(ue.a)(this,t);var n=e.context,o=n.getAuditReport,s=n.sheet,i=e.rowIndex,l=e.column.colId;(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value,n=a.props.context.auditCell(t,a.props.column.colId,a.props.rowIndex);a.setState(Object(u.a)({},a.state,{value:t,errors:n}))},a.afterGuiAttached=function(){a.inputRef.current.focus(),setTimeout((function(){a.setState(Object(u.a)({},a.state,{attached:!0}))}),20)},a.handleClickAway=function(){a.state.attached&&a.props.stopEditing()},a.isPopup=function(){return!0};var c=o();return a.inputRef=r.a.createRef(),a.parseValue=e.parseValue,a.state={value:e.value||"",errors:c[s][i]&&c[s][i][l]?c[s][i][l]:[],attached:!1},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"getValue",value:function(){return this.parseValue(this.state.value)}},{key:"render",value:function(){var e=this.state.errors,t=this.props,a=t.column,n=t.context.textAreaLookup[a.colId];return r.a.createElement("div",{style:{margin:"0 auto",width:"auto",padding:"12px",height:"auto"}},r.a.createElement(Ci.a,{onClickAway:this.handleClickAway},r.a.createElement("div",null,r.a.createElement("textarea",{rows:n,cols:"70",spellCheck:"false",ref:this.inputRef,value:this.state.value,onChange:this.handleChange,style:{backgroundColor:"transparent",color:"white",border:"1px solid ".concat(kn.primary),borderRadius:"2px",padding:"2px 6px"}}),e.map((function(e,t){return r.a.createElement("p",{key:t,style:{lineHeight:1.2,margin:"6px auto",textAlign:"left",maxWidth:"100%",whiteSpace:"pre-wrap"}},e)})))))}}]),t}(r.a.Component),il=function(e){function t(e){var a;Object(ue.a)(this,t);var n=e.context,o=n.getAuditReport,s=n.sheet,i=e.rowIndex,l=e.column.colId,c=o();(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState(Object(u.a)({},a.state,{value:t}),(function(){return a.props.stopEditing()}))},a.afterGuiAttached=function(){a.inputRef.current.focus(),setTimeout((function(){a.setState(Object(u.a)({},a.state,{attached:!0}))}),20)},a.handleClickAway=function(){a.state.attached&&a.props.stopEditing()},a.isPopup=function(){return!0},a.inputRef=r.a.createRef(),a.parseValue=e.parseValue;var d=new Set(e.context.selectOptions[l]),p=e.value?e.value.toLowerCase():"";return p=d.has(p)?p:"",a.state={value:p,errors:c[s][i]&&c[s][i][l]?c[s][i][l]:[],attached:!1},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"getValue",value:function(){return this.parseValue(this.state.value)}},{key:"render",value:function(){var e=this.state.errors,t=this.props,a=t.column,n=t.context.selectOptions[a.colId].map((function(e,t){return r.a.createElement("option",{key:t+1,value:e.toLowerCase(),className:"ds-cell-editor-select-option",style:{backgroundColor:"#184562"}},e)})),o=[r.a.createElement("option",{key:0,disabled:!0,style:{display:"none"},value:""})].concat(Object(h.a)(n));return r.a.createElement("div",{style:{margin:"0 auto",width:"auto",padding:"12px",height:"auto",maxWidth:"300px"}},r.a.createElement(Ci.a,{onClickAway:this.handleClickAway},r.a.createElement("div",null,r.a.createElement("select",{ref:this.inputRef,value:this.state.value,onChange:this.handleChange,style:{backgroundColor:"transparent",color:"white",border:"1px solid ".concat(kn.primary),borderRadius:"2px",padding:"2px 6px"}},o),e.map((function(e,t){return r.a.createElement("p",{key:t,style:{lineHeight:1.2,margin:"6px auto",textAlign:"left",maxWidth:"100%",whiteSpace:"pre-wrap"}},e)})),r.a.createElement("p",{style:{lineHeight:1.2,margin:"10px auto",textAlign:"left",maxWidth:"100%",whiteSpace:"pre-wrap"}},"If you don't see the correct value on this list please contact us at: ","\n",r.a.createElement("a",{style:{color:kn.primary,textDecoration:"none"},href:"mailto:cmap-data-submission@uw.edu"},"cmap-data-submission@uw.edu"),"."))))}}]),t}(r.a.Component),ll=function(e){var t=e.newValue;return isNaN(t)?null:Number(t)},cl={data:[{headerName:"Time",field:"time"},{headerName:"Latitude",field:"lat",valueParser:ll},{headerName:"Longitude",field:"lon",valueParser:ll},{headerName:"Depth",field:"depth",valueParser:ll}],dataset_meta_data:[{headerName:"Short Name",field:"dataset_short_name",autoHeight:!0,tooltipField:"dataset_short_name"},{headerName:"Long Name",field:"dataset_long_name",autoHeight:!0,tooltipField:"dataset_long_name",cellEditor:"DSCellEditorTextArea"},{headerName:"Version",field:"dataset_version",autoHeight:!0},{headerName:"Release Date",field:"dataset_release_date",autoHeight:!0},{headerName:"Make",field:"dataset_make",autoHeight:!0,cellEditor:"DSCellEditorSelect"},{headerName:"Source",field:"dataset_source",autoHeight:!0},{headerName:"Cruise Names",field:"cruise_names",autoHeight:!0,tooltipField:"cruise_names",cellEditor:"DSCellEditorTextArea"},{headerName:"Distributor",field:"dataset_distributor",autoHeight:!0,cellEditor:"DSCellEditorTextArea"},{headerName:"acknowledgement",field:"dataset_acknowledgement",autoHeight:!0,tooltipField:"dataset_acknowledgement",cellEditor:"DSCellEditorTextArea"},{headerName:"History",field:"dataset_history",autoHeight:!0,tooltipField:"dataset_history",cellEditor:"DSCellEditorTextArea"},{headerName:"Description",field:"dataset_description",autoHeight:!0,tooltipField:"dataset_description",cellEditor:"DSCellEditorTextArea"},{headerName:"References",field:"dataset_references",autoHeight:!0,tooltipField:"dataset_references",cellEditor:"DSCellEditorTextArea"},{headerName:"climatology",field:"climatology",valueParser:ll}],vars_meta_data:[{headerName:"Short Name",field:"var_short_name",autoHeight:!0,tooltipField:"var_short_name"},{headerName:"Long Name",field:"var_long_name",autoHeight:!0,tooltipField:"var_long_name",cellEditor:"DSCellEditorTextArea"},{headerName:"Sensor",field:"var_sensor",autoHeight:!0,cellEditor:"DSCellEditorSelect"},{headerName:"Unit",field:"var_unit",autoHeight:!0},{headerName:"Spatial Resolution",field:"var_spatial_res",autoHeight:!0,cellEditor:"DSCellEditorSelect"},{headerName:"Temporal Resolution",field:"var_temporal_res",autoHeight:!0,cellEditor:"DSCellEditorSelect"},{headerName:"Discipline",field:"var_discipline",autoHeight:!0,cellEditor:"DSCellEditor"},{headerName:"Visualize",field:"visualize",autoHeight:!0},{headerName:"Keywords",field:"var_keywords",autoHeight:!0,tooltipField:"var_keywords",cellEditor:"DSCellEditorTextArea"},(Rs={headerName:"Comment",field:"var_comment",tooltipField:"var_comment",autoHeight:!0},Object(m.a)(Rs,"tooltipField","var_comment"),Object(m.a)(Rs,"cellEditor","DSCellEditorTextArea"),Rs)]},ul=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props.gridContext;return r.a.createElement(Xn.AgGridReact,{singleClickEdit:!0,onModelUpdated:a.props.onModelUpdated,columnDefs:cl[e.sheet],defaultColDef:a.props.defaultColumnDef,rowData:a.props.rowData,onGridReady:a.props.onGridReady,suppressDragLeaveHidesColumns:!0,suppressMovableColumns:!0,enableCellTextSelection:!0,suppressContextMenu:!0,onCellValueChanged:a.props.handleCellValueChanged,context:e,onGridSizeChanged:a.props.handleGridSizeChanged,frameworkComponents:{DSCellEditor:ol,DSCellEditorSelect:il,DSCellEditorTextArea:sl}})},a}return Object(yn.a)(t,e),t}(r.a.Component),dl=function(e,t){try{var a=e[0].time;if(/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?$/.test(a));else{var n=!!((t.Workbook||{}).WBProps||{}).date1904;"number"===typeof a?n?e.forEach((function(e){e.time=new Date(86400*(e.time-25567)*1e3+126144e6).toISOString().slice(0,-5)})):e.forEach((function(e){e.time=new Date(86400*(e.time-25567)*1e3).toISOString().slice(0,-5)})):e.forEach((function(e){e.time=new Date(e.time).toISOString().slice(0,-5)}))}}catch(s){console.log("Caught while formatting data")}var r=Object.keys(e[0]),o=[];return r.forEach((function(e){-1!==e.indexOf("__EMPTY")&&o.push(e)})),o.length&&e.forEach((function(e){o.forEach((function(t){delete e[t]}))})),e},pl=function(e,t){try{var a=e[0],n=typeof a.dataset_release_date,r=!!((t.Workbook||{}).WBProps||{}).date1904;a.dataset_release_date="number"===n?r?new Date(86400*(a.dataset_release_date-25567)*1e3+126144e6).toISOString().slice(0,-14):new Date(86400*(a.dataset_release_date-25567)*1e3).toISOString().slice(0,-14):new Date(a.dataset_release_date).toISOString().slice(0,-14)}catch(o){return e}return e},ml=function(e){var t=e.Make,a=e.Sensor,n=e.Spatial_Resolution,r=e.Study_Domain,o=e.Temporal_Resolution,s=function(e){return e||0===e?isNaN(e)||""===e?"Must be a number":void 0:null},i=function(e){if(null===e||void 0===e||""===e)return"Value is required"},l=function(e,t){return function(a){if((a+="").length<e||a.length>t)return"Must be ".concat(e," to ").concat(t," characters in length")}},c=function(e,t){return function(a,n){if((a+="").length<e&&0===n||a.length>t&&0===n)return"Must be ".concat(e," to ").concat(t," characters in length")}},u=t.map((function(e){return e.toLowerCase()})),d=new Set(u),p=r.map((function(e){return e.toLowerCase()})),m=new Set(p),h=a.map((function(e){return e.toLowerCase()})),b=new Set(h),f=function(e){if(!/^[a-zA-Z]{1}[a-zA-Z0-9_]*$/.test(e))return"Must start with a letter and contain only letters, numbers, and underscores."},g=function(e){return e&&1!==e?"Must be 0, 1, or empty.":void 0},E=n.map((function(e){return e.toLowerCase()})),x=new Set(E),v=o.map((function(e){return e.toLowerCase()})),y=new Set(v),S=function(e,t){if((e||0===e)&&t>0)return"Value only allowed in first row of sheet"};return{time:[i,function(e){return e||0===e?!1===/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?$/.test(e)?"Format must match 2016-04-21T15:22:00":void 0:null}],lat:[s,i,function(e){if(e<-90||e>90)return"Must be -90 to 90"}],lon:[s,i,function(e){if(e<-180||e>180)return"Must be -180 to 180"}],depth:[s,function(e){if(e<0)return"Cannot be negative"},function(e){if(e>11e3)return"Cannot be greater than 11000"}],dataset_short_name:[f,c(1,50),S],dataset_long_name:[c(1,130),S],dataset_version:[l(0,50),S],dataset_release_date:[function(e,t){if(0===t)return/^([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$/.test(e)?void 0:"Format must match 2018-06-20"},S],dataset_make:[function(e,t){if(0===t)return null===e||void 0===e||""===e?"Value is required":void 0},function(e){if(e&&0!==e&&!d.has(e.toLowerCase()))return"Must be one of the above options."},S],dataset_source:[c(1,50),S],dataset_distributor:[l(0,100),S],dataset_acknowledgement:[c(1,300)],dataset_history:[l(0,500),S],dataset_description:[c(50,1e4),S],dataset_references:[c(1,500)],climatology:[g,S],cruise_names:[c(0,200)],var_short_name:[f,l(1,50)],var_long_name:[l(1,200)],var_sensor:[function(e){if(e&&0!==e&&!b.has(e.toLowerCase()))return"Must be one of the above options."}],var_unit:[],var_spatial_res:[i,function(e){if(e&&0!==e&&!x.has(e.toLowerCase()))return"Must be one of the above options."}],var_temporal_res:[i,function(e){if(e&&0!==e&&!y.has(e.toLowerCase()))return"Must be one of the above options."}],var_discipline:[function(e){if(e&&0!==e&&!m.has(e.toLowerCase()))return"Must be one of the above options."}],visualize:[g],var_keywords:[]}},hl=a(816),bl=a(840),fl=new Set(["nan","NaN","NAN","Nan","null","Null","NULL"]),gl=function(e){var t=e.data,a=e.dataset_meta_data,n=e.vars_meta_data,r=[],o=[],s=function(e){var t=[];return["data","vars_meta_data","dataset_meta_data"].forEach((function(a){e.Sheets[a]||t.push(a)})),t}(e.workbook);if(s.length)return r.push("Workbook is missing required sheet".concat(s.length>1?"s":"",": ").concat(s.join(", "),".")),{errors:r,warnings:o};if(!t.length)return r.join.push("Found no rows on the data sheet"),{errors:r,warnings:o};var i=function(e){var t=[],a=e[0];return["time","lat","lon"].forEach((function(e){a[e]||0===a[e]||t.push(e)})),t}(t);i.length&&r.push("Data sheet is missing required column".concat(i.length>1?"s":"",": ").concat(i.join(", ")));var l=new Set(["time","lat","lon","depth"]),c=new Set(Object.keys(t[0]).filter((function(e){return!l.has(e)}))),u=function(e,t,a){return t.map((function(e){return e.var_short_name})).filter((function(e){return!a.has(e)}))}(0,n,c);u.length&&r.push("The following value".concat(u.length>1?"s":""," ")+"for var_short_name on the vars_meta_data sheet did not match a column header on the data sheet:\n"+"".concat(u.join(", "),"."));var d=function(e,t){var a=[];return t.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n][t]||0===e[n][t])return;a.push(t)})),a}(t,c);d.length&&r.push("The column".concat(d.length>1?"s":""," ").concat(d.join(", ")," contain").concat(d>1?"":"s"," no values.")),function(e){for(var t=Boolean(e[0].depth||0==e[0].depth),a=0;a<e.length;a++)if(t!=Boolean(e[a].depth||0==e[a].depth))return!1;return!0}(t)||r.push("The depth column on the data sheet must contain a value for every row, or be empty."),function(e,t){var a=t.some((function(e){return e.var_sensor&&"in-situ"==e.var_sensor.toLowerCase()})),n=e[0].dataset_make&&"observation"==e[0].dataset_make.toLowerCase(),r=Boolean(a&&n),o=e[0].cruise_names;return Boolean(r&&!o)}(a,n)&&o.push("The supplied values for make and sensor suggest that some or all of your data may have been gathered on a scientific cruise, but no values were included for cruise_names in the dataset_meta_data sheet. Including cruise names will improve the discoverability of your data."),function(e){var t=e[0].lon,a=e[0].lon,n=e[0].lat,r=e[0].lat,o=Math.PI;return e.forEach((function(e){e.lon<t&&(t=e.lon),e.lon>a&&(a=e.lon),e.lat<n&&(n=e.lat),e.lat>r&&(r=e.lat)})),Boolean(t>=-o&&a<=o&&n>=-o/2&&r<=o/2)}(t)&&o.push("Values supplied for lat and lon indicate the possible use of radian as unit of measurement.Lat and lon must be in degrees north and degrees east, respectively.");var p=function(e){var t=Boolean(e[0].depth||0==e[0].depth),a={},n=[];try{for(var r=0;r<e.length;r++)if(void 0===a[e[r].time]&&(a[e[r].time]={}),void 0===a[e[r].time][e[r].lat]&&(a[e[r].time][e[r].lat]={}),t){if(void 0===a[e[r].time][e[r].lat][e[r].lon]&&(a[e[r].time][e[r].lat][e[r].lon]={}),void 0===a[e[r].time][e[r].lat][e[r].lon][e[r].depth])a[e[r].time][e[r].lat][e[r].lon][e[r].depth]=r+2;else if(n.push({row:r+2,matched:a[e[r].time][e[r].lat][e[r].lon][e[r].depth]}),n.length>5)return n}else if(void 0===a[e[r].time][e[r].lat][e[r].lon])a[e[r].time][e[r].lat][e[r].lon]=r+2;else if(n.push({row:r+2,matched:a[e[r].time][e[r].lat][e[r].lon]}),n.length>5)return n}catch(o){n=[]}return n}(t);p.length&&o.push("Found non-unique space and time value combinations"+"".concat(p.length>=5?"(Showing a maximum of 5 matches)":"",":\n")+"".concat(p.map((function(e){return"Row ".concat(e.row," matched ").concat(e.matched)})).join("\n")));var m=function(e,t){var a=[];return t.forEach((function(t){for(var n,r=0;r<e.length;r++)if(void 0===n)(e[r][t]||0==e[r][t])&&(n=!isNaN(parseFloat(e[r][t])));else if(n&&(e[r][t]||0==e[r][t])){if(isNaN(parseFloat(e[r][t]))){a.push({column:t,row:r+2});break}}else if((e[r][t]||0==e[r][t])&&!isNaN(parseFloat(e[r][t]))){a.push({column:t,row:r+2});break}})),a}(t,c);m.length&&o.push("Found column".concat(m.length>1?"s":""," with a mixture of string and numerical data types.")+"\n".concat(m.map((function(e){return"Column ".concat(e.column," contained a value of unexpected type in row ").concat(e.row)})).join("\n")));var h=function(e,t){var a=[];return t.forEach((function(t){(function(e,t){for(var a,n=0;void 0===a&&n<e.length;)(e[n][t]||0==e[n][t])&&(a=e[n][t]),n++;for(var r=n;r<e.length;r++)if(e[r][t]!=a)return!1;return!0})(e,t)&&a.push(t)})),a}(t,c);h.length&&o.push("Found column".concat(h.length>1?"s":""," on data sheet with all identical values: ").concat(h.join(", "),"."));var b=function(e,t){for(var a=[],n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(fl.has(e[n][t[r]])&&(a.push({row:n+2,column:t[r]}),a.length>4))return a;return a}(t,c);b.length&&r.push("NaN and null strings are not allowed. Cells should contain a value or be blank."+"".concat(b.length>4?"Showing a maximum of 5 matches.":"")+"Found illegal value".concat(b.length>1?"s":"")+"at ".concat(b.map((function(e){return"row ".concat(e.row," column ").concat(e.column)})).join("\n"),"."));var f=function(e,t){var a=[],n={};t.forEach((function(e){return n[e]=[]}));var r={};t.forEach((function(e){return r[e]={}})),e.forEach((function(e){t.forEach((function(t){n[t].push(e[t])}))})),t.forEach((function(e){r[e].mean=Object(hl.a)(n[e]),r[e].deviation=Object(bl.a)(n[e])}));for(var o=Object.keys(r),s=0;s<o.length;s++)if((r[o[s]].mean||0===r[o[s]].mean)&&(r[o[s]].deviation||0===r[o[s]].deviation))for(var i=0;i<e.length;i++)if((e[i][o[s]]||0==e[i][o[s]])&&Math.abs(e[i][o[s]]-r[o[s]].mean)>5*r[o[s]].deviation&&(a.push({row:i+2,column:o[s],value:e[i][o[s]]}),a.length>9))return a;return a}(t,c);return f.length&&o.push("Found possible data outlier".concat(f.length>1?"s":""," ")+"".concat(f.length>9?"(Showing a maximum of 10 values)":"",":\n")+"".concat(f.map((function(e){return"Value ".concat(e.value," in column ").concat(e.column," row ").concat(e.row)})).join("\n"))),{errors:r,warnings:o}},El={snackbarOpen:U,uploadSubmission:function(e){return{type:"UPLOAD_SUBMISSION",payload:{file:e.file,datasetName:e.datasetName}}},setLoadingMessage:z,retrieveMostRecentFile:function(e){return{type:"RETRIEVE_MOST_RECENT_FILE",payload:{submissionID:e}}},storeSubmissionFile:ae,checkSubmissionOptionsAndStoreFile:ne},xl=Object(l.b)(null,{setUploadState:re})((function(e){return r.a.useEffect((function(){return function(){e.setUploadState(null)}})),""})),vl={var_keywords:4,var_comment:5,var_long_name:3,dataset_references:8,dataset_description:14,dataset_acknowledgement:8,cruise_names:5,dataset_long_name:3,dataset_history:3,dataset_distributor:3},yl=[{},{label:"Workbook Validation",sheet:"workbook"},{label:"Data Sheet",sheet:"data"},{label:"Dataset Metadata Sheet",sheet:"dataset_meta_data"},{label:"Variable Metadata Sheet",sheet:"vars_meta_data"},{label:"Submission",sheet:"submission"}],Sl={data:["time","lat","lon","depth"],dataset_meta_data:["dataset_short_name","dataset_long_name","dataset_version","dataset_release_date","dataset_make","cruise_names","dataset_source","dataset_distributor","dataset_acknowledgement",,"dataset_doi","dataset_history","dataset_description","dataset_references","climatology"],vars_meta_data:["var_short_name","var_long_name","var_unit","var_sensor","var_spatial_res","var_temporal_res","var_discipline","visualize","var_keywords","var_comment"]},Ol=function(e){return{var_temporal_res:e.Temporal_Resolution,var_discipline:e.Study_Domain,var_sensor:e.Sensor,var_spatial_res:e.Spatial_Resolution,dataset_make:e.Make}},wl=Object(jn.a)((function(e){return{badge:{right:-11,top:1,backgroundColor:"rgba(255, 0, 0, .6)"}}}))(Ji.a),Cl=Object(jn.a)((function(e){return{badge:{right:-11,top:1,backgroundColor:"green"}}}))(Ji.a),kl={auditReport:{workbook:{errors:["This workbook exceeds the file size limit of this application. Please contact our data curation team at cmap-data-submission@uw.edu for assistance."],warnings:[]},data:[],dataset_meta_data:[],vars_meta_data:[]},validationStep:1},Al=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(o)))).checkCellStyle=function(e){var t=e.node.childIndex,n=e.column.colId,r=e.context.sheet,o={};return a.state.auditReport&&a.state.auditReport[r]&&a.state.auditReport[r][t]&&a.state.auditReport[r][t][n]&&(o.boxShadow="inset 0 0 3px 2px rgba(255, 0, 0, .5)"),o},a.state={validationStep:0,file:null,data:null,dataset_meta_data:null,vars_meta_data:null,auditReport:null,defaultColumnDef:{menuTabs:[],resizable:!0,editable:!0,cellStyle:a.checkCellStyle,cellEditor:"DSCellEditor",width:270}},a.handleGridSizeChanged=function(){2===a.state.validationStep&&a.gridApi.sizeColumnsToFit()},a.handleDragOver=function(e){e.preventDefault()},a.auditCell=function(e,t,n){var r=[],o=a.audits[t];return o&&o.forEach((function(t){var a=t(e,n);a&&r.push(a)})),r},a.auditWorkbook=function(e){return gl(e)},a.auditRows=function(e){var t=[];return e.forEach((function(e,n){var r={};Object.keys(e).forEach((function(t){var o=a.auditCell(e[t],t,n);o.length&&(r[t]=o)})),Object.keys(r).length&&(t[n]=r)})),t},a.performAudit=function(e){return{workbook:a.auditWorkbook(e),data:a.auditRows(e.data),dataset_meta_data:a.auditRows(e.dataset_meta_data),vars_meta_data:a.auditRows(e.vars_meta_data)}},a.handleResetState=function(){a.props.storeSubmissionFile(null),a.props.history.push({pathname:"/datasubmission/validationtool",query:{}}),a.setState(Object(u.a)({},a.state,{data:null,dataset_meta_data:null,vars_meta_data:null,validationStep:0}))},a.handleChangeValidationStep=function(e){a.setState(Object(u.a)({},a.state,{validationStep:e}),(function(){a.gridApi&&2==e&&a.gridApi.sizeColumnsToFit()}))},a.handleCellValueChanged=function(e){var t,n=e.rowIndex,r=e.newValue,o=e.column,s=e.node,i=e.context;if(e.oldValue!==r){var l=i.sheet,c=a.auditCell(r,o.colId,n),d=Object(u.a)({},a.state.auditReport);d[l][n]||(d[l][n]={}),d[l]=Object(h.a)(a.state.auditReport[l]),c.length?d[l][n][o.colId]=c:delete d[l][n][o.colId],Object.keys(d[l][n]).length||(d[l][n]=null);var p=[].concat(Object(h.a)(a.state[l].slice(0,n)),[s.data],Object(h.a)(a.state[l].slice(n+1)));a.setState(Object(u.a)({},a.state,(t={},Object(m.a)(t,l,p),Object(m.a)(t,"auditReport",d),t)),(function(){a.gridApi.redrawRows()}))}},a.handleReadFile=function(e){var t=new FileReader;e.size>15e7?a.setState(Object(u.a)({},a.state,{},kl),(function(){return a.props.setLoadingMessage("")})):(t.onload=function(e){var t=new Uint8Array(e.target.result),n=Zi.a.read(t,{type:"array"}),r=Zi.a.utils.sheet_to_json(n.Sheets.data,{defval:null}),o=r?dl(r,n):r,s=Zi.a.utils.sheet_to_json(n.Sheets.dataset_meta_data,{defval:null}),i=s?pl(s,n):s,l=Zi.a.utils.sheet_to_json(n.Sheets.vars_meta_data,{defval:null}),c=a.performAudit({workbook:n,data:o,dataset_meta_data:i,vars_meta_data:l}),d=c.workbook.errors.length||c.workbook.warnings.length?1:2;a.setState(Object(u.a)({},a.state,{data:o,dataset_meta_data:i,vars_meta_data:l,auditReport:c,validationStep:d}),(function(){return a.props.setLoadingMessage("")}))},t.readAsArrayBuffer(e))},a.handleDrop=function(e){e.preventDefault();var t=e.dataTransfer.items[0].getAsFile();a.props.setLoadingMessage("Reading Workbook"),a.props.checkSubmissionOptionsAndStoreFile(t)},a.handleFileSelect=function(e){var t=e.target.files[0];t&&(a.props.setLoadingMessage("Reading Workbook"),a.props.checkSubmissionOptionsAndStoreFile(t),e.target.value=null)},a.handleUploadSubmission=function(){var e=Zi.a.utils.book_new();Zi.a.utils.book_append_sheet(e,Zi.a.utils.json_to_sheet(a.state.data),"data"),Zi.a.utils.book_append_sheet(e,Zi.a.utils.json_to_sheet(a.state.dataset_meta_data),"dataset_meta_data"),Zi.a.utils.book_append_sheet(e,Zi.a.utils.json_to_sheet(a.state.vars_meta_data),"vars_meta_data");var t=Zi.a.write(e,{bookType:"xlsx",type:"array"}),n=new Blob([t]);n.name="".concat(a.state.dataset_meta_data[0].dataset_short_name,".xlsx"),a.props.uploadSubmission({file:n,datasetName:a.state.dataset_meta_data[0].dataset_short_name})},a.handleDownload=function(){a.props.setLoadingMessage("Downloading"),setTimeout((function(){window.requestAnimationFrame((function(){return a.props.setLoadingMessage("")}))}),50);var e=Zi.a.utils.book_new();Zi.a.utils.book_append_sheet(e,Zi.a.utils.json_to_sheet(a.state.data),"data"),Zi.a.utils.book_append_sheet(e,Zi.a.utils.json_to_sheet(a.state.dataset_meta_data),"dataset_meta_data"),Zi.a.utils.book_append_sheet(e,Zi.a.utils.json_to_sheet(a.state.vars_meta_data),"vars_meta_data"),Zi.a.writeFile(e,a.state.dataset_meta_data[0].dataset_short_name+".xlsx")},a.onGridReady=function(e){a.gridApi=e.api,a.columnApi=e.columnApi,2===a.state.validationStep&&a.gridApi.sizeColumnsToFit()},a.onModelUpdated=function(e){a.gridApi&&"data"===yl[a.state.validationStep].sheet&&a.gridApi.sizeColumnsToFit()},a.scrollGridTo=function(e){a.gridApi.ensureIndexVisible(e,"middle")},a.handleFindNext=function(){var e=a.gridApi.getFocusedCell(),t=yl[a.state.validationStep].sheet,n=a.state.auditReport,r=Sl[t],o=e?e.rowIndex:-1,s=e?r.findIndex((function(t){return t===e.column.colId})):0;if(e)for(var i=s+1;i<r.length&&i>-1;i++)if(n[t][o]&&n[t][o][r[i]])return a.gridApi.ensureColumnVisible(r[i]),void a.gridApi.startEditingCell({rowIndex:o,colKey:r[i]});for(var l=o+1;l!=o;l++){if(n[t][l])for(var c=0;c<r.length;c++)if(n[t][l][r[c]])return a.gridApi.ensureColumnVisible(r[c]),void a.gridApi.startEditingCell({rowIndex:l,colKey:r[c]});l===n[t].length&&(l=-1)}if(e)for(var u=0;u<=s&&u<r.length;u++)if(n[t][o]&&n[t][o][r[u]])return a.gridApi.ensureColumnVisible(r[u]),void a.gridApi.startEditingCell({rowIndex:o,colKey:r[u]})},a.countErrors=function(){var e={workbook:a.state.auditReport.workbook.errors.length,data:0,dataset_meta_data:0,vars_meta_data:0};return a.state.auditReport.data.forEach((function(t){t&&(e.data+=Object.keys(t).length)})),a.state.auditReport.dataset_meta_data.forEach((function(t){t&&(e.dataset_meta_data+=Object.keys(t).length)})),a.state.auditReport.vars_meta_data.forEach((function(t){t&&(e.vars_meta_data+=Object.keys(t).length)})),e},a.handleClickTab=function(e,t){a.setState(Object(u.a)({},a.state,{validationStep:t}))},a.componentDidMount=function(){var e=new URLSearchParams(window.location.search).get("submissionID");e&&a.props.retrieveMostRecentFile(e)},a.componentWillUnmount=function(){a.props.storeSubmissionFile(null)},a.componentDidUpdate=function(e,t){(!e.submissionOptions&&a.props.submissionOptions||!a.audits&&a.props.submissionOptions)&&(a.audits=ml(a.props.submissionOptions)),e.submissionFile!==a.props.submissionFile&&a.props.submissionFile&&a.handleReadFile(a.props.submissionFile)},a.render=function(){if(!a.props.user)return r.a.createElement(Yn,null);var e,t=a.props.classes,n=a.state.validationStep,o=a.state.dataset_meta_data&&a.state.dataset_meta_data.length?a.state.dataset_meta_data[0].dataset_short_name:null,s=yl[n].sheet;return n>0&&n<5&&(e=a.countErrors()),r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{className:t.needHelp},"Need help?",r.a.createElement(Qn.a,{href:"https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx",download:"datasetTemplate.xlsx",className:t.needHelpLink},"\xa0Download"),"\xa0a blank template, or view the ",r.a.createElement(Qn.a,{className:t.needHelpLink,component:An.b,to:"/datasubmission/guide"},"Data Submission Guide"),"."),r.a.createElement(Tn.a,{elevation:2,className:"".concat(t.fileSelectPaper," ").concat(!a.props.submissionFile&&t.addBorder),onDragOver:a.handleDragOver,onDrop:a.handleDrop},a.props.submissionFile?r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{variant:"h6",className:t.currentlyViewingTypography},o?"".concat(o):"",r.a.createElement("label",{htmlFor:"select-file-input",className:t.chooseNewFileLabel},"Select a Different File")," ","\n"),r.a.createElement("div",null,r.a.createElement(Un.a,{title:"Previous Section"},r.a.createElement("div",{className:t.ilb},r.a.createElement(fr.a,{size:"small",onClick:function(){return a.handleChangeValidationStep(a.state.validationStep-1)},disabled:Boolean(a.state.validationStep<=1)},r.a.createElement(tl.a,null)))),r.a.createElement("span",{className:t.currentSectionSpan},yl[n].label),r.a.createElement(Un.a,{title:"Next Section"},r.a.createElement("div",{className:t.ilb},r.a.createElement(fr.a,{size:"small",onClick:function(){return a.handleChangeValidationStep(a.state.validationStep+1)},disabled:Boolean(n>=5||1===n&&e.workbook||4===n&&(e.data>0||e.dataset_meta_data>0||e.vars_meta_data>0))},r.a.createElement(al.a,null)))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{variant:"h5"},"To begin drag or",r.a.createElement("label",{htmlFor:"select-file-input"},r.a.createElement(Bn.a,{variant:"contained",color:"primary",component:"span",className:t.button},"Select File")))),n>1&&n<5&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Rn.a,{className:t.divider}),Boolean(e[s]>0)?r.a.createElement(Nn.a,{variant:"body2"},r.a.createElement(nl.a,{style:{color:"rgba(255, 0, 0, .7)",margin:"0 2px -5px 0",fontSize:"1.4em"}}),"We found ",e[s]," cell",e[s]>1?"s":""," with errors on this sheet.",r.a.createElement("span",{className:t.linkLabel,onClick:a.handleFindNext}," Find Errors")):Boolean("vars_meta_data"===s&&(e.data||e.dataset_meta_data))?r.a.createElement(Nn.a,{variant:"body2"},r.a.createElement(nl.a,{style:{color:"rgba(255, 0, 0, .7)",margin:"0 2px -5px 0",fontSize:"1.4em"}}),"Please correct errors from the previous sheets before moving forward."):r.a.createElement(Nn.a,{variant:"body2"},r.a.createElement(rl.a,{style:{color:kn.primary,margin:"0 2px -5px 0",fontSize:"1.4em"}}),"All set! Click the arrow above to move to the next step."))),Boolean(1===n)&&r.a.createElement(Tn.a,{elevation:2,className:"".concat(t.workbookAuditPaper)},r.a.createElement(Nn.a,{style:{marginBottom:"24px"}},Boolean(a.state.auditReport.workbook.errors.length)&&r.a.createElement(r.a.Fragment,null,"One or more parts of your submission did not match CMAP's requirements. Please review the information below, update your workbook, and ",r.a.createElement("label",{className:t.linkLabel,htmlFor:"select-file-input"},"try again"),"."),Boolean(!a.state.auditReport.workbook.errors.length&&a.state.auditReport.workbook.warnings.length)&&"We found some potential issues with your submission.",Boolean(a.state.auditReport.workbook.warnings.length)&&r.a.createElement(r.a.Fragment,null,"\n","\n","Messages marked with a yellow icon",r.a.createElement(nl.a,{style:{color:"rgba(255, 255, 0, .7)",fontSize:"18px",margin:"0 3px -4px 3px"}}),"are warnings. These should be reviewed and corrected if necessary, but will not prevent you from moving to the next validation step.")),r.a.createElement(Ri.a,{dense:!0},a.state.auditReport.workbook.errors.map((function(e,t){return r.a.createElement(Kr.a,{key:t},r.a.createElement(Xi.a,{style:{color:"rgba(255, 0, 0, .7)"}},r.a.createElement(nl.a,null)),r.a.createElement(el.a,{primary:e}))})),a.state.auditReport.workbook.warnings.map((function(e,t){return r.a.createElement(Kr.a,{key:t},r.a.createElement(Xi.a,{style:{color:"rgba(255, 255, 0, .7)"}},r.a.createElement(nl.a,null)),r.a.createElement(el.a,{primary:e}))})))),Boolean(a.state.data&&a.state.data.length&&n>=2&&n<5)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Tn.a,{elevation:2,className:t.tabPaper+" ag-theme-material"},r.a.createElement(As.a,{value:n,onChange:a.handleClickTab},r.a.createElement(_s.a,{value:2,label:e.data>0?r.a.createElement(wl,{badgeContent:e.data},"Data"):r.a.createElement(Cl,{badgeContent:"\u2713"},"Data"),className:t.workbookTab}),r.a.createElement(_s.a,{value:3,label:e.dataset_meta_data>0?r.a.createElement(wl,{badgeContent:e.dataset_meta_data},"Dataset Metadata"):r.a.createElement(Cl,{badgeContent:"\u2713"},"Dataset Metadata"),className:t.workbookTab}),r.a.createElement(_s.a,{value:4,label:e.vars_meta_data>0?r.a.createElement(wl,{badgeContent:e.vars_meta_data},"Variable Metadata"):r.a.createElement(Cl,{badgeContent:"\u2713"},"Variable Metadata"),className:t.workbookTab})),r.a.createElement("div",{style:{height:"calc(100% - 48px)"}},r.a.createElement(ul,{onGridReady:a.onGridReady,rowData:a.state[s],defaultColumnDef:a.state.defaultColumnDef,handleCellValueChanged:a.handleCellValueChanged,handleGridSizeChanged:a.handleGridSizeChanged,gridContext:{sheet:s,getAuditReport:function(){return a.state.auditReport},textAreaLookup:vl,selectOptions:Ol(a.props.submissionOptions),auditCell:a.auditCell},onModelUpdated:a.onModelUpdated})))),Boolean(5===n)&&r.a.createElement(Tn.a,{elevation:2,className:"".concat(t.fileSelectPaper)},r.a.createElement(xl,null),a.props.submissionUploadState===d.succeeded?r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{className:t.submittedTypography},"Your dataset has been successfully submitted, and will be reviewed by our data curation team."),r.a.createElement(Nn.a,{className:t.submittedTypography},"You can view the status of your submission ",r.a.createElement(Qn.a,{style:{display:"inline-block"},className:t.needHelpLink,component:An.b,to:"/datasubmission/userdashboard?datasetName=".concat(encodeURI(o))},"here"),"."),r.a.createElement(Nn.a,{className:t.submittedTypography},"If you made any changes during this process you can download the edited workbook ",r.a.createElement(Qn.a,{style:{display:"inline-block"},className:t.needHelpLink,onClick:a.handleDownload,component:"span"},"here"),"."),r.a.createElement(Nn.a,{className:t.submittedTypography},"A detailed description of remaining steps in the submission process can be found in the ",r.a.createElement(Qn.a,{style:{display:"inline-block"},className:t.needHelpLink,component:An.b,to:"/datasubmission/guide"},"Data Submission Guide"),".")):a.props.submissionUploadState===d.failed?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ri.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Xi.a,{style:{color:"rgba(255, 0, 0, .7)"}},r.a.createElement(nl.a,null)),r.a.createElement(el.a,{primary:"A dataset with this name has already been submitted by another user. If you believe you're receiving this message in error please contact us at cmap-data-submission@uw.edu."}))),r.a.createElement(Nn.a,{className:t.submittedTypography},"If you made any changes during this process you can download the edited workbook ",r.a.createElement(Qn.a,{style:{display:"inline-block"},className:t.needHelpLink,onClick:a.handleDownload,component:"span"},"here"),".")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,null,"You've completed dataset validation! Click the button below to upload your workbook."),r.a.createElement(Bn.a,{variant:"contained",color:"primary",className:t.submitButton,onClick:a.handleUploadSubmission},"Submit"))),r.a.createElement("input",{onChange:a.handleFileSelect,className:t.input,accept:".xlsx",id:"select-file-input",type:"file"}))},a}return Object(yn.a)(t,e),t}(r.a.Component),_l=Object(l.b)((function(e,t){return{submissionFile:e.submissionFile,submissionOptions:e.submissionOptions,submissionUploadState:e.submissionUploadState,user:e.user}}),El)(Object(_n.f)(Object(jn.a)((function(e){var t,a;return{paper:{width:"40vw",margin:"40px auto"},dragTarget:{border:"1px solid red",width:"100px",height:"100px",margin:"40px auto"},input:{display:"none"},button:{color:"white",textTransform:"none",display:"block",maxWidth:"100px",margin:"12px auto 0px auto"},needHelp:{float:"left",color:"white",margin:"12px 0 0 12px",letterSpacing:"normal"},needHelpLink:{letterSpacing:"normal",color:e.palette.primary.main,cursor:"pointer"},fileSelectPaper:(t={margin:"70px auto 24px auto",maxWidth:"50vw",padding:"16px"},Object(m.a)(t,"padding","12px"),Object(m.a)(t,"whiteSpace","pre-wrap"),t),workbookAuditPaper:(a={margin:"70px auto 24px auto",maxWidth:"50vw",padding:"16px"},Object(m.a)(a,"padding","12px"),Object(m.a)(a,"minHeight","110px"),Object(m.a)(a,"whiteSpace","pre-wrap"),Object(m.a)(a,"textAlign","left"),a),addBorder:{border:"1px dashed ".concat(e.palette.primary.main)},fileName:{color:e.palette.primary.main,letterSpacing:"normal"},chooseNewFileLabel:{display:"inline",position:"absolute",marginTop:"10px",marginLeft:"14px",fontSize:"11px",borderRadius:"2px",color:kn.primary,cursor:"pointer","&:hover":{backgroundColor:"rgba(0,0,0,.2)"}},linkLabel:{color:kn.primary,cursor:"pointer","&:hover":{backgroundColor:"rgba(0,0,0,.2)"}},dataTable:{maxWidth:"80vw",margin:"0 auto 24px auto"},tableWrapper:{maxWidth:"80vw",margin:"24px auto"},submitButton:{color:"white",margin:"24px 0 12px 0"},tabPaper:{maxWidth:"80vw",height:"70vh",margin:"0 auto 24px auto"},errorStepperPaper:{width:"80vw",margin:"0 auto 24px auto"},currentlyViewingTypography:{marginLeft:"4px"},ilb:{display:"inline-block"},findNextButton:{textTransform:"none",marginBottom:"12px"},link:{cursor:"pointer"},currentSectionSpan:{margin:"4px 8px 0 8px",width:"200px",display:"inline-block"},divider:{margin:"8px 0"},workbookTab:{textTransform:"none"},submittedTypography:{marginBottom:"12px"}}}))(Al))),jl=Object(jn.a)((function(e){var t;return{stickyPaper:(t={position:"-webkit-sticky"},Object(m.a)(t,"position","sticky"),Object(m.a)(t,"top","90px"),Object(m.a)(t,"width","180px"),Object(m.a)(t,"marginLeft","20px"),Object(m.a)(t,"paddingLeft","12px"),Object(m.a)(t,"backgroundColor","rgba(0,0,0,.4)"),t),guideSection:{width:"90%",height:"2000px",margin:"20px auto 0 auto",textAlign:"left",padding:"12px 32px",fontFamily:'"roboto", Serif',maxWidth:"700px",backgroundColor:"rgba(0,0,0,.4)"},sectionHeader:{margin:"8px 0",fontWeight:100,fontFamily:'"roboto", Serif'},"@media screen and (max-width: 1250px)":{stickyPaper:{display:"none"}},navListItem:{color:e.palette.primary.main,padding:"2px 10px 2px 6px"},navListItemText:{fontSize:"16px","&:hover":{textDecoration:"underline"}},navListItemtextWrapper:{margin:"2px 0"},subListText:{margin:0,"&:hover":{textDecoration:"underline"}},anchor:{display:"block",position:"relative",top:"-120px",visibility:"hidden"},divider:{backgroundColor:e.palette.primary.main,marginBottom:"8px"}}}))((function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fn.a,{container:!0},r.a.createElement(Fn.a,{item:!0,xs:2},r.a.createElement(Tn.a,{className:t.stickyPaper,elevation:6},r.a.createElement(Ri.a,{dense:!0},r.a.createElement(Kr.a,{component:"a",href:"#getting-started",className:t.navListItem},r.a.createElement(el.a,{primary:"Getting Started",classes:{primary:t.navListItemText},className:t.navListItemtextWrapper})),r.a.createElement(Kr.a,{component:"a",href:"#submission-process",className:t.navListItem},r.a.createElement(el.a,{primary:"Submission Process",classes:{primary:t.navListItemText},className:t.navListItemtextWrapper})),r.a.createElement(Ri.a,{dense:!0,style:{padding:"0 0 0 15px"}},r.a.createElement(Kr.a,{component:"a",href:"#validation",className:t.navListItem},r.a.createElement(el.a,{primary:"Validation",className:t.subListText})),r.a.createElement(Kr.a,{component:"a",href:"#feedback",className:t.navListItem},r.a.createElement(el.a,{primary:"Feedback",className:t.subListText})),r.a.createElement(Kr.a,{component:"a",href:"#doi",className:t.navListItem},r.a.createElement(el.a,{primary:"DOI",className:t.subListText})),r.a.createElement(Kr.a,{component:"a",href:"#ingestion",className:t.navListItem},r.a.createElement(el.a,{primary:"Ingestion",className:t.subListText}))),r.a.createElement(Kr.a,{component:"a",href:"#dashboard",className:t.navListItem},r.a.createElement(el.a,{primary:"User Dashboard",classes:{primary:t.navListItemText},className:t.navListItemtextWrapper})),r.a.createElement(Kr.a,{component:"a",href:"#contact",className:t.navListItem},r.a.createElement(el.a,{primary:"Contact",classes:{primary:t.navListItemText},className:t.navListItemtextWrapper})),r.a.createElement(Kr.a,{component:"a",href:"#resources",className:t.navListItem},r.a.createElement(el.a,{primary:"Resources",classes:{primary:t.navListItemText},className:t.navListItemtextWrapper}))))),r.a.createElement(Fn.a,{item:!0,xs:8},r.a.createElement(Tn.a,{className:t.guideSection,elevation:4},r.a.createElement(Nn.a,{variant:"h3",className:t.sectionHeader},r.a.createElement("a",{className:t.anchor,id:"getting-started"}),"Getting Started"),r.a.createElement(Rn.a,{variant:"fullWidth",classes:{root:t.divider}}),r.a.createElement(Nn.a,null,"Data submitted to ",r.a.createElement("span",{style:{fontWeight:600}},"Simons Collaborative Marine Atlas Project")," must be precisely formatted to maintain high levels of ",r.a.createElement("em",null,"discoverability"),", ",r.a.createElement("em",null,"comparability"),", and ",r.a.createElement("em",null,"database performance"),"."),r.a.createElement(Nn.a,{style:{marginTop:"16px"}},"The purpose of the data submission toolset is to provide automatic, immediate feedback to assist you in formatting your submission, facilitate communication with the data curation team, and allow you to track the progress of your submission."),r.a.createElement(Nn.a,{variant:"h3",className:t.sectionHeader,style:{marginTop:"80px"}},r.a.createElement("a",{className:t.anchor,id:"submission-process"}),"The Submission Process"),r.a.createElement(Rn.a,{variant:"fullWidth",classes:{root:t.divider}}),r.a.createElement(Nn.a,null,"Begin the process by downloading and populating a\xa0",r.a.createElement(Qn.a,{href:"https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx",download:"datasetTemplate.xlsx"},"blank xlsx template."),"\xa0Details on the requirements and structure can be found\xa0",r.a.createElement(Qn.a,{target:"_blank",href:"https://cmap.readthedocs.io/en/latest/faq_and_contributing/file_structure.html#"},"here"),"."),r.a.createElement(Nn.a,{style:{marginTop:"16px"}},"Please note that xlsx workbooks over 150MB ",r.a.createElement("em",null,"cannot be processed")," using the web submission tools. If you would like to submit a dataset that exceeds this limit please contact the data curation team at ",r.a.createElement("a",{style:{color:kn.primary,textDecoration:"none"},href:"mailto:cmap-data-submission@uw.edu"},"cmap-data-submission@uw.edu"),"."),r.a.createElement(Nn.a,{variant:"h5",className:t.sectionHeader,style:{marginTop:"50px"}},"Validation",r.a.createElement("a",{className:t.anchor,id:"validation"})),r.a.createElement(Nn.a,null,"Load your workbook into the\xa0",r.a.createElement(Qn.a,{target:"_blank",href:"/datasubmission/validationtool"},"submission tool"),"\xa0to begin validation. The tool will walk you through a step-by-step process to identify and resolve any potential data or format issues. Once the workbook has been validated it will be uploaded to a staging area to be reviewed by our data curation team. From this point you'll be able to track the progress of your submission in the\xa0",r.a.createElement(Qn.a,{href:"#dashboard"},"user dashboard"),"."),r.a.createElement(Nn.a,{variant:"h5",className:t.sectionHeader,style:{marginTop:"50px"}},"Feedback",r.a.createElement("a",{className:t.anchor,id:"feedback"})),r.a.createElement(Nn.a,null,"The data curation team may have suggestions for additional changes to the workbook. Any feedback will be sent to you via email notification, and visible in the\xa0",r.a.createElement(Qn.a,{href:"#dashboard"},"user dashboard"),"."),r.a.createElement(Nn.a,{variant:"h5",className:t.sectionHeader,style:{marginTop:"50px"}},"DOI",r.a.createElement("a",{className:t.anchor,id:"doi"})),r.a.createElement(Nn.a,null,"Once your submission has been approved the data curation team will request a DOI for the data. Information on obtaining DOIs can be found\xa0",r.a.createElement(Qn.a,{target:"_blank",href:"https://cmap.readthedocs.io/en/latest/faq_and_contributing/FAQ.html?highlight=doi#what-is-a-doi-and-how-do-i-get-one-for-my-dataset",download:"datasetTemplate.xlsx"},"here"),". The DOI can be submitted through the ",r.a.createElement(Qn.a,{href:"#dashboard"},"user dashboard"),"."),r.a.createElement(Nn.a,{variant:"h5",className:t.sectionHeader,style:{marginTop:"50px"}},"Ingestion",r.a.createElement("a",{className:t.anchor,id:"ingestion"})),r.a.createElement(Nn.a,null,"Once a DOI has been submitted your data will be ingested into the CMAP database. After ingestion, you'll be able to view your dataset in the ",r.a.createElement(Qn.a,{href:"/catalog",target:"_blank"},"data catalog"),", and access it through the CMAP API using any of the CMAP\xa0",r.a.createElement(Qn.a,{href:"https://cmap.readthedocs.io/en/latest/user_guide/API_ref/api_ref.html",target:"_blank"},"software packages"),"."),r.a.createElement(Nn.a,{variant:"h3",className:t.sectionHeader,style:{marginTop:"80px"}},r.a.createElement("a",{className:t.anchor,id:"dashboard"}),"User Dashboard"),r.a.createElement(Rn.a,{variant:"fullWidth",classes:{root:t.divider}}),r.a.createElement(Nn.a,null,"In the\xa0",r.a.createElement(Qn.a,{href:"/datasubmission/userdashboard",target:"_blank"},"user dashboard"),"\xa0 you can track the ingestion process for any dataset that you've submitted, send messages to the data curation team, and download the most recently submitted version of the workbook. Additionally, in the event that the curation team requests additional changes to your submission you can load the most recent version directly into the validation tool, make any necessary changes, and resubmit."),r.a.createElement(Nn.a,{variant:"h3",className:t.sectionHeader,style:{marginTop:"80px"}},r.a.createElement("a",{className:t.anchor,id:"contact"}),"Contact"),r.a.createElement(Rn.a,{variant:"fullWidth",classes:{root:t.divider}}),r.a.createElement(Nn.a,null,"You can reach the CMAP data curation team at ",r.a.createElement("a",{style:{color:kn.primary,textDecoration:"none"},href:"mailto:cmap-data-submission@uw.edu"},"cmap-data-submission@uw.edu"),"."),r.a.createElement(Nn.a,{variant:"h3",className:t.sectionHeader,style:{marginTop:"80px"}},r.a.createElement("a",{className:t.anchor,id:"resources"}),"Resources"),r.a.createElement(Rn.a,{variant:"fullWidth",classes:{root:t.divider}}),r.a.createElement(Nn.a,null,r.a.createElement(Qn.a,{target:"_blank",href:"https://cmap.readthedocs.io/en/latest/faq_and_contributing/datasubmission.html#dataset-examples"},"Sample Data Submissions")),r.a.createElement(Nn.a,null,r.a.createElement(Qn.a,{target:"_blank",href:"https://cmap.readthedocs.io/en/latest/faq_and_contributing/datasubmission.html#dataset-requirements"},"Dataset Structure and Requirements")),r.a.createElement(Nn.a,null,r.a.createElement(Qn.a,{href:"https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx",download:"datasetTemplate.xlsx"},"Download a Blank xlsx Template")),r.a.createElement(Nn.a,null,r.a.createElement(Qn.a,{href:"https://cmap.readthedocs.io/en/latest/faq_and_contributing/FAQ.html?highlight=doi#what-is-a-doi-and-how-do-i-get-one-for-my-dataset",download:"datasetTemplate.xlsx"},"What is a DOI and how do I get one for my dataset?"))))))})),Tl=a(836),Nl=a(825),Rl=a(216),Dl=a.n(Rl),Il=a(824),Ll=Object(jn.a)((function(e){return{commentArea:{backgroundColor:"rgba(0,0,0,.2)",width:"70vw",margin:"0 auto",padding:"12px 16px",textAlign:"left",whiteSpace:"pre-wrap"},commenterAndDateTime:{marginTop:"16px",width:"calc(70vw + 32px)",padding:"4px 0",margin:"0 auto",textAlign:"left",color:e.palette.primary.main,fontSize:12}}}))((function(e){var t=e.classes,a=e.comment,n=a.Comment,o=a.Commenter,s=a.Comment_Date_Time,i=new Date(s).toLocaleString();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.commenterAndDateTime},o," at ",i),r.a.createElement("div",{className:t.commentArea},n))})),Ml={retrieveSubmissionCommentHistory:Z,addSubmissionComment:$,downloadMostRecentFile:oe},Pl=[{label:"Submission"},{label:"Admin Approval"},{label:"DOI"},{label:"Ingestion"}],Fl=Object(l.b)((function(e,t){return{submissionCommentHistoryRetrievalState:e.submissionCommentHistoryRetrievalState,submissionComments:e.submissionComments}}),Ml)(Object(jn.a)((function(e){return{panelDetails:{display:"block",textAlign:"left"},newCommentDiv:{width:"70vw",margin:"24px auto 0px auto"},newCommentTextField:{flexBasis:"calc(70vw - 200px)",marginRight:"16px"},postButton:{color:"white",marginTop:"16px",textTransform:"none"},setPhaseButton:{color:"white",marginLeft:"12px"},stepper:{borderRadius:"4px",margin:"16px 2vw 24px 2vw"},newUpload:{marginLeft:"2vw",cursor:"pointer"}}}))((function(e){var t,a=e.classes,o=e.submission,s=r.a.useState(),i=Object(y.a)(s,2),l=i[0],c=i[1],u=e.submissionComments[o.Submission_ID],p=Boolean(u&&u.length);switch(o.Phase){case"Awaiting admin action":case"Awaiting user update":t=1;break;case"Awaiting DOI":t=2;break;case"Awaiting ingestion":t=3;break;default:t=1}Object(n.useEffect)((function(){e.retrieveSubmissionCommentHistory(o.Submission_ID)}),[]);return r.a.createElement(Il.a,{className:a.panelDetails},r.a.createElement(Tr.a,{className:a.stepper,alternativeLabel:!0,activeStep:t},Pl.map((function(e,t){return r.a.createElement(Nr.a,{key:t},r.a.createElement(Rr.a,null,e.label))}))),r.a.createElement(Nn.a,{className:a.newUpload},r.a.createElement(Qn.a,{component:An.b,to:"/datasubmission/validationtool?submissionID=".concat(encodeURIComponent(o.Submission_ID))},"Update")," this submission."),r.a.createElement(Nn.a,{className:a.newUpload},r.a.createElement(Qn.a,{component:"span",onClick:function(){return e.downloadMostRecentFile(o.Submission_ID)}},"Download")," the most recent version."),e.submissionCommentHistoryRetrievalState===d.inProgress?"Loading Comments.....":r.a.createElement(r.a.Fragment,null,p&&u.map((function(e,t){return r.a.createElement(Ll,{comment:e,key:t})}))),r.a.createElement("div",{className:a.newCommentDiv},r.a.createElement(zn.a,{multiline:!0,rows:4,variant:"outlined",onChange:function(e){return c(e.target.value)},value:l,fullWidth:!0}),r.a.createElement(Bn.a,{variant:"contained",color:"primary",className:a.postButton,onClick:function(){e.addSubmissionComment(o.Submission_ID,l),c("")}},"Post Message")))}))),Ul={retrieveDataSubmissionsByUser:function(){return{type:"RETRIEVE_SUBMISSIONS_BY_USER"}}},zl=Object(l.b)((function(e,t){return{user:e.user,dataSubmissions:e.dataSubmissions}}),Ul)(Object(_n.f)(Object(jn.a)((function(e){return{wrapperDiv:{width:"90vw",margin:"24px auto"},panelSummaryText:{flexBasis:"40%",textAlign:"left",paddingRight:"20px",fontSize:".8rem"},needHelp:{float:"left",color:"white",margin:"12px 0 0 12px",letterSpacing:"normal"}}}))((function(e){var t=e.classes,a=e.dataSubmissions,n=r.a.useState(!1),o=Object(y.a)(n,2),s=o[0],i=o[1];if(r.a.useEffect((function(){e.retrieveDataSubmissionsByUser()}),[]),r.a.useEffect((function(){var e=new URLSearchParams(window.location.search),t=e.get("submissionID"),n=e.get("datasetName");t&&a.forEach((function(e,a){t==e.Submission_ID&&i(a)})),n&&a.forEach((function(e,t){n.trim()==e.Dataset.trim()&&i(t)}))})),!e.user)return r.a.createElement(Yn,null);return r.a.createElement("div",{className:t.wrapperDiv},a&&a.length?r.a.createElement(r.a.Fragment,null,a.map((function(a,n){return r.a.createElement(Tl.a,{expanded:s===n,onChange:function(){return function(t){e.history.push({pathname:"/datasubmission/userdashboard",query:{}}),i(s!==t&&t)}(n)},key:n,TransitionProps:{unmountOnExit:!0}},r.a.createElement(Nl.a,{expandIcon:r.a.createElement(Dl.a,null)},r.a.createElement(Nn.a,{noWrap:!0,className:t.panelSummaryText},a.Dataset),r.a.createElement(Nn.a,{noWrap:!0,className:t.panelSummaryText},a.Phase)),r.a.createElement(Fl,{submission:a}))}))):r.a.createElement(Nn.a,{className:t.needHelp},"We haven't received any submissions from you yet. Need help?",r.a.createElement(Qn.a,{href:"https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx",download:"datasetTemplate.xlsx",className:t.needHelpLink},"\xa0Download"),"\xa0a blank template, or view the ",r.a.createElement(Qn.a,{className:t.needHelpLink,component:An.b,to:"/datasubmission/guide"},"Data Submission Guide"),"."))})))),Bl=a(826),Vl=a(827),Gl=a(834),Hl={retrieveSubmissionCommentHistory:Z,addSubmissionComment:$,setSubmissionPhase:function(e,t){return{type:"SET_SUBMISSION_PHASE",payload:{submissionID:e,phaseID:t}}},downloadMostRecentFile:oe},Wl=Object(l.b)((function(e,t){return{submissionCommentHistoryRetrievalState:e.submissionCommentHistoryRetrievalState,submissionComments:e.submissionComments}}),Hl)(Object(jn.a)((function(e){return{panelDetails:{display:"block"},newCommentDiv:{width:"70vw",margin:"24px auto 0px auto"},newCommentTextField:{flexBasis:"calc(70vw - 200px)",marginRight:"16px"},postButton:{color:"white",marginTop:"16px",textTransform:"none"},setPhaseButton:{color:"white",marginLeft:"12px"},phaseControlWrapper:{textAlign:"left",margin:"12px 0 32px 0"},phaseSelect:{width:"190px"},newUpload:{marginBottom:"2vw",cursor:"pointer",textAlign:"left"}}}))((function(e){var t=e.classes,a=e.submission,o=e.setSubmissionPhase,s=r.a.useState(),i=Object(y.a)(s,2),l=i[0],c=i[1],u=r.a.useState(a.Phase_ID),p=Object(y.a)(u,2),m=p[0],h=p[1],b=e.submissionComments[a.Submission_ID],f=Boolean(b&&b.length);Object(n.useEffect)((function(){e.retrieveSubmissionCommentHistory(a.Submission_ID)}),[]);return r.a.createElement(Il.a,{className:t.panelDetails},r.a.createElement(Nn.a,{className:t.newUpload},r.a.createElement(Qn.a,{component:"span",onClick:function(){return e.downloadMostRecentFile(a.Submission_ID)}},"Download")," the most recent version."),r.a.createElement("div",{className:t.phaseControlWrapper},r.a.createElement(to.a,{value:m,onChange:function(e){h(e.target.value)},className:t.phaseSelect},r.a.createElement(eo.a,{value:2},"Awaiting admin action"),r.a.createElement(eo.a,{value:3},"Awaiting user update"),r.a.createElement(eo.a,{value:4},"Awaiting DOI"),r.a.createElement(eo.a,{value:5},"Awaiting ingestion"),r.a.createElement(eo.a,{value:6},"Complete")),r.a.createElement(Bn.a,{variant:"contained",color:"primary",onClick:function(){e.handleResetExpandedPanel(),o(a.Submission_ID,m)},className:t.setPhaseButton,disabled:Boolean(m===a.Phase_ID)},"Set Phase")),e.submissionCommentHistoryRetrievalState===d.inProgress?"Loading Comments.....":r.a.createElement(r.a.Fragment,null,f&&b.map((function(e,t){return r.a.createElement(Ll,{comment:e,key:t})}))),r.a.createElement("div",{className:t.newCommentDiv},r.a.createElement(zn.a,{multiline:!0,rows:4,variant:"outlined",onChange:function(e){return c(e.target.value)},value:l,fullWidth:!0}),r.a.createElement(Bn.a,{variant:"contained",color:"primary",className:t.postButton,onClick:function(){e.addSubmissionComment(a.Submission_ID,l),c("")}},"Post Message")))}))),ql={retrieveAllSubmissions:ee},Ql={"Awaiting admin action":!0,"Awaiting user update":!0,"Awaiting DOI":!0,"Awaiting ingestion":!0,Complete:!1},Kl=function(e){function t(e){var a;Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).componentDidUpdate=function(e){e.dataSubmissions&&e.dataSubmissions.length||!a.props.dataSubmissions||!a.props.dataSubmissions.length||(a.state.search.addDocuments(a.props.dataSubmissions),a.setState({search:a.state.search}))},a.componentDidMount=function(){a.props.retrieveAllSubmissions()},a.handleExpansion=function(e){a.state.expandedPanel===e?a.setState(Object(u.a)({},a.state,{expandedPanel:!1})):a.setState(Object(u.a)({},a.state,{expandedPanel:e}))},a.handleChangeFilter=function(e){var t=Object(u.a)({},a.state.filters);t[e.target.name]=!t[e.target.name],a.setState(Object(u.a)({},a.state,{filters:Object(u.a)({},t)}))},a.handleChangeSearchString=function(e){a.setState(Object(u.a)({},a.state,{searchString:e.target.value}))},a.handleResetExpandedPanel=function(){a.setState(Object(u.a)({},a.state,{expandedPanel:!1}))},a.render=function(){var e=a.props,t=e.classes,n=e.dataSubmissions,o=a.state,s=o.search,i=o.searchString,l=i?s.search(i).filter((function(e){return a.state.filters[e.Phase]})):n.filter((function(e){return a.state.filters[e.Phase]}));return r.a.createElement("div",{className:t.wrapperDiv},r.a.createElement(Bl.a,{row:!0,className:t.filterFormGroup},r.a.createElement("div",{className:t.searchFieldWrapper},r.a.createElement(zn.a,{variant:"outlined",value:i,onChange:a.handleChangeSearchString,placeholder:"Search",InputProps:{startAdornment:r.a.createElement(hr.a,{position:"start"},r.a.createElement(br.a,{style:{color:kn.primary}}))}})),r.a.createElement(Vl.a,{control:r.a.createElement(Gl.a,{checked:a.state.filters["Awaiting admin action"],onChange:a.handleChangeFilter,name:"Awaiting admin action",color:"primary"}),label:"Awaiting admin action",className:t.filterFormControl}),r.a.createElement(Vl.a,{control:r.a.createElement(Gl.a,{checked:a.state.filters["Awaiting user update"],onChange:a.handleChangeFilter,name:"Awaiting user update",color:"primary"}),label:"Awaiting user update",className:t.filterFormControl}),r.a.createElement(Vl.a,{control:r.a.createElement(Gl.a,{checked:a.state.filters["Awaiting DOI"],onChange:a.handleChangeFilter,name:"Awaiting DOI",color:"primary"}),label:"Awaiting DOI",className:t.filterFormControl}),r.a.createElement(Vl.a,{control:r.a.createElement(Gl.a,{checked:a.state.filters["Awaiting ingestion"],onChange:a.handleChangeFilter,name:"Awaiting ingestion",color:"primary"}),label:"Awaiting ingestion",className:t.filterFormControl}),r.a.createElement(Vl.a,{control:r.a.createElement(Gl.a,{checked:a.state.filters.Complete,onChange:a.handleChangeFilter,name:"Complete",color:"primary"}),label:"Complete",className:t.filterFormControl})),l&&l.length?r.a.createElement(r.a.Fragment,null,l.map((function(e,n){return r.a.createElement(Tl.a,{expanded:a.state.expandedPanel===n,onChange:function(){return a.handleExpansion(n)},key:n,TransitionProps:{unmountOnExit:!0}},r.a.createElement(Nl.a,{expandIcon:r.a.createElement(Dl.a,null)},r.a.createElement(Nn.a,{noWrap:!0,className:t.panelSummaryText},e.Dataset),r.a.createElement(Nn.a,{noWrap:!0,className:t.panelSummaryText},e.Phase)),r.a.createElement(Wl,{submission:e,handleResetExpandedPanel:a.handleResetExpandedPanel}))}))):r.a.createElement(Nn.a,null,"No submissions yet..."))};var n=new URLSearchParams(window.location.search),o=n.get("datasetName")&&n.get("datasetName").trim(),s=new qr.Search("Submission_ID");return s.indexStrategy=new qr.AllSubstringsIndexStrategy,s.searchIndex=new qr.UnorderedSearchIndex,s.addIndex("Dataset"),s.addIndex("Name"),e.dataSubmissions&&s.addDocuments(e.dataSubmissions),a.state={searchString:o||"",search:s,expandedPanel:!1,filters:Ql,modifiedDatasetID:null},a}return Object(yn.a)(t,e),t}(n.Component),Yl=Object(l.b)((function(e,t){return{user:e.user,dataSubmissions:e.dataSubmissions}}),ql)(Object(jn.a)((function(e){return{wrapperDiv:{width:"90vw",margin:"24px auto"},panelSummaryText:{flexBasis:"40%",textAlign:"left",paddingRight:"20px",fontSize:".8rem"},filterFormGroup:{backgroundColor:"rgba(0,0,0,.4)",color:"white",padding:"8px 12px",borderTopLeftRadius:"4px",borderTopRightRadius:"4px",flexWrap:"wrap"},filterFormControl:{marginRight:"24px"},searchFieldWrapper:{flexBasis:"100%",textAlign:"left"}}}))(Kl)),$l={snackbarOpen:U},Zl=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props,t=e.classes,n=e.match;e.user;return r.a.createElement("div",{className:t.root},r.a.createElement(_n.c,null,r.a.createElement(_n.a,{exact:!0,path:n.url+"/",component:jl}),r.a.createElement(_n.a,{exact:!0,path:n.url+"/guide",component:jl}),r.a.createElement(_n.a,{exact:!0,path:n.url+"/validationtool",component:_l}),r.a.createElement(_n.a,{exact:!0,path:n.url+"/userdashboard",component:zl}),r.a.createElement(_n.a,{exact:!0,path:n.url+"/admindashboard",component:Yl})))},a}return Object(yn.a)(t,e),t}(r.a.Component),Jl=Object(l.b)((function(e,t){return{user:e.user}}),$l)(Object(jn.a)((function(e){return{root:{paddingTop:"70px"}}}))(Zl)),Xl={contactUsRequestSend:function(e){return{type:"CONTACT_US_REQUEST_SEND",payload:{name:e.name,email:e.email,subject:e.subject,message:e.message}}},snackbarOpen:U},ec=function(e){function t(e){var a;return Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(u.a)({},a.state,Object(m.a)({},e.target.name,e.target.value)))},a.handleSubmit=function(){var e=Object(u.a)({},a.state),t=!1;Object.keys(e).forEach((function(a){e[a]=e[a].trim(),e[a].length<1&&(t=!0)})),t?a.props.snackbarOpen("Please complete all fields"):a.props.contactUsRequestSend(e)},a.state={name:e.user?e.user.firstName+" "+e.user.lastName:"",email:e.user?e.user.email:"",subject:"",message:""},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(Tn.a,{className:e.root,elevation:6},r.a.createElement(Nn.a,{variant:"h4",className:e.header,align:"left"},"Contact Us"),r.a.createElement(Nn.a,{variant:"body2",className:e.description,align:"left"},"Have a question or feedback? Fill out the form below to contact a member of the Simons CMAP team."),r.a.createElement(Fn.a,{container:!0},r.a.createElement(Fn.a,{item:!0,container:!0,direction:"column",justify:"flex-start",xs:12,md:3},r.a.createElement(zn.a,{name:"name",label:"Name",value:this.state.name,onChange:this.handleChange,className:e.textField,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(zn.a,{name:"email",label:"Email",value:this.state.email,onChange:this.handleChange,className:e.textField,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(zn.a,{name:"subject",label:"Subject",value:this.state.subject,onChange:this.handleChange,className:e.textField,variant:"outlined",InputLabelProps:{shrink:!0}})),r.a.createElement(Fn.a,{item:!0,xs:12,md:9},r.a.createElement(zn.a,{placeholder:"Your message...",value:this.state.message,className:e.messageTextField,name:"message",onChange:this.handleChange,multiline:!0,rows:"10",variant:"outlined"}))),r.a.createElement(Bn.a,{variant:"contained",color:"primary",className:e.submitButton,onClick:this.handleSubmit},"Submit"))}}]),t}(n.Component),tc=Object(l.b)((function(e,t){return{user:e.user}}),Xl)(Object(jn.a)((function(e){return{root:{color:"white",width:"65vw",marginTop:e.spacing(18),marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(8),padding:e.spacing(2)},header:{color:e.palette.primary.main,marginBottom:e.spacing(2)},description:{marginBottom:e.spacing(3)},textField:{marginLeft:0,marginRight:e.spacing(2),marginBottom:e.spacing(2)},messageTextField:{width:"100%"},submitButton:{marginTop:e.spacing(2),color:"white"}}}))(ec)),ac=Object(jn.a)((function(e){return{root:{marginTop:"70px"},descriptionPaper:{padding:"6vh 6vw",margin:"110px 10vw 0px 10vw"},iconContainer:{marginTop:"4vh"},followContainer:{marginTop:"4vh"},softwareIcon:{maxHeight:"calc(100% - 1vh)",maxWidth:"calc(100% - .5vw)",height:"110px"},followUs:{lineHeight:3.1,fontSize:"16px"},followUsGridSection:{textAlign:"right",marginBottom:"12px"},followUsIcon:{marginLeft:"12px"},docButtonGrid:{display:"flex",alignItems:"center",justifyContent:"center",padding:"12px"},docButton:{color:"white",textTransform:"none",width:"180px"}}}))((function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(Tn.a,{className:t.descriptionPaper,elevation:8},r.a.createElement(Nn.a,{variant:"body1"},"Simons CMAP is a community-based project intending to further cultivate the collaborative efforts at ocean sciences. It supports popular programming languages used for data analysis and seamlessly blends into your existing codebase. Review the ",r.a.createElement(Qn.a,{target:"_blank",href:"https://cmap.readthedocs.io/en/latest/"},"documentation")," to discover how to retrieve, visualize, and analyze the CMAP data sets using your preferred language. There you will also find information on how your own datasets can be submitted to CMAP. Please join us and contribute to growing the CMAP data and software ecosystem."),r.a.createElement(Fn.a,{container:!0,className:t.iconContainer},r.a.createElement(Fn.a,{item:!0,xs:12,md:6,lg:3},r.a.createElement("a",{href:"https://github.com/simonscmap/cmap4r",target:"_blank"},r.a.createElement("img",{src:"images/cmap-sdk-R-COLORED.png",width:"152",alt:"",className:t.softwareIcon}))),r.a.createElement(Fn.a,{item:!0,xs:12,md:6,lg:3},r.a.createElement("a",{href:"https://github.com/simonscmap/pycmap",target:"_blank"},r.a.createElement("img",{src:"images/cmap-sdk-python-COLORED.png",width:"273",alt:"",className:t.softwareIcon}))),r.a.createElement(Fn.a,{item:!0,xs:12,md:6,lg:3},r.a.createElement("a",{href:"https://github.com/simonscmap/CMAP.jl",target:"_blank"},r.a.createElement("img",{src:"images/cmap-sdk-julia-COLORED.png",width:"176",alt:"",className:t.softwareIcon}))),r.a.createElement(Fn.a,{item:!0,xs:12,md:6,lg:3},r.a.createElement("a",{href:"https://github.com/simonscmap/matcmap",target:"_blank"},r.a.createElement("img",{src:"images/cmap-sdk-Matlab-COLORED.png",alt:"",className:t.softwareIcon})))),r.a.createElement(Fn.a,{container:!0,className:t.followContainer},r.a.createElement(Fn.a,{item:!0,xs:12,md:1}),r.a.createElement(Fn.a,{item:!0,xs:5,md:2,className:t.followUsGridSection},r.a.createElement(Nn.a,{variant:"caption",className:t.followUs},"Follow Us:")),r.a.createElement(Fn.a,{item:!0,xs:4,md:3},r.a.createElement("a",{href:"https://github.com/simonscmap",target:"_blank"},r.a.createElement("img",{src:"images/github-icon.png",width:"55",srcSet:"images/github-icon-p-500.png 500w, images/github-icon.png 512w",alt:"",className:t.followUsIcon})),r.a.createElement("a",{href:"https://join.slack.com/t/simons-cmap/shared_invite/enQtNjQzMTkzMjg0NjQ2LTdlOGRhZjNhMDY3MjRlNjg2OTY5NzE3ZWZhNWE0OWZhYmQzMTJjNDkyNDQ1MjNkZDg0N2MzMzhlZDliNGYxYzQ",target:"_blank",className:t.followUsIcon},r.a.createElement("img",{src:"images/slack-icon.png",width:"55",srcSet:"images/slack-icon-p-500.png 500w, images/slack-icon.png 600w",alt:""}))),r.a.createElement(Fn.a,{item:!0,xs:12,md:5,className:t.docButtonGrid},r.a.createElement(Bn.a,{color:"primary",variant:"contained",href:"https://cmap.readthedocs.io/en/latest/",target:"_blank",className:t.docButton},"Documentation")),r.a.createElement(Fn.a,{item:!0,xs:3,md:12}))))})),nc={recoverPasswordRequestSend:function(e){return{type:"RECOVER_PASSWORD_REQUEST_SEND",payload:{email:e}}}},rc=Object(l.b)(null,nc)(Object(jn.a)((function(e){return{paper:{width:"60%",margin:"10% auto",height:"40vh"},description:{paddingTop:"110px"},emailSentDescription:{padding:"140px 70px 0 70px"},sendButton:{marginLeft:"8px",marginTop:"9px",height:"41px"},formWrapper:{marginTop:"24px"}}}))((function(e){var t=e.classes,a=r.a.useState(""),n=Object(y.a)(a,2),o=n[0],s=n[1],i=r.a.useState(!1),l=Object(y.a)(i,2),c=l[0],u=l[1],d=function(t){u(!0),e.recoverPasswordRequestSend(o)},p=""===o||/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-.]+)\.([a-zA-Z]{2,5})$/.test(o);return r.a.createElement(Tn.a,{className:t.paper},c?r.a.createElement(Nn.a,{className:t.emailSentDescription},"An email has been sent to ",o,". If you don't receive anything from us within the next few minutes please check your spam folder."):r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn.a,{className:t.description},"Enter your email address below to recover your username and password."),r.a.createElement("div",{className:t.formWrapper},r.a.createElement(zn.a,{autoFocus:!0,margin:"normal",id:"email",type:"text",variant:"outlined",name:"email",value:o,onChange:function(e){s(e.target.value)},error:!p,helperText:p?"":"Please enter a valid email address",onKeyPress:function(e){"Enter"===e.key&&d()}}),r.a.createElement(Bn.a,{color:"primary",variant:"contained",className:t.sendButton,onClick:d,disabled:Boolean(!p||!o.length)},"Submit"))))}))),oc=a(415),sc=a.n(oc),ic={choosePasswordRequestSend:function(e){return{type:"CHOOSE_PASSWORD_REQUEST_SEND",payload:{password:e.password,token:e.token}}},choosePasswordRequestReset:function(){return{type:"CHOOSE_PASSWORD_REQUEST_RESET"}}},lc=r.a.createRef(),cc=function(e){function t(e){var a;Object(ue.a)(this,t),(a=Object(xn.a)(this,Object(vn.a)(t).call(this,e))).componentDidMount=function(){a.props.choosePasswordRequestReset()},a.handleChangePassword=function(e){a.setState(Object(u.a)({},a.state,{password:e.target.value}))},a.handleSubmit=function(){a.props.choosePasswordRequestSend({password:a.state.password,token:a.state.token})},a.handleChangeConfirmPassword=function(e){a.setState(Object(u.a)({},a.state,{confirmPassword:e.target.value}))},a.handleKeyPress=function(e){"Enter"===e.key&&lc.current.click()};var n=e.location.pathname.split("/")[2],r=sc()(n);console.log(r);var o=new Date(0);o.setUTCSeconds(r.exp);var s=new Date>o;return a.state={password:"",confirmPassword:"",expired:s,token:n,email:r.sub},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.choosePasswordState,n=this.state,o=n.password,s=n.confirmPassword,i=n.expired,l=/^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(o),c=o===s,u=Boolean(0===o.length||!l||!c);return i?r.a.createElement(Tn.a,{className:t.paper},r.a.createElement(Nn.a,{className:t.description},"This link has expired. Click here to send a ",r.a.createElement(Qn.a,{component:An.b,to:{pathname:"/forgotpass"}},"new link"),".")):a===d.succeeded?r.a.createElement(Tn.a,{className:t.paper},r.a.createElement(Nn.a,{className:t.description},"Success! You can now log in using your new password.")):a===d.failed?r.a.createElement(Tn.a,{className:t.paper},r.a.createElement(Nn.a,{className:t.description},"We were unable to complete this request. Please try again.")):r.a.createElement(Tn.a,{className:t.paper},r.a.createElement(Nn.a,{className:t.description},"Please choose a password"),r.a.createElement(Fn.a,{direction:"column",justify:"space-evenly",className:t.formGrid,container:!0},r.a.createElement(Fn.a,{item:!0},r.a.createElement(zn.a,{fullWidth:!0,autoFocus:!0,label:"Password",margin:"normal",id:"password",type:"password",variant:"outlined",name:"password",value:o,onChange:this.handleChangePassword,error:Boolean(!l&&o.length),helperText:"Must be 8 to 32 characters with 1 number and 1 special character.",onKeyPress:this.handleKeyPress,InputLabelProps:{shrink:!0}})),r.a.createElement(Fn.a,{item:!0},r.a.createElement(zn.a,{fullWidth:!0,label:"Confirm Password",margin:"normal",id:"confirmPassword",type:"password",variant:"outlined",name:"confirmPassword",value:s,onChange:this.handleChangeConfirmPassword,error:!c,helperText:c?"":"Passwords must match",onKeyPress:this.handleKeyPress,InputLabelProps:{shrink:!0}})),r.a.createElement(Fn.a,{item:!0},r.a.createElement(Bn.a,{fullWidth:!0,variant:"outlined",color:"primary",disabled:u,onClick:this.handleSubmit,ref:lc},"Submit"))))}}]),t}(n.Component),uc=Object(l.b)((function(e,t){return{choosePasswordState:e.choosePasswordState}}),ic)(Object(_n.f)(Object(jn.a)((function(e){return{paper:{width:"60%",margin:"120px auto",padding:"24px 12px"},textFields:{display:"block",width:"380px"},description:{marginBottom:"12px"},formGrid:{height:"270px",padding:"0 90px"},button:{width:"120px"}}}))(cc))),dc=Object(Sn.a)({typography:{useNextVariants:!0,fontFamily:['"Lato"',"sans-serif"].join(",")},palette:{primary:{contrastText:"#000000",main:kn.primary},error:{main:kn.errorYellow},secondary:{main:kn.secondary},background:{default:kn.backgroundGray,paper:kn.backgroundGray},text:{primary:"#ffffff",secondary:kn.primary}},overrides:{MuiIconButton:{root:{color:kn.primary,borderRadius:"10%"}},MuiPaper:{root:{backgroundColor:"rgba(0,0,0,.3)"}},MuiListItemIcon:{root:{minWidth:"40px"}},MuiFormHelperText:{filled:{paddingLeft:"1px",paddingRight:"1px",fontSize:"13px"}},MuiListItem:{gutters:{paddingLeft:"6px",paddingRight:"10px"},root:{paddingTop:"4px",paddingBottom:"4px"}},MuiToolbar:{root:{backgroundColor:"transparent",color:kn.primary}},MuiMenuItem:{root:{"&:hover":{backgroundColor:kn.greenHover}}},MuiPickersBasePicker:{container:{backgroundColor:kn.backgroundGray}},MuiOutlinedInput:{input:{padding:"12px 14px"},root:{"&$focused":{borderColor:kn.primary}}},MuiSnackbarContent:{message:{margin:"auto"}},MuiButtonGroup:{groupedOutlined:{"&:not(:first-child)":{marginLeft:0}}},MuiTableCell:{root:{borderBottomColor:"rgba(0, 0, 0, 0.9)"}},MuiFormControl:{marginNormal:{marginTop:"8px"}},MuiDialogContentText:{root:{color:"white"}},MuiExpansionPanel:{root:{"&$expanded":{margin:0}}},MuiDialogTitle:{root:{color:kn.primary}},MuiFilledInput:{input:{paddingLeft:"6px"},adornedEnd:{paddingRight:"6px"},root:{backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},"&:disabled":{backgroundColor:"transparent"}}},MuiPopover:{paper:{backgroundColor:"#1B4156"}}}}),pc={initializeGoogleAuth:j,toggleShowHelp:B},mc=function(e){function t(){var e,a;Object(ue.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(xn.a)(this,(e=Object(vn.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.initializeGoogleAuth()},a}return Object(yn.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){return r.a.createElement(wn.a,{utils:Cn.a},r.a.createElement("div",{className:"App"},r.a.createElement(On.a,{theme:dc},r.a.createElement(An.a,null,r.a.createElement(xi,null),r.a.createElement(Pi,null),r.a.createElement(_n.c,null,r.a.createElement(_n.a,{exact:!0,path:"/apikeymanagement",component:Jn}),r.a.createElement(_n.a,{exact:!0,path:"/",component:yi}),r.a.createElement(_n.a,{exact:!0,path:"/catalog",component:_r}),r.a.createElement(_n.a,{exact:!0,path:"/login",component:Ui}),r.a.createElement(_n.a,{exact:!0,path:"/register",component:Gr}),r.a.createElement(_n.a,{exact:!0,path:"/visualization",component:li}),r.a.createElement(_n.a,{exact:!0,path:"/profile",component:Yi}),r.a.createElement(_n.a,{exact:!0,path:"/forgotpass",component:rc}),r.a.createElement(_n.a,{path:"/datasubmission",component:Jl}),r.a.createElement(_n.a,{path:"/choosepassword",component:uc}),r.a.createElement(_n.a,{exact:!0,path:"/contact",component:tc}),r.a.createElement(_n.a,{path:"/community",component:ac}))))))}}]),t}(n.Component),hc=Object(l.b)((function(e,t){return{loadingMessage:e.loadingMessage}}),pc)(mc);i.LicenseManager.setLicenseKey("School_of_Oceanography_Simons_CMAP_1Devs_1Deployment_19_June_2020__MTU5MjUyMTIwMDAwMA==aec33f954c06d90afed06467402921bd");var bc=document.getElementById("root");s.a.render(r.a.createElement(l.a,{store:En},r.a.createElement(hc,null)),bc),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[436,1,2]]]);
//# sourceMappingURL=main.be5eb2b9.chunk.js.map