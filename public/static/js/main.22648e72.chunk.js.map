{"version":3,"sources":["serviceWorker.js","Enums/asyncRequestStates.js","Redux/Reducers/ui.js","Redux/Reducers/index.js","Redux/Reducers/catalog.js","Redux/actionTypes/catalog.js","Redux/Reducers/user.js","Redux/actionTypes/user.js","Redux/actionTypes/ui.js","Redux/Reducers/visualization.js","Redux/actionTypes/visualization.js","Redux/Reducers/dataSubmission.js","Redux/actionTypes/dataSubmission.js","Redux/actions/user.js","Redux/actions/catalog.js","Redux/actions/ui.js","Redux/actions/visualization.js","Redux/actions/dataSubmission.js","config.js","Enums/spatialResolutions.js","Utility/mapSpatialResolutionToNumber.js","Utility/flattenArray.js","Utility/splitData.js","Utility/mergeArraysAndComputeMeans.js","Utility/mergeArrays.js","Enums/visualizationSubTypes.js","Enums/temporalResolutions.js","Classes/SpaceTimeData.js","Enums/storedProcedures.js","Classes/TimeSeriesData.js","Classes/DepthProfileData.js","Classes/SectionMapData.js","Classes/SparseData.js","api.js","Redux/sagas.js","Redux/store.js","Enums/colors.js","Components/UI/CopyableText.js","Components/User/ApiKeyManagement.js","Components/User/LoginRequiredPrompt.js","Components/Home.js","Components/Catalog/GridDetail.js","Components/Catalog/DatasetDescriptionDialog.js","Components/Catalog/VariableDescriptionDialog.js","Components/UI/ConnectedTooltip.js","Components/Catalog/GroupedDatasetRow.js","Components/Catalog/AGGridWrapper.js","Components/Catalog/Catalog.js","Components/User/RegistrationCard.js","Components/User/RegistrationStepper.js","Components/User/GoogleSignInButton.js","Components/User/Register.js","Enums/validation.js","Components/Visualization/TableStatsDialog.js","Utility/mapTemporalResolutionToNumber.js","Utility/utcDateStringToLocal.js","Utility/depthCounter.js","Utility/countWebGLContexts.js","Components/Visualization/VizControlPanel.js","Components/Visualization/DownloadConfirmationDialog.js","Enums/months.js","Utility/handleChartDatestring.js","Utility/chartBase.js","Components/Visualization/ChartControlPanel.js","Components/Visualization/SparseHistogram.js","Utility/handleXTicks.js","Utility/getChartDimensions.js","Components/Visualization/SpaceTimeChart.js","Components/Visualization/TimeSeriesChart.js","Components/Visualization/DepthProfileChart.js","Components/Visualization/SectionMapChart.js","Components/Visualization/SparseScatter.js","Components/Visualization/SparseMap.js","Components/Visualization/Charts.js","Components/Visualization/CruiseSelector.js","Components/Visualization/MapContainer.js","Utility/cleanSPParams.js","Utility/localDateToString.js","Components/Visualization/Visualization.js","Utility/starsBase64.js","Components/User/LoginDialog.js","Components/UI/SnackbarWrapper.js","Components/UI/LoadingOverlay.js","Components/UI/GlobalUIComponentWrapper.js","Components/LandingPage.js","Stylesheets/JSS.js","Components/User/UserNavbarDropdown.js","Components/DataSubmission/DataSubmissionNavbarDropdown.js","Components/UI/MobileNavbarMenu.js","Components/UI/TopNavBar.js","Components/User/Login.js","Components/User/ChangePassword.js","Components/User/ChangeEmail.js","Components/User/Profile.js","Components/DataSubmission/DataSubmissionTemp.js","Utility/DataSubmission/audits.js","Utility/DataSubmission/checkCell.js","Utility/DataSubmission/dataSubmissionAudit.js","Components/DataSubmission/DSCellEditor.js","Components/DataSubmission/ErrorNavigator.js","Components/DataSubmission/DSCellEditorTextArea.js","Components/DataSubmission/DSCellEditorSelect.js","Components/DataSubmission/ValidationGrid.js","Utility/DataSubmission/formatDataSheet.js","Utility/DataSubmission/formatDatasetMetadataSheet.js","Components/DataSubmission/ValidationTool.js","Components/DataSubmission/SubmissionGuide.js","Components/DataSubmission/Comment.js","Components/DataSubmission/UserDashboardPanelDetails.js","Components/DataSubmission/UserDashboard.js","Components/DataSubmission/AdminDashboardPanelDetails.js","Components/DataSubmission/AdminDashboard.js","Components/DataSubmission/DataSubmission.js","Components/ContactUs.js","Components/Community/CommunityTemp.js","Components/User/ForgotPass.js","Components/User/ChoosePassword.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","states","inProgress","failed","succeeded","expired","uiResetState","catalogRequestState","loginDialogIsOpen","registrationActiveStep","userLoginState","userLoginError","userValidationState","userValidationError","userRegistrationState","apiKeyRetrievalState","apiKeyCreationState","initialState","catalog","datasetRequestState","datasets","changePasswordDialogIsOpen","changeEmailDialogIsOpen","snackbarIsOpen","snackbarMessage","loadingMessage","showHelp","user","JSON","parse","Cookies","get","apiKeys","clearLoginDialog","choosePasswordState","preferences","maps","charts","getCruiseTrajectoryRequestState","cruiseTrajectory","sampleData","queryRequestState","storedProcedureRequestState","getTableStatsRequestState","cruiseList","getCruiseListRequestState","showChartsOnce","chartID","dataSubmissions","submissionComments","submissionCommentHistoryRetrievalState","submissionFile","reducedReducer","reduceReducers","state","action","type","payload","datasetsRequestState","keys","message","layers","newLayer","mapInfo","chartInfo","id","slice","chartIndex","trajectory","datasetLongName","tableStats","submissions","updatedComments","submissionID","comments","file","storeInfo","googleLoginRequestSend","userIDToken","logOut","keyRetrievalRequestSend","initializeGoogleAuth","retrievalRequestSend","retrievalRequestSuccess","datasetRetrievalRequestSend","datasetRetrievalRequestSuccess","showLoginDialog","hideLoginDialog","registrationNextActiveStep","restoreInterfaceDefaults","snackbarOpen","setLoadingMessage","toggleShowHelp","hideChangePasswordDialog","hideChangeEmailDialog","cruiseTrajectoryRequestSend","cruiseListRequestSend","cruiseListRequestSuccess","csvDownloadRequestSend","query","fileName","tableName","downloadTextAsCsv","text","csvFromVizRequestSend","vizObject","shortName","longName","addSubmissionComment","comment","retrieveSubmissionCommentHistory","storeSubmissions","storeSubmissionComments","retrieveAllSubmissions","setSubmissionCommentHistoryRetrievalState","storeSubmissionFile","apiUrl","origin","spatialResolutions","irregular","halfDegree","quarterDegree","twentyFifthDegree","fourKm","twelfthDegree","seventyKm","oneDegree","nineKm","twentyFiveKm","mapSpatialResolutionToNumber","resolution","flattenArray","arr","flattenedArray","i","length","j","push","splitData","data","changeInterval","numDistinct","Math","floor","mergeArraysAndComputeMeans","mergeTargetDistance","nextMergeStartDistance","numArraysPerMerge","mergedArrays","travelDistance","subArray","sum","count","k","isNaN","mergeArrays","subTypes","sectionMap","contourSectionMap","timeSeries","histogram","depthProfile","heatmap","contourMap","sparse","temporalResolutions","threeMinutes","sixHourly","daily","weekly","monthly","annual","monthlyClimatology","threeDay","eightDayRunning","eightDays","SpaceTimeData","generateCsv","csvArray","dates","Array","from","depths","hasDepth","parameters","fields","variableValues","lats","lons","join","this","metadata","hasHours","isMonthly","Set","zMin","zMax","extent","indexAdjust","lonMin","lonMax","latMin","latMax","distinctLatCount","distinctLonCount","row","lat","parseFloat","_lon","lon","lon1","hasHour","Table_Name","Temporal_Resolution","time","value","add","Date","setUTCHours","toISOString","size","lonCount","latCount","quantile1","quantile","quantile2","undefined","toPrecision","spatialResolution","Spatial_Resolution","round","subType","splitByDate","splitByDepth","variableValueSubsets","depthInterval","dateInterval","map","subset","vizSubTypes","storedProcedures","spaceTime","TimeSeriesData","stds","depth","depthIndexAdjust","csvString","DepthProfileData","SectionMapData","lonInterval","latInterval","orientation","lonArray","max","min","splitBySpace","spaceCount","SparseData","variableIndex","Depth_Min","times","latDistance","abs","lonDistance","distance","sqrt","_zoom","zoom","lonCenter","latCenter","center","fetchOptions","credentials","postOptions","method","headers","storedProcedureParametersToUri","Object","reduce","queryString","key","api","login","fetch","body","stringify","logout","register","validate","googleLoginRequest","a","response","contactUs","changePassword","changeEmail","retrieve","decoder","encoding","TextDecoder","csvParser","CSVParser","columns","on","record","read","ok","reader","getReader","readerIsDone","chunk","done","write","decode","Dataset_Long_Name","trim","keyRetrieval","keyCreation","description","updateUserInfo","userInfo","recoverPassword","email","choosePassword","password","token","visualization","storedProcedureRequest","spName","vizData","console","log","status","e","getTableStats","json","cruiseTrajectoryRequest","csvDownload","dataSubmission","retrieveSubmissionByUser","beginUploadSession","uploadPart","formData","commitUpload","setPhase","retrieveCommentHistory","retrieveMostRecentFile","getFileFromLink","link","userLogin","userLogout","userRegistration","userValidation","catalogRetrieval","datasetRetrieval","queryRequest","cruiseListRequest","tableStatsRequest","csvDownloadRequest","csvFromVizRequest","refreshLogin","updateUserInfoRequest","recoverPasswordRequest","choosePasswordRequest","contactUsRequest","changePasswordRequest","changeEmailRequest","copyTextToClipboard","retrieveSubmissionsByUser","uploadSubmission","setDataSubmissionPhase","watchUserLogin","watchUserRegistration","watchUserValidation","watchUserLogout","watchGoogleLoginRequest","watchCatalogRetrieval","watchDatasetRetrieval","watchKeyRetrieval","watchKeyCreationRequest","watchQueryRequest","watchStoredProcedureRequest","watchCruiseTrajectoryRequest","watchCruiseListRequest","watchTableStatsRequest","watchCsvDownloadRequest","watchDownloadTextAsCsv","watchRefreshLogin","watchUpdateUserInfoRequest","watchInitializeGoogleAuth","watchRecoverPasswordRequest","watchChoosePasswordRequest","watchContactUs","watchChangePasswordRequest","watchChangeEmailRequest","watchCsvFromVizRequest","watchCopyTextToClipboard","watchRetrieveSubmissionsByUser","watchRetrieveAllSubmissions","watchAddSubmissionComment","watchRetrieveSubmissionCommentHistory","watchUploadSubmission","watchSetDataSubmissionPhase","watchRetrieveMostRecentFile","rootSaga","put","call","userActions","interfaceActions","pathname","href","gapi","auth2","getAuthInstance","authInstance","signOut","result","catalogActions","visualizationActions","delay","finalize","scrollTo","metadataQuery","all","dataResponse","metadataResponse","csvData","csv","blob","Blob","url","URL","createObjectURL","document","createElement","setAttribute","appendChild","click","removeChild","currentUser","getAuthResponse","authResponse","id_token","textArea","select","execCommand","remove","jsonResponse","dataSubmissionActions","fileSize","name","chunkSize","offset","retries","sessionID","beginSessionResponse","currentPartSucceeded","part","FormData","append","commitSucceeded","phaseID","linkResponse","dataset","getFileResponse","File","takeLatest","sagaMiddleware","createSagaMiddleware","store","createStore","rootReducer","applyMiddleware","run","colors","primary","solidPaper","backgroundGray","secondary","errorYellow","greenHover","mapDispatchToProps","connect","forwardRef","props","tooltipPlacement","innerSpanProps","handleCopyText","event","target","innerText","hideTooltip","style","cursor","onClick","Tooltip","placement","title","keyCreationRequestSend","ApiKeyManagement","componentDidMount","handleClick","handleChange","setState","classes","className","wrapper","Paper","root","elevation","Typography","variant","apiKeyTableHeader","Divider","Table","table","TableHead","TableRow","TableCell","align","TableBody","apiKey","index","Description","showChildOnHover","Api_Key","warningCaption","Grid","container","alignItems","justify","spacing","item","TextField","margin","onChange","placeholder","descriptionField","autoComplete","Button","disabled","color","Component","ownProps","withStyles","theme","width","marginTop","paddingTop","minWidth","marginBottom","visibility","fontSize","loginRequiredMessage","useEffect","Link","component","RouterLink","to","Home","Fragment","tableMapping1","tableMapping2","tableMapping3","padding","height","userSelect","infoCard","gridClass","maxHeight","gridItem","display","justifyContent","verticalAlign","datasetDescriptionWrapper","whiteSpace","overflow","datasetDescription","vizSampleImage","maxWidth","variableDetailTable","marginLeft","marginRight","tableLayout","variableDetailTableRow","variableDetailTableCell","borderBottomColor","textOverflow","paddingRight","gridDetailTypography","boldText","fontWeight","rightGridItem","boxSizing","datasetDescriptionButton","backgroundColor","buttonTextWrapper","xs","Time_Min","Time_Max","Depth_Max","Comment","context","handleDescribeVariable","ID","DatasetDescriptionDialog","datasetName","clearDescription","Dialog","open","onClose","PaperProps","dialogPaper","DialogTitle","DialogContent","source","markdown","palette","main","textDecoration","describedVariable","variable","find","Long_Name","tooltip","boxShadow","borderRadius","textAlign","children","datasetGroupWrapper","bozSizing","nonDatasetGroupWrapper","paddingLeft","datasetGridClass","adjustGridLeft","groupName","chevronButton","datasetChevronButton","chevronIcon","transform","datasetButtonWrapper","tableGridSection","shortCell","acknowledgement","acknowledgementHeader","buttonMarginLeft","buttonMarginTop","node","allLeafChildren","React","useState","expanded","setExpanded","toggleExpand","field","onDoubleClick","IconButton","ExpandMore","enterDelay","ChevronRight","src","Icon_URL","alt","direction","Data_Source","Distributor","Acknowledgement","handleDescribeDataset","Dataset_Name","level","disableRipple","disableFocusRipple","columnDefs","headerName","sortable","filter","tooltipField","cellRenderer","hide","enableRowGroup","rowGroup","defaultColDef","resizable","cellStyle","autoGroupColumnDef","getRowHeight","params","group","detail","AGGridWrapper","filterText","describedDataset","gridApi","setQuickFilter","onGridReady","columnApi","sizeColumnsToFit","onGridSizeChanged","handleColumnRowGroupChanged","forEach","column","setColumnVisible","colId","handleDownloadCatalog","header","render","gridPaper","gridSearch","autoFocus","InputProps","startAdornment","InputAdornment","position","Search","downloadButton","gridWrapper","rowData","suppressDragLeaveHidesColumns","enableCellTextSelection","suppressContextMenu","getRowStyle","styles","background","rowGroupPanelShow","groupMultiAutoColumn","onColumnRowGroupChanged","enableBrowserTooltips","groupUseEntireRow","groupRowRenderer","masterDetail","frameworkComponents","myDetailCellRenderer","GridDetail","datasetGroupRowRenderer","GroupedDatasetRow","detailCellRenderer","detailRowHeight","textTransform","dark","Catalog","determineContent","content","registrationCard","textField","inputFieldState","handleKeyPress","buttonRef","current","Card","inputFieldInfo","label","error","valid","helperText","requirement","onKeyPress","registrationPreviousActiveStep","userRegistrationRequestSend","userValidationRequestSend","username","createRef","RegistrationStepper","userValidationRequestSuccess","validateField","rawValue","pattern","previousState","newCardState","cards","confirmPassword","test","processStateToActionPayload","actionPayload","card","cardKey","currentCardIsValid","currentCard","optional","handleNext","handleBack","newValue","fieldName","firstName","lastName","institute","department","country","newCard","steps","activeStep","cardInfoArray","Stepper","Step","StepLabel","instructionsPaper","instructions","handleHideStepper","button","ref","CircularProgress","buttonProgress","bottomError","handleClose","top","left","textSpan","fontFamily","clickHandlerTarget","viewBox","version","xmlns","xmlnsXlink","x","y","filterUnits","dx","dy","in","stdDeviation","values","rx","stroke","strokeWidth","fill","fillRule","xlinkHref","d","Register","showStepper","onGoogleSignup","registerGoogleClickHandler","_this","auth","attachClickHandler","setTimeout","handleShowStepper","paper","googleWrapper","emailSignUpWrapper","emailSignUpButton","validation","depthOneIsLower","depthOneOutOfBounds","depthTwoOutOfBounds","negative","date","dateOneIsLater","dateOneOutOfBounds","dateTwoOutOfBounds","latOneIsHigher","latOneOutOfBounds","latTwoOutOfBounds","lonOneIsHigher","lonOneOutOfBounds","lonTwoOutOfBounds","dataIsIrregular","dateRangeRequired","depthRangeRequired","surfaceOnlyDataset","irregularOnly","dataSizeTooLarge","webGLContextLimit","generic","invalid","dataSizeWarning","dataSizePrevent","variableMissing","vizTypeMissing","DialogContentText","Sensor","Lat_Min","Lat_Max","Lon_Min","Lon_Max","Variable_Min","Unit","Variable_Max","Variable_Mean","Variable_Std","mapTemporalResolutionToNumber","utcDateStringToLocal","utcString","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDate","getUTCDate","newDate","setFullYear","darwinDepths","piscesDepths","piscesTable","darwinTable","exports","depth1","depth2","has","chart","visualizationSubTypes","overrideDisabledStyle","clearCharts","getDatePlaceholder","valueOf","month","getMonth","day","getDate","getFullYear","reactWindowListRef","selectRef","MenuList","componentDidUpdate","prevProps","prevState","resetAfterIndex","scrollOffset","foundFocus","child","groupHasFocus","isFocused","options","getValue","initialOffset","indexOf","groupHeights","some","grandChild","totalHeight","acc","cur","estimatedItemSize","itemCount","itemSize","initialScrollOffset","Group","hasFocus","element","sensor","CustomHeading","headingProps","headingLabel","firstChild","selectProps","hidden","customHeading","icon","typography","iconClass","ListItem","focusedOption","Icon","handleSetDownloadTarget","stopPropagation","CloudDownload","Doc_URL","Info","DropdownIndicator","ArrowRight","Menu","Option","innerProps","onMouseMove","preventDefault","onMouseOver","GroupHeading","SingleValue","optionLabelSpanStyleLeft","optionLabelSpanStyleMid","optionLabelSpanStyleRight","formatOptionLabel","option","meta","ValueContainer","VizControlPanel","search","addDocuments","handleOpenControlPanel","showControlPanel","handleCloseControlPanel","handleTableStatsDialogClose","tableStatsDialogIsOpen","handleTableStatsDialogOpen","getSelectOptionsFromCatalogItems","items","Visualize","Variable","sort","opt1","opt2","estimateCsvSize","member","parseInt","Variable_Count","handleResetSPParams","resetSPParams","searchField","onAutoSuggestChange","searchString","estimateDataSize","dt1","dt2","lat1","lat2","lon2","selectedVizType","date1","dayDiff","res","dateCount","depthUtils","checkStartDepth","surfaceOnly","replace","toFixed","checkEndDepth","checkStartDateValid","checkEndDateValid","checkStartDate","checkEndDate","checkStartLat","checkEndLat","checkStartLon","checkEndLon","checkHeatmap","irregularSpatialResolution","checkContour","checkSection","checkHistogram","checkTimeSeries","checkDepthProfile","checkSparseMap","checkGeneralWarn","dataSize","checkGeneralPrevent","webGLCount","countWebGLContexts","handleShowChartsAndResize","dispatchEvent","Event","handleShowCharts","handleUpdateFields","updateFields","lastSelectedFieldId","JsSearch","indexStrategy","searchIndex","addIndex","maxDateMessage","maxDate","showCharts","handleShowGlobe","handleLatLonChange","catalogMinDate","setHours","catalogMaxDate","zeroedDT1","zeroedDT2","minDate","minDateMessage","startDepthMessage","endDepthMessage","startLatMessage","endLatMessage","startLonMessage","endLonMessage","heatmapMessage","contourMessage","sectionMapMessage","histogramMessage","timeSeriesMessage","depthProfileMessage","sparseMapMessage","generalWarnMessage","checkDisableVisualizeList","errorCount","errorSizeAdjust","disableVisualizeMessage","checkDisableVisualize","visualizeButtonTooltip","closePanelChevron","aria-label","ChevronLeft","openPanelChevron","Drawer","drawer","drawerPaper","anchor","ButtonGroup","groupedButtons","depressed","Language","InsertChartOutlined","clearChartsButton","Delete","resetSPParamsButton","Cached","isLoading","components","IndicatorSeparator","escapeClearsValue","onInputChange","filterOption","variableSelect","isClearable","inputValue","menu","provided","zIndex","backdropFilter","valueContainer","input","control","border","borderBottom","borderColor","noOptionsMessage","singleValue","tableStatsButton","LibraryBooks","datePicker","format","autoOk","handleStartDateChange","inputVariant","KeyboardButtonProps","datePickerInputAdornment","handleEndDateChange","formGridItem","FormHelperTextProps","padLeft","InputLabelProps","ceil","FormControl","vizTypeSelectFormControl","InputLabel","shrink","htmlFor","inputProps","MenuProps","MenuListProps","vizTypeMenu","MenuItem","vizTypeMenuItem","vizButtonTooltip","visualizeButton","onVisualize","fullWidth","bottom","drawerPaperError1","drawerPaperError2","drawerPaperError3","drawerPaperError4","drawerPaperError5","navDrawerWidth","controlPanelForm","borderLeft","fontVariant","borderRight","tableStatsRequestSend","DownloadConfirmationDialog","downloadTarget","handleFullDatasetDownload","handleSubsetDownload","sampleMember","isMonthyClimatology","timeUnit","timeStart","timeEnd","timeMin","timeMax","subsetLat1","subsetLat2","subsetLon1","subsetLon2","subsetTime1","subsetTime2","depthMin","depthMax","subsetDepth1","subsetDepth2","dateRatio","totalDataPoints","Variables","split","fullDataAvailable","totalDays","subsetDays","totalLatSize","subsetLatSize","latRatio","totalLonSize","subsetLonSize","lonRatio","depthRatio","totalDepthSize","subsetDepthSize","subsetDataPoints","subsetAvailable","timeString1","timeString2","timeStringMin","timeStringMax","tableFooter","DialogActions","dateString","months","layout","font","paper_bgcolor","autosize","config","displaylogo","annotations","distributor","yshift","documentElement","clientWidth","xref","yref","showarrow","colorscaleOptions","chartWrapper","popover","paddingBottom","iconButton","colorForm","lastIcon","borderTopRightRadius","borderBottomRightRadius","buttonGroup","colorscaleMenu","grayBackground","onToggleSplitByDate","onToggleSplitBySpace","downloadCsv","handleZValueConfirm","zValues","markerOptions","handleMarkerOptionsConfirm","showErrorBars","handleSetShowErrorBars","showLines","handleSetShowLines","paletteAnchorElement","setPaletteAnchorElement","zScalePopoverAnchorElement","setZScalePopoverAnchorElement","localZMin","setLocalZMin","localZMax","setLocalZMax","zScalePopoverOpen","zScalePopoverID","handleZScalePopoverClose","zScaleValidations","zMinMessage","zMaxMessage","markerOptionsAnchorElement","setMarkerOptionsAnchorElement","opacity","localMarkerOpacity","setLocalMarkerOpacity","localMarkerColor","setLocalMarkerColor","localMarkerSize","setLocalMarkerSize","previousOpacity","useRef","usePreviousOpacity","previousColor","usePreviousColor","previousSize","usePreviousSize","markerPopoverOpen","markerPopoverID","handleMarkerOptionsClose","markerOptionsValidations","checkLocalMarkerOpacity","checkLocalMarkerSize","localMarkerOpacityMessage","localMarkerSizeMessage","DateRange","LineWeight","currentTarget","SwapVert","ShowChart","Tune","handlePaletteChoice","Palette","Gamepad","anchorEl","keepMounted","Popover","anchorOrigin","vertical","horizontal","transformOrigin","OutlinedInput","aria-describedby","labelWidth","FormHelperText","buttonBlock","iconButtonWrapper","handleChartDateString","useResizeHandler","marker","chartBase","plot_bgcolor","xaxis","exponentformat","yaxis","infoObject","sectionSize","lonRange","tickvals","ticktext","tickmode","sizeRatio","plots","setSplitByDate","setSplitByDepth","setPalette","setZValues","subSets","generatePlotData","subsets","xTicks","handleXTicks","getChartDimensions","latTitle","lonTitle","hovertext","formatter","minHeight","zauto","zmin","zmax","z","connectgaps","autocolorscale","colorscale","hoverinfo","contours","coloring","showlabels","labelfont","family","labelformat","colorbar","handleContourMap","zsmooth","handleHeatmap","requestAnimationFrame","onToggleSplitByDepth","chartCount","availableWGLContexts","setMarkerOptions","setShowLines","setShowErrorBars","mode","error_y","array","visible","line","isMonthy","date2","error_x","autorange","setSplitBySpace","setOrientation","spaces","distinctMeridiansOrParallelsForSplitting","xAxis","handleSectionMap","switchOrientation","SparseScatter","xValues","yValues","xTitle","yTitle","tabProps","SparseTabPanel","selectedTab","controlPanelProps","tabs","tab","setTab","plot","radius","mapbox","sourcetype","below","mapboxAccessToken","handleSparseMap","scatter","Tabs","centered","indicatorColor","Tab","deleteChart","CloseChartIcon","closeChartIcon","float","handleDeleteChart","Close","Charts","chartPaper","cruiseTrajectoryClear","esriFonts","cruiseSort","b","Name","CruiseSelector","Nickname","getSelectOptionsFromCruiseList","list","handleCruiseSelect","selection","selectedCruise","updateParametersFromCruiseBoundary","outerDiv","blurEffectDiv","getCruiseListState","cruiseSelect","menuList","primary25","cruiseInfo","cruiseInfoCell","Start_Time","End_Time","Chief_Name","Ship_Name","borderStyle","DrawButton","drawButton","helpText","cancelButton","polygonSymbol","symbolLayers","material","outline","polylineSymbol","r","g","UiComponents","shouldComponentUpdate","nextProps","nextState","sketchModel","esriModules","SketchViewModel","layer","regionLayer","view","defaultUpdateOptions","toggleToolOnClick","tool","setShowHelp","getElementById","throttledUpdate","throttle","updateDomainFromGraphicExtent","Utils","webMercatorToGeographic","graphic","geometry","toolEventInfo","complete","graphics","addEventListener","removeAll","create","cancel","ui","TrajectoryController","memo","trajectoryLayer","midIndex","polyLines","lineIndex","lonStart","latStart","maxDistance","_lonDistance","cruiseTrajectorySymbol","cap","cruiseTrajectoryGeometry","paths","Graphic","symbol","goTo","maxDuration","speedFactor","MapContainer","spParams","globeUIRef","_lon2","polygon","rings","regionGraphic","mapProperties","basemap","viewProperties","highlightOptions","haloOpacity","haloColor","fillOpacity","measurementPositions","GraphicsLayer","cleanSPParams","localDateToString","year","toString","mapVizType","vizType","sp","queryRequestSend","storedProcedureRequestSend","storedProcedureInfo","completedShowCharts","baseSPParams","Visualization","filteredData","showUI","mapping","sparseMaxDate","setDate","cruise","toggleShowUI","_lon1","xmin","xmax","newCoordinates","ymin","ymax","esriModuleNames","loadModules","loadedModules","accumulator","currentValue","currentIndex","vizWrapper","toggleChartView","displayNone","userLoginRequestSend","LoginDialog","handleLogin","clearState","onGoogleSignin","onDialogEnter","loginDisabled","aria-labelledby","onEnter","dialogWrapper","colorCorrectionPrimary","onSubmit","googleIconWrapper","colorCorrectionWhite","colorCorrection","snackbarClose","Snackbar","autoHideDuration","loader","right","loaderContent","flexDirection","alignItem","spinnerText","spinner","fadeIn","loginDialogWasCleared","GlobalUIComponentWrapper","handleLogOut","preProps","inlineBlock","LandingPage","landingWrapper","jss","navLink","pointerEvents","withRouter","JSS","dropdown","popperPaperBlue","borderTopLeftRadius","popperPaperBlack","setAnchorEl","paperClass","ExpandLess","Popper","role","transition","TransitionProps","Grow","ClickAwayListener","onClickAway","isDataSubmissionAdmin","menuIcon","listItem","drawerState","setDrawerState","List","TopNavBar","handleResize","w","innerWidth","history","navWrapper","navWrapperBlue","simonsLogoWrapper","simonsLogo","rightSectionWrapper","rightNavLink","changePasswordRequestSend","oldPassword","newPassword","formWrapper","currentPassword","setCurrentPassword","setNewPassword","newPasswordConfirm","setNewPasswordConfirm","newPasswordValid","newPasswordConfirmValid","resetFields","changePasswordButtonRef","buttonIsDisabled","changeEmailRequestSend","setpassword","setEmail","emailConfirm","setEmailConfirm","changeEmailButtonRef","emailValid","testEmail","emailConfirmValid","updateUserInfoRequestSend","showChangePasswordDialog","showChangeEmailDialog","userProperties","userToState","editable","Profile","handleValidation","infoHasChanged","handleEdit","handleCancel","handleConfirm","formIsValid","property","close","changePasswordDialogOpen","ChangeEmail","changeEmailDialogOpen","profilePaper","editButton","Edit","md","readOnly","buttonGrid","accountPaper","accountEditButton","descriptionPaper","number","required","makes","toLowerCase","makesString","makesSet","disciplines","disciplinesSet","sensors","sensorsSet","codeFriendly","binary","spatialResolutionSet","temporalResolutionsSet","dataset_short_name","dataset_long_name","dataset_version","dataset_release_date","dataset_make","dataset_source","dataset_distributor","dataset_acknowledgement","dataset_history","dataset_description","dataset_references","climatology","contact_email","var_short_name","var_long_name","var_sensor","var_unit","var_spatial_res","var_temporal_res","var_discipline","visualize","var_keywords","col","cellAudit","auditFuncs","audits","func","fixedVariables","auditWorkbook","vars_meta_data","dataset_meta_data","auditRows","rows","audit","rowAudit","checkCell","workbook","DSCellEditor","errorStepperPaper","errors","errorIndex","stepBackward","stepForward","auditReport","sheet","rowIndex","afterGuiAttached","inputRef","focus","attached","handleClickAway","stopEditing","parseValue","spellCheck","err","lineHeight","isPopup","rowCount","textAreaLookup","cols","opts","selectOptions","numberParser","Number","valueParser","autoHeight","cellEditor","ValidationGrid","gridContext","singleClickEdit","onModelUpdated","defaultColumnDef","suppressMovableColumns","onCellValueChanged","handleCellValueChanged","DSCellEditorSelect","DSCellEditorTextArea","PureComponent","sample","is1904","Workbook","WBProps","date1904","collapsedRow","var_comment","validationSteps","ValidationTool","checkCellStyle","childIndex","validationStep","menuTabs","handleDragOver","handleResetState","handleChangeValidationStep","newAudit","updated","redrawRows","handleReadFile","FileReader","onload","readFile","Uint8Array","XLSX","Sheets","_data","utils","sheet_to_json","defval","formatDataSheet","_dataset_meta_data","formatDatasetMetadataSheet","dataSubmissionAudit","readAsArrayBuffer","handleDrop","dataTransfer","getAsFile","handleFileSelect","files","handleClearState","handleUploadSubmission","book_new","book_append_sheet","json_to_sheet","wbArray","bookType","scrollGridTo","ensureIndexVisible","handleFindNext","lastFocused","getFocusedCell","start","end","ensureColumnVisible","startEditingCell","colKey","URLSearchParams","needHelp","download","needHelpLink","fileSelectPaper","addBorder","onDragOver","onDrop","clearFileIcon","currentlyViewingTypography","ilb","accept","findNextButton","tabPaper","submitButton","dragTarget","letterSpacing","dataTable","tableWrapper","pageHeader","guideSection","sectionHeader","sectionContent","getStartedPaper","commentArea","commenterAndDateTime","Commenter","Comment_Date_Time","dateTime","toLocaleString","panelDetails","newCommentDiv","newCommentTextField","flexBasis","postButton","setPhaseButton","stepper","newUpload","submission","setComment","Submission_ID","renderComments","Phase","ExpansionPanelDetails","alternativeLabel","encodeURIComponent","multiline","retrieveDataSubmissionsByUser","wrapperDiv","panelSummaryText","expandedPanel","setExpandedPanel","ExpansionPanel","handleExpansion","unmountOnExit","ExpansionPanelSummary","expandIcon","noWrap","Dataset","setSubmissionPhase","phaseControlWrapper","phaseSelect","Phase_ID","phase","Select","handleResetExpandedPanel","initialFilterState","AdminDashboard","handleChangeFilter","newFilterState","filters","handleChangeSearchString","FormGroup","filterFormGroup","searchFieldWrapper","FormControlLabel","Checkbox","checked","filterFormControl","modifiedDatasetID","flexWrap","exact","path","SubmissionGuide","UserDashboard","contactUsRequestSend","subject","ContactUs","handleSubmit","messageTextField","iconContainer","followContainer","softwareIcon","followUs","followUsGridSection","followUsIcon","docButtonGrid","docButton","lg","srcSet","recoverPasswordRequestSend","emailSentDescription","sendButton","emailWasSent","setEmailWasSent","choosePasswordRequestSend","choosePasswordRequestReset","choosePasswordButtonRef","ChoosePassword","handleChangePassword","handleChangeConfirmPassword","decodedToken","jwtDecode","expiration","setUTCSeconds","exp","sub","passwordValid","confirmPasswordValid","formGrid","textFields","createMuiTheme","useNextVariants","contrastText","default","overrides","MuiIconButton","MuiPaper","MuiListItemIcon","MuiFormHelperText","filled","MuiListItem","gutters","MuiToolbar","MuiMenuItem","MuiPickersBasePicker","MuiOutlinedInput","MuiSnackbarContent","MuiButtonGroup","groupedOutlined","MuiTableCell","MuiFormControl","marginNormal","MuiDialogContentText","MuiExpansionPanel","MuiDialogTitle","MuiFilledInput","adornedEnd","MuiPopover","App","DateFnsUtils","Login","ForgotPass","DataSubmission","CommunityTemp","LicenseManager","setLicenseKey","rootElement","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,mBAAuB1X,EAAK+tB,KAA5B,KACA,kBAACrW,GAAA,EAAD,KAAY1X,EAAKiuB,gBAIxBjuB,EAAKkuB,cACF,kBAACzW,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,2BAA+B1X,EAAK+tB,KAApC,KACA,kBAACrW,GAAA,EAAD,KAAY1X,EAAKkuB,mBArHhC,MCENC,GAlBuB,SAAC5uB,GAAgB,IAAD,EAelD,OAdO,mBACFmC,GAAoBC,aAAgB,GADlC,cAEFD,GAAoBE,UAAa,GAF/B,cAGFF,GAAoBG,MAAS,GAH3B,cAIFH,GAAoBI,OAAU,GAJ5B,cAKFJ,GAAoBK,QAAW,IAL7B,cAMFL,GAAoBM,OAAU,KAN5B,cAOFN,GAAoB9C,UAAa,MAP/B,cAQF8C,GAAoBO,mBAAqB,IARvC,cASFP,GAAoBQ,SAAW,GAT7B,cAUFR,GAAoBS,gBAAkB,GAVpC,cAWFT,GAAoBU,UAAY,GAX9B,GAcI7C,ICNA6uB,GAXc,SAACC,GAC1B,IAAIpC,EAAO,IAAInnB,KAAKupB,GAChBC,EAAUrC,EAAKsC,iBACfC,EAAWvC,EAAKwC,cAChBC,EAAUzC,EAAK0C,aAEfC,EAAU,IAAI9pB,KAElB,OADA8pB,EAAQC,YAAYP,EAASE,EAAUE,GAChCE,GCPLE,GAAe,CACjB,EACA,GACA,GACA,GACA,GACA,GACA,GACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,OACA,SACA,SACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SAGEC,GAAe,CACjB,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,eAkBEC,GAAc,IAAIzrB,IAfF,CAClB,gBACA,2BAcE0rB,GAAc,IAAI1rB,IAXH,CACjB,4BACA,sBACA,qBACA,iCACA,wBACA,0BACA,mCA+BW2rB,GAzBC,CACZruB,MAAO,SAACqf,EAAOiP,EAAQC,GAAY,IACX7X,EAAU2I,EAAMlgB,KAA5ByE,WACJ5D,EAAQ,EAEZ,GAAGmuB,GAAYK,IAAI9X,GACf,IAAI,IAAI5X,EAAI,EAAGA,EAAIovB,GAAanvB,UACzBmvB,GAAapvB,GAAKyvB,GADezvB,IAEjCovB,GAAapvB,GAAKwvB,GAAQtuB,SAE9B,GAAIouB,GAAYI,IAAI9X,GACvB,IAAI,IAAI5X,EAAI,EAAGA,EAAImvB,GAAalvB,UACzBkvB,GAAanvB,GAAKyvB,GADezvB,IAEjCmvB,GAAanvB,GAAKwvB,GAAQtuB,IAGrC,OAAOA,GAGXmuB,eACAC,eACAF,gBACAD,iBCjJW,YAACp1B,GACZ,IAAImH,EAAQ,EAQZ,OAPAnH,EAAOqpB,SAAQ,SAAAuM,GACRA,EAAM1pB,UAAY2pB,GAAsBhuB,SAASV,IACjDyuB,EAAM1pB,UAAY2pB,GAAsB9tB,SACvCZ,IACGyuB,EAAMtvB,KAAK+C,eAAenD,OAAS,MAAOiB,GAAQ,OAGtDA,GCuKL2uB,GAAwB,CAC1BjT,gBAAiB,eAcflH,GAAqB,CACvBjY,8BACAqyB,Y1C3HuB,iBAAO,CAC9B50B,KNxDwB,iBgDmLxB0C,yBACAR,gBAGE2yB,GAAqB,SAACzD,GACxB,GAAGlrB,MAAM,IAAI+D,KAAKmnB,IAAO0D,UAAW,MAAO,aAE3C,IAAIC,EAAS3D,EAAK4D,WAAa,EAC3BC,EAAM7D,EAAK8D,UAEf,MAAO,CADI9D,EAAK+D,cACFJ,EAAQ,GAAK,IAAMA,EAAQA,EAAOE,EAAM,GAAK,IAAMA,EAAMA,GAAK5sB,KAAK,MAM/E+sB,GAAqBpQ,IAAM+G,YAC3BsJ,GAAYrQ,IAAM+G,YAElBuJ,G,8MAEFC,mBAAqB,SAACC,EAAWC,GAE/B,GADGL,GAAmBlK,SAASkK,GAAmBlK,QAAQwK,gBAAgB,GACrE,EAAK/a,MAAMgJ,UAAY,EAAKhJ,MAAMgJ,SAAS5e,OAAhD,CACA,IAAI4wB,EAAe,EACfC,GAAa,EACjB,EAAKjb,MAAMgJ,SAASuE,SAAQ,SAAA2N,GAC1B,IAAGD,EAAH,CAIA,IAFA,IAAI5vB,EAhBc,GAiBd8vB,GAAe,EACXhxB,EAAI,EAAGA,EAAI+wB,EAAMlb,MAAMgJ,SAAS5e,OAAQD,IAAI,CAClD,GAAG+wB,EAAMlb,MAAMgJ,SAAS7e,GAAG6V,MAAMob,UAAW,CAC1CH,GAAa,EACbE,GAAgB,EAChB,MAEF9vB,GAAS,KAGO2vB,GAAfG,EAA+B9vB,EACb,SAEpB4vB,GAAYR,GAAmBlK,QAAQtU,SAAS+e,EAAe,IAAMA,EAAe,IAAM,K,0EAGrF,IAAD,EACmCrtB,KAAKqS,MAArCqb,EADH,EACGA,QAASrS,EADZ,EACYA,SAAUsS,EADtB,EACsBA,SAE3B,IAAItS,IAAaA,EAAS5e,OAAQ,MAAO,GAHpC,MAIWkxB,IAATlsB,EAJF,oBAKCmsB,EArCC,GAqCeF,EAAQG,QAAQpsB,GAChCqsB,EAAezS,EAAStY,KAAI,SAAAwqB,GAChC,OAAOA,EAAMlb,MAAMgJ,SAAS0S,MAAK,SAAAC,GAAU,OAAIA,EAAW3b,MAAMob,aAA2C,KAA9BF,EAAMlb,MAAMgJ,SAAS5e,OAxClF,SA0CZwxB,EAAcH,EAAatoB,QAAO,SAAC0oB,EAAKC,GAAN,OAAcD,EAAMC,IAAK,GAC3DC,EAAoBH,EAAc5S,EAAS5e,OAGjD,OACI,kBAAC,KAAD,CACI6a,OAAQ2W,EAAc,IAAMA,EAAe,IAC3CG,kBAAmBA,EACnBC,UAAWhT,EAAS5e,OACpB6xB,SAPY,SAAA3Z,GAAK,OAAImZ,EAAanZ,IAQlC4Z,oBAAqBX,GAAiB,EACtC7H,IAAK+G,KAEJ,gBAAGnY,EAAH,EAAGA,MAAO9B,EAAV,EAAUA,MAAV,OAAsB,yBAAKA,MAAK,eAAMA,IAASwI,EAAS1G,W,GAjDlDoB,aAuDjByY,G,sLAEE,IAAMC,EAAWzuB,KAAKqS,MAAMgJ,SAAS0S,MAAK,SAAAW,GAAO,OAAIA,EAAQrc,MAAMob,aAC7DkB,EAAS3uB,KAAKqS,MAAMgJ,SAAS,GAAGhJ,MAAMxV,KAAKA,KAAKytB,OAExD,OACI,kBAAC,IAAMrT,SAAP,KACE,kBAAC2X,GAAD,iBACM5uB,KAAKqS,MAAMwc,aADjB,CAEEC,aAAc9uB,KAAKqS,MAAMxV,KAAKkmB,MAC9BgM,WAAY/uB,KAAKqS,MAAMgJ,SAAS,GAAGhJ,MAAMxV,KACzC4xB,SAAUA,EACVE,OAAQA,EACRp0B,UAAWyF,KAAKqS,MAAMgJ,SAAS,GAAGhJ,MAAMxV,KAAKA,KAAKyE,WAClD0tB,YAAahvB,KAAKqS,MAAM2c,eAE1B,yBAAKC,QAASR,GACXzuB,KAAKqS,MAAMgJ,SAAStY,KAAI,SAAAwqB,GAAK,OAAIA,W,GAjB5BxX,aAkGd6Y,GAAgB3Y,cA1EM,SAACC,GAAD,MAAY,CACpCgZ,cAAe,CACX9V,gBAAiB,iBACjB9B,OAxFkB,GAyFlB,UAAW,CAEP8B,gBAAiBzH,GAAOM,YAE5BiJ,UAAW,2BAGfiU,KAAM,CACF5W,YAAa,OACbpC,MAAO,QAGXiZ,WAAY,CACRjZ,MAAO,QACP6B,WAAY,SACZC,SAAU,SACVW,aAAc,eAsDA3C,EAlDC,SAAA5D,GAAU,IAEzBgd,EADI5b,EAAiCpB,EAAjCoB,QAASkb,EAAwBtc,EAAxBsc,OAAQK,EAAgB3c,EAAhB2c,YAOzB,OAJ2BK,EAAb,cAAXV,EAAoC,eACpB,UAAXA,EAAgC,YACvB,UAGf,kBAAC,IAAM1X,SAAP,KACE,kBAACqY,GAAA,EAAD,CACExJ,QAAM,EACN5Q,WAAW,SACXnC,QAAS,kBAAMga,GAAUnK,QAAQ/S,OAAO2D,SAAS,CAAC+b,cAAeld,EAAMoc,SAAW,KAAOpc,EAAM0c,cAC/Frb,UAAWD,EAAQyb,eAEjB,kBAACM,GAAA,EAAD,CAAM/Y,SAAS,QAAQX,MAAM,UAAUpC,UAAS,cAAS2b,EAAT,YAAsB5b,EAAQ0b,QAClF,kBAACpb,GAAA,EAAD,CAAYL,UAAWD,EAAQ2b,YAC1B/c,EAAMyc,aAAaryB,OAAS,GAAK4V,EAAMyc,aAAa12B,MAAM,EAAE,IAAM,MAAQia,EAAMyc,cAGrF,kBAAC9b,GAAA,EAAD,CAASE,MAAM,gBAAgBD,UAAU,SACrC,kBAACgK,GAAA,EAAD,CACInH,MAAM,UACN/C,QAAS,SAACjK,GACNkmB,EAAYS,wBAAwB,CAACze,QAASqB,EAAMyc,eACpDhmB,EAAE4mB,oBAEN,kBAACC,GAAA,EAAD,QAINX,EAAY15B,SAAS+c,EAAMyc,eACzB,kBAAC9b,GAAA,EAAD,CAASE,MAAM,eAAeD,UAAU,SACpC,kBAACgK,GAAA,EAAD,CACInH,MAAM,UACN/C,QAAS,SAACjK,GACN/U,OAAOmmB,KAAK8U,EAAY15B,SAAS+c,EAAMyc,cAAcc,SACrD9mB,EAAE4mB,oBAGN,kBAACG,GAAA,EAAD,aAYdC,GAAoB,SAACzd,GACvB,OACA,kBAAC,KAAWyd,kBAAsBzd,EAC9B,kBAAC0d,GAAA,EAAD,QAKFC,GAAO,SAAC3d,GACV,OACI,kBAAC,KAAW2d,KAAZ,iBACI3d,EADJ,CAEAqB,UAAU,6BAQZuc,GAAS,SAAC5d,GACZ,OACE,kBAAC,KAAW4d,OAAZ,iBACM5d,EADN,CAEE6d,WAAU,eACH7d,EAAM6d,WADH,CAGNC,YAAa,SAACrnB,GAAD,OAAOA,EAAEsnB,kBACtBC,YAAa,SAACvnB,GAAD,OAAOA,EAAEsnB,wBAM5BE,GAAe,SAACje,GAAD,MAAW,IAE1Bke,GAAc,SAACle,GACjB,OACI,kBAAC,KAAWke,YAAZ,iBACQle,EADR,CAEIgJ,SAAU,OAEThJ,EAAMxV,KAAKkmB,QAKlByN,GAA2B,CAC7B5Y,QAAS,eACTsB,UAAW,aACXlB,WAAY,SACZC,SAAU,SACVW,aAAc,WACdnC,SAAU,OACV8B,YAAa,OACbpC,MAAO,mBACPiF,UAAW,QAGTqV,GAAuB,eACtBD,GADsB,CAEzBjY,YAAa,OACbpC,MAAO,qBAGLua,GAAyB,eACxBF,GADwB,CAE3BpV,UAAW,QACX7C,YAAa,MACbpC,MAAO,QAGLwa,GAAoB,SAACC,EAAQC,GAC/B,OACI,kBAAC,IAAM5Z,SAAP,KACI,0BAAMpE,MAAO2d,IAA2BI,EAAO7N,OAC/C,0BAAMlQ,MAAO4d,IAA6D,cAAnCG,EAAO/zB,KAAK0F,mBAAqC,YAAc,WACtG,0BAAMsQ,MAAO6d,IAA4BE,EAAO/zB,KAAK4gB,eAK3DqT,GAAiB,SAACze,GACpB,OACI,kBAAC,KAAWye,eAAmBze,EAC3B,kBAACqO,GAAA,EAAD,CAAQ5K,MAAM,UAAUjD,MAAO,CAAE4N,SAAU,WAAY4F,KAAM,KAC5DhU,EAAMgJ,WAKb0V,G,YAEF,WAAY1e,GAAO,IAAD,wBACd,8CAAMA,KA8BV4a,mBAAqB,SAACC,GACbA,EAAU93B,SAAW83B,EAAU93B,QAAQqH,SAAY,EAAK4V,MAAMjd,UAAW,EAAKid,MAAMjd,QAAQqH,SAC7F,EAAKjF,MAAMw5B,OAAOC,aAAa,EAAK5e,MAAMjd,SAC1C,EAAKoe,SAAS,CAACwd,OAAQ,EAAKx5B,MAAMw5B,WAlCxB,EAsClBE,uBAAyB,WACrB,EAAK1d,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B25B,kBAAkB,MAvClC,EA0ClBC,wBAA0B,WACtB,EAAK5d,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B25B,kBAAkB,MA3ClC,EA8ClBE,4BAA8B,WAC1B,EAAK7d,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B85B,wBAAwB,MA/CxC,EAkDlBC,2BAA6B,SAAC9e,GAC1BA,EAAMid,kBACN,EAAKlc,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B85B,wBAAwB,MApDxC,EAuDlBE,iCAAmC,SAACC,GAChC,IAAI/D,EAAU,GAuBd,OApBA+D,EAAM7R,SAAQ,SAAAvK,GACW,GAAlBA,EAAKqc,YACAhE,EAAQrY,EAAKwI,gBACb6P,EAAQrY,EAAKwI,cAAgB,CACzBkF,MAAO1N,EAAKwI,aACZ6P,QAAS,KAIjBA,EAAQrY,EAAKwI,cAAc6P,QAAQ/wB,KAAK,CACpC8E,MAAO4T,EAAKsc,SACZ5O,MAAO1N,EAAK2F,UAAUve,OAAS,GAAK4Y,EAAK2F,UAAY3F,EAAK2F,UAAU5iB,MAAM,EAAE,IAAM,MAClFyE,KAAMwY,QAKE9P,OAAO6hB,OAAOsG,GAASkE,MAAK,SAACC,EAAMC,GACnD,OAAOD,EAAK9O,MAAQ+O,EAAK/O,OAAS,EAAI,MA7E5B,EAkFlBgP,gBAAkB,SAAChY,GAEf,IAAIrc,EAAQ,EAOZ,OANA,EAAK2U,MAAMjd,QAAQwqB,SAAQ,SAACoS,EAAQx1B,GAC7Bw1B,EAAOnU,eAAiB9D,IACvBrc,GAASu0B,SAASD,EAAOE,iBAAmB,MAI7Cx0B,GA3FO,EA8FlBy0B,oBAAsB,WAClB,EAAK9f,MAAM+f,gBACX,EAAK5e,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B66B,YAAa,OAhG7B,EAmGlBC,oBAAsB,SAACC,EAAc96B,GACZ,iBAAlBA,EAAOA,SACN,EAAK+b,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B66B,YAAaE,KAC3CxF,GAAUnK,QAAQ/S,OAAO2D,SAAS,CAAC+b,eAAgB,KAGlC,iBAAlB93B,EAAOA,SACN,EAAK+b,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B66B,YAAaE,KAC3CxF,GAAUnK,QAAQ/S,OAAO2D,SAAS,CAAC+b,eAAgB,MA3GzC,EAgHlBiD,iBAAmB,WAAO,IAAD,EACiE,EAAKngB,MAAnFogB,EADa,EACbA,IAAKC,EADQ,EACRA,IAAKC,EADG,EACHA,KAAMC,EADH,EACGA,KAAMxxB,EADT,EACSA,KAAMyxB,EADf,EACeA,KAAMlzB,EADrB,EACqBA,OAAQqsB,EAD7B,EAC6BA,OAAQC,EADrC,EACqCA,OAAQ6G,EAD7C,EAC6CA,gBAClE,IAAInzB,EAAQ,OAAO,EACnB,GAAGA,EAAO9C,KAAK0F,qBAAuB/G,GAAmBC,UAAW,OAAO,EAC3E,GAAGq3B,IAAoB7vB,GAAYhF,YAAc60B,IAAoB7vB,GAAY9E,aAAc,OAAO,EAEtG,IAAM40B,EAAQpxB,KAAK5L,MAAM08B,GAGnBO,GAFQrxB,KAAK5L,MAAM28B,GAEAK,GAAS,MAE5BE,EAAM92B,GAA6BwD,EAAO9C,KAAK0F,oBAE/C2wB,EAAYl2B,KAAKC,MAAM+1B,EAAUhI,GAA8BrrB,EAAO9C,KAAK0E,uBAAyB,EAO1G,OAHkBsxB,EAAOzxB,GAAQ6xB,IADfL,EAAOD,GAAQM,IAFdE,GAAWz1B,MAAMiC,EAAQqsB,EAAQC,IAAW,GAKTiH,GAnIxC,EAuIlBE,gBAAkB,WACd,OAAG,EAAK/gB,MAAMghB,YAAoB,GAC9B,yBAAyBlP,KAAK,EAAK9R,MAAM2Z,QAC1C/qB,WAAW,EAAKoR,MAAM2Z,QAAU,EAAUvD,GAAWnlB,MAAMulB,SAC3D5nB,WAAW,EAAKoR,MAAM2Z,QAAU/qB,WAAW,EAAKoR,MAAM4Z,QAAgBxD,GAAWnlB,MAAMolB,gBACvFznB,WAAW,EAAKoR,MAAM2Z,QAAU/qB,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAK4c,WAAmBgP,GAAWnlB,MAAMqlB,oBAAoB2K,QAAQ,IAAKryB,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAK4c,WAAW8Z,QAAQ,IACxL,GAJsD9K,GAAWsB,QAAQC,SAzIlE,EAgJlBwJ,cAAgB,WACZ,OAAG,EAAKnhB,MAAMghB,YAAoB,GAC9B,yBAAyBlP,KAAK,EAAK9R,MAAM4Z,QAC1ChrB,WAAW,EAAKoR,MAAM4Z,QAAU,EAAUxD,GAAWnlB,MAAMulB,SAC3D5nB,WAAW,EAAKoR,MAAM2Z,QAAU/qB,WAAW,EAAKoR,MAAM4Z,QAAgBxD,GAAWnlB,MAAMolB,gBACvFznB,WAAW,EAAKoR,MAAM4Z,QAAUhrB,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAKwH,WAAmBokB,GAAWnlB,MAAMslB,oBAAoB0K,QAAQ,IAAKryB,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAKwH,WAAWkvB,QAAQ,IACxL,GAJsD9K,GAAWsB,QAAQC,SAlJlE,EAyJlByJ,oBAAsB,WAClB,GAAG71B,MAAM,IAAI+D,KAAK,EAAK0Q,MAAMogB,MAAMjG,YAAc,EAAKna,MAAMogB,IAAK,MAAO,yBA1J1D,EA6JlBiB,kBAAoB,WAChB,GAAG91B,MAAM,IAAI+D,KAAK,EAAK0Q,MAAMqgB,MAAMlG,YAAc,EAAKna,MAAMogB,IAAK,MAAO,uBA9J1D,EAiKlBkB,eAAiB,WACb,OAAG,EAAKthB,MAAMogB,IAAM,EAAKpgB,MAAMqgB,IAAYjK,GAAWK,KAAKC,eACxD,EAAK1W,MAAMogB,IAAM,EAAKpgB,MAAM1S,OAAO9C,KAAK2c,SAAiBiP,GAAWK,KAAKE,mBAAmBsK,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO9C,KAAK2c,UAC5H,IApKO,EAuKlBoa,aAAe,WACX,OAAG,EAAKvhB,MAAMqgB,IAAM,EAAKrgB,MAAM1S,OAAO9C,KAAK0c,SAAiBkP,GAAWK,KAAKG,mBAAmBqK,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO9C,KAAK0c,UAC5H,IAzKO,EA4KlBsa,cAAgB,WACZ,MAAI,yBAAyB1P,KAAK,EAAK9R,MAAMsgB,MAC1C1xB,WAAW,EAAKoR,MAAMsgB,OAAS,IAAM1xB,WAAW,EAAKoR,MAAMsgB,MAAQ,GAAWlK,GAAWsB,QAAQC,QACjG/oB,WAAW,EAAKoR,MAAMsgB,MAAQ1xB,WAAW,EAAKoR,MAAMugB,MAAcnK,GAAWznB,IAAIkoB,eACjFjoB,WAAW,EAAKoR,MAAMsgB,MAAQ1xB,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAK2tB,SAAiB/B,GAAWznB,IAAImoB,kBAAkBmK,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO9C,KAAK2tB,SAClJ,GAJoD/B,GAAWsB,QAAQC,SA7KhE,EAoLlB8J,YAAc,WACV,MAAI,yBAAyB3P,KAAK,EAAK9R,MAAMugB,MAC1C3xB,WAAW,EAAKoR,MAAMugB,OAAS,IAAM3xB,WAAW,EAAKoR,MAAMugB,MAAQ,GAAWnK,GAAWsB,QAAQC,QACjG/oB,WAAW,EAAKoR,MAAMugB,MAAQ3xB,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAK0tB,SAAiB9B,GAAWznB,IAAIooB,kBAAkBkK,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO9C,KAAK0tB,SAClJ,GAHoD9B,GAAWsB,QAAQC,SArLhE,EA2LlB+J,cAAgB,WACZ,MAAI,yBAAyB5P,KAAK,EAAK9R,MAAMjR,MAC1CH,WAAW,EAAKoR,MAAMjR,OAAS,KAAOH,WAAW,EAAKoR,MAAMjR,MAAQ,IAAYqnB,GAAWsB,QAAQC,QACnG,EAAK3X,MAAMjR,KAAO,EAAKiR,MAAMwgB,KAAa,GAC1C5xB,WAAW,EAAKoR,MAAMjR,MAAQH,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAK6tB,SAAiBjC,GAAWtnB,IAAImoB,kBAAkBgK,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO9C,KAAK6tB,SAClJ,GAJoDjC,GAAWsB,QAAQC,SA5LhE,EAmMlBgK,YAAc,WACV,MAAI,yBAAyB7P,KAAK,EAAK9R,MAAMwgB,MAC1C5xB,WAAW,EAAKoR,MAAMwgB,OAAS,KAAO5xB,WAAW,EAAKoR,MAAMwgB,MAAQ,IAAYpK,GAAWsB,QAAQC,QACnG/oB,WAAW,EAAKoR,MAAMwgB,MAAQ5xB,WAAW,EAAKoR,MAAM1S,OAAO9C,KAAK4tB,SAAiBhC,GAAWtnB,IAAIooB,kBAAkB+J,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO9C,KAAK6tB,SAClJ,GAHoDjC,GAAWsB,QAAQC,SApMhE,EA0MlBiK,aAAe,WACX,OAAG,EAAK5hB,MAAM6hB,2BAAmCzL,GAAW/wB,KAAK8xB,gBAAgB8J,QAAQ,IAAK,WACvF,IA5MO,EA+MlBa,aAAe,WACX,OAAG,EAAK9hB,MAAM6hB,2BAAmCzL,GAAW/wB,KAAK8xB,gBAAgB8J,QAAQ,IAAK,WACvF,IAjNO,EAoNlBc,aAAe,WACX,OAAG,EAAK/hB,MAAMghB,YAAoB5K,GAAW/wB,KAAKiyB,mBAAmB2J,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO8B,OACjG,EAAK4Q,MAAM6hB,2BAAmCzL,GAAW/wB,KAAK8xB,gBAAgB8J,QAAQ,IAAK,eAC3F,EAAKjhB,MAAM2Z,SAAW,EAAK3Z,MAAM4Z,OAAexD,GAAW/wB,KAAKgyB,mBAAmB4J,QAAQ,IAAK,eAC5F,IAxNO,EA2NlBe,eAAiB,WACb,MAAO,IA5NO,EA+NlBC,gBAAkB,WACd,OAAG,EAAKjiB,MAAM6hB,2BAAmCzL,GAAW/wB,KAAK8xB,gBAAgB8J,QAAQ,IAAK,eAC3F,EAAKjhB,MAAMogB,MAAQ,EAAKpgB,MAAMqgB,IAAYjK,GAAW/wB,KAAK+xB,kBAAkB6J,QAAQ,IAAK,eACrF,IAlOO,EAqOlBiB,kBAAoB,WAChB,OAAG,EAAKliB,MAAMghB,YAAoB5K,GAAW/wB,KAAKiyB,mBAAmB2J,QAAQ,IAAK,EAAKjhB,MAAM1S,OAAO8B,OACjG,EAAK4Q,MAAM2Z,SAAW,EAAK3Z,MAAM4Z,OAAexD,GAAW/wB,KAAKgyB,mBAAmB4J,QAAQ,IAAK,iBAC5F,IAxOO,EA2OlBkB,eAAiB,WACb,OAAI,EAAKniB,MAAM6hB,2BACR,GAD2CzL,GAAW/wB,KAAKkyB,eA5OpD,EAgPlB6K,iBAAmB,SAACC,GAChB,OAAI,EAAKriB,MAAMygB,iBACZ4B,EAAW,KAAgBjM,GAAWsB,QAAQE,gBADV,IAjPzB,EAsPlB0K,oBAAsB,SAACD,GACnB,IAAME,EAAaC,GAAmB,EAAKxiB,MAAM9b,QACjD,GAAG,EAAK8b,MAAMygB,kBAAoB7vB,GAAY7E,SAAWw2B,EAAa,GAAI,OAAOnM,GAAW/wB,KAAKoyB,kBACjG,GAAG,EAAKzX,MAAMygB,kBAAoB7vB,GAAY3E,QAAUs2B,EAAa,GAAI,OAAOnM,GAAW/wB,KAAKoyB,kBAEhG,GAAG,EAAKzX,MAAMygB,kBAAoB7vB,GAAY7E,SAClB,GAAKw2B,GACVzB,GAAWz1B,MAAM,EAAK2U,MAAM1S,OAAQ,EAAK0S,MAAM2Z,OAAQ,EAAK3Z,MAAM4Z,SAAW,GAC5D,EAAG,MAAO,+FAElD,OAAG,EAAK5Z,MAAMygB,kBAAoB7vB,GAAY/E,WAAa,EAAKmU,MAAMygB,kBAAoB7vB,GAAY7E,SAAWs2B,EAAW,MAGzHA,EAAW,IAFHjM,GAAWsB,QAAQG,gBAG1B,EAAK7X,MAAM1S,OACX,EAAK0S,MAAMygB,gBACR,GADgCrK,GAAWsB,QAAQK,eAD5B3B,GAAWsB,QAAQI,iBApQnC,EAwQlB2K,0BAA4B,WACxB3M,YAAW,kBAAMp0B,OAAOghC,cAAc,IAAIC,MAAM,aAAY,IAC5D,EAAK3iB,MAAM4iB,oBA1QG,EA6QlBC,mBAAqB,SAACrQ,EAAUptB,GAC5B,EAAK4a,MAAM8iB,aAAatQ,GACxB,EAAKrR,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B66B,YAAa,GAAI+C,oBAAqBvQ,EAAWA,EAAShoB,KAAKgd,GAAK,EAAKriB,MAAM49B,wBA5Q7G,IAAIpE,EAAS,IAAIqE,UAAgB,MAHnB,OAIdrE,EAAOsE,cAAgB,IAAID,8BAC3BrE,EAAOuE,YAAc,IAAIF,wBACzBrE,EAAOwE,SAAS,YAChBxE,EAAOwE,SAAS,QAChBxE,EAAOwE,SAAS,QAChBxE,EAAOwE,SAAS,UAChBxE,EAAOwE,SAAS,eAChBxE,EAAOwE,SAAS,iBAChBxE,EAAOwE,SAAS,aAChBxE,EAAOwE,SAAS,YAChBxE,EAAOwE,SAAS,cAChBxE,EAAOwE,SAAS,gBAChBxE,EAAOwE,SAAS,gBAChBxE,EAAOwE,SAAS,sBAChBxE,EAAOwE,SAAS,uBAEbnjB,EAAMjd,SAAS47B,EAAOC,aAAa5e,EAAMjd,SAE5C,EAAKoC,MAAQ,CACT85B,wBAAwB,EACxBN,SACAqB,YAAa,GACblB,kBAAkB,EAClBiE,oBAAqB,MA3BX,E,wEAkRR,IAuCFK,EACAC,EAxCC,SAC6C11B,KAAKxI,MAA/Cw5B,EADH,EACGA,OAAQqB,EADX,EACWA,YAAalB,EADxB,EACwBA,iBADxB,EAqBDnxB,KAAKqS,MAlBDoB,EAHH,EAGGA,QACJ9T,EAJC,EAIDA,OACAqsB,EALC,EAKDA,OACAC,EANC,EAMDA,OACAwG,EAPC,EAODA,IACAC,EARC,EAQDA,IACAC,EATC,EASDA,KACAC,EAVC,EAUDA,KACAxxB,EAXC,EAWDA,KACAyxB,EAZC,EAYDA,KACAC,EAbC,EAaDA,gBACA19B,EAdC,EAcDA,QACAX,EAfC,EAeDA,oBACAkhC,EAhBC,EAgBDA,WACAC,EAjBC,EAiBDA,gBACAriB,EAlBC,EAkBDA,aACAsiB,EAnBC,EAmBDA,mBACAvgC,EApBC,EAoBDA,SAIEo4B,EAAU2E,GAAej9B,EAAU4K,KAAKwxB,iCAAiCR,EAAOA,OAAOqB,IACvFj9B,EAAU4K,KAAKwxB,iCAAiCp8B,GAChD,GAIAs/B,EAAW10B,KAAKwyB,mBAClBsD,EAAiBn2B,GAAUsrB,GAAqBtrB,EAAO9C,KAAK0c,UAAUwc,SAAS,EAAE,EAAE,EAAE,GACrFC,EAAiBr2B,GAAUsrB,GAAqBtrB,EAAO9C,KAAK2c,UAAUuc,SAAS,EAAE,EAAE,EAAE,GACrFE,EAAYxD,EAAIsD,SAAS,EAAE,EAAE,EAAE,GAC/BG,EAAYxD,EAAIqD,SAAS,EAAE,EAAE,EAAE,GAE/BI,EAAUx2B,EAASm2B,EAAiB7K,GAAqB,cAAc8K,SAAS,EAAE,EAAE,EAAE,GAEtFK,EAAiBz2B,GAAUu2B,EAAYJ,EAAiB,0CAA4C,GAYhGL,EARJ91B,GAMGq2B,EAAiBE,EAECD,GADjBP,EAAUM,GAC6B,yCAA2C,GANrEC,GADjBP,EAAUQ,GAC6B,4BAA8B,GA5CpE,MAyDFv2B,EACe,CACVK,KAAKozB,kBACLpzB,KAAKwzB,gBACLxzB,KAAK6zB,gBACL7zB,KAAK8zB,cACL9zB,KAAK+zB,gBACL/zB,KAAKg0B,cACLh0B,KAAKi0B,eACLj0B,KAAKm0B,eACLn0B,KAAKo0B,eACLp0B,KAAKq0B,iBACLr0B,KAAKs0B,kBACLt0B,KAAKu0B,oBACLv0B,KAAKw0B,iBACLx0B,KAAKy0B,iBAAiBC,GACtB10B,KAAK20B,oBAAoBD,GACzB10B,KAAKyzB,sBACLzzB,KAAK0zB,qBAEQp0B,MAAM,IAAIkoB,KAAK,IA7E/B,oBAgFD6O,EAhFC,KAiFDC,EAjFC,KAkFDC,EAlFC,KAmFDC,EAnFC,KAoFDC,EApFC,KAqFDC,EArFC,KAsFDC,EAtFC,KAuFDC,EAvFC,KAwFDC,EAxFC,KAyFDC,EAzFC,KA0FDC,EA1FC,MA2FDC,EA3FC,MA4FDC,EA5FC,MA6FDC,EA7FC,MAmGCC,GAA4B,CAC9Bd,EACAC,EACAC,EACAC,EACAC,EACAC,EAzGC,MA2GDN,EACAX,EA5GC,aAkHD2B,GAAa,GADND,GAGH,IAHGA,GAGQ,KAAIC,MAHZD,GAIH,IAJGA,GAIQ,KAAIC,MAJZD,GAKH,IALGA,GAKQ,KAAIC,MALZD,GAMH,IANGA,GAMQ,KAAIC,MANZD,GAOH,IAPGA,GAOQ,MAAKC,KAExB,IAAMC,GAAkBD,GAAa,EAAI,mBAAqBA,GAAa,GAUrEE,GARwB,WAC1B,IAAI,IAAI96B,EAAI,EAAGA,EAAI26B,GAA0B16B,OAAQD,IACjD,GAAG26B,GAA0B36B,GAAI,OAAO26B,GAA0B36B,GAGtE,OAAO,EAGqB+6B,GAE1BC,GAAyBF,KAAoDJ,GAA0C,IAE7H,OACI,6BACI,kBAAC,GAAD,CACIhd,KAAMla,KAAKxI,MAAM85B,uBACjBnX,QAASna,KAAKqxB,4BACdx0B,KAAM8C,GAAUA,EAAO9C,OAGzBs0B,EAEM,kBAAClU,GAAA,EAAD,CACIvJ,UAAWD,EAAQgkB,kBACnBC,aAAW,eACX5hB,MAAM,UACN/C,QAAS/S,KAAKoxB,yBACd,kBAACuG,GAAA,EAAD,OAIJ,kBAAC1a,GAAA,EAAD,CACIvJ,UAAWD,EAAQmkB,iBACnBF,aAAW,eACX5hB,MAAM,UACN/C,QAAS/S,KAAKkxB,wBACd,kBAAC9T,GAAA,EAAD,OAIZ,kBAACya,GAAA,EAAD,CACInkB,UAAWD,EAAQqkB,OACnB9jB,QAAQ,aACRkG,KAAMiX,EACN1d,QAAS,CACL4U,MAAM,GAAD,OAAK5U,EAAQskB,YAAb,YAA4BtkB,EAAQ4jB,MAE7CW,OAAO,QAEP,kBAACC,GAAA,EAAD,KACI,kBAACjlB,GAAA,EAAD,CAASE,MAAM,aAAaD,UAAU,OAClC,kBAACgK,GAAA,EAAD,CACIvJ,UAAS,UAAKD,EAAQykB,eAAb,aAAgCvC,GAAcliB,EAAQ0kB,WAC/DplB,QAAS6iB,EACT9f,MAAM,WAEN,kBAACsiB,GAAA,EAAD,QAIR,kBAACplB,GAAA,EAAD,CAASE,MAAM,cAAcD,UAAU,OACnC,kBAACgK,GAAA,EAAD,CACIvJ,UAAS,UAAKD,EAAQykB,eAAb,YAA+BvC,GAAcliB,EAAQ0kB,WAC9DplB,QAAS/S,KAAK80B,0BACdhf,MAAM,WAEN,kBAACuiB,GAAA,EAAD,SAKZ,kBAACrjB,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAACtG,GAAA,EAAD,CAASE,MAAM,eAAeD,UAAU,UACpC,kBAACgK,GAAA,EAAD,CAAYnH,MAAM,UAAU/C,QAAS/S,KAAKqS,MAAMia,YAAa5Y,UAAWD,EAAQ6kB,mBAC5E,kBAACC,GAAA,EAAD,SAKZ,kBAACvjB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAACtG,GAAA,EAAD,CAASE,MAAM,mBAAmBD,UAAU,SACxC,kBAACgK,GAAA,EAAD,CAAYnH,MAAM,UAAU/C,QAAS/S,KAAKmyB,oBAAqBze,UAAWD,EAAQ+kB,qBAC9E,kBAACC,GAAA,EAAD,UAMhB,8BACI,kBAACzjB,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IAEP,kBAAC,KAAD,CACIqX,kBAAmBA,GACnBlB,wBAAyBzvB,KAAKqS,MAAMod,wBACpC8B,2BAA4BvxB,KAAKuxB,2BACjCmH,UAAajkC,IAAwBN,EAAOC,WAC5Ck+B,oBAAuBtyB,KAAKsyB,oBAC5Bh9B,SAAYA,EAEZqjC,WAAY,CACRC,mBAAmB,GACnB9I,qBACAQ,gBACA9B,SACAyB,UACAjD,YACAuD,eACAP,QACAc,mBAEJsE,oBAAqBp1B,KAAKxI,MAAM49B,oBAChCyD,mBAAiB,EACjB9S,IAAKgH,GACL+L,cAAe94B,KAAKsyB,oBACpByG,aAAc,KAEdrlB,UAAWD,EAAQulB,eACnBC,aAAW,EACXC,WAAYl5B,KAAKxI,MAAM66B,YACvBliB,KAAK,SACL4S,MAAM,YACN2K,QAASA,EACTlY,SAAUxV,KAAKk1B,mBACfzzB,MAAO9B,EACP8V,YAAY,iBACZyL,OAAQ,CACJiY,KAAM,SAAAC,GAAQ,sBACPA,EADO,CAEVC,OAAQ,KACRljB,MAAO,QACPiC,SAAU,OACV+C,aAAc,MACdD,UAAW,0BACXjD,SAAU,SACVmB,gBAAiB,iBACjBkgB,eAAgB,eAGpBC,eAAgB,SAAAH,GAAQ,sBACjBA,EADiB,CAEpB/hB,QAAS,aACT2B,WAAY,OAGhBwgB,MAAO,SAAAJ,GAAQ,sBAASA,EAAT,CACXtjB,MAAO,QACPyQ,WAAY,wBAGhBkT,QAAS,SAAAL,GAAQ,sBAASA,EAAT,CACbhgB,gBAAiBzH,GAAOG,eACxB4nB,OAAQ,OACRC,aAAc,oBACdxe,aAAc,EACd,UAAW,CAAEye,YAAa,SAC1B,iBAAkB,CAAEA,YAAajoB,GAAOC,SACxC0F,OAAQ,UAGZ7B,YAAa,SAAA2jB,GAAQ,sBAASA,EAAT,CACjB7S,WAAY,qBACZzQ,MAAOnE,GAAOC,QACd6E,SAAU,OACVuC,WAAY,OAGhB6gB,iBAAkB,SAAAT,GAAQ,sBAASA,EAAT,CACtB7S,WAAY,qBACZzQ,MAAOnE,GAAOC,QACdwH,gBAAiBzH,GAAOG,kBAG5B8e,OAAQ,SAACwI,EAAD,GAAmC,EAAtBv8B,KAAuB,IAAjB4wB,EAAgB,EAAhBA,UACvB,OAAO,eAAK2L,EAAZ,CACIpgB,WAAY,IACZvC,SAAU,OACV2C,gBAAiB,cACjBtD,MAAO2X,EAAY9b,GAAOC,QAAU,QACpC,UAAW,CAAEwH,gBAAiBzH,GAAOM,eAG7C6nB,YAAa,SAACV,EAAU5hC,GAAX,sBAA0B4hC,EAA1B,CACTtjB,MAAO,QACPkD,WAAY,IACZqgB,OAAQ,SAGhBnjB,MAAO,SAAAA,GAAK,sBACLA,EADK,CAERvE,OAAO,eACJuE,EAAMvE,cAMzB,kBAACqD,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAG5F,UAAWD,EAAQsmB,kBAE7Bp6B,EACA,kBAACqT,GAAA,EAAD,CAASC,UAAU,QAAQC,MAAM,oCAC7B,kBAAC+J,GAAA,EAAD,CACInb,KAAK,QACLiR,QAAS/S,KAAKuxB,2BACd1b,UAAWlW,GAEX,kBAACq6B,GAAA,EAAD,QAGR,kBAAC/c,GAAA,EAAD,CACInb,KAAK,QACLiR,QAAS/S,KAAKuxB,2BACd1b,UAAWlW,GAEX,kBAACq6B,GAAA,EAAD,QAKZ,kBAAChlB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAC,KAAD,CACI5F,UAAWD,EAAQwmB,WACnBxkB,YAAa8W,GAAmBkG,GAChCt6B,GAAG,YACH4qB,MAAM,aACN5S,KAAK,MACL+pB,OAAO,aACPxE,QAASA,EAETD,eAAgBA,EAChB0E,QAAM,EACN14B,MAAOgxB,EACPjd,SAAUxV,KAAKqS,MAAM+nB,sBACrBC,aAAa,SACbrmB,QAAQ,SACRsmB,oBAAqB,CACjB5mB,UAAWD,EAAQ8mB,6BAK/B,kBAACvlB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAC,KAAD,CACI5F,UAAWD,EAAQwmB,WACnBxkB,YAAa8W,GAAmBmG,GAChCv6B,GAAG,UACH4qB,MAAM,WACN5S,KAAK,MACL+pB,OAAO,aACP/D,QAASA,EAETC,eAAgBA,EAChB+D,QAAM,EACN14B,MAAOixB,EACPld,SAAUxV,KAAKqS,MAAMmoB,oBACrBH,aAAa,SACbrmB,QAAQ,SACRsmB,oBAAqB,CACjB5mB,UAAWD,EAAQ8mB,6BAK/B,kBAACvlB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAG5F,UAAWD,EAAQgnB,cACjC,kBAACnlB,GAAA,EAAD,CACInd,GAAG,aACH6qB,MAAOlvB,QAAQyiC,GACfxT,MAAO,kBACPrP,UAAWD,EAAQ+O,UACnB/gB,MAAOkxB,EACPnd,SAAUqgB,EACV6E,oBAAqB,CAAChnB,UAAWD,EAAQyP,YACzCA,WAAYqT,EACZpmB,KAAK,OACLmQ,WAAY,CAAC5M,UAAUD,EAAQknB,SAC/BC,gBAAiB,CAAClnB,UAAUD,EAAQknB,YAK5C,kBAAC3lB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAG5F,UAAWD,EAAQgnB,cACjC,kBAACnlB,GAAA,EAAD,CACInd,GAAG,aACH6qB,MAAOlvB,QAAQ0iC,GACfzT,MAAO,gBACPrP,UAAWD,EAAQ+O,UACnB/gB,MAAOmxB,EACPpd,SAAUqgB,EACV6E,oBAAqB,CAAChnB,UAAWD,EAAQyP,YACzCA,WAAYsT,EACZrmB,KAAK,OACLmQ,WAAY,CAAC5M,UAAUD,EAAQknB,SAC/BC,gBAAiB,CAAClnB,UAAUD,EAAQknB,YAK5C,kBAAC3lB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAG5F,UAAWD,EAAQgnB,cACjC,kBAACnlB,GAAA,EAAD,CACInd,GAAG,aACH6qB,MAAOlvB,QAAQ2iC,GACf1T,MAAO,kBACPrP,UAAWD,EAAQ+O,UACnB/gB,MAAOL,EACPoU,SAAUqgB,EACV6E,oBAAqB,CAAChnB,UAAWD,EAAQyP,YACzCA,WAAYuT,EACZtmB,KAAK,OACLmQ,WAAY,CAAC5M,UAAUD,EAAQknB,SAC/BC,gBAAiB,CAAClnB,UAAUD,EAAQknB,YAK5C,kBAAC3lB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAG5F,UAAWD,EAAQgnB,cACjC,kBAACnlB,GAAA,EAAD,CACInd,GAAG,aACH6qB,MAAOlvB,QAAQ4iC,GACf3T,MAAO,gBACPrP,UAAWD,EAAQ+O,UACnB/gB,MAAOoxB,EACPrd,SAAUqgB,EACV6E,oBAAqB,CAAChnB,UAAWD,EAAQyP,YACzCA,WAAYwT,EACZvmB,KAAK,OACLmQ,WAAY,CAAC5M,UAAUD,EAAQknB,SAC/BC,gBAAiB,CAAClnB,UAAUD,EAAQknB,YAK5C,kBAAC3lB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAG5F,UAAWD,EAAQgnB,cACjC,kBAACnlB,GAAA,EAAD,CACInd,GAAG,eACH6qB,MAAOlvB,QAAQuiC,GACftT,MAAM,iBACNrP,UAAWD,EAAQ+O,UACnB/gB,MAAO7D,MAAMZ,KAAKC,MAAe,IAAT+uB,GAAiB,KAAQA,EAAShvB,KAAK69B,KAAc,IAAT7O,GAAiB,IACrFxW,SAAUjC,EACVmnB,oBAAqB,CAAChnB,UAAWD,EAAQyP,YACzCA,WAAYmT,EACZlmB,KAAK,SACLmQ,WAAY,CAAC5M,UAAUD,EAAQknB,SAC/BC,gBAAiB,CAAClnB,UAAUD,EAAQknB,YAK5C,kBAAC3lB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAG5F,UAAWD,EAAQgnB,cACjC,kBAACnlB,GAAA,EAAD,CACInd,GAAG,eACH6qB,MAAOlvB,QAAQwiC,GACfvT,MAAM,eACNrP,UAAWD,EAAQ+O,UACnB/gB,MAAO7D,MAAMZ,KAAK69B,KAAc,IAAT5O,GAAiB,KAAQA,EAASjvB,KAAK69B,KAAc,IAAT5O,GAAiB,IACpFzW,SAAUjC,EACVmnB,oBAAqB,CAAChnB,UAAWD,EAAQyP,YACzCA,WAAYoT,EACZnmB,KAAK,SACLmQ,WAAY,CAAC5M,UAAUD,EAAQknB,SAC/BC,gBAAiB,CAAClnB,UAAUD,EAAQknB,YAK5C,kBAAC3lB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAACwhB,GAAA,EAAD,CAAa9mB,QAAQ,SAASN,UAAWD,EAAQsnB,yBAA0BllB,UAAWlW,GAClF,kBAACq7B,GAAA,EAAD,CAAYC,QAAM,EAACC,QAAQ,eAA3B,QACA,kBAAC,KAAD,CACIxnB,UAAWD,EAAQsnB,yBACnBloB,MAAOwZ,GACP5qB,MAAOqxB,EACP9e,QAAQ,SACRwB,SAAUxV,KAAKqS,MAAMkB,aACrB4nB,WAAY,CACRhrB,KAAM,kBACNhY,GAAI,cACJ6b,QAAS,UAEbonB,UAAW,CACPC,cAAe,CACX3nB,UAAWD,EAAQ6nB,gBAIzB3E,GAAkB,kBAAC4E,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAY7E,QAAS8U,MAAOyjB,GAAjF,YAClBC,GAAkB,kBAAC2E,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAY5E,YAAjE,oBAClBw4B,GAAqB,kBAAC0E,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAYlF,YAAjE,gBACrB84B,GAAqB,kBAAC0E,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAYjF,mBAAjE,wBACrB84B,GAAoB,kBAACyE,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAY/E,WAAjE,cACpB64B,GAAqB,kBAACwE,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAYhF,YAAjE,gBACrB+4B,GAAuB,kBAACuE,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAY9E,cAAjE,kBACvB84B,GAAoB,kBAACsE,GAAA,EAAD,CAAU7nB,UAAWD,EAAQ+nB,gBAAiB/5B,MAAOwB,GAAY3E,QAAjE,iBAKlC,kBAAC0U,GAAA,EAAD,CAASC,UAAU,QAAQC,MAAOskB,GAAwB9jB,UAAWD,EAAQgoB,kBACzE,kBAACzmB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAC1D,GAAA,EAAD,CACIlC,UAAWD,EAAQioB,gBACnB1nB,QAAQ,YACRjB,QAAS,kBAAM,EAAKV,MAAMspB,eAC1B9lB,SAAU/hB,QAAQwjC,MAA6B33B,IAAWmzB,EAC1D8I,WAAS,GALb,uB,GAhyBNlf,IAAM3G,WAmzBrB5D,gBA3kCS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CnZ,KAAMrF,EAAMqF,KACZjG,4BAA6BY,EAAMZ,4BACnCxB,QAASoC,EAAMpC,QACfX,oBAAqB+C,EAAM/C,oBAC3BgC,iBAAkBe,EAAMf,iBACxBb,SAAU4B,EAAM5B,SAChBN,SAAUkC,EAAMlC,SAChBiB,OAAQiB,EAAMjB,UAmkCsB2b,GAAzBC,CAA6C8D,cA/tC7C,SAAAC,GAAK,MAAK,CACrB4hB,OAAQ,CACJ3hB,MANe,IAOfiQ,IAAK,GACLyV,OAAQ,OACR5jB,SAAU,WAGd8f,YAAa,CACT5hB,MAbe,IAcfmB,OAAQ,QACR8O,IAAK,oBACLjL,aAAc,cACdD,UAAW,2BACXwe,OAAQ,OACRzhB,SAAU,UACVmB,gBAAiBzH,GAAOG,gBAG5BgqB,kBAAmB,CACfxkB,OAAO,GAAD,OAAK,IAAL,OAGVykB,kBAAmB,CACfzkB,OAAO,GAAD,OAAK,IAAL,OAGV0kB,kBAAmB,CACf1kB,OAAO,GAAD,OAAK,IAAL,OAGV2kB,kBAAmB,CACf3kB,OAAO,GAAD,OAAK,IAAL,OAGV4kB,kBAAmB,CACf5kB,OAAO,GAAD,OAAK,IAAL,OAGZsgB,iBAAkB,CAChBnX,SAAU,QACV4F,KAAM,MACND,IAAK,kBACLiT,OAAQ,MAGV5B,kBAAmB,CACjBhX,SAAU,QACV4F,KAAM8V,IACN/V,IAAK,kBACLiT,OAAQ,MAGVnB,eAAgB,CACZ/hB,MAAO,MACPujB,OAAQ,oBACRve,aAAc,EACd/B,gBAAiB,WAGrBgjB,iBAAkB,CACdhmB,UAAWF,EAAMd,QAAQ,IAG7B2kB,iBAAkB,CACd5e,aAAc,EACd9E,WAAY,OACZ+C,gBAAiBzH,GAAOG,gBAG1B2oB,aAAc,CACV4B,WAAY,oBACZjjB,gBAAiBzH,GAAOG,gBAG9BipB,yBAA0B,CACtB5kB,MAAO,OACP,aAAc,CACZiD,gBAAiB,gBAIvB+e,UAAW,CACPjd,UAAW,6BAGfyf,QAAS,CACLtjB,QAAS,iBAGbqkB,gBAAiB,CACbpkB,OAAQ,OACR6D,aAAc,EACd/B,gBAAiBzH,GAAOG,eACxBgE,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,KAC7B2hB,YAAa,SACb,aAAc,CACZljB,gBAAiB,eAEnB,UAAW,CACPA,gBAAiBzH,GAAOM,WACtB6D,MAAO,UAIjBoN,WAAY,CACVpN,MAAO,UAGT2lB,iBAAkB,CAChB3lB,MAAO,UAGTykB,yBAA0B,CACtBljB,QAAS,GAGbihB,kBAAmB,CACfnd,aAAc,EACd/B,gBAAiB,UACjBjD,MAAO,OACPomB,YAAa,qBAIjB/D,oBAAqB,CACnBrd,aAAc,EACd/B,gBAAiB,UACjBjD,MAAO,QAGT8jB,WAAY,CACR9jB,MAAO,QAGXmlB,YAAa,CACTliB,gBAAiBzH,GAAOG,gBAG5B0pB,gBAAiB,CACf,UAAW,CAACpiB,gBAAiBzH,GAAOM,gBAmlCoBgE,CAAmB8a,K,UChuCzE7e,GAAqB,CACvBsqB,sB3CqDiC,SAACjiC,EAAWhC,GAAZ,MAAiC,CAClEb,KNnEoC,0BMoEpCC,QAAS,CACL4C,YACAhC,qB2CxDJ6B,0BAGEqiC,G,8MAEFxP,mBAAqB,WAAO,IAAD,EAC8C,EAAK5a,MAAlEqqB,EADe,EACfA,eAAgBpnC,EADD,EACCA,SAAUF,EADX,EACWA,QAASonC,EADpB,EACoBA,sBACxCE,GAAkBpnC,IAAaA,EAASonC,EAAe1rB,SAASxY,YAE/DgkC,EADoBpnC,EAAQ2lB,MAAK,SAAA1F,GAAI,OAAIA,EAAKwI,eAAiB6e,EAAe1rB,WAC5C1P,WAAYo7B,EAAe1rB,U,EAIrE2rB,0BAA4B,SAACpiC,GACzB,IAAIF,EAAK,8BAA0BE,GAC7BD,EAAW,EAAK+X,MAAMqqB,eAAe5hB,UAAY,EAAKzI,MAAMqqB,eAAe1rB,QACjF,EAAKqB,MAAMjY,uBAAuBC,EAAOC,EAAUC,I,EAGvDqiC,qBAAuB,SAACriC,EAAWk4B,EAAKC,EAAKC,EAAMC,EAAMxxB,EAAMyxB,EAAM7G,EAAQC,GACzE,IAAM4Q,EAAe,EAAKxqB,MAAMjd,QAAQ2lB,MAAK,SAAA1F,GAAI,OAAIA,EAAKwI,eAAiB,EAAKxL,MAAMqqB,eAAe1rB,WACjG8rB,EAAsBhpC,QAAQ+oC,EAAat7B,sBAAwBhD,GAAoBO,oBAErFi+B,EAAWD,EAAsB,QAAU,OAC3CE,EAAYF,EAAsB,IAAIn7B,KAAK8wB,GAAK/F,WAAa,EAAI+F,EACjEwK,EAAUH,EAAsB,IAAIn7B,KAAK+wB,GAAKhG,WAAa,EAAIgG,EAEjEr4B,EAAQ,wBAAiBE,EAAjB,kBAAoCwiC,EAApC,qBAAyDC,EAAzD,kBAA4EC,EAA5E,gCACOtK,EADP,gBACmBC,EADnB,+BAEOxxB,EAFP,gBAEmByxB,GAE5B/+B,QAAQ+oC,EAAapjB,aACpBpf,GAAK,4BAAyB2xB,EAAzB,gBAAuCC,IAGhD,IAAM3xB,EAAW,EAAK+X,MAAMqqB,eAAe5hB,UAAY,EAAKzI,MAAMqqB,eAAe1rB,QACjF,EAAKqB,MAAMjY,uBAAuBC,EAAOC,EAAUC,I,0EAG7C,IAAD,SACoGyF,KAAKqS,MAAtGoB,EADH,EACGA,QAASne,EADZ,EACYA,SAAUonC,EADtB,EACsBA,eAAgB/J,EADtC,EACsCA,KAAMC,EAD5C,EAC4CA,KAAMxxB,EADlD,EACkDA,KAAMyxB,EADxD,EACwDA,KAAMJ,EAD9D,EAC8DA,IAAKC,EADnE,EACmEA,IAAK1G,EADxE,EACwEA,OAAQC,EADhF,EACgFA,OAAQ72B,EADxF,EACwFA,QAE7F,IAAIsnC,IAAoBpnC,IAAcF,EAAS,MAAO,GAEtD,IAAMoD,EAAalD,EAASonC,EAAe1rB,SAASxY,WAEpD,IAAIA,EAAY,MAAO,GAEvB,IAAMqkC,EAAeznC,EAAQ2lB,MAAK,SAAA1F,GAAI,OAAIA,EAAKwI,eAAiB6e,EAAe1rB,WACvEuZ,EAA6FsS,EAA7FtS,QAASC,EAAoFqS,EAApFrS,QAASC,EAA2EoS,EAA3EpS,QAASC,EAAkEmS,EAAlEnS,QAASnR,EAAyDsjB,EAAzDtjB,SAAUC,EAA+CqjB,EAA/CrjB,SAAUnV,EAAqCw4B,EAArCx4B,UAAWoV,EAA0BojB,EAA1BpjB,UACrE9Y,GAD+Fk8B,EAAfv7B,WACvEL,WAAWspB,IACpB3pB,EAASK,WAAWupB,GACpB/pB,EAASQ,WAAWwpB,GACpB/pB,EAASO,WAAWypB,GACpBwS,EAAUv7B,KAAK5L,MAAMwjB,GACrB4jB,EAAUx7B,KAAK5L,MAAMyjB,GAErB4jB,EAAazK,EAAOhyB,EAASA,EAC/BgyB,EAAO/xB,EAASA,EAChB+xB,EAEE0K,EAAazK,EAAOjyB,EAASA,EACnCiyB,EAAOhyB,EAASA,EAChBgyB,EAEM0K,EAAal8B,EAAOX,EAASA,EAC/BW,EAAOV,EAASA,EAChBU,EAEEm8B,EAAa1K,EAAOpyB,EAASA,EAC/BoyB,EAAOnyB,EAASA,EAChBmyB,EAEE2K,EAAc/K,EAAMyK,EAAUA,EAChCzK,EAAM0K,EAAUA,EAChB1K,EAEEgL,EAAc/K,EAAMwK,EAAUA,EAChCxK,EAAMyK,EAAUA,EAChBzK,EAEJ,GAAGjZ,EACC,IAAIikB,EAAWz8B,WAAWoD,GACtBs5B,EAAW18B,WAAWwY,GAEtBmkB,EAAe5R,EAAS0R,EAAWA,EACnC1R,EAAS2R,EAAWA,EACpB3R,EAEA6R,EAAe5R,EAASyR,EAAWA,EACnCzR,EAAS0R,EAAWA,EACpB1R,EAGR,IAYI6R,EAZEvjC,EAAYsiC,EAAav7B,WASzBy8B,EAPYvlC,EAAWwI,IAAItD,QACTpI,EAASonC,EAAe1rB,SAASgtB,WAAa1oC,EAASonC,EAAe1rB,SAASgtB,UAAUC,MAAM,KAAKxhC,SACvGjE,EAAW8K,MAAQ,EAAI,GACvB,GAKf46B,EAAoBH,EAAkB,IAI5C,GAAGlB,EAAat7B,sBAAwBhD,GAAoBO,mBAAmB,CAE3Eg/B,GADqB,IAAIn8B,KAAK87B,GAAa/Q,WAAa,IAAI/qB,KAAK67B,GAAa9Q,WAClD,GAAK,OAC9B,CACH,IAAIyR,GAAahB,EAAUD,GAAW,OAAY,EAC9CkB,GAAcX,EAAcD,GAAe,OAAY,EAC3DM,EAAYK,EAAYC,EAAaA,EAAaD,EAAY,EAGlE,IAAME,EAAgBz9B,EAASD,GAAW,EACpC29B,EAAiBjB,EAAaD,GAAe,EAC7CmB,EAAWF,EAAeC,EAAgBA,EAAgBD,EAAe,EAEzEG,EAAgB99B,EAASD,GAAW,EACpCg+B,EAAgBlB,EAAaD,EAAcC,EAAaD,GAAe,EAAKC,EAAa,IAAMD,GAAe,EAC9GoB,EAAWF,EAAeC,EAAgBA,EAAgBD,EAAe,EAE3EG,EAAa,EAEjB,GAAG9B,EAAapjB,UACZ,GAAG0Z,GAAWtH,YAAYK,IAAI2Q,EAAav7B,YAEvCq9B,EADiBxL,GAAWz1B,MAAM,CAACb,KAAMggC,GAAee,EAAcC,GAC5C1K,GAAWvH,aAAanvB,QAAU,OACzD,GAAI02B,GAAWrH,YAAYI,IAAI2Q,EAAav7B,YAAY,CAE3Dq9B,EADiBxL,GAAWz1B,MAAM,CAACb,KAAMggC,GAAee,EAAcC,GAC5C1K,GAAWxH,aAAalvB,QAAU,MACzD,CACH,IAAImiC,GAAiBjB,EAAWD,GAAY,EACxCmB,GAAkBhB,EAAeD,GAAgB,EACrDe,EAAaE,GAAkBD,GAAiB,EAAIC,GAAkBD,GAI9E,IAAME,GAAmB9hC,KAAKC,MAAM8gC,EAAkBD,EAAYS,EAAWG,EAAWC,GAElFI,GAAkBD,IAAoB,IAEtCE,GAAc,IAAIr9B,KAAK67B,GAAa37B,cAAczJ,MAAM,EAAE,IAC1D6mC,GAAc,IAAIt9B,KAAK87B,GAAa57B,cAAczJ,MAAM,EAAE,IAC1D8mC,GAAgBrC,EAAat7B,sBAAwBhD,GAAoBO,mBAC3E,UAAY,IAAI6C,KAAKu7B,GAASr7B,cAAczJ,MAAM,EAAE,IAClD+mC,GAAgBtC,EAAat7B,sBAAwBhD,GAAoBO,mBAC3E,UAAY,IAAI6C,KAAKw7B,GAASt7B,cAAczJ,MAAM,EAAE,IAExD,OACI,kBAAC,IAAM6e,SAAP,KACI,kBAACgD,GAAA,EAAD,CACIG,WAAY,CACR1G,UAAUD,EAAQ4G,aAEtBH,KAAMpmB,QAAQ4oC,GACdviB,QAAS,kBAAM,EAAK9H,MAAMod,wBAAwB,OAClDrX,UAAU,GAEV,kBAACkC,GAAA,EAAD,oBAA0BoiB,EAAe5hB,UAAf,UAA8B4hB,EAAe5hB,SAA7C,UAA1B,IAA0F4hB,EAAe1rB,SAEzG,kBAACuJ,GAAA,EAAD,KACK2jB,EAAiB,6FAMtB,kBAAC3jB,GAAA,EAAD,KACI,kBAACxG,GAAA,EAAD,KACKgrB,GACG,iDADY,sDAEmCD,GAFnC,gFAMpB,kBAAC3qB,GAAA,EAAD,CAAOrS,KAAK,SACR,kBAACuS,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,kBACA,kBAACA,GAAA,EAAD,qBACA,kBAACA,GAAA,EAAD,mBACA,kBAACA,GAAA,EAAD,oBACA,kBAACA,GAAA,EAAD,sBAGR,kBAACE,GAAA,EAAD,KACI,kBAACH,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,aACA,kBAACA,GAAA,EAAD,KAAYyqB,IACZ,kBAACzqB,GAAA,EAAD,KAAY0qB,IACZ,kBAAC1qB,GAAA,EAAD,KAAY2qB,IACZ,kBAAC3qB,GAAA,EAAD,KAAY4qB,KAGhB,kBAAC7qB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,iBAAqB,OAArB,KACA,kBAACA,GAAA,EAAD,KAAY6oB,GACZ,kBAAC7oB,GAAA,EAAD,KAAY8oB,GACZ,kBAAC9oB,GAAA,EAAD,KAAY5T,GACZ,kBAAC4T,GAAA,EAAD,KAAY3T,IAGhB,kBAAC0T,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,kBAAsB,OAAtB,KACA,kBAACA,GAAA,EAAD,KAAY+oB,GACZ,kBAAC/oB,GAAA,EAAD,KAAYgpB,GACZ,kBAAChpB,GAAA,EAAD,KAAY9T,GACZ,kBAAC8T,GAAA,EAAD,KAAY7T,IAGhB,kBAAC4T,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,iBACA,kBAACA,GAAA,EAAD,KAAY3W,MAAMggC,GAAgB,KAAOA,GACzC,kBAACrpB,GAAA,EAAD,KAAY3W,MAAMigC,GAAgB,KAAOA,GACzC,kBAACtpB,GAAA,EAAD,KAAY3W,MAAM8/B,GAAY,KAAOA,GACrC,kBAACnpB,GAAA,EAAD,KAAY3W,MAAM+/B,GAAY,KAAOA,MAMjD,kBAAC5pB,GAAA,EAAD,CAAYL,UAAWD,EAAQ2rB,aAA/B,qFAMJ,kBAACC,GAAA,EAAD,KACI,kBAACzpB,GAAA,EAAD,CAAQ7C,QAAS,kBAAM,EAAKV,MAAMod,wBAAwB,QAA1D,UAICsP,IACG,kBAACnpB,GAAA,EAAD,CAAQ7C,QAAS,kBAAM,EAAK6pB,qBAAqBriC,EAAWykC,GAAaC,GAAa7B,EAAYC,EAAYC,EAAYC,EAAYK,EAAcC,KAApJ,mBAKHK,GACG,kBAACtoB,GAAA,EAAD,CAAQ7C,QAAS,kBAAM,EAAK4pB,0BAA0BpiC,KAAtD,gC,GAhPawb,aA2P1B5D,gBArQS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1C1gB,SAAUkC,EAAMlC,SAChBF,QAASoC,EAAMpC,WAmQqB8c,GAAzBC,CAA6C8D,cApR7C,SAACC,GAAD,MAAY,CACvBkpB,YAAa,CACT3oB,SAAU,OACVlB,OAAQ,oBAGZnB,MAAO,CACHgC,UAAW,OAGfiE,YAAa,CACTjB,gBAAiBzH,GAAOG,mBAyQ4BmE,CAAmBwmB,K,wCCjShE,IACX,KACA,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YCXW,YAAC6C,EAAYj+B,EAASlB,GACjC,OAAOA,EAAYo/B,GAAOtN,SAASqN,IAAej+B,EAAUi+B,EAAWlnC,MAAM,EAAE,IAAM,IAAMknC,EAAWlnC,MAAM,GAAG,IAAKknC,EAAWlnC,MAAM,EAAE,KCD5H,IACXonC,OAAQ,CACJC,KAAM,CAAC3pB,MAAO,WACd4pB,cAAe/tB,GAAOG,eACtB6tB,UAAU,GAGdC,OAAQ,CACJC,aAAa,GAGjBC,YAAa,SAACC,GAA8B,IAAjBzoB,EAAgB,uDAAP,GAC5B0oB,EAAW9wB,SAAS+wB,gBAAgBC,aAAe5oB,EAAS,MAAS,EAAK,GAC9E,MACI,CACI,CACI7c,KAAK,gBAAD,OAAkBslC,EAAYtjC,OAAS,GACvCsjC,EACAA,EAAY3nC,MAAM,EAAE,IAAM,MAF1B,+BAGJqnC,KAAM,CACF3pB,MAAO,QACPhU,KAAM,IAEVq+B,KAAM,QACNC,KAAM,QAENJ,SACAK,WAAW,M,8GCyCzBC,GAAoB,CACtB,UACA,QACA,SACA,SACA,SACA,UACA,OACA,OACA,QACA,SACA,UACA,WACA,MACA,MACA,YACA,QACA,WACA,UACA,WA6BJ,IAiZerqB,iBAnfA,SAAAC,GAAK,MAAK,CACrBqqB,aAAc,CACV3oB,QAAS,eACTwB,gBAAiBzH,GAAOG,eACxBoJ,UAAW,wGACX3F,OAAQ,OACRO,MAAO,SAGX0qB,QAAS,CACLrqB,MAAO,QACPmB,OAAQ,QACRjB,WAAYH,EAAMd,QAAQ,GAC1BqrB,cAAevqB,EAAMd,QAAQ,GAC7BqG,YAAavF,EAAMd,QAAQ,KAC3ByD,aAAc3C,EAAMd,QAAQ,MAGhCsrB,WAAY,CACRxlB,UAAW,2BAGfylB,UAAW,CACPxqB,MAAO,QAGXyqB,SAAU,CACNC,qBAAsB,MACtBC,wBAAyB,OAG7BC,YAAa,CACTnpB,QAAS,QACTrC,OAAQ,oBACR6C,SAAU,SAGd+f,UAAW,CACPjd,UAAW,6BAGf8lB,eAAgB,CACZtpB,UAAW,SAGfupB,eAAgB,CACZ7nB,gBAAiBzH,GAAOG,mBAqcjBmE,EAjZW,SAAC5D,GAAW,IAG9BoB,EAeApB,EAfAoB,QACAytB,EAcA7uB,EAdA6uB,oBACAx+B,EAaA2P,EAbA3P,YACAy+B,EAYA9uB,EAZA8uB,qBACAl9B,EAWAoO,EAXApO,aACAJ,EAUAwO,EAVAxO,YACAu9B,EASA/uB,EATA+uB,YACAC,EAQAhvB,EARAgvB,oBACAC,EAOAjvB,EAPAivB,QACAC,EAMAlvB,EANAkvB,cACAC,EAKAnvB,EALAmvB,2BACAC,EAIApvB,EAJAovB,cACAC,EAGArvB,EAHAqvB,uBACAC,EAEAtvB,EAFAsvB,UACAC,EACAvvB,EADAuvB,mBAjB6B,EAoBuBjlB,mBAAS,MApBhC,mBAoB1BklB,EApB0B,KAoBJC,EApBI,OAgCmCplB,IAAMC,SAAS,MAhClD,mBAgC1BolB,EAhC0B,KAgCEC,EAhCF,OAiCCtlB,IAAMC,SAAS2kB,GAAWA,EAAQ,IAjCnC,mBAiC1BW,EAjC0B,KAiCfC,EAjCe,OAkCCxlB,IAAMC,SAAS2kB,GAAWA,EAAQ,IAlCnC,mBAkC1Ba,EAlC0B,KAkCfC,EAlCe,KAoC3BC,EAAoBvuC,QAAQiuC,GAC5BO,EAAkBD,EAAoB,sBAAmBjgC,EAEzDmgC,EAA2B,WAC7BP,EAA8B,OAa5BQ,EAAoB,CATnBP,EAAYE,EAAiB,8BAC5B,yBAAyBhe,KAAK8d,QAAlC,EAAqD,gBAIlDA,EAAYE,EAAiB,8BAC5B,yBAAyBhe,KAAKge,QAAlC,EAAqD,iBASrDM,EAEAD,EA7D6B,GA4D7BE,EACAF,EA7D6B,KAoEmC9lB,IAAMC,SAAS,MApElD,mBAoE1BgmB,EApE0B,KAoEEC,EApEF,OAqEmBlmB,IAAMC,SAAS4kB,GAAiBA,EAAcsB,SArEjE,mBAqE1BC,EArE0B,KAqENC,EArEM,OAsEermB,IAAMC,SAAS4kB,GAAiBA,EAAczrB,OAtE7D,mBAsE1BktB,EAtE0B,KAsERC,EAtEQ,OAuEavmB,IAAMC,SAAS4kB,GAAiBA,EAAcz/B,MAvE3D,oBAuE1BohC,GAvE0B,MAuETC,GAvES,MAyE7BC,GAlFR,SAA4B3hC,GACxB,IAAIohC,EAAUphC,EAAQA,EAAMohC,QAAU,KAChC9c,EAAMsd,mBAIZ,OAHA1sB,qBAAU,WACNoP,EAAInD,QAAUigB,KAEX9c,EAAInD,QA4EW0gB,CAAmB/B,GACrCgC,GA5FR,SAA0B9hC,GACtB,IAAIqU,EAAQrU,EAAQA,EAAMqU,MAAQ,KAC5BiQ,EAAMsd,mBAIZ,OAHA1sB,qBAAU,WACNoP,EAAInD,QAAU9M,KAEXiQ,EAAInD,QAsFS4gB,CAAiBjC,GACjCkC,GAtGR,SAAyBhiC,GACrB,IAAIK,EAAOL,EAAQA,EAAMK,KAAO,KAC1BikB,EAAMsd,mBAIZ,OAHA1sB,qBAAU,WACNoP,EAAInD,QAAU9gB,KAEXikB,EAAInD,QAgGQ8gB,CAAgBnC,GAEnC5qB,qBAAU,WACH4qB,IACIA,EAAcsB,UAAYO,IACzBL,EAAsBxB,EAAcsB,SAGrCtB,EAAczrB,QAAUytB,IACvBN,EAAoB1B,EAAczrB,OAGnCyrB,EAAcz/B,OAAS2hC,IACtBN,GAAmB5B,EAAcz/B,UAK7C,IAAM6hC,GAAoB7vC,QAAQ6uC,GAC5BiB,GAAkBD,GAAoB,sBAAmBvhC,EAEzDyhC,GAA2B,WAC7BjB,EAA8B,OAe5BkB,GAA2B,CAZD,WAC5B,GAAGhB,EAAqB,IAAOA,EAAqB,IAAM,yBAAyB3e,KAAK2e,GACpF,MAAO,6BAWXiB,GAPyB,WACzB,GAAGb,GAAkB,GAAKA,GAAkB,KAAO,yBAAyB/e,KAAK+e,IAC7E,MAAO,yBAMXc,IAIAC,GAEAH,GAxH6B,GAuH7BI,GACAJ,GAxH6B,GA+HjC,OACI,kBAAC,IAAM7sB,SAAP,KACI,kBAACghB,GAAA,EAAD,CAAavkB,UAAWD,EAAQstB,aAE3BjtC,QAAQotC,IACL,kBAACluB,GAAA,EAAD,CAASC,UAAU,MAAMC,MAAM,iBAC3B,kBAAC+J,GAAA,EAAD,CAAYnH,MAAM,UAAUpC,UAAS,UAAKD,EAAQitB,WAAb,YAA2Bh+B,GAAe+Q,EAAQ0kB,WACnFplB,QAASmuB,GAET,kBAACiD,GAAA,EAAD,QAKXrwC,QAAQqtC,IACL,kBAACnuB,GAAA,EAAD,CAASC,UAAU,MAAMC,MAAuB,UAAhBrP,EAA0B,oBAAsB,sBAC5E,kBAACoZ,GAAA,EAAD,CAAYnH,MAAM,UAAUpC,UAAS,UAAKD,EAAQitB,WAAb,YAA2Bz8B,GAAgBwP,EAAQ0kB,WACpFplB,QAASouB,GAET,kBAACiD,GAAA,EAAD,QAKZ,kBAACpxB,GAAA,EAAD,CAASC,UAAU,MAAMC,MAAM,gBAC3B,kBAAC+J,GAAA,EAAD,CAAYnH,MAAM,UAAU/C,QAASquB,EAAa1tB,UAAWD,EAAQitB,YACjE,kBAAC/Q,GAAA,EAAD,QAIP77B,QAAQutC,IACL,kBAACruB,GAAA,EAAD,CAASE,MAAM,0BAA0BD,UAAU,OAC/C,kBAACgK,GAAA,EAAD,CAAYnH,MAAM,UAAU/C,QAAS,SAACN,GAAD,OAAWuvB,EAA8BvvB,EAAM4xB,gBAAgB3wB,UAAWD,EAAQitB,YACnH,kBAAC4D,GAAA,EAAD,QAKXxwC,QAAQ8tC,IACL,kBAAC5uB,GAAA,EAAD,CAASE,MAAOyuB,EAAY,iBAAmB,iBAAkB1uB,UAAU,OACvE,kBAACgK,GAAA,EAAD,CAAYnH,MAAM,UAAU/C,QAAS,kBAAM6uB,GAAoBD,IAAYjuB,UAAS,UAAKD,EAAQitB,WAAb,YAA2BiB,GAAaluB,EAAQ0kB,YAChI,kBAACoM,GAAA,EAAD,QAKXzwC,QAAQ4tC,IACL,kBAAC1uB,GAAA,EAAD,CAASE,MAAOuuB,EAAgB,kBAAoB,kBAAmBxuB,UAAU,OAC7E,kBAACgK,GAAA,EAAD,CAAYnH,MAAM,UAAU/C,QAAS,kBAAM2uB,GAAwBD,IAAgB/tB,UAAS,UAAKD,EAAQitB,WAAb,YAA2Be,GAAiBhuB,EAAQ0kB,YAC5I,kBAACqM,GAAA,EAAD,QAKX1wC,QAAQue,EAAMoyB,sBACX,kBAACzxB,GAAA,EAAD,CAASE,MAAM,iBAAiBD,UAAU,OACtC,kBAACgK,GAAA,EAAD,CAAYpH,UAAW/hB,QAAQue,EAAMoyB,qBAAsB3uB,MAAM,UAAU/C,QAjKvE,SAACN,GACrBqvB,EAAwBrvB,EAAM4xB,gBAgKyF3wB,UAAWD,EAAQitB,YACtH,kBAACgE,GAAA,EAAD,QAKX5wC,QAAQue,EAAMmvB,6BACX,kBAACxuB,GAAA,EAAD,CAASE,MAAM,iBAAiBD,UAAU,OACtC,kBAACgK,GAAA,EAAD,CAAYnH,MAAM,UAAU/C,QAAS,SAACN,GAAD,OAAWmwB,EAA8BnwB,EAAM4xB,gBAAgB3wB,UAAS,UAAKD,EAAQitB,WAAb,YAA2BjtB,EAAQmtB,WAC5I,kBAAC+D,GAAA,EAAD,SAOhB,kBAAC,KAAD,CACIxsC,GAAG,cACHysC,SAAU/C,EACVgD,aAAW,EACX3qB,KAAMpmB,QAAQ+tC,GACd1nB,QAAS,kBAAM2nB,EAAwB,OACvCpuB,UAAWD,EAAQutB,eACnB3F,cAAgB,CACZ3nB,UAAWD,EAAQwtB,iBAGtBX,GAAkBv9B,KAAI,SAAC6tB,EAAQjc,GAAT,OACnB,kBAAC4mB,GAAA,EAAD,CAAUxoB,QAAS,kBAxLT,SAAC6d,GACvBkR,EAAwB,MACxBzvB,EAAMoyB,oBAAoB7T,GAsLW6T,CAA+B,YAAX7T,EAAuB,UAAYA,IAASlrB,IAAKiP,GAAQic,OAM9G,kBAACkU,GAAA,EAAD,CACI3sC,GAAImqC,EACJpoB,KAAMmoB,EACNuC,SAAU7C,EACV5nB,QAASooB,EACTwC,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBC,gBAAiB,CACbF,SAAU,MACVC,WAAY,UAEhB7qB,WAAY,CACR1G,UAAWD,EAAQwtB,iBAGvB,yBAAKvtB,UAAWD,EAAQ+sB,SACpB,kBAACxrB,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAS,GACrB,kBAACJ,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAACwhB,GAAA,EAAD,CACI9mB,QAAQ,WACRgP,MAAOlvB,QAAQ2uC,IAEf,kBAACzH,GAAA,EAAD,CAAYE,QAAQ,eAApB,OACA,kBAACiK,GAAA,EAAD,CACIhtC,GAAG,cACHsJ,MAAOwgC,EACPzsB,SAAU,SAAC/C,GAAD,OAAWyvB,EAAazvB,EAAMC,OAAOjR,QAC/C2jC,mBAAiB,mBACjBC,WAAY,GACZl1B,KAAK,eAET,kBAACm1B,GAAA,EAAD,CAAgBntC,GAAG,oBAAoBsqC,KAI/C,kBAACztB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAACwhB,GAAA,EAAD,CACI9mB,QAAQ,WACRgP,MAAOlvB,QAAQ4uC,IAEf,kBAAC1H,GAAA,EAAD,CAAYE,QAAQ,eAApB,OACA,kBAACiK,GAAA,EAAD,CACIhtC,GAAG,cACHsJ,MAAO0gC,EACP3sB,SAAU,SAAC/C,GAAD,OAAW2vB,EAAa3vB,EAAMC,OAAOjR,QAC/C2jC,mBAAiB,mBACjBC,WAAY,GACZl1B,KAAK,eAET,kBAACm1B,GAAA,EAAD,CAAgBntC,GAAG,oBAAoBuqC,KAI/C,kBAAC1tB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IAGf,kBAACtE,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAAC1D,GAAA,EAAD,CAAQ7C,QAASwvB,GAAjB,WAKJ,kBAACvtB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAAC1D,GAAA,EAAD,CACIE,MAAM,UACN/C,QA7NA,WACxBsuB,EAAoB,CAACY,EAAWE,IAChCI,KA4NwB1sB,SAAU/hB,QAAQ2uC,GAAeC,IAHrC,YASJ,kBAAC1tB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,OAQ3B,kBAACwrB,GAAA,EAAD,CACI3sC,GAAIyrC,GACJ1pB,KAAMypB,GACNiB,SAAUjC,EACVxoB,QAAS0pB,GACTkB,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBC,gBAAiB,CACbF,SAAU,MACVC,WAAY,UAEhB7qB,WAAY,CACR1G,UAAWD,EAAQwtB,iBAGvB,yBAAKvtB,UAAWD,EAAQ+sB,SACpB,kBAACxrB,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAS,GACrB,kBAACJ,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAACwhB,GAAA,EAAD,CACI9mB,QAAQ,WACRgP,MAAOlvB,QAAQmwC,KAEf,kBAACjJ,GAAA,EAAD,CAAYE,QAAQ,wBAApB,WACA,kBAACiK,GAAA,EAAD,CACIhtC,GAAG,uBACHsJ,MAAOqhC,EACPttB,SAAU,SAAC/C,GAAD,OAAWswB,EAAsBtwB,EAAMC,OAAOjR,QACxD2jC,mBAAiB,uBACjBC,WAAY,GACZl1B,KAAK,yBAEb,kBAACm1B,GAAA,EAAD,CAAgBntC,GAAG,8BAA8B8rC,MAIrD,kBAACjvB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAACwhB,GAAA,EAAD,CACI9mB,QAAQ,YAGR,kBAACgnB,GAAA,EAAD,CAAYE,QAAQ,qBAApB,QACA,kBAACiK,GAAA,EAAD,CACIniB,MAAOlvB,QAAQowC,IACf/rC,GAAG,oBACHsJ,MAAOyhC,GACP1tB,SAAU,SAAC/C,GAAD,OAAW0wB,GAAmB1wB,EAAMC,OAAOjR,QACrD2jC,mBAAiB,oBACjBC,WAAY,GACZl1B,KAAK,sBAET,kBAACm1B,GAAA,EAAD,CAAgBntC,GAAG,2BAA2B+rC,MAItD,kBAAClvB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAACwhB,GAAA,EAAD,CACI9mB,QAAQ,WACRN,UAAWD,EAAQktB,WAEnB,kBAAC3F,GAAA,EAAD,CAAYE,QAAQ,eAApB,SACA,kBAACiK,GAAA,EAAD,CACIztC,KAAK,QACLS,GAAG,eACHsJ,MAAOuhC,EACPxtB,SAAU,SAAC/C,GAAD,OAAWwwB,EAAoBxwB,EAAMC,OAAOjR,QACtD2jC,mBAAiB,qBACjBC,WAAY,GACZl1B,KAAK,yBAKjB,kBAAC6E,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IAEf,kBAACtE,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAAC1D,GAAA,EAAD,CAAQ7C,QAAS8wB,IAAjB,WAKJ,kBAAC7uB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GACX,kBAAC1D,GAAA,EAAD,CACIE,MAAM,UACN/C,QAtQY,WACpCyuB,EAA2B,CAACqB,QAASC,EAAoBhtB,MAAOktB,EAAkBlhC,KAAMohC,KACxFW,MAqQwBhuB,SAAU/hB,QAAQmwC,IAA6BC,KAHnD,YASJ,kBAAClvB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,WC5djCpH,GAAqB,CACvBxX,yBAkFWyX,eAAQ,KAAMD,GAAdC,CAAkC8D,cAnGlC,SAAAC,GAAK,MAAK,CACrBqqB,aAAc,CACV3oB,QAAS,eACTwB,gBAAiBzH,GAAOG,eACxBoJ,UAAW,wGACX3F,OAAQ,OACRO,MAAO,SAEXyvB,YAAa,CACT3tB,QAAQ,SAEZ4tB,kBAAmB,CACf5tB,QAAS,mBAuFgC3B,EA9EzB,SAAC5D,GAAW,IACxB3X,EAA0B2X,EAA1B3X,sBACAmC,EAASwV,EAAM8Z,MAAftvB,KACAoD,EAAyBpD,EAAzBoD,SAAUP,EAAe7C,EAAf6C,WAMZopB,EAAOppB,EAAW+yB,MAAQ/yB,EAAWgzB,IAAM+S,GAAsB/lC,EAAW+yB,KAC9EgT,GAAsB/lC,EAAW+yB,KAAO,OAASgT,GAAsB/lC,EAAWgzB,KAEhF1xB,EAAMtB,EAAWizB,OAASjzB,EAAWkzB,KAAOlzB,EAAWizB,KAAO,OAChEjzB,EAAWizB,KAAO,WAAajzB,EAAWkzB,KAAO,OAE/CzxB,EAAMzB,EAAW0B,OAAS1B,EAAWmzB,KAAOnzB,EAAW0B,KAAO,OAChE1B,EAAW0B,KAAO,WAAa1B,EAAWmzB,KAAO,OAE/CvvB,EAASzG,EAAK4C,SAChBC,EAAWssB,SAAWtsB,EAAWusB,OAAjC,UAA6CvsB,EAAWssB,OAAxD,iBACGtsB,EAAWssB,OADd,kBAC8BtsB,EAAWusB,OADzC,OAD2B,UAI/B,OACI,kBAAC,IAAMhV,SAAP,KACI,kBAAC,GAAD,CACImqB,YApBQ,WAChB1mC,EAAsBmC,EAAMoD,EAASqB,WAAYrB,EAAS0xB,SAAU1xB,EAAS+a,cAqB7E,kBAAC,KAAD,CACInI,MAAQ,CACJ4N,SAAU,WAEVtK,MAAO,OACPmB,OAAQ,QAGZouB,kBAAkB,EAElB7oC,KAAM,CACF,CACIgqB,EAAGhqB,EAAK+C,eACRuQ,KAAMtT,EAAK6C,WAAWC,OACtBjI,KAAM,YACNiuC,OAAQ,CACJ7vB,MAAO,aAKnB0pB,OAAM,eACCoG,GAAUpG,OADX,CAEFqG,aAAc,cACd3yB,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,MAEFxlB,EAFE,mBAGUtC,EAHV,qBAIMG,GACZs+B,KAAM,CACF39B,KAAM,KAGdgkC,MAAO,CACH5yB,MAAM,GAAD,OAAKxT,EAAWC,OAAhB,aAA2BM,EAAS2qB,KAApC,KACLmb,eAAgB,QAChBjwB,MAAO,WAEXkwB,MAAM,CACFlwB,MAAO,UACP5C,MAAO,aAEX4sB,YAAa8F,GAAU9F,YAAY7/B,EAASyd,eAEhDkiB,OAAM,eAAMgG,GAAUhG,eC9GnB,YAACqG,GAEZ,IAEIC,EAFAC,EAAWF,EAAWvlC,OAASulC,EAAWxlC,OAI1CylC,EADDC,EAAW,GACKA,EAAW,GAAG5S,QAAQ,GAEvBv2B,KAAKC,MAAMkpC,EAAW,GAGxC,IAAIC,EAAW9mC,MAAMC,KAAKD,MAAM,IAAI,SAACwJ,EAAGtM,GAAJ,OAAUQ,KAAK69B,KAAKoL,EAAWxlC,QAAWjE,EAAI,GAAK0pC,MACnFG,EAAWD,EAASrjC,KAAI,SAAA+F,GAAC,OAAIA,EAAI,IAAMA,EAAI,IAAMA,KAErD,MAAO,CACHw9B,SAAU,QACVF,WACAC,aCjBO,YAACJ,GACZ,IAEMM,GAFSN,EAAWvlC,OAASulC,EAAWxlC,SAC/BwlC,EAAWrlC,OAASqlC,EAAWtlC,QAG1C2W,EAAS,GACTnB,EAAQ,GAgBZ,OAdGvY,MAAM2oC,GACLjvB,GAAkB,KACXivB,EAAY,EAChBA,GAAa,IACZpwB,GAAgBowB,GAGhBpwB,GAAgB,IAChBmB,EAASivB,EAAY,EAAIjvB,EAAS,KAAOA,GAAU,IAAMivB,IAG7DpwB,EAAQowB,EAAY,GAAa,GAARpwB,EAAaA,EAAQowB,EAG3C,CAACjvB,EAAQnB,I,UC8QdjE,GAAqB,CACvBrY,oBACAD,eACAc,yBA2GWyX,gBAzXS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1Czf,OAAQiB,EAAMjB,UAwXsB2b,GAAzBC,CAA6C8D,cA9H7C,SAAAC,GAAK,MAAK,CACrBqqB,aAAc,CACV3oB,QAAS,eACTwB,gBAAiBzH,GAAOG,eACxBoJ,UAAW,wGACX3F,OAAQ,OACRO,MAAO,SAEXyvB,YAAa,CACT3tB,QAAQ,SAEZ4tB,kBAAmB,CACf5tB,QAAS,mBAkH2C3B,EAxGrC,SAAC5D,GAAW,IAa3Bm0B,EAXI5sC,EAAwCyY,EAAxCzY,aAAcc,EAA0B2X,EAA1B3X,sBAFQ,EAGJ2X,EAAM8Z,MAAxBtvB,EAHsB,EAGtBA,KAAM4F,EAHgB,EAGhBA,QACNpD,EAAoCxC,EAApCwC,MAAOG,EAA6B3C,EAA7B2C,OAAQe,EAAqB1D,EAArB0D,OAAQN,EAAapD,EAAboD,SAJD,EAMQ0c,oBAAS,GANjB,mBAMvBja,EANuB,KAMV+jC,EANU,OAOU9pB,oBAAS,GAPnB,mBAOvBha,EAPuB,KAOT+jC,EAPS,OAQA/pB,mBAAS,WART,mBAQvBjC,EARuB,KAQdisB,EARc,OASAhqB,mBAAS,CAAC9f,EAAKwD,KAAMxD,EAAKyD,OAT1B,mBASvBghC,EATuB,KASdsF,EATc,mBAUTtF,EAVS,GAUvBjhC,EAVuB,KAUjBC,EAViB,KAYxBumC,EAAUhqC,EAAKiqC,iBAAiBrkC,EAASC,EAAaC,GAE5D,OAAOF,GACH,KAAKQ,GAAY5E,WACbmoC,EA7Ra,SAACO,EAASd,EAAYvjC,EAAaC,EAAc+X,EAASra,EAAMC,GAAU,IACvFZ,EAAyBumC,EAAzBvmC,WAAYO,EAAagmC,EAAbhmC,SAEdT,EAASF,MAAMC,KAAK0mC,EAAWzmC,QAAQuD,KAAI,SAAAO,GAAK,OAAIrC,WAAWqC,MAC/DjE,EAAQC,MAAMC,KAAK0mC,EAAW5mC,OAGhC2nC,EAASf,EAAWvmC,WAAW0B,KAAO6kC,EAAWvmC,WAAWmzB,KAAOoU,GAAahB,GAAc,GAPJ,EASpEiB,GAAmBjB,GATiD,mBAStF3uB,EATsF,KAS9EnB,EAT8E,KAW9F,OAAO4wB,EAAQhkC,KAAI,SAACC,EAAQ2R,GAExB,IAAMmU,EAAOzpB,EAAM5C,QAAU,EAAIgpC,GAAsBpmC,EAAM,GAAI4mC,EAAW5kC,QAAS4kC,EAAW9lC,WAC3FuC,EACc+iC,GAAf9iC,EAAqCtD,EAAMrC,KAAKC,MAAM0X,EAAMnV,EAAO/C,SAC7C4C,EAAMsV,GADiDsxB,EAAW5kC,QAAS4kC,EAAW9lC,WAD5G,0BAAkCslC,GAAsBpmC,EAAM,GAAI4mC,EAAW5kC,QAAS4kC,EAAW9lC,WAAjG,eAAkHslC,GAAsBpmC,EAAMA,EAAM5C,OAAS,GAAIwpC,EAAW5kC,QAAS4kC,EAAW9lC,YAI9LmD,EAAS2iC,EAAWxmC,SACJ,IAAlBD,EAAO/C,OAAe+C,EAAO,GAAK,MACjCmD,EACDD,EAAclD,EAAOmV,EAAQnV,EAAO/C,QAAQ82B,QAAQ,GAAK,MAAQ/zB,EAAOmV,GAAO4e,QAAQ,GAAK,MAD5F,0BAAmC7zB,EAAWssB,OAA9C,eAA2DtsB,EAAWusB,QAFrC,UAK/Bkb,EAAWznC,EAAWizB,OAASjzB,EAAWkzB,KAA/B,UAAyClzB,EAAWizB,KAApD,kBACVjzB,EAAWizB,KADD,mBACgBjzB,EAAWkzB,KAD3B,QAGXwU,EAAW1nC,EAAW0B,OAAS1B,EAAWmzB,KAA/B,UAAyCnzB,EAAW0B,KAApD,kBACV1B,EAAW0B,KADD,mBACgB1B,EAAWmzB,KAD3B,QAGbwU,EAAYrkC,EAAOD,KAAI,SAACtB,EAAOjF,GAC/B,IAAIgI,EAAMxH,KAAKwH,IAAI/C,GACf6lC,EAAY9iC,EAAM,KAAOA,EAAM,IAAO,MAAQ,MAClD,OAAa,OAAV/C,EAAuB,eAAQy4B,aAAO,MAAPA,CAAc+L,EAAWpmC,KAAKrD,IAAtC,8BAEdypC,EAAWnmC,KAAKtD,GAAK,IAAM09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,GAAK,KAAO09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,IAFrF,QAInB,eAAQ09B,aAAO,MAAPA,CAAc+L,EAAWpmC,KAAKrD,IAAtC,8BAECypC,EAAWnmC,KAAKtD,GAAK,IAAM09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,GAAK,KAAO09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,IAFpG,QAGP,OAHO,UAIJypC,EAAWvmC,WAAWC,OAJlB,aAI6Bu6B,aAAOoN,EAAPpN,CAAkBz4B,GAJ/C,aAI0DwkC,EAAWhmC,SAAS2qB,KAJ9E,QAOX,OACA,kBAAC,KAAD,CACI/X,MAAQ,CACJ4N,SAAU,WAEVtK,MAAM,GAAD,OAAKA,EAAL,MACLmB,OAAO,GAAD,OAAKA,EAAL,MACNhB,SAAS,GAAD,OAAa,GAARH,EAAL,MACRoxB,UAAU,GAAD,OAAc,GAATjwB,EAAL,MACT/B,OAAQ,UAGZmwB,kBAAkB,EAElB7oC,KAAM,CACF,CACI2qC,OAAO,EACPC,KAAMpnC,EACNqnC,KAAMpnC,EACNumB,EAAGof,EAAWnmC,KACdgnB,EAAGmf,EAAWpmC,KACd8nC,EAAG3kC,EACH4kC,aAAa,EACbC,gBAAgB,EAChBC,WAAYptB,EAEZqtB,UAAW,OACXV,YAEAl3B,KAAM81B,EAAWvmC,WAAWC,OAC5BjI,KAAM,UACNswC,SAAU,CACNC,SAAUvtB,EACVwtB,YAAY,EACZC,UAAW,CACPC,OAAQ,UACRtmC,KAAM,GACNgU,MAAO,SAEXuyB,YAAapC,EAAW5lC,KAAO,GAAK4lC,EAAW5lC,KAAO,IAAO,MAAQ,OAEzEioC,SAAU,CACNp1B,MAAO,CACHzY,KAAK,IAAD,OAAMwrC,EAAWhmC,SAAS2qB,KAA1B,MAERmb,eAAgB,WAK5BnG,OAAM,eAAMgG,GAAUhG,QAEtBl6B,IAAKiP,EACL6qB,OAAM,eACCoG,GAAUpG,OADX,CAGFtsB,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,gBAECxlB,EAFD,wBAGM6jC,EAHN,qBAIMC,GACZ3H,KAAM,CACF39B,KAAM,KAGdgkC,MAAM,aAAE5yB,MAAO,YAAa4C,MAAO,WAAckxB,GACjDhB,MAAO,CAAC9yB,MAAO,WAAY4C,MAAO,WAClCgqB,YAAa8F,GAAU9F,YAAYmG,EAAWhmC,SAASyd,YAAapG,UA8KhEixB,CAAiB1B,EAAShqC,EAAM6F,EAAaC,EAAc+X,EAASra,EAAMC,GAClF,MAEJ,KAAK2C,GAAY7E,QACbooC,EA5KU,SAACO,EAASd,EAAYvjC,EAAaC,EAAc+X,EAASra,EAAMC,GAAU,IACpFZ,EAAyBumC,EAAzBvmC,WAAYO,EAAagmC,EAAbhmC,SAEdT,EAASF,MAAMC,KAAK0mC,EAAWzmC,QAAQuD,KAAI,SAAAO,GAAK,OAAIrC,WAAWqC,MAC/DjE,EAAQC,MAAMC,KAAK0mC,EAAW5mC,OAEhC2nC,EAASf,EAAWvmC,WAAW0B,KAAO6kC,EAAWvmC,WAAWmzB,KAAOoU,GAAahB,GAAc,GANP,EAQjEiB,GAAmBjB,GAR8C,mBAQnF3uB,EARmF,KAQ3EnB,EAR2E,KAU3F,OAAO4wB,EAAQhkC,KAAI,SAACC,EAAQ2R,GAExB,IAAMmU,EAAOzpB,EAAM5C,QAAU,EAAIgpC,GAAsBpmC,EAAM,GAAI4mC,EAAW5kC,QAAS4kC,EAAW9lC,WAC3FuC,EACc+iC,GAAf9iC,EAAqCtD,EAAMrC,KAAKC,MAAM0X,EAAMnV,EAAO/C,SAC7C4C,EAAMsV,GADiDsxB,EAAW5kC,QAAS4kC,EAAW9lC,WAD5G,0BAAkCslC,GAAsBpmC,EAAM,GAAI4mC,EAAW5kC,QAAS4kC,EAAW9lC,WAAjG,eAAkHslC,GAAsBpmC,EAAMA,EAAM5C,OAAS,GAAIwpC,EAAW5kC,QAAS4kC,EAAW9lC,YAI9LmD,EAAS2iC,EAAWxmC,SACJ,IAAlBD,EAAO/C,OAAe+C,EAAO,GAAK,MACjCmD,EACDD,EAAclD,EAAOmV,EAAQnV,EAAO/C,QAAQ82B,QAAQ,GAAK,MAAQ/zB,EAAOmV,GAAO4e,QAAQ,GAAK,MAD5F,0BAAmC7zB,EAAWssB,OAA9C,eAA2DtsB,EAAWusB,QAFrC,UAK/Bkb,EAAWznC,EAAWizB,OAASjzB,EAAWkzB,KAA/B,UAAyClzB,EAAWizB,KAApD,kBACVjzB,EAAWizB,KADD,mBACgBjzB,EAAWkzB,KAD3B,QAGXwU,EAAW1nC,EAAW0B,OAAS1B,EAAWmzB,KAA/B,UAAyCnzB,EAAW0B,KAApD,kBACV1B,EAAW0B,KADD,mBACgB1B,EAAWmzB,KAD3B,QAGbwU,EAAYrkC,EAAOD,KAAI,SAACtB,EAAOjF,GAC/B,IAAIgI,EAAMxH,KAAKwH,IAAI/C,GACf6lC,EAAY9iC,EAAM,KAAOA,EAAM,IAAO,MAAQ,MAClD,OAAa,OAAV/C,GAAkB7D,MAAM6D,GAAe,eAAQy4B,aAAO,MAAPA,CAAc+L,EAAWpmC,KAAKrD,IAAtC,8BAE9BypC,EAAWnmC,KAAKtD,GAAK,IAAM09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,GAAK,KAAO09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,IAFrE,QAInC,eAAQ09B,aAAO,MAAPA,CAAc+L,EAAWpmC,KAAKrD,IAAtC,8BAECypC,EAAWnmC,KAAKtD,GAAK,IAAM09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,GAAK,KAAO09B,aAAO,MAAPA,CAAc+L,EAAWnmC,KAAKtD,IAFpG,QAGP,OAHO,UAIJypC,EAAWvmC,WAAWC,OAJlB,aAI6Bu6B,aAAOoN,EAAPpN,CAAkBz4B,GAJ/C,aAI0DwkC,EAAWhmC,SAAS2qB,KAJ9E,QAOX,OACA,kBAAC,KAAD,CACI/X,MAAQ,CACJ4N,SAAU,WAEVtK,MAAM,GAAD,OAAKA,EAAL,MACLmB,OAAO,GAAD,OAAKA,EAAL,MACNhB,SAAS,GAAD,OAAa,GAARH,EAAL,MACRoxB,UAAU,GAAD,OAAc,GAATjwB,EAAL,OAGbouB,kBAAkB,EAElB7oC,KAAM,CACF,CACI2qC,OAAO,EACPC,KAAMpnC,EACNqnC,KAAMpnC,EACNkoC,QAASxlC,EAAOvG,OAAS,IAAQ,OAAS,QAC1CoqB,EAAGof,EAAWnmC,KACdgnB,EAAGmf,EAAWpmC,KACd8nC,EAAG3kC,EACH4kC,aAAa,EACbz3B,KAAM81B,EAAWvmC,WAAWC,OAC5BjI,KAAM,UACNowC,WAAYptB,EACZmtB,gBAAgB,EAEhBE,UAAW,OACXttC,KAAM4sC,EAENiB,SAAU,CACNp1B,MAAO,CACHzY,KAAK,IAAD,OAAMwrC,EAAWhmC,SAAS2qB,KAA1B,MAERmb,eAAe,WAoB3BrgC,IAAKiP,EAELirB,OAAM,eAAMgG,GAAUhG,QAEtBJ,OAAM,eACCoG,GAAUpG,OADX,CAEFtsB,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,gBAECxlB,EAFD,wBAGM6jC,EAHN,qBAIMC,GACZ3H,KAAM,CACF39B,KAAM,KAGdgkC,MAAM,aACF5yB,MAAO,kBACP4C,MAAO,UACPiwB,eAAgB,SACbiB,GAEPhB,MAAO,CACH9yB,MAAO,iBACP4C,MAAO,UACPiwB,eAAgB,SAEpBjG,YAAa8F,GAAU9F,YAAYmG,EAAWhmC,SAASyd,YAAapG,UAgDhEmxB,CAAc5B,EAAShqC,EAAM6F,EAAaC,EAAc+X,EAASra,EAAMC,GAC/E,MAEJ,KAAK2C,GAAY/E,UACb,OAAO,kBAAC,GAAD,CAAiBiuB,MAAO,CAACtvB,UAEpC,QACI2pC,EAAQ,GA2DhB,OACI,kBAAC,IAAMvvB,SAAP,KACI,kBAAC,GAAD,CACIwtB,oBAAqBhiC,IAAY3E,GAASI,WAvB1B,SAAC0yB,GACzBve,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D8sC,EAAW/V,KACZ,MAmBK+X,qBAAoC,IAAdnpC,EAAOsC,KAAW,KAhCvB,WACzBuQ,EAAMxY,kBAAkB,mBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D6sC,GAAiB/jC,KAClB,MA4BKu+B,oBAAkC,IAAb7hC,EAAMyC,KAAW,KA3DtB,WACxB,IAAI8mC,EAAappC,EAASA,EAAOsC,KAAO,EAExC,GAAGW,IAAYQ,GAAY7E,QAAQ,CAC/B,IAAIyqC,EAAuB,GAAKhU,GAAmBxiB,EAAM9b,QAEzD,IAAImM,GAAekmC,EAAavpC,EAAMyC,KAAO+mC,EAEzC,YADAjvC,EAAa,8CAKlB6I,IAAYQ,GAAY5E,aACnBqE,GAAekmC,EAAavpC,EAAMyC,KAAO,GAC7ClI,EAAa,+CAKjByY,EAAMxY,kBAAkB,mBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D4sC,GAAgB/jC,KACjB,OAqCKC,aAAcA,EACdD,YAAaA,EACb2+B,oBAAqB5+B,IAAY3E,GAASI,WApB1B,SAACkpB,GACzB/U,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D+sC,EAAWxf,KACZ,MAgBKka,QAAS7+B,IAAY3E,GAASI,WAAaojC,EAC3C/gC,OAAQkC,IAAY3E,GAASI,WAAaqC,EAC1C6gC,YAfQ,WAChB1mC,EAAsBmC,EAAMoD,EAASqB,WAAYrB,EAAS0xB,SAAU1xB,EAAS+a,cAgBxEwrB,OC7WPt0B,GAAqB,CACvBrY,oBACAa,yBAyIWyX,eAAQ,KAAMD,GAAdC,CAAkC8D,cAxJlC,SAAAC,GAAK,MAAK,CACrBqqB,aAAc,CACV3oB,QAAS,eACTwB,gBAAiBzH,GAAOG,eACxBoJ,UAAW,wGACX3F,OAAQ,OACRO,MAAO,SAEXyvB,YAAa,CACT3tB,QAAQ,YA+IiC3B,EAtIzB,SAAC5D,GAAW,IACxB3X,EAA0B2X,EAA1B3X,sBACAmC,EAASwV,EAAM8Z,MAAftvB,KACAwG,EAAsDxG,EAAtDwG,KAAMzD,EAAgD/C,EAAhD+C,eAAgBP,EAAgCxC,EAAhCwC,MAAOK,EAAyB7C,EAAzB6C,WAAYO,EAAapD,EAAboD,SAHlB,EAKayc,IAAMC,SAAS,CAACkmB,QAAS,GAAI/sB,MAAM,UAAWhU,KAAM,KALjE,mBAKvBy/B,EALuB,KAKRuH,EALQ,OAMKpsB,IAAMC,UAAS,GANpB,mBAMvBglB,EANuB,KAMZoH,EANY,OAOarsB,IAAMC,YAAS/c,GAAkBA,EAAenD,QAAU,KAPvE,mBAOvBglC,EAPuB,KAORuH,EAPQ,KAqC3B3B,EAAYznC,EAAemD,KAAI,SAACtB,EAAOjF,GACvC,MAAM,SAAN,OAAgB6C,EAAM7C,GAAGpE,MAAM,EAAE,IAAjC,eAA2CsH,EAAWC,OAAtD,aAAiEu6B,aAAO,MAAPA,CAAcz4B,GAA/E,iBAA8Fy4B,aAAO,MAAPA,CAAc72B,EAAK7G,IAAjH,aAAyHyD,EAAS2qB,KAAlI,QAGE9B,EAAOppB,EAAW+yB,MAAQ/yB,EAAWgzB,IAAM+S,GAAsBpmC,EAAM,GAAIxC,EAAKwE,QAASxE,EAAKsD,WAChGslC,GAAsBpmC,EAAM,GAAIxC,EAAKwE,QAASxE,EAAKsD,WAAa,OAASslC,GAAsBpmC,EAAMA,EAAM5C,OAAS,GAAII,EAAKwE,QAASxE,EAAKsD,WAEzIa,EAAMtB,EAAWizB,OAASjzB,EAAWkzB,KAAOlzB,EAAWizB,KAAO,OAChEjzB,EAAWizB,KAAO,WAAajzB,EAAWkzB,KAAO,OAE/CzxB,EAAMzB,EAAW0B,OAAS1B,EAAWmzB,KAAOnzB,EAAW0B,KAAO,OAChE1B,EAAW0B,KAAO,WAAa1B,EAAWmzB,KAAO,OAE/CvvB,EAA8B,IAAtB5D,EAAWusB,OAAe,UACpCvsB,EAAWssB,SAAWtsB,EAAWusB,OAAjC,UAA6CvsB,EAAWssB,OAAxD,iBACGtsB,EAAWssB,OADd,kBAC8BtsB,EAAWusB,OADzC,OAGEpF,EAAIhqB,EAAKsD,UAAYd,EAAM0D,KAAI,SAAA+lB,GAAI,OAAIyW,GAAOtN,SAASnJ,OAAUzpB,EAEvE,OACI,6BACI,kBAAC,GAAD,CACI+hC,YAlDQ,WAChB1mC,EAAsBmC,EAAMoD,EAASqB,WAAYrB,EAAS0xB,SAAU1xB,EAAS+a,YAkDrEwmB,2BA/CuB,SAACpa,GAChC/U,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3DivC,EAAiB1hB,KAClB,KA2CKma,cAAeA,EACfE,cAAeA,EACfC,uBAlCmB,SAACjgC,GAC5B4Q,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3DmvC,EAAiBvnC,KAClB,KA8BKkgC,UAAWA,EACXC,mBA5Ce,SAACngC,GACxB4Q,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3DkvC,EAAatnC,KACd,OAyCC,kBAAC,KAAD,CACIoR,MAAQ,CACJ4N,SAAU,WACVtK,MAAO,OACPmB,OAAQ,QAGZouB,kBAAkB,EAElB7oC,KAAM,CACJ,CAEEosC,KAAMtH,EAAY,gBAAkB,UACpC9a,EAAGA,EACHC,EAAGlnB,EACHspC,QAAS,CACLxxC,KAAM,OACNyxC,MAAO9lC,EACPw/B,QAAS,GACT/sB,MAAO2rB,EAAgB,UAAY,cACnC2H,SAAS,GAGbj5B,KAAMzQ,EAAWC,OACjBjI,KAAM,UACN2xC,KAAM,CAACvzB,MAAOyrB,EAAczrB,OAC5B6vB,OAAQ,CACJ9C,QAAStB,EAAcsB,QACvB/gC,KAAMy/B,EAAcz/B,KACpBgU,MAAOyrB,EAAczrB,OAEzBiyB,UAAW,OACXV,cAGJzH,OAAM,eAAMgG,GAAUhG,QACtBJ,OAAM,eACCoG,GAAUpG,OADX,CAEFqG,aAAc,cACd3yB,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,MAEFxlB,EAFE,mBAGUtC,EAHV,qBAIMG,GACZs+B,KAAM,CACF39B,KAAM,KAGhBgkC,MAAO,CACH5yB,MAAOrW,EAAKysC,SAAU,QAAU,OAChCxzB,MAAO,UACPiwB,eAAgB,SAEpBC,MAAO,CACH9yB,MAAM,GAAD,OAAKxT,EAAWC,OAAhB,YAA0BM,EAAS2qB,KAAnC,KACL9U,MAAO,UACPiwB,eAAgB,SAEpBjG,YAAa8F,GAAU9F,YAAY7/B,EAASyd,sBCnIxDxL,GAAqB,CACvBrY,oBACAa,yBAuIWyX,eAAQ,KAAMD,GAAdC,CAAkC8D,cAtJlC,SAAAC,GAAK,MAAK,CACrBqqB,aAAc,CACV3oB,QAAS,eACTwB,gBAAiBzH,GAAOG,eACxBoJ,UAAW,wGACX3F,OAAQ,OACRO,MAAO,SAEXyvB,YAAa,CACT3tB,QAAQ,YA6IiC3B,EApIvB,SAAC5D,GAE8BA,EAA7CxY,kBAF0B,IAEPa,EAA0B2X,EAA1B3X,sBACnBmC,EAASwV,EAAM8Z,MAAftvB,KACAwG,EAAuDxG,EAAvDwG,KAAMzD,EAAiD/C,EAAjD+C,eAAgBJ,EAAiC3C,EAAjC2C,OAAQE,EAAyB7C,EAAzB6C,WAAYO,EAAapD,EAAboD,SAJjB,EAMGyc,IAAMC,UAAS,GANlB,mBAMzBglB,EANyB,KAMdoH,EANc,OAOWrsB,IAAMC,YAAS/c,GAAkBA,EAAenD,QAAU,KAPrE,mBAOzBglC,EAPyB,KAOVuH,EAPU,KAS7B/C,EAAappC,EATgB,EAWS6f,IAAMC,SAAS,CAACkmB,QAAS,GAAI/sB,MAAM,UAAWhU,KAAM,KAX7D,mBAW1By/B,EAX0B,KAWXuH,EAXW,KAa7BzB,EAAYznC,EAAemD,KAAI,SAACtB,EAAOjF,GACvC,MAAM,UAAN,OAAiB09B,aAAO,MAAPA,CAAc16B,EAAOhD,IAAtC,oBAAqDkD,EAAWC,OAAhE,aAA2Eu6B,aAAO,MAAPA,CAAcz4B,GAAzF,iBAAwGy4B,aAAO,MAAPA,CAAc72B,EAAK7G,IAA3H,aAAmIyD,EAAS2qB,KAA5I,QA+BEmI,EAAQkT,EAAW9lC,UAAY,IAAIwB,KAAKjC,EAAW+yB,KAAK/F,WAAa,EAAIhtB,EAAW+yB,IACpF8W,EAAQtD,EAAW9lC,UAAY,IAAIwB,KAAKjC,EAAWgzB,KAAKhG,WAAa,EAAIhtB,EAAWgzB,IAEpF5J,EAAOiK,IAAUwW,EAAQ9D,GAAsB1S,EAAOkT,EAAW5kC,QAAS4kC,EAAW9lC,WACnFslC,GAAsB1S,EAAOkT,EAAW5kC,QAAS4kC,EAAW9lC,WAAa,OAASslC,GAAsB8D,EAAOtD,EAAW5kC,QAAS4kC,EAAW9lC,WAEtJ,OADAwI,QAAQC,IAAI/L,GAER,6BACI,kBAAC,GAAD,CACIukC,YArCQ,WAChB1mC,EAAsBmC,EAAMoD,EAASqB,WAAYrB,EAAS0xB,SAAU1xB,EAAS+a,YAqCrEwmB,2BAlCuB,SAACpa,GAChC/U,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3DivC,EAAiB1hB,KAClB,MA8BKma,cAAeA,EACfE,cAAeA,EACfC,uBArBmB,SAACjgC,GAC5B4Q,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3DmvC,EAAiBvnC,KAClB,KAiBKkgC,UAAWA,EACXC,mBA/Be,SAACngC,GACxB4Q,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3DkvC,EAAatnC,KACd,OA4BC,kBAAC,KAAD,CACIoR,MAAQ,CACJ4N,SAAU,WACVtK,MAAO,OACPmB,OAAQ,QAGZouB,kBAAkB,EAElB7oC,KAAM,CACF,CAEIosC,KAAMtH,EAAY,gBAAkB,UACpC7a,EAAGtnB,EACHqnB,EAAGjnB,EACH4pC,QAAS,CACL9xC,KAAM,OACNyxC,MAAO9lC,EACPw/B,QAAS,GACT/sB,MAAO2rB,EAAgB,UAAY,cACnC2H,SAAS,GAEbj5B,KAAMzQ,EAAWC,OACjBjI,KAAM,UAENiuC,OAAQ,CACJ0D,KAAM,CAACvzB,MAAOyrB,EAAczrB,OAC5B+sB,QAAStB,EAAcsB,QACvB/gC,KAAMy/B,EAAcz/B,KACpBgU,MAAOyrB,EAAczrB,OAGzBiyB,UAAW,OACXV,cAGRzH,OAAM,eAAMgG,GAAUhG,QACtBJ,OAAM,eACCoG,GAAUpG,OADX,CAEFqG,aAAc,cACd3yB,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,gBAECppB,EAAWssB,OAFZ,kBAE4BtsB,EAAWusB,OAFvC,2BAGMvsB,EAAWizB,KAHjB,mBAGgCjzB,EAAWkzB,KAH3C,yBAIMlzB,EAAW0B,KAJjB,mBAIgC1B,EAAWmzB,KAJ3C,QAKN4M,KAAM,CACF39B,KAAM,KAIhBkkC,MAAO,CACH9yB,MAAO,WACP4C,MAAO,UACPiwB,eAAgB,QAChB0D,UAAU,YAEd3D,MAAO,CACH5yB,MAAM,GAAD,OAAKxT,EAAWC,OAAhB,YAA0BM,EAAS2qB,KAAnC,KACL9U,MAAO,UACPiwB,eAAgB,SAEpBjG,YAAa8F,GAAU9F,YAAY7/B,EAASyd,sBCqCxDxL,GAAqB,CACvBrY,oBACAD,eACAc,yBAqGWyX,eAAQ,KAAMD,GAAdC,CAAkC8D,cArHlC,SAAAC,GAAK,MAAK,CACrBqqB,aAAc,CACV3oB,QAAS,eACTwB,gBAAiBzH,GAAOG,eACxBoJ,UAAW,wGACX3F,OAAQ,OACRO,MAAO,SAEXyvB,YAAa,CACT3tB,QAAQ,YA4GiC3B,EAlGzB,SAAC5D,GAAW,IAExBoB,EAAiDpB,EAAjDoB,QAAS7Z,EAAwCyY,EAAxCzY,aAAcc,EAA0B2X,EAA1B3X,sBACvBmC,EAASwV,EAAM8Z,MAAftvB,KACAwC,EAAwCxC,EAAxCwC,MAAOkB,EAAiC1D,EAAjC0D,OAAQV,EAAyBhD,EAAzBgD,KAAMC,EAAmBjD,EAAnBiD,KAAMG,EAAapD,EAAboD,SAJJ,EAMO0c,oBAAS,GANhB,mBAMxBja,EANwB,KAMX+jC,EANW,OAOS9pB,oBAAS,GAPlB,mBAOxB1Y,EAPwB,KAOVylC,EAPU,OAQO/sB,mBAAS9f,EAAKgH,aARrB,mBAQxBA,EARwB,KAQX8lC,EARW,OASDhtB,mBAAS,WATR,mBASxBjC,EATwB,KASfisB,EATe,OAUDhqB,mBAAS,CAAC9f,EAAKwD,KAAMxD,EAAKyD,OAVzB,mBAUxBghC,EAVwB,KAUfsF,EAVe,mBAWVtF,EAXU,GAWxBjhC,EAXwB,KAWlBC,EAXkB,KAa3BspC,EAAyB,UAAhB/lC,EAA0BhE,EAAOC,EAG1C0mC,EAvMiB,SAACO,EAASd,EAAYvjC,EAAauB,EAAcJ,EAAa6W,EAASra,EAAMC,GAAU,IACpGZ,EAAyBumC,EAAzBvmC,WAAYO,EAAagmC,EAAbhmC,SAEdZ,EAAQC,MAAMC,KAAK0mC,EAAW5mC,OAC9BG,EAASF,MAAMC,KAAK0mC,EAAWzmC,QAC/BK,EAAOP,MAAMC,KAAK0mC,EAAWpmC,MAC7BC,EAAOR,MAAMC,KAAK0mC,EAAWnmC,MAE7B+pC,EACc,UAAhBhmC,EACAhE,EACAC,EAEEgqC,EAAwB,UAAhBjmC,EACV,YACA,WAEAmjC,EAAStnC,EAAW0B,KAAO1B,EAAWmzB,MAAwB,UAAhBhvB,EAA0BojC,GAAahB,GAAc,GAGvG,OAAOc,EAAQhkC,KAAI,SAACC,EAAQ2R,GACxB,IAAIgzB,EAAI3kC,EACJ6jB,EAAI,GACJC,EAAI,GAER,GAAmB,UAAhBjjB,EACC,IAAI,IAAIrH,EAAI,EAAGA,EAAIwG,EAAOvG,OAAQD,IAC9BqqB,EAAElqB,KAAKmD,EAAK9C,KAAKC,MAAMT,EAAIgD,EAAO/C,eAGtC,IAAI,IAAID,EAAI,EAAGA,EAAIwG,EAAOvG,OAAQD,IAC9BqqB,EAAElqB,KAAKkD,EAAK7C,KAAKC,MAAMT,EAAIgD,EAAO/C,UAI1C,IAAI,IAAID,EAAI,EAAGA,EAAIwG,EAAOvG,OAAQD,IAC9BsqB,EAAEnqB,KAAK6C,EAAOhD,EAAIgD,EAAO/C,SAG7B,IAAM0qC,EAA2B,eAAhBtjC,EAAA,UAAkCnE,EAAWizB,KAA7C,mBAA4DjzB,EAAWkzB,KAAvE,QACb3uB,EAAe4lC,EAAyCl1B,EAAQk1B,EAAyCptC,QAAU,OAAvG,0BACOiD,EAAWizB,KADlB,mBACiCjzB,EAAWkzB,KAD5C,QAGVwU,EAA2B,UAAhBvjC,EAAA,UAA6BnE,EAAW0B,KAAxC,mBAAuD1B,EAAWmzB,KAAlE,QACb5uB,EAAe4lC,EAAyCl1B,EAAQk1B,EAAyCptC,QAAU,OAAvG,0BACOiD,EAAW0B,KADlB,mBACiC1B,EAAWmzB,KAD5C,QAGV/J,EAAOzpB,EAAM5C,OAAS,EAAIgpC,GAAsBpmC,EAAM,GAAI4mC,EAAW5kC,QAAS4kC,EAAW9lC,WAC3FuC,GAAeuB,EAAewhC,GAAsBpmC,EAAMrC,KAAKC,MAAM0X,EAAQk1B,EAAyCptC,SAAUwpC,EAAW5kC,QAAS4kC,EAAW9lC,WAC/JuC,EAAc+iC,GAAsBpmC,EAAMsV,GAAQsxB,EAAW5kC,QAAS4kC,EAAW9lC,WACjF,mBAAqBslC,GAAsBpmC,EAAM,GAAI4mC,EAAW5kC,QAAS4kC,EAAW9lC,WAAa,OAASslC,GAAsBpmC,EAAMA,EAAM5C,OAAS,GAAIwpC,EAAW5kC,QAAS4kC,EAAW9lC,WAExLknC,EAAYM,EAAE5kC,KAAI,SAACtB,EAAOjF,GAE1B,GAAmB,UAAhBqH,EAAwB,CACvB,IAAIyjC,EAAY7lC,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,OAAG7D,MAAM6D,GAAe,iBAAUy4B,aAAO,MAAPA,CAAcpT,EAAEtqB,IAA1B,8BAEZ09B,aAAO,MAAPA,CAAcrT,EAAErqB,GAAK,IAAMqqB,EAAErqB,GAAK,IAAMqqB,EAAErqB,IAF9B,QAIjB,iBAAU09B,aAAO,MAAPA,CAAcpT,EAAEtqB,IAA1B,8BAEC09B,aAAO,MAAPA,CAAcrT,EAAErqB,GAAK,IAAMqqB,EAAErqB,GAAK,IAAMqqB,EAAErqB,IAF3C,QAGP,OAHO,UAIJkD,EAAWC,OAJP,aAIkBu6B,aAAOoN,EAAPpN,CAAkBz4B,GAJpC,aAI+CxB,EAAS2qB,KAJxD,KAMP,IAAI0c,EAAY7lC,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,OAAG7D,MAAM6D,GAAe,iBAAUy4B,aAAO,MAAPA,CAAcpT,EAAEtqB,IAA1B,8BAEZ09B,aAAO,MAAPA,CAAcrT,EAAErqB,IAFJ,QAIjB,iBAAU09B,aAAO,MAAPA,CAAcpT,EAAEtqB,IAA1B,8BAEC09B,aAAO,MAAPA,CAAcrT,EAAErqB,IAFjB,QAGP,OAHO,UAIJkD,EAAWC,OAJP,aAIkBu6B,aAAOoN,EAAPpN,CAAkBz4B,GAJpC,aAI+CxB,EAAS2qB,KAJxD,QAQf,OACA,kBAAC,KAAD,CACI/X,MAAQ,CACJ4N,SAAU,WAEVtK,MAAO,OACPmB,OAAQ,OACRhB,SAAU,QACVixB,UAAW,SAGf7B,kBAAkB,EAElB7oC,KAAM,CACF,CACI2qC,OAAO,EACPC,KAAMpnC,EACNqnC,KAAMpnC,EAENsnC,aAAa,EACbC,gBAAgB,EAChBC,WAAYptB,EACZ8tB,QAASxlC,EAAOvG,OAAS,IAAQ,OAAS,OAC1CoqB,IACAC,IACA6gB,IACAx3B,KAAMzQ,EAAWC,OACjBjI,KAAMuuC,EAAWxjC,UAAY2pB,GAAsBpuB,kBAAoB,UAAY,UACnFsqC,SAAU,CACNp1B,MAAO,CACHzY,KAAK,IAAD,OAAMwF,EAAS2qB,KAAf,MAERmb,eAAe,SAGnBiC,SAAU,CACNC,SAAUvtB,EACVwtB,YAAY,EACZC,UAAW,CACPC,OAAQ,UACRtmC,KAAM,GACNgU,MAAO,SAEXuyB,YAAa,OAGjBN,UAAW,OACXV,cAGR3hC,IAAKiP,EAEL6qB,OAAS,CACLC,KAAM,CAAC3pB,MAAO,WACd5C,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,gBAECppB,EAAWssB,OAFZ,kBAE4BtsB,EAAWusB,OAFvC,2BAGMkb,EAHN,qBAIMC,GACZ3H,KAAM,CACF39B,KAAM,KAGdgkC,MAAM,aACF5yB,MAAM,GAAD,OAAK42B,EAAL,UACLh0B,MAAO,UACPiwB,eAAgB,SACbiB,GAEPhB,MAAO,CACH9yB,MAAO,WACP4C,MAAO,UACPiwB,eAAgB,QAChB0D,UAAW,YAEf/J,cAAe/tB,GAAOG,eACtBguB,YAAa8F,GAAU9F,YAAY7/B,EAASyd,mBA2C5CqsB,CADIltC,EAAKiqC,iBAAiBjjC,EAAanB,EAAauB,GAC1BpH,EAAM6F,EAAauB,EAAcJ,EAAa6W,EAASra,EAAMC,GA4DnG,OACI,6BACI,yBAAKoT,UAAWD,EAAQ8xB,aACxB,kBAAC,GAAD,CACI1hC,YAAaA,EACbmmC,kBAbc,WACtB33B,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D8vC,EAA+B,UAAhB9lC,EAA0B,aAAe,WACzD,MASKs9B,qBAAsC,IAAhByI,EAAO9nC,KAAa,KA5CzB,WACzB,IAAI8mC,EAAalmC,EAAcrD,EAAMyC,KAAO,GACxCmC,GAAgB2kC,EAAagB,EAAO9nC,KAAO,GAC3ClI,EAAa,+CAIbyY,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D6vC,GAAiBzlC,KAClB,OAkCCA,aAAcA,EACdi9B,oBAAoC,IAAf7hC,EAAMyC,KAAa,KA/BxB,WACxB,IAAI8mC,EAAa3kC,EAAe2lC,EAAO9nC,KAAO,GAC1CY,GAAekmC,EAAavpC,EAAMyC,KAAO,GACzClI,EAAa,+CAIbyY,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D4sC,GAAgB/jC,KACjB,OAqBCA,YAAaA,EACb+hC,oBAhEgB,SAAC7T,GACzBve,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D8sC,EAAW/V,KACZ,MA4DKyQ,oBAzDgB,SAACja,GACzB/U,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D+sC,EAAWxf,KACZ,MAqDKka,QAASA,EACT/gC,OAAQA,EACR6gC,YAxEQ,WAChB1mC,EAAsBmC,EAAMoD,EAASqB,WAAYrB,EAAS0xB,SAAU1xB,EAAS+a,eA0ExEwrB,O,oBC9JEyD,GAnIO,SAAC53B,GAAW,IAe1Bg1B,EAbA6C,EAOA73B,EAPA63B,QACAC,EAMA93B,EANA83B,QACA5I,EAKAlvB,EALAkvB,cACA0E,EAIA5zB,EAJA4zB,WACAmE,EAGA/3B,EAHA+3B,OACAC,EAEAh4B,EAFAg4B,OACA3yC,EACA2a,EADA3a,KAGIgI,EAA8EumC,EAA9EvmC,WAAYO,EAAkEgmC,EAAlEhmC,SAAUR,EAAwDwmC,EAAxDxmC,SAAUG,EAA8CqmC,EAA9CrmC,eAAgB0E,EAA8B2hC,EAA9B3hC,MAAOzE,EAAuBomC,EAAvBpmC,KAAMC,EAAiBmmC,EAAjBnmC,KAAMN,EAAWymC,EAAXzmC,OAM3E,OAAO9H,GACH,IAAK,OACD2vC,EAAYznC,EAAemD,KAAI,SAACtB,EAAOjF,GACnC,IAAI8qC,EAAY7lC,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MAChDD,EAAM8C,EAAM9H,GAAGpE,MAAM,EAAE,IAE3B,OADAoJ,EAAOA,EAAK8xB,QAAQ,IAAK,KACnB,SAAN,OAAgB9xB,EAAhB,eAA2B9B,EAAWC,OAAtC,aAAiDu6B,aAAOoN,EAAPpN,CAAkBz4B,GAAnE,aAA8ExB,EAAS2qB,KAAvF,QAEJ,MAEJ,IAAK,WACDyc,EAAYznC,EAAemD,KAAI,SAACtB,EAAOjF,GACnC,IAAI8qC,EAAY7lC,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,MAAM,QAAN,OAAe5B,EAAKrD,GAAG+2B,QAAQ,GAA/B,eAAwC7zB,EAAWC,OAAnD,aAA8Du6B,aAAOoN,EAAPpN,CAAkBz4B,GAAhF,aAA2FxB,EAAS2qB,KAApG,QAEJ,MAEJ,IAAK,YACDyc,EAAYznC,EAAemD,KAAI,SAACtB,EAAOjF,GACnC,IAAI8qC,EAAY7lC,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,MAAM,QAAN,OAAe3B,EAAKtD,GAAG+2B,QAAQ,GAA/B,eAAwC7zB,EAAWC,OAAnD,aAA8Du6B,aAAOoN,EAAPpN,CAAkBz4B,GAAhF,aAA2FxB,EAAS2qB,KAApG,QAEJ,MAEJ,IAAK,QACDyc,EAAYznC,EAAemD,KAAI,SAACtB,EAAOjF,GACnC,IAAI8qC,EAAY7lC,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MACpD,MAAM,UAAN,OAAiBjC,EAAOhD,GAAG+2B,QAAQ,GAAnC,eAA4C7zB,EAAWC,OAAvD,aAAkEu6B,aAAOoN,EAAPpN,CAAkBz4B,GAApF,aAA+FxB,EAAS2qB,KAAxG,QAEJ,MAEJ,QACIyc,EAAYznC,EAAemD,KAAI,SAACtB,EAAOjF,GACnC,IAAI8qC,EAAY7lC,EAAQ,GAAKA,EAAQ,IAAO,MAAQ,MAChDD,EAAM8C,EAAM9H,GAAGpE,MAAM,EAAE,IAE3B,OADAoJ,EAAOA,EAAK8xB,QAAQ,IAAK,KACnB,SAAN,OAAgB9xB,EAAhB,eAA2B9B,EAAWC,OAAtC,aAAiDu6B,aAAOoN,EAAPpN,CAAkBz4B,GAAnE,aAA8ExB,EAAS2qB,KAAvF,QAIZ,IAAM9B,EAAOppB,EAAW+yB,MAAQ/yB,EAAWgzB,IAAM+S,GAAsB/lC,EAAW+yB,KAC9EgT,GAAsB/lC,EAAW+yB,KAAO,OAASgT,GAAsB/lC,EAAWgzB,KAEhF1xB,EAAMtB,EAAWizB,OAASjzB,EAAWkzB,KAAOlzB,EAAWizB,KAAO,OAChEjzB,EAAWizB,KAAO,WAAajzB,EAAWkzB,KAAO,OAE/CzxB,EAAMzB,EAAW0B,OAAS1B,EAAWmzB,KAAOnzB,EAAW0B,KAAO,OAChE1B,EAAW0B,KAAO,WAAa1B,EAAWmzB,KAAO,OAE/CvvB,EAAS7D,EACXC,EAAWssB,SAAWtsB,EAAWusB,OAAjC,UAA6CvsB,EAAWssB,OAAxD,iBACGtsB,EAAWssB,OADd,kBAC8BtsB,EAAWusB,OADzC,OADsB,UAI1B,OACI,kBAAC,KAAD,CACIpZ,MAAQ,CACJ4N,SAAU,WAEVtK,MAAO,OACPmB,OAAQ,QAGZouB,kBAAkB,EAElB7oC,KAAM,CACF,CACIgqB,EAAGqjB,EACHpjB,EAAGqjB,EACHlB,KAAM,UACN94B,KAAMzQ,EAAWC,OACjBjI,KAAMkI,EAAenD,OAAS,IAAQ,YAAc,UAEpDkpC,OAAQ,CACJ9C,QAAStB,EAAcsB,QACvB/gC,KAAMy/B,EAAcz/B,KACpBgU,MAAOyrB,EAAczrB,OAEzBiyB,UAAW,OACXV,cAGRzH,OAAM,eAAMgG,GAAUhG,QACtBJ,OAAM,eACCoG,GAAUpG,OADX,CAEFqG,aAAc,cAGd3yB,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,MAEFxlB,EAFE,mBAGUtC,EAHV,qBAIMG,GACZs+B,KAAM,CACF39B,KAAM,KAGdgkC,MAAO,CACH5yB,MAAOk3B,EACPt0B,MAAO,UACPiwB,eAAgB,SAEpBC,MAAO,CACH9yB,MAAOm3B,EACPv0B,MAAO,UACPiwB,eAAgB,QAChB0D,UAAoB,UAAT/xC,GAAmB,YAElCooC,YAAa8F,GAAU9F,YAAY7/B,EAASyd,kBCItDxL,GAAqB,CACvBrY,oBACAa,yBAGJ,SAAS4vC,GAAS31B,GACd,MAAO,CACLxc,GAAG,cAAD,OAAgBwc,GAClB,gBAAgB,cAAhB,OAA+BA,IAIrC,I,GAAM41B,GAAiB,SAACl4B,GAAW,IACvBgJ,EAAqDhJ,EAArDgJ,SAAUmvB,EAA2Cn4B,EAA3Cm4B,YAAa71B,EAA8BtC,EAA9BsC,MAAO81B,EAAuBp4B,EAAvBo4B,kBAEtC,OACI,yBAAKxb,OAAQub,IAAgB71B,GACzB,kBAAC,GACO81B,GAEPpvB,IA0JElJ,eAAQ,KAAMD,GAAdC,CAAkC8D,cAvMlC,SAAAC,GAAK,MAAK,CACrBqqB,aAAc,CACV3oB,QAAS,eACTwB,gBAAiBzH,GAAOG,eACxBoJ,UAAW,wGACX3F,OAAQ,OACRO,MAAO,SAGXyvB,YAAa,CACT3tB,QAAQ,SAGZ8yB,KAAM,CACFn0B,aAAcL,EAAMd,QAAQ,IAGhCu1B,IAAK,CACDzvB,UAAW,0BACXzE,SAAU,OACVyL,cAAe,OACfpM,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,SAkLY1E,EApJ/B,SAAC5D,GAAW,IAElBoB,EAAmCpB,EAAnCoB,QAAS/Y,EAA0B2X,EAA1B3X,sBACTmC,EAASwV,EAAM8Z,MAAftvB,KACAoD,EAAapD,EAAboD,SAJiB,EAMK0c,mBAAS,WANd,mBAMlBjC,EANkB,KAMTisB,EANS,OAOKhqB,mBAAS,CAAC9f,EAAKwD,KAAMxD,EAAKyD,OAP/B,mBAOlBghC,EAPkB,KAOTsF,EAPS,OAQiBjqB,mBAAS,CAACkmB,QAAS,GAAI/sB,MAAM,UAAWhU,KAAM,KAR/D,mBAQlBy/B,EARkB,KAQHuH,EARG,OASHnsB,mBAAS,GATN,mBASlBguB,EATkB,KASbC,EATa,KAWnBC,EAzJc,SAAC5E,EAAYvrB,EAAS4mB,GAAa,IAE/C5hC,EAAyBumC,EAAzBvmC,WAAYO,EAAagmC,EAAbhmC,SAEd6oB,EAAOppB,EAAW+yB,MAAQ/yB,EAAWgzB,IAAM+S,GAAsB/lC,EAAW+yB,KAC9EgT,GAAsB/lC,EAAW+yB,KAAO,OAASgT,GAAsB/lC,EAAWgzB,KAEhF1xB,EAAMtB,EAAWizB,OAASjzB,EAAWkzB,KAAOlzB,EAAWizB,KAAO,OAChEjzB,EAAWizB,KAAO,WAAajzB,EAAWkzB,KAAO,OAE/CzxB,EAAMzB,EAAW0B,OAAS1B,EAAWmzB,KAAOnzB,EAAW0B,KAAO,OAChE1B,EAAW0B,KAAO,WAAa1B,EAAWmzB,KAAO,OAE/CvvB,EAAS2iC,EAAWxmC,SACtBC,EAAWssB,SAAWtsB,EAAWusB,OAAjC,UAA6CvsB,EAAWssB,OAAxD,iBACGtsB,EAAWssB,OADd,kBAC8BtsB,EAAWusB,OADzC,OADiC,UAIrC,OACI,kBAAC,KAAD,CACIpZ,MAAQ,CACJ4N,SAAU,WAEVtK,MAAO,OACPmB,OAAQ,OACRhB,SAAU,QACVixB,UAAW,SAGf7B,kBAAkB,EAElB7oC,KAAM,CACF,CACI2qC,OAAO,EACPC,KAAMnG,EAAQ,GACdoG,KAAMpG,EAAQ,GACdngC,IAAK8kC,EAAWnmC,KAChBkB,IAAKilC,EAAWpmC,KAChB8nC,EAAG1B,EAAWrmC,eACdioC,gBAAgB,EAChBC,WAAYptB,EACZowB,OAAQ,EACR36B,KAAM81B,EAAWvmC,WAAWC,OAC5BjI,KAAM,gBAEN4wC,SAAU,CACNp1B,MAAO,CACHzY,KAAK,IAAD,OAAMwrC,EAAWhmC,SAAS2qB,KAA1B,MAERmb,eAAgB,WAK5BvG,OAAM,eACCoG,GAAUpG,OADX,CAEFtsB,MAAO,CACHzY,KAAM,UAAGiF,EAAWC,OAAd,aAAyBM,EAAS2qB,KAAlC,mBACK9B,EADL,MAEFxlB,EAFE,mBAGUtC,EAHV,qBAIMG,GACZs+B,KAAM,CACF39B,KAAM,KAGdipC,OAAQ,CACJl4B,MAAO,WACP9a,OAAQ,CACJ,CACIizC,WAAY,SACZxwB,OAAQ,CAAC,iGACTywB,MAAO,WAGfjmC,OAAQihC,EAAWjhC,OACnBH,KAAMohC,EAAWphC,MAGrBi7B,YAAa8F,GAAU9F,YAAYmG,EAAWhmC,SAASyd,eAG3DkiB,OAAM,eACCgG,GAAUhG,OADX,CAEFsL,kBACE,iGAqEDC,CAAgBtuC,EAAM6d,EAAS4mB,GAsBtCF,EAAc,WAChB1mC,EAAsBmC,EAAMoD,EAASqB,WAAYrB,EAAS0xB,SAAU1xB,EAAS+a,YAe3EyvB,EAAoB,CACtB1nC,IAAK,CACD2X,UACA+pB,oBAvCoB,SAAC7T,GACzBve,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D8sC,EAAW/V,KACZ,MAmCC0Q,UACAD,oBAjCoB,SAACja,GACzB/U,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3D+sC,EAAWxf,KACZ,MA6BCga,eAGJgK,QAAS,CACLhK,cACAG,gBACAuH,mBACAtH,2BAzB2B,SAACpa,GAChC/U,EAAMxY,kBAAkB,gBACxBsuB,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAMr2B,EAAMxY,kBAAkB,OAC3DivC,EAAiB1hB,KAClB,QAwBP,OACI,6BACI,kBAACikB,GAAA,EAAD,CACI5pC,MAAOkpC,EACPn1B,SAzCY,SAAC/C,EAAOoS,GAC5B+lB,EAAO/lB,IAyCC6S,aAAW,cACX4T,UAAQ,EACRC,eAAe,UACf73B,UAAWD,EAAQi3B,MAEnB,kBAACc,GAAA,EAAD,eAAKzoB,MAAM,OAAUunB,GAAS,GAA9B,CAAkC52B,UAAWD,EAAQk3B,IAAK53B,QA/BlD,WAChBoV,YAAW,kBAAMp0B,OAAOghC,cAAc,IAAIC,MAAM,aAAY,QA+BpD,kBAACwW,GAAA,EAAD,eAAKzoB,MAAM,WAAcunB,GAAS,GAAlC,CAAsC52B,UAAWD,EAAQk3B,OACzD,kBAACa,GAAA,EAAD,eAAKzoB,MAAM,UAAaunB,GAAS,GAAjC,CAAqC52B,UAAWD,EAAQk3B,OACxD,kBAACa,GAAA,EAAD,eAAKzoB,MAAM,UAAaunB,GAAS,GAAjC,CAAqC52B,UAAWD,EAAQk3B,OACvD9tC,EAAK4C,UAAY,kBAAC+rC,GAAA,EAAD,eAAKzoB,MAAM,YAAeunB,GAAS,GAAnC,CAAuC52B,UAAWD,EAAQk3B,QAEhF,kBAAC,GAAD,CAAgBH,YAAaG,EAAKh2B,MAAO,EAAG81B,kBAAmBA,EAAkB1nC,KACpE,IAAR4nC,GAAaE,GAGlB,kBAAC,GAAD,CAAgBL,YAAaG,EAAKh2B,MAAO,EAAG81B,kBAAmBA,EAAkBW,SACpE,IAART,GACG,kBAAC,GAAD,CACIT,QAASrtC,EAAKyH,MACd6lC,QAASttC,EAAK+C,eACd2hC,cAAeA,EACf0E,WAAYppC,EACZutC,OAAO,OACPC,OAAM,UAAKxtC,EAAK6C,WAAWC,OAArB,YAA+BM,EAAS2qB,KAAxC,KACNlzB,KAAK,UAKjB,kBAAC,GAAD,CAAgB8yC,YAAaG,EAAKh2B,MAAO,EAAG81B,kBAAmBA,EAAkBW,SACpE,IAART,GACG,kBAAC,GAAD,CACIT,QAASrtC,EAAKgD,KACdsqC,QAASttC,EAAK+C,eACd2hC,cAAeA,EACf0E,WAAYppC,EACZutC,OAAO,WACPC,OAAQxtC,EAAK6C,WAAWC,OACxBjI,KAAK,cAKjB,kBAAC,GAAD,CAAgB8yC,YAAaG,EAAKh2B,MAAO,EAAG81B,kBAAmBA,EAAkBW,SACpE,IAART,GACG,kBAAC,GAAD,CACIT,QAASrtC,EAAKiD,KACdqqC,QAASttC,EAAK+C,eACd2hC,cAAeA,EACf0E,WAAYppC,EACZutC,OAAO,YACPC,OAAQxtC,EAAK6C,WAAWC,OACxBjI,KAAK,eAKhBmF,EAAK4C,UACF,kBAAC,GAAD,CAAgB+qC,YAAaG,EAAKh2B,MAAO,EAAG81B,kBAAmBA,EAAkBW,SACpE,IAART,GACG,kBAAC,GAAD,CACIT,QAASrtC,EAAK+C,eACduqC,QAASttC,EAAK2C,OACd+hC,cAAeA,EACf0E,WAAYppC,EACZutC,OAAQvtC,EAAK6C,WAAWC,OACxB0qC,OAAO,WACP3yC,KAAK,gBCjR3Bwa,GAAqB,CACzBu5B,YzDmDyB,SAACpzC,GAAD,MAAiB,CACxCX,KN9DwB,eM+DxBC,QAAS,CACLU,iByD4DFqzC,GAAiBz1B,aAnBE,CACrB01B,eAAgB,CACdC,MAAO,QACPx1B,UAAW,QACXmC,YAAa,SAeItC,EAXC,SAAC5D,GAAW,IAC1BoB,EAAYpB,EAAZoB,QACR,OACE,kBAAC,IAAMwD,SAAP,KACE,kBAACgG,GAAA,EAAD,CAAYvJ,UAAWD,EAAQk4B,eAAgB71B,MAAM,UAAU/C,QAAS,kBAAMV,EAAMw5B,kBAAkBx5B,EAAMha,aAAa2lB,oBAAkB,EAACD,eAAa,GACvJ,kBAAC+tB,GAAA,EAAD,WAQFC,G,8MAEJF,kBAAoB,SAACxzC,GACnB,EAAKga,MAAMo5B,YAAYpzC,I,0EAGd,IAAD,SACwB2H,KAAKqS,MAAzBoB,EADJ,EACIA,QAASld,EADb,EACaA,OACjB,OACI,kBAAC,IAAM0gB,SAAP,KAIK1gB,EAAOwM,KAAI,SAACopB,EAAOxX,GAChB,OAAOwX,EAAMtvB,KAAK6C,WAAW+I,QAEzB,KAAKvF,GAAiBC,UACpB,OAAGgpB,EAAM1pB,UAAYQ,GAAY3E,OAE7B,yBAAKoH,IAAKymB,EAAMh0B,IACd,kBAACyb,GAAA,EAAD,CAAOE,UAAW,GAAIJ,UAAWD,EAAQu4B,WAAYtmC,IAAKymB,EAAMh0B,IAC9D,kBAACuzC,GAAD,CAAgBrzC,WAAYsc,EAAOk3B,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAW1f,MAAOA,MAIhBA,EAAMtvB,KAAKoD,SAASsC,qBAAuB/G,GAAmBC,UAEpE,yBAAKiK,IAAKymB,EAAMh0B,IACd,kBAACyb,GAAA,EAAD,CAAOE,UAAW,GAAIJ,UAAWD,EAAQu4B,WAAYtmC,IAAKymB,EAAMh0B,IAC9D,kBAACuzC,GAAD,CAAgBrzC,WAAYsc,EAAOk3B,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAiB1f,MAAOA,MAM9B,yBAAKzmB,IAAKymB,EAAMh0B,IACd,kBAACyb,GAAA,EAAD,CAAOE,UAAW,GAAIJ,UAAWD,EAAQu4B,WAAYtmC,IAAKymB,EAAMh0B,IAC9D,kBAACuzC,GAAD,CAAgBrzC,WAAYsc,EAAOk3B,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAgB1f,MAAOA,MAK/B,KAAKjpB,GAAiBjF,WACpB,OACE,yBAAKyH,IAAKymB,EAAMh0B,IACd,kBAACyb,GAAA,EAAD,CAAOE,UAAW,GAAIJ,UAAWD,EAAQu4B,WAAYtmC,IAAKymB,EAAMh0B,IAC9D,kBAACuzC,GAAD,CAAgBrzC,WAAYsc,EAAOk3B,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAiB1f,MAAOA,MAKhC,KAAKjpB,GAAiB/E,aACpB,OACE,yBAAKuH,IAAKymB,EAAMh0B,IACd,kBAACyb,GAAA,EAAD,CAAOE,UAAW,GAAIJ,UAAWD,EAAQu4B,WAAYtmC,IAAKymB,EAAMh0B,IAC9D,kBAACuzC,GAAD,CAAgBrzC,WAAYsc,EAAOk3B,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAmB1f,MAAOA,MAKlC,KAAKjpB,GAAiBnF,WACpB,OACE,yBAAK2H,IAAKymB,EAAMh0B,IACd,kBAACyb,GAAA,EAAD,CAAOE,UAAW,GAAIJ,UAAWD,EAAQu4B,WAAYtmC,IAAKymB,EAAMh0B,IAC9D,kBAACuzC,GAAD,CAAgBrzC,WAAYsc,EAAOk3B,kBAAmB,EAAKA,oBAC3D,kBAAC,GAAD,CAAiB1f,MAAOA,MAKhC,QACE,MAAO,Y,GA5EZpW,aAoFN5D,gBA7MS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1Czf,OAAQiB,EAAMjB,UA4MsB2b,GAAzBC,CAA6C8D,cArM7C,SAACC,GAAD,MAAY,CACzB81B,WAAY,CACV5yB,gBAAiBzH,GAAOG,eACxBsE,UAAW,MACXG,aAAc,MACdc,QAASnB,EAAMd,QAAQ,GACvB8F,UAAW,8BA+L6CjF,CAAmB81B,K,UCjNzE75B,GAAqB,CACvBhY,wBACAD,8BACAgyC,sB1D8GiC,iBAAO,CACxCv0C,KNxGmC,6BgEJjCw0C,GAAY,gEAoCZ3b,GAAc,SAACle,GACjB,OACI,kBAAC,KAAWke,YAAZ,iBAA4Ble,EAA5B,CAAmCqB,UAAWrB,EAAMqB,cAKtDuc,GAAS,SAAC5d,GACZ,OACE,kBAAC,KAAW4d,OAAZ,iBACM5d,EADN,CAEE6d,WAAU,eACH7d,EAAM6d,WADH,CAGNC,YAAa,SAACrnB,GAAD,OAAOA,EAAEsnB,kBACtBC,YAAa,SAACvnB,GAAD,OAAOA,EAAEsnB,wBAM5B+b,GAAc,SAAC/lC,EAAEgmC,GAAH,OAAShmC,EAAEimC,KAAOD,EAAEC,MAAQ,EAAI,GAE9Cvb,GAAiB,SAACze,GACpB,OACI,kBAAC,KAAWye,eAAmBze,EAC3B,kBAACqO,GAAA,EAAD,CAAQ5K,MAAM,UAAUjD,MAAO,CAAE4N,SAAU,WAAY4F,KAAM,KAC5DhU,EAAMgJ,WAKbixB,G,YAEF,WAAYj6B,GAAO,IAAD,wBACd,8CAAMA,KAsBVgB,kBAAoB,WACZ,EAAKhB,MAAMvb,YAAe,EAAKub,MAAMvb,WAAW2F,QAAQ,EAAK4V,MAAMnY,yBAxBzD,EA2BlBy2B,kBAAoB,SAACC,GAKjB,OAJYA,EAAO/zB,KAAKwvC,OAASzb,EAAO/zB,KAAK0vC,SACzC3b,EAAO/zB,KAAKwvC,KADJ,UAELzb,EAAO/zB,KAAKwvC,KAFP,cAEiBzb,EAAO/zB,KAAK0vC,WA9B3B,EAmClBC,+BAAiC,SAACC,GAC9B,OAAOA,EAAK1pC,KAAI,SAAAsS,GAAI,MAAK,CACrB5T,MAAO4T,EAAKg3B,KACZtpB,MAAO1N,EAAKg3B,KACZxvC,KAAMwY,OACH,IAxCO,EA2ClBq3B,mBAAqB,SAACC,GAClB,GAAGA,GAAaA,EAAU9vC,KAAK,CAC3B,IAAM1E,EAAKw0C,EAAU9vC,KAAKgd,GAC1B,EAAKxH,MAAMpY,4BAA4B9B,QACnC,EAAKka,MAAM45B,wBAEnB,EAAKz4B,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bo1C,eAAgBD,KAC9C,EAAKt6B,MAAMw6B,mCAAmCF,IAlDhC,EAqDlB1f,mBAAqB,SAACC,GACbA,EAAUp2B,YAAco2B,EAAUp2B,WAAW2F,SAAY,EAAK4V,MAAMvb,aAAc,EAAKub,MAAMvb,WAAW2F,SACzG,EAAKjF,MAAMw5B,OAAOC,aAAa,EAAK5e,MAAMvb,YAC1C,EAAK0c,SAAS,CAACwd,OAAQ,EAAKx5B,MAAMw5B,WAxDxB,EA4DlBsB,oBAAsB,SAACC,EAAc96B,GACZ,iBAAlBA,EAAOA,QAA2B,EAAK+b,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B66B,YAAaE,KAC5D,cAAjB96B,EAAOA,QAA2C,eAAlBA,EAAOA,QAAyB,EAAK+b,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B66B,YAAa,OA3D9G,IAAIrB,EAAS,IAAIqE,UAAgB,MACjCrE,EAAOuE,YAAc,IAAIF,wBACzBrE,EAAOwE,SAAS,YAChBxE,EAAOwE,SAAS,QAChBxE,EAAOwE,SAAS,cAChBxE,EAAOwE,SAAS,YAChB,IACOnjB,EAAMvb,YAAcub,EAAMvb,WAAW2F,QAAQu0B,EAAOC,aAAa5e,EAAMvb,YAC5E,MAAMgS,GACJH,QAAQC,IAAIE,GACZH,QAAQC,IAAIyJ,EAAMvb,YAbR,OAgBd,EAAKU,MAAQ,CACTw5B,SACAqB,YAAa,GACbua,eAAgB,MAnBN,E,wEAiET,IAAD,EAE4C5sC,KAAKxI,MAA7Cw5B,EAFJ,EAEIA,OAAQqB,EAFZ,EAEYA,YAAaua,EAFzB,EAEyBA,eAFzB,EAG2B5sC,KAAKqS,MAA5BoB,EAHJ,EAGIA,QAAS3c,EAHb,EAGaA,WAEX42B,EAAU2E,GAAev7B,EAAakJ,KAAKwsC,+BAA+Bxb,EAAOA,OAAOqB,GAAaT,KAAKua,KAC1Gr1C,EAAakJ,KAAKwsC,+BAA+B11C,GACjD,GAEN,OACI,yBAAKqB,GAAG,kBAAkBub,UAAWD,EAAQq5B,UACzC,yBAAKp5B,UAAWD,EAAQs5B,gBAEpB,kBAAC,KAAD,CACIrU,UAAW14B,KAAKqS,MAAM26B,qBAAuB74C,EAAOC,WACpDukC,WAAY,CACRC,mBAAmB,GACnB3I,UACAM,eACAO,mBAEJmI,aAAW,EACXtI,kBAAmB3wB,KAAK2wB,kBACxBmI,cAAe94B,KAAKsyB,oBACpByG,aAAc,KACdrlB,UAAWD,EAAQw5B,aACnBpU,mBAAiB,EACjB9V,MAAM,SACN2K,QAASA,EACTlY,SAAUxV,KAAK0sC,mBACfjrC,MAAOzB,KAAKxI,MAAMo1C,eAClBn3B,YAAY,iBACZyL,OAAQ,CACJiY,KAAM,SAAAC,GAAQ,sBAAUA,EAAV,CAAoBC,OAAQ,QAE1C6T,SAAU,SAAA9T,GAAQ,sBAASA,EAAT,CAAmBhgB,gBAAiBzH,GAAOG,kBAE7D0nB,MAAO,SAAAJ,GAAQ,sBAASA,EAAT,CACXtjB,MAAO,UACPyQ,WAAY2lB,MAGhBzS,QAAS,SAAAL,GAAQ,sBAASA,EAAT,CACbhgB,gBAAiBzH,GAAOG,eACxB4nB,OAAQ,OACRxe,UAAW,0BACXpF,MApLV,QAqLUqF,aAAc,EACd,UAAW,CACPue,OAAO,mBAEX,iBAAkB,CACdE,YAAajoB,GAAOC,YAI5B6D,YAAa,SAAA2jB,GAAQ,sBAASA,EAAT,CACjB7S,WAAY2lB,GACZp2B,MAAOnE,GAAOC,QACd6E,SAAU,UAGdojB,iBAAkB,SAAAT,GAAQ,sBAASA,EAAT,CACtB7S,WAAY2lB,GACZp2B,MAtMV,QAuMUsD,gBAAiBzH,GAAOG,kBAG5B8e,OAAQ,SAACwI,EAAU5hC,GAAX,sBAA0B4hC,EAA1B,CACJhgB,gBAAiBzH,GAAOG,eACxBgE,MAAOte,EAAMi2B,UAAY9b,GAAOC,QAAU,QAC1C,UAAW,CAAEwH,gBAAiBzH,GAAOM,eAGzC6nB,YAAa,SAACV,EAAU5hC,GAAX,sBAA0B4hC,EAA1B,CACT7S,WAAY2lB,GACZp2B,MAAO,UACP+C,aAAc,UAGlB0gB,eAAgB,SAAAH,GAAQ,sBACjBA,EADiB,CAEpB/hB,QAAS,aACT2B,WAAY,QAGpB9C,MAAO,SAAAA,GAAK,sBACLA,EADK,CAERvE,OAAO,eACAuE,EAAMvE,OADP,CAGFw7B,UAAW,UACXv7B,QAAS,iBAKxBg7B,GACG,kBAACz4B,GAAA,EAAD,CAAOrS,KAAK,QAAQ4R,UAAWD,EAAQ25B,YACnC,kBAAC34B,GAAA,EAAD,KACI,kBAACH,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBAA9B,WAGA,kBAAC94B,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBACzBT,EAAe/vC,KAAKwvC,OAI7B,kBAAC/3B,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBAA9B,aAGA,kBAAC94B,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBACzBT,EAAe/vC,KAAK0vC,WAKzBK,EAAe/vC,KAAKywC,YACpB,kBAACh5B,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBAA9B,eAGA,kBAAC94B,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBACzBT,EAAe/vC,KAAKywC,WAAWl1C,MAAM,EAAE,MAMhDw0C,EAAe/vC,KAAK0wC,UACpB,kBAACj5B,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBAA9B,aAGA,kBAAC94B,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBACzBT,EAAe/vC,KAAK0wC,SAASn1C,MAAM,EAAE,MAM9Cw0C,EAAe/vC,KAAK2wC,YACpB,kBAACl5B,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBAA9B,oBAGA,kBAAC94B,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBACzBT,EAAe/vC,KAAK2wC,aAM7BZ,EAAe/vC,KAAK4wC,WACpB,kBAACn5B,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBAA9B,SAGA,kBAAC94B,GAAA,EAAD,CAAWb,UAAWD,EAAQ45B,gBACzBT,EAAe/vC,KAAK4wC,mB,GApOhC13B,aAgPd5D,gBA/TS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1Clf,WAAYU,EAAMV,WAClBk2C,mBAAoBx1C,EAAMw1C,sBA6TU96B,GAAzBC,CAA6C8D,cAjT7C,SAAAC,GAAK,MAAK,CACrB42B,SAAU,CACNz1B,QAAQ,OACRe,SAAU,QACVgB,gBAAiB,cACjBtD,MAPc,QAQdqF,aAAc,MACdD,UAAW,MACXuF,SAAU,WACV6Y,eAAgB,YAChBtd,UAAW,mBACX5F,UAAW,QAGf62B,aAAc,CACV92B,MAAO,QACPgF,aAAc,OAGlBiyB,WAAY,CACRt3B,MAtBc,QAuBdyQ,WAAY2lB,GACZ32B,OAAQ,oBAGZ83B,eAAgB,CACZv3B,MA5Bc,QA6BdyQ,WAAY2lB,GACZwB,YAAa,WAqRuCz3B,CAAmBq2B,K,UCnQzEqB,GAAa13B,cAxDM,SAACC,GAAD,MAAY,CACjC42B,SAAU,CAEN1zB,gBAAiB,cAEjB+B,aAAc,MACd5C,YAAa,QAGjBq1B,WAAY,CAERlU,OAAO,oBACPve,aAAc,MACdrF,MAAOnE,GAAOC,QACdkB,OAAQ,UACRuE,QAAS,MACTlB,MAAO,QACPM,SAAS,OACT2C,gBAAiBzH,GAAOG,eACxBoJ,UAAW,0BAGXqL,WAAY,gEACZ,UAAW,CACPqT,YAAa,UAIrBiU,SAAU,CACNz3B,UAAW,EACXN,MAAO,QACPyQ,WAAY,iEAGhBunB,aAAc,CACVl2B,QAAS,OACT9B,MAAO,YAoBIG,EAhBG,SAAC5D,GAAW,IACtBoB,EAAsBpB,EAAtBoB,QAAS7d,EAAayc,EAAbzc,SAEjB,OACI,yBAAK8d,UAAWD,EAAQq5B,SAAU30C,GAAG,mBAChCvC,GAAY,uBAAG8d,UAAWD,EAAQo6B,UAAtB,sBAAmD,6BAAnD,uBACb,4BAAQ11C,GAAG,cAAcub,UAAWD,EAAQm6B,YAA5C,iBAGA,4BAAQz1C,GAAG,gBAAgBub,UAAS,UAAKD,EAAQm6B,WAAb,YAA2Bn6B,EAAQq6B,eAAvE,cASNC,GAAgB,CAClBr2C,KAAM,aACNs2C,aAAc,CACV,CACIt2C,KAAM,OACNu2C,SAAU,CACVn4B,MAAO,CAAC,EAAG,IAAK,IAAK,KAErBo4B,QAAS,CACLp4B,MAAO,CAAC,EAAG,IAAK,IAAK,GACrBhU,KAAM,UAMhBqsC,GAAiB,CACnBz2C,KAAM,UACFs2C,aAAc,CACV,CACIt2C,KAAM,OACNoK,KAAM,MACNmsC,SAAU,CACNn4B,MAAO,CACHs4B,EAAG,EACHC,EAAG,IACHjC,EAAG,IACHhmC,EAAG,OAOrBkoC,G,YAEF,WAAYj8B,GAAQ,IAAD,+BACf,8CAAMA,KAaVk8B,sBAAwB,SAACC,EAAWC,GAChC,OAAO,GAbP,EAAKC,YAAc,IAAIr8B,EAAMs8B,YAAYC,gBAAgB,CACrDC,MAAOx8B,EAAMy8B,YACbC,KAAM18B,EAAM08B,KACZhB,iBACAI,kBACAa,qBAAsB,CAClBC,mBAAmB,EACnBC,KAAM,eATC,E,wEAkBT,IAAD,SACmDlvC,KAAKqS,MAArD08B,EADH,EACGA,KAAMJ,EADT,EACSA,YAAaG,EADtB,EACsBA,YAAaK,EADnC,EACmCA,YAClCT,EAAgB1uC,KAAhB0uC,YAEFd,EAAa1+B,SAASkgC,eAAe,eACrCtB,EAAe5+B,SAASkgC,eAAe,iBAErCC,EAAkBC,aAAS,IAAI,SAAC78B,GACf,WAAhBA,EAAMjb,OACL,EAAK6a,MAAMk9B,8BAA8BZ,EAAYa,MAAMC,wBAAwBh9B,EAAMi9B,QAAQC,SAASpvC,YA8DlH,OA1DAmuC,EAAY1nC,GAAG,UAAU,SAACyL,GACH,WAAhBA,EAAMjb,OAAsBib,EAAMm9B,eAA8C,eAA7Bn9B,EAAMm9B,cAAcl4C,MACtEg3C,EAAYmB,WAGbp9B,EAAMi9B,SAAWj9B,EAAMi9B,QAAQtG,UAC9B32B,EAAMi9B,QAAQtG,SAAU,GAET,WAAhB32B,EAAMjb,QACL23C,GAAY,GACZvB,EAAW/6B,MAAM+E,QAAU,eAC3Bk2B,EAAaj7B,MAAM+E,QAAU,QAGd,aAAhBnF,EAAMjb,QACL23C,GAAY,GACZ,EAAK98B,MAAMk9B,8BAA8BZ,EAAYa,MAAMC,wBAAwBh9B,EAAMi9B,QAAQC,SAASpvC,SAC1GqtC,EAAW/6B,MAAM+E,QAAU,eAC3Bk2B,EAAaj7B,MAAM+E,QAAU,WAIrC82B,EAAY1nC,GAAG,SAAUqoC,GAEzBX,EAAY1nC,GAAG,UAAU,SAACyL,GACtB,GAAGA,EAAMm9B,eAA8C,cAA7Bn9B,EAAMm9B,cAAcl4C,KAAqB,CAC/D,GAAmB,WAAhB+a,EAAMjb,MAAoB,OAC7B,EAAK6a,MAAMk9B,8BAA8B98B,EAAMq9B,SAAS,GAAGH,SAASpvC,QACpEqtC,EAAW/6B,MAAM+E,QAAU,eAC3Bk2B,EAAaj7B,MAAM+E,QAAU,WAIrCg2B,EAAWmC,iBAAiB,SAAS,SAACt9B,GAC9Bq8B,EAAYkB,YACZb,GAAY,GACZT,EAAYuB,OAAO,WAAY,CAC3BhH,KAAK,UAET2E,EAAW/6B,MAAM+E,QAAU,OAC3Bk2B,EAAaj7B,MAAM+E,QAAU,kBAGrCk2B,EAAaiC,iBAAiB,SAAS,SAACt9B,GACpCi8B,EAAYwB,SACZf,GAAY,GACZvB,EAAW/6B,MAAM+E,QAAU,eAC3Bk2B,EAAaj7B,MAAM+E,QAAU,UAGjCm3B,EAAKoB,GAAGzuC,IAAI,kBAAmB,gBAC/BqtC,EAAKoB,GAAGzuC,IAAI,kBAAmB,aAE/BqtC,EAAKoB,GAAGpgC,OAAO,QACfg/B,EAAKoB,GAAGpgC,OAAO,qBACfg/B,EAAKoB,GAAGpgC,OAAO,WACfg/B,EAAKoB,GAAGpgC,OAAO,eAER,S,GA3FY2M,IAAM3G,WA+F3Bq6B,GAAuB1zB,IAAM2zB,MAAK,SAACh+B,GAAW,IACxC5b,EAAmD4b,EAAnD5b,iBAAkB65C,EAAiCj+B,EAAjCi+B,gBAAiB3B,EAAgBt8B,EAAhBs8B,YAE3C,GAAGl4C,EAAiB,CAAC,IACTqJ,EAAerJ,EAAfqJ,KAAMD,EAASpJ,EAAToJ,KAEV0wC,EAAWvzC,KAAKC,MAAM6C,EAAKrD,OAAS,GAExC6zC,EAAgBN,YAEhB,IAAIQ,EAAY,CAAC,IACbC,EAAY,EAEZC,EAAW5wC,EAAK,GAChB6wC,EAAW9wC,EAAK,GAChB+wC,EAAc,EAGlB9wC,EAAK8f,SAAQ,SAACze,EAAK3E,GACf,IAAIwE,EAAMnB,EAAKrD,GAEX+H,EAAcvH,KAAKwH,IAAIxD,EAAM2vC,GAC7BE,EAAe7zC,KAAKwH,IAAIrD,EAAMuvC,GAC9BjsC,EAAcosC,EAAe,IAAK,IAAMA,EAAeA,EAEvDnsC,EAAW1H,KAAK2H,KAAKJ,EAAcA,EAAcE,EAAcA,GACnEmsC,EAAclsC,EAAWksC,EAAclsC,EAAWksC,EAElDJ,EAAUC,GAAW9zC,KAAK,CAACwE,EAAKH,IAE7BxE,EAAIsD,EAAKrD,OAAS,IACb0E,EAAM,KAAOA,EAAM,KAASrB,EAAKtD,EAAI,IAAM,KAAOsD,EAAKtD,EAAI,IAAM,MACjEg0C,EAAU7zC,KAAK,IACf8zC,KAGAtvC,GAAO,KAAOA,GAAO,KAASA,EAAI3E,EAAI,GAAK,KAAO2E,EAAI3E,EAAI,GAAK,MAC/Dg0C,EAAU7zC,KAAK,IACf8zC,SAKZ,IAAIK,EAAyB,CACzBp5C,KAAM,UACNs2C,aAAc,CAAC,CACXt2C,KAAM,OACNu2C,SAAU,CAAEn4B,MAAO,CAAC,EAAG,IAAK,IAAK,IACjCi7B,IAAM,QACNhxC,KAAM,QACN+B,KAAM,KAId0uC,EAAU5wB,SAAQ,SAAAypB,GAEd,IAAI2H,EAA2B,CAC3Bt5C,KAAM,WACNu5C,MAAO5H,GAGPqG,EAAU,IAAIf,EAAYuC,QAAQ,CAClCvB,SAAUqB,EACVG,OAAQL,IAGZR,EAAgB5uC,IAAIguC,MAGxB,IACI,IAAM1qC,EAAS,CAAClF,EAAKywC,GAAW1wC,EAAK0wC,IAEjC1rC,EAAO,EAAI7H,KAAKC,MAAM2zC,EAAc,GAExCv+B,EAAM08B,KAAKqC,KAAK,CACZ1+B,OAAQ1N,EACRH,QACD,CACCwsC,YAAa,KACbC,YAAa,KAGnB,MAAMxoC,GAAIH,QAAQC,IAAIE,SAGxBwnC,EAAgBN,YAEhB39B,EAAM08B,KAAKqC,KAAK,CACZ1+B,OAAQ,EAAE,IAAK,IACf7N,KAAM,GACP,CACCwsC,YAAa,KACbC,YAAa,KAGrB,MAAO,MAGLC,G,YACF,WAAYl/B,GAAO,IAAD,+BACd,8CAAMA,KAQV6N,OAAS,WAAO,IAAD,EAC8D,EAAK7N,MAAtEoB,EADG,EACHA,QAASk7B,EADN,EACMA,YAAa6C,EADnB,EACmBA,SAAU/6C,EAD7B,EAC6BA,iBAAkBg7C,EAD/C,EAC+CA,WAGpD9e,EAAO1xB,WAAWuwC,EAAS7e,MAC3BC,EAAO3xB,WAAWuwC,EAAS5e,MAC3BxxB,EAAOH,WAAWuwC,EAASpwC,MAC7BswC,EAAQzwC,WAAWuwC,EAAS3e,MAC1BA,EAAO6e,EAAQtwC,EAAOswC,EAAQ,IAAMA,EAE1C,EAAK5C,YAAYkB,YAEjB,IAAI2B,EAAU,CACVj6C,KAAM,UACNk6C,MAAO,CACH,CAACxwC,EAAMuxB,GACP,CAACE,EAAMF,GACP,CAACE,EAAMD,GACP,CAACxxB,EAAMwxB,GACP,CAACxxB,EAAMuxB,KAIXkf,EAAgB,IAAIlD,EAAYuC,QAAQ,CACxCvB,SAAUgC,EACVR,OAAQpD,KAKZ,OAFA,EAAKe,YAAYptC,IAAImwC,GAGjB,yBAAKn+B,UAAWD,EAAQwB,WACpB,kBAAC,KAAD,CACI68B,cAAe,CACXC,QAAS,YACTh6C,OAAQ,CACJ,EAAK+2C,YACL,EAAKwB,kBAIb0B,eAAgB,CACZhtC,OAAQ,EAAE,IAAK,IACfH,KAAM,EACNotC,iBAAkB,CACdC,YAAa,EACbC,UAAW,mBACXC,YAAa,EACbt8B,MAAO,sBAIf,kBAACs6B,GAAD,CACI35C,iBAAkBA,EAClB65C,gBAAiB,EAAKA,gBACtB3B,YAAaA,IAEjB,kBAAC,GAAD,CACIY,8BAAiC,EAAKl9B,MAAMk9B,8BAC5CZ,YAAaA,EACb0D,qBAAsB,EAAKhgC,MAAMggC,qBACjCvD,YAAa,EAAKA,YAClBK,YAAa,SAACv5C,GAAD,OAAc,EAAK4d,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B5B,eACzDmwB,IAAK0rB,KAGb,kBAAC9D,GAAD,CAAY/3C,SAAU,EAAK4B,MAAM5B,WACjC,kBAAC,GAAD,CAAgBi3C,mCAAoC,EAAKx6B,MAAMw6B,uCA1EvE,EAAKr1C,MAAQ,CACT5B,UAAU,GAEd,EAAKk5C,YAAc,IAAIz8B,EAAMs8B,YAAY2D,cACzC,EAAKhC,gBAAkB,IAAIj+B,EAAMs8B,YAAY2D,cAN/B,E,4BADKv8B,aAmFZE,iBAxXA,SAACC,GAAD,MAAY,CACvBjB,UAAW,CACPM,OAAQ,gBACRY,MAAO,QACPmB,OAAQ,YAoXDrB,CAAmBs7B,ICrXnBgB,GAdO,SAAC,GAAD,IAAEvmB,EAAF,EAAEA,OAAQC,EAAV,EAAUA,OAAQwG,EAAlB,EAAkBA,IAAKC,EAAvB,EAAuBA,IAAK/yB,EAA5B,EAA4BA,OAAQgzB,EAApC,EAAoCA,KAAMC,EAA1C,EAA0CA,KAAMxxB,EAAhD,EAAgDA,KAAMyxB,EAAtD,EAAsDA,KAAMpqB,EAA5D,EAA4DA,OAAQlO,EAApE,EAAoEA,UAApE,MAAoF,CACtGyxB,OAAQ/qB,WAAW+qB,GACnBC,OAAQhrB,WAAWgrB,GACnBwG,MACAC,MACA/yB,SACAgzB,KAAM1xB,WAAW0xB,GACjBC,KAAM3xB,WAAW2xB,GACjBxxB,KAAMH,WAAWG,GACjByxB,KAAM5xB,WAAW4xB,GACjBpqB,SACAlO,cCCWi4C,GAZW,SAAC1pB,GACvB,IAAI2pB,EAAO3pB,EAAK+D,cACZJ,EAAQ3D,EAAK4D,WAAa,EAC1BC,EAAM7D,EAAK8D,UAMf,OAJY6lB,EAAKC,WAIF,KAHFjmB,EAAQ,GAAK,IAAMA,EAAMimB,WAAajmB,EAAMimB,YAG3B,KAFnB/lB,EAAM,GAAK,IAAMA,EAAI+lB,WAAa/lB,EAAI+lB,aCuB/CC,GAAa,SAACC,GAAa,IAAD,EAoC5B,OAnCa,mBACR3vC,GAAYlF,WAAa,CACtB80C,GAAI3vC,GAAiBnF,WACrB0E,QAASQ,GAAYlF,aAHhB,cAKRkF,GAAYjF,kBAAoB,CAC7B60C,GAAI3vC,GAAiBnF,WACrB0E,QAASQ,GAAYjF,oBAPhB,cASRiF,GAAYhF,WAAa,CACtB40C,GAAI3vC,GAAiBjF,WACrBwE,QAASQ,GAAYhF,aAXhB,cAaRgF,GAAY/E,UAAY,CACrB20C,GAAI3vC,GAAiBC,UACrBV,QAASQ,GAAY/E,YAfhB,cAiBR+E,GAAY9E,aAAe,CACxB00C,GAAI3vC,GAAiB/E,aACrBsE,QAASQ,GAAY9E,eAnBhB,cAqBR8E,GAAY7E,QAAU,CACnBy0C,GAAI3vC,GAAiBC,UACrBV,QAASQ,GAAY7E,UAvBhB,cAyBR6E,GAAY5E,WAAa,CACtBw0C,GAAI3vC,GAAiBC,UACrBV,QAASQ,GAAY5E,aA3BhB,cA6BR4E,GAAY3E,OAAS,CAClBu0C,GAAI3vC,GAAiBC,UACrBV,QAASQ,GAAY3E,SA/BhB,GAmCEs0C,IAmBb1gC,GAAqB,CACvB1Y,kBACAs5C,iB9DrF4B,SAACz4C,GAAD,MAAY,CACxC3C,KNH8B,qBMI9BC,QAAS,CACL0C,W8DmFJjB,uBACA25C,2B9DjEsC,SAACC,GAAD,MAA0B,CAChEt7C,KNpByC,gCMqBzCC,QAAQ,eAAKq7C,K8DgEbp5C,eACAM,wBACA+4C,oB9DoE+B,iBAAO,CACtCv7C,KN3HiC,0BoEuDjC4B,+BA0BE45C,GAAe,CACjB34C,UAAW,GACXoF,OAAQ,KACRqsB,OAAQ,EACRC,OAAQ,EACRwG,IAAK,IAAI9wB,KACT+wB,IAAK,IAAI/wB,KACTgxB,KAAM,EACNC,KAAM,EACNxxB,KAAM,EACNyxB,KAAM,EACNC,gBAAiB,IAGfqgB,G,8MACF1B,WAAa/0B,IAAM+G,Y,EAEnBjsB,MAAQ,CACJ47C,aAAc,GACdvQ,QAAS,EACTlN,YAAY,EACZ0d,QAAQ,EACRhgB,aAAa,EACba,4BAA4B,EAC5BwI,eAAgB,KAEhB8U,SAAU0B,I,EAkCdzjB,wBAA0B,SAACiN,GACvB,EAAKlpB,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BklC,qB,EAUlCnpB,aAAe,SAACd,GACZ,EAAKe,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bg6C,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,eAA4B/+B,EAAMC,OAAOvC,KAAOsC,EAAMC,OAAOjR,Y,EAGvGo0B,mBAAqB,SAACpjB,GAClB,EAAKe,SAAL,eACO,EAAKhc,MADZ,CAEIg6C,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,eAA4B/+B,EAAMC,OAAOvC,KAAOsC,EAAMC,OAAOjR,Y,EAI7E24B,sBAAwB,SAACtR,GACrB,GAAGA,EAAK,CACJ,IAAI2C,EAAU,IAAI9pB,KAClB8pB,EAAQC,YAAY5C,EAAK+D,cAAe/D,EAAK4D,WAAY5D,EAAK8D,WAC9D,EAAKpZ,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bg6C,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,CAA2B/e,IAAIhH,S,EAI7E+O,oBAAsB,SAAC1R,GACnB,GAAGA,EAAK,CACJ,IAAI2C,EAAU,IAAI9pB,KAClB8pB,EAAQC,YAAY5C,EAAK+D,cAAe/D,EAAK4D,WAAY5D,EAAK8D,WAC9D,EAAKpZ,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bg6C,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,CAA2B9e,IAAIjH,S,EAI7EkQ,YAAc,WAAO,IAAD,EAC8D,EAAKnkC,MAAMg6C,SAAjFxlB,EADQ,EACRA,OAAQC,EADA,EACAA,OAAQwG,EADR,EACQA,IAAKC,EADb,EACaA,IAAKC,EADlB,EACkBA,KAAMC,EADxB,EACwBA,KAAMxxB,EAD9B,EAC8BA,KAAMyxB,EADpC,EACoCA,KAAMC,EAD1C,EAC0CA,gBAEtDwgB,EAAUX,GAAW7f,GAerBn7B,EAAU,CACV+H,WAfa6yC,GAAc,CAC3BvmB,SACAC,SACAwG,IAAK+f,GAAkB/f,GACvBC,IAAK8f,GAAkB9f,GACvBC,OACAC,OACAxxB,OACAyxB,OACAlzB,OAAQ,EAAKnI,MAAMg6C,SAAS7xC,QAAU,EAAKnI,MAAMg6C,SAAS7xC,OAAO8B,MACjElH,UAAW,EAAK/C,MAAMg6C,SAAS7xC,QAAU,EAAKnI,MAAMg6C,SAASj3C,UAC7DkO,OAAQ6qC,EAAQT,KAKhBpwC,QAAS6wC,EAAQ7wC,QACjBxC,SAAU,EAAKzI,MAAMg6C,SAAS7xC,QAAU,EAAKnI,MAAMg6C,SAAS7xC,OAAO9C,MAGvE,EAAKwV,MAAM0gC,2BAA2Bp7C,I,EAK1Cw9B,aAAe,SAACx1B,GACZ,GAAGA,EAAQ,CACP,IAAI0zB,GAAe1zB,EAAO9C,KAAKwH,UAC3B6vB,EAAgE,cAAnCv0B,EAAO9C,KAAK0F,mBAEzCgxC,EAAgBtoB,GAAqBtrB,EAAO9C,KAAK2c,UACrD+5B,EAAcC,QAAQD,EAAc3mB,UAAY,GAEhD,IAAI6F,EAAM9yB,EAAO9C,KAAK0E,sBAAwBhD,GAAoBO,mBAC9D,EAAKtH,MAAMg6C,SAAS/e,IAAMxH,GAAqBtrB,EAAO9C,KAAK0c,UAC3DmZ,EAAM/yB,EAAO9C,KAAK0E,sBAAwBhD,GAAoBO,mBAC9D,EAAKtH,MAAMg6C,SAAS9e,IACpBwB,EAA6Bqf,EAC7BtoB,GAAqBtrB,EAAO9C,KAAK0c,UAEjC5Y,EAAS3D,KAAKC,MAA4B,IAAtB0C,EAAO9C,KAAK0tB,SAAiB,IACjD3pB,EAAS5D,KAAK69B,KAA2B,IAAtBl7B,EAAO9C,KAAK2tB,SAAiB,IAChD/pB,EAASzD,KAAKC,MAA4B,IAAtB0C,EAAO9C,KAAK4tB,SAAiB,IACjD/pB,EAAS1D,KAAK69B,KAA2B,IAAtBl7B,EAAO9C,KAAK6tB,SAAiB,IAEhDiI,EAAOuB,EAA6BvzB,EAAS,EAAKnJ,MAAMg6C,SAAS7e,KACjEC,EAAOsB,EAA6BtzB,EAAS,EAAKpJ,MAAMg6C,SAAS5e,KACjExxB,EAAO8yB,EAA6BzzB,EAAS,EAAKjJ,MAAMg6C,SAASpwC,KACjEyxB,EAAOqB,EAA6BxzB,EAAS,EAAKlJ,MAAMg6C,SAAS3e,KACjE7G,EAASkI,EAA6Bv0B,EAAO9C,KAAKwH,WAAa,EAC/D8uB,GAAWtH,YAAYK,IAAIvsB,EAAO9C,KAAKyE,aACvC6xB,GAAWrH,YAAYI,IAAIvsB,EAAO9C,KAAKyE,YADc,EAErD,EAAK9J,MAAMg6C,SAASxlB,OAEpBC,EAASiI,EAA6Bv0B,EAAO9C,KAAK4c,WAAa,EAC/D0Z,GAAWtH,YAAYK,IAAIvsB,EAAO9C,KAAKyE,cAAgB6xB,GAAWvH,aAAa,GAAKuH,GAAWvH,aAAa,IAAM,GAAG2H,QAAQ,GAC7HJ,GAAWrH,YAAYI,IAAIvsB,EAAO9C,KAAKyE,aAAgB6xB,GAAWxH,aAAa,GAAKwH,GAAWxH,aAAa,IAAM,EAClH,EAAKn0B,MAAMg6C,SAASvlB,OAErBiI,GACC,EAAKud,WAAW7uB,QAAQvQ,MAAM08B,KAAKqC,KAAK,CACpC1+B,OAAQ,EAAEzR,WAAWG,GAAQH,WAAW4xB,IAAS,GAAI5xB,WAAW0xB,GAAQ1xB,WAAW2xB,IAAS,GAC5F/tB,KAAM,GACP,CACCwsC,YAAa,KACbC,YAAa,KAIrB,IAAI/2C,EAAYoF,EAAO9C,KAAKyE,WAE5B,EAAKkS,SAAL,eAAkB,EAAKhc,MAAvB,CACI67B,cACAa,6BACAsd,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,CACJ7xC,SACA8yB,MACAC,MACAC,OACAC,OACAxxB,OACAyxB,OACA7G,SACAC,SACA1xB,YACAu4B,gBAAiB,aAIzB,EAAKtf,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bg6C,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,CAA2B7xC,SAAQpF,UAAW,S,EAI5FsyC,mCAAqC,SAAC4G,GAClC,GAAGA,GAAU,EAAKj8C,MAAMg6C,SAAS7xC,OAAO,CACpC,EAAK0S,MAAMzY,aAAa,kDACxB,IAAI+4B,EAAO31B,KAAKC,MAA4B,IAAtBw2C,EAAO52C,KAAK0tB,SAAkB,IAChDqI,EAAO51B,KAAK69B,KAA2B,IAAtB4Y,EAAO52C,KAAK2tB,SAAkB,IAC/CppB,EAAOpE,KAAKC,MAA4B,IAAtBw2C,EAAO52C,KAAK4tB,SAAkB,IAChDoI,EAAO71B,KAAK69B,KAA2B,IAAtB4Y,EAAO52C,KAAK6tB,SAAkB,IAEnD,EAAKlX,SAAL,eAAkB,EAAKhc,MAAvB,CACIg6C,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,CACJ7e,OACAC,OACAxxB,OACAyxB,OACAJ,IAAKxH,GAAqBwoB,EAAO52C,KAAKywC,YACtC5a,IAAKzH,GAAqBwoB,EAAO52C,KAAK0wC,iB,EAMtDtY,iBAAmB,WACf,EAAKzhB,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bm+B,YAAY,M,EAG9CC,gBAAkB,WACd,EAAKpiB,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bm+B,YAAY,M,EAG9C+d,aAAe,WACX,EAAKlgC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B67C,QAAS,EAAK77C,MAAM67C,W,EAGtD9D,8BAAgC,SAAChvC,GAG7B,IAFA,IAAIozC,EAAQpzC,EAAOqzC,KAEbD,GAAS,KAAKA,GAAS,IAC7B,KAAOA,EAAQ,KAAKA,GAAS,IAI7B,IAFA,IAAIjC,EAAQnxC,EAAOszC,KAEbnC,GAAS,KAAKA,GAAS,IAC7B,KAAMA,EAAQ,KAAKA,GAAS,IAE5B,IAAIoC,EAAiB,CACjBnhB,KAAMpyB,EAAOwzC,KAAKxgB,QAAQ,GAC1BX,KAAMryB,EAAOyzC,KAAKzgB,QAAQ,GAC1BnyB,KAAMuyC,EAAMpgB,QAAQ,GACpBV,KAAM6e,EAAMne,QAAQ,IAGxB,EAAK/f,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bg6C,SAAS,eAAK,EAAKh6C,MAAMg6C,SAAjB,GAA8BsC,O,EAGxE1hB,cAAgB,WACZ,EAAK5e,SAAL,eAAkB,EAAKhc,MAAvB,CAA8Bg6C,SAAU0B,O,iNA5NpClzC,KAAKqS,MAAMjd,SAAS4K,KAAKqS,MAAMjZ,uBAC/B4G,KAAKqS,MAAMvb,YAAYkJ,KAAKqS,MAAMnY,wBAClC8F,KAAKqS,MAAM/c,UAAU0K,KAAKqS,MAAM/Y,8BAE9B26C,EAAkB,CACpB,oBACA,SACA,gBACA,kBACA,QACA,W,SAGsBC,uBAAY,CAClC,iCACA,sBACA,4BACA,sCACA,yCACA,gBACD,CAACxtB,QAAS,S,OAPTytB,E,OASAxF,EAAcsF,EAAgBzuC,QAAO,SAAC4uC,EAAaC,EAAcC,GAEjE,OADAF,EAAYC,GAAgBF,EAAcG,GACnCF,IACR,IAEHp0C,KAAKwT,SAAL,eAAkBxT,KAAKxI,MAAvB,CAA8Bm3C,iB,+IAOfzhB,GACZltB,KAAKqS,MAAMrb,iBACVgJ,KAAKqS,MAAM4gC,sBACXjzC,KAAKwT,SAAL,eAAkBxT,KAAKxI,MAAvB,CAA8Bm+B,YAAY,Q,+BA0LzC,IACGliB,EAAYzT,KAAKqS,MAAjBoB,QAER,OAAIzT,KAAKqS,MAAMxc,KAGX,yBAAK6d,UAAWD,EAAQ8gC,YACpB,kBAAC,GAAD,iBACQv0C,KAAKxI,MAAMg6C,SADnB,CAEI9U,eAAgB18B,KAAKxI,MAAMklC,eAC3BjN,wBAAyBzvB,KAAKyvB,2BAGlC,kBAAC,GAAD,eACIA,wBAAyBzvB,KAAKyvB,wBAC9B+kB,gBAAiBx0C,KAAKw0C,gBACtBd,aAAc1zC,KAAK0zC,aACnBngC,aAAcvT,KAAKuT,aACnBsiB,mBAAoB71B,KAAK61B,mBACzBuE,sBAAuBp6B,KAAKo6B,sBAC5BI,oBAAqBx6B,KAAKw6B,oBAC1B6Y,OAAQrzC,KAAKxI,MAAM67C,OACnB1X,YAAa37B,KAAK27B,YAClBxG,aAAcn1B,KAAKm1B,cACfn1B,KAAKxI,MAAMg6C,SAXnB,CAYIne,YAAarzB,KAAKxI,MAAM67B,YACxBa,2BAA4Bl0B,KAAKxI,MAAM08B,2BACvCyB,WAAY31B,KAAKxI,MAAMm+B,WACvBV,iBAAkBj1B,KAAKi1B,iBACvBW,gBAAiB51B,KAAK41B,gBACtBxD,cAAepyB,KAAKoyB,iBAEtBpyB,KAAKxI,MAAMm3C,aACT,yBAAKj7B,UAAS,UAAK1T,KAAKxI,MAAMm+B,WAAaliB,EAAQghC,YAAc,KAC7D,kBAAC,GAAD,CACIhD,WAAYzxC,KAAKyxC,WACjBlC,8BAA+BvvC,KAAKuvC,8BACpC1C,mCAAoC7sC,KAAK6sC,mCACzC8B,YAAa3uC,KAAKxI,MAAMm3C,YACxB6C,SAAUxxC,KAAKxI,MAAMg6C,SACrB/6C,iBAAkBuJ,KAAKqS,MAAM5b,oBAKzC,yBAAKid,UAAW1T,KAAKxI,MAAMm+B,WAAaliB,EAAQkiB,WAAaliB,EAAQghC,aACjE,kBAAC,GAAD,QA3CgB,kBAAC,GAAD,U,GAlPR1+B,aAoSb5D,gBApWS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,KACZa,WAAYc,EAAMd,WAClBC,kBAAmBa,EAAMb,kBACzBL,KAAMkB,EAAMlB,KACZC,OAAQiB,EAAMjB,OACdsG,KAAMrF,EAAMqF,KACZjG,4BAA6BY,EAAMZ,4BACnCjB,eAAgB6B,EAAM7B,eACtBc,iBAAkBe,EAAMf,iBACxBK,WAAYU,EAAMV,WAClBE,eAAgBQ,EAAMR,eACtB1B,SAAUkC,EAAMlC,SAChBF,QAASoC,EAAMpC,WAuVqB8c,GAAzBC,CAA6C8D,cAzU7C,SAACC,GAAD,MAAY,CACvBu+B,YAAa,CACT78B,QAAS,QAGbuJ,WAAY,CACR/H,gBAAiBzH,GAAOG,gBAG5B6jB,WAAY,CACR/d,QAAS,eACTvB,WAAYH,EAAMd,QAAQ,IAI9Bm/B,WAAY,CACRhN,UAAW,QAGXpmB,WAAW,OAAD,OCnHH,quDDmHG,SAsT0ClL,CAAmBk9B,KEzYzEjhC,GAAqB,CACvBzY,kBACAD,kBACAP,SACAy7C,qBnEjCgC,SAAClxB,EAAUnb,GAAX,MAAyB,CACzD3Q,KNE8B,qBMD9BC,QAAS,CACL6rB,WACAnb,cmE8BJ1O,2BACAZ,yBACAa,gBAqCE+6C,G,8MAGFC,YAAc,SAACniC,GACX,EAAKJ,MAAMqiC,qBAAqB,EAAKriC,MAAMmR,SAAU,EAAKnR,MAAMhK,W,EAGpE8d,YAAc,WACV,EAAK9T,MAAMwiC,aACX,EAAKxiC,MAAM5Y,kBACX,EAAK4Y,MAAM1Y,4B,EAGfm7C,eAAiB,SAACj/C,GACd,IAAIyS,EAAQzS,EAAK4Z,iBAAgB,GAAME,SACvC,EAAK0C,MAAMtZ,uBAAuBuP,I,EAGtCysC,cAAgB,WAEZ,IAAI/sB,EAAK,gBACLC,EAAOl0B,OAAO6Z,KAAKC,MACpBoa,EACoBA,EAAKna,kBACXoa,mBA1BO,WA4BhB,KACAF,EAAM8sB,gBACN,kBAAM9sB,EAAM3V,MAAMzY,aAAa,wDAGnCuuB,WAAWH,EAAM+sB,cAAe,K,0EAI/B,IACGthC,EAAYzT,KAAKqS,MAAjBoB,QACJuhC,GAAiBh1C,KAAKqS,MAAMmR,WAAaxjB,KAAKqS,MAAMhK,SAExD,OACI,kBAAC4R,GAAA,EAAD,CACIC,KAAMla,KAAKqS,MAAM3d,kBACjBylB,QAASna,KAAKmmB,YACd8uB,kBAAgB,oBAChBC,QAASl1C,KAAK+0C,cACd36B,WAAY,CACR1G,UAAWD,EAAQ0hC,gBAGvB,kBAAC76B,GAAA,EAAD,CAAaniB,GAAG,qBAAhB,SACA,kBAACoiB,GAAA,EAAD,KACI,kBAAC8P,GAAA,EAAD,oDACgD,kBAACzT,GAAA,EAAD,CAAMlD,UAAWD,EAAQ2hC,uBAAwBriC,QAAS/S,KAAKmmB,YAAatP,UAAWC,KAAYC,GAAI,CAACrJ,SAAU,cAAlH,cAEhD,0BAAM2nC,SAAU,SAAAvsC,GAAC,OAAKA,EAAEsnB,mBACpB,kBAAC9a,GAAA,EAAD,CACI+K,WAAS,EACT9K,OAAO,SACPpd,GAAG,WACH4qB,MAAM,WACNrrB,KAAK,OACLsc,QAAQ,WACR7D,KAAK,WACL1O,MAAOzB,KAAKqS,MAAMmR,SAClBhO,SAAUxV,KAAKqS,MAAMkB,aACrBqnB,gBAAiB,CACbK,QAAQ,KAIhB,kBAAC3lB,GAAA,EAAD,CACIC,OAAO,SACPpd,GAAG,OACH4qB,MAAM,WACNrrB,KAAK,WACLsc,QAAQ,WACR7D,KAAK,WACL1O,MAAOzB,KAAKqS,MAAMhK,SAClBmN,SAAUxV,KAAKqS,MAAMkB,aACrBqnB,gBAAiB,CACbK,QAAQ,GAEZ/X,WAAY,kBAACtM,GAAA,EAAD,CAAMlD,UAAWD,EAAQ2hC,uBAAwBriC,QAAS/S,KAAKmmB,YAAatP,UAAWC,KAAYC,GAAI,CAACrJ,SAAU,gBAAlH,iCAGhB,kBAAC2xB,GAAA,EAAD,KACI,yBAAK3rB,UAAWD,EAAQ6hC,mBACpB,kBAAC,GAAD,CAAoB9uB,mBAzFpB,WAyFiE/rB,KAAK,yBAG1E,kBAACmb,GAAA,EAAD,CAAQ7C,QAAS/S,KAAKmmB,aAClB,0BAAMzS,UAAWD,EAAQ8hC,sBAAzB,WAGJ,yBAAK7hC,UAAWD,EAAQE,SACpB,kBAACiC,GAAA,EAAD,CACIE,MAAM,UACNpe,KAAK,SACLqb,QAAS/S,KAAK40C,YACd/+B,SAAUm/B,EACVthC,UAAWshC,EAAgB,GAAKvhC,EAAQ+hC,iBAL5C,aAYXx1C,KAAKqS,MAAMzd,iBAAmBT,EAAOE,OACtC,kBAACg2B,GAAA,EAAD,wCAGE,S,GA/GItU,aAwHX5D,gBA5KS,SAAC3a,EAAOwe,GAC5B,MAAO,CACHthB,kBAAmB8C,EAAM9C,kBACzBE,eAAgB4C,EAAM5C,eACtBC,eAAgB2C,EAAM3C,kBAwKUqd,GAAzBC,CAA6C8D,cA1J7C,SAAAC,GAAK,MAAK,CACrBvC,QAAS,CACL4B,OAAQW,EAAMd,QAAQ,GACtBqL,SAAU,YAGdwF,eAAgB,CACZxF,SAAU,WACV2F,IAAK,MACLC,KAAM,MACNjQ,WAAY,GACZkC,YAAa,IAGjBg9B,kBAAmB,CACf/8B,YAAa,QACbD,WAAY,QAGhB68B,cAAe,CACX/7B,gBAAiBzH,GAAOE,YAG5BujC,uBAAwB,CACpBt/B,MAAOnE,GAAOC,SAGlB2jC,qBAAsB,CAClBz/B,MAAO,YA8H6CG,CAAmB0+B,K,UCvLzEziC,GAAqB,CACvBujC,clEeyB,iBAAO,CAChC/9C,KPrB0B,oByE8Bfya,gBA/BS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CvgB,eAAgB+B,EAAM/B,eACtBC,gBAAiB8B,EAAM9B,mBA6Bawc,GAAzBC,CAA6C8D,cAtB7C,SAACC,GACZ,MAAQ,KAqBgDD,EAhBpC,SAAC5D,GACDA,EAAZoB,QACR,OAEI,kBAAC,IAAMwD,SAAP,KACI,kBAACy+B,GAAA,EAAD,CACIC,iBAAkB,KAClB79C,QAASua,EAAM3c,gBACfykB,QAAS9H,EAAMojC,cACfv7B,KAAM7H,EAAM5c,eACZsvC,aAAc,CAACE,WAAW,SAAUD,SAAS,c,UC+B9C/uB,iBAvDA,SAAAC,GAAK,MAAK,CACrB0/B,OAAQ,CACJx8B,gBAAiB,UACjBqH,SAAU,QACV2F,IAAK,EACLyvB,MAAO,EACPha,OAAQ,EACRxV,KAAM,EACNwc,QAAS,GACTjrB,QAAS,OACT1C,WAAY,SACZ2C,eAAgB,SAChB1B,MAAO,QACPmB,OAAQ,QACR+hB,OAAQ,MAGZyc,cAAe,CACXl+B,QAAS,OACTm+B,cAAe,SACfC,UAAW,SACXn+B,eAAgB,SAChBwhB,OAAQ,KACRwJ,QAAS,GAGboT,YAAa,CACT5c,OAAQ,IACRvjB,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,KAE7BvE,UAAW,OACXysB,QAAS,GAGbqT,QAAS,CACLrT,QAAS,MAoBF5sB,EAhBQ,SAAC5D,GAAW,IACvBoB,EAA4BpB,EAA5BoB,QAAS9d,EAAmB0c,EAAnB1c,eAEjB,OAAGA,GAAkBA,EAAe8G,OAE5B,yBAAKiX,UAAWD,EAAQmiC,QACpB,yBAAKliC,UAAWD,EAAQqiC,eACpB,kBAAC,GAAD,CAASpiC,UAAWD,EAAQyiC,QAASpgC,MAAOnE,GAAOC,QAASzB,KAAK,kBAAkBgmC,OAAO,YAC1F,kBAACpiC,GAAA,EAAD,CAAYC,QAAQ,KAAKN,UAAWD,EAAQwiC,aAActgD,KAI5D,MClCZuc,GAAqB,CACvBkkC,sBtEoCiC,iBAAO,CACxC1+C,KN5DoC,8B4E0BlC2+C,G,8MAEF7+C,MAAQ,CAEJgsB,SAAU,GACVnb,SAAU,I,EAIdkL,aAAe,SAACd,GACZ,EAAKe,SAAL,eAAgBf,EAAMC,OAAOvC,KAAOsC,EAAMC,OAAOjR,S,EAGrD60C,aAAe,WACX,EAAKzB,c,EAGTA,WAAa,WACT,EAAKrhC,SAAS,CACVgQ,SAAU,GACVnb,SAAU,KAEd,EAAKgK,MAAM+jC,yB,EAGfnpB,mBAAqB,SAACspB,GACf,EAAKlkC,MAAMlc,kBACV,EAAK0+C,c,0EAQT,OACI,kBAAC,IAAM59B,SAAP,KACI,kBAAC,GAAD,CAAa49B,WAAY70C,KAAK60C,WAAYrxB,SAAUxjB,KAAKxI,MAAMgsB,SAAUnb,SAAUrI,KAAKxI,MAAM6Q,SAAUkL,aAAcvT,KAAKuT,eAC3H,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAgB5d,eAAgBqK,KAAKqS,MAAM1c,sB,GAvCpBogB,aA6CxB5D,gBAtDS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1C7f,iBAAkBqB,EAAMrB,iBACxBR,eAAgB6B,EAAM7B,kBAoDcuc,GAAzBC,CAA6C8D,cA5D7C,SAAAC,GAAK,MAAK,CACrBsgC,YAAa,CACT5+B,QAAS,mBA0D2C3B,CAAmBogC,KCjEzEI,G,sLAEO,IACGhjC,EAAYzT,KAAKqS,MAAjBoB,QAER,OACI,yBAAKC,UAAWD,EAAQijC,gBACpB,yBACIr5B,IAAI,8BACJE,IAAI,mBACJjG,OAAO,MACPnB,MAAM,a,GAXAJ,aAkBXE,iBAxBA,SAAAC,GAAK,MAAK,CACrBwgC,eAAgB,CACZnhC,OAAQ,gBAsBDU,CAAmBwgC,I,kDCPnBE,GArBH,CAERC,QAAS,SAAA1gC,GAAK,gBACV0E,eAAgB,OAChBrC,YAAa,GACbgO,WAAY,oBACZzQ,MAAO,QACP,UAAW,CACPA,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,MAEjClE,SAAU,OACVuC,WAAY,IACZpB,QAAS,eACT9E,OAAQ,UACRgF,cAAe,SACf++B,cAAe,OAbL,2BAcE,KAdF,8BAeK,UAfL,IC8CZ3kC,GAAqB,CACvBjZ,UA6CWkZ,gBAlDS,SAAC3a,EAAOwe,GAAR,MAAsB,KAkDN9D,GAAzBC,CAA6C2kC,aAAW7gC,cA9ExD,SAACC,GAAD,MAAY,CACvB0gC,QAASG,GAAIH,QAAQ1gC,GAErBiZ,KAAM,CACFvX,QAAS,cACTE,cAAe,SACfhC,MAAOnE,GAAOC,SAGlBolC,SAAU,CACN3d,OAAQ,KACRjjB,UAAW,OACXD,MAAO,SAGX8gC,gBAAiB,CACbC,oBAAqB,EACrBrW,qBAAsB,EACtBznB,gBAAiB,WAGrB+9B,iBAAkB,CACdD,oBAAqB,EACrBrW,qBAAsB,EACtBznB,gBAAiB,YAsD8CnD,EA1C5C,SAAC5D,GAAW,IAC3BoB,EAAoCpB,EAApCoB,QAAS5d,EAA2Bwc,EAA3Bxc,KAAgBoD,GAAWoZ,EAArB3E,SAAqB2E,EAAXpZ,QADC,EAGFyjB,IAAMC,SAAS,MAHb,mBAG3BioB,EAH2B,KAGjBwS,EAHiB,KAS5BjxB,EAAc,WAClBixB,EAAY,OAGRC,EAA0C,mBAA7BtjD,OAAOC,SAAS0Z,SAAgC+F,EAAQ0jC,iBAAmB1jC,EAAQwjC,gBAEtG,OACI,kBAAC,IAAMhgC,SAAP,KACI,kBAAClD,GAAA,EAAD,CAAYC,QAAQ,UAAUN,UAAS,UAAKD,EAAQmjC,SAAW7jC,QAZnD,SAAAN,GAChB2kC,EAAY3kC,EAAM4xB,iBAYTxuC,EAAKsS,MAAOy8B,EAAW,kBAAC0S,GAAA,EAAD,CAAY5jC,UAAWD,EAAQ0b,KAAMrZ,MAAM,UAAUW,SAAS,UAAY,kBAACyG,GAAA,EAAD,CAAYxJ,UAAWD,EAAQ0b,KAAMrZ,MAAM,UAAUW,SAAS,WAEpK,kBAAC8gC,GAAA,EAAD,CAAQr9B,KAAMpmB,QAAQ8wC,GAAWA,SAAUA,EAAU4S,UAAMp1C,EAAWq1C,YAAU,EAAC/jC,UAAWD,EAAQujC,WAC/F,gBAAGU,EAAH,EAAGA,gBAAiBzkC,EAApB,EAAoBA,UAApB,OACG,kBAAC0kC,GAAA,EAAD,iBACID,EADJ,CAEA7kC,MAAO,CAAEqyB,gBAA+B,WAAdjyB,EAAyB,aAAe,mBAE9D,kBAACW,GAAA,EAAD,CAAOF,UAAW2jC,GACd,kBAACO,GAAA,EAAD,CAAmBC,YAAa1xB,GAC5B,kBAAC,KAAD,CAAUhuB,GAAG,kBACT,kBAACojC,GAAA,EAAD,CAAUxoB,QAASoT,EAAatP,UAAWD,KAAMG,GAAG,YAApD,WACA,kBAACwkB,GAAA,EAAD,CAAUxoB,QAASoT,EAAatP,UAAWD,KAAMG,GAAG,qBAApD,cACA,kBAACwkB,GAAA,EAAD,CAAUxoB,QAAS9Z,GAAnB,uBC7B9BiZ,GAAqB,CACvBjZ,UAgDWkZ,gBArDS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,QAoDwBqc,GAAzBC,CAA6C2kC,aAAW7gC,cAtFxD,SAACC,GAAD,gBACX0gC,QAASG,GAAIH,QAAQ1gC,GAErBiZ,KAAM,CACFvX,QAAS,cACTE,cAAe,WALR,qBAQL,CACFF,QAAS,cACTE,cAAe,SACfhC,MAAOnE,GAAOC,UAXP,yBAcD,CACNynB,OAAQ,KACRjjB,UAAW,OACXD,MAAO,UAjBA,gCAoBM,CACb+gC,oBAAqB,EACrBrW,qBAAsB,EACtBznB,gBAAiB,YAvBV,iCA0BO,CACd89B,oBAAqB,EACrBrW,qBAAsB,EACtBznB,gBAAiB,UA7BV,IAsFwDnD,EA7ClC,SAAC5D,GAAW,IACrCoB,EAAoCpB,EAApCoB,QAAS5d,EAA2Bwc,EAA3Bxc,KAD2B,GACAwc,EAArB3E,SAAqB2E,EAAXpZ,OAEDyjB,IAAMC,SAAS,OAHH,mBAGrCioB,EAHqC,KAG3BwS,EAH2B,KAKtCC,EAA0C,mBAA7BtjD,OAAOC,SAAS0Z,SAAgC+F,EAAQ0jC,iBAAmB1jC,EAAQwjC,gBAMhG9wB,EAAc,WAClBixB,EAAY,OAGd,OACI,kBAAC,IAAMngC,SAAP,KACI,kBAAClD,GAAA,EAAD,CAAYC,QAAQ,UAAUN,UAAS,UAAKD,EAAQmjC,SAAW7jC,QAVnD,SAAAN,GAChB2kC,EAAY3kC,EAAM4xB,iBASd,kBACoBO,EAAW,kBAAC0S,GAAA,EAAD,CAAY5jC,UAAWD,EAAQ0b,KAAMrZ,MAAM,UAAUW,SAAS,UAAY,kBAACyG,GAAA,EAAD,CAAYxJ,UAAWD,EAAQ0b,KAAMrZ,MAAM,UAAUW,SAAS,WAEvK,kBAAC8gC,GAAA,EAAD,CAAQr9B,KAAMpmB,QAAQ8wC,GAAWA,SAAUA,EAAU4S,UAAMp1C,EAAWq1C,YAAU,EAAC/jC,UAAWD,EAAQujC,WAC/F,gBAAGU,EAAH,EAAGA,gBAAiBzkC,EAApB,EAAoBA,UAApB,OACG,kBAAC0kC,GAAA,EAAD,iBACID,EADJ,CAEA7kC,MAAO,CAAEqyB,gBAA+B,WAAdjyB,EAAyB,aAAe,mBAE9D,kBAACW,GAAA,EAAD,CAAOF,UAAW2jC,GACd,kBAACO,GAAA,EAAD,CAAmBC,YAAa1xB,GAC5B,kBAAC,KAAD,CAAUhuB,GAAG,kBACT,kBAACojC,GAAA,EAAD,CAAUxoB,QAASoT,EAAatP,UAAWD,KAAMG,GAAG,yBAApD,mBACA,kBAACwkB,GAAA,EAAD,CAAUxoB,QAASoT,EAAatP,UAAWD,KAAMG,GAAG,kCAApD,eACA,kBAACwkB,GAAA,EAAD,CAAUxoB,QAASoT,EAAatP,UAAWD,KAAMG,GAAG,iCAApD,kBACClhB,GAAQA,EAAKiiD,uBACV,kBAACvc,GAAA,EAAD,CAAUxoB,QAASoT,EAAatP,UAAWD,KAAMG,GAAG,kCAApD,gC,oBC0BzB+/B,gBAAW7gC,cAtGX,SAAAC,GAAK,MAAK,CACrB6hC,SAAU,CACNjiC,MAAO,QACPhD,OAAQ,WAGZ4tB,WAAW,eACJqW,GAAIH,QAAQ1gC,GADT,CAENmB,QAAS,QAGb0gB,YAAa,CACT3e,gBAAiBzH,GAAOE,WACxB4J,YAAa,OAGjBu8B,SAAU,CACN,UAAW,CACPliC,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,UAoFf1E,EA/ED,SAAC5D,GAAW,IACzBoB,EAAiDpB,EAAjDoB,QAAS5d,EAAwCwc,EAAxCxc,KAAMygD,EAAkCjkC,EAAlCikC,aAAc98C,EAAoB6Y,EAApB7Y,gBADL,EAGMkjB,IAAMC,UAAS,GAHrB,mBAGzBs7B,EAHyB,KAGZC,EAHY,KAehC,OACI,kBAAC,IAAMjhC,SAAP,KACI,kBAACgG,GAAA,EAAD,CAAYlK,QAAS,kBAAMmlC,GAAe,IAAOxkC,UAAWD,EAAQitB,YAChE,kBAAC,KAAD,CAAMhtB,UAAWD,EAAQskC,YAG7B,kBAAClgB,GAAA,EAAD,CACIG,OAAO,MACP9d,KAAM+9B,EACN99B,QAAS,kBAAM+9B,GAAe,IAC9B99B,WAAY,CACR1G,UAAWD,EAAQskB,cAGvB,kBAACogB,GAAA,EAAD,KACI,kBAAC7oB,GAAA,EAAD,CAAUxJ,QAAM,EAACjP,UAAWD,KAAMG,GAAG,WAAWhE,QAAS,kBAAMmlC,GAAe,KAA9E,WAIA,kBAAC5oB,GAAA,EAAD,CAAUxJ,QAAM,EAACjP,UAAWD,KAAMG,GAAG,iBAAiBhE,QAAS,kBAAMmlC,GAAe,KAApF,iBAIA,kBAAC5oB,GAAA,EAAD,CAAUxJ,QAAM,EAACjP,UAAWD,KAAMG,GAAG,aAAahE,QAAS,kBAAMmlC,GAAe,KAAhF,aAIA,kBAAC5oB,GAAA,EAAD,CAAUxJ,QAAM,EAACjP,UAAWD,KAAMG,GAAG,kBAAkBhE,QAAS,kBAAMmlC,GAAe,KAArF,oBAIJ,kBAAChkC,GAAA,EAAD,MACCre,GACG,kBAACsiD,GAAA,EAAD,KACI,kBAAC7oB,GAAA,EAAD,CAAUxJ,QAAM,EAACjP,UAAWD,KAAMG,GAAG,WAAWhE,QAAS,kBAAMmlC,GAAe,KAA9E,WAIA,kBAAC5oB,GAAA,EAAD,CAAUxJ,QAAM,EAACjP,UAAWD,KAAMG,GAAG,oBAAoBhE,QAAS,kBAAMmlC,GAAe,KAAvF,cAIA,kBAAC5oB,GAAA,EAAD,CAAUxJ,QAAM,EAAC/S,QA/CX,WACtBujC,IACA4B,GAAe,KA6CC,aAMNriD,GACE,kBAACsiD,GAAA,EAAD,KACI,kBAAC7oB,GAAA,EAAD,CAAUxJ,QAAM,EAAC/S,QA5DZ,WACrBvZ,IACA0+C,GAAe,KA0DC,UAIA,kBAAC5oB,GAAA,EAAD,CAAUxJ,QAAM,EAACjP,UAAWD,KAAMG,GAAG,YAAYhE,QAAS,kBAAMmlC,GAAe,KAA/E,mBCrClBhmC,GAAqB,CACvB1Y,kBACAP,SACAU,2BACAC,eACAE,kBAGEs+C,G,YAEF,WAAY/lC,GAAO,IAAD,+BACd,8CAAMA,KASVgB,kBAAoB,WAChBtf,OAAOg8C,iBAAiB,SAAU,EAAKsI,eAXzB,EAclBA,aAAe,SAACvvC,GACZ,IAAIwvC,EAAIxvC,EAAE4J,OAAO6lC,WAEdD,EAAI,KAA6B,YAAtB,EAAK9gD,MAAMgoC,OACrB,EAAKhsB,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BgoC,OAAO,YAGjC8Y,GAAK,KAA6B,WAAtB,EAAK9gD,MAAMgoC,QAC3B,EAAKhsB,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BgoC,OAAO,cAtB3B,EA2BlBjsB,aAAe,SAACd,GACZ,EAAKe,SAAL,eAAgBf,EAAMC,OAAOvC,KAAOsC,EAAMC,OAAOjR,SA5BnC,EA+BlB60C,aAAe,WACX,EAAKzB,aACL,EAAKxiC,MAAMpZ,SACX,EAAKoZ,MAAM1Y,4BAlCG,EAqClBk7C,WAAa,WACT,EAAKrhC,SAAS,CACVgQ,SAAU,GACVnb,SAAU,MAtCd,EAAK7Q,MAAQ,CACTgsB,SAAU,GACVnb,SAAU,GACVm3B,OAAQzrC,OAAOwkD,YAAc,IAAM,UAAY,UALrC,E,wEA4CT,IAAD,SACyCv4C,KAAKqS,MAA1CoB,EADJ,EACIA,QAAS+kC,EADb,EACaA,QAAS3iD,EADtB,EACsBA,KAClB6X,GAFJ,EAC4B9X,SACX4iD,EAAQxkD,SAArB0Z,UAER,OACI,yBAAKgG,UAAS,UAAKD,EAAQglC,WAAb,YAAwC,mBAAb/qC,GAAiC+F,EAAQilC,iBAEpD,YAAtB14C,KAAKxI,MAAMgoC,OAEX,kBAAC,IAAMvoB,SAAP,KAEI,6BACI,kBAAClD,GAAA,EAAD,CAAYC,QAAQ,UAAUrG,KAAK,IAAIkJ,UAAU,IAAInD,UAAS,UAAKD,EAAQmjC,QAAb,YAAwBnjC,EAAQklC,oBAC1F,yBAAKt7B,IAAI,gCAAgClH,MAAM,KAAKoH,IAAI,YAAY7J,UAAWD,EAAQmlC,cAE3F,kBAAC7kC,GAAA,EAAD,CAAYC,QAAQ,UAAU+C,GAAG,WAAWF,UAAWD,KAAMlD,UAAWD,EAAQmjC,SAAhF,WACA,kBAAC7iC,GAAA,EAAD,CAAYC,QAAQ,UAAU+C,GAAG,iBAAiBF,UAAWD,KAAMlD,UAAWD,EAAQmjC,SAAtF,iBACA,kBAAC7iC,GAAA,EAAD,CAAYC,QAAQ,UAAU+C,GAAG,aAAaF,UAAWD,KAAMlD,UAAWD,EAAQmjC,SAAlF,aAEA,kBAAC,GAAD,OAIJ,yBAAKljC,UAAWD,EAAQolC,qBACpB,6BAEKhjD,GAAQ,kBAAC,GAAD,CAAoB6X,SAAUA,EAAU7X,KAAMA,KACrDA,GAAQ,kBAACke,GAAA,EAAD,CAAYC,QAAQ,UAAUjB,QAAS,kBAAM,EAAKV,MAAM7Y,mBAAmBka,UAAS,UAAKD,EAAQmjC,QAAb,YAAwBnjC,EAAQqlC,eAApH,WACRjjD,GAAQ,kBAACke,GAAA,EAAD,CAAYC,QAAQ,UAAU+C,GAAG,YAAYF,UAAWD,KAAMlD,UAAS,UAAKD,EAAQmjC,QAAb,YAAwBnjC,EAAQqlC,eAAvG,eAOtB,kBAAC,IAAM7hC,SAAP,KACI,kBAAClD,GAAA,EAAD,CAAYC,QAAQ,UAAUrG,KAAK,IAAIkJ,UAAU,IAAInD,UAAS,UAAKD,EAAQmjC,QAAb,YAAwBnjC,EAAQklC,oBAC1F,yBAAKt7B,IAAI,gCAAgClH,MAAM,KAAKoH,IAAI,YAAY7J,UAAWD,EAAQmlC,cAE3F,kBAAC,GAAD,CAAkBtC,aAAct2C,KAAKs2C,aAAc98C,gBAAiBwG,KAAKqS,MAAM7Y,gBAAiB3D,KAAMA,U,GArFtGkgB,aA8FT5D,gBA3GS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,KACZD,SAAU4B,EAAM5B,YAyGoBsc,GAAzBC,CAA6C2kC,aAAW7gC,cA3JxD,SAAAC,GAAK,MAAK,CAErB0iC,WAAY,CACR9gC,cAAe,SACfF,QAAS,gBAGb+gC,kBAAmB,CACf9B,cAAe,MACfj/B,QAAS,eACTW,YAAa,kBACbT,cAAe,UAGnB2gC,WAAY,CACRh4B,SAAU,QACVtK,MAAO,QACPiQ,IAAK,MACLhN,gBAAiB,cACjBigB,OAAQ,GACRhjB,WAAY,OACZoqB,cAAe,OACfhlB,YAAa,OACb5C,aAAc,OACduC,UAAW,OACXlC,UAAW,aACXtB,QAAS,OACTC,eAAgB,gBAChBg/B,cAAe,QAGnB6B,eAAgB,CACZt/B,gBAAiB,WAGrBy/B,oBAAqB,CACjBjhC,QAAS,OACTm+B,cAAe,SACfl+B,eAAgB,gBAGpB++B,QAASG,GAAIH,QAAQ1gC,GAErB4iC,aAAc,CACVvgC,YAAa,OA+GkDtC,CAAmBmiC,MCvKpFlmC,GAAqB,CACvB1Y,mBAmBW2Y,gBAhBS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,QAewBqc,GAAzBC,EAZD,SAACE,GAOX,OALAsE,qBAAU,WACFtE,EAAMxc,KACL9B,OAAOC,SAAS2Z,KAAO,WADZ0E,EAAM7Y,qBAKtB,M,UCLF0Y,GAAqB,CACvB6mC,0B9E4LqC,SAACC,EAAaC,EAAaz1B,GAA3B,MAAyC,CAC9E9rB,KNxJwC,+BMyJxCC,QAAS,CACL0Q,SAAU2wC,EACVC,cACAz1B,c8EhMJzpB,4BA0JWoY,gBAhKS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,QA+JwBqc,GAAzBC,CAA6C8D,cAvJ7C,SAAAC,GAAK,MAAK,CACrBmE,YAAa,CACTjB,gBAAiBzH,GAAOE,WACxB,4BAA6B,CACzB0D,OAAQ,IAIhB2jC,YAAa,CACT7hC,QAAS,cA8I2CpB,EArIrC,SAAC5D,GAAW,IACvBoB,EAAYpB,EAAZoB,QADsB,EAGgBiJ,IAAMC,SAAS,IAH/B,mBAGvBw8B,EAHuB,KAGNC,EAHM,OAIQ18B,IAAMC,SAAS,IAJvB,mBAIvBs8B,EAJuB,KAIVI,EAJU,OAKsB38B,IAAMC,SAAS,IALrC,mBAKvB28B,EALuB,KAKHC,EALG,KAOxBC,EAAmB1lD,QAXlB,2DAA2DqwB,KAWjB80B,KAAiBA,GAC5DQ,EAA0B3lD,SAASwlD,GAAsBA,IAAuBL,GAEhFS,EAAc,WAChBN,EAAmB,IACnBC,EAAe,IACfE,EAAsB,KAGpBpzB,EAAc,WAChB9T,EAAMtY,2BACN2/C,KAOEC,EAA0Bj9B,IAAM2mB,SAEhC3gB,EAAiB,SAAAjQ,GACD,UAAdA,EAAM/M,KACNi0C,EAAwB/2B,QAAQtT,SAIlCsqC,EAAmB9lD,SAASmlD,IAAgBK,IAAuBE,IAAqBC,GAE9F,OACI,kBAACx/B,GAAA,EAAD,CACIC,KAAM7H,EAAM6H,KACZC,QAASgM,EACT8uB,kBAAgB,oBAChB76B,WAAY,CACR1G,UAAWD,EAAQ4G,aAEvB66B,QAASwE,GAET,kBAACp/B,GAAA,EAAD,CAAaniB,GAAG,qBAAhB,mBACA,kBAACoiB,GAAA,EAAD,KACI,kBAAC8P,GAAA,EAAD,oDAIA,kBAACrV,GAAA,EAAD,CAAMC,WAAS,EAACvB,UAAWD,EAAQylC,aAC/B,kBAAClkC,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACI+K,WAAS,EACT9K,OAAO,SACPpd,GAAG,kBACH4qB,MAAM,mBACNrrB,KAAK,WACLsc,QAAQ,WACR7D,KAAK,kBACL1O,MAAO03C,EACP3jC,SAAU,SAAC1M,GAAD,OAAOswC,EAAmBtwC,EAAE4J,OAAOjR,QAC7Cm5B,gBAAiB,CACbK,QAAQ,GAEZW,WAAS,EACTxY,WAAYV,KAIpB,kBAAC1N,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACIC,OAAO,SACPpd,GAAG,cACH4qB,MAAM,eACNrrB,KAAK,WACLsc,QAAQ,WACR7D,KAAK,cACL1O,MAAOw3C,EACPzjC,SAAU,SAAC1M,GAAD,OAAOuwC,EAAevwC,EAAE4J,OAAOjR,QACzCm5B,gBAAiB,CACbK,QAAQ,GAEZW,WAAS,EACT5Y,OAAQw2B,EACRt2B,WAAas2B,EAAyF,GAAtE,oEAChCp2B,WAAYV,KAIpB,kBAAC1N,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACIC,OAAO,SACPpd,GAAG,qBACH4qB,MAAM,uBACNrrB,KAAK,WACLsc,QAAQ,WACR7D,KAAK,qBACL1O,MAAO63C,EACP9jC,SAAU,SAAC1M,GAAD,OAAOywC,EAAsBzwC,EAAE4J,OAAOjR,QAChDm5B,gBAAiB,CACbK,QAAQ,GAEZW,WAAS,EACT5Y,OAAQy2B,EACRv2B,WAAYu2B,EAA0B,GAAK,wBAC3Cr2B,WAAYV,MAKxB,kBAAC2c,GAAA,EAAD,KACI,kBAACzpB,GAAA,EAAD,CAAQ7C,QAAS,kBAAMoT,KAAerQ,MAAM,WAA5C,UAIA,kBAACF,GAAA,EAAD,CACIE,MAAM,UACN9B,QAAQ,YACRjB,QAnGE,WAClBV,EAAM0mC,0BAA0BI,EAAiBF,EAAa5mC,EAAMxc,KAAK2tB,WAmGzD3N,SAAU+jC,EACV7zB,IAAK4zB,GALT,kBC5IdznC,GAAqB,CACvB2nC,uB/EqMkC,SAAC1xC,EAAOE,EAAUmb,GAAlB,MAAgC,CAClE9rB,KN/JqC,4BMgKrCC,QAAS,CACLwQ,QACAE,WACAmb,c+EzMJxpB,yBAwJWmY,gBA9JS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,QA6JwBqc,GAAzBC,CAA6C8D,cArJ7C,SAAAC,GAAK,MAAK,CACrBmE,YAAa,CACTjB,gBAAiBzH,GAAOE,WACxB,4BAA6B,CACzB0D,OAAQ,IAIhB2jC,YAAa,CACT7hC,QAAS,cA4I2CpB,EApIrC,SAAC5D,GAAW,IACvBoB,EAAYpB,EAAZoB,QADsB,EAGEiJ,IAAMC,SAAS,IAHjB,mBAGvBtU,EAHuB,KAGbyxC,EAHa,OAIJp9B,IAAMC,SAAS,IAJX,mBAIvBxU,EAJuB,KAIhB4xC,EAJgB,OAKUr9B,IAAMC,SAAS,IALzB,mBAKvBq9B,EALuB,KAKTC,EALS,KAOxBP,EAAc,WAChBI,EAAY,IACZC,EAAS,IACTE,EAAgB,KAGd9zB,EAAc,WAChBuzB,IACArnC,EAAMrY,yBAOJkgD,EAAuBx9B,IAAM2mB,SAE7B3gB,EAAiB,SAAAjQ,GACD,UAAdA,EAAM/M,KACNw0C,EAAqBt3B,QAAQtT,SAI/B6qC,EAAarmD,QAlCL,SAACqU,GACf,MAAO,2DAA2Dgc,KAAKhc,GAiC5CiyC,CAAUjyC,KAAWA,GAC1CkyC,EAAoBvmD,SAASkmD,GAAgB7xC,IAAU6xC,GAEvDJ,EAAmB9lD,SAASqU,IAAU6xC,IAAiBG,IAAeE,GAE5E,OACI,kBAACpgC,GAAA,EAAD,CACIC,KAAM7H,EAAM6H,KACZC,QAASgM,EACT8uB,kBAAgB,oBAChB76B,WAAY,CACR1G,UAAWD,EAAQ4G,aAEvB66B,QAASwE,GAET,kBAACp/B,GAAA,EAAD,CAAaniB,GAAG,qBAAhB,gBACA,kBAACoiB,GAAA,EAAD,KACI,kBAAC8P,GAAA,EAAD,mEAIA,kBAACrV,GAAA,EAAD,CAAMC,WAAS,EAACvB,UAAWD,EAAQylC,aAC/B,kBAAClkC,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACI+K,WAAS,EACT9K,OAAO,SACPpd,GAAG,kBACH4qB,MAAM,WACNrrB,KAAK,WACLsc,QAAQ,WACR7D,KAAK,kBACL1O,MAAO4G,EACPmN,SAAU,SAAC1M,GAAD,OAAOgxC,EAAYhxC,EAAE4J,OAAOjR,QACtCm5B,gBAAiB,CACbK,QAAQ,GAEZ7X,WAAYV,EACZkZ,WAAS,KAIjB,kBAAC5mB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACIC,OAAO,SACPpd,GAAG,QACH4qB,MAAM,YACNrrB,KAAK,OACLsc,QAAQ,WACR7D,KAAK,QACL1O,MAAO0G,EACPqN,SAAU,SAAC1M,GAAD,OAAOixC,EAASjxC,EAAE4J,OAAOjR,QACnCm5B,gBAAiB,CACbK,QAAQ,GAEZW,WAAS,EACT5Y,OAAQm3B,EACRj3B,WAAai3B,EAAoD,GAAvC,wCAIlC,kBAACnlC,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACIC,OAAO,SACPpd,GAAG,eACH4qB,MAAM,gBACNrrB,KAAK,OACLsc,QAAQ,WACR7D,KAAK,eACL1O,MAAOu4C,EACPxkC,SAAU,SAAC1M,GAAD,OAAOmxC,EAAgBnxC,EAAE4J,OAAOjR,QAC1Cm5B,gBAAiB,CACbK,QAAQ,GAEZW,WAAS,EACTxY,WAAYV,EACZM,OAAQq3B,EACRn3B,WAAYm3B,EAAoB,GAAK,kCAK7C,kBAAChb,GAAA,EAAD,KACI,kBAACzpB,GAAA,EAAD,CAAQ7C,QAASoT,EAAarQ,MAAM,WAApC,UAIA,kBAACF,GAAA,EAAD,CACIE,MAAM,UACN9B,QAAQ,YACRjB,QArGF,WAClBV,EAAMwnC,uBAAuB1xC,EAAOE,EAAUgK,EAAMxc,KAAK2tB,WAqGrCuC,IAAKm0B,EACLrkC,SAAU+jC,GALd,kBCtIlB1nC,GAAqB,CACvBooC,0BhF4HqC,SAACryC,GAAD,MAAe,CACpDvQ,KN9GyC,gCM+GzCC,QAAS,CACLsQ,cgF9HJsyC,yB9EsBoC,iBAAO,CAC3C7iD,KP9BuC,gCqFQvC8iD,sB9E6BiC,iBAAO,CACxC9iD,KPnCoC,8BqF0DlC+iD,GAAiB,CACnB11B,UAAW,CACPhC,MAAM,aACN5S,KAAM,YACNzY,KAAM,OACNyrB,YAAa,8CAGjB6B,SAAU,CACNjC,MAAM,YACN5S,KAAM,WACNzY,KAAM,OACNyrB,YAAa,8CAGjB8B,UAAW,CACPlC,MAAM,YACN5S,KAAM,YACNzY,KAAM,OACNyrB,YAAa,qCAGjB+B,WAAY,CACRnC,MAAM,aACN5S,KAAM,aACNzY,KAAM,OACNyrB,YAAa,qCAGjBgC,QAAS,CACLpC,MAAM,UACN5S,KAAM,UACNzY,KAAM,OACNyrB,YAAa,sCAIfu3B,GAAc,SAAC7kD,GAAD,MAAW,CAC3B8kD,UAAU,EACV51B,UAAW,CACPtjB,MAAO5L,EAAKkvB,UACZ9B,OAAO,GAGX+B,SAAU,CACNvjB,MAAO5L,EAAKmvB,SACZ/B,OAAO,GAEXgC,UAAW,CACPxjB,MAAO5L,EAAKovB,WAAa,GACzBhC,OAAO,GAEXiC,WAAY,CACRzjB,MAAO5L,EAAKqvB,YAAc,GAC1BjC,OAAO,GAEXkC,QAAS,CACL1jB,MAAO5L,EAAKsvB,SAAW,GACvBlC,OAAO,GAEX9a,MAAO,CACH1G,MAAO5L,EAAKsS,OAAS,GACrB8a,OAAO,KAIT23B,G,YAEF,WAAYvoC,GAAO,IAAD,EAEd,OAFc,sBACd,8CAAMA,KAUVkB,aAAe,SAACd,GACZ,IAAIoS,EAAWpS,EAAMC,OAAOjR,MACxBqjB,EAAYrS,EAAMC,OAAOvC,KACzB8S,EAAQ,EAAK43B,iBAAiB/1B,EAAWD,GAC7C,EAAKrR,SAAL,eACO,EAAKhc,MADZ,aAEIsjD,gBAAgB,GACfh2B,EAAY,CACTrjB,MAAOojB,EACP5B,aApBM,EAyBlBgK,mBAAqB,SAACC,GACfA,EAAUr3B,OAAS,EAAKwc,MAAMxc,MAC7B,EAAK2d,SAAL,eAAkB,EAAKhc,MAAvB,GAAiCkjD,GAAY,EAAKroC,MAAMxc,SA3B9C,EA+BlBglD,iBAAmB,SAAC/1B,EAAWD,GAC3B,IAAIpjB,EAAQojB,EAASjd,OACjBkc,EAAU,KAEd,OAAOgB,GACH,IAAK,YAGL,IAAK,WACDhB,EAAU,oBACV,MACJ,IAAK,QACDA,EAAU,2DACV,MACJ,IAAK,YAGL,IAAK,aAGL,IAAK,UACDA,EAAU,aAKlB,OAAOA,EAAQK,KAAK1iB,IAzDN,EA4DlBs5C,WAAa,WACT,EAAKvnC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BmjD,UAAU,MA7D1B,EAgElBK,aAAe,WACX,EAAKxnC,SAAL,eAAkBknC,GAAY,EAAKroC,MAAMxc,MAAzC,CAAgD8kD,UAAU,EAAOG,gBAAgB,MAjEnE,EAoElBG,cAAgB,WACZ,EAAK5oC,MAAMioC,0BAA0B,CACjCv1B,UAAW,EAAKvtB,MAAMutB,UAAUtjB,MAAMmG,OACtCod,SAAU,EAAKxtB,MAAMwtB,SAASvjB,MAAMmG,OACpCqd,UAAW,EAAKztB,MAAMytB,UAAUxjB,MAAMmG,OACtCsd,WAAY,EAAK1tB,MAAM0tB,WAAWzjB,MAAMmG,OACxCud,QAAS,EAAK3tB,MAAM2tB,QAAQ1jB,MAAMmG,UAxElCyK,EAAMxc,MAEV,EAAK2B,MAAL,eACOkjD,GAAYroC,EAAMxc,MADzB,CAEI8kD,UAAU,EACVG,gBAAgB,IAPN,GAEE,gB,wEA4EX,IAAD,OACJ,IAAI96C,KAAKqS,MAAMxc,KAEX,OADA9B,OAAOC,SAAS2Z,KAAO,SAChB,GAHP,MAMsH3N,KAAKqS,MAAvHoB,EANJ,EAMIA,QAASje,EANb,EAMaA,wBAAyBD,EANtC,EAMsCA,2BAA4BglD,EANlE,EAMkEA,yBAA0BC,EAN5F,EAM4FA,sBAN5F,EAOiCx6C,KAAKxI,MAAlCmjD,EAPJ,EAOIA,SAAUG,EAPd,EAOcA,eACdI,GAAc,EAMlB,OAJA31C,OAAO1N,KAAK4iD,IAAgB76B,SAAQ,SAACu7B,GAC7B,EAAK3jD,MAAM2jD,GAAUl4B,QAAOi4B,GAAc,MAI9C,kBAAC,IAAMjkC,SAAP,KACI,kBAAC,GAAD,CACIiD,KAAM3kB,EACN6lD,MAAO,kBAAM,EAAK5nC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B6jD,0BAA0B,QAEzE,kBAACC,GAAD,CACIphC,KAAM1kB,EACN4lD,MAAO,kBAAM,EAAK5nC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B+jD,uBAAuB,QAGtE,kBAAC3nC,GAAA,EAAD,CAAOF,UAAWD,EAAQ+nC,aAAc1nC,UAAW,GAC/C,kBAACC,GAAA,EAAD,CAAYC,QAAQ,KAAKQ,MAAM,OAAOd,UAAWD,EAAQwM,QAAzD,WAIA,kBAACjN,GAAA,EAAD,CAASE,MAAM,oBACX,kBAAC+J,GAAA,EAAD,CAAYvJ,UAAWD,EAAQgoC,WAAY3lC,MAAM,UAAU/C,QAAS/S,KAAK+6C,WAAY/8B,oBAAkB,EAACD,eAAa,GAC7G,kBAAC29B,GAAA,EAAD,QAIZ,kBAAC1mC,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAS,GAEjB7P,OAAO1N,KAAK4iD,IAAgB13C,KAAI,SAACo4C,EAAUxmC,GAAX,OAC5B,kBAACK,GAAA,EAAD,CAAMtP,IAAKiP,EAAOU,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,GAC/B,kBAACrmC,GAAA,EAAD,CACInF,KAAMgrC,EACNp4B,MAAO03B,GAAeU,GAAUp4B,MAChCthB,MAAO,EAAKjK,MAAM2jD,GAAU15C,MAC5BuhB,OAAQ,EAAKxrB,MAAM2jD,GAAUl4B,MAC7BC,WAAY,EAAK1rB,MAAM2jD,GAAUl4B,MAAQ,GAAKw3B,GAAeU,GAAUh4B,YACvEzd,IAAKiP,EACLa,SAAU,EAAKjC,aACf4nB,WAAY,CACRygB,UAAWjB,GAEf/f,gBAAiB,CACbK,QAAQ,GAEZvnB,UAAWD,EAAQ+O,gBAMnC,kBAACxN,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,KAKjBqhC,GACE,kBAAC3lC,GAAA,EAAD,CAAMtB,UAAWD,EAAQooC,WAAY5mC,WAAS,GACtC,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACsmC,GAAI,EAAGriC,IAAI,IACtB,kBAACtE,GAAA,EAAD,CAAMK,MAAI,EAACsmC,GAAI,EAAGriC,GAAI,GAClB,kBAAC1D,GAAA,EAAD,CAAQ7C,QAAS/S,KAAKg7C,cAAtB,WAIJ,kBAAChmC,GAAA,EAAD,CAAMK,MAAI,EAACsmC,GAAI,EAAGriC,GAAI,GAClB,kBAAC1D,GAAA,EAAD,CACI7C,QAAS/S,KAAKi7C,cACdjnC,QAAQ,YACR8B,MAAM,UACND,UAAWilC,IAAmBI,GAJlC,cAcpB,kBAACtnC,GAAA,EAAD,CAAOF,UAAWD,EAAQqoC,aAAchoC,UAAW,GAC/C,kBAACC,GAAA,EAAD,CAAYC,QAAQ,KAAKQ,MAAM,OAAOd,UAAWD,EAAQwM,QAAzD,WAGA,kBAACjL,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACInF,KAAK,QACL4S,MAAO,QACPthB,MAAOzB,KAAKxI,MAAM2Q,MAAM1G,MACxB05B,WAAY,CACRygB,UAAU,GAEdhhB,gBAAiB,CACbK,QAAQ,GAEZvnB,UAAWD,EAAQ+O,YAEvB,kBAACxP,GAAA,EAAD,CAASE,MAAM,gBACX,kBAAC+J,GAAA,EAAD,CACInH,MAAM,UACNkI,oBAAkB,EAClBD,eAAa,EACbhL,QAAS,kBAAMynC,MAEf,kBAACkB,GAAA,EAAD,SAKZ,kBAAC1mC,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,IACX,kBAAChE,GAAA,EAAD,CACInF,KAAK,WACL4S,MAAO,WACPthB,MAAO,WACP05B,WAAY,CACRygB,UAAU,GAEdhhB,gBAAiB,CACbK,QAAQ,GAEZvnB,UAAWD,EAAQ+O,YAEvB,kBAACxP,GAAA,EAAD,CAASE,MAAM,mBACX,kBAAC+J,GAAA,EAAD,CACInH,MAAM,UACNkI,oBAAkB,EAClBD,eAAa,EACbhL,QAAS,kBAAMwnC,MAEf,kBAACmB,GAAA,EAAD,gB,GA1Nd3lC,aAuOP5D,gBAvWS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,KACZN,2BAA4BiC,EAAMjC,2BAClCC,wBAAyBgC,EAAMhC,2BAoWK0c,GAAzBC,CAA6C8D,cA3V7C,SAAAC,GAAK,MAAK,CACrBslC,aAAc,CACV,4BAA6B,CACzBrlC,MAAO,QAEXA,MAAO,QACPZ,OAAO,GAAD,OAAKW,EAAMd,QAAQ,IAAnB,kBACNiB,WAAYH,EAAMd,QAAQ,GAC1BqrB,cAAevqB,EAAMd,QAAQ,IAGjC0mC,aAAc,CACV,4BAA6B,CACzB3lC,MAAO,QAEXA,MAAO,QACPZ,OAAO,GAAD,OAAKW,EAAMd,QAAQ,GAAnB,kBACNiB,WAAYH,EAAMd,QAAQ,GAC1BqrB,cAAevqB,EAAMd,QAAQ,IAGjCoN,UAAW,CACPjN,OAAQW,EAAMd,QAAQ,GACtBe,MAAO,MACPiC,SAAU,qBAGdyjC,WAAY,CACRzlC,UAAWF,EAAMd,QAAQ,IAG7BqmC,WAAY,CACR7P,MAAO,QACPh0B,QAAS,eACTxB,UAAW,SAGf6J,OAAQ,CACJxE,YAAavF,EAAMd,QAAQ,GAC3BwC,QAAS,eACTxB,UAAW,OACXw1B,MAAO,QAGXmQ,kBAAmB,CACfnQ,MAAO,OACPx1B,UAAW,UA6SyCH,CAAmB2kC,K,ICrVhE3kC,cA3BA,SAACC,GAAD,MAAY,CACvBrC,KAAM,CACFuC,UAAW,OACXwB,QAAS,QAGbokC,iBAAkB,CACd3kC,QAAS,UACT9B,OAAQ,0BAmBDU,EAfY,SAAC5D,GAAW,IAC3BoB,EAAYpB,EAAZoB,QAER,OACI,yBAAKC,UAAWD,EAAQI,MACpB,kBAACD,GAAA,EAAD,CAAOF,UAAWD,EAAQuoC,iBAAkBloC,UAAW,GACnD,kBAACC,GAAA,EAAD,CAAYC,QAAQ,SAApB,kKACmK,kBAAC4C,GAAA,EAAD,CAAMlE,OAAO,SAAS/E,KAAK,kFAA3B,QADnK,U,kBCvBVsuC,GAAS,SAACx6C,GACZ,OAAIA,GAAmB,IAAVA,EACV7D,MAAM6D,IAAoB,KAAVA,EAAqB,wBAAxC,EADiC,MAqB/By6C,GAAW,SAACz6C,GACd,GAAa,OAAVA,QAA4BW,IAAVX,GAAiC,KAAVA,EAAc,MAAO,qBAG/DhF,GAAS,SAACuH,EAAKD,GACjB,OAAO,SAACtC,GACJ,GAAGA,EAAQuC,GAAOvC,EAAQsC,EACtB,MAAM,WAAN,OAAkBC,EAAlB,eAA4BD,EAA5B,2BAUNo4C,GADS,CAAC,cAAe,QAAS,gBACnBp5C,KAAI,SAAA+F,GAAC,OAAIA,EAAEszC,iBAC1BC,GAAcF,GAAMp8C,KAAK,MACzBu8C,GAAW,IAAIl8C,IAAI+7C,IASnBI,GADe,CAAC,UAAW,YAAa,UAAW,kBAAmB,0BAA2B,oCAAqC,YAAa,uCAAwC,oBAAqB,WAAY,6BACjMx5C,KAAI,SAAA+F,GAAC,OAAIA,EAAEszC,iBACtCI,GAAiB,IAAIp8C,IAAIm8C,IASzBE,GADW,CAAC,YAAa,UAAW,QAAS,iBAAkB,MAAO,eAAgB,UAAW,QAAS,UAAW,MAAO,SAAU,gBAAiB,MAAO,UAAW,cAAe,aACrK15C,KAAI,SAAA+F,GAAC,OAAIA,EAAEszC,iBAC9BM,GAAa,IAAIt8C,IAAIq8C,IAQrBE,GAAe,SAACl7C,KAIhBm7C,GAAS,SAACn7C,GACZ,OAAIA,GAAmB,IAAVA,EAKF,+BAJP,GA2BFjG,GAbsB,CACxB,YACA,oBACA,oBACA,sBACA,YACA,sBACA,cACA,gBACA,YACA,eAG2CuH,KAAI,SAAA+F,GAAC,OAAIA,EAAEszC,iBACpDS,GAAuB,IAAIz8C,IAAI5E,IAsB/B+C,GAfuB,CACzB,gBACA,aACA,QACA,SACA,UACA,SACA,YACA,sBACA,aACA,oBACA,aACA,cAG6CwE,KAAI,SAAA+F,GAAC,OAAIA,EAAEszC,iBACtDU,GAAyB,IAAI18C,IAAI7B,IAmBxB,IACXiD,KAAM,CAAC06C,GArIO,SAACz6C,GACf,OAAIA,GAAmB,IAAVA,GAG6I,IAAvJ,uIAAuI0iB,KAAK1iB,GACpI,6CADX,EAHiC,OAqIjCT,IAAK,CAACi7C,GAAQC,GA9ID,SAACz6C,GACd,GAAGA,GAAS,IAAMA,EAAQ,GAAI,MAAO,sBA8IrCN,IAAK,CAAC86C,GAAQC,GA3ID,SAACz6C,GACd,GAAGA,GAAS,KAAOA,EAAQ,IAAK,MAAO,wBA2IvC6B,MAAO,CAAC24C,GAnHK,SAACx6C,GACd,GAAGA,EAAQ,EAAG,MAAO,sBAkGR,SAACA,GACd,GAAGA,EAAQ,KACP,MAAO,iCAgBXs7C,mBAAoB,CAACJ,GAAclgD,GAAO,EAAG,KAC7CugD,kBAAmB,CAACvgD,GAAO,EAAG,MAC9BwgD,gBAAiB,CAACxgD,GAAO,EAAG,KAC5BygD,qBAAsB,CAfN,SAACz7C,GACjB,IAAK,sDAAsD0iB,KAAK1iB,GAC5D,MAAO,iCAcX07C,aAAc,CAACjB,GAhHD,SAACz6C,GACf,GAAGA,GAAmB,IAAVA,IAAgB66C,GAASpwB,IAAIzqB,EAAM26C,eAC3C,MAAM,0BAAN,OAAiCC,MA+GrCe,eAAgB,CAAC3gD,GAAO,EAAG,KAC3B4gD,oBAAqB,CAAC5gD,GAAO,EAAG,MAChC6gD,wBAAyB,CAAC7gD,GAAO,EAAG,MACpC8gD,gBAAiB,CAAC9gD,GAAO,EAAG,MAC5B+gD,oBAAqB,CAAC/gD,GAAO,GAAI,MACjCghD,mBAAoB,CAAChhD,GAAO,EAAG,MAC/BihD,YAAa,CAACd,IACde,cAAe,CAhFA,SAACl8C,GAChB,IAAK,2DAA2D0iB,KAAK1iB,GACjE,MAAO,kCA+EX,0BAA2B,GAE3Bm8C,eAAgB,CAACjB,GAAclgD,GAAO,EAAG,KACzCohD,cAAe,CAACphD,GAAO,EAAG,MAC1BqhD,WAAY,CAAC5B,GAzGG,SAACz6C,GACjB,GAAGA,GAAmB,IAAVA,IAAgBi7C,GAAWxwB,IAAIzqB,EAAM26C,eAC7C,MAAM,qBAAN,OAA4BK,GAAQ18C,KAAK,SAwG7Cg+C,SAAU,CAAC7B,IACX8B,gBAAiB,CAAC9B,GAlES,SAACz6C,GAC5B,GAAGA,GAAmB,IAAVA,IAAgBo7C,GAAqB3wB,IAAIzqB,EAAM26C,eACvD,MAAM,qBAAN,OAA4B5gD,GAAmBuE,KAAK,SAiExDk+C,iBAAkB,CAAC/B,GA5CS,SAACz6C,GAC7B,GAAGA,GAAmB,IAAVA,IAAgBq7C,GAAuB5wB,IAAIzqB,EAAM26C,eACzD,MAAM,qBAAN,OAA4B79C,GAAoBwB,KAAK,SA2CzDm+C,eAAgB,CAAChC,GAvHG,SAACz6C,GACrB,GAAGA,GAAmB,IAAVA,IAAgB+6C,GAAetwB,IAAIzqB,EAAM26C,eACjD,MAAM,qBAAN,OAA4BG,GAAYx8C,KAAK,SAsHjDo+C,UAAW,CAACvB,IACZwB,aAAc,IC5KH,YAAC38C,EAAO48C,GACnB,IAAIC,EAAY,GACZC,EAAaC,GAAOH,GAYxB,OAVGE,GACCA,EAAW3+B,SAAQ,SAAA6+B,GACf,IAAIxwC,EAASwwC,EAAKh9C,GAEfwM,GACCqwC,EAAU3hD,KAAKsR,MAKpBqwC,GCbLI,GAAiB,IAAIt+C,IAAI,CAAC,OAAQ,MAAO,MAAO,UAEhDu+C,GAAgB,SAAC,GAAiD,IAA/C9hD,EAA8C,EAA9CA,KAAyB+hD,GAAqB,EAAxCC,kBAAwC,EAArBD,gBAQpBr5C,OAAO1N,KAAKgF,EAAK,IAAIuhB,QAAO,SAAA1Y,GAAG,OAAKg5C,GAAexyB,IAAIxmB,MACzD,IAAItF,IAAIw+C,EAAe77C,KAAI,SAAA+F,GAAC,OAAIA,EAAE80C,oBAGxDkB,GAAY,SAACC,GAEf,IAAIC,EAAQ,GAoBZ,OAlBAD,EAAKn/B,SAAQ,SAAC7e,EAAKvE,GACf,IAAIyiD,EAAW,GAED15C,OAAO1N,KAAKkJ,GAElB6e,SAAQ,SAACy+B,GACb,IAAIC,EAAYY,GAAUn+C,EAAIs9C,GAAMA,GAEjCC,EAAU7hD,SACTwiD,EAASZ,GAAOC,MAIrB/4C,OAAO1N,KAAKonD,GAAUxiD,SACrBuiD,EAAMxiD,GAAKyiD,MAIZD,GAII,YAACxnD,GAAW,IACfqF,EAA4CrF,EAA5CqF,KAAMgiD,EAAsCrnD,EAAtCqnD,kBAAmBD,EAAmBpnD,EAAnBonD,eASjC,MAPa,CACTO,SAAUR,GAAcnnD,GACxBqF,KAAMiiD,GAAUjiD,GAChBgiD,kBAAmBC,GAAUD,GAC7BD,eAAgBE,GAAUF,KC+CnBQ,ICpDAnpC,cAtCA,SAACC,GAAD,MAAY,CAEvBmpC,kBAAmB,CACflpC,MAAO,OACPZ,OAAQ,uBAkCDU,EA7BQ,SAAC5D,GAAW,IACvBoB,EAAgCpB,EAAhCoB,QAAS6rC,EAAuBjtC,EAAvBitC,OAAQC,EAAeltC,EAAfktC,WAEzB,OACI,kBAAC3rC,GAAA,EAAD,CAAOF,UAAWD,EAAQ4rC,mBACtB,kBAACtrC,GAAA,EAAD,KACKurC,EAAOC,IAAeD,EAAOC,GAAYznD,SAG9C,kBAACmlB,GAAA,EAAD,CACIlK,QAASV,EAAMmtC,aACf19C,KAAK,QACL+T,SAAU/hB,QAAuB,IAAfyrD,IAElB,kBAAC5nB,GAAA,EAAD,OAGJ,kBAAC1a,GAAA,EAAD,CACIlK,QAASV,EAAMotC,YACf39C,KAAK,QACL+T,SAAU/hB,QAAQyrD,IAAeD,EAAO7iD,OAAS,IAEjD,kBAAC2gB,GAAA,EAAD,W,YDhCZ,WAAY/K,GAAO,IAAD,6BACiBA,EAAMsH,QAA7B+lC,EADM,EACNA,YAAaC,EADP,EACOA,MACbC,EAAavtC,EAAbutC,SACA7/B,EAAU1N,EAAMwN,OAAhBE,MAHM,OAId,8CAAM1N,KAcVkB,aAAe,SAACzK,GAAO,IACXrH,EAAUqH,EAAE4J,OAAZjR,MAEJ69C,EAASJ,GAAUz9C,EAAO,EAAK4Q,MAAMwN,OAAOE,OAChD,EAAKvM,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BiK,QAAO69C,aAtBvB,EAyBlBO,iBAAmB,WACf,EAAKC,SAASl9B,QAAQm9B,QACtB,EAAKD,SAASl9B,QAAQ/S,SACtBsY,YAAW,WACP,EAAK3U,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BwoD,UAAU,OACzC,KA9BW,EAiClBC,gBAAkB,WACX,EAAKzoD,MAAMwoD,UACV,EAAK3tC,MAAM6tC,eA9Bf,EAAKJ,SAAWpjC,IAAM+G,YACtB,EAAK08B,WAAa9tC,EAAM8tC,WACxB,EAAK3oD,MAAQ,CACTiK,MAAO4Q,EAAM5Q,OAAS,GACtB69C,OAAQI,EAAYC,GAAOC,IAAaF,EAAYC,GAAOC,GAAU7/B,GAAS2/B,EAAYC,GAAOC,GAAU7/B,GAAS,GACpHigC,UAAU,GAVA,E,0EAed,OAAOhgD,KAAKmgD,WAAWngD,KAAKxI,MAAMiK,S,+BAwB5B,IACE69C,EAAWt/C,KAAKxI,MAAhB8nD,OAER,OACI,yBACIzsC,MAAO,CACHuF,SAAU,QACV7C,OAAQ,WAGZ,kBAACqiC,GAAA,EAAD,CAAmBC,YAAa73C,KAAKigD,iBACjC,6BACI,2BACIG,WAAW,QACXr6B,IAAK/lB,KAAK8/C,SACVr+C,MAAOzB,KAAKxI,MAAMiK,MAClB+T,SAAUxV,KAAKuT,aACfV,MAAO,CACHuG,gBAAiB,cACjBtD,MAAO,QACPwB,OAAQ,OACRoiB,OAAO,kBACPve,aAAc,MACd9D,QAAS,UACTe,SAAU,UAIdknC,EAAOv8C,KAAI,SAACs9C,EAAK7jD,GACb,OACI,uBACIkJ,IAAKlJ,EACLqW,MAAO,CACHytC,WAAY,IACZ/qC,OAAQ,WACR6F,UAAW,OACXhD,SAAU,OACVJ,WAAY,aAGfqoC,a,GAhFd3jC,IAAM3G,YEuGlBqpC,G,YApGX,WAAY/sC,GAAO,IAAD,6BACiBA,EAAMsH,QAA7B+lC,EADM,EACNA,YAAaC,EADP,EACOA,MACbC,EAAavtC,EAAbutC,SACA7/B,EAAU1N,EAAMwN,OAAhBE,MAHM,OAId,8CAAM1N,KAcVkB,aAAe,SAACzK,GAAO,IACXrH,EAAUqH,EAAE4J,OAAZjR,MAEJ69C,EAASJ,GAAUz9C,EAAO,EAAK4Q,MAAMwN,OAAOE,OAChD,EAAKvM,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BiK,QAAO69C,aAtBvB,EAyBlBO,iBAAmB,WACf,EAAKC,SAASl9B,QAAQm9B,QACtB,EAAKD,SAASl9B,QAAQ/S,SACtBsY,YAAW,WACP,EAAK3U,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BwoD,UAAU,OACzC,KA9BW,EAiClBC,gBAAkB,WACX,EAAKzoD,MAAMwoD,UACV,EAAK3tC,MAAM6tC,eAnCD,EAuClBK,QAAU,kBAAM,GAlCZ,EAAKT,SAAWpjC,IAAM+G,YACtB,EAAK08B,WAAa9tC,EAAM8tC,WACxB,EAAK3oD,MAAQ,CACTiK,MAAO4Q,EAAM5Q,OAAS,GACtB69C,OAAQI,EAAYC,GAAOC,IAAaF,EAAYC,GAAOC,GAAU7/B,GAAS2/B,EAAYC,GAAOC,GAAU7/B,GAAS,GACpHigC,UAAU,GAVA,E,0EAed,OAAOhgD,KAAKmgD,WAAWngD,KAAKxI,MAAMiK,S,+BA0B5B,IACE69C,EAAWt/C,KAAKxI,MAAhB8nD,OADH,EAEuBt/C,KAAKqS,MAAzBwN,EAFH,EAEGA,OAEF2gC,EAJD,EAEW7mC,QAES8mC,eAAe5gC,EAAOE,OAE/C,OACI,yBACIlN,MAAO,CACH0C,OAAQ,SACRY,MAAO,OACPkB,QAAS,OACTC,OAAQ,SAGZ,kBAACsgC,GAAA,EAAD,CAAmBC,YAAa73C,KAAKigD,iBACjC,6BACI,8BACIlB,KAAMyB,EACNE,KAAK,KACLN,WAAW,QACXr6B,IAAK/lB,KAAK8/C,SACVr+C,MAAOzB,KAAKxI,MAAMiK,MAClB+T,SAAUxV,KAAKuT,aACfV,MAAO,CACHuG,gBAAiB,cACjBtD,MAAO,QAEP4jB,OAAO,aAAD,OAAe/nB,GAAOC,SAC5BuJ,aAAc,MACd9D,QAAS,aAKbioC,EAAOv8C,KAAI,SAACs9C,EAAK7jD,GACb,OACI,uBACIkJ,IAAKlJ,EACLqW,MAAO,CACHytC,WAAY,IACZ/qC,OAAQ,WACR6F,UAAW,OACXhD,SAAU,OACVJ,WAAY,aAGfqoC,a,GAzFd3jC,IAAM3G,WC+HlBqpC,G,YA9HX,WAAY/sC,GAAO,IAAD,6BACiBA,EAAMsH,QAA7B+lC,EADM,EACNA,YAAaC,EADP,EACOA,MACbC,EAAavtC,EAAbutC,SACA7/B,EAAU1N,EAAMwN,OAAhBE,MAHM,OAId,8CAAM1N,KAcVkB,aAAe,SAACzK,GAAO,IACXrH,EAAUqH,EAAE4J,OAAZjR,MAEJ69C,EAASJ,GAAUz9C,EAAO,EAAK4Q,MAAMwN,OAAOE,OAChD,EAAKvM,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BiK,QAAO69C,aAtBvB,EAyBlBO,iBAAmB,WACf,EAAKC,SAASl9B,QAAQm9B,QACtB53B,YAAW,WACP,EAAK3U,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BwoD,UAAU,OACzC,KA7BW,EAgClBC,gBAAkB,WACX,EAAKzoD,MAAMwoD,UACV,EAAK3tC,MAAM6tC,eAlCD,EAsClBK,QAAU,kBAAM,GAjCZ,EAAKT,SAAWpjC,IAAM+G,YACtB,EAAK08B,WAAa9tC,EAAM8tC,WACxB,EAAK3oD,MAAQ,CACTiK,MAAO4Q,EAAM5Q,OAAS,GACtB69C,OAAQI,EAAYC,GAAOC,IAAaF,EAAYC,GAAOC,GAAU7/B,GAAS2/B,EAAYC,GAAOC,GAAU7/B,GAAS,GACpHigC,UAAU,GAVA,E,0EAed,OAAOhgD,KAAKmgD,WAAWngD,KAAKxI,MAAMiK,S,+BAyB5B,IACE69C,EAAWt/C,KAAKxI,MAAhB8nD,OADH,EAEuBt/C,KAAKqS,MAAzBwN,EAFH,EAEGA,OAEF8gC,EAJD,EAEWhnC,QAEKinC,cAAc/gC,EAAOE,OAAOhd,KAAK,SAAC+F,EAAGtM,GAAJ,OAClD,4BACIkJ,IAAKlJ,EACLiF,MAAOqH,EACP4K,UAAU,+BACVb,MAAO,CACHuG,gBAAiB,YAGpBtQ,MAQT,OAJA63C,EAAKhkD,KACD,4BAAQ+I,IAAKi7C,EAAKlkD,OAAQoZ,UAAQ,EAAChD,MAAO,CAAC+E,QAAS,QAASnW,MAAM,MAInE,yBACIoR,MAAO,CACH0C,OAAQ,SACRY,MAAO,OACPkB,QAAS,OACTC,OAAQ,OACRc,SAAU,UAGd,kBAACw/B,GAAA,EAAD,CAAmBC,YAAa73C,KAAKigD,iBACjC,6BACI,4BACIl6B,IAAK/lB,KAAK8/C,SACVr+C,MAAOzB,KAAKxI,MAAMiK,MAClB+T,SAAUxV,KAAKuT,aACfV,MAAO,CACHuG,gBAAiB,cACjBtD,MAAO,QAEP4jB,OAAO,aAAD,OAAe/nB,GAAOC,SAC5BuJ,aAAc,MACd9D,QAAS,YAIZspC,GAGDrB,EAAOv8C,KAAI,SAACs9C,EAAK7jD,GACb,OACI,uBACIkJ,IAAKlJ,EACLqW,MAAO,CACHytC,WAAY,IACZ/qC,OAAQ,WACR6F,UAAW,OACXhD,SAAU,OACVJ,WAAY,aAGfqoC,MAMjB,uBACIxtC,MAAO,CACHytC,WAAY,IACZ/qC,OAAQ,YACR6F,UAAW,OACXhD,SAAU,OACVJ,WAAY,aANpB,yEAS2E,KAAK,uBAAGnF,MAAO,CAACiD,MAAMnE,GAAOC,QAASgJ,eAAgB,QAASjN,KAAK,sCAA/D,+BAThF,Y,GA7GG+O,IAAM3G,WCC3B8qC,GAAe,SAAC,GAAgB,IAAfh8B,EAAc,EAAdA,SACnB,OAAQA,GAAyB,IAAbA,EAAwBi8B,OAAOj8B,GAAd,MAGnC5G,GAAa,CACfphB,KAAM,CACF,CACIqhB,WAAY,OACZnB,MAAO,QAGX,CACImB,WAAY,WACZnB,MAAO,MACPgkC,YAAaF,IAGjB,CACI3iC,WAAY,YACZnB,MAAO,MACPgkC,YAAaF,IAGjB,CACI3iC,WAAY,QACZnB,MAAO,QACPgkC,YAAaF,KAIrBhC,kBAAmB,CACf,CACI3gC,WAAY,aACZnB,MAAO,qBACPikC,YAAY,EACZ3iC,aAAc,sBAGlB,CACIH,WAAY,YACZnB,MAAO,oBACPikC,YAAY,EACZ3iC,aAAc,oBACd4iC,WAAY,wBAGhB,CACI/iC,WAAY,UACZnB,MAAO,kBACPikC,YAAY,GAIhB,CACI9iC,WAAY,eACZnB,MAAO,uBACPikC,YAAY,GAGhB,CACI9iC,WAAY,OACZnB,MAAO,eACPikC,YAAY,EACZC,WAAY,sBAGhB,CACI/iC,WAAY,SACZnB,MAAO,iBACPikC,YAAY,GAGhB,CACI9iC,WAAY,wBACZnB,MAAO,0BACPikC,YAAY,EACZ3iC,aAAc,0BACd4iC,WAAY,wBAGhB,CACI/iC,WAAY,cACZnB,MAAO,sBACPikC,YAAY,EACZC,WAAY,wBAGhB,CACI/iC,WAAY,kBACZnB,MAAO,0BACPikC,YAAY,EACZ3iC,aAAc,0BACd4iC,WAAY,wBAGhB,CACI/iC,WAAY,gBACZnB,MAAO,gBACPikC,YAAY,GAGhB,CACI9iC,WAAY,UACZnB,MAAO,kBACPikC,YAAY,EACZ3iC,aAAc,kBACd4iC,WAAY,wBAGhB,CACI/iC,WAAY,cACZnB,MAAO,sBACPikC,YAAY,EACZ3iC,aAAc,sBACd4iC,WAAY,wBAGhB,CACI/iC,WAAY,aACZnB,MAAO,qBACPikC,YAAY,EACZ3iC,aAAc,qBACd4iC,WAAY,wBAGhB,CACI/iC,WAAY,cACZnB,MAAO,cACPgkC,YAAaF,KAIrBjC,eAAgB,CACZ,CACI1gC,WAAY,aACZnB,MAAO,iBACPikC,YAAY,EACZ3iC,aAAc,kBAGlB,CACIH,WAAY,YACZnB,MAAO,gBACPikC,YAAY,EACZ3iC,aAAc,gBACd4iC,WAAY,wBAGhB,CACI/iC,WAAY,SACZnB,MAAO,aACPikC,YAAY,EACZC,WAAY,sBAGhB,CACI/iC,WAAY,OACZnB,MAAO,WACPikC,YAAY,GAGhB,CACI9iC,WAAY,qBACZnB,MAAO,kBACPikC,YAAY,EACZC,WAAY,sBAGhB,CACI/iC,WAAY,sBACZnB,MAAO,mBACPikC,YAAY,EACZC,WAAY,sBAGhB,CACI/iC,WAAY,aACZnB,MAAO,iBACPikC,YAAY,EACZC,WAAY,sBAGhB,CACI/iC,WAAY,YACZnB,MAAO,YACPikC,YAAY,GAGhB,CACI9iC,WAAY,WACZnB,MAAO,eACPikC,YAAY,EACZ3iC,aAAc,eACd4iC,WAAY,yBA7DJ,IAiER/iC,WAAY,UACZnB,MAAO,cACPsB,aAAc,cACd2iC,YAAY,GApEJ,8BAqEM,eArEN,4BAsEI,wBAtEJ,MAyGLE,G,8MA5BXhhC,OAAS,WAAO,IACJihC,EAAgB,EAAK9uC,MAArB8uC,YAER,OACI,kBAAC,eAAD,CACIC,iBAAiB,EACjBC,eAAgB,EAAKhvC,MAAMgvC,eAC3BpjC,WAAYA,GAAWkjC,EAAYxB,OACnCjhC,cAAe,EAAKrM,MAAMivC,iBAC1BzgC,QAAS,EAAKxO,MAAMwO,QACpBtB,YAAa,EAAKlN,MAAMkN,YAExBuB,+BAA+B,EAC/BygC,wBAAwB,EACxBxgC,yBAAyB,EACzBC,qBAAqB,EACrBwgC,mBAAoB,EAAKnvC,MAAMovC,uBAC/B9nC,QAASwnC,EACTx/B,oBAAqB,CACjBy9B,gBACAsC,sBACAC,4B,8BAvBSjlC,IAAMklC,eCvNpB,YAAC/kD,EAAMsiD,GAElB,IAAI0C,EAAShlD,EAAK,GAAG2E,KAGrB,GAAG,uIAAuI2iB,KAAK09B,GAC3I,OAAOhlD,EAGX,IAAIilD,MAAc3C,EAAS4C,UAAU,IAAIC,SAAS,IAAIC,SAElDvqD,SAAcmqD,EAElB,IACgB,WAATnqD,EACIoqD,EACCjlD,EAAK+iB,SAAQ,SAAA9W,GACTA,EAAEtH,KAAO,IAAIG,KAAyB,OAAlBmH,EAAEtH,KAAQ,OAAc,IAAQ,UAA+BK,cAAczJ,MAAM,GAAI,MAK/GyE,EAAK+iB,SAAQ,SAAA9W,GACTA,EAAEtH,KAAO,IAAIG,KAAyB,OAAlBmH,EAAEtH,KAAQ,OAAc,KAAOK,cAAczJ,MAAM,GAAI,MAOnFyE,EAAK+iB,SAAQ,SAAA9W,GACTA,EAAEtH,KAAO,IAAIG,KAAKmH,EAAEtH,MAAMK,cAAczJ,MAAM,GAAI,MAK9D,SACI,OAAOyE,EAGX,OAAOA,GCxCI,YAACoD,EAAUk/C,GACtB,IAAI0C,EAAS5hD,EAAS,GAClBvI,SAAcmqD,EAAO3E,qBAErB4E,MAAc3C,EAAS4C,UAAU,IAAIC,SAAS,IAAIC,SAEtD,IAGYJ,EAAO3E,qBAFH,WAATxlD,EACIoqD,EAC+B,IAAIngD,KAA8C,OAAvCkgD,EAAO3E,qBAAwB,OAAc,IAAQ,UAA+Br7C,cAAczJ,MAAM,GAAI,IAIvH,IAAIuJ,KAA8C,OAAvCkgD,EAAO3E,qBAAwB,OAAc,KAAOr7C,cAAczJ,MAAM,GAAI,IAK3F,IAAIuJ,KAAKkgD,EAAO3E,sBAAsBr7C,cAAczJ,MAAM,GAAI,IAIpG,SACI,OAAO6H,EAKX,IAFA,IAAIiiD,EAAY,eAAOL,GA1BY,WA4B3BrlD,GACJ+I,OAAO1N,KAAKgqD,GAAQjiC,SAAQ,SAAA9W,GACrB7I,EAASzD,GAAGsM,KACXo5C,EAAap5C,IAAM,OACnBo5C,EAAap5C,IAAM7I,EAASzD,GAAGsM,QAJnCtM,EAAI,EAAGA,EAAIyD,EAASxD,OAAQD,IAAK,EAAjCA,GASR,MAAO,CAAC0lD,ICRNhwC,GAAqB,CACvBtY,eACAsR,iBxFV4B,SAACrS,GAAD,MAAW,CACvCnB,KLd6B,oBKe7BC,QAAS,CACLkB,UwFQJgB,oBACA8P,uBxF0BkC,SAAChR,GAAD,MAAmB,CACrDjB,KL9CqC,4BK+CrCC,QAAS,CACLgB,kBwF5BJ0C,wBAuGEolD,GAAiB,CACnBrC,aAAc,EACd+D,YAAa,EACbtE,cAAe,EACfJ,mBAAoB,EACpBD,oBAAqB,GACrBF,wBAAyB,EACzB,0BAA2B,EAC3BN,kBAAmB,EACnBO,gBAAiB,EACjBF,oBAAqB,GAGnBuD,GAAgB,CAClB3C,iBAAkB,CACd,gBACA,aACA,QACA,SACA,UACA,SACA,YACA,sBACA,aACA,oBACA,aACA,cAGJC,eAAgB,CACZ,UACA,YACA,UACA,kBACA,0BACA,oCACA,YACA,uCACA,oBACA,WACA,6BAGJJ,WAAY,CACR,YACA,UACA,QACA,iBACA,MACA,eACA,UACA,QACA,UACA,MACA,SACA,gBACA,MACA,UACA,cACA,aAGJE,gBAAiB,CACb,YACA,oBACA,oBACA,sBACA,YACA,sBACA,cACA,gBACA,YACA,eAGJb,aAAc,CACV,cACA,QACA,iBAKFiF,GAAkB,CACpB,GAIA,CACIr/B,MAAO,OACP48B,MAAO,QAGX,CACI58B,MAAO,mBACP48B,MAAO,qBAGX,CACI58B,MAAO,oBACP48B,MAAO,mBAIT0C,G,8MAEFC,eAAiB,SAACvjC,GACd,IAAIhe,EAAMge,EAAOvC,KAAK+lC,WAClBxiC,EAAQhB,EAAOc,OAAOE,MACpB4/B,EAAU5gC,EAAOpF,QAAjBgmC,MAEFz+B,EAAS,GAYb,OAJG,EAAK1pB,MAAMkoD,aAAe,EAAKloD,MAAMkoD,YAAYC,IAAU,EAAKnoD,MAAMkoD,YAAYC,GAAO5+C,IAAQ,EAAKvJ,MAAMkoD,YAAYC,GAAO5+C,GAAKgf,KACnImB,EAAOhG,UAAY,yCAGhBgG,G,EAGX1pB,MAAQ,CACJgrD,eAAgB,EAChB3pD,KAAM,KACNgE,KAAM,KACNgiD,kBAAmB,KACnBD,eAAgB,KAChBW,WAAY,EACZG,YAAa,KACb4B,iBAAkB,CACdmB,SAAU,GACV9jC,WAAW,EACXg8B,UAAU,EACV/7B,UAAW,EAAK0jC,eAChBrB,WAAY,eACZ9qC,MAAO,M,EAIfusC,eAAiB,SAAC55C,GACdA,EAAEsnB,kB,EAGNuyB,iBAAmB,WACf,EAAKtwC,MAAMhX,oBAAoB,MAC/B,EAAKgX,MAAMmmC,QAAQ77C,KAAK,CAAE+Q,SAAU,iCAAkCrT,MAAO,KAC7E,EAAKmZ,SAAL,eACO,EAAKhc,MADZ,CAEIqF,KAAM,KACNgiD,kBAAmB,KACnBD,eAAgB,KAChBW,WAAY,M,EAKpBqD,2BAA6B,SAACJ,GAC1B,EAAKhvC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BgrD,mBAAiB,EAAKnjC,QAAQI,qB,EAGhEgiC,uBAAyB,YAAkD,IAAD,EAA/C7B,EAA+C,EAA/CA,SAAU/6B,EAAqC,EAArCA,SAAUhF,EAA2B,EAA3BA,OAAQrD,EAAmB,EAAnBA,KAC7CmjC,EADgE,EAAbhmC,QACnDgmC,MAEFkD,EAAW3D,GAAUr6B,EAAUhF,EAAOE,OAEtC2/B,EAAW,eAAO,EAAKloD,MAAMkoD,aAE7BA,EAAYC,GAAOC,KAAWF,EAAYC,GAAOC,GAAY,IAEjEF,EAAYC,GAAZ,YAAyB,EAAKnoD,MAAMkoD,YAAYC,IAE7CkD,EAASpmD,OACRijD,EAAYC,GAAOC,GAAU//B,EAAOE,OAAS8iC,SACnCnD,EAAYC,GAAOC,GAAU//B,EAAOE,OAE9Cxa,OAAO1N,KAAK6nD,EAAYC,GAAOC,IAAWnjD,SAC1CijD,EAAYC,GAAOC,GAAY,MAGnC,IAAIkD,EAAO,sBAAO,EAAKtrD,MAAMmoD,GAAOvnD,MAAM,EAAGwnD,IAAlC,CAA6CpjC,EAAK3f,MAAlD,YAA2D,EAAKrF,MAAMmoD,GAAOvnD,MAAMwnD,EAAW,KACzG,EAAKpsC,SAAL,eAAkB,EAAKhc,OAAvB,mBAA+BmoD,EAAQmD,GAAvC,4BAAgDpD,GAAhD,KAA8D,WAC1D,EAAKrgC,QAAQ0jC,iB,EAIrBC,eAAiB,SAACnqD,GACd,IAAIuO,EAAS,IAAI67C,WAEjB77C,EAAO87C,OAAS,SAACrqD,GACb,IAAIsqD,EAAW,IAAIC,WAAWvqD,EAAK6Z,OAAOzE,QACtCkxC,EAAWkE,KAAKn8C,KAAKi8C,EAAU,CAACzrD,KAAM,UAE1C,GAAIynD,EAASmE,OAAT,KAKC,GAAKnE,EAASmE,OAAT,kBAKL,GAAInE,EAASmE,OAAT,kBAKJ,CACD,IAAIC,EAAQF,KAAKG,MAAMC,cAActE,EAASmE,OAAT,KAAyB,CAACI,OAAQ,OACnE7mD,EAAO8mD,GAAgBJ,EAAOpE,GAE9ByE,EAAqBP,KAAKG,MAAMC,cAActE,EAASmE,OAAT,kBAAsC,CAACI,OAAQ,OAC7F7E,EAAoBgF,GAA2BD,EAAoBzE,GAEnEP,EAAiByE,KAAKG,MAAMC,cAActE,EAASmE,OAAT,eAAmC,CAACI,OAAQ,OAEtFhE,EAAcoE,GAAoB,CAACjnD,OAAMgiD,oBAAmBD,mBAEhE,EAAKprC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BqF,OAAMgiD,oBAAmBD,iBAAgBc,cAAa8C,eAAgB,UAfpG,EAAKnwC,MAAMzY,aAAa,2DACxB,EAAK+oD,wBANL,EAAKtwC,MAAMzY,aAAa,2DACxB,EAAK+oD,wBANL,EAAKtwC,MAAMzY,aAAa,8CACxB,EAAK+oD,oBA4Bbx6B,YAAW,WACPp0B,OAAO20C,uBAAsB,kBAAM,EAAKr2B,MAAMxY,kBAAkB,SACjE,IAEHuN,EAAO28C,kBAAkBlrD,I,EAG7BmrD,WAAa,SAACl7C,GACVA,EAAEsnB,iBACF,IAAIv3B,EAAOiQ,EAAEm7C,aAAaxyB,MAAM,GAAGyyB,YACnC,EAAK7xC,MAAMxY,kBAAkB,oBAC7B,EAAKwY,MAAMhX,oBAAoBxC,I,EAGnCsrD,iBAAmB,SAACr7C,GAChB,IAAIjQ,EAAOiQ,EAAE4J,OAAO0xC,MAAM,GAC1B,EAAK/xC,MAAMxY,kBAAkB,oBAC7B,EAAKwY,MAAMhX,oBAAoBxC,I,EAGnCwrD,iBAAmB,WACf,EAAK7wC,SAAS,K,EAGlB8wC,uBAAyB,WACrB,IAAInF,EAAWkE,KAAKG,MAAMe,WAC1BlB,KAAKG,MAAMgB,kBAAkBrF,EAAUkE,KAAKG,MAAMiB,cAAc,EAAKjtD,MAAMqF,MAAO,QAClFwmD,KAAKG,MAAMgB,kBAAkBrF,EAAUkE,KAAKG,MAAMiB,cAAc,EAAKjtD,MAAMqnD,mBAAoB,qBAC/FwE,KAAKG,MAAMgB,kBAAkBrF,EAAUkE,KAAKG,MAAMiB,cAAc,EAAKjtD,MAAMonD,gBAAiB,kBAE5F,IAAI8F,EAAUrB,KAAK57C,MAAM03C,EAAU,CAACwF,SAAS,OAAQjtD,KAAK,UACtDmB,EAAO,IAAIqY,KAAK,CAACwzC,GAAV,UAAuB,EAAKltD,MAAMqnD,kBAAkB,GAAG9B,mBAAvD,UACX,EAAK1qC,MAAMnH,iBAAiBrS,I,EAGhC0mB,YAAc,SAACR,GACX,EAAKM,QAAUN,EAAOpZ,IACtB,EAAK6Z,UAAYT,EAAOS,UACxB,EAAKH,QAAQI,oB,EAGjB4hC,eAAiB,SAACtiC,GACX,EAAKM,SAAgE,SAArD+iC,GAAgB,EAAK5qD,MAAMgrD,gBAAgB7C,OAC1D,EAAKtgC,QAAQI,oB,EAIrBmlC,aAAe,SAACjwC,GACZ,EAAK0K,QAAQwlC,mBAAmBlwC,EAAO,W,EAO3C8qC,YAAc,WACV,IAAIH,EAAS/5C,OAAO6hB,OAAO,EAAK5vB,MAAMkoD,YAAY7iD,KAAKyiD,QACvD,EAAK9rC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B+nD,WAAY,EAAK/nD,MAAM+nD,WAAa,KAClE,EAAKqF,aAAatF,EAAO,EAAK9nD,MAAM+nD,WAAa,GAAGx+C,M,EAGxDy+C,aAAe,WACX,IAAIF,EAAS/5C,OAAO6hB,OAAO,EAAK5vB,MAAMkoD,YAAY7iD,KAAKyiD,QACvD,EAAK9rC,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B+nD,WAAY,EAAK/nD,MAAM+nD,WAAa,KAClE,EAAKqF,aAAatF,EAAO,EAAK9nD,MAAM+nD,WAAa,GAAGx+C,M,EAGxD+jD,eAAiB,WAQb,IAPA,IAAIC,EAAc,EAAK1lC,QAAQ2lC,iBACzBrF,EAAUyC,GAAgB,EAAK5qD,MAAMgrD,gBAArC7C,MACAD,EAAgB,EAAKloD,MAArBkoD,YAEFuF,EAAQF,EAAcA,EAAYnF,SAAW,EAC7CsF,EAAgB,IAAVD,EAAcvF,EAAYC,GAAOljD,OAASwoD,EAAQ,EAEpDzoD,EAAIyoD,EAAOzoD,IAAM0oD,EAAK1oD,IAAI,CAC9B,GAAGkjD,EAAYC,GAAOnjD,GAAG,CACrB,IAAI3E,EAAO0N,OAAO1N,KAAK6nD,EAAYC,GAAOnjD,IAM1C,OALA,EAAK6iB,QAAQ8lC,oBAAoBttD,EAAK,SACtC,EAAKwnB,QAAQ+lC,iBAAiB,CAC1BxF,SAAUpjD,EACV6oD,OAAQxtD,EAAK,KAKlB2E,IAAMkjD,EAAYC,GAAOljD,SACxBD,GAAK,GAIb,EAAK6V,MAAMzY,aAAX,6BAA8C+lD,K,EAGlDtsC,kBAAoB,WAChB,IAAI1a,EAAe,IAAI2sD,gBAAgBvxD,OAAOC,SAASg9B,QAAQ/6B,IAAI,gBAChE0C,GACC,EAAK0Z,MAAM1I,uBAAuBhR,I,EAI1Cs0B,mBAAqB,SAACC,EAAWC,GAC1BD,EAAU71B,iBAAmB,EAAKgb,MAAMhb,gBAAgD,OAA9B,EAAKgb,MAAMhb,gBACpE,EAAK2rD,eAAe,EAAK3wC,MAAMhb,iB,EAIvC6oB,OAAS,WAAO,IACJzM,EAAY,EAAKpB,MAAjBoB,QACA+uC,EAAmB,EAAKhrD,MAAxBgrD,eAEF7C,EAAQyC,GAAgBI,GAAgB7C,MAE9C,OACI,kBAAC,IAAM1oC,SAAP,KAEI,kBAAClD,GAAA,EAAD,CAAYL,UAAWD,EAAQ8xC,UAA/B,aAEI,kBAAC3uC,GAAA,EAAD,CACIjJ,KAAK,kFACL63C,SAAS,uBACT9xC,UAAWD,EAAQgyC,cAHvB,gBAFJ,qCASwC,kBAAC7uC,GAAA,EAAD,CAAMlD,UAAWD,EAAQgyC,aAAc5uC,UAAWC,KAAYC,GAAG,yBAAjE,yBATxC,KAYA,kBAACnD,GAAA,EAAD,CAAOF,UAAS,UAAKD,EAAQiyC,gBAAb,aAAiC,EAAKluD,MAAMqB,MAAQ4a,EAAQkyC,WAAaC,WAAY,EAAKlD,eAAgBmD,OAAQ,EAAK7B,YAE/H,EAAK3xC,MAAMhb,eACX,kBAAC,IAAM4f,SAAP,KACI,kBAACgG,GAAA,EAAD,CAAYvJ,UAAWD,EAAQqyC,cAAehwC,MAAM,UAAU/C,QAAS,EAAK4vC,iBAAkB3kC,oBAAkB,EAACD,eAAa,GAC1H,kBAAC+tB,GAAA,EAAD,OAGJ,kBAAC/3B,GAAA,EAAD,CAAYL,UAAWD,EAAQsyC,4BAA/B,sBACuB,0BAAMryC,UAAWD,EAAQnZ,UAAW,EAAK+X,MAAMhb,eAAe8Y,OAGrF,kBAAC4D,GAAA,EAAD,CAAYL,UAAWD,EAAQsyC,4BAC1B3D,GAAgBI,GAAgBz/B,OAGrC,kBAAC/P,GAAA,EAAD,CAASE,MAAM,kBACX,yBAAKQ,UAAWD,EAAQuyC,KACpB,kBAAC/oC,GAAA,EAAD,CACInb,KAAK,QACLiR,QAAS,kBAAM,EAAK6vC,2BAA2B,EAAKprD,MAAMgrD,eAAiB,IAC3E3sC,SAAU/hB,QAAQ,EAAK0D,MAAMgrD,gBAAkB,IAE/C,kBAAC7qB,GAAA,EAAD,SAKZ,kBAAC3kB,GAAA,EAAD,CAASE,MAAM,cACX,yBAAKQ,UAAWD,EAAQuyC,KACpB,kBAAC/oC,GAAA,EAAD,CACInb,KAAK,QACLiR,QAAS,kBAAM,EAAK6vC,2BAA2B,EAAKprD,MAAMgrD,eAAiB,IAC3E3sC,SAAU/hB,QAAQ,EAAK0D,MAAMgrD,gBAAkB,IAE/C,kBAACplC,GAAA,EAAD,UAShB,kBAAC,IAAMnG,SAAP,KACI,kBAAClD,GAAA,EAAD,CAAYC,QAAQ,MAApB,mBAGI,2BAAOknB,QAAQ,qBACX,kBAACtlB,GAAA,EAAD,CAAQ5B,QAAQ,YAAY8B,MAAM,UAAUe,UAAU,OAAOnD,UAAWD,EAAQqS,QAAhF,iBAMR,2BACItQ,SAAU,EAAK2uC,iBACfzwC,UAAWD,EAAQ+lB,MACnBysB,OAAO,QACP9tD,GAAG,oBACHT,KAAK,WAQjB5D,QAAQ,EAAK0D,MAAMqF,OACnB,kBAAC,IAAMoa,SAAP,KAQI,kBAACrB,GAAA,EAAD,CACI5B,QAAQ,YACRjB,QAAS,EAAK+xC,eACdhvC,MAAM,UACNpC,UAAWD,EAAQyyC,gBAJvB,eASA,kBAACtyC,GAAA,EAAD,CAAOF,UAAWD,EAAQ0yC,SAAW,sBAEhCryD,QAAQ,EAAK0D,MAAMqF,MAAQ,EAAKrF,MAAMqF,KAAKJ,SACxC,kBAAC,GAAD,CACI8iB,YAAa,EAAKA,YAClBsB,QAAS,EAAKrpB,MAAMmoD,GACpB2B,iBAAkB,EAAK9pD,MAAM8pD,iBAE7BG,uBAAwB,EAAKA,uBAC7BN,YAAa,CAACxB,QAAOD,YAAa,EAAKloD,MAAMkoD,YAAae,kBAAgBG,kBAC1ES,eAAgB,EAAKA,mBASrC,kBAACzrC,GAAA,EAAD,CAAQ5B,QAAQ,YAAY8B,MAAM,UAAUpC,UAAWD,EAAQ2yC,aAAcrzC,QAAS,EAAKuxC,wBAA3F,Y,8BApWS5nC,IAAM3G,WA6WpB5D,gBArkBS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1C3e,eAAgBG,EAAMH,kBAokBc6a,GAAzBC,CAA6C2kC,aAAW7gC,cAzjBxD,SAACC,GAAD,MAAY,CACvBmS,MAAO,CACHlS,MAAO,OAEPZ,OAAO,aAGX8wC,WAAY,CACR3sB,OAAQ,gBACRvjB,MAAO,QACPmB,OAAQ,QACR/B,OAAO,aAGXikB,MAAO,CACH5hB,QAAS,QAGbkO,OAAQ,CACJhQ,MAAO,QACPoM,cAAe,OACftK,QAAS,QACTQ,SAAU,QACV7C,OAAQ,sBAGZgwC,SAAU,CACN3Z,MAAO,OACP91B,MAAO,QACPP,OAAQ,gBACR+wC,cAAe,UAGnBb,aAAc,CACVa,cAAe,SACfxwC,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,MAGjC+qC,gBAAgB,aACZnwC,OAAQ,sBACR6C,SAAU,OACVf,QAAS,QAHE,UAIF,QAGbsuC,UAAW,CACPjsB,OAAO,cAAD,OAAgBxjB,EAAMwE,QAAQ9I,QAAQ+I,OAGhDrgB,SAAU,CACNwb,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,KAC7B2rC,cAAe,UAGnBR,cAAe,CACXla,MAAO,QACPx1B,UAAW,QACXmC,YAAa,QAGjBguC,UAAW,CACPnuC,SAAU,OACV7C,OAAQ,oBAGZixC,aAAc,CACVpuC,SAAU,OACV7C,OAAQ,aAGZ6wC,aAAc,CACVtwC,MAAO,SAGXqwC,SAAU,CACN/tC,SAAU,OACVd,OAAQ,OACR/B,OAAQ,oBAGZ8pC,kBAAmB,CACflpC,MAAO,OACPZ,OAAQ,oBAGZwwC,2BAA4B,CACxBO,cAAe,UAGnBN,IAAK,CACDpuC,QAAS,gBAGbsuC,eAAgB,CACZhkC,cAAe,OACf3L,aAAc,WA0diDN,CAAmBosC,MCxe3EpsC,iBA9GA,SAACC,GAAD,MAAY,CACvBuwC,WAAY,CACR3wC,MAAO,QACPM,UAAWF,EAAMd,QAAQ,GACzBmB,aAAcL,EAAMd,QAAQ,GAC5B4D,WAAY,KAGhB0tC,aAAc,CACV5wC,MAAO,QACPK,MAAO,OACPmC,WAAY,OACZC,YAAa,OACbhC,aAAcL,EAAMd,QAAQ,GAC5BiC,QAASnB,EAAMd,QAAQ,IAG3BuxC,cAAe,CACX7wC,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,MAGjCisC,eAAgB,CACZtuC,WAAYpC,EAAMd,QAAQ,GAC1BgB,UAAWF,EAAMd,QAAQ,IAG7BuC,SAAU,CACNN,QAASnB,EAAMd,QAAQ,IAG3ByxC,gBAAiB,CACb1wC,MAAO,OACPL,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,KAC7BrC,WAAY,OACZC,YAAa,OACbhC,aAAcL,EAAMd,QAAQ,IAC5BiC,QAASnB,EAAMd,QAAQ,OA0EhBa,EAtES,SAAC5D,GAAW,IACxBoB,EAAYpB,EAAZoB,QAER,OACI,kBAAC,IAAMwD,SAAP,KACI,kBAAClD,GAAA,EAAD,CAAYC,QAAQ,KAAKN,UAAWD,EAAQgzC,YAA5C,2BAIA,kBAAC7yC,GAAA,EAAD,CAAOF,UAAWD,EAAQizC,aAAc5yC,UAAW,GAC/C,kBAACkB,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAGjoC,UAAWD,EAAQkE,UACzC,kBAAC5D,GAAA,EAAD,CAAYC,QAAQ,KAAKQ,MAAM,OAAOd,UAAWD,EAAQkzC,eAAzD,4BAIA,kBAAC5yC,GAAA,EAAD,CAAYS,MAAM,OAAOR,QAAQ,QAAQN,UAAWD,EAAQmzC,gBAA5D,kEAIA,kBAAC7yC,GAAA,EAAD,CAAYS,MAAM,OAAOR,QAAQ,QAAQN,UAAWD,EAAQmzC,gBAA5D,4DAKJ,kBAAC5xC,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAGjoC,UAAWD,EAAQkE,UACzC,yBAAK4F,IAAI,OAAOpH,MAAM,OAAOkH,IAAI,sCAK7C,kBAACzJ,GAAA,EAAD,CAAOF,UAAWD,EAAQizC,aAAc5yC,UAAW,GAC/C,kBAACkB,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAGjoC,UAAWD,EAAQkE,UACzC,yBAAK4F,IAAI,OAAOpH,MAAM,OAAOkH,IAAI,oCAGrC,kBAACrI,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAGjoC,UAAWD,EAAQkE,UACzC,kBAAC5D,GAAA,EAAD,CAAYC,QAAQ,KAAKQ,MAAM,OAAOd,UAAWD,EAAQkzC,eAAzD,4BAIA,kBAAC5yC,GAAA,EAAD,CAAYS,MAAM,OAAOR,QAAQ,QAAQN,UAAWD,EAAQmzC,gBAA5D,+FAOZ,kBAAChzC,GAAA,EAAD,CAAOF,UAAWD,EAAQizC,aAAc5yC,UAAW,GAC/C,kBAACkB,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAGjoC,UAAWD,EAAQkE,UACzC,kBAAC5D,GAAA,EAAD,CAAYC,QAAQ,KAAKQ,MAAM,OAAOd,UAAWD,EAAQkzC,eAAzD,4BAIA,kBAAC5yC,GAAA,EAAD,CAAYS,MAAM,OAAOR,QAAQ,QAAQN,UAAWD,EAAQmzC,gBAA5D,oCAKJ,kBAAC5xC,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAGjoC,UAAWD,EAAQkE,UACzC,yBAAK4F,IAAI,OAAOpH,MAAM,OAAOkH,IAAI,0C,mDCjE1CpH,iBAxCA,SAACC,GAAD,MAAY,CACvB4wC,YAAa,CACT1tC,gBAAiB,iBACjBjD,MAAO,OACPZ,OAAQ,SACR8B,QAAS,YACT+D,UAAW,OACXpD,WAAY,YAGhB+uC,qBAAsB,CAClB3wC,UAAW,OACXD,MAAO,oBACPkB,QAAS,QACT9B,OAAQ,SACR6F,UAAW,OACXtF,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,KAC7BlE,SAAU,OAuBHR,EAnBC,SAAC5D,GAAW,IAChBoB,EAAYpB,EAAZoB,QADe,EAE2BpB,EAAMtX,QAAhD2e,EAFe,EAEfA,QAASstC,EAFM,EAENA,UAAWC,EAFL,EAEKA,kBAExBC,EAAW,IAAIvlD,KAAKslD,GAAmBE,iBAE3C,OACI,kBAAC,IAAMlwC,SAAP,KACI,yBAAKvD,UAAWD,EAAQszC,sBACnBC,EADL,OACoBE,GAGpB,yBAAKxzC,UAAWD,EAAQqzC,aACnBptC,OCgBXxH,GAAqB,CACvBlX,mCACAF,wBAGEuqB,GAAQ,CACV,CACItC,MAAO,cAGX,CACIA,MAAO,kBAGX,CACIA,MAAO,OAGX,CACIA,MAAO,cAsGA5Q,gBA9HS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1C5e,uCAAwCI,EAAMJ,uCAC9CD,mBAAoBK,EAAML,sBA4HU+a,GAAzBC,CAA6C8D,cAlK7C,SAACC,GAAD,MAAY,CACvBkxC,aAAc,CACVxvC,QAAS,QACTwD,UAAW,QAGfisC,cAAe,CACXlxC,MAAO,OACPZ,OAAQ,sBAGZ+xC,oBAAqB,CACjBC,UAAW,qBACXhvC,YAAa,QAGjBivC,WAAY,CACR1xC,MAAO,QACPM,UAAW,QAGfqxC,eAAgB,CACZ3xC,MAAO,QACPwC,WAAY,QAGhBovC,QAAS,CACLvsC,aAAc,MACd5F,OAAQ,qBAGZoyC,UAAW,CACPrvC,WAAY,UAkIwCrC,EAlG1B,SAAC5D,GAAW,IAQtCiT,EAPI7R,EAAwBpB,EAAxBoB,QAASm0C,EAAev1C,EAAfu1C,WADwB,EAGTlrC,IAAMC,WAHG,mBAGjC5hB,EAHiC,KAGxB8sD,EAHwB,KAKrCjvD,EAAWyZ,EAAMlb,mBAAmBywD,EAAWE,eAC/CC,EAAiBj0D,QAAQ8E,GAAYA,EAAS6D,QAIlD,OAAOmrD,EAAWI,OACd,IAAK,wBAIL,IAAK,uBACD1iC,EAAa,EACb,MAEJ,IAAK,eACDA,EAAa,EACb,MAEJ,IAAK,qBACDA,EAAa,EACb,MAEJ,QACIA,EAAa,EAGrB3O,qBAAU,WACNtE,EAAMrX,iCAAiC4sD,EAAWE,iBACnD,IAQH,OACI,kBAACG,GAAA,EAAD,CAAuBv0C,UAAWD,EAAQ2zC,cACtC,kBAAC5hC,GAAA,EAAD,CACI9R,UAAWD,EAAQi0C,QACnBQ,kBAAgB,EAChB5iC,WAAYA,GAEXD,GAAMtiB,KAAI,SAACsS,EAAM7Y,GACV,OACI,kBAACipB,GAAA,EAAD,CAAM/f,IAAKlJ,GACP,kBAACkpB,GAAA,EAAD,KACKrQ,EAAK0N,YAO9B,kBAAChP,GAAA,EAAD,CAAYL,UAAWD,EAAQk0C,WAC3B,kBAAC/wC,GAAA,EAAD,CAAMC,UAAWC,KAAYC,GAAE,sDAAiDoxC,mBAAmBP,EAAWE,iBAA9G,UADJ,qBAKIz1C,EAAMjb,yCAA2CjD,EAAOC,WACxD,wBAEA,kBAAC,IAAM6iB,SAAP,KAEQ8wC,GAAkBnvD,EAASmK,KAAI,SAAC+F,EAAEtM,GAAH,OAC3B,kBAAC,GAAD,CAASzB,QAAS+N,EAAGpD,IAAKlJ,QAK1C,yBAAKkX,UAAWD,EAAQ4zC,eACpB,kBAAC/xC,GAAA,EAAD,CACI8yC,WAAS,EACTrJ,KAAM,EACN/qC,QAAQ,WACRwB,SAAU,SAAC1M,GAAD,OAAO++C,EAAW/+C,EAAE4J,OAAOjR,QACrCA,MAAO1G,EACP6gC,WAAS,IAGb,kBAAChmB,GAAA,EAAD,CACI5B,QAAQ,YACR8B,MAAM,UACNpC,UAAWD,EAAQ+zC,WACnBz0C,QArDU,WACtBV,EAAMvX,qBAAqB8sD,EAAWE,cAAe/sD,GACrD8sD,EAAW,MA+CH,sBCjJV31C,GAAqB,CACvBm2C,8B5FjByC,iBAAO,CAChD3wD,KLHwC,kCiGmG7Bya,gBAtFS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAO2B,EAAM3B,KACbqB,gBAAiBM,EAAMN,mBAoFagb,GAAzBC,CAA6C8D,cA7E7C,SAAAC,GAAK,MAAK,CACrBoyC,WAAY,CACRnyC,MAAO,OACPZ,OAAQ,aAGZgzC,iBAAkB,CACdhB,UAAW,MACXnsC,UAAW,OACXvC,aAAc,OACdpC,SAAU,YAmE0CR,EA9DtC,SAAC5D,GAEnBqK,IAAM/F,WAAU,WACZtE,EAAMg2C,kCACP,IAJ0B,MAMe3rC,IAAMC,UAAS,GAN9B,mBAMrB6rC,EANqB,KAMNC,EANM,KAkBrBh1C,EAA6BpB,EAA7BoB,QAASvc,EAAoBmb,EAApBnb,gBAEjB,OACI,yBAAKwc,UAAWD,EAAQ60C,YACnBpxD,GAAmBA,EAAgBuF,OAEpC,kBAAC,IAAMwa,SAAP,KAEQ/f,EAAgB6L,KAAI,SAAC+F,EAAGtM,GAAJ,OAChB,kBAACksD,GAAA,EAAD,CACI9rC,SAAU4rC,IAAkBhsD,EAC5BgZ,SAAU,kBArBV,SAAChZ,GAEjBisD,EADDD,IAAkBhsD,GAKAA,GAeemsD,CAAgBnsD,IAChCkJ,IAAKlJ,EACLk7C,gBAAiB,CAAEkR,eAAe,IAElC,kBAACC,GAAA,EAAD,CAAuBC,WAAY,kBAAC,KAAD,OAE/B,kBAAC/0C,GAAA,EAAD,CAAYg1C,QAAM,EAACr1C,UAAWD,EAAQ80C,kBACjCz/C,EAAEkgD,SAGP,kBAACj1C,GAAA,EAAD,CAAYg1C,QAAM,EAACr1C,UAAWD,EAAQ80C,kBACjCz/C,EAAEk/C,QAIX,kBAAC,GAAD,CACIJ,WAAY9+C,SAS5B,kBAACiL,GAAA,EAAD,mC,8BCtCV7B,GAAqB,CACvBlX,mCACAF,uBACAmuD,mB7F5B8B,SAACtwD,EAAcmY,GAAf,MAA4B,CAC1DpZ,KLnBgC,uBKoBhCC,QAAS,CACLgB,eACAmY,c6FiHOqB,gBAjGS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1C5e,uCAAwCI,EAAMJ,uCAC9CD,mBAAoBK,EAAML,sBA+FU+a,GAAzBC,CAA6C8D,cApI7C,SAACC,GAAD,MAAY,CACvBkxC,aAAc,CACVxvC,QAAS,SAGbyvC,cAAe,CACXlxC,MAAO,OACPZ,OAAQ,sBAGZ+xC,oBAAqB,CACjBC,UAAW,qBACXhvC,YAAa,QAGjBivC,WAAY,CACR1xC,MAAO,QACPM,UAAW,QAGfqxC,eAAgB,CACZ3xC,MAAO,QACPwC,WAAY,QAGhB4wC,oBAAqB,CACjB9tC,UAAW,OACX7F,OAAQ,iBAGZ4zC,YAAa,CACThzC,MAAO,YAqG6CF,EAtFzB,SAAC5D,GAAW,IACnCoB,EAA4CpB,EAA5CoB,QAASm0C,EAAmCv1C,EAAnCu1C,WAAYqB,EAAuB52C,EAAvB42C,mBADa,EAGVvsC,IAAMC,WAHI,mBAGlC5hB,EAHkC,KAGzB8sD,EAHyB,OAIdnrC,IAAMC,SAASirC,EAAWwB,UAJZ,mBAIlCC,EAJkC,KAI3B5/C,EAJ2B,KAMtC7Q,EAAWyZ,EAAMlb,mBAAmBywD,EAAWE,eAC/CC,EAAiBj0D,QAAQ8E,GAAYA,EAAS6D,QAElDka,qBAAU,WACNtE,EAAMrX,iCAAiC4sD,EAAWE,iBACnD,IAiBH,OACI,kBAACG,GAAA,EAAD,CAAuBv0C,UAAWD,EAAQ2zC,cACtC,yBAAK1zC,UAAWD,EAAQy1C,qBACpB,kBAACI,GAAA,EAAD,CAAQ7nD,MAAO4nD,EAAO7zC,SAZR,SAAC1M,GACvBW,EAASX,EAAE4J,OAAOjR,QAWyCiS,UAAWD,EAAQ01C,aAClE,kBAAC5tB,GAAA,EAAD,CAAU95B,MAAO,GAAjB,yBACA,kBAAC85B,GAAA,EAAD,CAAU95B,MAAO,GAAjB,wBACA,kBAAC85B,GAAA,EAAD,CAAU95B,MAAO,GAAjB,gBACA,kBAAC85B,GAAA,EAAD,CAAU95B,MAAO,GAAjB,sBACA,kBAAC85B,GAAA,EAAD,CAAU95B,MAAO,GAAjB,aAGJ,kBAACmU,GAAA,EAAD,CACI5B,QAAQ,YACR8B,MAAM,UACN/C,QAnBU,WACtBV,EAAMk3C,2BACNN,EAAmBrB,EAAWE,cAAeuB,IAkBjC31C,UAAWD,EAAQg0C,eACnB5xC,SAAU/hB,QAAQu1D,IAAUzB,EAAWwB,WAL3C,cAYA/2C,EAAMjb,yCAA2CjD,EAAOC,WACxD,wBAEA,kBAAC,IAAM6iB,SAAP,KAEQ8wC,GAAkBnvD,EAASmK,KAAI,SAAC+F,EAAEtM,GAAH,OAC3B,kBAAC,GAAD,CAASzB,QAAS+N,EAAGpD,IAAKlJ,QAK1C,yBAAKkX,UAAWD,EAAQ4zC,eACpB,kBAAC/xC,GAAA,EAAD,CACI8yC,WAAS,EACTrJ,KAAM,EACN/qC,QAAQ,WACRwB,SAAU,SAAC1M,GAAD,OAAO++C,EAAW/+C,EAAE4J,OAAOjR,QACrCA,MAAO1G,EAEP6gC,WAAS,IAGb,kBAAChmB,GAAA,EAAD,CACI5B,QAAQ,YACR8B,MAAM,UACNpC,UAAWD,EAAQ+zC,WACnBz0C,QA/DU,WACtBV,EAAMvX,qBAAqB8sD,EAAWE,cAAe/sD,GACrD8sD,EAAW,MAyDH,sBC9GV31C,GAAqB,CACvB/W,0BAmCEquD,GAAqB,CACvB,yBAAyB,EACzB,wBAAwB,EACxB,gBAAgB,EAChB,sBAAsB,EACtB,UAAY,GAGVC,G,YAEF,WAAYp3C,GAAO,IAAD,wBACd,8CAAMA,KAmBV4a,mBAAqB,SAACC,GACbA,EAAUh2B,iBAAmBg2B,EAAUh2B,gBAAgBuF,SAAY,EAAK4V,MAAMnb,kBAAmB,EAAKmb,MAAMnb,gBAAgBuF,SAC7H,EAAKjF,MAAMw5B,OAAOC,aAAa,EAAK5e,MAAMnb,iBAC1C,EAAKsc,SAAS,CAACwd,OAAQ,EAAKx5B,MAAMw5B,WAvBxB,EA2BlB3d,kBAAoB,WAChB,EAAKhB,MAAMlX,0BA5BG,EA+BlBwtD,gBAAkB,SAACnsD,GACZ,EAAKhF,MAAMgxD,gBAAkBhsD,EAC5B,EAAKgX,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BgxD,eAAe,KAI7C,EAAKh1C,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BgxD,cAAehsD,MArCnC,EAyClBktD,mBAAqB,SAAC5gD,GAClB,IAAI6gD,EAAc,eAAO,EAAKnyD,MAAMoyD,SACpCD,EAAe7gD,EAAE4J,OAAOvC,OAASw5C,EAAe7gD,EAAE4J,OAAOvC,MACzD,EAAKqD,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BoyD,QAAQ,eAAKD,OA5C7B,EA+ClBE,yBAA2B,SAAC/gD,GACxB,EAAK0K,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B+6B,aAAczpB,EAAE4J,OAAOjR,UAhDvC,EAmDlB8nD,yBAA2B,WACvB,EAAK/1C,SAAL,eAAkB,EAAKhc,MAAvB,CAA8BgxD,eAAe,MApD/B,EAuDlBtoC,OAAS,WAAO,IAAD,EAC0B,EAAK7N,MAAlCoB,EADG,EACHA,QAASvc,EADN,EACMA,gBADN,EAEsB,EAAKM,MAA9Bw5B,EAFG,EAEHA,OAAQuB,EAFL,EAEKA,aAEZ95B,EAAc85B,EACdvB,EAAOA,OAAOuB,GAAcnU,QAAO,SAAA/I,GAAI,OAAI,EAAK7d,MAAMoyD,QAAQv0C,EAAK2yC,UACnE9wD,EAAgBknB,QAAO,SAAA/I,GAAI,OAAI,EAAK7d,MAAMoyD,QAAQv0C,EAAK2yC,UAE3D,OACI,yBAAKt0C,UAAWD,EAAQ60C,YACpB,kBAACwB,GAAA,EAAD,CAAW/oD,KAAG,EAAC2S,UAAWD,EAAQs2C,iBAC9B,yBAAKr2C,UAAWD,EAAQu2C,oBACpB,kBAAC10C,GAAA,EAAD,CACItB,QAAQ,WACRvS,MAAO8wB,EACP/c,SAAU,EAAKq0C,yBACfp0C,YAAY,SACZ6K,WAAY,CACRC,eACA,kBAACC,GAAA,EAAD,CAAgBC,SAAS,SACrB,kBAACC,GAAA,EAAD,CAAQ7N,MAAO,CAACiD,MAAMnE,GAAOC,gBAMzC,kBAACq4C,GAAA,EAAD,CACIxwB,QACI,kBAACywB,GAAA,EAAD,CACIC,QAAS,EAAK3yD,MAAMoyD,QAAQ,yBAC5Bp0C,SAAU,EAAKk0C,mBACfv5C,KAAK,wBACL2F,MAAM,YAGdiN,MAAM,wBACNrP,UAAWD,EAAQ22C,oBAGvB,kBAACH,GAAA,EAAD,CACQxwB,QACI,kBAACywB,GAAA,EAAD,CACIC,QAAS,EAAK3yD,MAAMoyD,QAAQ,wBAC5Bp0C,SAAU,EAAKk0C,mBACfv5C,KAAK,uBACL2F,MAAM,YAGdiN,MAAM,uBACNrP,UAAWD,EAAQ22C,oBAG3B,kBAACH,GAAA,EAAD,CACIxwB,QACI,kBAACywB,GAAA,EAAD,CACAC,QAAS,EAAK3yD,MAAMoyD,QAAQ,gBAC5Bp0C,SAAU,EAAKk0C,mBACfv5C,KAAK,eACL2F,MAAM,YAGViN,MAAM,eACNrP,UAAWD,EAAQ22C,oBAGvB,kBAACH,GAAA,EAAD,CACIxwB,QACI,kBAACywB,GAAA,EAAD,CACAC,QAAS,EAAK3yD,MAAMoyD,QAAQ,sBAC5Bp0C,SAAU,EAAKk0C,mBACfv5C,KAAK,qBACL2F,MAAM,YAGViN,MAAM,qBACNrP,UAAWD,EAAQ22C,oBAGvB,kBAACH,GAAA,EAAD,CACIxwB,QACI,kBAACywB,GAAA,EAAD,CACAC,QAAS,EAAK3yD,MAAMoyD,QAAX,SACTp0C,SAAU,EAAKk0C,mBACfv5C,KAAK,WACL2F,MAAM,YAGViN,MAAM,WACNrP,UAAWD,EAAQ22C,qBAI9B3xD,GAAeA,EAAYgE,OAE5B,kBAAC,IAAMwa,SAAP,KAEQxe,EAAYsK,KAAI,SAAC+F,EAAGtM,GAAJ,OACZ,kBAACksD,GAAA,EAAD,CAEI9rC,SAAU,EAAKplB,MAAMgxD,gBAAkBhsD,EACvCgZ,SAAU,kBAAM,EAAKmzC,gBAAgBnsD,IACrCkJ,IAAKlJ,EACLk7C,gBAAiB,CAAEkR,eAAe,IAElC,kBAACC,GAAA,EAAD,CAAuBC,WAAY,kBAAC,KAAD,OAC/B,kBAAC/0C,GAAA,EAAD,CAAYg1C,QAAM,EAACr1C,UAAWD,EAAQ80C,kBACjCz/C,EAAEkgD,SAGP,kBAACj1C,GAAA,EAAD,CAAYg1C,QAAM,EAACr1C,UAAWD,EAAQ80C,kBACjCz/C,EAAEk/C,QAGX,kBAAC,GAAD,CACIJ,WAAY9+C,EACZygD,yBAA0B,EAAKA,gCAS/C,kBAACx1C,GAAA,EAAD,gCAhLZ,IAAIid,EAAS,IAAIqE,UAAgB,iBAHnB,OAIdrE,EAAOsE,cAAgB,IAAID,8BAC3BrE,EAAOuE,YAAc,IAAIF,wBACzBrE,EAAOwE,SAAS,WAChBxE,EAAOwE,SAAS,QAEbnjB,EAAMnb,iBAAiB85B,EAAOC,aAAa5e,EAAMnb,iBAEpD,EAAKM,MAAQ,CACT+6B,aAAc,GACdvB,SACAw3B,eAAe,EACfoB,QAASJ,GACTa,kBAAmB,MAhBT,E,4BAFOt0C,aA8Ld5D,gBA/OS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAO2B,EAAM3B,KACbqB,gBAAiBM,EAAMN,mBA6Oagb,GAAzBC,CAA6C8D,cAtO7C,SAAAC,GAAK,MAAK,CACrBoyC,WAAY,CACRnyC,MAAO,OACPZ,OAAQ,aAGZgzC,iBAAkB,CACdhB,UAAW,MACXnsC,UAAW,OACXvC,aAAc,OACdpC,SAAU,SAGdszC,gBAAiB,CACb3wC,gBAAiB,iBACjBtD,MAAO,QACPuB,QAAS,WACT6/B,oBAAqB,MACrBrW,qBAAsB,MACtBypB,SAAU,QAGdF,kBAAmB,CACf7xC,YAAa,QAGjByxC,mBAAoB,CAChBzC,UAAW,OACXnsC,UAAW,WA0MyCnF,CAAmBwzC,KC1NhEt3C,gBAnBS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAO2B,EAAM3B,QAkBuB,KAAzBsc,CAA+B8D,cAzB/B,SAACC,GAAD,MAAY,CACvBrC,KAAM,CACFwC,WAAY,WAuB0BJ,EAfvB,SAAC5D,GAAW,IACvBoB,EAAyBpB,EAAzBoB,QAASvf,EAAgBme,EAAhBne,MAAgBme,EAATxc,KAExB,OACI,yBAAK6d,UAAWD,EAAQI,MACxB,kBAAC,KAAD,KACI,kBAAC,KAAD,CAAO02C,OAAK,EAACC,KAAMt2D,EAAM6a,IAAM,SAAU8H,UAAY4zC,KACrD,kBAAC,KAAD,CAAOF,OAAK,EAACC,KAAMt2D,EAAM6a,IAAM,kBAAmB8H,UAAYwrC,KAC9D,kBAAC,KAAD,CAAOkI,OAAK,EAACC,KAAMt2D,EAAM6a,IAAM,iBAAkB8H,UAAY6zC,KAC7D,kBAAC,KAAD,CAAOH,OAAK,EAACC,KAAMt2D,EAAM6a,IAAM,kBAAmB8H,UAAY4yC,WCkBpEv3C,GAAqB,CACvBy4C,qBpGgJgC,SAAC,GAAD,MAAsC,CACtEjzD,KNhJmC,0BMiJnCC,QAAS,CACLwY,KAH4B,EAAEA,KAI9BhI,MAJ4B,EAAQA,MAKpCyiD,QAL4B,EAAeA,QAM3C9yD,QAN4B,EAAwBA,WoG/IxD8B,gBAGEixD,G,YAEF,WAAYx4C,GAAO,IAAD,+BACd,8CAAMA,KASVkB,aAAe,SAACd,GACZ,EAAKe,SAAL,eAAkB,EAAKhc,MAAvB,eAA+Bib,EAAMC,OAAOvC,KAAOsC,EAAMC,OAAOjR,UAXlD,EAclBqpD,aAAe,WACX,IAAInzD,EAAO,eAAO,EAAKH,OACnBwyB,GAAU,EACdzkB,OAAO1N,KAAKF,GAASioB,SAAQ,SAAAla,GACzB/N,EAAQ+N,GAAO/N,EAAQ+N,GAAKkC,OACzBjQ,EAAQ+N,GAAKjJ,OAAS,IAAGutB,GAAU,MAGvCA,EACC,EAAK3X,MAAMzY,aAAa,8BAI5B,EAAKyY,MAAMs4C,qBAAqBhzD,IAzBhC,EAAKH,MAAQ,CACT2Y,KAAMkC,EAAMxc,KAAOwc,EAAMxc,KAAKkvB,UAAY,IAAM1S,EAAMxc,KAAKmvB,SAAW,GACtE7c,MAAOkK,EAAMxc,KAAOwc,EAAMxc,KAAKsS,MAAQ,GACvCyiD,QAAS,GACT9yD,QAAS,IANC,E,wEA8BR,IACE2b,EAAYzT,KAAKqS,MAAjBoB,QAER,OACI,kBAACG,GAAA,EAAD,CAAOF,UAAWD,EAAQI,KAAMC,UAAW,GACvC,kBAACC,GAAA,EAAD,CAAYC,QAAQ,KAAKN,UAAWD,EAAQwM,OAAQzL,MAAM,QAA1D,cAIA,kBAACT,GAAA,EAAD,CAAYC,QAAQ,QAAQN,UAAWD,EAAQ1L,YAAayM,MAAM,QAAlE,qGAIA,kBAACQ,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAMK,MAAI,EAACJ,WAAS,EAACuI,UAAU,SAASrI,QAAQ,aAAamE,GAAI,GAAIqiC,GAAI,GACrE,kBAACrmC,GAAA,EAAD,CACInF,KAAK,OACL4S,MAAM,OACNthB,MAAOzB,KAAKxI,MAAM2Y,KAClBqF,SAAUxV,KAAKuT,aACfG,UAAWD,EAAQ+O,UACnBxO,QAAQ,WACR4mB,gBAAiB,CACbK,QAAQ,KAIhB,kBAAC3lB,GAAA,EAAD,CACInF,KAAK,QACL4S,MAAM,QACNthB,MAAOzB,KAAKxI,MAAM2Q,MAClBqN,SAAUxV,KAAKuT,aACfG,UAAWD,EAAQ+O,UACnBxO,QAAQ,WACR4mB,gBAAiB,CACbK,QAAQ,KAIhB,kBAAC3lB,GAAA,EAAD,CACInF,KAAK,UACL4S,MAAM,UACNthB,MAAOzB,KAAKxI,MAAMozD,QAClBp1C,SAAUxV,KAAKuT,aACfG,UAAWD,EAAQ+O,UACnBxO,QAAQ,WACR4mB,gBAAiB,CACbK,QAAQ,MAKpB,kBAACjmB,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,GACnB,kBAACrmC,GAAA,EAAD,CACIG,YAAY,kBACZhU,MAAOzB,KAAKxI,MAAMM,QAClB4b,UAAWD,EAAQs3C,iBACnB56C,KAAK,UACLqF,SAAUxV,KAAKuT,aACf60C,WAAS,EACTrJ,KAAK,KACL/qC,QAAQ,eAIpB,kBAAC4B,GAAA,EAAD,CACI5B,QAAQ,YACR8B,MAAM,UACNpC,UAAWD,EAAQ2yC,aACnBrzC,QAAS/S,KAAK8qD,cAJlB,e,GAjGQ/0C,aAgHT5D,gBAzHS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1CngB,KAAM2B,EAAM3B,QAwHwBqc,GAAzBC,CAA6C8D,cA7J7C,SAACC,GAAD,MAAY,CACvBrC,KAAM,CACFiC,MAAO,QACPK,MAAO,OACPC,UAAWF,EAAMd,QAAQ,IACzBkD,WAAY,OACZC,YAAa,OACbhC,aAAcL,EAAMd,QAAQ,GAC5BiC,QAASnB,EAAMd,QAAQ,IAG3B6K,OAAQ,CACJnK,MAAOI,EAAMwE,QAAQ9I,QAAQ+I,KAC7BpE,aAAcL,EAAMd,QAAQ,IAGhCrN,YAAa,CACTwO,aAAcL,EAAMd,QAAQ,IAGhCoN,UAAW,CACPlK,WAAY,EACZC,YAAarC,EAAMd,QAAQ,GAC3BmB,aAAcL,EAAMd,QAAQ,IAGhC21C,iBAAkB,CACd50C,MAAO,QAGXiwC,aAAc,CACVhwC,UAAWF,EAAMd,QAAQ,GACzBU,MAAO,YA6H6CG,CAAmB40C,KCrChE50C,iBA5HA,SAACC,GAAD,MAAY,CACvBrC,KAAM,CACFuC,UAAW,QAGf4lC,iBAAkB,CACd3kC,QAAS,UACT9B,OAAQ,uBAGZy1C,cAAe,CACX50C,UAAW,OAGf60C,gBAAiB,CACb70C,UAAW,OAGf80C,aAAc,CACVxzC,UAAW,mBACXU,SAAU,oBACVd,OAAQ,SAGZ6zC,SAAU,CACN7K,WAAY,IACZ7pC,SAAU,QAGd20C,oBAAqB,CACjBhwC,UAAW,QACX7E,aAAc,QAGlB80C,aAAc,CACV/yC,WAAY,QAGhBgzC,cAAe,CACX1zC,QAAS,OACT1C,WAAY,SACZ2C,eAAgB,SAChBR,QAAS,QAGbk0C,UAAW,CACPz1C,MAAO,QACPoM,cAAe,OACf/L,MAAO,YA4EAF,EAxEO,SAAC5D,GAAW,IACtBoB,EAAYpB,EAAZoB,QAER,OACI,yBAAKC,UAAWD,EAAQI,MACpB,kBAACD,GAAA,EAAD,CAAOF,UAAWD,EAAQuoC,iBAAkBloC,UAAW,GACnD,kBAACC,GAAA,EAAD,CAAYC,QAAQ,SAApB,uPACwP,kBAAC4C,GAAA,EAAD,CAAMlE,OAAO,SAAS/E,KAAK,0CAA3B,iBADxP,iRAIA,kBAACqH,GAAA,EAAD,CAAMC,WAAS,EAACvB,UAAWD,EAAQu3C,eAC/B,kBAACh2C,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAK,EAAG6P,GAAI,GAC3B,uBAAG79C,KAAK,uCAAuC+E,OAAO,UAClD,yBAAK2K,IAAI,gCAAgClH,MAAM,MAAMoH,IAAI,GAAG7J,UAAWD,EAAQy3C,iBAIvF,kBAACl2C,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAK,EAAG6P,GAAI,GAC3B,uBAAG79C,KAAK,uCAAuC+E,OAAO,UAClD,yBAAK2K,IAAI,qCAAqClH,MAAM,MAAMoH,IAAI,GAAG7J,UAAWD,EAAQy3C,iBAI5F,kBAACl2C,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAG6P,GAAI,GAC1B,uBAAG79C,KAAK,wCAAwC+E,OAAO,UACnD,yBAAK2K,IAAI,oCAAoClH,MAAM,MAAMoH,IAAI,GAAG7J,UAAWD,EAAQy3C,iBAI3F,kBAACl2C,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAK,EAAG6P,GAAI,GAC3B,uBAAG79C,KAAK,wCAAwC+E,OAAO,UACnD,yBAAK2K,IAAI,qCAAqCE,IAAI,GAAG7J,UAAWD,EAAQy3C,kBAKpF,kBAACl2C,GAAA,EAAD,CAAMC,WAAS,EAACvB,UAAWD,EAAQw3C,iBAC/B,kBAACj2C,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,IAGvB,kBAAC3mC,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAGqiC,GAAI,EAAGjoC,UAAWD,EAAQ23C,qBACxC,kBAACr3C,GAAA,EAAD,CAAYC,QAAQ,UAAUN,UAAWD,EAAQ03C,UAAjD,eAKJ,kBAACn2C,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAGqiC,GAAI,GAClB,uBAAGhuC,KAAK,gCAAgC+E,OAAO,UAC3C,yBAAK2K,IAAI,yBAAyBlH,MAAM,KAAKs1C,OAAO,iEAAiEluC,IAAI,GAAG7J,UAAWD,EAAQ43C,gBAEnJ,uBAAG19C,KAAK,iKAAiK+E,OAAO,SAASgB,UAAWD,EAAQ43C,cACxM,yBAAKhuC,IAAI,wBAAwBlH,MAAM,KAAKs1C,OAAO,+DAA+DluC,IAAI,OAI9H,kBAACvI,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,GAAIqiC,GAAI,EAAGjoC,UAAWD,EAAQ63C,eACzC,kBAAC11C,GAAA,EAAD,CAAQE,MAAM,UAAU9B,QAAQ,YAAYrG,KAAK,yCAAyC+E,OAAO,SAASgB,UAAWD,EAAQ83C,WAA7H,kBAKJ,kBAACv2C,GAAA,EAAD,CAAMK,MAAI,EAACiE,GAAI,EAAGqiC,GAAI,WCpFpCzpC,GAAqB,CACvBw5C,2BtGoIsC,SAACvjD,GAAD,MAAY,CAClDzQ,KN5HyC,gCM6HzCC,QAAS,CACLwQ,YsGnEOgK,eAAQ,KAAMD,GAAdC,CAAkC8D,cA/FlC,SAACC,GAAD,MAAY,CACvBmS,MAAO,CACHlS,MAAO,MACPZ,OAAQ,WACR+B,OAAQ,QAGZvP,YAAa,CACTsO,WAAY,SAGhBs1C,qBAAsB,CAClBt0C,QAAS,qBAGbu0C,WAAY,CACRtzC,WAAY,MACZlC,UAAW,MACXkB,OAAQ,QAGZ4hC,YAAa,CACT9iC,UAAW,WAyE8BH,EAjE9B,SAAC5D,GAAW,IACnBoB,EAAYpB,EAAZoB,QADkB,EAGAiJ,IAAMC,SAAS,IAHf,mBAGnBxU,EAHmB,KAGZ4xC,EAHY,OAIcr9B,IAAMC,UAAS,GAJ7B,mBAInBkvC,EAJmB,KAILC,EAJK,KAUpBhB,EAAe,SAAAr4C,GACjBq5C,GAAgB,GAChBz5C,EAAMq5C,2BAA2BvjD,IAS/B8a,EAAkB,KAAV9a,GAAgB,2DAA2Dgc,KAAKhc,GAE9F,OACI,kBAACyL,GAAA,EAAD,CAAOF,UAAWD,EAAQ4U,OACrBwjC,EACG,kBAAC93C,GAAA,EAAD,CAAYL,UAAWD,EAAQk4C,sBAA/B,6BAC+BxjD,EAD/B,sGAIA,kBAAC,IAAM8O,SAAP,KACI,kBAAClD,GAAA,EAAD,CAAYL,UAAWD,EAAQ1L,aAA/B,yEAIA,yBAAK2L,UAAWD,EAAQylC,aACpB,kBAAC5jC,GAAA,EAAD,CACI+K,WAAS,EACT9K,OAAO,SACPpd,GAAG,QACHT,KAAK,OACLsc,QAAQ,WACR7D,KAAK,QACL1O,MAAO0G,EACPqN,SAtCH,SAAA/C,GACjBsnC,EAAStnC,EAAMC,OAAOjR,QAsCFuhB,OAAQC,EACRC,WAAYD,EAAQ,GAAK,qCACzBG,WAhCD,SAAA3Q,GACD,UAAdA,EAAM/M,KACRolD,OAgCc,kBAACl1C,GAAA,EAAD,CACIE,MAAM,UACN9B,QAAQ,YACRN,UAAWD,EAAQm4C,WACnB74C,QAAS+3C,EACTj1C,SAAU/hB,SAASmvB,IAAU9a,EAAM1L,SALvC,iB,qBC7ClByV,GAAqB,CACvB65C,0BvGmIqC,SAAC,GAAD,MAAwB,CAC7Dr0D,KNjIwC,+BMkIxCC,QAAS,CACL0Q,SAHiC,EAAEA,SAInCC,MAJiC,EAAYA,SuGlIjD0jD,2BvGkJsC,iBAAO,CAC7Ct0D,KN9IyC,mC6GGvCu0D,GAA0BvvC,IAAM+G,YAGhCyoC,G,YAEF,WAAY75C,GAAO,IAAD,wBACd,8CAAMA,KAkBVgB,kBAAoB,WAChB,EAAKhB,MAAM25C,8BApBG,EAuBlBG,qBAAuB,SAAA15C,GACnB,EAAKe,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B6Q,SAAUoK,EAAMC,OAAOjR,UAxBvC,EA2BlBqpD,aAAe,WACX,EAAKz4C,MAAM05C,0BAA0B,CACjC1jD,SAAU,EAAK7Q,MAAM6Q,SACrBC,MAAO,EAAK9Q,MAAM8Q,SA9BR,EAiClB8jD,4BAA8B,SAAA35C,GAC1B,EAAKe,SAAL,eAAkB,EAAKhc,MAAvB,CAA8B0sB,gBAAiBzR,EAAMC,OAAOjR,UAlC9C,EAqClBihB,eAAiB,SAAAjQ,GACK,UAAdA,EAAM/M,KACNumD,GAAwBrpC,QAAQtT,SArCpC,IAAIhH,EAAQ+J,EAAMre,SAAS0Z,SAASuwB,MAAM,KAAK,GAC3CouB,EAAeC,KAAUhkD,GAC7BK,QAAQC,IAAIyjD,GACZ,IAAIE,EAAa,IAAI5qD,KAAK,GAC1B4qD,EAAWC,cAAcH,EAAaI,KAEtC,IAAIl4D,EAAU,IAAIoN,KAAS4qD,EARb,OAUd,EAAK/0D,MAAQ,CACT6Q,SAAU,GACV6b,gBAAiB,GACjB3vB,UACA+T,QACAH,MAAOkkD,EAAaK,KAfV,E,wEA2CR,IAAD,EACoC1sD,KAAKqS,MAAtCoB,EADH,EACGA,QAASrd,EADZ,EACYA,oBADZ,EAE0C4J,KAAKxI,MAA5C6Q,EAFH,EAEGA,SAAU6b,EAFb,EAEaA,gBAAiB3vB,EAF9B,EAE8BA,QAE7Bo4D,EAAgB,2DAA2DxoC,KAAK9b,GAChFukD,EAAuBvkD,IAAa6b,EACpCrO,EAAW/hB,QAA4B,IAApBuU,EAAS5L,SAAiBkwD,IAAkBC,GAErE,OAAGr4D,EAEK,kBAACqf,GAAA,EAAD,CAAOF,UAAWD,EAAQ4U,OACtB,kBAACtU,GAAA,EAAD,CAAYL,UAAWD,EAAQ1L,aAA/B,+CACgD,kBAAC6O,GAAA,EAAD,CAAMC,UAAWC,KAAYC,GAAI,CAACrJ,SAAU,gBAA5C,YADhD,MAOTtX,IAAwBjC,EAAOG,UAE1B,kBAACsf,GAAA,EAAD,CAAOF,UAAWD,EAAQ4U,OACtB,kBAACtU,GAAA,EAAD,CAAYL,UAAWD,EAAQ1L,aAA/B,yDAOJ3R,IAAwBjC,EAAOE,OAE/B,kBAACuf,GAAA,EAAD,CAAOF,UAAWD,EAAQ4U,OACtB,kBAACtU,GAAA,EAAD,CAAYL,UAAWD,EAAQ1L,aAA/B,+DAQR,kBAAC6L,GAAA,EAAD,CAAOF,UAAWD,EAAQ4U,OACtB,kBAACtU,GAAA,EAAD,CAAYL,UAAWD,EAAQ1L,aAA/B,4BAIA,kBAACiN,GAAA,EAAD,CAAMwI,UAAU,SAASrI,QAAQ,eAAezB,UAAWD,EAAQo5C,SAAU53C,WAAS,GAClF,kBAACD,GAAA,EAAD,CAAMK,MAAI,GACN,kBAACC,GAAA,EAAD,CACIsmB,WAAS,EACTvb,WAAS,EACT0C,MAAM,WACNxN,OAAO,SACPpd,GAAG,WACHT,KAAK,WACLsc,QAAQ,WACR7D,KAAK,WACL1O,MAAO4G,EACPmN,SAAUxV,KAAKmsD,qBACfnpC,MAAOlvB,SAAS64D,GAAiBtkD,EAAS5L,QAC1CymB,WAAW,oEACXE,WAAYpjB,KAAK0iB,eACjBkY,gBAAiB,CACbK,QAAQ,MAKpB,kBAACjmB,GAAA,EAAD,CAAMK,MAAI,GACN,kBAACC,GAAA,EAAD,CACIsmB,WAAS,EACT7Y,MAAM,mBACNxN,OAAO,SACPpd,GAAG,kBACHT,KAAK,WACLsc,QAAQ,WACR7D,KAAK,kBACL1O,MAAOyiB,EACP1O,SAAUxV,KAAKosD,4BACfppC,OAAQ4pC,EACR1pC,WAAY0pC,EAAuB,GAAK,uBACxCxpC,WAAYpjB,KAAK0iB,eACjBkY,gBAAiB,CACbK,QAAQ,MAKpB,kBAACjmB,GAAA,EAAD,CAAMK,MAAI,GACN,kBAACO,GAAA,EAAD,CACIgmB,WAAS,EACT5nB,QAAQ,WACR8B,MAAM,UACND,SAAUA,EACV9C,QAAS/S,KAAK8qD,aACd/kC,IAAKkmC,IANT,iB,GApIKl2C,aAqJd5D,gBA7JS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC1C5f,oBAAqBoB,EAAMpB,uBA4JS8b,GAAzBC,CAA6C2kC,aAAW7gC,cA9LxD,SAACC,GAAD,MAAY,CACvBmS,MAAO,CACHlS,MAAO,MACPZ,OAAQ,aAER8B,QAAS,aAGby1C,WAAY,CACRl1C,QAAS,QACTzB,MAAO,SAGXpO,YAAa,CACTwO,aAAc,QAGlBs2C,SAAU,CACNv1C,OAAQ,QACRD,QAAS,UAIbyO,OAAQ,CACJ3P,MAAO,YAsKwDF,CAAmBi2C,MC5KpFh2C,GAAQ62C,aAAe,CAE3B39B,WAAY,CACV49B,iBAAiB,EACjBzmC,WAAY,CACV,SACA,cACAxmB,KAAK,MAGT2a,QAAS,CACP9I,QAAS,CACPq7C,aAAc,UACdtyC,KAAMhJ,GAAOC,SAGfoR,MAAO,CACLrI,KAAMhJ,GAAOK,aAGfD,UAAW,CACT4I,KAAMhJ,GAAOI,WAIfoP,WAAY,CACV+rC,QAASv7C,GAAOG,eAChBuW,MAAO1W,GAAOG,gBAGhBrX,KAAM,CACJmX,QAAS,UACTG,UAAWJ,GAAOC,UAItBu7C,UAAW,CACTC,cAAe,CACbv5C,KAAM,CACJiC,MAAOnE,GAAOC,QACduJ,aAAc,QAIlBkyC,SAAU,CACRx5C,KAAM,CACJuF,gBAAiB,mBAIrBk0C,gBAAiB,CACfz5C,KAAM,CACJyC,SAAU,SAIdi3C,kBAAmB,CACjBC,OAAQ,CACN/xC,YAAa,MACb5C,aAAc,MACdpC,SAAU,SAIdg3C,YAAa,CACXC,QAAS,CACPjyC,YAAa,MACb5C,aAAc,QAGhBhF,KAAM,CACJwC,WAAY,MACZoqB,cAAe,QAInBktB,WAAY,CACV95C,KAAM,CACJuF,gBAAiB,cACjBtD,MAAOnE,GAAOC,UAIlBg8C,YAAa,CACX/5C,KAAM,CACJ,UAAW,CACTuF,gBAAiBzH,GAAOM,cAK9B47C,qBAAsB,CACpB54C,UAAW,CACTmE,gBAAiBzH,GAAOG,iBAI5Bg8C,iBAAkB,CAChBt0B,MAAO,CACLniB,QAAS,aAGXxD,KAAM,CACJ,YAAa,CACX,YAAelC,GAAOC,WAK5Bm8C,mBAAoB,CAClBj2D,QAAS,CACPyd,OAAQ,SAIZy4C,eAAgB,CACdC,gBAAiB,CACf,sBAAuB,CACrB31C,WAAY,KAKlB41C,aAAc,CACZr6C,KAAM,CACJ8E,kBAAmB,uBAIvBw1C,eAAgB,CACdC,aAAc,CACZh4C,UAAW,QAIfi4C,qBAAsB,CACpBx6C,KAAM,CACJiC,MAAO,UAIXw4C,kBAAmB,CACjBz6C,KAAM,CACJ,aAAc,CACZ0B,OAAQ,KAKdg5C,eAAgB,CACd16C,KAAM,CACJiC,MAAOnE,GAAOC,UAIlB48C,eAAgB,CACdh1B,MAAO,CACL/d,YAAa,OAGfgzC,WAAY,CACV51C,aAAc,OAGhBhF,KAAM,CACJuF,gBAAiB,cACjB,UAAW,CACTA,gBAAiB,eAEnB,aAAc,CACZA,gBAAiB,iBAKvBs1C,WAAY,CACVrmC,MAAO,CACLjP,gBAAiB,eAUnBlH,GAAqB,CACzB/Y,uBACAW,kBAGI60D,G,8MACJt7C,kBAAoB,WAClB,EAAKhB,MAAMlZ,wB,0EAGX,OACE,kBAAC,KAAD,CAAyBqqD,MAAOoL,MAC9B,yBAAKl7C,UAAU,OACb,kBAAC,KAAD,CAAkBwC,MAAOA,IACzB,kBAAC,KAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOq0C,OAAK,EAACC,KAAK,oBAAoB3zC,UAAYG,KAClD,kBAAC,KAAD,CAAOuzC,OAAK,EAACC,KAAK,IAAI3zC,UAAY4/B,KAClC,kBAAC,KAAD,CAAO8T,OAAK,EAACC,KAAK,WAAW3zC,UAAYuL,KACzC,kBAAC,KAAD,CAAOmoC,OAAK,EAACC,KAAK,SAAS3zC,UAAYg4C,KACvC,kBAAC,KAAD,CAAOtE,OAAK,EAACC,KAAK,YAAY3zC,UAAY+Q,KAC1C,kBAAC,KAAD,CAAO2iC,OAAK,EAACC,KAAK,iBAAiB3zC,UAAWs8B,KAC9C,kBAAC,KAAD,CAAOoX,OAAK,EAACC,KAAK,WAAW3zC,UAAW+jC,KACxC,kBAAC,KAAD,CAAO2P,OAAK,EAACC,KAAK,cAAc3zC,UAAWi4C,KAE3C,kBAAC,KAAD,CAAOtE,KAAK,kBAAkB3zC,UAAWk4C,KACzC,kBAAC,KAAD,CAAOvE,KAAK,kBAAkB3zC,UAAWq1C,KACzC,kBAAC,KAAD,CAAO3B,OAAK,EAACC,KAAK,WAAW3zC,UAAWg0C,KACxC,kBAAC,KAAD,CAAOL,KAAK,aAAa3zC,UAAWm4C,c,GAzBhCj5C,aAmCH5D,gBA5CS,SAAC3a,EAAOwe,GAAR,MAAsB,CAC5CrgB,eAAgB6B,EAAM7B,kBA2CgBuc,GAAzBC,CAA6Cw8C,ICtP5DM,iBAAeC,cAAc,2HAE7B,IAAMC,GAAcjgD,SAASkgC,eAAe,QAC5CggB,IAASlvC,OACL,kBAAC,IAAD,CAAU5O,MAAOA,IACf,kBAAC,GAAD,OAEJ69C,ItH4GI,kBAAmBE,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.22648e72.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// Enum for async requests.\r\n\r\nconst states = {\r\n    inProgress: 'inProgress',\r\n    failed: 'failed',\r\n    succeeded: 'succeeded',\r\n    expired: 'expired'\r\n}\r\n\r\nexport default states;","import * as interfaceActionTypes from '../actionTypes/ui';\r\n\r\nconst uiResetState = {\r\n  catalogRequestState: null,\r\n\r\n  loginDialogIsOpen: false,\r\n  registrationActiveStep: 0,\r\n\r\n  userLoginState: null,\r\n  userLoginError: null,\r\n\r\n  userValidationState: null,\r\n  userValidationError: null,\r\n\r\n  userRegistrationState: null,\r\n\r\n  apiKeyRetrievalState: null,\r\n  apiKeyCreationState: null\r\n}\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {\r\n    case interfaceActionTypes.INTERFACE_SHOW_LOGIN_DIALOG: return {...state, loginDialogIsOpen: true};\r\n    case interfaceActionTypes.INTERFACE_HIDE_LOGIN_DIALOG: return {...state, loginDialogIsOpen: false, userLoginError: null};\r\n    case interfaceActionTypes.REGISTRATION_NEXT_ACTIVE_STEP: return {...state, registrationActiveStep: state.registrationActiveStep + 1}\r\n    case interfaceActionTypes.REGISTRATION_PREVIOUS_ACTIVE_STEP: return {...state, registrationActiveStep: state.registrationActiveStep - 1}\r\n    case interfaceActionTypes.RESTORE_INTERFACE_DEFAULTS: return {\r\n      ...state,\r\n      ...uiResetState\r\n    }\r\n    case interfaceActionTypes.SNACKBAR_OPEN: return {\r\n      ...state,\r\n      snackbarIsOpen: true,\r\n      snackbarMessage: action.payload.message\r\n    }\r\n    case interfaceActionTypes.SNACKBAR_CLOSE: return {...state, snackbarIsOpen: false}\r\n    case interfaceActionTypes.SET_LOADING_MESSAGE: return {...state, loadingMessage: action.payload.message}\r\n    \r\n    case interfaceActionTypes.TOGGLE_SHOW_HELP: return {...state, showHelp: !state.showHelp}\r\n\r\n    case interfaceActionTypes.SHOW_CHANGE_EMAIL_DIALOG: return {...state, changeEmailDialogIsOpen: true}\r\n    case interfaceActionTypes.HIDE_CHANGE_EMAIL_DIALOG: return {...state, changeEmailDialogIsOpen: false}\r\n\r\n    case interfaceActionTypes.SHOW_CHANGE_PASSWORD_DIALOG: return {...state, changePasswordDialogIsOpen: true}\r\n    case interfaceActionTypes.HIDE_CHANGE_PASSWORD_DIALOG: return {...state, changePasswordDialogIsOpen: false}\r\n    \r\n    default: return state;\r\n  }\r\n}","import catalog from './catalog';\r\nimport user from './user';\r\nimport ui from './ui';\r\nimport visualization from './visualization';\r\nimport dataSubmission from './dataSubmission.js';\r\nimport reduceReducers from 'reduce-reducers';\r\nimport Cookies from 'js-cookie';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\n// Consider building this object from initial states from each reducer\r\n// ** When adding new keys to redux store consider whether they need to be\r\n// reset on navigation for UI purposes. If so, add them with a default state\r\n// to the uiResetState in the ui reducer **\r\nconst initialState = {\r\n    // Catalog state pieces\r\n    catalogRequestState: null,\r\n    catalog: null,\r\n    datasetRequestState: null,\r\n    datasets: null,\r\n\r\n    // Interface state pieces\r\n    loginDialogIsOpen: false,\r\n    changePasswordDialogIsOpen: false,\r\n    changeEmailDialogIsOpen: false,\r\n    registrationActiveStep: 0,\r\n    snackbarIsOpen: false,\r\n    snackbarMessage: null,\r\n    loadingMessage: '',\r\n    showHelp: false,\r\n\r\n    // User state pieces\r\n    user: JSON.parse(Cookies.get('UserInfo') || null),\r\n\r\n    apiKeys: null,\r\n    apiKeyRetrievalState: null,\r\n    apiKeyCreationState: null,\r\n\r\n    clearLoginDialog: false,\r\n\r\n    userLoginState: null,\r\n\r\n    userValidationState: null,\r\n\r\n    userRegistrationState: null,\r\n\r\n    choosePasswordState: null,\r\n\r\n    preferences: {\r\n        \r\n    },\r\n\r\n    // Visualization state pieces\r\n    maps: [],\r\n    charts: [],\r\n    getCruiseTrajectoryRequestState: null,\r\n    cruiseTrajectory: null,\r\n    sampleData: null,\r\n    queryRequestState: null,\r\n    storedProcedureRequestState: null,\r\n    getTableStatsRequestState: null,\r\n    cruiseList: [],\r\n    getCruiseListRequestState: null,\r\n    showChartsOnce: null,\r\n    chartID: 0,\r\n\r\n    // Data Submission state pieces\r\n\r\n    dataSubmissions: [],\r\n    submissionComments: [],\r\n    submissionCommentHistoryRetrievalState: states.succeeded,\r\n    submissionFile: null\r\n}\r\n\r\nconst reducedReducer = reduceReducers(initialState, catalog, user, ui, visualization, dataSubmission);\r\n\r\nexport default reducedReducer;","import * as catalogActionTypes from '../actionTypes/catalog';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_SUCCESS: return {\r\n      ...state, \r\n      catalogRequestState: states.succeeded, \r\n      catalog: action.payload.catalog\r\n    }\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_FAILURE: return {...state, catalogRequestState: states.failed}\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_PROCESSING: return {...state, catalogRequestState: states.inProgress}\r\n\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SUCCESS: return {...state,\r\n      datasetsRequestState: states.succeeded, \r\n      datasets: action.payload.datasets\r\n    }\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_FAILURE: return {...state, datasetsRequestState: states.failed}\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_PROCESSING: return {...state, datasetsRequestState: states.inProgress}\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n}","export const RETRIEVAL_REQUEST_SEND = 'CATALOG_RETRIEVAL_REQUEST_SEND';\r\nexport const RETRIEVAL_REQUEST_SUCCESS = 'CATALOG_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const RETRIEVAL_REQUEST_FAILURE = 'CATALOG_RETRIEVAL_REQUEST_FAILURE';\r\nexport const RETRIEVAL_REQUEST_PROCESSING = 'CATALOG_RETRIEVAL_REQUEST_PROCESSING';\r\n\r\nexport const DATASET_RETRIEVAL_REQUEST_SEND = 'DATASET_CATALOG_RETRIEVAL_REQUEST_SEND';\r\nexport const DATASET_RETRIEVAL_REQUEST_SUCCESS = 'DATASET_CATALOG_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const DATASET_RETRIEVAL_REQUEST_FAILURE = 'DATASET_CATALOG_RETRIEVAL_REQUEST_FAILURE';\r\nexport const DATASET_RETRIEVAL_REQUEST_PROCESSING = 'DATASET_CATALOG_RETRIEVAL_REQUEST_PROCESSING';","import * as userActionTypes from '../actionTypes/user';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {    \r\n\r\n    case userActionTypes.LOGIN_REQUEST_PROCESSING: return {...state, userLoginState: states.inProgress}\r\n    case userActionTypes.LOGIN_REQUEST_SUCCESS: return {...state, userLoginState: states.succeeded, userLoginError: null}\r\n    case userActionTypes.LOGIN_REQUEST_FAILURE: return {...state, userLoginState: states.failed}\r\n    case userActionTypes.LOGIN_REQUEST_CLEAR_ERROR: return {...state, userLoginError: null}\r\n\r\n    case userActionTypes.STORE_INFO: return {...state, user: {...action.payload.user}}\r\n    case userActionTypes.DESTROY_INFO: return {...state, user: null, apiKeys: null, clearLoginDialog: true}\r\n    case userActionTypes.LOGIN_DIALOG_WAS_CLEARED: return {...state, clearLoginDialog: false}\r\n\r\n    case userActionTypes.VALIDATION_REQUEST_PROCESSING: return {...state, userValidationState: states.inProgress}\r\n    case userActionTypes.VALIDATION_REQUEST_FAILURE: return {...state, userValidationState: states.failed}\r\n    case userActionTypes.VALIDATION_REQUEST_SUCCESS: return {...state, userValidationState: null}\r\n\r\n    case userActionTypes.REGISTRATION_REQUEST_PROCESSING: return {...state, userRegistrationState: states.inProgress}\r\n    case userActionTypes.REGISTRATION_REQUEST_FAILURE: return {...state, userRegistrationState: states.failed}\r\n    case userActionTypes.REGISTRATION_REQUEST_SUCCESS: return {...state, userRegistrationState: states.succeeded}\r\n\r\n    case userActionTypes.KEY_RETRIEVAL_REQUEST_SUCCESS: return {...state, apiKeys: action.payload.keys}\r\n    case userActionTypes.KEY_RETRIEVAL_REQUEST_FAILURE: return {...state, apiKeyRetrievalState: states.failed}\r\n\r\n    case userActionTypes.KEY_CREATION_REQUEST_PROCESSING: return {...state, apiKeyCreationState: states.inProgress}\r\n    case userActionTypes.KEY_CREATION_REQUEST_FAILURE: return {...state, apiKeyCreationState: states.failed}\r\n    case userActionTypes.KEY_CREATION_REQUEST_SUCCESS: return {...state, apiKeyCreationState: states.succeeded}\r\n\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_SUCCESS: return {...state, choosePasswordState: states.succeeded}\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_FAILURE: return {...state, choosePasswordState: states.failed}\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_RESET: return {...state, choosePasswordState: null}\r\n\r\n    default: return state;\r\n    }\r\n}","export const LOG_OUT = \"LOG_OUT\";\r\n\r\nexport const STORE_INFO = 'STORE_INFO';\r\nexport const DESTROY_INFO = 'DESTROY_INFO';\r\nexport const LOGIN_DIALOG_WAS_CLEARED = 'LOGIN_DIALOG_WAS_CLEARED'\r\n\r\nexport const LOGIN_REQUEST_SEND = 'LOGIN_REQUEST_SEND';\r\nexport const LOGIN_REQUEST_PROCESSING = 'LOGIN_REQUEST_PROCESSING';\r\nexport const LOGIN_REQUEST_SUCCESS = 'LOGIN_REQUEST_SUCCESS';\r\nexport const LOGIN_REQUEST_FAILURE = 'LOGIN_REQUEST_FAILURE';\r\nexport const LOGIN_REQUEST_CLEAR_ERROR = 'LOGIN_REQUEST_CLEAR_ERROR';\r\n\r\nexport const GOOGLE_LOGIN_REQUEST_SEND = 'GOOGLE_LOGIN_REQUEST_SEND';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_PROCESSING = 'GOOGLE_LOGIN_REQUEST_SEND_PROCESSING';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_SUCCESS = 'GOOGLE_LOGIN_REQUEST_SEND_SUCCESS';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_FAILURE = 'GOOGLE_LOGIN_REQUEST_SEND_FAILURE';\r\n\r\nexport const REGISTRATION_REQUEST_SEND = 'REGISTRATION_REQUEST_SEND';\r\nexport const REGISTRATION_REQUEST_PROCESSING = 'REGISTRATION_REQUEST_PROCESSING';\r\nexport const REGISTRATION_REQUEST_SUCCESS = 'REGISTRATION_REQUEST_SUCCESS';\r\nexport const REGISTRATION_REQUEST_FAILURE = 'REGISTRATION_REQUEST_FAILURE';\r\n\r\nexport const VALIDATION_REQUEST_SEND = 'VALIDATION_REQUEST_SEND';\r\nexport const VALIDATION_REQUEST_PROCESSING = 'VALIDATION_REQUEST_PROCESSING';\r\nexport const VALIDATION_REQUEST_SUCCESS = 'VALIDATION_REQUEST_SUCCESS';\r\nexport const VALIDATION_REQUEST_FAILURE = 'VALIDATION_REQUEST_FAILURE';\r\n\r\nexport const KEY_RETRIEVAL_REQUEST_SEND = 'KEY_RETRIEVAL_REQUEST_SEND';\r\nexport const KEY_RETRIEVAL_REQUEST_SUCCESS = 'KEY_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const KEY_RETRIEVAL_REQUEST_FAILURE = 'KEY_RETRIEVAL_REQUEST_FAILURE';\r\n\r\nexport const KEY_CREATION_REQUEST_SEND = 'KEY_CREATION_REQUEST_SEND';\r\nexport const KEY_CREATION_REQUEST_PROCESSING = 'KEY_CREATION_REQUEST_PROCESSING';\r\nexport const KEY_CREATION_REQUEST_SUCCESS = 'KEY_CREATION_REQUEST_SUCCESS';\r\nexport const KEY_CREATION_REQUEST_FAILURE = 'KEY_CREATION_REQUEST_FAILURE';\r\n\r\nexport const UPDATE_USER_INFO_REQUEST_SEND = 'UPDATE_USER_INFO_REQUEST_SEND';\r\nexport const UPDATE_USER_INFO_REQUEST_SUCCESS = 'UPDATE_USER_INFO_REQUEST_SUCCESS';\r\nexport const UPDATE_USER_INFO_REQUEST_FAILURE = 'UPDATE_USER_INFO_REQUEST_FAILURE';\r\n\r\nexport const REFRESH_LOGIN = 'REFRESH_LOGIN';\r\n\r\nexport const INITIALIZE_GOOGLE_AUTH = 'INITIALIZE_GOOGLE_AUTH';\r\nexport const STORE_GOOGLE_AUTH = 'STORE_GOOGLE_AUTH';\r\n\r\nexport const RECOVER_PASSWORD_REQUEST_SEND = 'RECOVER_PASSWORD_REQUEST_SEND';\r\n\r\nexport const CHOOSE_PASSWORD_REQUEST_SEND = 'CHOOSE_PASSWORD_REQUEST_SEND';\r\nexport const CHOOSE_PASSWORD_REQUEST_SUCCESS = 'CHOOSE_PASSWORD_REQUEST_SUCCESS';\r\nexport const CHOOSE_PASSWORD_REQUEST_FAILURE = 'CHOOSE_PASSWORD_REQUEST_FAILURE';\r\nexport const CHOOSE_PASSWORD_REQUEST_RESET = 'CHOOSE_PASSWORD_REQUEST_RESET';\r\n\r\nexport const CONTACT_US_REQUEST_SEND = 'CONTACT_US_REQUEST_SEND';\r\n\r\nexport const CHANGE_PASSWORD_REQUEST_SEND = 'CHANGE_PASSWORD_REQUEST_SEND';\r\n\r\nexport const CHANGE_EMAIL_REQUEST_SEND = 'CHANGE_EMAIL_REQUEST_SEND';","export const INTERFACE_SHOW_LOGIN_DIALOG = \"INTERFACE_SHOW_LOGIN_DIALOG\";\r\nexport const INTERFACE_HIDE_LOGIN_DIALOG = \"INTERFACE_HIDE_LOGIN_DIALOG\";\r\n\r\nexport const REGISTRATION_NEXT_ACTIVE_STEP = 'REGISTRATION_NEXT_ACTIVE_STEP';\r\nexport const REGISTRATION_PREVIOUS_ACTIVE_STEP = 'REGISTRATION_PREVIOUS_ACTIVE_STEP';\r\n\r\nexport const RESTORE_INTERFACE_DEFAULTS = 'RESTORE_INTERFACE_DEFAULTS';\r\n\r\nexport const SNACKBAR_OPEN = 'SNACKBAR_OPEN';\r\nexport const SNACKBAR_CLOSE = 'SNACKBAR_CLOSE';\r\n\r\nexport const SET_LOADING_MESSAGE = 'SET_LOADING_MESSAGE';\r\n\r\nexport const TOGGLE_SHOW_HELP = 'TOGGLE_SHOW_HELP';\r\n\r\nexport const SHOW_CHANGE_PASSWORD_DIALOG = 'SHOW_CHANGE_PASSWORD_DIALOG';\r\nexport const HIDE_CHANGE_PASSWORD_DIALOG = 'HIDE_CHANGE_PASSWORD_DIALOG';\r\n\r\nexport const SHOW_CHANGE_EMAIL_DIALOG = 'SHOW_CHANGE_EMAIL_DIALOG';\r\nexport const HIDE_CHANGE_EMAIL_DIALOG = 'HIDE_CHANGE_EMAIL_DIALOG';\r\n\r\nexport const COPY_TEXT_TO_CLIPBOARD = 'COPY_TEXT_TO_CLIPBOARD';","import states from '../../Enums/asyncRequestStates';\r\nimport * as visualizationActionTypes from '../actionTypes/visualization';\r\n\r\nexport default function(state, action) {\r\n    switch(action.type) {\r\n        case visualizationActionTypes.QUERY_REQUEST_PROCESSING: return {...state, queryRequestState: states.inProgress};\r\n        case visualizationActionTypes.QUERY_REQUEST_FAILURE: return {...state, queryRequestState: states.failed};\r\n        case visualizationActionTypes.QUERY_REQUEST_SUCCESS: return {...state, queryRequestState: states.succeeded};\r\n        \r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_PROCESSING: return {...state, storedProcedureRequestState: states.inProgress}\r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_FAILURE: return {...state, storedProcedureRequestState: states.failed}\r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_SUCCESS: return {...state, storedProcedureRequestState: states.succeeded}\r\n\r\n\r\n        case visualizationActionTypes.ADD_LAYER: return { // Not currently in use\r\n            ...state,\r\n            layers: [...state.layers, action.payload.newLayer]\r\n        }\r\n\r\n        case visualizationActionTypes.STORE_SAMPLE_DATA: return {\r\n            ...state,\r\n            sampleData: action.payload.sampleData\r\n        }\r\n\r\n        case visualizationActionTypes.ADD_MAP: return {\r\n            ...state,\r\n            maps: [...state.maps, action.payload.mapInfo]\r\n        }\r\n\r\n        case visualizationActionTypes.ADD_CHART: return {\r\n            ...state,\r\n            charts: [{...action.payload.chartInfo, id: state.chartID}, ...state.charts],\r\n            chartID: state.chartID + 1\r\n        }\r\n\r\n        case visualizationActionTypes.CLEAR_CHARTS: return {...state, charts: []}\r\n\r\n        case visualizationActionTypes.CLEAR_MAPS: return {...state, maps: []}\r\n\r\n        case visualizationActionTypes.DELETE_CHART: return {...state, \r\n            charts: [\r\n                ...state.charts.slice(0, action.payload.chartIndex),\r\n                ...state.charts.slice(action.payload.chartIndex + 1)\r\n            ]\r\n        }\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_PROCESSING: return {...state, getCruiseTrajectoryRequestState: states.inProgress}\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SUCCESS: return {...state,\r\n            cruiseTrajectory: action.payload.trajectory,\r\n            getCruiseTrajectoryRequestState: states.succeeded\r\n        }\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_CLEAR: return {...state, cruiseTrajectory: null}\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_FAILURE: return {...state, getCruiseTrajectoryRequestState: states.failed}\r\n\r\n        case visualizationActionTypes.CRUISE_LIST_REQUEST_PROCESSING: return {...state, getCruiseListRequestState: states.inProgress}\r\n\r\n        case visualizationActionTypes.CRUISE_LIST_REQUEST_SUCCESS: return {\r\n            ...state,\r\n            getCruiseListRequestState: states.succeeded,\r\n            cruiseList: action.payload.cruiseList\r\n        }\r\n\r\n        case visualizationActionTypes.TRIGGER_SHOW_CHARTS: return {...state, showChartsOnce: true}\r\n        case visualizationActionTypes.COMPLETED_SHOW_CHARTS: return {...state, showChartsOnce: false}\r\n\r\n        case visualizationActionTypes.TABLE_STATS_REQUEST_SUCCESS: return {\r\n            ...state, \r\n            datasets: {\r\n                ...state.datasets,\r\n                [action.payload.datasetLongName]: {\r\n                    ...state.datasets[action.payload.datasetLongName],\r\n                    tableStats: action.payload.tableStats\r\n                }\r\n            }}\r\n\r\n        default: return state;\r\n    }\r\n}","export const QUERY_REQUEST_SEND = 'QUERY REQUEST SEND';\r\nexport const QUERY_REQUEST_SUCCESS = 'QUERY REQUEST SUCCESS';\r\nexport const QUERY_REQUEST_FAILURE = 'QUERY REQUEST FAILURE';\r\nexport const QUERY_REQUEST_PROCESSING = 'QUERY REQUEST PROCESSING';\r\n\r\nexport const STORED_PROCEDURE_REQUEST_SEND = 'STORED_PROCEDURE_REQUEST_SEND';\r\nexport const STORED_PROCEDURE_REQUEST_SUCCESS = 'STORED_PROCEDURE_REQUEST_SUCCESS';\r\nexport const STORED_PROCEDURE_REQUEST_FAILURE = 'STORED_PROCEDURE_REQUEST_FAILURE';\r\nexport const STORED_PROCEDURE_REQUEST_PROCESSING = 'STORED_PROCEDURE_REQUEST_PROCESSING';\r\n\r\nexport const ADD_MAP = 'ADD_MAP';\r\nexport const ADD_CHART = 'ADD_CHART';\r\n\r\nexport const ADD_LAYER = 'ADD_LAYER';\r\n\r\nexport const STORE_SAMPLE_DATA = 'STORE_SAMPLE_DATA';\r\n\r\nexport const CLEAR_CHARTS = 'CLEAR_CHARTS';\r\nexport const CLEAR_MAPS = 'CLEAR_MAPS';\r\nexport const DELETE_CHART = 'DELETE_CHART';\r\n\r\nexport const TABLE_STATS_REQUEST_SEND = 'ABLE_STATS_REQUEST_SEND';\r\nexport const TABLE_STATS_REQUEST_PROCESSING = 'TABLE_STATS_REQUEST_PROCESSING';\r\nexport const TABLE_STATS_REQUEST_SUCCESS = 'TABLE_STATS_REQUEST_SUCCESS';\r\nexport const TABLE_STATS_REQUEST_FAILURE = 'TABLE_STATS_REQUEST_FAILURE';\r\n\r\nexport const CRUISE_TRAJECTORY_REQUEST_SEND = 'CRUISE_TRAJECTORY_REQUEST_SEND';\r\nexport const CRUISE_TRAJECTORY_REQUEST_SUCCESS = 'CRUISE_TRAJECTORY_REQUEST_SUCCESS';\r\nexport const CRUISE_TRAJECTORY_REQUEST_FAILURE = 'CRUISE_TRAJECTORY_REQUEST_FAILURE';\r\nexport const CRUISE_TRAJECTORY_REQUEST_PROCESSING = 'CRUISE_TRAJECTORY_REQUEST_PROCESSING';\r\nexport const CRUISE_TRAJECTORY_CLEAR = 'CRUISE_TRAJECTORY_CLEAR';\r\n\r\nexport const CRUISE_LIST_REQUEST_SEND = 'CRUISE_LIST_REQUEST_SEND';\r\nexport const CRUISE_LIST_REQUEST_SUCCESS = 'CRUISE_LIST_REQUEST_SUCCESS';\r\nexport const CRUISE_LIST_REQUEST_FAILURE = 'CRUISE_LIST_REQUEST_FAILURE';\r\nexport const CRUISE_LIST_REQUEST_PROCESSING = 'CRUISE_LIST_REQUEST_PROCESSING';\r\n\r\nexport const TRIGGER_SHOW_CHARTS = 'TRIGGER_SHOW_CHARTS';\r\nexport const COMPLETED_SHOW_CHARTS = 'COMPLETED_SHOW_CHARTS';\r\n\r\nexport const CSV_DOWNLOAD_REQUEST_SEND = 'CSV_DOWNLOAD_REQUEST_SEND';\r\nexport const CSV_DOWNLOAD_REQUEST_SUCCESS = 'CSV_DOWNLOAD_REQUEST_SUCCESS';\r\nexport const CSV_DOWNLOAD_REQUEST_FAILURE = 'CSV_DOWNLOAD_REQUEST_FAILURE';\r\nexport const CSV_DOWNLOAD_REQUEST_PROCESSING = 'CSV_DOWNLOAD_REQUEST_PROCESSING';\r\n\r\nexport const CSV_FROM_VIZ_REQUEST_SEND = 'CSV_FROM_VIZ_REQUEST_SEND';\r\n\r\nexport const DOWNLOAD_TEXT_AS_CSV = 'DOWNLOAD_TEXT_AS_CSV';","import * as dataSubmissionActionTypes from '../actionTypes/dataSubmission';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nexport default function(state, action) {\r\n  \r\n  switch (action.type) {    \r\n    case dataSubmissionActionTypes.STORE_SUBMISSIONS: return {...state, dataSubmissions: action.payload.submissions}\r\n    case dataSubmissionActionTypes.SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE: return {...state, submissionCommentHistoryRetrievalState: action.payload.state}\r\n    case dataSubmissionActionTypes.STORE_SUBMISSION_COMMENTS:\r\n      let updatedComments = [...state.submissionComments];\r\n      updatedComments[action.payload.submissionID] = action.payload.comments;\r\n\r\n      return {\r\n        ...state,\r\n        submissionComments: updatedComments\r\n      }\r\n\r\n    case dataSubmissionActionTypes.STORE_SUBMISSION_FILE: return {...state, submissionFile: action.payload.file}\r\n      \r\n    default: return state;\r\n    }\r\n}","export const RETRIEVE_SUBMISSIONS_BY_USER = 'RETRIEVE_SUBMISSIONS_BY_USER';\r\nexport const RETRIEVE_ALL_SUBMISSIONS = 'RETRIEVE_ALL_SUBMISSIONS';\r\nexport const STORE_SUBMISSIONS = 'STORE_SUBMISSIONS';\r\n\r\nexport const ADD_SUBMISSION_COMMENT = 'ADD_SUBMISSION_COMMENT';\r\nexport const RETRIEVE_SUBMISSION_COMMENT_HISTORY = 'RETRIEVE_SUBMISSION_COMMENT_HISTORY';\r\nexport const STORE_SUBMISSION_COMMENTS = 'STORE_SUBMISSION_COMMENTS';\r\n\r\nexport const UPLOAD_SUBMISSION = 'UPLOAD_SUBMISSION';\r\n\r\nexport const SET_SUBMISSION_PHASE = 'SET_SUBMISSION_PHASE';\r\n\r\nexport const SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE = 'SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE';\r\n\r\nexport const RETRIEVE_MOST_RECENT_FILE = 'RETRIEVE_MOST_RECENT_FILE';\r\n\r\nexport const STORE_SUBMISSION_FILE = 'STORE_SUBMISSION_FILE';","import * as userActionTypes from '../actionTypes/user';\r\n\r\n// Login actions\r\nexport const userLoginRequestSend = (username, password) => ({\r\n    type: userActionTypes.LOGIN_REQUEST_SEND,\r\n    payload: {\r\n        username,\r\n        password\r\n    }\r\n});\r\n\r\nexport const userLoginRequestProcessing = () => {\r\n    return {type: userActionTypes.LOGIN_REQUEST_PROCESSING};\r\n};\r\n\r\nexport const userLoginRequestFailure = (error) => ({\r\n    type: userActionTypes.LOGIN_REQUEST_FAILURE,\r\n});\r\n\r\nexport const userLoginRequestSuccess = () => ({\r\n    type: userActionTypes.LOGIN_REQUEST_SUCCESS\r\n});\r\n\r\nexport const storeInfo = (user) => ({\r\n    type: userActionTypes.STORE_INFO,\r\n    payload: {\r\n        user\r\n    }\r\n});\r\n\r\nexport const userLoginRequestClearError = () => ({\r\n    type: userActionTypes.LOGIN_REQUEST_CLEAR_ERROR\r\n})\r\n\r\n// Google login actions\r\nexport const googleLoginRequestSend = (userIDToken) => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND,\r\n    payload: {\r\n        userIDToken\r\n    }\r\n});\r\n\r\nexport const googleLoginRequestProcessing = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_PROCESSING\r\n});\r\n\r\nexport const googleLoginRequestSuccess = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_SUCCESS\r\n});\r\n\r\nexport const googleLoginRequestFailure = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_FAILURE\r\n});\r\n\r\n// Log out actions\r\nexport const logOut = () => ({\r\n    type:userActionTypes.LOG_OUT\r\n});\r\n\r\nexport const destroyInfo = () => ({\r\n    type: userActionTypes.DESTROY_INFO\r\n});\r\n\r\nexport const loginDialogWasCleared = () => ({\r\n    type: userActionTypes.LOGIN_DIALOG_WAS_CLEARED\r\n});\r\n\r\n// Validation actions\r\nexport const userValidationRequestSend = (username, email) => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_SEND,\r\n    payload: {\r\n        username,\r\n        email\r\n    }\r\n});\r\n\r\nexport const userValidationRequestProcessing = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const userValidationRequestFailure = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const userValidationRequestSuccess = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_SUCCESS\r\n});\r\n\r\n// Registration actions\r\nexport const userRegistrationRequestSend = (payload) => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_SEND,\r\n    payload\r\n});\r\n\r\nexport const userRegistrationRequestProcessing = () => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const userRegistrationRequestFailure = () => ({\r\n    type:userActionTypes.REGISTRATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const userRegistrationRequestSuccess = () => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_SUCCESS\r\n});\r\n\r\n// Api key retrieval actions\r\nexport const keyRetrievalRequestSend = () => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_SEND\r\n});\r\n\r\nexport const keyRetrievalRequestSuccess = (keys) => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        keys\r\n    }\r\n});\r\n\r\nexport const keyRetrievalRequestFailure = () => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_FAILURE\r\n});\r\n\r\nexport const keyCreationRequestSend = (description) => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_SEND,\r\n    payload: {\r\n        description\r\n    }\r\n});\r\n\r\nexport const keyCreationRequestProcessing = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const keyCreationRequestFailure = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const keyCreationRequestSuccess = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_SUCCESS\r\n});\r\n\r\nexport const refreshLogin = () => ({\r\n    type: userActionTypes.REFRESH_LOGIN\r\n});\r\n\r\nexport const updateUserInfoRequestSend = (userInfo) => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_SEND,\r\n    payload: {\r\n        userInfo\r\n    }\r\n});\r\n\r\nexport const updateUserInfoRequestSuccess = () => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_SUCCESS\r\n});\r\n\r\nexport const updateUserInfoRequestFailure = () => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_FAILURE\r\n});\r\n\r\nexport const initializeGoogleAuth = () => ({\r\n    type: userActionTypes.INITIALIZE_GOOGLE_AUTH\r\n});\r\n\r\nexport const storeGoogleAuth = () => ({\r\n    type: userActionTypes.STORE_GOOGLE_AUTH\r\n});\r\n\r\nexport const recoverPasswordRequestSend = (email) => ({\r\n    type: userActionTypes.RECOVER_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        email\r\n    }\r\n});\r\n\r\nexport const choosePasswordRequestSend = ({password, token}) => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        password,\r\n        token\r\n    }\r\n});\r\n\r\nexport const choosePasswordRequestSuccess = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_SUCCESS\r\n});\r\n\r\nexport const choosePasswordRequestFailure = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_FAILURE\r\n});\r\n\r\nexport const choosePasswordRequestReset = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_RESET\r\n});\r\n\r\nexport const contactUsRequestSend = ({name, email, subject, message}) => ({\r\n    type: userActionTypes.CONTACT_US_REQUEST_SEND,\r\n    payload: {\r\n        name,\r\n        email,\r\n        subject,\r\n        message\r\n    }\r\n});\r\n\r\nexport const changePasswordRequestSend = (oldPassword, newPassword, username) => ({\r\n    type: userActionTypes.CHANGE_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        password: oldPassword,\r\n        newPassword,\r\n        username\r\n    }\r\n});\r\n\r\nexport const changeEmailRequestSend = (email, password, username) => ({\r\n    type: userActionTypes.CHANGE_EMAIL_REQUEST_SEND,\r\n    payload: {\r\n        email,\r\n        password,\r\n        username\r\n    }\r\n});","import * as catalogActionTypes from '../actionTypes/catalog';\r\n\r\nexport const retrievalRequestSend = () => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_SEND\r\n})\r\n\r\nexport const retrievalRequestProcessing = () => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_PROCESSING\r\n})\r\n\r\nexport const retrievalRequestSuccess = (catalog) => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        catalog\r\n    }\r\n})\r\n\r\nexport const retrievalRequestFailure = () => ({\r\n    type:catalogActionTypes.RETRIEVAL_REQUEST_FAILURE\r\n})\r\n\r\nexport const datasetRetrievalRequestSend = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SEND\r\n})\r\n\r\nexport const datasetRetrievalRequestProcessing = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_PROCESSING\r\n})\r\n\r\nexport const datasetRetrievalRequestSuccess = (datasets) => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        datasets\r\n    }\r\n})\r\n\r\nexport const datasetRetrievalRequestFailure = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_FAILURE\r\n})","import * as interfaceActionTypes from '../actionTypes/ui';\r\n\r\nexport const showLoginDialog = () => ({\r\n    type: interfaceActionTypes.INTERFACE_SHOW_LOGIN_DIALOG\r\n});\r\n\r\nexport const hideLoginDialog = () => ({\r\n    type: interfaceActionTypes.INTERFACE_HIDE_LOGIN_DIALOG\r\n});\r\n\r\nexport const registrationNextActiveStep = () => ({\r\n    type: interfaceActionTypes.REGISTRATION_NEXT_ACTIVE_STEP\r\n});\r\n\r\nexport const registrationPreviousActiveStep = () => ({\r\n    type: interfaceActionTypes.REGISTRATION_PREVIOUS_ACTIVE_STEP\r\n});\r\n\r\nexport const restoreInterfaceDefaults = () => ({\r\n    type: interfaceActionTypes.RESTORE_INTERFACE_DEFAULTS\r\n});\r\n\r\nexport const snackbarOpen = (message) => ({\r\n    type: interfaceActionTypes.SNACKBAR_OPEN,\r\n    payload: {\r\n        message\r\n    }\r\n});\r\n\r\nexport const snackbarClose = () => ({\r\n    type: interfaceActionTypes.SNACKBAR_CLOSE\r\n});\r\n\r\nexport const setLoadingMessage = (message) => ({\r\n    type:interfaceActionTypes.SET_LOADING_MESSAGE,\r\n    payload: {\r\n        message\r\n    }\r\n});\r\n\r\nexport const toggleShowHelp = () => ({\r\n    type: interfaceActionTypes.TOGGLE_SHOW_HELP\r\n});\r\n\r\nexport const showChangePasswordDialog = () => ({\r\n    type: interfaceActionTypes.SHOW_CHANGE_PASSWORD_DIALOG\r\n});\r\n\r\nexport const hideChangePasswordDialog = () => ({\r\n    type: interfaceActionTypes.HIDE_CHANGE_PASSWORD_DIALOG\r\n});\r\n\r\nexport const showChangeEmailDialog = () => ({\r\n    type: interfaceActionTypes.SHOW_CHANGE_EMAIL_DIALOG\r\n});\r\n\r\nexport const hideChangeEmailDialog = () => ({\r\n    type: interfaceActionTypes.HIDE_CHANGE_EMAIL_DIALOG\r\n});\r\n\r\nexport const copyTextToClipboard = (text) => ({\r\n    type: interfaceActionTypes.COPY_TEXT_TO_CLIPBOARD,\r\n    payload: {\r\n        text\r\n    }\r\n});","import * as visualizationActionTypes from '../actionTypes/visualization';\r\n\r\nexport const queryRequestSend = (query) => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_SEND,\r\n    payload: {\r\n        query\r\n    }\r\n})\r\n\r\nexport const queryRequestSuccess = (data) => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_SUCCESS,\r\n    payload: {\r\n        data\r\n    }\r\n})\r\n\r\nexport const queryRequestFailure = () => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_FAILURE\r\n})\r\n\r\nexport const queryRequestProcessing = () => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_PROCESSING\r\n})\r\n\r\nexport const storedProcedureRequestSend = (storedProcedureInfo) => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_SEND,\r\n    payload: {...storedProcedureInfo}\r\n})\r\n\r\nexport const storedProcedureRequestSuccess = (data) => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_SUCCESS,\r\n    payload: {\r\n        data\r\n    }\r\n})\r\n\r\nexport const storedProcedureRequestFailure = () => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_FAILURE\r\n})\r\n\r\nexport const storedProcedureRequestProcessing = () => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_PROCESSING\r\n})\r\n\r\nexport const addLayer = (newLayer) => ({\r\n    type: visualizationActionTypes.ADD_LAYER,\r\n    payload: {\r\n        newLayer\r\n    }\r\n})\r\n\r\nexport const storeSampleData = sampleData => ({\r\n    type: visualizationActionTypes.STORE_SAMPLE_DATA,\r\n    payload: {\r\n        sampleData\r\n    }\r\n})\r\n\r\nexport const addMap = (mapInfo) => ({\r\n    type: visualizationActionTypes.ADD_MAP,\r\n    payload: {\r\n        mapInfo\r\n    }\r\n})\r\n\r\nexport const addChart = (chartInfo) => ({\r\n    type: visualizationActionTypes.ADD_CHART,\r\n    payload: {\r\n        chartInfo\r\n    }\r\n})\r\n\r\nexport const clearCharts = () => ({\r\n    type: visualizationActionTypes.CLEAR_CHARTS\r\n})\r\n\r\nexport const clearMaps = () => ({\r\n    type: visualizationActionTypes.CLEAR_MAPS\r\n})\r\n\r\nexport const deleteChart = (chartIndex) => ({\r\n    type: visualizationActionTypes.DELETE_CHART,\r\n    payload: {\r\n        chartIndex\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestSend = (tableName, datasetLongName) => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_SEND,\r\n    payload: {\r\n        tableName,\r\n        datasetLongName\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestProcessing = () => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_PROCESSING\r\n})\r\n\r\nexport const tableStatsRequestSuccess = (tableStats, datasetLongName) => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_SUCCESS,\r\n    payload: {\r\n        tableStats,\r\n        datasetLongName\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestFailure = () => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_FAILURE\r\n})\r\n\r\nexport const cruiseTrajectoryRequestSend = (id) => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SEND,\r\n    payload: {\r\n        id\r\n    }\r\n})\r\n\r\nexport const cruiseTrajectoryRequestSuccess = (trajectory) => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SUCCESS,\r\n    payload: {\r\n        trajectory\r\n    }\r\n})\r\n\r\nexport const cruiseTrajectoryRequestFailure = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_FAILURE,\r\n})\r\n\r\nexport const cruiseTrajectoryRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_PROCESSING,\r\n})\r\n\r\nexport const cruiseTrajectoryClear = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_CLEAR\r\n})\r\n\r\nexport const cruiseListRequestSend = (id) => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_SEND,\r\n})\r\n\r\nexport const cruiseListRequestSuccess = (cruiseList) => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_SUCCESS,\r\n    payload: {\r\n        cruiseList\r\n    }\r\n})\r\n\r\nexport const cruiseListRequestFailure = () => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_FAILURE,\r\n})\r\n\r\nexport const cruiseListRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_PROCESSING,\r\n})\r\n\r\nexport const triggerShowCharts = () => ({\r\n    type: visualizationActionTypes.TRIGGER_SHOW_CHARTS\r\n})\r\n\r\nexport const completedShowCharts = () => ({\r\n    type: visualizationActionTypes.COMPLETED_SHOW_CHARTS\r\n})\r\n\r\nexport const csvDownloadRequestSend = (query, fileName, tableName) => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SEND,\r\n    payload: {\r\n        query,\r\n        fileName,\r\n        tableName\r\n    }\r\n})\r\n\r\nexport const csvDownloadRequestFailure = () => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_FAILURE\r\n})\r\n\r\nexport const csvDownloadRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_PROCESSING\r\n})\r\n\r\nexport const csvDownloadRequestSuccess = (text) => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SUCCESS,\r\n    payload: {\r\n        text\r\n    }\r\n})\r\n\r\n//dataset download\r\nexport const downloadTextAsCsv = (text, fileName) => ({\r\n    type: visualizationActionTypes.DOWNLOAD_TEXT_AS_CSV,\r\n    payload: {\r\n        text,\r\n        fileName\r\n    }\r\n})\r\n\r\nexport const csvFromVizRequestSend = (vizObject, tableName, shortName, longName) => ({\r\n    type: visualizationActionTypes.CSV_FROM_VIZ_REQUEST_SEND,\r\n    payload: {\r\n        vizObject,\r\n        tableName,\r\n        shortName,\r\n        longName\r\n    }\r\n})","import * as dataSubmissionActionTypes from '../actionTypes/dataSubmission';\r\n\r\nexport const retrieveDataSubmissionsByUser = () => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_SUBMISSIONS_BY_USER\r\n});\r\n\r\nexport const addSubmissionComment = (submissionID, comment) => ({\r\n    type: dataSubmissionActionTypes.ADD_SUBMISSION_COMMENT,\r\n    payload: {\r\n        submissionID,\r\n        comment\r\n    }\r\n});\r\n\r\nexport const retrieveSubmissionCommentHistory = (submissionID) => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_SUBMISSION_COMMENT_HISTORY,\r\n    payload: {\r\n        submissionID\r\n    }\r\n});\r\n\r\nexport const uploadSubmission = (file) => ({\r\n    type: dataSubmissionActionTypes.UPLOAD_SUBMISSION,\r\n    payload: {\r\n        file\r\n    }\r\n});\r\n\r\nexport const setSubmissionPhase = (submissionID, phaseID) => ({\r\n    type: dataSubmissionActionTypes.SET_SUBMISSION_PHASE,\r\n    payload: {\r\n        submissionID,\r\n        phaseID\r\n    }\r\n});\r\n\r\nexport const storeSubmissions = (submissions) => ({\r\n    type: dataSubmissionActionTypes.STORE_SUBMISSIONS,\r\n    payload: {\r\n        submissions\r\n    }\r\n})\r\n\r\nexport const storeSubmissionComments = (payload) => ({\r\n    type: dataSubmissionActionTypes.STORE_SUBMISSION_COMMENTS,\r\n    payload\r\n});\r\n\r\nexport const retrieveAllSubmissions = () => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_ALL_SUBMISSIONS\r\n});\r\n\r\nexport const setSubmissionCommentHistoryRetrievalState = (state) => ({\r\n    type: dataSubmissionActionTypes.SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE,\r\n    payload: {\r\n        state\r\n    }\r\n});\r\n\r\nexport const retrieveMostRecentFile = (submissionID) => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_MOST_RECENT_FILE,\r\n    payload: {\r\n        submissionID\r\n    }\r\n});\r\n\r\nexport const storeSubmissionFile = (file) => ({\r\n    type: dataSubmissionActionTypes.STORE_SUBMISSION_FILE,\r\n    payload: {\r\n        file\r\n    }\r\n});","export const apiUrl = window.location.origin === 'http://localhost:3000' ? 'http://localhost:8080' : window.location.origin;","const spatialResolutions = {\r\n    irregular: 'Irregular',\r\n    halfDegree: '1/2 X 1/2' ,\r\n    quarterDegree: '1/4 X 1/4' ,\r\n    twentyFifthDegree: '1/25 X 1/25' ,\r\n    fourKm: '4km X 4km',\r\n    twelfthDegree: '1/12 X 1/12',\r\n    seventyKm: '70km X 70km',\r\n    oneDegree: '1 X 1',\r\n    nineKm: '9km X 9km',\r\n    twentyFiveKm: '25km X 25km'\r\n}\r\n\r\nexport default spatialResolutions;","import spatialResolutions from '../Enums/spatialResolutions';\r\n\r\nconst mapSpatialResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [spatialResolutions.halfDegree] : .5,\r\n        [spatialResolutions.quarterDegree] : .25,\r\n        [spatialResolutions.twentyFifthDegree] : .04,\r\n        [spatialResolutions.fourKm] : .041672,\r\n        [spatialResolutions.twelfthDegree] : .083333,\r\n        [spatialResolutions.oneDegree] : 1,\r\n        [spatialResolutions.seventyKm] : .25,\r\n        [spatialResolutions.nineKm] : .083333,\r\n        [spatialResolutions.twentyFiveKm] : .23148\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapSpatialResolutionToNumber;","// Flattens an array by 1 level\r\n// [[[],[]], [[],[]], [[],[]]] => [[], [], [], [], [], []]\r\n\r\nconst flattenArray = (arr) => {\r\n    let flattenedArray = [];\r\n\r\n    for(let i = 0; i < arr.length; i++){\r\n        for(let j = 0; j < arr[i].length; j++){\r\n            flattenedArray.push(arr[i][j]);\r\n        }\r\n    }\r\n\r\n    return flattenedArray;\r\n}\r\n\r\nexport default flattenArray;","// Interval is number of indices between changes in this parameter, or in order words\r\n// how many times will we see the same value for this parameter in a row before it changes\r\n// as we iterate through the values array.\r\n// We use modulo for cases where data.length / interval is larger than the number of \r\n// distinct values for that parameter.\r\n\r\nconst splitData = (data, changeInterval, numDistinct) => {\r\n    var splitData = [];\r\n\r\n    for(let i = 0; i < numDistinct; i++){\r\n        splitData.push([]);\r\n    }\r\n\r\n    for(let i = 0; i < data.length; i++){\r\n        let index = Math.floor(i / changeInterval) % numDistinct;\r\n        splitData[index].push(data[i]);\r\n    }\r\n\r\n    return splitData;\r\n}\r\n\r\nexport default splitData;","// mergeTargetDistance - number of hops between arrays being merged\r\n// mergeTargetNumber - number of arrays being merged - implicit\r\n// nextStartDistance - once a merge is complete how many hops to next start\r\nconst mergeArraysAndComputeMeans = (data, mergeTargetDistance, nextMergeStartDistance, numArraysPerMerge) => {\r\n    let mergedArrays = [];\r\n\r\n    let travelDistance = mergeTargetDistance * (numArraysPerMerge - 1);\r\n    \r\n    // Find each merging start point\r\n    for(let i = 0; i + travelDistance < data.length; i += nextMergeStartDistance){\r\n        let subArray = [];\r\n\r\n        // Iterate through each value in the first array of this merge. Count\r\n        // the number of values summed so we can ignore nulls and compute a mean.\r\n        for(let j = 0; j < data[i].length; j ++){\r\n            let sum = 0;\r\n            let count = 0;\r\n\r\n            // Aggregate values of all merge targets\r\n            for(let k = i; k < i + (mergeTargetDistance * numArraysPerMerge); k += mergeTargetDistance){\r\n                if(isNaN(data[k][j])) {\r\n                    continue;\r\n                } else {                    \r\n                    sum += data[k][j];\r\n                    count ++;\r\n                }\r\n            }\r\n            subArray.push(count < 1 ? null : sum / (count));\r\n        }\r\n\r\n        mergedArrays.push(subArray)\r\n    }\r\n\r\n    return mergedArrays;\r\n}\r\n\r\nexport default mergeArraysAndComputeMeans;","const mergeArrays = (data, mergeTargetDistance, nextMergeStartDistance, numArraysPerMerge) => {\r\n    let mergedArrays = [];\r\n\r\n    let travelDistance = mergeTargetDistance * (numArraysPerMerge - 1);\r\n\r\n    // Find each merge start point\r\n    for(let i = 0; i + travelDistance < data.length; i += nextMergeStartDistance){\r\n        let subArray = [];\r\n\r\n        for(let j = i; j <= i + travelDistance; j += mergeTargetDistance){\r\n            subArray = [...subArray, ...data[j]];\r\n        }\r\n\r\n        mergedArrays.push(subArray);\r\n    }\r\n   \r\n    return mergedArrays;\r\n}\r\n\r\nexport default mergeArrays;\r\n\r\n","const subTypes= {\r\n    sectionMap: 'Section Map',\r\n    contourSectionMap: 'Contour Section Map',\r\n    timeSeries: 'Time Series',\r\n    histogram: 'Histogram',\r\n    depthProfile: 'Depth Profile',\r\n    heatmap: 'Heatmap',\r\n    contourMap: 'Contour Map',\r\n    sparse: 'Sparse'\r\n}\r\n\r\nexport default subTypes;","const temporalResolutions = {\r\n    threeMinutes: 'Three Minutes',\r\n    sixHourly: 'Six Hourly',\r\n    daily: 'Daily',\r\n    weekly: 'Weekly',\r\n    monthly: 'Monthly',\r\n    annual: 'Annual',\r\n    irregular: 'Irregular',\r\n    monthlyClimatology: 'Monthly Climatology',\r\n    threeDay: 'Three Days',\r\n    eightDayRunning: 'Eight Day Running',\r\n    eightDays: 'Eight Days '\r\n}\r\n\r\nexport default temporalResolutions;","import { quantile, extent } from 'd3-array';\r\n\r\nimport mapSpatialResolutionToNumber from '../Utility/mapSpatialResolutionToNumber';\r\nimport flattenArray from '../Utility/flattenArray';\r\nimport splitData from '../Utility/splitData';\r\nimport mergeArraysAndComputeMeans from '../Utility/mergeArraysAndComputeMeans';\r\nimport mergeArrays from '../Utility/mergeArrays';\r\n\r\nimport vizSubTypes from '../Enums/visualizationSubTypes';\r\nimport temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass SpaceTimeData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n\r\n        this.hasDepth = null;\r\n        this.hasHours = null;\r\n        this.isMonthly = null;\r\n\r\n        this.depths = new Set();\r\n        this.dates = new Set();\r\n        this.variableValues = [];\r\n\r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n        this.indexAdjust = null;\r\n        this.payload = payload;\r\n        this.lats = [];\r\n        this.lons = [];\r\n\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n        this.latMin = null;\r\n        this.latMax = null;\r\n\r\n        this.distinctLatCount = null;\r\n        this.distinctLonCount = null;\r\n    }\r\n\r\n    add(row) {\r\n        \r\n        let lat = parseFloat(row[1]);\r\n        let _lon = parseFloat(row[2]);\r\n        let lon = _lon < this.parameters.lon1 ? _lon + 360 : _lon;\r\n\r\n        if(this.hasDepth === null) {\r\n            this.hasHour = this.metadata.Table_Name === 'tblWind_NRT';\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n            this.hasDepth = row.length === 5 && !this.hasHour;\r\n            this.indexAdjust = this.hasDepth || this.hasHour? 1 : 0;\r\n            this.lonMin = lon;\r\n            this.lonMax = lon;\r\n            this.latMin = lat;\r\n            this.latMax = lat;\r\n        }\r\n\r\n        let value = parseFloat(row[3 + this.indexAdjust]);\r\n\r\n        if(this.hasDepth){\r\n            this.depths.add(row[3]);\r\n        }\r\n\r\n        var time;\r\n        if(this.hasHour){\r\n            time = new Date(row[0]);\r\n            time.setUTCHours(row[3])\r\n            time = time.toISOString();\r\n        } else time = row[0];\r\n        this.dates.add(time);\r\n        this.lats.push(lat);\r\n\r\n        this.lons.push(lon);\r\n\r\n        if(lon < this.lonMin) this.lonMin = lon;\r\n        if(lon > this.lonMax) this.lonMax = lon;\r\n        if(lat < this.latMin) this.latMin = lat;\r\n        if(lat > this.latMax) this.latMax = lat;\r\n\r\n        this.variableValues.push(value);\r\n    }\r\n\r\n    finalize() {\r\n\r\n        if(this.depths.size === 0) this.depths.add('Surface');\r\n\r\n        this.lonCount = this.lons.length / this.dates.size / this.depths.size;\r\n        this.latCount = this.lats.length / this.dates.size / this.depths.size;\r\n\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : parseFloat(quantile1.toPrecision(4));\r\n        this.zMax = quantile2 === undefined ? null : parseFloat(quantile2.toPrecision(4));\r\n        this.extent = extent(this.variableValues);\r\n\r\n        let spatialResolution = mapSpatialResolutionToNumber(this.metadata.Spatial_Resolution);\r\n        \r\n        this.distinctLatCount = Math.round((this.latMax - this.latMin) / spatialResolution) + 1;\r\n        this.distinctLonCount = Math.round((this.lonMax - this.lonMin) / spatialResolution) + 1;\r\n    }\r\n\r\n    generatePlotData(subType, splitByDate, splitByDepth) {        \r\n\r\n        // Intervals are the number of indices between each change for that parameter\r\n        // Intervals can change if you split out of order\r\n        const latInterval = this.distinctLonCount;\r\n        const depthInterval = latInterval * this.distinctLatCount;\r\n        const dateInterval = depthInterval * this.depths.size;\r\n\r\n        // an array of arrays containing variable values, each of which will become a chart\r\n        var variableValueSubsets;\r\n        \r\n        variableValueSubsets = splitData(this.variableValues, dateInterval, this.dates.size);\r\n        variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, depthInterval, this.depths.size));\r\n        variableValueSubsets = flattenArray(variableValueSubsets);\r\n\r\n        // Contour and heatmap compute mean variable values per lat and lon\r\n        // when not split by date and/or time\r\n        if(subType === vizSubTypes.contourMap || subType === vizSubTypes.heatmap) {\r\n            if(splitByDate && splitByDepth) {\r\n                // pass\r\n            } else if (splitByDate){\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    1, \r\n                    this.depths.size, \r\n                    this.depths.size\r\n                    );\r\n    \r\n            } else if (splitByDepth){\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    this.depths.size, \r\n                    1, \r\n                    this.dates.size\r\n                    );\r\n    \r\n            } else {\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    1, \r\n                    variableValueSubsets.length, \r\n                    variableValueSubsets.length\r\n                    );            \r\n            }\r\n        } \r\n        \r\n        // Histograms split and aggregate without computing means\r\n        else if (subType === vizSubTypes.histogram) {\r\n            if(splitByDate && splitByDepth) {\r\n                // pass\r\n            } else if (splitByDate){\r\n                variableValueSubsets = mergeArrays(\r\n                    variableValueSubsets, \r\n                    1,\r\n                    this.depths.size,\r\n                    this.depths.size\r\n                    );\r\n            } else if (splitByDepth){\r\n                variableValueSubsets = mergeArrays(\r\n                    variableValueSubsets,\r\n                    this.depths.size,\r\n                    1,\r\n                    this.dates.size\r\n                );\r\n            } else {\r\n                variableValueSubsets = [this.variableValues];\r\n            }\r\n        }\r\n\r\n        // Nothing here yet\r\n        else {}\r\n\r\n        return variableValueSubsets;\r\n    }\r\n\r\n    generateCsv = () => {\r\n        let dates = Array.from(this.dates);\r\n        let depths = Array.from(this.depths);\r\n        var csvArray;\r\n\r\n        if(this.hasDepth){\r\n            csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${this.lats[i]},${this.lons[i] > 180 ? this.lons[i] - 360 : this.lons[i]},${depths[Math.floor(i / (this.variableValues.length / (dates.length * depths.length))) % depths.length]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n\r\n        } else {\r\n            csvArray = [`time,lat,lon,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${this.lats[i]},${this.lons[i] > 180 ? this.lons[i] - 360 : this.lons[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SpaceTimeData;","const storedProcedures = {\r\n    sectionMap: 'uspSectionMap',\r\n    timeSeries: 'uspTimeSeries',\r\n    spaceTime: 'uspSpaceTime',\r\n    depthProfile: 'uspDepthProfile'\r\n}\r\n\r\nexport default storedProcedures;","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass TimeSeriesData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.variableValues = [];\r\n        this.stds = [];\r\n        this.dates = [];\r\n        this.lat = null;\r\n        this.lon = null;\r\n        this.depth = null;\r\n        this.depthIndexAdjust = null;\r\n    }\r\n\r\n    add(row) {\r\n        if(this.lat === null){\r\n            this.depthIndexAdjust = row.length === 6 ? 1 : 0;\r\n            this.lat = row[1];\r\n            this.lon = row[2];\r\n            this.depth = row.length === 6 ? row[3] : false;\r\n            this.hasHour = this.metadata.Table_Name === 'tblWind_NRT';\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }\r\n\r\n        this.variableValues.push(row[3 + this.depthIndexAdjust]);\r\n        this.stds.push(row[4 + this.depthIndexAdjust]);\r\n        this.dates.push(row[0]);\r\n    }\r\n\r\n    finalize() {\r\n        if(this.depth === false) this.depth = 'Surface';\r\n    }\r\n\r\n    generatePlotData() {\r\n        return this.variableValues;\r\n    }    \r\n\r\n    generateCsv() {\r\n        let csvString = `time,${this.parameters.fields},${this.parameters.fields}_std`;\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvString += `\\n${this.dates[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]},${isNaN(this.stds[i]) ? '' : this.stds[i]}`;\r\n        }\r\n\r\n        return csvString;\r\n    }\r\n}\r\n\r\nexport default TimeSeriesData;","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass DepthProfileData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.variableValues = [];\r\n        this.stds = [];\r\n        this.lat = null;\r\n        this.lon = null;\r\n        this.depths = [];\r\n    }\r\n\r\n    add(row) {\r\n        if(this.lat === null){\r\n            this.lat = parseFloat(row[0]);\r\n            this.lon = parseFloat(row[1]);\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }\r\n\r\n        this.variableValues.push(parseFloat(row[2]));\r\n        this.stds.push(parseFloat(row[3]));\r\n        this.depths.push(parseFloat(row[4]));\r\n    }\r\n\r\n    finalize() {\r\n        // pass\r\n    }\r\n\r\n    generatePlotData() {\r\n        return this.variableValues;\r\n    }\r\n    \r\n    generateCsv() {\r\n        let csvString = `depth,${this.parameters.fields},${this.parameters.fields}_std`;\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvString += `\\n${this.depths[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]},${isNaN(this.stds[i]) ? '' : this.stds[i]}`;\r\n        }\r\n\r\n        return csvString;\r\n    }\r\n}\r\n\r\nexport default DepthProfileData;","import { quantile, extent } from 'd3-array';\r\n\r\nimport flattenArray from '../Utility/flattenArray';\r\nimport splitData from '../Utility/splitData';\r\nimport mergeArraysAndComputeMeans from '../Utility/mergeArraysAndComputeMeans';\r\nimport temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass SectionMapData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.subType = payload.subType\r\n        \r\n        this.dates = new Set();\r\n        this.depths = new Set();\r\n        this.lats = new Set();\r\n        this.lons = new Set();\r\n\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n\r\n        this.variableValues = [];\r\n        \r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n\r\n        this.orientation = null;\r\n    }\r\n\r\n    // time, lat, lon, depth, value\r\n    add(row) {        \r\n        const time = row[0];\r\n        const lat = parseFloat(row[1]);\r\n        var _lon = parseFloat(row[2]);\r\n        const lon = _lon < this.parameters.lon1 ? _lon + 360 : _lon;\r\n        const depth = parseFloat(row[3]);\r\n        const value = parseFloat(row[4]);\r\n\r\n        if(this.variableValues.length === 0) {\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }        \r\n\r\n        this.depths.add(depth);\r\n        this.dates.add(time);\r\n        this.lats.add(lat);\r\n        this.lons.add(lon);\r\n\r\n        this.variableValues.push(value);\r\n    }\r\n\r\n    finalize() {\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : parseFloat(quantile1.toPrecision(4));\r\n        this.zMax = quantile2 === undefined ? null : parseFloat(quantile2.toPrecision(4));\r\n\r\n        this.extent = extent(this.variableValues);\r\n\r\n        this.orientation = this.lons.size > this.lats.size ? 'zonal' : 'meridional';\r\n\r\n        let lonArray = Array.from(this.lons);\r\n        this.lonMax = Math.max(...lonArray);\r\n        this.lonMin = Math.min(...lonArray);\r\n        // console.log(this.variableValues);\r\n    }\r\n\r\n    // Direction is meridional or zonal\r\n    generatePlotData(orientation, splitByDate, splitBySpace) {\r\n        let latCount = this.lats.size;\r\n        let lonCount = this.lons.size;\r\n\r\n        // Intervals are the number of indices between each change for that parameter\r\n        // Intervals can change if you split out of order\r\n        const lonInterval = this.depths.size;\r\n        const latInterval = lonInterval * lonCount;\r\n        const dateInterval = latInterval * latCount;\r\n\r\n        var variableValueSubsets = splitData(this.variableValues, dateInterval, this.dates.size);\r\n\r\n        var spaceCount;\r\n\r\n        if(orientation === 'zonal') {\r\n            variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, latInterval, latCount));\r\n            variableValueSubsets = flattenArray(variableValueSubsets);\r\n            spaceCount = latCount;\r\n        }\r\n\r\n        else {\r\n            variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, lonInterval, lonCount));\r\n            variableValueSubsets = flattenArray(variableValueSubsets);\r\n            spaceCount = lonCount;\r\n        }\r\n\r\n        // console.log('Split by space');\r\n        // console.log(variableValueSubsets);\r\n\r\n        if(splitByDate && splitBySpace){\r\n            // pass\r\n        } else if (splitByDate){\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                1,\r\n                spaceCount,\r\n                spaceCount\r\n            )\r\n        } else if (splitBySpace) {\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                spaceCount,\r\n                1,\r\n                this.dates.size\r\n            )\r\n        } else {\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                1,\r\n                variableValueSubsets.length,\r\n                variableValueSubsets.length\r\n            )\r\n        }\r\n\r\n        return variableValueSubsets;\r\n    }\r\n\r\n    generateCsv = () => {\r\n        let dates = Array.from(this.dates);\r\n        let depths = Array.from(this.depths);\r\n        let lons = Array.from(this.lons);\r\n        let lats = Array.from(this.lats);\r\n\r\n        const lonInterval = depths.length;\r\n        const latInterval = lonInterval * lons.length;\r\n\r\n        var csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${lats[Math.floor(i / latInterval) % lats.length]},${lons[Math.floor(i / lonInterval) % lons.length]},${depths[i % depths.length]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SectionMapData;","import { quantile, extent } from 'd3-array';\r\n\r\nclass SparseData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.hasDepth = null;\r\n        this.variableIndex = payload.metadata.Depth_Min ? 4 : 3;\r\n        this.depths = [];\r\n        this.times = [];\r\n        this.variableValues = [];\r\n        this.lats = [];\r\n        this.lons = [];\r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n\r\n        this.latMin = null;\r\n        this.latMax = null;\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n    }\r\n\r\n    add(row) {\r\n        let lat = parseFloat(row[1]);\r\n        let lon = parseFloat(row[2]);\r\n\r\n        if(this.hasDepth === null){\r\n            this.hasDepth = Boolean(this.metadata.Depth_Min);\r\n            this.latMin = lat;\r\n            this.latMax = lat;\r\n            this.lonMin = lon;\r\n            this.lonMax = lon;\r\n        }\r\n\r\n        if(row[this.variableIndex]){\r\n\r\n            this.times.push(row[0]);\r\n            this.lats.push(lat);\r\n            this.lons.push(lon);\r\n            if(this.hasDepth) this.depths.push(parseFloat(row[3]));\r\n            this.variableValues.push(parseFloat(row[this.variableIndex]));\r\n\r\n            if(lat < this.latMin) this.latMin = lat;\r\n            if(lat > this.latMax) this.latMax = lat;\r\n            \r\n            if(lon < this.lonMin) this.lonMin = lon;\r\n            if(lon > this.lonMax) this.lonMax = lon;\r\n        }\r\n    }\r\n\r\n    finalize() {\r\n\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : quantile1.toPrecision(4);\r\n        this.zMax = quantile2 === undefined ? null : quantile2.toPrecision(4);\r\n\r\n        this.extent = extent(this.variableValues);\r\n\r\n        let latDistance = Math.abs(this.latMax - this.latMin);\r\n        let lonDistance = Math.abs(this.lonMax - this.lonMin);\r\n        let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n\r\n        let _zoom = 4 - Math.floor(distance / 12);\r\n        this.zoom = _zoom < 0 ? 0 : _zoom;\r\n\r\n        let lonCenter = (this.lonMax + this.lonMin) / 2;\r\n        let latCenter = (this.latMax + this.latMin) / 2;\r\n        this.center = { \r\n            lon: lonCenter, \r\n            lat: latCenter\r\n        }\r\n    }\r\n\r\n    generatePlotData(subType, splitByDate, splitByDepth) {\r\n        return this.variableValues;\r\n    }\r\n\r\n    generateCsv(){\r\n        var csvArray;\r\n\r\n        if(this.hasDepth){\r\n            csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${this.times[i]},${this.lats[i]},${this.lons[i]},${this.depths[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n\r\n        } else {\r\n            csvArray = [`time,lat,lon,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${this.times[i]},${this.lats[i]},${this.lons[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SparseData;","import CSVParser from 'csv-parse';\r\n\r\nimport { apiUrl } from './config';\r\nimport SpaceTimeData from './Classes/SpaceTimeData';\r\n\r\nimport storedProcedures from './Enums/storedProcedures';\r\nimport TimeSeriesData from './Classes/TimeSeriesData';\r\nimport DepthProfileData from './Classes/DepthProfileData';\r\nimport SectionMapData from './Classes/SectionMapData';\r\nimport SparseData from './Classes/SparseData';\r\n\r\nimport encoding from 'text-encoding';\r\n\r\nconst fetchOptions = {\r\n    credentials: 'include'\r\n}\r\n\r\nconst postOptions = {\r\n    ...fetchOptions,\r\n    method: 'POST',\r\n    headers: {\"Content-Type\": \"application/json\"}\r\n}\r\n\r\nconst storedProcedureParametersToUri = (parameters) => {\r\n    return Object.keys(parameters).reduce(function (queryString, key, i) {\r\n        return `${queryString}${i===0 ? '' : '&&'}${key}=${parameters[key]}`;\r\n      }, '');\r\n}\r\n\r\nconst api = {};\r\napi.user = {};\r\napi.dataRetrieval = {};\r\napi.catalog = {};\r\napi.visualization = {};\r\napi.dataSubmission = {};\r\n\r\napi.user.login = (user) => {\r\n    return fetch(apiUrl + '/user/signin', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    });\r\n}\r\n\r\napi.user.logout = () => {\r\n    return fetch(apiUrl + '/user/signout', fetchOptions);\r\n}\r\n\r\napi.user.register = (user) => {\r\n    return fetch(apiUrl + '/user/signup', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    })\r\n}\r\n\r\napi.user.validate = (user) => {\r\n    return fetch(apiUrl + '/user/validate', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    })\r\n}\r\n\r\napi.user.googleLoginRequest = async(userIDToken) => {\r\n    let response = await fetch(apiUrl + '/user/googleauth', {\r\n        ...postOptions,\r\n        body: JSON.stringify({userIDToken}),\r\n    })\r\n\r\n    return response;\r\n}\r\n\r\napi.user.contactUs = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/contactus', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.user.changePassword = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/changepassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.user.changeEmail = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/changeemail', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.catalog.retrieve = async() => {\r\n\r\n    const decoder = new encoding.TextDecoder();\r\n    let catalog = [];\r\n\r\n    let csvParser = CSVParser({columns:true});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record\r\n        while (record = csvParser.read()) {\r\n            catalog.push(record)\r\n        }\r\n    })\r\n\r\n    let response = await fetch(apiUrl + '/api/catalog', fetchOptions);\r\n\r\n    if(!response.ok) return false;\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n    return catalog;\r\n}\r\n\r\napi.catalog.datasets = async() => {\r\n    const decoder = new encoding.TextDecoder();\r\n    let datasets = {};\r\n\r\n    let csvParser = CSVParser({columns:true});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record\r\n        while (record = csvParser.read()) {\r\n            datasets[record.Dataset_Long_Name.trim()] = record;\r\n        }\r\n    })\r\n\r\n    let response = await fetch(apiUrl + '/api/catalog/datasets', fetchOptions);\r\n\r\n    if(!response.ok) return false;\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n    return datasets;\r\n}\r\n\r\napi.user.keyRetrieval = async() => {\r\n    return await fetch(apiUrl + '/user/retrieveapikeys', fetchOptions);\r\n}\r\n\r\napi.user.keyCreation = async(description) => {\r\n    return await fetch(apiUrl + `/user/generateapikey?description=${description.trim()}`, fetchOptions);\r\n}\r\n\r\napi.user.updateUserInfo = async(userInfo) => {\r\n    return await fetch(apiUrl + '/api/user/updateinfo', {\r\n        ...postOptions,\r\n        body: JSON.stringify(userInfo),\r\n    });\r\n}\r\n\r\napi.user.recoverPassword = async(email) => {\r\n    fetch(apiUrl + '/api/user/forgotpassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify({email})\r\n    })\r\n}\r\n\r\napi.user.choosePassword = async({password, token}) => {\r\n    return await fetch(apiUrl + '/api/user/choosepassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify({password, token})\r\n    })\r\n}\r\n\r\napi.visualization.storedProcedureRequest = async(payload) => {\r\n    const decoder = new encoding.TextDecoder();\r\n    var vizData;\r\n\r\n    switch(payload.parameters.spName) {\r\n        case storedProcedures.spaceTime:\r\n            if(payload.subType === 'Sparse') vizData = new SparseData(payload);\r\n            else vizData = new SpaceTimeData(payload);\r\n            break;\r\n\r\n        case storedProcedures.timeSeries:\r\n            vizData = new TimeSeriesData(payload);\r\n            break;\r\n\r\n        case storedProcedures.depthProfile:\r\n            vizData = new DepthProfileData(payload);\r\n            break;\r\n\r\n        case storedProcedures.sectionMap:\r\n            vizData = new SectionMapData(payload);\r\n            break;\r\n\r\n        default:\r\n            console.log('Unknown sproc name');\r\n    }\r\n    \r\n    let response = await fetch(apiUrl + '/api/data/sp?' + storedProcedureParametersToUri(payload.parameters), fetchOptions);\r\n\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n\r\n    let csvParser = CSVParser({from: 2});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record;\r\n        while (record = csvParser.read()) {\r\n            vizData.add(record);\r\n        }\r\n    })\r\n\r\n    csvParser.on('error', (e) => {\r\n        console.log(e);\r\n    })\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n\r\n    return vizData;\r\n}\r\n\r\n\r\napi.visualization.getTableStats = async(tableName) => {\r\n    let response = await fetch(apiUrl + '/dataretrieval/tablestats?table=' + tableName, fetchOptions);\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n    return await response.json();\r\n}\r\n\r\napi.visualization.cruiseTrajectoryRequest = async(payload) => {\r\n    const decoder = new encoding.TextDecoder();\r\n    let trajectory = {lats: [], lons: []};\r\n\r\n    let response = await fetch(apiUrl + '/api/data/cruisetrajectory?' + `id=${payload.id}`, fetchOptions);\r\n\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n\r\n    let csvParser = CSVParser({from: 2});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record;\r\n        while (record = csvParser.read()) {\r\n            trajectory.lats.push(parseFloat(record[1]));\r\n            trajectory.lons.push(parseFloat(record[2]));\r\n        }\r\n    })\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n\r\n    return trajectory;\r\n}\r\n\r\napi.visualization.cruiseList = async() => {\r\n    let response = await fetch(apiUrl + '/api/data/cruiselist', fetchOptions);\r\n\r\n    if(response.ok){\r\n        return await response.json();\r\n    } else return false;   \r\n}\r\n\r\napi.visualization.csvDownload = async(query) => {\r\n    if(!query) return null;\r\n    let response = await fetch(apiUrl + `/api/data/query?query=${query}`, fetchOptions);\r\n    if(response.ok) return await response.text();\r\n    else return {failed: true, status: response.status}\r\n}\r\n\r\napi.dataSubmission.retrieveSubmissionByUser = async() => {\r\n    return await fetch(apiUrl + `/api/datasubmission/submissionsbyuser`, fetchOptions);\r\n}\r\n\r\napi.dataSubmission.retrieveAllSubmissions = async() => {\r\n    return await fetch(apiUrl + `/api/datasubmission/submissions`, fetchOptions);\r\n}\r\n\r\napi.dataSubmission.addSubmissionComment = async(payload) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/addcomment', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload),\r\n    });\r\n}\r\n\r\napi.dataSubmission.beginUploadSession = async() => {\r\n    return await fetch(apiUrl + '/api/datasubmission/beginuploadsession', fetchOptions);\r\n}\r\n\r\napi.dataSubmission.uploadPart = async(formData) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/uploadfilepart', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: formData\r\n    });\r\n}\r\n\r\napi.dataSubmission.commitUpload = async(formData) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/commitupload', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: formData\r\n    });\r\n}\r\n\r\napi.dataSubmission.setPhase = async(formData) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/setphase', {\r\n        ...postOptions,\r\n        body: JSON.stringify(formData)\r\n    });\r\n}\r\n\r\napi.dataSubmission.retrieveCommentHistory = async(payload) => {\r\n    return await fetch(`${apiUrl}/api/datasubmission/commenthistory?submissionID=${payload.submissionID}`, fetchOptions);\r\n};\r\n\r\napi.dataSubmission.retrieveMostRecentFile = async(submissionID) => {\r\n    return await fetch(`${apiUrl}/api/datasubmission/retrievemostrecentfile?submissionID=${submissionID}`, fetchOptions)\r\n}\r\n\r\napi.dataSubmission.getFileFromLink = async(link) => {\r\n    return await fetch(link);\r\n}\r\n\r\nexport default api;","import { put, takeLatest, all, call, delay, select } from 'redux-saga/effects';\r\n// import { eventChannel } from 'redux-saga';\r\nimport Cookies from 'js-cookie';\r\n// import worker from '../worker';\r\n\r\nimport * as userActions from './actions/user';\r\nimport * as catalogActions from './actions/catalog';\r\nimport * as interfaceActions from './actions/ui';\r\nimport * as visualizationActions from './actions/visualization';\r\nimport * as dataSubmissionActions from './actions/dataSubmission';\r\n\r\nimport * as userActionTypes from './actionTypes/user';\r\nimport * as catalogActionTypes from './actionTypes/catalog';\r\nimport * as visualizationActionTypes from './actionTypes/visualization';\r\nimport * as interfaceActionTypes from './actionTypes/ui';\r\nimport * as dataSubmissionActionTypes from './actionTypes/dataSubmission';\r\n\r\nimport api from '../api';\r\nimport states from '../Enums/asyncRequestStates';\r\n\r\nfunction* userLogin(action) {\r\n    yield put(userActions.userLoginRequestProcessing());\r\n    let result = yield call(api.user.login, action.payload);\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.hideLoginDialog());\r\n        var userInfo = JSON.parse(Cookies.get('UserInfo'));\r\n        yield put(userActions.userLoginRequestSuccess());\r\n        yield put(userActions.storeInfo(userInfo));\r\n        yield put(interfaceActions.snackbarOpen('Login was successful!'))\r\n        if(window.location.pathname === '/login') window.location.href = \"/catalog\";\r\n    } else {\r\n        yield put(userActions.userLoginRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Login failed.'));\r\n    }\r\n}\r\n\r\nfunction* userLogout(){    \r\n    let authInstance = yield window.gapi.auth2.getAuthInstance();\r\n    yield authInstance.signOut();\r\n    yield call(api.user.logout);\r\n    yield put(userActions.destroyInfo());\r\n    yield window.location.href = \"/\";\r\n}\r\n\r\nfunction* userRegistration(action){\r\n    yield put(userActions.userRegistrationRequestProcessing());\r\n    let result = yield call(api.user.register, action.payload);\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.registrationNextActiveStep());\r\n    } else {\r\n        yield put(userActions.userRegistrationRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Registration failed. Please try again later.'))\r\n    }\r\n}\r\n\r\nfunction* userValidation(action){\r\n    yield put(userActions.userValidationRequestProcessing());\r\n    let result = yield call(api.user.validate, action.payload);\r\n    let isValid = yield result.json();\r\n    \r\n    if(isValid){\r\n        yield put(userActions.userValidationRequestSuccess());\r\n        yield put(interfaceActions.registrationNextActiveStep());\r\n    } else {\r\n        yield put(userActions.userValidationRequestFailure());\r\n    }\r\n}\r\n\r\nfunction* googleLoginRequest(action){\r\n    yield put(userActions.googleLoginRequestProcessing());\r\n    let result = yield call(api.user.googleLoginRequest, action.payload.userIDToken);\r\n\r\n    if(result.ok){\r\n        yield put(interfaceActions.hideLoginDialog());\r\n        var userInfo = JSON.parse(Cookies.get('UserInfo'));\r\n        yield put(userActions.userLoginRequestSuccess());\r\n        yield put(userActions.storeInfo(userInfo));\r\n        // yield put(interfaceActions.snackbarOpen('Login was successful!'))\r\n        if(window.location.pathname === '/login') window.location.href = \"/catalog\";\r\n    } else {\r\n        yield put(userActions.userLoginRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Login failed.'));\r\n    }\r\n}\r\n\r\nfunction* catalogRetrieval(){\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    let catalog = yield call(api.catalog.retrieve);\r\n    \r\n    if(!catalog) {\r\n        yield put(catalogActions.retrievalRequestFailure());\r\n    } else{\r\n        yield put(catalogActions.retrievalRequestSuccess(catalog));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* datasetRetrieval(){\r\n    yield put(catalogActions.datasetRetrievalRequestProcessing());\r\n    let datasets = yield call(api.catalog.datasets);\r\n\r\n    if(!datasets){\r\n        yield put(catalogActions.retrievalRequestFailure());\r\n    } else {\r\n        yield put(catalogActions.datasetRetrievalRequestSuccess(datasets));\r\n    }\r\n}\r\n\r\nfunction* keyRetrieval(action){\r\n    let result = yield call(api.user.keyRetrieval);\r\n\r\n    if(result.status === 401){\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n    \r\n    if(!result.ok){\r\n        yield put(userActions.keyRetrievalRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('API Key Retrieval Failed'));\r\n    } else {\r\n        let response = yield result.json();\r\n        yield put(userActions.keyRetrievalRequestSuccess(response.keys));\r\n    }\r\n}\r\n\r\nfunction* keyCreation(action){\r\n    yield put(userActions.keyCreationRequestProcessing());\r\n    let result = yield call(api.user.keyCreation, action.payload.description);\r\n\r\n    if(result.status === 401){\r\n        yield put(userActions.refreshLogin());\r\n        return;\r\n    }\r\n    \r\n    if(!result.ok) yield put(interfaceActions.snackbarOpen(\"We were unable to create a new API key.\"));\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen(\"A new API key was created\"));\r\n        yield put(userActions.keyCreationRequestSuccess());\r\n        yield put(userActions.keyRetrievalRequestSend());        \r\n    }\r\n}\r\n\r\nfunction* queryRequest(action){\r\n    yield put(visualizationActions.queryRequestProcessing());\r\n    let result = yield call(api.visualization.queryRequest, action.payload.query);\r\n    yield put(visualizationActions.storeSampleData(result));\r\n    yield put(visualizationActions.queryRequestSuccess());\r\n}\r\n\r\nfunction* storedProcedureRequest(action){\r\n    yield put(visualizationActions.storedProcedureRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    let result = yield call(api.visualization.storedProcedureRequest, action.payload);\r\n    yield delay(50);\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'));\r\n    yield delay(70);\r\n    \r\n    // Result will be an object containing variable values and describing date shape\r\n    if(result.failed){\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(visualizationActions.storedProcedureRequestFailure());\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(\"An error occurred. Please try again.\"));\r\n        }\r\n    } else {\r\n        if(result.variableValues.length > 0){\r\n            result.finalize();\r\n            yield put(interfaceActions.setLoadingMessage(''));\r\n            yield put(visualizationActions.storedProcedureRequestSuccess());\r\n            // yield put(interfaceActions.snackbarOpen(`${action.payload.subType} ${action.payload.parameters.fields} is ready`));\r\n            yield put(visualizationActions.triggerShowCharts());\r\n            yield put(visualizationActions.addChart({subType: action.payload.subType, data:result}));\r\n            window.scrollTo(0,0);\r\n           \r\n        } else {\r\n            yield put(interfaceActions.setLoadingMessage(''));\r\n            yield put(interfaceActions.snackbarOpen(`No data found for ${action.payload.parameters.fields} in the requested ranges. Try selecting a different date or depth range.`));\r\n        }\r\n    }\r\n}\r\n\r\nfunction* cruiseTrajectoryRequest(action) {\r\n    yield put(visualizationActions.cruiseTrajectoryRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Cruise Data'));\r\n    let result = yield call(api.visualization.cruiseTrajectoryRequest, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n\r\n    if(result.failed){\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(`Unable to Fetch Cruise Data`));\r\n        }\r\n    } else {\r\n        yield put(visualizationActions.cruiseTrajectoryRequestSuccess(result));\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n    }\r\n}\r\n\r\nfunction* cruiseListRequest() {\r\n    yield put(visualizationActions.cruiseListRequestProcessing());\r\n    let cruiseList = yield call(api.visualization.cruiseList);\r\n\r\n    if(!cruiseList) {\r\n        yield put(visualizationActions.cruiseListRequestFailure());\r\n    } else{\r\n        yield put(visualizationActions.cruiseListRequestSuccess(cruiseList));\r\n    }\r\n}\r\n\r\nfunction* tableStatsRequest(action){\r\n    yield put(visualizationActions.tableStatsRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Dataset Information'));\r\n    let result = yield call(api.visualization.getTableStats, action.payload.tableName);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n\r\n    if(result.failed){\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(`Unable to Fetch Dataset Information`));\r\n        }\r\n    } else {\r\n        yield put(visualizationActions.tableStatsRequestSuccess(result, action.payload.datasetLongName));\r\n    }\r\n}\r\n\r\nfunction* csvDownloadRequest(action){\r\n    yield put(visualizationActions.csvDownloadRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    const metadataQuery = `exec uspDatasetMetadata '${action.payload.tableName}'`;\r\n\r\n    let [ dataResponse, metadataResponse ] = yield all([\r\n        call(api.visualization.csvDownload, action.payload.query),\r\n        call(api.visualization.csvDownload, metadataQuery)\r\n    ]);\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''))\r\n    if(dataResponse.failed || metadataResponse.failed) {\r\n        if(dataResponse.status === 401 || metadataResponse.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen('An error occurred. Please try again.'))\r\n        }\r\n    } else {\r\n        if(dataResponse.length > 1) {\r\n            yield put(visualizationActions.downloadTextAsCsv(dataResponse, action.payload.fileName));\r\n            yield put(visualizationActions.downloadTextAsCsv(metadataResponse, action.payload.fileName + '_METADATA'));\r\n        } else yield put(interfaceActions.snackbarOpen('No data found. Please expand query range.'))        \r\n    }\r\n}\r\n\r\n\r\nfunction* csvFromVizRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'));\r\n    const csvData = yield action.payload.vizObject.generateCsv();\r\n\r\n    yield put(interfaceActions.setLoadingMessage('Fetching metadata'));\r\n    const metadataQuery = `exec uspVariableMetadata '${action.payload.tableName}', '${action.payload.shortName}'`;\r\n    let metadataResponse = yield call(api.visualization.csvDownload, metadataQuery);\r\n    yield put(interfaceActions.setLoadingMessage(''))\r\n\r\n    if(metadataResponse.failed) yield put(interfaceActions.snackbarOpen('Failed to download variable metadata'));\r\n\r\n    yield put(visualizationActions.downloadTextAsCsv(csvData, action.payload.longName));\r\n    yield put(visualizationActions.downloadTextAsCsv(metadataResponse, action.payload.longName + '_Metadata'));\r\n}\r\n\r\nfunction* downloadTextAsCsv(action){\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'))\r\n    let csv = action.payload.text;\r\n    const blob = new Blob([csv], {type: 'text/csv'});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.setAttribute('hidden', '');\r\n    a.setAttribute('href', url);\r\n    a.setAttribute('download', `${action.payload.fileName}.csv`);\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* refreshLogin(){\r\n    yield call(api.user.logout);\r\n    yield put(userActions.destroyInfo());\r\n    yield put(interfaceActions.showLoginDialog());\r\n    yield put(interfaceActions.snackbarOpen(\"Your session has expired. Please log in again.\"));\r\n}\r\n\r\nfunction* updateUserInfoRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Updating your information'));\r\n\r\n    let result = yield call(api.user.updateUserInfo, action.payload);\r\n\r\n    if(result.failed){\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(\"An error occurred. Please try again.\"));\r\n        }\r\n    } else {\r\n        yield put(userActions.storeInfo(JSON.parse(Cookies.get('UserInfo'))));\r\n        yield put(interfaceActions.snackbarOpen(\"Your information was updated\"));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* initializeGoogleAuth(){\r\n    try {\r\n        var authInstance = yield window.gapi.auth2.getAuthInstance();\r\n    }\r\n\r\n    catch(e) {\r\n        yield delay(100);\r\n        yield put(userActions.initializeGoogleAuth());\r\n        return;\r\n    }\r\n\r\n    let user = yield authInstance.currentUser.get();\r\n    let authResponse = yield user.getAuthResponse(true);\r\n    if(authResponse) yield put(userActions.googleLoginRequestSend(authResponse.id_token));\r\n}\r\n\r\nfunction* recoverPasswordRequest(action){\r\n    yield call(api.user.recoverPassword, action.payload.email);\r\n}\r\n\r\nfunction* choosePasswordRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming change'));\r\n    let result = yield call(api.user.choosePassword, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    if(result.ok){\r\n        yield put(userActions.choosePasswordRequestSuccess());\r\n    } else {\r\n        yield put(userActions.choosePasswordRequestFailure());\r\n    }\r\n}\r\n\r\nfunction* contactUsRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Sending'));\r\n    let result = yield call(api.user.contactUs, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    if(result.ok){\r\n        yield put(interfaceActions.snackbarOpen('Your message was successfully sent!'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('Message failed. Please try again or contact simonscmap@uw.edu'));\r\n    }\r\n}\r\n\r\nfunction* changePasswordRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming Changes'));\r\n    let result = yield call(api.user.changePassword, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.hideChangePasswordDialog());\r\n        yield put(interfaceActions.snackbarOpen('Your password has been updated.'));\r\n    } else if(result.status === 401) {\r\n        yield put(interfaceActions.snackbarOpen('The current password you entered is not correct.'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('An error occurred with your request.'));\r\n    }\r\n}\r\n\r\nfunction* changeEmailRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming Changes'));\r\n    let result = yield call(api.user.changeEmail, action.payload);\r\n\r\n    if(result.ok){\r\n        yield put(userActions.storeInfo(JSON.parse(Cookies.get('UserInfo'))));\r\n        yield put(interfaceActions.hideChangeEmailDialog());\r\n        yield put(interfaceActions.snackbarOpen('Your email address has been updated.'));\r\n    } else if(result.status === 401) {\r\n        yield put(interfaceActions.snackbarOpen('The current password you entered is not correct.'));\r\n    } else if(result.status === 409) {\r\n        yield put(interfaceActions.snackbarOpen('That email address is already in use.'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('We were not able to update your email address.'));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* copyTextToClipboard(action) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = action.payload.text;\r\n    document.body.appendChild(textArea);\r\n    textArea.select();\r\n    document.execCommand(\"Copy\");\r\n    textArea.remove();\r\n    yield put(interfaceActions.snackbarOpen('Copied to Clipboard'));\r\n}\r\n\r\nfunction* retrieveSubmissionsByUser() {\r\n    let response = yield call(api.dataSubmission.retrieveSubmissionByUser);\r\n    if(response.ok){\r\n        let jsonResponse = yield response.json();\r\n        yield put(dataSubmissionActions.storeSubmissions(jsonResponse));\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Unable to retrieve submissions'));\r\n    }\r\n}\r\n\r\nfunction* retrieveAllSubmissions() {\r\n    let response = yield call(api.dataSubmission.retrieveAllSubmissions);\r\n    if(response.ok){\r\n        let jsonResponse = yield response.json();\r\n\r\n        if(jsonResponse.length < 1){\r\n            yield put(interfaceActions.snackbarOpen('No submissions found'));\r\n        }\r\n\r\n        else {\r\n            yield put(dataSubmissionActions.storeSubmissions(jsonResponse));\r\n        }\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Unable to retrieve submissions'));\r\n    }\r\n}\r\n\r\nfunction* addSubmissionComment(action) {\r\n    let response = yield call(api.dataSubmission.addSubmissionComment, action.payload);\r\n\r\n    if(response.ok){\r\n        yield put(dataSubmissionActions.retrieveSubmissionCommentHistory(action.payload.submissionID));\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Failed to submit comment. Please try again.'));\r\n    }\r\n}\r\n\r\nfunction* retrieveSubmissionCommentHistory(action) {\r\n    yield put(dataSubmissionActions.setSubmissionCommentHistoryRetrievalState(states.inProgress));\r\n\r\n    let response = yield call(api.dataSubmission.retrieveCommentHistory, action.payload);\r\n\r\n    if(response.ok){\r\n        let jsonResponse = yield response.json();        \r\n\r\n        if(jsonResponse.length < 1){\r\n            yield put(interfaceActions.snackbarOpen('No comments found'));\r\n        }\r\n\r\n        else {\r\n            let payload = {\r\n                comments: jsonResponse,\r\n                submissionID: action.payload.submissionID\r\n            }\r\n            yield put(dataSubmissionActions.storeSubmissionComments(payload));\r\n        }\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Failed to retrieve comment history.'));\r\n    }\r\n\r\n    yield put(dataSubmissionActions.setSubmissionCommentHistoryRetrievalState(states.succeeded));\r\n}\r\n\r\nfunction* uploadSubmission(action) {\r\n    let { file } = action.payload;\r\n    let fileSize = file.size;\r\n    let fileName = file.name.slice(0, file.name.length - 5);\r\n\r\n    let chunkSize = 5 * 1024 * 1024;\r\n    let offset = 0;\r\n\r\n    let retries = 0;\r\n    let sessionID;\r\n\r\n    if(fileSize <= 0){\r\n        yield put(interfaceActions.snackbarOpen('The selected file is empty'));\r\n        return;\r\n    }\r\n    \r\n    while(retries < 3 && !sessionID){\r\n        let beginSessionResponse = yield call(api.dataSubmission.beginUploadSession);\r\n\r\n        if(beginSessionResponse.ok){\r\n            let jsonResponse = yield beginSessionResponse.json();\r\n            sessionID = jsonResponse.sessionID;\r\n        }\r\n\r\n        else {\r\n            retries ++;\r\n            yield delay(2000);\r\n        }\r\n    }\r\n\r\n    if(!sessionID){\r\n        yield put(interfaceActions.snackbarOpen('Failed to begin upload session'));\r\n        return;\r\n    }\r\n\r\n    else console.log('Got session ID');\r\n    retries = 0;\r\n\r\n    var currentPartSucceeded = false;\r\n\r\n    console.log('Starting upload');\r\n\r\n    while(offset < fileSize){\r\n        currentPartSucceeded = false;\r\n\r\n        while(currentPartSucceeded === false && retries < 3){\r\n            console.log('attempting to upload a part, offset: ' + offset);\r\n            let part = file.slice(offset, offset + chunkSize);\r\n\r\n            let formData = new FormData();\r\n            formData.append('part', part);\r\n            formData.append('offset', offset);\r\n            formData.append('sessionID', sessionID);\r\n\r\n            let uploadPartResponse = yield call(api.dataSubmission.uploadPart, formData);\r\n\r\n            if(uploadPartResponse.ok){\r\n                currentPartSucceeded = true;\r\n            }\r\n\r\n            else {\r\n                console.log('Retrying part upload, offset: ' + offset);\r\n                retries ++;\r\n                yield delay(2000);\r\n            }\r\n        }\r\n        \r\n        if(currentPartSucceeded === false){\r\n            yield put(interfaceActions.snackbarOpen('Upload failed'));\r\n            return;\r\n        }\r\n\r\n        else {\r\n            console.log('Completing part upload, offset: ' + offset);\r\n            offset += chunkSize;\r\n        }\r\n    }\r\n\r\n    retries = 0;\r\n\r\n    let formData = new FormData();\r\n    formData.append('fileName', fileName);\r\n    formData.append('offset', fileSize);\r\n    formData.append('sessionID', sessionID);\r\n\r\n    var commitSucceeded = false;\r\n\r\n    while(retries < 4 && commitSucceeded === false) {\r\n        let commitFileResponse = yield call(api.dataSubmission.commitUpload, formData);        \r\n\r\n        if(commitFileResponse.ok){\r\n            commitSucceeded = true;\r\n        }\r\n\r\n        else {\r\n            console.log('Retrying commit');\r\n            retries ++;\r\n            yield delay(2000);\r\n        }\r\n    }\r\n\r\n    if(commitSucceeded === true){\r\n        console.log('Successfully committed');\r\n        window.location.href = \"/datasubmission/userdashboard\";\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Failed to upload'));\r\n        return;\r\n    }\r\n}\r\n\r\nfunction* setDataSubmissionPhase(action) {\r\n    let formData = {\r\n        phaseID: action.payload.phaseID,\r\n        submissionID: action.payload.submissionID\r\n    };\r\n\r\n    let response = yield call(api.dataSubmission.setPhase, formData);\r\n\r\n    if(response.ok){\r\n        yield put(dataSubmissionActions.retrieveAllSubmissions());\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Failed to retrieve submissions'));\r\n    }\r\n}\r\n// TODO block drag behavior when a workbook is loaded\r\nfunction* retrieveMostRecentFile(action) {\r\n    const { submissionID } = action.payload;\r\n\r\n    yield put(interfaceActions.setLoadingMessage('Fetching the latest submission'));\r\n\r\n    let linkResponse = yield call(api.dataSubmission.retrieveMostRecentFile, submissionID);\r\n\r\n    if(linkResponse.ok){\r\n        let jsonResponse = yield linkResponse.json();\r\n\r\n        let { link, dataset } = jsonResponse;\r\n\r\n        let getFileResponse = yield call(api.dataSubmission.getFileFromLink, link);\r\n        let blob = yield getFileResponse.blob();\r\n        let file = new File([blob], `${dataset}.xlsx`);\r\n\r\n        yield put(dataSubmissionActions.storeSubmissionFile(file));\r\n    }\r\n\r\n    else if (linkResponse.status === 401) {\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(interfaceActions.snackbarOpen('Failed to retrieve submissions'));\r\n    }\r\n\r\n    \r\n}\r\n\r\nfunction* watchUserLogin() {\r\n    yield takeLatest(userActionTypes.LOGIN_REQUEST_SEND, userLogin);\r\n}\r\n\r\nfunction* watchUserRegistration() {\r\n    yield takeLatest(userActionTypes.REGISTRATION_REQUEST_SEND, userRegistration);\r\n}\r\n\r\nfunction* watchUserValidation(){\r\n    yield takeLatest(userActionTypes.VALIDATION_REQUEST_SEND, userValidation);\r\n}\r\n\r\nfunction* watchUserLogout() {\r\n    yield takeLatest(userActionTypes.LOG_OUT, userLogout)\r\n}\r\n\r\nfunction* watchGoogleLoginRequest(){\r\n    yield takeLatest(userActionTypes.GOOGLE_LOGIN_REQUEST_SEND, googleLoginRequest);\r\n}\r\n\r\nfunction* watchCatalogRetrieval(){\r\n    yield takeLatest(catalogActionTypes.RETRIEVAL_REQUEST_SEND, catalogRetrieval);\r\n}\r\n\r\nfunction* watchDatasetRetrieval(){\r\n    yield takeLatest(catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SEND, datasetRetrieval);\r\n}\r\n\r\nfunction* watchKeyRetrieval(){\r\n    yield takeLatest(userActionTypes.KEY_RETRIEVAL_REQUEST_SEND, keyRetrieval);\r\n}\r\n\r\nfunction* watchKeyCreationRequest(){\r\n    yield takeLatest(userActionTypes.KEY_CREATION_REQUEST_SEND, keyCreation);\r\n}\r\n\r\nfunction* watchQueryRequest(){\r\n    yield takeLatest(visualizationActionTypes.QUERY_REQUEST_SEND, queryRequest);\r\n}\r\n\r\nfunction* watchStoredProcedureRequest(){\r\n    yield takeLatest(visualizationActionTypes.STORED_PROCEDURE_REQUEST_SEND, storedProcedureRequest);\r\n}\r\n\r\nfunction* watchCruiseTrajectoryRequest(){\r\n    yield takeLatest(visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SEND, cruiseTrajectoryRequest);\r\n}\r\n\r\nfunction* watchCruiseListRequest(){\r\n    yield takeLatest(visualizationActionTypes.CRUISE_LIST_REQUEST_SEND, cruiseListRequest);\r\n}\r\n\r\nfunction* watchTableStatsRequest(){\r\n    yield takeLatest(visualizationActionTypes.TABLE_STATS_REQUEST_SEND, tableStatsRequest)\r\n}\r\n\r\nfunction* watchCsvDownloadRequest(){\r\n    yield takeLatest(visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SEND, csvDownloadRequest);\r\n}\r\n\r\nfunction* watchDownloadTextAsCsv(){\r\n    yield takeLatest(visualizationActionTypes.DOWNLOAD_TEXT_AS_CSV, downloadTextAsCsv);\r\n}\r\n\r\nfunction* watchRefreshLogin(){\r\n    yield takeLatest(userActionTypes.REFRESH_LOGIN, refreshLogin);\r\n}\r\n\r\nfunction* watchUpdateUserInfoRequest(){\r\n    yield takeLatest(userActionTypes.UPDATE_USER_INFO_REQUEST_SEND, updateUserInfoRequest);\r\n}\r\n\r\nfunction* watchInitializeGoogleAuth(){\r\n    yield takeLatest(userActionTypes.INITIALIZE_GOOGLE_AUTH, initializeGoogleAuth);\r\n}\r\n\r\nfunction* watchRecoverPasswordRequest(){\r\n    yield takeLatest(userActionTypes.RECOVER_PASSWORD_REQUEST_SEND, recoverPasswordRequest);\r\n}\r\n\r\nfunction* watchChoosePasswordRequest(){\r\n    yield takeLatest(userActionTypes.CHOOSE_PASSWORD_REQUEST_SEND, choosePasswordRequest)\r\n}\r\n\r\nfunction* watchContactUs(){\r\n    yield takeLatest(userActionTypes.CONTACT_US_REQUEST_SEND, contactUsRequest);\r\n}\r\n\r\nfunction* watchChangePasswordRequest(){\r\n    yield takeLatest(userActionTypes.CHANGE_PASSWORD_REQUEST_SEND, changePasswordRequest);\r\n}\r\n\r\nfunction* watchChangeEmailRequest(){\r\n    yield takeLatest(userActionTypes.CHANGE_EMAIL_REQUEST_SEND, changeEmailRequest);\r\n}\r\n\r\nfunction* watchCsvFromVizRequest(){\r\n    yield takeLatest(visualizationActionTypes.CSV_FROM_VIZ_REQUEST_SEND, csvFromVizRequest);\r\n}\r\n\r\nfunction* watchCopyTextToClipboard(){\r\n    yield takeLatest(interfaceActionTypes.COPY_TEXT_TO_CLIPBOARD, copyTextToClipboard);\r\n}\r\n\r\nfunction* watchRetrieveSubmissionsByUser() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_SUBMISSIONS_BY_USER, retrieveSubmissionsByUser);\r\n}\r\n\r\nfunction* watchRetrieveAllSubmissions() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_ALL_SUBMISSIONS, retrieveAllSubmissions);\r\n}\r\n\r\nfunction* watchAddSubmissionComment() {\r\n    yield takeLatest(dataSubmissionActionTypes.ADD_SUBMISSION_COMMENT, addSubmissionComment);\r\n}\r\n\r\nfunction* watchRetrieveSubmissionCommentHistory() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_SUBMISSION_COMMENT_HISTORY, retrieveSubmissionCommentHistory);\r\n}\r\n\r\nfunction* watchUploadSubmission() {\r\n    yield takeLatest(dataSubmissionActionTypes.UPLOAD_SUBMISSION, uploadSubmission);\r\n}\r\n\r\nfunction* watchSetDataSubmissionPhase() {\r\n    yield takeLatest(dataSubmissionActionTypes.SET_SUBMISSION_PHASE, setDataSubmissionPhase);\r\n}\r\n\r\nfunction* watchRetrieveMostRecentFile() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_MOST_RECENT_FILE, retrieveMostRecentFile);\r\n}\r\n\r\n// function createWorkerChannel(worker) {\r\n//     return eventChannel(emit => {\r\n//         worker.onmessage = message => {\r\n//             emit(message);\r\n//         }\r\n\r\n//         const unsubscribe = () => {\r\n//             worker.teminate();\r\n//         }\r\n      \r\n//         return unsubscribe;\r\n//     })\r\n// }\r\n\r\n// function* watchWorkerChannel(){\r\n//     const workerChannel = yield call(createWorkerChannel, worker);\r\n\r\n//     while (true) {\r\n//         const message = yield take(workerChannel);\r\n//         yield put(message.data.type, message.data.payload);\r\n//         //   yield put({ type: INCOMING_PONG_PAYLOAD, payload })\r\n//         //   yield fork(pong, socket)\r\n//       }\r\n// }\r\n\r\nexport default function* rootSaga() {\r\n    yield all([\r\n        watchUserLogin(),\r\n        watchUserRegistration(),\r\n        watchUserValidation(),\r\n        watchUserLogout(),\r\n        watchGoogleLoginRequest(),\r\n        watchCatalogRetrieval(),\r\n        watchDatasetRetrieval(),\r\n        watchKeyRetrieval(),\r\n        watchKeyCreationRequest(),\r\n        watchQueryRequest(),\r\n        watchStoredProcedureRequest(),\r\n        watchCruiseTrajectoryRequest(),\r\n        watchCruiseListRequest(),\r\n        watchTableStatsRequest(),\r\n        // watchWorkerChannel(),\r\n        watchCsvDownloadRequest(),\r\n        watchDownloadTextAsCsv(),\r\n        watchRefreshLogin(),\r\n        watchUpdateUserInfoRequest(),\r\n        watchInitializeGoogleAuth(),\r\n        watchRecoverPasswordRequest(),\r\n        watchChoosePasswordRequest(),\r\n        watchContactUs(),\r\n        watchChangePasswordRequest(),\r\n        watchChangeEmailRequest(),\r\n        watchCsvFromVizRequest(),\r\n        watchCopyTextToClipboard(),\r\n        watchRetrieveSubmissionsByUser(),\r\n        watchRetrieveAllSubmissions(),\r\n        watchAddSubmissionComment(),\r\n        watchRetrieveSubmissionCommentHistory(),\r\n        watchUploadSubmission(),\r\n        watchSetDataSubmissionPhase(),\r\n        watchRetrieveMostRecentFile()\r\n    ])\r\n}","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"./Reducers\";\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootSaga from './sagas';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  applyMiddleware(sagaMiddleware)\r\n)\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;","const colors = {\r\n    // orange: '#FF8000',\r\n    // orange: '#93B968',\r\n    primary: '#9dd162',\r\n    solidPaper: '#184562',\r\n    backgroundGray: '#424242',\r\n    secondary: '#22A3B9',\r\n    errorYellow: '#ffe336',\r\n    greenHover: 'rgba(97, 149, 38, .4)'\r\n}\r\n\r\nexport default colors;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Tooltip } from '@material-ui/core';\r\n\r\nimport { copyTextToClipboard } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    copyTextToClipboard\r\n}\r\n\r\n// Wraps a tooltip and span with click event handler for copying to clipboard\r\nconst CopyableText = (props) => {\r\n    const { copyTextToClipboard, tooltipPlacement, text, innerSpanProps, hideTooltip } = props;\r\n\r\n    const handleCopyText = (event) => {\r\n        copyTextToClipboard(event.target.innerText);\r\n    }\r\n\r\n    if(hideTooltip){\r\n        return (\r\n            <span \r\n                style={{cursor: 'copy'}} \r\n                onClick={handleCopyText} \r\n                {...innerSpanProps}\r\n            >\r\n                {text}\r\n            </span>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Tooltip placement={tooltipPlacement || 'top'} title='Click to Copy'>\r\n            <span \r\n                style={{cursor: 'copy'}} \r\n                onClick={handleCopyText} \r\n                {...innerSpanProps}\r\n            >\r\n                {text}\r\n            </span>\r\n        </Tooltip>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps, null, { forwardRef: true })(CopyableText);","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Paper, Button, Table, TableBody, TableCell, TableHead, TableRow, TextField, Typography, Divider, Grid, Tooltip} from '@material-ui/core';\r\n\r\nimport { keyRetrievalRequestSend, keyCreationRequestSend } from '../../Redux/actions/user';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport CopyableText from '../UI/CopyableText';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    apiKeys: state.apiKeys,\r\n    apiKeyCreationState: state.apiKeyCreationState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    keyRetrievalRequestSend,\r\n    keyCreationRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '800px',\r\n        marginTop: theme.spacing(3),\r\n        margin:'auto',\r\n        paddingTop: theme.spacing(2)\r\n      },\r\n    table: {\r\n        minWidth: 700,\r\n    },\r\n    apiKeyTableHeader: {\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n\r\n    showChildOnHover: {\r\n        '& span': {\r\n            visibility: 'hidden',\r\n        },\r\n        '&:hover span': {\r\n            visibility: 'visible'\r\n        },\r\n    },\r\n\r\n    warningCaption: {\r\n        color: colors.primary,\r\n        fontSize: '11px',\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    wrapper: {\r\n        marginTop: theme.spacing(15)\r\n    }\r\n})\r\n\r\nclass ApiKeyManagement extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            description: 'API Access'\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.apiKeys) this.props.keyRetrievalRequestSend();\r\n    }\r\n\r\n\r\n    handleClick = () => {\r\n        this.props.keyCreationRequestSend(this.state.description);\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, description: event.target.value})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            \r\n            <div className={classes.wrapper}>\r\n                {this.props.apiKeys ?\r\n                    <Paper className={classes.root} elevation={6}>             \r\n                        <Typography variant=\"subtitle1\" className={classes.apiKeyTableHeader}>\r\n                            Your API Key\r\n                        </Typography>\r\n                        <Divider/>\r\n                        <Table className={classes.table}>\r\n                            <TableHead>\r\n                            <TableRow>\r\n                                <TableCell variant='head' align='center'>Description</TableCell>\r\n                                <TableCell variant='head' align='center'>Key (hover mouse to view)</TableCell>\r\n                            </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>            \r\n                                {this.props.apiKeys.map((apiKey, index) => (\r\n                                    <TableRow key={index}>\r\n                                        <TableCell align='center'>{apiKey.Description}</TableCell>\r\n                                        <TableCell align='center' className={classes.showChildOnHover}>\r\n                                            <CopyableText text={apiKey.Api_Key} tooltipPlacement='right'/>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))   \r\n                                }  \r\n                            </TableBody>\r\n                        </Table>\r\n                        <Typography variant='caption' className={classes.warningCaption}>\r\n                            This API key is a unique identifier, and should not be shared.\r\n                        </Typography>\r\n                    </Paper>\r\n                    : ''\r\n                }\r\n                <Paper className={classes.root} elevation={6}>\r\n                    <Typography variant=\"body2\">\r\n                        Generate a new API key\r\n                    </Typography>\r\n                    <Grid container={true} alignItems='center' justify='center' spacing={4}>\r\n                        <Grid item>\r\n                            <Tooltip placement='bottom' title='Optionally Add a Custom Description'>\r\n                                <TextField\r\n                                    margin=\"normal\"\r\n                                    id=\"description\"\r\n                                    type=\"text\"\r\n                                    variant='outlined'\r\n                                    name='description'\r\n                                    value={this.state.description}\r\n                                    onChange={this.handleChange}\r\n                                    placeholder='Key Description'\r\n                                    className={classes.descriptionField}\r\n                                    autoComplete='off'\r\n                                />\r\n                            </Tooltip>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Button variant=\"contained\" disabled={this.state.description.length < 1} color=\"primary\" onClick={this.handleClick}>\r\n                                Generate API Key\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                    \r\n                    {this.props.apiKeyCreationState === states.failed ? <span>Key creation failed</span> : ''}\r\n                </Paper>\r\n            </div>    \r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ApiKeyManagement));","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport { Link, Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = (theme) =>  ({\r\n    loginRequiredMessage: {\r\n        marginTop: theme.spacing(10),\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst LoginRequiredPrompt = (props) => {\r\n    const { classes, showLoginDialog } = props;\r\n\r\n    useEffect(() => {\r\n        showLoginDialog();\r\n    })\r\n    \r\n    return (\r\n        <Typography className={classes.loginRequiredMessage}>\r\n            This feature requires a user account. Please <Link component={RouterLink} to={{pathname: window.location.pathname}} onClick={() => props.showLoginDialog()}> log in\r\n            </Link> or <Link component={RouterLink} to={{pathname: '/register'}}> register\r\n            </Link>.\r\n        </Typography>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(LoginRequiredPrompt));","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../Redux/actions/ui';\r\n\r\nimport ApiKeyManagement from './User/ApiKeyManagement';\r\nimport LoginRequiredPrompt from './User/LoginRequiredPrompt';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n\r\n})\r\n\r\nclass Home extends Component {\r\n\r\n    render(){\r\n        if(!this.props.user) return <LoginRequiredPrompt/>;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <ApiKeyManagement/>\r\n            </React.Fragment>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nHome.propTypes = {\r\n    \r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Home));","import React from 'react';\r\n\r\nimport { Typography, Grid, Table, TableBody, TableCell, TableRow, Button } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst tableMapping1 = [\r\n    ['Long Name', 'Long_Name'],\r\n    ['Short Name', 'Variable'],    \r\n    ['Study Domain', 'Study_Domain'],\r\n    ['Process Level', 'Process_Level']\r\n];\r\n\r\nconst tableMapping2 = [\r\n    ['Unit', 'Unit'],\r\n    ['Mean Value', 'Variable_Mean'],\r\n    ['Value Std', 'Variable_Std']\r\n\r\n];\r\n\r\nconst tableMapping3 = [\r\n    ['Start Latitude[\\xb0]', 'Lat_Min'],\r\n    ['End Latitude[\\xb0]', 'Lat_Max'],\r\n    ['Start Longitude[\\xb0]', 'Lon_Min'],\r\n    ['End Longitude[\\xb0]', 'Lon_Max']\r\n]\r\n\r\nconst styles = (theme) => ({\r\n    title:{\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    wrapper: {\r\n        // width: '90%',\r\n        // margin: '0px auto 5px 10px',\r\n        padding: '10px',\r\n        height: '100%',\r\n        userSelect: 'auto'\r\n    },\r\n    infoCard: {\r\n        padding: theme.spacing(1),\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    gridClass: {\r\n        height: '100%',\r\n        maxHeight: '180px'\r\n    },\r\n    gridItem: {\r\n        // height: '90%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        verticalAlign: 'middle',\r\n        maxHeight: '180px'\r\n    },\r\n    datasetDescriptionWrapper: {\r\n        whiteSpace: 'normal',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    datasetDescription: {\r\n        marginBottom: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    vizSampleImage: {\r\n        maxWidth: '80%',\r\n        maxHeight: '260px'\r\n    },\r\n    variableDetailTable: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '100%',\r\n        tableLayout: 'fixed',\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    variableDetailTableRow: {\r\n        height: '24px',\r\n        width: '100%'\r\n    },\r\n    variableDetailTableCell: {\r\n        color: '#FFF6EC',\r\n        borderBottomColor: 'black',\r\n        fontSize: '11px',\r\n        maxWidth: '100%',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        paddingRight: '14px'\r\n    },\r\n\r\n    gridDetailTypography: {\r\n        fontSize: '11px',\r\n        whiteSpace: 'normal',\r\n        width: '100%',\r\n        display: 'block',\r\n    },\r\n\r\n    boldText: {\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    rightGridItem: {\r\n        maxWidth: '100%',\r\n        paddingTop: '10px',\r\n        boxSizing: 'border-box',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    datasetDescriptionButton: {\r\n        backgroundColor: colors.primary,\r\n        color: 'white',\r\n        '&:hover': {\r\n            backgroundColor: '#518516',\r\n        },\r\n        fontSize: '12px',\r\n        maxWidth: '100%',\r\n        marginTop: '50px'\r\n    },\r\n    \r\n    buttonTextWrapper: {\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: '100%',\r\n        overflow: 'hidden'\r\n    }\r\n})\r\n\r\nconst GridDetail = (props) => {\r\n    const {classes} = props;\r\n\r\n    return (\r\n        <div className={`ag-selectable ${classes.wrapper}`}>\r\n                <Grid container className={classes.gridClass}>\r\n                    <Grid container item xs={10} spacing={2}>\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping1.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell} title={props.data[row[1]]}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping2.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                        <TableRow key={tableMapping1.length + 1} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>Start Date</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Time_Min.slice(0,10)}</TableCell>\r\n                                        </TableRow>\r\n                                        <TableRow key={tableMapping1.length + 2} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>End Date</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Time_Max.slice(0,10)}</TableCell>\r\n                                        </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping3.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                        <TableRow key={tableMapping2.length + 1} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>Maximum Depth[m]</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Depth_Max || 'Surface Only'}</TableCell>\r\n                                        </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                {/* <Grid container direction='column' item xs={2} alignContent='center' alignItems='center'> */}\r\n\r\n                    {/* <Grid item xs={props.data.Acknowledgement ? 3 : 6} className={classes.rightGridItem}>\r\n                        <Button \r\n                            variant='contained'\r\n                            className={classes.datasetDescriptionButton} \r\n                            onClick={() => props.context.handleDescribeDataset(props.data.Dataset_Name)}\r\n                        >\r\n                            <span className={classes.buttonTextWrapper}>Dataset Details</span>\r\n                        </Button>\r\n                    </Grid> */}\r\n\r\n                    <Grid item xs={2} className={classes.rightGridItem}>\r\n                        {\r\n                            props.data.Comment &&\r\n                            <Button \r\n                                variant='contained'\r\n                                className={classes.datasetDescriptionButton} \r\n                                onClick={() => props.context.handleDescribeVariable(props.data.ID)}\r\n                            >\r\n                                <span className={classes.buttonTextWrapper}>Comment</span>\r\n                            </Button>\r\n                        }\r\n                    </Grid>\r\n                    {/* { props.data.Acknowledgement &&\r\n                        <Grid item xs={6} className={classes.rightGridItem}>\r\n                            <Typography variant='caption' className={`${classes.gridDetailTypography} ${classes.boldText}`}>\r\n                                Acknowlegement:\r\n                            </Typography>\r\n                            <Typography variant='caption' className={classes.gridDetailTypography} title={props.data.Acknowledgement}>\r\n                                {props.data.Acknowledgement}\r\n                            </Typography>\r\n                        </Grid>\r\n                    } */}\r\n                {/* </Grid> */}\r\n\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (withStyles(styles)(GridDetail));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper\r\n    },\r\n\r\n    markdown: {\r\n        '& img': {\r\n            maxWidth: '100%',\r\n            margin: '20px auto 20px auto',\r\n            display: 'block'\r\n        },\r\n        '& a': {\r\n            color: theme.palette.primary.main,\r\n            textDecoration: 'none'\r\n        }\r\n    }\r\n})\r\n\r\nclass DatasetDescriptionDialog extends Component {\r\n\r\n    // state = {\r\n    //     references: []\r\n    // }\r\n\r\n    render() {\r\n        const { description, classes, datasetName, clearDescription } = this.props;\r\n        // const { references } = this.state;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                { description ?\r\n                <Dialog \r\n                    open={Boolean(description)} \r\n                    onClose={clearDescription} \r\n                    maxWidth={false}\r\n                    PaperProps={{\r\n                        className: classes.dialogPaper\r\n                    }}\r\n                >\r\n                    <DialogTitle>{datasetName}</DialogTitle>\r\n                    <DialogContent>\r\n                        <ReactMarkdown source={description} className={classes.markdown}/>\r\n                    </DialogContent>\r\n\r\n                    {/* {references &&\r\n                        <DialogContent>\r\n                            <strong>References: {references.length}</strong>\r\n                        </DialogContent>\r\n                    } */}\r\n                </Dialog> :\r\n                ''\r\n                }\r\n            </React.Fragment>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default (withStyles(styles)(DatasetDescriptionDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        padding: '8px 16px 16px 16px'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nconst VariableDescriptionDialog = (props) => {\r\n    const { catalog, describedVariable, classes } = props;\r\n    let variable = catalog.find((item) => item.ID === describedVariable);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            { describedVariable ?\r\n            <Dialog \r\n                open={Boolean(describedVariable)} \r\n                onClose={props.clearDescription} \r\n                maxWidth={false}\r\n                PaperProps={{\r\n                    className: classes.dialogPaper\r\n                }}\r\n            >\r\n                <DialogTitle>{variable.Long_Name}</DialogTitle>\r\n                { variable.Comment &&\r\n                <DialogContent>\r\n                    {variable.Comment}\r\n                </DialogContent>\r\n                }\r\n            </Dialog> :\r\n            ''\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VariableDescriptionDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = theme => ({\r\n    tooltip: {\r\n        color: '#00FFFF',\r\n        fontSize: '13px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        padding: '12px',\r\n        borderRadius: '7px',\r\n        textAlign: 'center'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    showHelp: state.showHelp\r\n})\r\n\r\nconst ConnectedTooltip = (props) => {\r\n    const { classes, showHelp } = props;\r\n\r\n    if(!showHelp) {\r\n        return (\r\n            <React.Fragment>\r\n                {props.children}\r\n            </React.Fragment>\r\n        )}\r\n    else {\r\n        return (\r\n            <Tooltip \r\n                placement={props.placement} \r\n                open={showHelp} \r\n                title={props.title} \r\n                classes={{tooltip: classes.tooltip}}\r\n            >\r\n                {props.children}\r\n            </Tooltip>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(withStyles(styles)(ConnectedTooltip));","import React from 'react';\r\n\r\nimport { Typography, Grid, Table, TableBody, TableCell, TableRow, Button, IconButton, Tooltip } from '@material-ui/core';\r\nimport { ChevronRight, ExpandMore } from '@material-ui/icons';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n\r\n    title:{\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    datasetGroupWrapper: {\r\n        // width: '90%',\r\n        // margin: '0px auto 5px 10px',\r\n        padding: '10px',\r\n        height: '100%',\r\n        userSelect: 'auto',\r\n        textAlign: 'left',\r\n        bozSizing: 'border-box'\r\n    },\r\n\r\n    nonDatasetGroupWrapper: {\r\n        height: '100%',\r\n        userSelect: 'auto',\r\n        textAlign: 'left',\r\n        paddingLeft: '18px',\r\n        paddingTop: '10px'\r\n    },\r\n\r\n    infoCard: {\r\n        padding: theme.spacing(1),\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    \r\n    gridClass: {\r\n        height: '100%',\r\n        maxHeight: '200px',\r\n    },\r\n\r\n    datasetGridClass: {\r\n        height: '100%',\r\n        maxHeight: '200px'\r\n    },\r\n\r\n    gridItem: {\r\n        // height: '90%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        verticalAlign: 'middle',\r\n        maxHeight: '200px'\r\n    },\r\n\r\n    adjustGridLeft: {\r\n        marginLeft: '-7vw'\r\n    },\r\n\r\n    datasetDescriptionWrapper: {\r\n        whiteSpace: 'normal',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    datasetDescription: {\r\n        marginBottom: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    vizSampleImage: {\r\n        maxWidth: '15vw',\r\n        maxHeight: '180px'\r\n    },\r\n    variableDetailTable: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '100%',\r\n        tableLayout: 'fixed',\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    variableDetailTableRow: {\r\n        height: '24px',\r\n        width: '100%'\r\n    },\r\n    variableDetailTableCell: {\r\n        color: '#FFF6EC',\r\n        borderBottomColor: 'black',\r\n        fontSize: '11px',\r\n        maxWidth: '100%',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        paddingRight: '14px'\r\n    },\r\n\r\n    gridDetailTypography: {\r\n        fontSize: '11px',\r\n        whiteSpace: 'normal',\r\n        width: '100%',\r\n        display: 'block',\r\n    },\r\n\r\n    boldText: {\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    rightGridItem: {\r\n        maxWidth: '100%',\r\n        paddingTop: '10px',\r\n        boxSizing: 'border-box',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    datasetDescriptionButton: {\r\n        backgroundColor: colors.primary,\r\n        color: 'white',\r\n        '&:hover': {\r\n            backgroundColor: '#518516',\r\n        },\r\n        fontSize: '12px',\r\n        maxWidth: '100%',\r\n        margin: '0 auto',\r\n        verticalAlign: 'middle'\r\n    },\r\n    \r\n    buttonTextWrapper: {\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n\r\n    groupName: {\r\n        textAlign: 'left',\r\n        fontSize: '13px',\r\n        fontWeight: 700,\r\n        marginLeft: '-2px',\r\n        display: 'inline-block',\r\n        marginTop: '3px',\r\n        color: colors.primary\r\n    },\r\n\r\n    chevronButton: {\r\n        marginBottom: '4px',\r\n        marginRight: '21px',\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n\r\n    datasetChevronButton: {\r\n        marginTop: '75px',\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n\r\n    chevronIcon: {\r\n        transform: 'scale(0.8)',\r\n        color: colors.primary\r\n    },\r\n\r\n    datasetButtonWrapper: {\r\n        width: '70px',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    datasetName: {\r\n        marginTop: '-32px',\r\n        // marginBottom: '12px',\r\n        fontSize: '19px',\r\n        marginBottom: '-48px',\r\n        fontWeight: 700\r\n    },\r\n\r\n    tableGridSection: {\r\n        padding: '8px 8px 0 8px',\r\n        marginBottom: '-24px'\r\n    },\r\n\r\n    shortCell: {\r\n        maxWidth: '35%',\r\n        width: '35%'\r\n    },\r\n\r\n    acknowledgement: {\r\n        fontSize: '11px',\r\n        textAlign: 'center',\r\n        padding: '0 10px 0 10px',\r\n        maxWidth: '20vw',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        maxHeight: '100px'\r\n    },\r\n\r\n    acknowledgementHeader: {\r\n        padding: '0 6px 0 6px',\r\n        maxWidth: '20vw',\r\n        fontSize: '13px',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'normal',\r\n        textAlign: 'center',\r\n        marginBottom: '8px'\r\n    },\r\n\r\n    buttonMarginLeft: {\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        display: 'block'\r\n    },\r\n\r\n    buttonMarginTop: {\r\n        marginTop: '-60px',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        display: 'block'\r\n    },\r\n\r\n    tooltip: {\r\n        backgroundColor: colors.solidPaper,\r\n        color: colors.primary\r\n    }\r\n})\r\n\r\nconst GroupedDatasetRow = (props) => {\r\n    const { classes, node, context, value } = props;\r\n    const { data } = node.allLeafChildren[0];\r\n\r\n    const [expanded, setExpanded] = React.useState(node.expanded);\r\n\r\n    const toggleExpand = () => {\r\n        node.setExpanded(!node.expanded)\r\n        setExpanded(node.expanded);\r\n    }\r\n    \r\n    if(props.node.field === 'Dataset_Name') {    \r\n        return (\r\n            <div className={`ag-selectable ${classes.datasetGroupWrapper}`} onDoubleClick={toggleExpand}>            \r\n                <Grid container className={classes.datasetGridClass}>\r\n                    <Grid xs={1} item className={classes.datasetButtonWrapper}>\r\n                        {expanded ?\r\n                            <IconButton onClick={toggleExpand} size='small' className={`${classes.datasetChevronButton}`}>\r\n                                <ExpandMore className={classes.chevronIcon}/>\r\n                            </IconButton>\r\n                        :\r\n                        <Tooltip title='Show member variables' enterDelay={300}>\r\n                            <IconButton onClick={toggleExpand} size='small' className={`${classes.datasetChevronButton}`}>\r\n                                <ChevronRight className={classes.chevronIcon}/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        }\r\n                    </Grid>\r\n\r\n                    <Grid item container xs={11} className={`${classes.gridItem} ${classes.adjustGridLeft}`}>\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <img src={context.datasets[props.value].Icon_URL} alt=\"Mission Icon\" className={classes.vizSampleImage} onClick={toggleExpand}/>\r\n                        </Grid>\r\n\r\n                        <Grid justify='space-between' direction='column' container item xs={8} className={classes.gridItem}>\r\n                            <Grid container item xs={12}>\r\n                                <Typography className={classes.datasetName}>\r\n                                    {value}\r\n                                </Typography>\r\n                            </Grid>\r\n\r\n                            <Grid container item xs={12}>\r\n                                <Grid item xs={8} className={classes.tableGridSection}>\r\n                                    <Table className={classes.variableDetailTable} size='small'>\r\n                                            <TableBody>\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}><strong>Source</strong></TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Data_Source}>{data.Data_Source}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}><strong>Distributor</strong></TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Distributor}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>SQL Table</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Table_Name}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>Temporal Resolution</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Temporal_Resolution}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>Spatial Resolution</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Spatial_Resolution}</TableCell>\r\n                                                </TableRow>\r\n                                            </TableBody>\r\n                                    </Table>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={4} container direction='column' className={classes.tableGridSection}>\r\n                                        <div style={{height: '70%', justifyContent: 'center', width: '100%'}}>\r\n                                    { data.Acknowledgement &&\r\n                                        <div>\r\n                                                <Typography className={classes.acknowledgementHeader}>\r\n                                                    <strong>Acknowledgement:</strong>\r\n                                                </Typography>\r\n\r\n                                                <Typography title={data.Acknowledgement} className={classes.acknowledgement}>\r\n                                                    {data.Acknowledgement}\r\n                                                </Typography>\r\n                                        </div>\r\n                                    }\r\n                                        </div>\r\n\r\n                                        <div style={{height: '30%', justifyContent: 'center', width: '100%'}}>\r\n                                            <Button \r\n                                                variant='contained'\r\n                                                className={`${classes.datasetDescriptionButton} ${data.Acknowledgement ? classes.buttonMarginLeft : classes.buttonMarginTop}`} \r\n                                                onClick={() => props.context.handleDescribeDataset(data.Dataset_Name)}\r\n                                            >\r\n                                                <span className={classes.buttonTextWrapper}>Dataset Details</span>\r\n                                            </Button>\r\n                                        </div>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        )\r\n    }\r\n    else return (\r\n        <div className={`ag-selectable ${classes.nonDatasetGroupWrapper}`}>\r\n            <div style={{display: 'inline-block', marginLeft: `${node.level * 36}px`}}></div>\r\n            {expanded ? \r\n                <IconButton onClick={toggleExpand} size='small' className={`${classes.chevronButton}`}>\r\n                    <ExpandMore className={classes.chevronIcon}/>\r\n                </IconButton> \r\n            :\r\n\r\n                <IconButton onClick={toggleExpand} size='small' className={`${classes.chevronButton}`} disableRipple={true} disableFocusRipple={true}>\r\n                    <ChevronRight className={classes.chevronIcon}/>\r\n                </IconButton>                \r\n            }\r\n\r\n            <Typography className={classes.groupName} variant='h6'>\r\n                {props.value}\r\n            </Typography>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (withStyles(styles)(GroupedDatasetRow));","import React, { Component } from 'react';\r\n\r\nimport { AgGridReact } from 'ag-grid-react';\r\n\r\nimport GridDetail from './GridDetail';\r\nimport DatasetDescriptionDialog from './DatasetDescriptionDialog';\r\nimport VariableDescriptionDialog from './VariableDescriptionDialog';\r\n\r\nimport stringify from 'csv-stringify/lib/sync';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Paper, Button, Grid, Tooltip, InputAdornment } from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nimport ConnectedTooltip from '../UI/ConnectedTooltip';\r\nimport GroupedDatasetRow from './GroupedDatasetRow';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst columnDefs = [\r\n  {\r\n    headerName: \"Long Name\", //\r\n    field: \"Long_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    tooltipField: 'longName',\r\n    cellRenderer: \"agGroupCellRenderer\",\r\n\r\n  },\r\n  {\r\n    headerName: \"Variable\",\r\n    field: \"Variable\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Table Name\",\r\n    field: \"Table_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  }, \r\n  {\r\n    headerName: \"Dataset Name\",\r\n    field: \"Dataset_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    tooltipField: 'datasetName',\r\n    rowGroup: true,\r\n    enableRowGroup: true,\r\n    hide: true\r\n  }, \r\n  {\r\n    headerName: \"Make\",\r\n    field: \"Make\",\r\n    sortable: true,\r\n    filter: true,\r\n    enableRowGroup: true,\r\n    maxWidth: 160\r\n  },\r\n  {\r\n    headerName: \"Sensor\",\r\n    field: \"Sensor\",\r\n    sortable: true,\r\n    filter: true,\r\n    enableRowGroup: true,\r\n    maxWidth: 160\r\n  }, \r\n  {\r\n    headerName: \"Study Domain\",\r\n    field: \"Study_Domain\",\r\n    sortable: true,\r\n    filter: true,\r\n    // hide: true,\r\n    maxWidth: 160,\r\n    enableRowGroup: true\r\n  }, \r\n  {\r\n    headerName: \"Process Level\",\r\n    field: \"Process_Level\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Spatial Resolution\",\r\n    field: \"Spatial_Resolution\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Temporal Resolution\",\r\n    field: \"Temporal_Resolution\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Unit\", \r\n    field: \"Unit\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Key Words\",\r\n    field: 'Keywords',\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Data Source\",\r\n    field: 'Data_Source',\r\n    hide: true\r\n  }\r\n]\r\n\r\nconst styles = (theme) => ({\r\n  gridWrapper: {\r\n    height: '80vh', \r\n    width: '96%',\r\n    margin: '0 auto'\r\n  },\r\n\r\n  gridSearch: {\r\n    margin: '0 auto 20px auto',\r\n    width: '60%'\r\n  },\r\n\r\n  gridPaper: {\r\n    marginTop: '68px',\r\n    padding: '20px',\r\n    height: 'calc(100vh - 68px)',\r\n    boxSizing: 'border-box',\r\n    overflow: 'hidden'\r\n  },\r\n\r\n  downloadButton: {\r\n    margin: '6px 0 0 0',\r\n    textTransform: 'none',\r\n    color: 'white',\r\n    backgroundColor: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n  }\r\n  }\r\n})\r\n\r\nconst defaultColDef = {\r\n  resizable: true,\r\n  cellStyle: {\r\n    textAlign:'left'\r\n  }\r\n}\r\n\r\nconst autoGroupColumnDef = {\r\n  cellStyle: {\r\n    textAlign:'left'\r\n  },\r\n}\r\n\r\nconst getRowHeight = (params) => {\r\n  if(params.node.group && params.node.field === 'Dataset_Name') return 200;\r\n  if(params.node.detail) return 180;\r\n  return 48;\r\n}\r\n\r\nclass AGGridWrapper extends Component {\r\n\r\n  state = {\r\n    filterText: '',\r\n    describedDataset: '',\r\n    describedVariable: null\r\n  }\r\n\r\n  handleDescribeDataset = (dataset) => {\r\n    this.setState({...this.state, describedDataset: dataset})\r\n  }\r\n\r\n  handleDescribeVariable = (variable) => {\r\n    this.setState({...this.state, describedVariable: variable})\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState({...this.state, filterText: event.target.value})\r\n    this.gridApi.setQuickFilter(event.target.value);\r\n  }\r\n\r\n  onGridReady = (params) => {\r\n    this.gridApi = params.api;\r\n    this.columnApi = params.columnApi;\r\n\r\n    this.gridApi.sizeColumnsToFit();\r\n  }\r\n\r\n  onGridSizeChanged = (params) => {\r\n    this.gridApi.sizeColumnsToFit();\r\n  }\r\n\r\n  handleColumnRowGroupChanged = (event) => {\r\n    this.gridApi.sizeColumnsToFit()\r\n    event.columns.forEach(column => {\r\n      column.columnApi.setColumnVisible(column.colId, false);\r\n    })\r\n  }\r\n\r\n  handleDownloadCatalog = () => {\r\n    let csv = stringify(this.props.catalog, {\r\n      header: true\r\n    });\r\n\r\n    const blob = new Blob([csv], {type: 'text/csv'});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.setAttribute('hidden', '');\r\n    a.setAttribute('href', url);\r\n    a.setAttribute('download', `CMAP_Catalog.csv`);\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n\r\n  render = () => {\r\n    const { classes, datasets } = this.props;\r\n    const { describedDataset, describedVariable } = this.state;\r\n    const description = !datasets ? '' : !datasets[describedDataset] ? '' : datasets[describedDataset].Description;\r\n\r\n    return (\r\n      <Paper elevation={12} className={classes.gridPaper}>\r\n        <DatasetDescriptionDialog \r\n          description={description}\r\n          clearDescription={() => this.handleDescribeDataset('')}\r\n          datasetName={describedDataset}\r\n        />\r\n        <VariableDescriptionDialog\r\n          clearDescription={() => this.handleDescribeVariable(null)}\r\n          describedVariable={describedVariable}\r\n        />\r\n        <Grid container>\r\n          <Grid item xs={3}>\r\n\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            {/* <ConnectedTooltip title='Enter one or more search terms.' placement='top'> */}\r\n              <TextField              \r\n                className={classes.gridSearch}\r\n                autoFocus={true}\r\n                margin=\"normal\"\r\n                id=\"name\"\r\n                type=\"text\"\r\n                variant='outlined'\r\n                name='filterText'\r\n                value={this.state.filterText}\r\n                onChange={this.handleChange}\r\n                placeholder='Search Catalog'\r\n                InputProps={{\r\n                  startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search style={{color:colors.primary}}/>\r\n                  </InputAdornment>\r\n                ),\r\n                }}\r\n              />\r\n            {/* </ConnectedTooltip> */}\r\n\r\n          </Grid>\r\n          <Grid item xs={2}>\r\n            <Tooltip placement='top' title='Download the full catalog in CSV format'>\r\n              <Button \r\n                className={classes.downloadButton}\r\n                variant='contained'\r\n                color='primary'\r\n                onClick={this.handleDownloadCatalog}            \r\n              >\r\n                  Download Catalog\r\n              </Button>\r\n            </Tooltip>\r\n          </Grid>\r\n\r\n          <Grid item xs={1}>\r\n\r\n          </Grid>\r\n        </Grid>\r\n\r\n          \r\n          <div className={classes.gridWrapper + \" ag-theme-material\"}>\r\n            <AgGridReact\r\n              // General settings\r\n              columnDefs={columnDefs}\r\n              defaultColDef={defaultColDef}\r\n              rowData={this.props.catalog}\r\n              onGridReady={this.onGridReady}\r\n              onGridSizeChanged={this.onGridSizeChanged}\r\n              suppressDragLeaveHidesColumns= {true}\r\n              enableCellTextSelection={true}\r\n              suppressContextMenu={true}\r\n              getRowHeight={getRowHeight}\r\n              // getRowClass={getRowClass}\r\n\r\n              // Additional props\r\n              context={{\r\n                datasets,\r\n                handleDescribeDataset: this.handleDescribeDataset,\r\n                handleDescribeVariable: this.handleDescribeVariable\r\n              }}\r\n\r\n              // Setting related to styling\r\n              getRowStyle= {function(params) {\r\n                let styles = {};\r\n                if (params.node.detail) {\r\n                    styles.background = 'transparent' \r\n                }\r\n                if(params.node.level > 0){\r\n                  styles.marginLeft = '32px'\r\n                }\r\n                return styles;\r\n              }}\r\n\r\n              //Settings related to grouping functionality\r\n              rowGroupPanelShow='always'\r\n              groupMultiAutoColumn={true}\r\n              onColumnRowGroupChanged={this.handleColumnRowGroupChanged}\r\n              autoGroupColumnDef={autoGroupColumnDef}\r\n              enableBrowserTooltips={true}\r\n              groupUseEntireRow={true}\r\n              // groupColumnDef={groupColumnDef}\r\n              groupRowRenderer='datasetGroupRowRenderer'\r\n\r\n              // Settings related to master/detail\r\n              masterDetail={true}\r\n              frameworkComponents= {{ myDetailCellRenderer: GridDetail, datasetGroupRowRenderer: GroupedDatasetRow}}\r\n              detailCellRenderer=\"myDetailCellRenderer\"\r\n              detailRowHeight={200}\r\n            />\r\n          </div>\r\n          </Paper>\r\n    )\r\n  }  \r\n}\r\n\r\nexport default (withStyles(styles)(AGGridWrapper));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport AGGridWrapper from './AGGridWrapper';\r\n\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    catalogRequestState: state.catalogRequestState,\r\n    catalog : state.catalog,\r\n    datasets: state.datasets\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    retrievalRequestSend,\r\n    datasetRetrievalRequestSend\r\n}\r\n\r\nconst styles = (theme) => ({\r\n\r\n})\r\n\r\nclass Catalog extends Component {\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n    }\r\n\r\n    determineContent = () => {\r\n        if(this.props.catalog && this.props.datasets) return <AGGridWrapper catalog={this.props.catalog} datasets={this.props.datasets}/>\r\n    }\r\n\r\n    render(){\r\n        let content = this.determineContent();\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                {content}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Catalog));","import { withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\n// import IconButton from '@material-ui/core/IconButton';\r\n// import InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\nimport React from 'react';\r\n\r\nconst styles = theme => ({\r\n    registrationCard: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n        height:'200px'\r\n    },\r\n\r\n    textField: {\r\n        margin:theme.spacing(1),\r\n        width: '80%'\r\n    }\r\n});\r\n\r\nconst RegistrationCard = (props) => {\r\n    const { classes } = props;\r\n    const fields = Object.keys(props.inputFieldState);\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            props.buttonRef.current.click();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.registrationCard}>\r\n            <Grid container spacing={1}>\r\n            {\r\n                fields.map((field, index) => {\r\n                    return (\r\n                        <Grid key={index} item xs={fields.length > 2 ? 6 : 12}>\r\n                        <TextField\r\n                            key={index}\r\n                            autoFocus={Boolean(index === 0)}\r\n                            name={props.inputFieldInfo[field].name}\r\n                            label={props.inputFieldInfo[field].label}\r\n                            value={props.inputFieldState[field].value}\r\n                            className={classes.textField}\r\n                            onChange={props.onChange}\r\n                            type={props.inputFieldInfo[field].type}\r\n                            error={!props.inputFieldState[field].valid}                            \r\n                            helperText={props.inputFieldState[field].valid ? ' ' : props.inputFieldInfo[field].requirement}\r\n                            onKeyPress={handleKeyPress}\r\n                            />\r\n                        </Grid>\r\n                    )\r\n                })\r\n            }                \r\n            </Grid>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(RegistrationCard);","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport { Stepper, Step, StepLabel, Button, Typography, CircularProgress, Paper, Link } from '@material-ui/core';\r\n\r\nimport RegistrationCard from './RegistrationCard';\r\n\r\nimport { registrationNextActiveStep, registrationPreviousActiveStep } from '../../Redux/actions/ui';\r\nimport { userRegistrationRequestSend, userValidationRequestSend, userValidationRequestSuccess } from '../../Redux/actions/user';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '60%',\r\n        margin: '10% auto'\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    instructions: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    instructionsPaper: {\r\n        width: '60%',\r\n        margin: '5% auto',\r\n        padding: '24px'\r\n    },\r\n    registrationCard: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n\r\n    textField: {\r\n        margin:theme.spacing(1),\r\n        width: 200\r\n    },\r\n\r\n    buttonProgress: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n\r\n    bottomError: {\r\n        color: 'white',\r\n        marginTop: theme.spacing(2)\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    registrationActiveStep: state.registrationActiveStep,\r\n    userValidationState: state.userValidationState,\r\n    userRegistrationState: state.userRegistrationState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    registrationNextActiveStep,\r\n    registrationPreviousActiveStep,\r\n\r\n    userRegistrationRequestSend,\r\n\r\n    userValidationRequestSend\r\n}\r\n\r\n// const getSteps = () => ['Your Information', 'Optional Organization Info', 'Security'];\r\nconst getSteps = () => ['Your Information', 'Optional Organization Info'];\r\nconst getCardInfo = () => ([\r\n    {\r\n        firstName: {\r\n            label:'First Name*',\r\n            name: 'firstName',\r\n            type: 'text',\r\n            requirement: 'Must be 2 or more alphabetical characters.',\r\n            optional: false\r\n        },\r\n        lastName: {\r\n            label:'Last Name*',\r\n            name: 'lastName',\r\n            type: 'text',\r\n            requirement: 'Must be 2 or more alphabetical characters.',\r\n            optional: false\r\n        },\r\n        username: {\r\n            label:'Username*',\r\n            name: 'username',\r\n            type: 'text',\r\n            requirement: 'Must be 6 to 20 alphanumeric characters.',\r\n            optional: false\r\n        },\r\n        email: {\r\n            label:'Email Address*',\r\n            name: 'email',\r\n            type: 'email',\r\n            requirement: 'Must be a valid email address.',\r\n            optional: false\r\n        }\r\n    },\r\n    {\r\n        institute: {\r\n            label:'Institute',\r\n            name: 'institute',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        },\r\n        department: {\r\n            label:'Department',\r\n            name: 'department',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        },\r\n        country: {\r\n            label:'Country',\r\n            name: 'country',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        }\r\n    }\r\n])\r\n\r\nconst buttonRef = React.createRef();\r\n\r\nclass RegistrationStepper extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        let cards = []\r\n        getCardInfo().forEach(card => {\r\n            let newCard = {};\r\n            Object.keys(card).forEach(key => {\r\n                newCard[key] = {\r\n                    value: '',\r\n                    valid: true,\r\n                    optional: card[key].optional\r\n                }\r\n            })\r\n            cards.push(newCard);\r\n        })\r\n\r\n        this.state = {\r\n            cards\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // Prevents validation failure message from appearing again if user navigates here to try again\r\n        if(this.props.userValidationState === states.failed) this.props.userValidationRequestSuccess();\r\n    }\r\n\r\n    validateField = (name, rawValue) => {\r\n        let value = rawValue.trim();\r\n        let pattern = /$^/;\r\n        switch(name){\r\n            case 'firstName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'lastName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'username':\r\n                pattern = /^[A-Za-z0-9 ]{6,20}$/;\r\n                break;\r\n            case 'email':\r\n                pattern = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n                break;\r\n            case 'institute':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'department':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'country':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'password':\r\n                pattern = /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/\r\n                this.setState(previousState => {\r\n                    let newCardState = [...previousState.cards];\r\n                    newCardState[2].confirmPassword.valid = Boolean(newCardState[2].confirmPassword.value === value);\r\n                    return {cards: newCardState};\r\n                })\r\n                break;\r\n            case 'confirmPassword':\r\n                return this.state.cards[2].password.value === value;\r\n            default:\r\n                break;\r\n        }\r\n        return pattern.test(value);\r\n    }\r\n\r\n    processStateToActionPayload = () => {\r\n        let actionPayload = {};\r\n        this.state.cards.forEach(card => {\r\n            Object.keys(card).forEach(cardKey => {\r\n                actionPayload[cardKey] = card[cardKey].value;\r\n            })\r\n        })\r\n        return actionPayload;\r\n    }\r\n\r\n    currentCardIsValid = () => {\r\n        let currentCard = this.state.cards[this.props.registrationActiveStep];\r\n        for(let key in currentCard){\r\n            if(currentCard[key].optional) continue;\r\n            if(!currentCard[key].value || !currentCard[key].valid) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    handleNext = () => {\r\n        const activeStep = this.props.registrationActiveStep;\r\n        \r\n        switch(activeStep){\r\n            case 0:\r\n                // API request to validate username and email address\r\n                let username= this.state.cards[0].username.value;\r\n                let email= this.state.cards[0].email.value;\r\n                this.props.userValidationRequestSend(username, email);\r\n                break;\r\n            // case 1:\r\n            //     this.props.registrationNextActiveStep();\r\n            //     break;\r\n            case 1:\r\n                // API request to register user\r\n                this.props.userRegistrationRequestSend(this.processStateToActionPayload())\r\n                break;\r\n            default:\r\n                this.props.registrationNextActiveStep();\r\n                break;\r\n\r\n\r\n        }\r\n    };\r\n\r\n    handleBack = () => {\r\n        this.props.registrationPreviousActiveStep();\r\n    };\r\n\r\n    handleChange = (event) => {\r\n        let newValue = event.target.value;\r\n        let fieldName = event.target.name;\r\n        let valid = this.validateField(fieldName, newValue);\r\n        this.setState(previousState => {\r\n            let cards = [...previousState.cards];\r\n            cards[this.props.registrationActiveStep][fieldName] = {\r\n                ...cards[this.props.registrationActiveStep][fieldName],\r\n                value: newValue,\r\n                valid\r\n            }\r\n            return {cards};\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const steps = getSteps();\r\n        const activeStep = this.props.registrationActiveStep;\r\n        const cardInfoArray = getCardInfo();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className={classes.root}>\r\n                    \r\n                    <Stepper activeStep={activeStep}>\r\n                    {steps.map((label, index) => {\r\n                        return (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                        );\r\n                    })}\r\n                    </Stepper>\r\n                    <div>\r\n                    {activeStep === steps.length ? (\r\n                        <Paper className={classes.instructionsPaper}>\r\n                            <Typography className={classes.instructions}>\r\n                                We've sent you an email with a link for finalizing your registration and choosing a password. If you don't receive the email within the next few minute please check your spam folder.\r\n                            </Typography>\r\n                        </Paper>\r\n                    ) : (\r\n                        <div>\r\n                            <RegistrationCard \r\n                                inputFieldState={{...this.state.cards[this.props.registrationActiveStep]}} \r\n                                inputFieldInfo={{...cardInfoArray[this.props.registrationActiveStep]}}\r\n                                onChange={this.handleChange}\r\n                                buttonRef={buttonRef}\r\n                            />\r\n                            <div>\r\n                                <Button\r\n                                onClick={activeStep === 0 ? this.props.handleHideStepper : this.handleBack}\r\n                                className={classes.button}\r\n                                >\r\n                                    Back\r\n                                </Button>\r\n\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={this.handleNext}\r\n                                    className={classes.button}\r\n                                    disabled={!this.currentCardIsValid() || this.props.userValidationState === states.inProgress}\r\n                                    ref={buttonRef}\r\n                                >\r\n                                    {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\r\n                                </Button>\r\n                                {this.props.userValidationState === states.inProgress && <CircularProgress size={24} className= {classes.buttonProgress} />}\r\n                                {this.props.userValidationState === states.failed && <Typography className={classes.bottomError}>That username or email address is already in use. If you previously registered you can recover your password <Link onClick={this.handleClose} component={RouterLink} to={{pathname: '/forgotpass'}}>here</Link>.</Typography>}\r\n                                {this.props.userRegistrationState === states.failed && <Typography className={classes.bottomError}>Registration failed. Please try again.</Typography>}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(RegistrationStepper));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n    wrapper: {\r\n        height: '46px',\r\n        display: 'flex',\r\n        cursor: 'pointer',\r\n        borderRadius: '4px',\r\n        '&:hover': {\r\n            boxShadow: '0 0 3px 3px rgba(66,133,244,.3)'\r\n        },\r\n        paddingRight: '14px',\r\n        // backgroundColor: '#4285F4',\r\n        width: '200px',\r\n        color: '#ffffff',\r\n\r\n        // backgroundColor: 'white',\r\n        // color: '#444',\r\n    },\r\n\r\n    textSpan: {\r\n        marginTop: '13px',\r\n        marginLeft: '10px',\r\n        fontFamily: \"'Roboto', sans-serif\"\r\n    }\r\n})\r\n\r\nconst GoogleSignInButton = (props) => {\r\n    const { classes, clickHandlerTarget } = props;\r\n\r\n    return (\r\n        <div id={clickHandlerTarget} className={classes.wrapper}>\r\n            {/* Google Icon */}\r\n            <svg width=\"46px\" height=\"46px\" viewBox=\"0 0 46 46\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\r\n            <title>btn_google_dark_normal_ios</title>\r\n            <desc>Created with Sketch.</desc>\r\n            <defs>\r\n                <filter x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" filterUnits=\"objectBoundingBox\" id=\"filter-1\">\r\n                    <feOffset dx=\"0\" dy=\"1\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset>\r\n                    <feGaussianBlur stdDeviation=\"0.5\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur>\r\n                    <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0\" in=\"shadowBlurOuter1\" type=\"matrix\" result=\"shadowMatrixOuter1\"></feColorMatrix>\r\n                    <feOffset dx=\"0\" dy=\"0\" in=\"SourceAlpha\" result=\"shadowOffsetOuter2\"></feOffset>\r\n                    <feGaussianBlur stdDeviation=\"0.5\" in=\"shadowOffsetOuter2\" result=\"shadowBlurOuter2\"></feGaussianBlur>\r\n                    <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0\" in=\"shadowBlurOuter2\" type=\"matrix\" result=\"shadowMatrixOuter2\"></feColorMatrix>\r\n                    <feMerge>\r\n                        <feMergeNode in=\"shadowMatrixOuter1\"></feMergeNode>\r\n                        <feMergeNode in=\"shadowMatrixOuter2\"></feMergeNode>\r\n                        <feMergeNode in=\"SourceGraphic\"></feMergeNode>\r\n                    </feMerge>\r\n                </filter>\r\n                <rect id=\"path-2\" x=\"0\" y=\"0\" width=\"40\" height=\"40\" rx=\"2\"></rect>\r\n                <rect id=\"path-3\" x=\"5\" y=\"5\" width=\"38\" height=\"38\" rx=\"1\"></rect>\r\n            </defs>\r\n            <g id=\"Google-Button\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\r\n                <g id=\"9-PATCH\"  transform=\"translate(-608.000000, -219.000000)\"></g>\r\n                <g id=\"btn_google_dark_normal\" transform=\"translate(-1.000000, -1.000000)\">\r\n                    <g id=\"button\" transform=\"translate(4.000000, 4.000000)\" filter=\"url(#filter-1)\">\r\n                        <g id=\"button-bg\">\r\n                            <use fill=\"#4285F4\" fillRule=\"evenodd\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                        </g>\r\n                    </g>\r\n                    <g id=\"button-bg-copy\">\r\n                        <use fill=\"#FFFFFF\" fillRule=\"evenodd\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                    </g>\r\n                    <g id=\"logo_googleg_48dp\" transform=\"translate(15.000000, 15.000000)\">\r\n                        <path d=\"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z\" id=\"Shape\" fill=\"#4285F4\"></path>\r\n                        <path d=\"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z\" id=\"Shape\" fill=\"#34A853\"></path>\r\n                        <path d=\"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z\" id=\"Shape\" fill=\"#FBBC05\"></path>\r\n                        <path d=\"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z\" id=\"Shape\" fill=\"#EA4335\"></path>\r\n                        <path d=\"M0,0 L18,0 L18,18 L0,18 L0,0 Z\" id=\"Shape\" ></path>\r\n                    </g>\r\n                    <g id=\"handles_square\" ></g>\r\n                </g>\r\n            </g>\r\n            </svg>\r\n\r\n            <span className={classes.textSpan}>\r\n                {props.text}\r\n            </span>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default withStyles(styles)(GoogleSignInButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Paper, Button, Typography } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport RegistrationStepper from './RegistrationStepper';\r\nimport GoogleSignInButton from './GoogleSignInButton';\r\n\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\nimport { googleLoginRequestSend } from '../../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '10% auto',\r\n        padding: '24px'\r\n        // height: '40vh'\r\n    },\r\n\r\n    emailSignUpButton: {\r\n        textTransform: 'none',\r\n        height: '46px',\r\n        color: 'white'\r\n    },\r\n\r\n    googleWrapper: {\r\n        margin: '50px auto 0 0',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    description: {\r\n        paddingTop: '50px'\r\n    },\r\n\r\n    emailSignUpWrapper: {\r\n        marginTop: '40px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarOpen,\r\n    googleLoginRequestSend\r\n}\r\n\r\nconst registerClickHandlerTarget = 'g-signup';\r\n\r\nclass Register extends Component {\r\n    state = {\r\n        showStepper: false\r\n    }\r\n\r\n    onGoogleSignup = (user) => {\r\n        let token = user.getAuthResponse(true).id_token;\r\n        this.props.googleLoginRequestSend(token);\r\n    }\r\n\r\n    registerGoogleClickHandler = () => {\r\n        let _this = this;\r\n        let auth = window.gapi.auth2\r\n        if(auth){\r\n            let authInstance = auth.getAuthInstance();\r\n            authInstance.attachClickHandler(\r\n                registerClickHandlerTarget, \r\n                null, \r\n                _this.onGoogleSignup,\r\n                () => _this.props.snackbarOpen('There was a problem accessing your google account')\r\n            );\r\n        } else {\r\n            setTimeout(_this.registerGoogleClickHandler, 20);\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.registerGoogleClickHandler();\r\n    }\r\n\r\n    handleShowStepper = () => {\r\n        this.setState({showStepper: true})\r\n    }\r\n\r\n    handleHideStepper = () => {\r\n        this.setState({showStepper: false});\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {!this.state.showStepper &&\r\n                    <Paper className={classes.paper}>\r\n                        <Typography className={classes.description}>\r\n                            Create an account to visualize data, and access the Simons CMAP API.\r\n                        </Typography>\r\n\r\n                        <div className={classes.googleWrapper}>\r\n                            <GoogleSignInButton clickHandlerTarget={registerClickHandlerTarget} text='Sign up with Google'/>\r\n                        </div>\r\n\r\n                        <div className={classes.emailSignUpWrapper}>\r\n                            <Button variant='contained' color='primary' className={classes.emailSignUpButton} onClick={this.handleShowStepper}>\r\n                                Sign up with an Email Address\r\n                            </Button>\r\n                        </div>\r\n                    </Paper>                \r\n                }\r\n                {this.state.showStepper && <RegistrationStepper handleHideStepper={this.handleHideStepper}/>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(Register));","const validation = {\r\n    depth: {\r\n        depthOneIsLower: 'Cannot be larger than end',\r\n        depthOneOutOfBounds: 'Data ends at $',\r\n        depthTwoOutOfBounds: 'Data begins at $',\r\n        negative: 'Cannot be negative'\r\n    },\r\n\r\n    date: {\r\n        dateOneIsLater: 'Cannot be after end',\r\n        dateOneOutOfBounds: 'Data ends at $',\r\n        dateTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lat: {\r\n        latOneIsHigher: 'Cannot be larger than end',\r\n        latOneOutOfBounds: 'Data ends at $',\r\n        latTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lon: {\r\n        lonOneIsHigher: 'Cannot be larger than end',\r\n        lonOneOutOfBounds: 'Data ends at $',\r\n        lonTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    type: {\r\n        dataIsIrregular: '$ is not available for sparse data',\r\n        dateRangeRequired: '$ requires a range of dates',\r\n        depthRangeRequired: '$ requires a range of depths',\r\n        surfaceOnlyDataset: '$ contains only surface data',\r\n        irregularOnly: 'Sparse map is only available for sparse data',\r\n        dataSizeTooLarge: 'Data set is too large for this visualization type.',\r\n        webGLContextLimit: 'Limit exceeded for sparse and heatmaps. Please delete one or more to proceed.'\r\n    },\r\n\r\n    generic: {\r\n        invalid: 'Invalid input',\r\n        dataSizeWarning: 'Wait time and application performance may be poor due to size of data.',\r\n        dataSizePrevent: 'Data set is too large. Please reduce date range or area size.',\r\n        variableMissing: 'Please select a variable',\r\n        vizTypeMissing: 'Please select a visualization type'\r\n    }\r\n}\r\n\r\nexport default validation;","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, Table, TableRow, TableCell, TableBody } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        width: '700px'\r\n    }\r\n})\r\n\r\nconst TableStatsDialog = (props) => {\r\n    const { data, classes } = props;\r\n\r\n    if(!data) return '';\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <DialogTitle>{data.Long_Name}</DialogTitle>\r\n            <DialogContent>\r\n                { data.Comment &&\r\n                    <DialogContentText>\r\n                        {data.Comment}\r\n                    </DialogContentText>\r\n                }\r\n                <Table size='small'>\r\n                    <TableBody>\r\n                            <TableRow>\r\n                                <TableCell>Dataset</TableCell>\r\n                                <TableCell title={data.Dataset_Name}>{data.Dataset_Name.length > 25 ? data.Dataset_Name.slice(0,23) + '...' : data.Dataset_Name}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Table Name</TableCell>\r\n                                <TableCell title={data.Table_Name}>{data.Table_Name > 25 ? data.Table_Name.slice(0,23) + '...' : data.Table_Name}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Source</TableCell>\r\n                                <TableCell title={data.Data_Source}>{data.Data_Source > 25 ? data.Data_Source.slice(0,23) + '...' : data.Data_Source}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Distributor</TableCell>\r\n                                <TableCell title={data.Distributor}>{data.Distributor.length > 25 ? data.Distributor.slice(0,23) + '...' : data.Distributor}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Sensor</TableCell>\r\n                                <TableCell>{data.Sensor}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Spatial Resolution</TableCell>\r\n                                <TableCell>{data.Spatial_Resolution}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Resolution</TableCell>\r\n                                <TableCell>{data.Temporal_Resolution}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Coverage Begin</TableCell>\r\n                                <TableCell>{data.Time_Min ? data.Time_Min.slice(0,10) : 'Irregular'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Coverage End</TableCell>\r\n                                <TableCell>{data.Time_Max ? data.Time_Max.slice(0,10) : 'Irregular'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lat Coverage Begin</TableCell>\r\n                                <TableCell>{`${data.Lat_Min}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n                            <TableRow>\r\n                                <TableCell>Lat Coverage End</TableCell>\r\n                                <TableCell>{`${data.Lat_Max}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lon Coverage Begin</TableCell>\r\n                                <TableCell>{`${data.Lon_Min}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lon Coverage End</TableCell>\r\n                                <TableCell>{`${data.Lon_Max}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Depth Coverage Begin</TableCell>\r\n                                <TableCell>{data.Depth_Min ? `${data.Depth_Min}(m)` : 'Surface Only'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Depth Coverage End</TableCell>\r\n                                <TableCell>{data.Depth_Max ? `${data.Depth_Max}(m)` : 'Surface Only'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            {data.Variable_Min &&\r\n                                <TableRow>\r\n                                    <TableCell>Minimum Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Min}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Max &&\r\n                                <TableRow>\r\n                                    <TableCell>Maximum Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Max}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Mean && \r\n                                <TableRow>\r\n                                    <TableCell>Mean Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Mean}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Std &&\r\n                                <TableRow>\r\n                                    <TableCell>Standard Deviation({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Std}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n                    </TableBody>\r\n                </Table>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(TableStatsDialog);\r\n\r\n// Variable_Max: \"4.999\"\r\n// Variable_Mean: \"-0.0000008547\"\r\n// Variable_Min: \"-4.9956\"\r\n// Variable_Std: \"0.1428013424\"","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nconst mapTemporalResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [temporalResolutions.threeMinutes] : 1,\r\n        [temporalResolutions.sixHourly] : 1,\r\n        [temporalResolutions.daily] : 1,\r\n        [temporalResolutions.weekly] : 7,\r\n        [temporalResolutions.monthly] : 30,\r\n        [temporalResolutions.annual] : 365,\r\n        [temporalResolutions.irregular] : null,\r\n        [temporalResolutions.monthlyClimatology]: 30,\r\n        [temporalResolutions.threeDay]: 3,\r\n        [temporalResolutions.eightDayRunning]: 8,\r\n        [temporalResolutions.eightDays]: 8\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapTemporalResolutionToNumber;","const utcDateStringToLocal = (utcString) => {\r\n    let date = new Date(utcString);\r\n    let utcYear = date.getUTCFullYear();\r\n    let utcMonth = date.getUTCMonth();\r\n    let utcDate = date.getUTCDate();\r\n\r\n    let newDate = new Date();\r\n    newDate.setFullYear(utcYear, utcMonth, utcDate);\r\n    return newDate;\r\n}\r\n\r\nexport default utcDateStringToLocal;","\r\nconst darwinDepths = [\r\n    5,\r\n    15,\r\n    25,\r\n    35,\r\n    45,\r\n    55,\r\n    65,\r\n    75.005,\r\n    85.025,\r\n    95.095,\r\n    105.31,\r\n    115.87,\r\n    127.15,\r\n    139.74,\r\n    154.47,\r\n    172.4,\r\n    194.735,\r\n    222.71,\r\n    257.47,\r\n    299.93,\r\n    350.68,\r\n    409.93,\r\n    477.47,\r\n    552.71,\r\n    634.735,\r\n    722.4,\r\n    814.47,\r\n    909.74,\r\n    1007.155,\r\n    1105.905,\r\n    1205.535,\r\n    1306.205,\r\n    1409.15,\r\n    1517.095,\r\n    1634.175,\r\n    1765.135,\r\n    1914.15,\r\n    2084.035,\r\n    2276.225,\r\n    2491.25,\r\n    2729.25,\r\n    2990.25,\r\n    3274.25,\r\n    3581.25,\r\n    3911.25,\r\n    4264.25,\r\n    4640.25,\r\n    5039.25,\r\n    5461.25,\r\n    5906.25\r\n]\r\n\r\nconst piscesDepths = [\r\n    0.494024991989,\r\n    1.54137504101,\r\n    2.64566898346,\r\n    3.81949496269,\r\n    5.07822418213,\r\n    6.44061422348,\r\n    7.92956018448,\r\n    9.5729970932,\r\n    11.404999733,\r\n    13.4671401978,\r\n    15.8100700378,\r\n    18.4955596924,\r\n    21.5988197327,\r\n    25.2114105225,\r\n    29.4447307587,\r\n    34.4341506958,\r\n    40.3440513611,\r\n    47.3736915588,\r\n    55.764289856,\r\n    65.8072662354,\r\n    77.8538513184,\r\n    92.3260726929,\r\n    109.729301453,\r\n    130.666000366,\r\n    155.850692749,\r\n    186.125595093,\r\n    222.475204468,\r\n    266.040313721,\r\n    318.127410889,\r\n    380.213012695,\r\n    453.937713623,\r\n    541.088928223,\r\n    643.566772461,\r\n    763.333129883,\r\n    902.339294434,\r\n    1062.43994141,\r\n    1245.29101562,\r\n    1452.25097656,\r\n    1684.28405762,\r\n    1941.89294434,\r\n    2225.07788086,\r\n    2533.3359375,\r\n    2865.70288086,\r\n    3220.82006836,\r\n    3597.03198242,\r\n    3992.48388672,\r\n    4405.22412109,\r\n    4833.29101562,\r\n    5274.78417969,\r\n    5727.91699219\r\n]\r\n\r\nconst _piscesTables = [\r\n    'tblPisces_NRT',\r\n    'tblPisces_NRT_Calendar'\r\n]\r\n\r\nconst _darwinTable = [\r\n    'tblDarwin_Chl_Climatology',\r\n    'tblDarwin_Ecosystem',\r\n    'tblDarwin_Nutrient',\r\n    'tblDarwin_Nutrient_Climatology',\r\n    'tblDarwin_Ocean_Color',\r\n    'tblDarwin_Phytoplankton',\r\n    'tblDarwin_Plankton_Climatology'\r\n]\r\n\r\nconst piscesTable = new Set(_piscesTables);\r\nconst darwinTable = new Set(_darwinTable);\r\n\r\nconst exports = {\r\n    count: (field, depth1, depth2) => {\r\n        const { Table_Name: table } = field.data;\r\n        var count = 0;\r\n    \r\n        if(piscesTable.has(table)) {\r\n            for(let i = 0; i < piscesDepths.length; i++){\r\n                if(piscesDepths[i] > depth2) break;\r\n                if(piscesDepths[i] > depth1) count ++; \r\n            }\r\n        } else if (darwinTable.has(table)) {\r\n            for(let i = 0; i < darwinDepths.length; i++){\r\n                if(darwinDepths[i] > depth2) break;\r\n                if(darwinDepths[i] > depth1) count ++; \r\n            }\r\n        } else {}\r\n        return count;\r\n    },\r\n\r\n    piscesTable,\r\n    darwinTable,\r\n    piscesDepths,\r\n    darwinDepths\r\n}\r\n\r\nexport default exports;","import visualizationSubTypes from '../Enums/visualizationSubTypes';\r\n\r\nexport default (charts) => {\r\n    let count = 0;\r\n    charts.forEach(chart => {\r\n        if(chart.subType === visualizationSubTypes.heatmap) count ++;\r\n        if(chart.subType === visualizationSubTypes.sparse){\r\n            count ++;\r\n            if(chart.data.variableValues.length > 10000) count +=3;\r\n        }\r\n    })\r\n    return count;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport * as JsSearch from 'js-search';\r\nimport { VariableSizeList as ReactWindowList } from \"react-window\";\r\n\r\nimport { ButtonGroup, Grid, IconButton, Icon, ListItem, MenuItem, Typography, Drawer, TextField, FormControl, InputLabel, Button, Tooltip} from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\nimport { Search, Cached, LibraryBooks, ArrowRight, ChevronLeft, ChevronRight, InsertChartOutlined, Language, Delete, CloudDownload, Info } from '@material-ui/icons';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\nimport validation from '../../Enums/validation';\r\nimport TableStatsDialog from './TableStatsDialog';\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nconst navDrawerWidth = 320;\r\n\r\nconst errorHeightAdjust = 23;\r\n\r\nconst styles = theme => ({\r\n    drawer: {\r\n        width: navDrawerWidth,\r\n        top: 32,\r\n        bottom: 'auto',\r\n        overflow: 'visible'\r\n    },\r\n\r\n    drawerPaper: {\r\n        width: navDrawerWidth,\r\n        height: '540px',\r\n        top: 'calc(50% - 270px)',\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    drawerPaperError1: {\r\n        height: `${540 + errorHeightAdjust}px`\r\n    },\r\n\r\n    drawerPaperError2: {\r\n        height: `${540 + errorHeightAdjust * 2}px`\r\n    },\r\n\r\n    drawerPaperError3: {\r\n        height: `${540 + errorHeightAdjust * 3}px`\r\n    },\r\n\r\n    drawerPaperError4: {\r\n        height: `${540 + errorHeightAdjust * 4}px`\r\n    },\r\n\r\n    drawerPaperError5: {\r\n        height: `${540 + errorHeightAdjust * 5}px`\r\n    },\r\n\r\n  openPanelChevron: {\r\n    position: 'fixed',\r\n    left: '5px',\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  closePanelChevron: {\r\n    position: 'fixed',\r\n    left: navDrawerWidth + 5,\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  groupedButtons: {\r\n      width: '50%',\r\n      border: '1px solid #313131',\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c'\r\n  },\r\n\r\n  controlPanelForm: {\r\n      marginTop: theme.spacing(1)\r\n  },\r\n\r\n  tableStatsButton: {\r\n      borderRadius: 0,\r\n      paddingTop: '11px',\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n    formGridItem: {\r\n        borderLeft: '1px solid #313131',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  vizTypeSelectFormControl: {\r\n      width: '100%',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    }\r\n  },\r\n\r\n  depressed: {\r\n      boxShadow: 'inset 1px 1px 5px #1c1c1c'\r\n  },\r\n\r\n  padLeft: {\r\n      padding: '6px 0 2px 7px'\r\n  },\r\n\r\n  visualizeButton: {\r\n      height: '56px',\r\n      borderRadius: 0,\r\n      backgroundColor: colors.backgroundGray,\r\n      color: theme.palette.primary.main,\r\n      fontVariant: 'normal',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    },\r\n      '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n            color: 'white'\r\n        }\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  vizButtonTooltip: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  datePickerInputAdornment: {\r\n      padding: 0\r\n  },\r\n\r\n  clearChartsButton: {\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c',\r\n      width: '100%',\r\n      borderRight: '1px solid #313131'\r\n\r\n  },\r\n\r\n  resetSPParamsButton: {\r\n    borderRadius: 0,\r\n    backgroundColor: '#3c3c3c',\r\n    width: '100%',\r\n  },\r\n\r\n  datePicker: {\r\n      width: '100%'\r\n  },\r\n\r\n  vizTypeMenu: {\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n  vizTypeMenuItem: {\r\n    '&:hover': {backgroundColor: colors.greenHover}\r\n  }\r\n});\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    storedProcedureRequestState: state.storedProcedureRequestState,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst getDatePlaceholder = (date) => {\r\n    if(isNaN(new Date(date)).valueOf()) return 'yyyy-MM-dd';\r\n    \r\n    let month  = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n    let year = date.getFullYear();\r\n    return [year, month < 10 ? '0' + month : month, day < 10 ? '0' + day : day].join('-');\r\n}\r\n\r\nconst groupHeaderHeight = 37;\r\nconst height = 35;\r\n\r\nconst reactWindowListRef = React.createRef();\r\nconst selectRef = React.createRef();\r\n\r\nclass MenuList extends Component {\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n      if(reactWindowListRef.current) reactWindowListRef.current.resetAfterIndex(0);\r\n      if(!(this.props.children && this.props.children.length)) return;\r\n      let scrollOffset = 0;\r\n      let foundFocus = false;\r\n      this.props.children.forEach(child => {\r\n        if(foundFocus) return;\r\n\r\n        let count = groupHeaderHeight;\r\n        let groupHasFocus= false;\r\n        for(let i = 0; i < child.props.children.length; i++){\r\n          if(child.props.children[i].props.isFocused) {\r\n            foundFocus = true;\r\n            groupHasFocus = true;\r\n            break;\r\n          }\r\n          count += 37.6;\r\n        }\r\n\r\n        if(groupHasFocus) scrollOffset += count;\r\n        else scrollOffset += 37.6;\r\n      })\r\n      if(foundFocus) reactWindowListRef.current.scrollTo(scrollOffset > 150 ? scrollOffset - 150 : 0);\r\n    }\r\n\r\n    render() {\r\n        const { options, children, getValue } = this.props;\r\n\r\n        if(!children || !children.length) return '';\r\n        const [value] = getValue();\r\n        const initialOffset = options.indexOf(value) * height;\r\n        const groupHeights = children.map(child => {\r\n          return child.props.children.some(grandChild => grandChild.props.isFocused) ? child.props.children.length * 37.6 + groupHeaderHeight : groupHeaderHeight;\r\n        });\r\n        const totalHeight = groupHeights.reduce((acc, cur) => acc + cur, 0);\r\n        const estimatedItemSize = totalHeight / children.length;\r\n        const getItemSize = index => groupHeights[index];\r\n\r\n        return (\r\n            <ReactWindowList\r\n                height={totalHeight < 400 ? totalHeight :  400}\r\n                estimatedItemSize={estimatedItemSize}\r\n                itemCount={children.length}\r\n                itemSize={getItemSize}\r\n                initialScrollOffset={initialOffset || 0}\r\n                ref={reactWindowListRef}\r\n            >\r\n                {({ index, style }) => <div style={{...style}}>{children[index]}</div>}\r\n            </ReactWindowList>\r\n        );\r\n    }\r\n}\r\n\r\nclass Group extends Component {\r\n    render() {\r\n        const hasFocus = this.props.children.some(element => element.props.isFocused);\r\n        const sensor = this.props.children[0].props.data.data.Sensor;\r\n\r\n      return (\r\n          <React.Fragment>\r\n            <CustomHeading \r\n              {...this.props.headingProps} \r\n              headingLabel={this.props.data.label} \r\n              firstChild={this.props.children[0].props.data}\r\n              hasFocus={hasFocus}\r\n              sensor={sensor}\r\n              tableName={this.props.children[0].props.data.data.Table_Name}\r\n              selectProps={this.props.selectProps}\r\n            />\r\n            <div hidden={!hasFocus}>\r\n              {this.props.children.map(child => child)}\r\n            </div>\r\n          </React.Fragment>\r\n        );\r\n    }    \r\n}\r\n\r\nconst customHeadingStyles = (theme) => ({\r\n    customHeading: {\r\n        backgroundColor: 'rgba(0,0,0,.5)',\r\n        height: groupHeaderHeight,\r\n        '&:hover': {\r\n            // backgroundColor: 'rgba(122,67,0,.5)',\r\n            backgroundColor: colors.greenHover\r\n        },\r\n        boxShadow: '0px 1px 1px 1px #242424'\r\n    },\r\n\r\n    icon: {\r\n        marginRight: '10px',\r\n        width: '30px'\r\n    },\r\n\r\n    typography: {\r\n        width: '650px',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    }\r\n})\r\n\r\nconst _CustomHeading = props => {\r\n    const { classes, sensor, selectProps } = props;\r\n    let iconClass;\r\n\r\n    if(sensor === 'Satellite') iconClass = 'fa-satellite';\r\n    else if(sensor === 'Blend') iconClass = 'fa-laptop';\r\n    else iconClass = 'fa-ship';\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ListItem \r\n          button \r\n          alignItems='center' \r\n          onClick={() => selectRef.current.select.setState({focusedOption: props.hasFocus ? null : props.firstChild})}\r\n          className={classes.customHeading}\r\n        >\r\n            <Icon fontSize='small' color='inherit' className={`fas ${iconClass} ${classes.icon}`}></Icon>\r\n        <Typography className={classes.typography}>\r\n            {props.headingLabel.length > 70 ? props.headingLabel.slice(0,67) + '...' : props.headingLabel}\r\n        </Typography>\r\n\r\n        <Tooltip title='Download Data' placement='right'>\r\n            <IconButton \r\n                color='inherit' \r\n                onClick={(e) => {\r\n                    selectProps.handleSetDownloadTarget({dataset: props.headingLabel})\r\n                    e.stopPropagation();\r\n                }}>\r\n                <CloudDownload/>\r\n            </IconButton>\r\n        </Tooltip>\r\n\r\n        { selectProps.datasets[props.headingLabel] &&\r\n            <Tooltip title='Dataset Info' placement='right'>\r\n                <IconButton \r\n                    color='inherit' \r\n                    onClick={(e) => {\r\n                        window.open(selectProps.datasets[props.headingLabel].Doc_URL);\r\n                        e.stopPropagation();\r\n                    }}\r\n                >\r\n                    <Info/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        }\r\n        </ListItem>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\nconst CustomHeading = withStyles(customHeadingStyles)(_CustomHeading);\r\n\r\n// Replace react-select dropdown area with material version\r\nconst DropdownIndicator = (props) => {\r\n    return (\r\n    <components.DropdownIndicator {...props}>\r\n        <ArrowRight/>\r\n    </components.DropdownIndicator>\r\n    );\r\n};\r\n\r\nconst Menu = (props) => {\r\n    return (\r\n        <components.Menu\r\n        {...props}\r\n        className='react-select-menu-cmap'\r\n        >\r\n\r\n        </components.Menu>\r\n    )\r\n}\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst GroupHeading = (props) => '';\r\n\r\nconst SingleValue = (props) => {\r\n    return (\r\n        <components.SingleValue\r\n            {...props}\r\n            children={null}\r\n        >\r\n            {props.data.label}\r\n        </components.SingleValue>\r\n    )\r\n}\r\n\r\nconst optionLabelSpanStyleLeft = {\r\n    display: 'inline-block',\r\n    boxSizing: 'border-box',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    fontSize: '15px',\r\n    marginRight: '32px',\r\n    width: 'calc(60% - 32px)',\r\n    textAlign: 'left'\r\n}\r\n\r\nconst optionLabelSpanStyleMid = {\r\n    ...optionLabelSpanStyleLeft,\r\n    marginRight: '24px',\r\n    width: 'calc(15% - 24px)'\r\n}\r\n\r\nconst optionLabelSpanStyleRight = {\r\n    ...optionLabelSpanStyleLeft,\r\n    textAlign: 'right',\r\n    marginRight: '0px',\r\n    width: '25%'\r\n}\r\n\r\nconst formatOptionLabel = (option, meta) => {\r\n    return (\r\n        <React.Fragment>\r\n            <span style={optionLabelSpanStyleLeft}>{option.label}</span>\r\n            <span style={optionLabelSpanStyleMid}>{option.data.Spatial_Resolution === 'Irregular' ? 'Irregular' : 'Gridded'}</span>\r\n            <span style={optionLabelSpanStyleRight}>{option.data.Data_Source}</span>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst ValueContainer = (props) => {\r\n    return (\r\n        <components.ValueContainer {...props}>\r\n            <Search color='primary' style={{ position: \"absolute\", left: 6 }}/>\r\n            {props.children}\r\n        </components.ValueContainer>\r\n    )\r\n}\r\n\r\nclass VizControlPanel extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Variable');\r\n        search.addIndex('Unit');\r\n        search.addIndex('Make');\r\n        search.addIndex('Sensor');\r\n        search.addIndex('Data_Source');\r\n        search.addIndex('Process_Level');\r\n        search.addIndex('Long_Name');\r\n        search.addIndex('Keywords');\r\n        search.addIndex('Table_Name');\r\n        search.addIndex('Dataset_Name');\r\n        search.addIndex('Study_Domain');\r\n        search.addIndex('Spatial_Resolution');\r\n        search.addIndex('Temporal_Resolution');\r\n\r\n        if(props.catalog) search.addDocuments(props.catalog);\r\n\r\n        this.state = {\r\n            tableStatsDialogIsOpen: false,\r\n            search,\r\n            searchField: '',\r\n            showControlPanel: true,\r\n            lastSelectedFieldId: null\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.catalog && prevProps.catalog.length) && (this.props.catalog && this.props.catalog.length)){\r\n            this.state.search.addDocuments(this.props.catalog);\r\n            this.setState({search: this.state.search});\r\n        }\r\n    }\r\n\r\n    handleOpenControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: true})\r\n    }\r\n\r\n    handleCloseControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: false})\r\n    }      \r\n    \r\n    handleTableStatsDialogClose = () => {\r\n        this.setState({...this.state, tableStatsDialogIsOpen: false})\r\n    }\r\n\r\n    handleTableStatsDialogOpen = (event) => {\r\n        event.stopPropagation();\r\n        this.setState({...this.state, tableStatsDialogIsOpen: true});\r\n    }\r\n\r\n    getSelectOptionsFromCatalogItems = (items) => {\r\n        var options = {};\r\n        let count = 0;\r\n\r\n        items.forEach(item => {\r\n            if(item.Visualize == 1) {\r\n                if(!options[item.Dataset_Name]){\r\n                    options[item.Dataset_Name] = {\r\n                        label: item.Dataset_Name,\r\n                        options: []\r\n                    }\r\n                }\r\n                // TODO use css textoverflow for this if possible\r\n                options[item.Dataset_Name].options.push({\r\n                    value: item.Variable,\r\n                    label: item.Long_Name.length < 80 ? item.Long_Name : item.Long_Name.slice(0,78) + '...',\r\n                    data: item\r\n                })\r\n            }\r\n        });\r\n\r\n        let sortedOptions = Object.values(options).sort((opt1, opt2) => {\r\n            return opt1.label < opt2.label ? -1 : 1;\r\n        })\r\n        return sortedOptions;\r\n    }\r\n\r\n    estimateCsvSize = (datasetName) => {\r\n        // let members = [];\r\n        let count = 0;\r\n        this.props.catalog.forEach((member, i) => {\r\n            if(member.Dataset_Name === datasetName){\r\n                count += parseInt(member.Variable_Count) || 0;\r\n                // members.push(member);\r\n            }\r\n        })\r\n        return count;\r\n    }\r\n\r\n    handleResetSPParams = () => {\r\n        this.props.resetSPParams();\r\n        this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') {\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n\r\n        if(action.action === 'escape-clear'){\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n        // if(action.action ==='set-value') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, fields, depth1, depth2, selectedVizType } = this.props;\r\n        if(!fields) return 0;\r\n        if(fields.data.Spatial_Resolution === spatialResolutions.irregular) return 0;\r\n        if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return 0;\r\n\r\n        const date1 = Date.parse(dt1);\r\n        const date2 = Date.parse(dt2);\r\n        \r\n        const dayDiff = (date2 - date1) / 86400000;\r\n        \r\n        const res = mapSpatialResolutionToNumber(fields.data.Spatial_Resolution);\r\n        \r\n        const dateCount = Math.floor(dayDiff / mapTemporalResolutionToNumber(fields.data.Temporal_Resolution)) || 1;\r\n        const depthCount = depthUtils.count(fields, depth1, depth2) || 1;\r\n        \r\n        const latCount = (lat2 - lat1) / res;\r\n        const lonCount = (lon2 - lon1) / res;\r\n\r\n        const pointCount = lonCount * latCount * depthCount * dateCount;\r\n        return pointCount;\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth1) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.fields.data.Depth_Max)) return validation.depth.depthOneOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Max).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth2) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth2) < parseFloat(this.props.fields.data.Depth_Min)) return validation.depth.depthTwoOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Min).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkStartDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt1)).valueOf() || !this.props.dt1) return 'Start date is invalid';\r\n    }\r\n\r\n    checkEndDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt2)).valueOf() || !this.props.dt1) return 'End date is invalid';\r\n    }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.dt1 > this.props.dt2) return validation.date.dateOneIsLater;\r\n        if(this.props.dt1 > this.props.fields.data.Time_Max) return validation.date.dateOneOutOfBounds.replace('$', this.props.fields.data.Time_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.dt2 < this.props.fields.data.Time_Min) return validation.date.dateTwoOutOfBounds.replace('$', this.props.fields.data.Time_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) < -90 || parseFloat(this.props.lat1) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.lat2)) return validation.lat.latOneIsHigher;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.fields.data.Lat_Max)) return validation.lat.latOneOutOfBounds.replace('$', this.props.fields.data.Lat_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < -90 || parseFloat(this.props.lat2) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < parseFloat(this.props.fields.data.Lat_Min)) return validation.lat.latTwoOutOfBounds.replace('$', this.props.fields.data.Lat_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon1) < -180 || parseFloat(this.props.lon1) > 180) return validation.generic.invalid;\r\n        if(this.props.lon1 > this.props.lon2) return '';\r\n        if(parseFloat(this.props.lon1) > parseFloat(this.props.fields.data.Lon_Max)) return validation.lon.lonOneOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < -180 || parseFloat(this.props.lon2) > 180) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < parseFloat(this.props.fields.data.Lon_Min)) return validation.lon.lonTwoOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', \"Section Map\");\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        if(this.props.dt1 === this.props.dt2) return validation.type.dateRangeRequired.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', 'Depth Profile');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.props.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.props.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count(this.props.fields, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n        if(this.props.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1200000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.fields) return validation.generic.variableMissing;\r\n        if(!this.props.selectedVizType) return validation.generic.vizTypeMissing;\r\n        return ''}\r\n\r\n    handleShowChartsAndResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);\r\n        this.props.handleShowCharts();     \r\n    }\r\n\r\n    handleUpdateFields = (newValue, action) => {\r\n        this.props.updateFields(newValue);\r\n        this.setState({...this.state, searchField: '', lastSelectedFieldId: newValue ? newValue.data.ID : this.state.lastSelectedFieldId});\r\n    }\r\n    \r\n    render() {      \r\n        const { search, searchField, showControlPanel } = this.state;\r\n        \r\n        const { classes, \r\n            fields, \r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType,\r\n            catalog,\r\n            catalogRequestState,\r\n            showCharts,\r\n            handleShowGlobe,\r\n            handleChange,\r\n            handleLatLonChange,\r\n            datasets,\r\n        } = this.props;\r\n\r\n\r\n        const options = searchField && catalog ? this.getSelectOptionsFromCatalogItems(search.search(searchField)) \r\n            : catalog ? this.getSelectOptionsFromCatalogItems(catalog) \r\n            : []\r\n\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n        var catalogMinDate = fields && utcDateStringToLocal(fields.data.Time_Min).setHours(0,0,0,0);\r\n        var catalogMaxDate = fields && utcDateStringToLocal(fields.data.Time_Max).setHours(0,0,0,0);\r\n        var zeroedDT1 = dt1.setHours(0,0,0,0);\r\n        var zeroedDT2 = dt2.setHours(0,0,0,0);\r\n        \r\n        var minDate = fields ? catalogMinDate : utcDateStringToLocal('1900-01-01').setHours(0,0,0,0);\r\n\r\n        let minDateMessage = fields && zeroedDT2 < catalogMinDate ? 'End cannot be before dataset start date' : '';\r\n        var maxDateMessage;\r\n        var maxDate;\r\n\r\n        if(!fields){\r\n            maxDate = zeroedDT2;\r\n            maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n        } else {\r\n            \r\n\r\n            if(catalogMaxDate < zeroedDT2){\r\n                maxDate = catalogMaxDate;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after dataset end date' : '';\r\n            } else {\r\n                maxDate = zeroedDT2;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n            }\r\n        }\r\n\r\n        if(fields) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDateValid(),\r\n                this.checkEndDateValid()\r\n            ];\r\n        } else validations = Array(16).fill('');\r\n\r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            minDateMessage,\r\n            maxDateMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ];\r\n\r\n        let cdvl = checkDisableVisualizeList;\r\n        let errorCount = 0;\r\n        \r\n        if(cdvl[0] || cdvl[1]) errorCount ++;\r\n        if(cdvl[2] || cdvl[3]) errorCount ++;\r\n        if(cdvl[4] || cdvl[5]) errorCount ++;\r\n        if(cdvl[7] || cdvl[9]) errorCount ++;\r\n        if(cdvl[8] || cdvl[10]) errorCount ++;\r\n\r\n        const errorSizeAdjust = errorCount > 0 ? 'drawerPaperError' + errorCount : '';\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <div>\r\n                <TableStatsDialog\r\n                    open={this.state.tableStatsDialogIsOpen}\r\n                    onClose={this.handleTableStatsDialogClose}\r\n                    data={fields && fields.data}\r\n                />\r\n\r\n                { showControlPanel ? \r\n\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleCloseControlPanel}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                :\r\n                    \r\n                        <IconButton \r\n                            className={classes.openPanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleOpenControlPanel}>\r\n                            <ChevronRight />\r\n                        </IconButton>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper} ${classes[errorSizeAdjust]}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n                    <ButtonGroup>\r\n                        <Tooltip title='Show Globe' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${!showCharts && classes.depressed}`} \r\n                                onClick={handleShowGlobe}\r\n                                color='inherit'\r\n                            >\r\n                                <Language/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        \r\n                        <Tooltip title='Show Charts' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${showCharts && classes.depressed}`}\r\n                                onClick={this.handleShowChartsAndResize}\r\n                                color='inherit'\r\n                            >\r\n                                <InsertChartOutlined/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </ButtonGroup>\r\n                    \r\n                    <Grid container>\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Clear Charts' placement='bottom'>\r\n                                <IconButton color='inherit' onClick={this.props.clearCharts} className={classes.clearChartsButton}>\r\n                                    <Delete/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Reset Parameters' placement='right'>\r\n                                <IconButton color='inherit' onClick={this.handleResetSPParams} className={classes.resetSPParamsButton}>\r\n                                    <Cached/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <form>\r\n                        <Grid container>\r\n                            <Grid item xs={10}>\r\n                                {/* <ConnectedTooltip placement='top' title='Enter one or more search terms.'> */}\r\n                                    <Select\r\n                                        formatOptionLabel={formatOptionLabel}\r\n                                        handleSetDownloadTarget={this.props.handleSetDownloadTarget}\r\n                                        handleTableStatsDialogOpen={this.handleTableStatsDialogOpen}\r\n                                        isLoading = {catalogRequestState === states.inProgress}\r\n                                        onAutoSuggestChange = {this.onAutoSuggestChange}\r\n                                        datasets = {datasets}\r\n                                        \r\n                                        components={{\r\n                                            IndicatorSeparator:'',\r\n                                            DropdownIndicator,\r\n                                            GroupHeading,\r\n                                            Group,\r\n                                            Option,\r\n                                            MenuList,\r\n                                            SingleValue,\r\n                                            Menu,\r\n                                            ValueContainer\r\n                                        }}\r\n                                        lastSelectedFieldId={this.state.lastSelectedFieldId}\r\n                                        escapeClearsValue\r\n                                        ref={selectRef}\r\n                                        onInputChange={this.onAutoSuggestChange}\r\n                                        filterOption={null}\r\n                                        // menuIsOpen={true}\r\n                                        className={classes.variableSelect}\r\n                                        isClearable\r\n                                        inputValue={this.state.searchField}\r\n                                        name=\"fields\"\r\n                                        label=\"Variables\"\r\n                                        options={options}\r\n                                        onChange={this.handleUpdateFields}\r\n                                        value={fields}\r\n                                        placeholder=\"Search Catalog\"\r\n                                        styles={{\r\n                                            menu: provided => ({\r\n                                                ...provided, \r\n                                                zIndex: 1300, \r\n                                                width: '980px',\r\n                                                maxWidth: '90vw',\r\n                                                borderRadius: '4px',\r\n                                                boxShadow: '2px 2px 2px 2px #242424',\r\n                                                overflow: 'hidden',\r\n                                                backgroundColor: 'rgba(0,0,0,.5)',\r\n                                                backdropFilter: 'blur(5px)',\r\n                                            }),\r\n\r\n                                            valueContainer: provided => ({\r\n                                                ...provided,\r\n                                                padding: '0 0 0 34px',\r\n                                                fontWeight: 100\r\n                                            }),\r\n\r\n                                            input: provided => ({...provided,\r\n                                                color: 'white',\r\n                                                fontFamily: '\"Lato\", sans-serif'\r\n                                            }),\r\n\r\n                                            control: provided => ({...provided,\r\n                                                backgroundColor: colors.backgroundGray,\r\n                                                border: 'none',\r\n                                                borderBottom: '1px solid #333333',\r\n                                                borderRadius: 0,\r\n                                                '&:hover': { borderColor: 'white' },\r\n                                                '&:focus-within': { borderColor: colors.primary },\r\n                                                height: '56px'\r\n                                            }),\r\n\r\n                                            placeholder: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                fontSize: '14px',\r\n                                                fontWeight: 300\r\n                                            }),\r\n\r\n                                            noOptionsMessage: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                backgroundColor: colors.backgroundGray\r\n                                            }),\r\n\r\n                                            option: (provided, { data, isFocused }) => {\r\n                                                return ({...provided,\r\n                                                    fontWeight: 400,\r\n                                                    fontSize: '16px',\r\n                                                    backgroundColor: 'transparent',\r\n                                                    color: isFocused ? colors.primary : 'white',\r\n                                                    '&:hover': { backgroundColor: colors.greenHover},\r\n                                            })},\r\n\r\n                                            singleValue: (provided, state) => ({...provided,\r\n                                                color: 'white',\r\n                                                fontWeight: 400,\r\n                                                zIndex: 1290\r\n                                            })\r\n                                        }}\r\n                                        theme={theme => ({\r\n                                            ...theme,\r\n                                            colors: {\r\n                                            ...theme.colors,\r\n                                            },\r\n                                        })}\r\n                                    />\r\n                                {/* </ConnectedTooltip> */}\r\n                            </Grid>\r\n                            <Grid item xs={2} className={classes.tableStatsButton}>\r\n                                {\r\n                                    fields ? \r\n                                    <Tooltip placement='right' title='View Variable Summary Statistics'>\r\n                                        <IconButton \r\n                                            size='small' \r\n                                            onClick={this.handleTableStatsDialogOpen}                                     \r\n                                            disabled={!fields}\r\n                                        >\r\n                                            <LibraryBooks/>\r\n                                        </IconButton>\r\n                                    </Tooltip> :\r\n                                    <IconButton \r\n                                        size='small' \r\n                                        onClick={this.handleTableStatsDialogOpen}                                     \r\n                                        disabled={!fields}\r\n                                    >\r\n                                        <LibraryBooks/>\r\n                                    </IconButton>\r\n                                }\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12}>\r\n                                <KeyboardDatePicker\r\n                                    className={classes.datePicker}\r\n                                    placeholder={getDatePlaceholder(dt1)}\r\n                                    id=\"startDate\"\r\n                                    label=\"Start Date\"\r\n                                    name=\"dt1\"\r\n                                    format='yyyy-MM-dd'\r\n                                    maxDate={maxDate}\r\n                                    // minDate={null}\r\n                                    maxDateMessage={maxDateMessage}\r\n                                    autoOk\r\n                                    value={dt1}\r\n                                    onChange={this.props.handleStartDateChange}\r\n                                    inputVariant='filled'\r\n                                    variant='inline'\r\n                                    KeyboardButtonProps={{\r\n                                        className: classes.datePickerInputAdornment\r\n                                    }}\r\n                                />\r\n                            </Grid>  \r\n\r\n                            <Grid item xs={12}>\r\n                                <KeyboardDatePicker\r\n                                    className={classes.datePicker}\r\n                                    placeholder={getDatePlaceholder(dt2)}\r\n                                    id=\"endDate\"\r\n                                    label=\"End Date\"\r\n                                    name=\"dt2\"\r\n                                    format='yyyy-MM-dd'\r\n                                    minDate={minDate}\r\n                                    // maxDate={null}\r\n                                    minDateMessage={minDateMessage}\r\n                                    autoOk\r\n                                    value={dt2}\r\n                                    onChange={this.props.handleEndDateChange}\r\n                                    inputVariant='filled'\r\n                                    variant='inline'\r\n                                    KeyboardButtonProps={{\r\n                                        className: classes.datePickerInputAdornment\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lat1-input\"\r\n                                    error={Boolean(startLatMessage)}\r\n                                    label={\"Start Lat(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lat1}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startLatMessage}\r\n                                    name='lat1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lat2-input\"\r\n                                    error={Boolean(endLatMessage)}\r\n                                    label={\"End Lat(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lat2}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endLatMessage}\r\n                                    name='lat2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lon1-input\"\r\n                                    error={Boolean(startLonMessage)}\r\n                                    label={\"Start Lon(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lon1}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startLonMessage}\r\n                                    name='lon1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lon2-input\"\r\n                                    error={Boolean(endLonMessage)}\r\n                                    label={\"End Lon(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lon2}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endLonMessage}\r\n                                    name='lon2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"depth1-input\"\r\n                                    error={Boolean(startDepthMessage)}\r\n                                    label=\"Start Depth(m)\"\r\n                                    className={classes.textField}\r\n                                    value={isNaN(Math.floor(depth1 * 1000) / 1000) ? depth1 : Math.ceil(depth1 * 1000) / 1000}\r\n                                    onChange={handleChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startDepthMessage}\r\n                                    name='depth1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"depth2-input\"\r\n                                    error={Boolean(endDepthMessage)}\r\n                                    label=\"End Depth(m)\"\r\n                                    className={classes.textField}\r\n                                    value={isNaN(Math.ceil(depth2 * 1000) / 1000) ? depth2 : Math.ceil(depth2 * 1000) / 1000}\r\n                                    onChange={handleChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endDepthMessage}\r\n                                    name='depth2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12}>\r\n                                <FormControl variant='filled' className={classes.vizTypeSelectFormControl} disabled={!fields}>\r\n                                    <InputLabel shrink htmlFor=\"vizSelector\" >Type</InputLabel>\r\n                                    <MUISelect\r\n                                        className={classes.vizTypeSelectFormControl}\r\n                                        style={overrideDisabledStyle}\r\n                                        value={selectedVizType}\r\n                                        variant='filled'\r\n                                        onChange={this.props.handleChange}\r\n                                        inputProps={{\r\n                                            name: 'selectedVizType',\r\n                                            id: 'vizSelector',\r\n                                            variant: 'filled'\r\n                                        }}\r\n                                        MenuProps={{\r\n                                            MenuListProps: {\r\n                                                className: classes.vizTypeMenu\r\n                                            }\r\n                                        }}\r\n                                        >\r\n                                        {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                        {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                        {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                        {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                        {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                        {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Sparse Map</MenuItem>}\r\n                                    </MUISelect>\r\n                                </FormControl>\r\n                            </Grid>\r\n\r\n                            <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                                <Grid item xs={12}>\r\n                                    <Button\r\n                                        className={classes.visualizeButton}\r\n                                        variant='contained'\r\n                                        onClick={() => this.props.onVisualize()}\r\n                                        disabled={Boolean(disableVisualizeMessage) || !fields || !selectedVizType}\r\n                                        fullWidth\r\n                                    >\r\n                                        Visualize\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                    </form>                    \r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VizControlPanel));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, Typography, Table, TableBody, TableCell, TableRow, TableHead } from '@material-ui/core';\r\n\r\nimport { tableStatsRequestSend, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nconst styles = (theme) => ({\r\n    tableFooter: {\r\n        fontSize: '11px',\r\n        margin: '5px 0px 0px 10px'\r\n    },\r\n\r\n    table: {\r\n        marginTop: '9px'\r\n    },\r\n\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    datasets: state.datasets,\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    tableStatsRequestSend,\r\n    csvDownloadRequestSend\r\n}\r\n\r\nclass DownloadConfirmationDialog extends Component {\r\n\r\n    componentDidUpdate = () => {\r\n        const { downloadTarget, datasets, catalog, tableStatsRequestSend } = this.props;\r\n        if(downloadTarget && datasets && !datasets[downloadTarget.dataset].tableStats){\r\n            const firstMember = catalog.find(item => item.Dataset_Name === downloadTarget.dataset);\r\n            tableStatsRequestSend(firstMember.Table_Name, downloadTarget.dataset);\r\n        }\r\n    }\r\n\r\n    handleFullDatasetDownload = (tableName) => {\r\n        let query = `select%20*%20from%20${tableName}`;\r\n        const fileName = this.props.downloadTarget.variable || this.props.downloadTarget.dataset;\r\n        this.props.csvDownloadRequestSend(query, fileName, tableName);\r\n    }\r\n\r\n    handleSubsetDownload = (tableName, dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2) => {\r\n        const sampleMember = this.props.catalog.find(item => item.Dataset_Name === this.props.downloadTarget.dataset);\r\n        let isMonthyClimatology = Boolean(sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology);\r\n\r\n        const timeUnit = isMonthyClimatology ? 'month' : 'time';\r\n        const timeStart = isMonthyClimatology ? new Date(dt1).getMonth() + 1 : dt1;\r\n        const timeEnd = isMonthyClimatology ? new Date(dt2).getMonth() + 1 : dt2;\r\n\r\n        let query = `select * from ${tableName} where ${timeUnit} between '${timeStart}' and '${timeEnd}' and ` +\r\n            `lat between ${lat1} and ${lat2} and ` +\r\n            `lon between ${lon1} and ${lon2}`;\r\n\r\n        if(Boolean(sampleMember.Depth_Max)){\r\n            query += `and depth between ${depth1} and ${depth2}`\r\n        }\r\n\r\n        const fileName = this.props.downloadTarget.variable || this.props.downloadTarget.dataset;\r\n        this.props.csvDownloadRequestSend(query, fileName, tableName);\r\n    }\r\n\r\n    render() {\r\n        const { classes, datasets, downloadTarget, lat1, lat2, lon1, lon2, dt1, dt2, depth1, depth2, catalog } = this.props;\r\n\r\n        if(!downloadTarget || ! datasets ||  !catalog) return '';\r\n        \r\n        const tableStats = datasets[downloadTarget.dataset].tableStats;\r\n\r\n        if(!tableStats) return '';\r\n\r\n        const sampleMember = catalog.find(item => item.Dataset_Name === downloadTarget.dataset);\r\n        const { Lat_Min, Lat_Max, Lon_Min, Lon_Max, Time_Min, Time_Max, Depth_Min, Depth_Max, Table_Name } = sampleMember;\r\n        const latMin = parseFloat(Lat_Min);\r\n        const latMax = parseFloat(Lat_Max);\r\n        const lonMin = parseFloat(Lon_Min);\r\n        const lonMax = parseFloat(Lon_Max);\r\n        const timeMin = Date.parse(Time_Min);\r\n        const timeMax = Date.parse(Time_Max);\r\n\r\n        const subsetLat1 = lat1 < latMin ? latMin :\r\n            lat1 > latMax ? latMax :\r\n            lat1;\r\n\r\n        const subsetLat2 = lat2 < latMin ? latMin :\r\n        lat2 > latMax ? latMax :\r\n        lat2;\r\n\r\n        const subsetLon1 = lon1 < lonMin ? lonMin :\r\n            lon1 > lonMax ? lonMax :\r\n            lon1;\r\n\r\n        const subsetLon2 = lon2 < lonMin ? lonMin :\r\n            lon2 > lonMax ? lonMax :\r\n            lon2;\r\n\r\n        const subsetTime1 = dt1 < timeMin ? timeMin :\r\n            dt1 > timeMax ? timeMax :\r\n            dt1;\r\n\r\n        const subsetTime2 = dt2 < timeMin ? timeMin :\r\n            dt2 > timeMax ? timeMax:\r\n            dt2;\r\n\r\n        if(Depth_Max){\r\n            var depthMin = parseFloat(Depth_Min);\r\n            var depthMax = parseFloat(Depth_Max);\r\n\r\n            var subsetDepth1 = depth1 < depthMin ? depthMin : \r\n                depth1 > depthMax ? depthMax : \r\n                depth1;\r\n\r\n            var subsetDepth2 = depth2 < depthMin ? depthMin : \r\n                depth2 > depthMax ? depthMax : \r\n                depth2;\r\n        }        \r\n\r\n        const tableName = sampleMember.Table_Name;\r\n        \r\n        const totalRows = tableStats.lat.count;\r\n        const variableColumns = datasets[downloadTarget.dataset].Variables && datasets[downloadTarget.dataset].Variables.split(',').length;\r\n        const depthColumns = tableStats.depth ? 1 : 0;\r\n        const fixedColumns = 3;\r\n\r\n        const totalColumns = variableColumns + depthColumns + fixedColumns;\r\n\r\n        const totalDataPoints = totalRows * totalColumns;\r\n        const fullDataAvailable = totalDataPoints < 20000000;\r\n\r\n        var dateRatio;\r\n\r\n        if(sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology){\r\n            const subsetMonths = new Date(subsetTime2).getMonth() - new Date(subsetTime1).getMonth();\r\n            dateRatio = (subsetMonths + 1) / 12;\r\n        } else {\r\n            var totalDays = (timeMax - timeMin) / 86400000 || 1;\r\n            var subsetDays = (subsetTime2 - subsetTime1) / 86400000 || 1;\r\n            dateRatio = totalDays > subsetDays ? subsetDays / totalDays : 1;\r\n        }\r\n\r\n        const totalLatSize = (latMax - latMin) || 1;\r\n        const subsetLatSize = (subsetLat2 - subsetLat1) || 1;\r\n        const latRatio = totalLatSize > subsetLatSize ? subsetLatSize / totalLatSize : 1;\r\n\r\n        const totalLonSize = (lonMax - lonMin) || 1;\r\n        const subsetLonSize = subsetLon2 > subsetLon1 ? (subsetLon2 - subsetLon1) || 1 : (subsetLon2 + 360 - subsetLon1) || 1;\r\n        const lonRatio = totalLonSize > subsetLonSize ? subsetLonSize / totalLonSize : 1;\r\n\r\n        var depthRatio = 1;\r\n\r\n        if(sampleMember.Depth_Max) {\r\n            if(depthUtils.piscesTable.has(sampleMember.Table_Name)){\r\n                let depthCount = depthUtils.count({data: sampleMember}, subsetDepth1, subsetDepth2);\r\n                depthRatio = depthCount / depthUtils.piscesDepths.length || 1;\r\n            } else if (depthUtils.darwinTable.has(sampleMember.Table_Name)){\r\n                let depthCount = depthUtils.count({data: sampleMember}, subsetDepth1, subsetDepth2);\r\n                depthRatio = depthCount / depthUtils.darwinDepths.length || 1;\r\n            } else {\r\n                var totalDepthSize = depthMax - depthMin || 1;\r\n                var subsetDepthSize = subsetDepth2 - subsetDepth1 || 1;\r\n                depthRatio = subsetDepthSize > totalDepthSize ? 1 : subsetDepthSize / totalDepthSize;\r\n            }\r\n        }\r\n\r\n        const subsetDataPoints = Math.floor(totalDataPoints * dateRatio * latRatio * lonRatio * depthRatio);\r\n\r\n        const subsetAvailable = subsetDataPoints <= 20000000;\r\n\r\n        const timeString1 = new Date(subsetTime1).toISOString().slice(0,10);\r\n        const timeString2 = new Date(subsetTime2).toISOString().slice(0,10);\r\n        const timeStringMin = sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n            'Monthly' : new Date(timeMin).toISOString().slice(0,10);\r\n        const timeStringMax = sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n            'Monthly' : new Date(timeMax).toISOString().slice(0,10);\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <Dialog\r\n                    PaperProps={{\r\n                        className:classes.dialogPaper\r\n                    }}\r\n                    open={Boolean(downloadTarget)} \r\n                    onClose={() => this.props.handleSetDownloadTarget(null)} \r\n                    maxWidth={false}\r\n                >\r\n                    <DialogTitle>Downloading {downloadTarget.variable && `${downloadTarget.variable} from `} {downloadTarget.dataset}</DialogTitle>\r\n                    \r\n                    <DialogContent>\r\n                        {fullDataAvailable ? \r\n                            `The full dataset is available for download.` :\r\n                            `The full dataset is too large for download.`\r\n                        }\r\n                    </DialogContent>\r\n                    \r\n                    <DialogContent>\r\n                        <Typography>\r\n                            {subsetAvailable ? \r\n                                'The described subset is available for download' :\r\n                                `The described subset contains approximately ${subsetDataPoints} data points. Maximum download size is 20000000. Please reduce subset size.`\r\n                            }\r\n                        </Typography>\r\n\r\n                        <Table size='small'>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Parameter</TableCell>\r\n                                    <TableCell>Subset Start</TableCell>\r\n                                    <TableCell>Subset End</TableCell>\r\n                                    <TableCell>Dataset Min</TableCell>\r\n                                    <TableCell>Dataset Max</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                <TableRow>\r\n                                    <TableCell>Time</TableCell>\r\n                                    <TableCell>{timeString1}</TableCell>\r\n                                    <TableCell>{timeString2}</TableCell>\r\n                                    <TableCell>{timeStringMin}</TableCell>\r\n                                    <TableCell>{timeStringMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Latitude[{'\\xb0'}]</TableCell>\r\n                                    <TableCell>{subsetLat1}</TableCell>\r\n                                    <TableCell>{subsetLat2}</TableCell>\r\n                                    <TableCell>{latMin}</TableCell>\r\n                                    <TableCell>{latMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Longitude[{'\\xb0'}]</TableCell>\r\n                                    <TableCell>{subsetLon1}</TableCell>\r\n                                    <TableCell>{subsetLon2}</TableCell>\r\n                                    <TableCell>{lonMin}</TableCell>\r\n                                    <TableCell>{lonMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Depth[m]</TableCell>\r\n                                    <TableCell>{isNaN(subsetDepth1) ? 'NA' : subsetDepth1}</TableCell>\r\n                                    <TableCell>{isNaN(subsetDepth2) ? 'NA' : subsetDepth2}</TableCell>\r\n                                    <TableCell>{isNaN(depthMin) ? 'NA' : depthMin}</TableCell>\r\n                                    <TableCell>{isNaN(depthMax) ? 'NA' : depthMax}</TableCell>\r\n                                </TableRow>\r\n                            </TableBody>\r\n                                \r\n                        </Table>\r\n\r\n                        <Typography className={classes.tableFooter}>\r\n                            *Subset start and end values may automatically adjust to fit dataset boundaries.\r\n                        </Typography>\r\n\r\n                    </DialogContent>\r\n\r\n                    <DialogActions>\r\n                        <Button onClick={() => this.props.handleSetDownloadTarget(null)}>\r\n                            Cancel\r\n                        </Button>\r\n\r\n                        {subsetAvailable &&\r\n                            <Button onClick={() => this.handleSubsetDownload(tableName, timeString1, timeString2, subsetLat1, subsetLat2, subsetLon1, subsetLon2, subsetDepth1, subsetDepth2)}>\r\n                                Download Subset\r\n                            </Button>                            \r\n                        }\r\n\r\n                        {fullDataAvailable && \r\n                            <Button onClick={() => this.handleFullDatasetDownload(tableName)}>\r\n                                Download Full Dataset\r\n                            </Button>\r\n                        }\r\n                    </DialogActions>\r\n                </Dialog> \r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DownloadConfirmationDialog));","export default [\r\n    null,\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n]","import months from '../Enums/months';\r\n\r\nexport default (dateString, hasHour, isMonthly) => {\r\n    return isMonthly ? months[parseInt(dateString)] : hasHour ? dateString.slice(0,10) + ' ' + dateString.slice(11,16): dateString.slice(0,10);\r\n}","import colors from '../Enums/colors';\r\n\r\nexport default {\r\n    layout: {\r\n        font: {color: '#ffffff'},\r\n        paper_bgcolor: colors.backgroundGray,\r\n        autosize: true\r\n    },\r\n\r\n    config: {\r\n        displaylogo: false\r\n    },\r\n\r\n    annotations: (distributor, height = 40) => {\r\n        let yshift = ((document.documentElement.clientWidth * (height / 100)) / -2) + 20;\r\n        return (\r\n            [\r\n                {\r\n                    text: `Data Source: ${distributor.length < 35 ? \r\n                        distributor : \r\n                        distributor.slice(0,32) + '...'} -- Provided by Simons CMAP`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                    xref: 'paper',\r\n                    yref: 'paper',\r\n                    // yshift: height ? 0 - height + 160 : -290,\r\n                    yshift,\r\n                    showarrow: false,\r\n                }\r\n            ]\r\n        )   \r\n    }\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Button from '@material-ui/core/Button';\r\nimport { DateRange, CloudDownload, Palette, SwapVert, Gamepad, LineWeight, ShowChart, Tune } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { ButtonGroup } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    popover: {\r\n        width: '470px',\r\n        height: '120px',\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2.5),\r\n        paddingRight: theme.spacing(2.5)\r\n    },\r\n\r\n    iconButton: {\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n    },\r\n\r\n    colorForm: {\r\n        width: '100%'\r\n    },\r\n\r\n    lastIcon: {\r\n        borderTopRightRadius: '10%',\r\n        borderBottomRightRadius: '10%'\r\n    },\r\n\r\n    buttonGroup: {\r\n        display: 'block',\r\n        margin: '0px auto 8px auto',\r\n        maxWidth: '700px'\r\n    },\r\n\r\n    depressed: {\r\n        boxShadow: 'inset 1px 1px 5px #262626'\r\n    },\r\n\r\n    colorscaleMenu: {\r\n        maxHeight: '400px'\r\n    },\r\n\r\n    grayBackground: {\r\n        backgroundColor: colors.backgroundGray\r\n    }\r\n})\r\n\r\nconst colorscaleOptions = [\r\n    'Default',\r\n    'Greys', \r\n    'YlGnBu', \r\n    'Greens', \r\n    'YlOrRd',\r\n    'Bluered',\r\n    'RdBu',\r\n    'Reds',\r\n    'Blues',\r\n    'Picnic',\r\n    'Rainbow',\r\n    'Portland',\r\n    'Jet',\r\n    'Hot',\r\n    'Blackbody',\r\n    'Earth',\r\n    'Electric',\r\n    'Viridis',\r\n    'Cividis'];\r\n\r\nfunction usePreviousSize(value) {\r\n    let size = value ? value.size : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = size;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousColor(value) {\r\n    let color = value ? value.color : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = color;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousOpacity(value) {\r\n    let opacity = value ? value.opacity : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = opacity;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nconst ChartControlPanel = (props) => {\r\n\r\n    const { \r\n        classes, \r\n        onToggleSplitByDate,\r\n        splitByDate,\r\n        onToggleSplitBySpace,\r\n        splitBySpace,\r\n        orientation, \r\n        downloadCsv, \r\n        handleZValueConfirm,\r\n        zValues,\r\n        markerOptions,\r\n        handleMarkerOptionsConfirm,\r\n        showErrorBars,\r\n        handleSetShowErrorBars,\r\n        showLines,\r\n        handleSetShowLines\r\n    } = props;\r\n\r\n    const [paletteAnchorElement, setPaletteAnchorElement] = useState(null);\r\n\r\n    let handleOpenPalette = (event) => {\r\n        setPaletteAnchorElement(event.currentTarget);\r\n    }\r\n\r\n    // Local version, not from props\r\n    let handlePaletteChoice = (option) => {\r\n        setPaletteAnchorElement(null);\r\n        props.handlePaletteChoice(option);\r\n    }\r\n\r\n    const [zScalePopoverAnchorElement, setZScalePopoverAnchorElement] = React.useState(null);\r\n    const [localZMin, setLocalZMin] = React.useState(zValues && zValues[0]);\r\n    const [localZMax, setLocalZMax] = React.useState(zValues && zValues[1]);\r\n\r\n    const zScalePopoverOpen = Boolean(zScalePopoverAnchorElement);\r\n    const zScalePopoverID = zScalePopoverOpen ? 'zscale-popover' : undefined;\r\n\r\n    const handleZScalePopoverClose = () => {\r\n        setZScalePopoverAnchorElement(null);\r\n    };\r\n    \r\n    const checkLocalZMin = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMin)) return 'Invalid value';\r\n    }\r\n\r\n    const checkLocalZMax = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMax)) return 'Invalid value';\r\n    }\r\n\r\n    const zScaleValidations = [\r\n        checkLocalZMin(),\r\n        checkLocalZMax()\r\n    ];\r\n\r\n    const [\r\n        zMinMessage,\r\n        zMaxMessage\r\n    ] = zScaleValidations;\r\n\r\n    const handleLocalZConfirm = () => {\r\n        handleZValueConfirm([localZMin, localZMax]);\r\n        handleZScalePopoverClose();\r\n    }\r\n\r\n    const [markerOptionsAnchorElement, setMarkerOptionsAnchorElement] = React.useState(null);\r\n    const [localMarkerOpacity, setLocalMarkerOpacity] = React.useState(markerOptions && markerOptions.opacity);\r\n    const [localMarkerColor, setLocalMarkerColor] = React.useState(markerOptions && markerOptions.color);\r\n    const [localMarkerSize, setLocalMarkerSize] = React.useState(markerOptions && markerOptions.size);\r\n\r\n    var previousOpacity = usePreviousOpacity(markerOptions);\r\n    var previousColor = usePreviousColor(markerOptions);\r\n    var previousSize = usePreviousSize(markerOptions);\r\n\r\n    useEffect(() => {\r\n        if(markerOptions){\r\n            if(markerOptions.opacity !== previousOpacity){\r\n                setLocalMarkerOpacity(markerOptions.opacity);\r\n            }\r\n    \r\n            if(markerOptions.color !== previousColor){\r\n                setLocalMarkerColor(markerOptions.color);\r\n            }\r\n    \r\n            if(markerOptions.size !== previousSize){\r\n                setLocalMarkerSize(markerOptions.size);\r\n            }\r\n        }\r\n    })\r\n\r\n    const markerPopoverOpen = Boolean(markerOptionsAnchorElement);\r\n    const markerPopoverID = markerPopoverOpen ? 'marker-popover' : undefined;\r\n\r\n    const handleMarkerOptionsClose = () => {\r\n        setMarkerOptionsAnchorElement(null);\r\n    }\r\n\r\n    const checkLocalMarkerOpacity = () => {\r\n        if(localMarkerOpacity < 0.1 || localMarkerOpacity > 1 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerOpacity)){\r\n            return 'Opacity should be 0.1 to 1'\r\n        }\r\n    }\r\n\r\n    const checkLocalMarkerSize = () => {\r\n        if(localMarkerSize < 1 || localMarkerSize > 18 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerSize)){\r\n            return 'Size should be 1 to 18'\r\n        }\r\n    }\r\n\r\n    const markerOptionsValidations = [\r\n        checkLocalMarkerOpacity(),\r\n        checkLocalMarkerSize()\r\n    ]\r\n\r\n    const [\r\n        localMarkerOpacityMessage,\r\n        localMarkerSizeMessage\r\n    ] = markerOptionsValidations;\r\n\r\n    const handleLocalMarkerOptionsConfirm = () => {\r\n        handleMarkerOptionsConfirm({opacity: localMarkerOpacity, color: localMarkerColor, size: localMarkerSize});\r\n        handleMarkerOptionsClose();\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ButtonGroup className={classes.buttonGroup}>\r\n\r\n                {Boolean(onToggleSplitByDate) && \r\n                    <Tooltip placement='top' title='Split By Date'>\r\n                        <IconButton color='inherit' className={`${classes.iconButton} ${splitByDate && classes.depressed}`} \r\n                            onClick={onToggleSplitByDate}\r\n                        >\r\n                            <DateRange/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(onToggleSplitBySpace) && \r\n                    <Tooltip placement='top' title={orientation === 'zonal' ? 'Split by Latitude' : 'Split by Longitude'}>\r\n                        <IconButton color='inherit' className={`${classes.iconButton} ${splitBySpace && classes.depressed}`} \r\n                            onClick={onToggleSplitBySpace}\r\n                        >\r\n                            <LineWeight/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                <Tooltip placement='top' title='Download CSV'>\r\n                    <IconButton color='inherit' onClick={downloadCsv} className={classes.iconButton} >\r\n                        <CloudDownload/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n\r\n                {Boolean(handleZValueConfirm) &&\r\n                    <Tooltip title='Change Colorscale Range' placement='top'>\r\n                        <IconButton color='inherit' onClick={(event) => setZScalePopoverAnchorElement(event.currentTarget)} className={classes.iconButton}>\r\n                            <SwapVert/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(handleSetShowLines) &&\r\n                    <Tooltip title={showLines ? 'Hide Plot Line' : 'Show Plot Line'} placement='top'>\r\n                        <IconButton color='inherit' onClick={() => handleSetShowLines(!showLines)} className={`${classes.iconButton} ${showLines && classes.depressed}`}>\r\n                            <ShowChart/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(handleSetShowErrorBars) &&\r\n                    <Tooltip title={showErrorBars ? 'Hide Error Bars' : 'Show Error Bars'} placement='top'>\r\n                        <IconButton color='inherit' onClick={() => handleSetShowErrorBars(!showErrorBars)} className={`${classes.iconButton} ${showErrorBars && classes.depressed}`}>\r\n                            <Tune/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(props.handlePaletteChoice) &&\r\n                    <Tooltip title='Change Palette' placement='top'>\r\n                        <IconButton disabled={!Boolean(props.handlePaletteChoice)} color='inherit' onClick={handleOpenPalette} className={classes.iconButton}>\r\n                            <Palette/>\r\n                        </IconButton>                \r\n                    </Tooltip>      \r\n                }\r\n\r\n                {Boolean(props.handleMarkerOptionsConfirm) &&\r\n                    <Tooltip title='Marker Options' placement='top'>\r\n                        <IconButton color='inherit' onClick={(event) => setMarkerOptionsAnchorElement(event.currentTarget)} className={`${classes.iconButton} ${classes.lastIcon}`} >\r\n                            <Gamepad/>\r\n                        </IconButton>                \r\n                    </Tooltip>\r\n                }\r\n                \r\n            </ButtonGroup>\r\n            \r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={paletteAnchorElement}\r\n                keepMounted\r\n                open={Boolean(paletteAnchorElement)}\r\n                onClose={() => setPaletteAnchorElement(null)}\r\n                className={classes.colorscaleMenu}\r\n                MenuListProps= {{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                {colorscaleOptions.map((option, index) => (\r\n                    <MenuItem onClick={() => handlePaletteChoice(option === 'Default' ? 'heatmap' : option)} key={index}>{option}</MenuItem>\r\n                ))}\r\n                \r\n            </Menu>\r\n            \r\n            {/* zscale popover */}\r\n            <Popover\r\n                id={zScalePopoverID}\r\n                open={zScalePopoverOpen}\r\n                anchorEl={zScalePopoverAnchorElement}\r\n                onClose={handleZScalePopoverClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMinMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-min-input' >Min</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-min-input'\r\n                                    value={localZMin}\r\n                                    onChange={(event) => setLocalZMin(event.target.value)}\r\n                                    aria-describedby='local-zmin-error'\r\n                                    labelWidth={36}\r\n                                    name='local-zmin'\r\n                                />\r\n                                <FormHelperText id='local-zmin-error'>{zMinMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-max-input' >Max</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-max-input'\r\n                                    value={localZMax}\r\n                                    onChange={(event) => setLocalZMax(event.target.value)}\r\n                                    aria-describedby=\"local-zmax-error\"\r\n                                    labelWidth={36}\r\n                                    name='local-zmax'\r\n                                />\r\n                                <FormHelperText id=\"local-zmax-error\">{zMaxMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={7}>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleZScalePopoverClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalZConfirm}\r\n                                disabled={Boolean(zMinMessage || zMaxMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n                \r\n            {/* Marker popover */}\r\n            <Popover\r\n                id={markerPopoverID}\r\n                open={markerPopoverOpen}\r\n                anchorEl={markerOptionsAnchorElement}\r\n                onClose={handleMarkerOptionsClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(localMarkerOpacityMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-opacity' >Opacity</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='local-marker-opacity'\r\n                                    value={localMarkerOpacity}\r\n                                    onChange={(event) => setLocalMarkerOpacity(event.target.value)}\r\n                                    aria-describedby='local-marker-opacity'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-opacity'\r\n                                />\r\n                            <FormHelperText id=\"local-marker-opacity-error\">{localMarkerOpacityMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                // error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-size' >Size</InputLabel>\r\n                                <OutlinedInput\r\n                                    error={Boolean(localMarkerSizeMessage)}\r\n                                    id='local-marker-size'\r\n                                    value={localMarkerSize}\r\n                                    onChange={(event) => setLocalMarkerSize(event.target.value)}\r\n                                    aria-describedby=\"local-marker-size\"\r\n                                    labelWidth={36}\r\n                                    name='local-marker-size'\r\n                                />\r\n                                <FormHelperText id=\"local-marker-size-error\">{localMarkerSizeMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                className={classes.colorForm}\r\n                            >\r\n                                <InputLabel htmlFor='z-min-input'>Color</InputLabel>\r\n                                <OutlinedInput\r\n                                    type='color'\r\n                                    id='marker-color'\r\n                                    value={localMarkerColor}\r\n                                    onChange={(event) => setLocalMarkerColor(event.target.value)}\r\n                                    aria-describedby='local-marker-color'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-color'\r\n                                />\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={1}></Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleMarkerOptionsClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalMarkerOptionsConfirm}\r\n                                disabled={Boolean(localMarkerOpacityMessage || localMarkerSizeMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ChartControlPanel);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    csvFromVizRequestSend\r\n}\r\n\r\n// User for all histograms sparse or otherwise\r\nconst SparseHistogram = (props) => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata, parameters } = data;\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !data.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n            />\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {\r\n                    x: data.variableValues,\r\n                    name: data.parameters.fields,\r\n                    type: 'histogram',\r\n                    marker: {\r\n                        color: '#00FFFF'\r\n                    }\r\n                }\r\n            ]}\r\n            \r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${parameters.fields} [${metadata.Unit}]`,\r\n                    exponentformat: 'power',\r\n                    color: '#ffffff'\r\n                },\r\n                yaxis:{\r\n                    color: '#ffffff',\r\n                    title: 'Frequency'\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor)             \r\n            }}\r\n            config={{...chartBase.config}}\r\n        />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseHistogram));","export default (infoObject) => {\r\n\r\n    let lonRange = infoObject.lonMax - infoObject.lonMin;\r\n\r\n    let sectionSize;\r\n    if(lonRange < 2){\r\n        sectionSize = (lonRange / 6).toFixed(2);\r\n    } else {\r\n        sectionSize = Math.floor(lonRange / 6);\r\n    }\r\n\r\n    let tickvals = Array.from(Array(5), (e, i) => Math.ceil(infoObject.lonMin + ((i + 1) * sectionSize)));\r\n    let ticktext = tickvals.map(e => e > 180 ? e - 360 : e);\r\n\r\n    return {\r\n        tickmode: 'array',\r\n        tickvals,\r\n        ticktext\r\n    }\r\n}","export default (infoObject) => {    \r\n    const xRange = infoObject.lonMax - infoObject.lonMin;\r\n    const yRange = infoObject.latMax - infoObject.latMin;\r\n    const sizeRatio = xRange / yRange;\r\n\r\n    let height = 40;\r\n    let width = 40;\r\n\r\n    if(isNaN(sizeRatio)){\r\n        height = height / 1.65;\r\n    } else if (sizeRatio > 1) {\r\n        if(sizeRatio <= 1.5){\r\n            width = width * sizeRatio;\r\n            // height = sizeRatio > 2 ? height / 2 : height / sizeRatio;\r\n        } else {\r\n            width = width * 1.5;\r\n            height = sizeRatio > 3 ? height / 1.65 : height * (1.8 / sizeRatio);\r\n        }\r\n    } else {\r\n        width = sizeRatio < .5 ? width * .5 : width * sizeRatio;\r\n    }\r\n\r\n    return [height, width];\r\n}","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport getChartDimensions from '../../Utility/getChartDimensions';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\nimport subTypes from '../../Enums/visualizationSubTypes';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst handleContourMap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n    \r\n    // Handle axis labels when crossing 180th meridian\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`; \r\n\r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n                margin: '0 auto'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext,\r\n                    \r\n                    name: infoObject.parameters.fields,\r\n                    type: 'contour',\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: infoObject.zMin > 1 && infoObject.zMin < 1000 ? '.2f' : '.2e'\r\n                    },\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    }\r\n                }\r\n            ]}\r\n\r\n            config={{...chartBase.config}}\r\n            \r\n            key={index}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                // autosize: true,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {title: 'Longitude', color: '#ffffff', ...xTicks},\r\n                yaxis: {title: 'Latitude', color: '#ffffff'},\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst handleHeatmap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n        \r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null || isNaN(value)) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    zsmooth: subset.length < 20000 ? 'fast' : 'false',\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    name: infoObject.parameters.fields,\r\n                    type: 'heatmap',\r\n                    colorscale: palette,\r\n                    autocolorscale: false,\r\n                    \r\n                    hoverinfo: 'text',\r\n                    text: hovertext,\r\n\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n                    \r\n                },\r\n                // // Mask null values - currently tooltips aren't working\r\n                // {\r\n                //     x: infoObject.lons,\r\n                //     y: infoObject.lats,\r\n                //     z: subset.map(value => value === null ? 0 : 1),\r\n                //     type: 'heatmap',\r\n\r\n                //     colorscale: [\r\n                //         [0, 'rgba(255,255,255,1)'],\r\n                //         [0.5, 'rgba(255,255,255,1)'],\r\n                //         [0.5, 'rgba(0,0,0,0)'],\r\n                //         [1.0, 'rgba(0,0,0,0)'],\r\n                //     ],\r\n                //     showscale: false\r\n                // }\r\n            ]}                \r\n            key={index}\r\n\r\n            config={{...chartBase.config}}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: 'Longitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Latitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SpaceTimeChart = (props) => {\r\n\r\n    const { snackbarOpen, csvFromVizRequestSend } = props;\r\n    const { data, subType } = props.chart;\r\n    const { dates, depths, extent, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitByDepth, setSplitByDepth] = useState(true);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    const subSets = data.generatePlotData(subType, splitByDate, splitByDepth);\r\n    var plots;\r\n    switch(subType){\r\n        case vizSubTypes.contourMap:\r\n            plots = handleContourMap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.heatmap:\r\n            plots = handleHeatmap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.histogram:\r\n            return <SparseHistogram chart={{data}}/>;\r\n\r\n        default:\r\n            plots = '';\r\n            break;        \r\n\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = depths ? depths.size : 1;\r\n\r\n        if(subType === vizSubTypes.heatmap){\r\n            let availableWGLContexts = 15 - countWebGLContexts(props.charts);\r\n\r\n            if(!splitByDate && chartCount * dates.size > availableWGLContexts){\r\n                snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(subType === vizSubTypes.contourMap){\r\n            if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n            }\r\n        }\r\n\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDate(!splitByDate);\r\n        }, 100)\r\n    }\r\n \r\n    const onToggleSplitByDepth = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDepth(!splitByDepth);\r\n        }, 100)\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                handlePaletteChoice={subType !== subTypes.histogram && handlePaletteChoice}\r\n                onToggleSplitByDepth={depths.size===1 ? null : onToggleSplitByDepth}\r\n                onToggleSplitByDate={dates.size===1 ? null : onToggleSplitByDate}\r\n                splitByDepth={splitByDepth}\r\n                splitByDate={splitByDate}\r\n                handleZValueConfirm={subType !== subTypes.histogram && handleZValueConfirm}\r\n                zValues={subType !== subTypes.histogram && zValues}\r\n                extent={subType !== subTypes.histogram && extent}\r\n                downloadCsv={downloadCsv}\r\n            />\r\n            {plots}     \r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SpaceTimeChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport months from '../../Enums/months';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst TimeSeriesChart = (props) => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, dates, parameters, metadata } = data;\r\n\r\n    const [ markerOptions, setMarkerOptions ] = React.useState({opacity: .2, color:'#ff1493', size: 12});\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Time: ${dates[i].slice(0,10)}<br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(dates[0], data.hasHour, data.isMonthly) :\r\n        handleChartDateString(dates[0], data.hasHour, data.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], data.hasHour, data.isMonthly);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = parameters.depth2 === 0 ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    const x = data.isMonthly ? dates.map(date => months[parseInt(date)]) : dates;\r\n\r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                  {\r\n                    // mode: 'lines+markers',\r\n                    mode: showLines ? 'lines+markers' : 'markers',\r\n                    x: x,\r\n                    y: variableValues,\r\n                    error_y: {\r\n                        type: 'data',\r\n                        array: stds,\r\n                        opacity: 0.3,\r\n                        color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                        visible: true\r\n                    },\r\n\r\n                    name: parameters.fields,\r\n                    type: 'scatter',\r\n                    line: {color: markerOptions.color},\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                  },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${parameters.fields} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            depth + \r\n                            `<br>Lat: ${lat}, ` +\r\n                            `Lon: ${lon}`,\r\n                        font: {\r\n                            size: 13\r\n                        }\r\n                    },\r\n                  xaxis: {\r\n                      title: data.isMonthy? 'Month' : 'Time',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  yaxis: {\r\n                      title: `${parameters.fields}[${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(TimeSeriesChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst DepthProfileChart = (props) => {\r\n\r\n    const { setLoadingMessage, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, depths, parameters, metadata } = data;\r\n\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    var infoObject = data;\r\n\r\n    const [markerOptions, setMarkerOptions] = React.useState({opacity: .2, color:'#ff1493', size: 12})\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Depth: ${format('.2f')(depths[i])} [m] <br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }    \r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    const date1 = infoObject.isMonthly ? new Date(parameters.dt1).getMonth() + 1 : parameters.dt1;\r\n    const date2 = infoObject.isMonthly ? new Date(parameters.dt2).getMonth() + 1 : parameters.dt2;\r\n\r\n    const date = date1 === date2 ? handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) :\r\n            handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(date2, infoObject.hasHour, infoObject.isMonthly);\r\n    console.log(data);\r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                    {   \r\n                        // mode: 'lines+markers',\r\n                        mode: showLines ? 'lines+markers' : 'markers',\r\n                        y: depths,\r\n                        x: variableValues,\r\n                        error_x: {\r\n                            type: 'data',\r\n                            array: stds,\r\n                            opacity: 0.3,\r\n                            color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                            visible: true\r\n                        },\r\n                        name: parameters.fields,\r\n                        type: 'scatter',\r\n\r\n                        marker: {\r\n                            line: {color: markerOptions.color},\r\n                            opacity: markerOptions.opacity,\r\n                            size: markerOptions.size,\r\n                            color: markerOptions.color\r\n                        },\r\n\r\n                        hoverinfo: 'text',\r\n                        hovertext\r\n                    },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${parameters.fields} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                            `Lat: ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0, ` +\r\n                            `Lon: ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`,\r\n                        font: {\r\n                            size: 13\r\n                        }\r\n                    },\r\n                        \r\n                  yaxis: {\r\n                      title: 'Depth[m]',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power',\r\n                      autorange:'reversed'\r\n                    },\r\n                  xaxis: {\r\n                      title: `${parameters.fields}[${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(DepthProfileChart));","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport visualizationSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nconst handleSectionMap = (subsets, infoObject, splitByDate, splitBySpace, orientation, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const dates = Array.from(infoObject.dates);\r\n    const depths = Array.from(infoObject.depths);\r\n    const lats = Array.from(infoObject.lats);\r\n    const lons = Array.from(infoObject.lons);\r\n\r\n    const distinctMeridiansOrParallelsForSplitting = \r\n        orientation === 'zonal' ?\r\n        lats : \r\n        lons;\r\n\r\n    const xAxis = orientation === 'zonal' ?\r\n        'Longitude' :\r\n        'Latitude';\r\n\r\n    let xTicks = parameters.lon1 > parameters.lon2 && orientation === 'zonal' ? handleXTicks(infoObject) : {};\r\n\r\n\r\n    return subsets.map((subset, index) => {\r\n        let z = subset;\r\n        let x = [];\r\n        let y = [];\r\n\r\n        if(orientation === 'zonal'){\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lons[Math.floor(i / depths.length)])\r\n            }\r\n        } else {\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lats[Math.floor(i / depths.length)])\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < subset.length; i++){\r\n            y.push(depths[i % depths.length]);\r\n        }\r\n\r\n        const latTitle = orientation === 'meridional' ? `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = orientation === 'zonal' ? `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n\r\n        const date = dates.length < 2 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            splitByDate && splitBySpace ? handleChartDateString(dates[Math.floor(index / distinctMeridiansOrParallelsForSplitting.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            splitByDate ? handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly) :\r\n            'Averaged Values ' + handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        let hovertext = z.map((value, i) => {\r\n            \r\n            if(orientation === 'zonal'){\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            } else {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lat: ${format('.2f')(x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lat: ${format('.2f')(x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            }\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    zsmooth: subset.length < 20000 ? 'best' : 'fast',\r\n                    x,\r\n                    y,\r\n                    z,\r\n                    name: parameters.fields,\r\n                    type: infoObject.subType === visualizationSubTypes.contourSectionMap ? 'contour' : 'heatmap',\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: '.2e'\r\n                    },\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                }\r\n            ]}                \r\n            key={index}\r\n\r\n            layout= {{\r\n                font: {color: '#ffffff'},\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${xAxis}[\\xB0]`,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Depth[m]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: 'reversed'\r\n                },\r\n                paper_bgcolor: colors.backgroundGray,\r\n                annotations: chartBase.annotations(metadata.Distributor)\r\n\r\n            }}   \r\n        />\r\n        )\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SectionMapChart = (props) => {\r\n\r\n    const { classes, snackbarOpen, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { dates, extent, lats, lons, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitBySpace, setSplitBySpace] = useState(false);\r\n    const [orientation, setOrientation] = useState(data.orientation);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    var spaces = orientation === 'zonal' ? lats : lons;\r\n\r\n    const subsets = data.generatePlotData(orientation, splitByDate, splitBySpace);\r\n    var plots = handleSectionMap(subsets, data, splitByDate, splitBySpace, orientation, palette, zMin, zMax);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const onToggleSplitBySpace = () => {\r\n        let chartCount = splitByDate ? dates.size : 1;\r\n        if(!splitBySpace && chartCount * spaces.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitBySpace(!splitBySpace);\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = splitBySpace ? spaces.size : 1;\r\n        if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitByDate(!splitByDate);\r\n            }, 100)\r\n        }     \r\n    }\r\n\r\n    const switchOrientation = () => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setOrientation(orientation === 'zonal' ? 'meridional' : 'zonal');\r\n        }, 100)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.buttonBlock}>\r\n            <ChartControlPanel\r\n                orientation={orientation}\r\n                switchOrientation={switchOrientation}\r\n                onToggleSplitBySpace={spaces.size === 1 ? null : onToggleSplitBySpace}\r\n                splitBySpace={splitBySpace}\r\n                onToggleSplitByDate={dates.size === 1 ? null : onToggleSplitByDate}\r\n                splitByDate={splitByDate}\r\n                handlePaletteChoice={handlePaletteChoice}\r\n                handleZValueConfirm={handleZValueConfirm}\r\n                zValues={zValues}\r\n                extent={extent}\r\n                downloadCsv={downloadCsv}\r\n            />\r\n            </div>\r\n            {plots}      \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SectionMapChart));","import React from 'react';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst SparseScatter = (props) => {\r\n    const {\r\n        xValues,\r\n        yValues,\r\n        markerOptions,\r\n        infoObject,\r\n        xTitle,\r\n        yTitle,\r\n        type\r\n    } = props;\r\n\r\n    const { parameters, metadata, hasDepth, variableValues, times, lats, lons, depths } = infoObject;\r\n\r\n    // const title = `${parameters.fields} [${metadata.Unit}]`;\r\n    \r\n    var hovertext;\r\n\r\n    switch(type){\r\n        case 'time':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'latitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lat: ${lats[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'longitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lon: ${lons[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'depth':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Depth: ${depths[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        default:\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n        }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n    \r\n            data={[\r\n                {\r\n                    x: xValues,\r\n                    y: yValues,\r\n                    mode: 'markers',\r\n                    name: parameters.fields,\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    // type: 'scatter',\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                },\r\n            ]}\r\n            config={{...chartBase.config}}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                // width: 800,\r\n                // height: 570,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: xTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                yaxis: {\r\n                    title: yTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: type === 'depth' ? 'reversed' : true\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor)\r\n            }}            \r\n        />\r\n    )\r\n}\r\n\r\nexport default SparseScatter;","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport SparseScatter from './SparseScatter';\r\n\r\nconst handleSparseMap = (infoObject, palette, zValues) => {\r\n\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !infoObject.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n            \r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zValues[0],\r\n                    zmax: zValues[1],\r\n                    lon: infoObject.lons,\r\n                    lat: infoObject.lats,\r\n                    z: infoObject.variableValues,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    radius: 6,                    \r\n                    name: infoObject.parameters.fields,\r\n                    type: 'densitymapbox',\r\n                    \r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    },\r\n                }\r\n            ]}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                mapbox: {\r\n                    style: \"white-bg\",\r\n                    layers: [\r\n                        {\r\n                            sourcetype: \"raster\",\r\n                            source: [\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"],\r\n                            below: \"traces\"\r\n                        }\r\n                    ],\r\n                    center: infoObject.center,\r\n                    zoom: infoObject.zoom\r\n                },\r\n\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor)\r\n            }}\r\n            \r\n            config={{\r\n                ...chartBase.config,\r\n                mapboxAccessToken:\r\n                  \"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w\",\r\n                \r\n              }}\r\n        />)\r\n}\r\n\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n\r\n    tabs: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    tab: {\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        fontSize: '15px',\r\n        textTransform: 'none',\r\n        color: theme.palette.primary.main\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nfunction tabProps(index) {\r\n    return {\r\n      id: `sparse-tab-${index}`,\r\n      'aria-controls': `sparse-tab-${index}`,\r\n    };\r\n  }\r\n\r\nconst SparseTabPanel = (props) => {\r\n    const { children, selectedTab, index, controlPanelProps, } = props;\r\n\r\n    return (\r\n        <div hidden={selectedTab !== index}>\r\n            <ChartControlPanel\r\n                {...controlPanelProps}\r\n            />\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst SparseMap = (props) => {\r\n\r\n    const { classes, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata } = data;\r\n\r\n    const [palette, setPalette] = useState('Heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [markerOptions, setMarkerOptions] = useState({opacity: .7, color:'#ff1493', size: 12});\r\n    const [tab, setTab] = useState(0);\r\n\r\n    const plot = handleSparseMap(data, palette, zValues)\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleTabChange = (event, newValue) => {\r\n        setTab(newValue)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const forceResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);        \r\n    }\r\n\r\n    const controlPanelProps = {\r\n        map: {\r\n            palette,\r\n            handlePaletteChoice,\r\n            zValues,\r\n            handleZValueConfirm,\r\n            downloadCsv\r\n        },\r\n\r\n        scatter: {\r\n            downloadCsv,\r\n            markerOptions,\r\n            setMarkerOptions,\r\n            handleMarkerOptionsConfirm\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Tabs \r\n                value={tab} \r\n                onChange={handleTabChange} \r\n                aria-label=\"Sparse tabs\" \r\n                centered\r\n                indicatorColor='primary'\r\n                className={classes.tabs}\r\n            >\r\n                <Tab label=\"Map\" {...tabProps(0)} className={classes.tab} onClick={forceResize}/>\r\n                <Tab label=\"By Time\" {...tabProps(1)} className={classes.tab}/>\r\n                <Tab label=\"By Lat\" {...tabProps(2)} className={classes.tab}/>\r\n                <Tab label=\"By Lon\" {...tabProps(3)} className={classes.tab}/>\r\n                {data.hasDepth && <Tab label=\"By Depth\" {...tabProps(4)} className={classes.tab}/>}\r\n            </Tabs>\r\n            <SparseTabPanel selectedTab={tab} index={0} controlPanelProps={controlPanelProps.map}>\r\n                {tab === 0 && plot}\r\n            </SparseTabPanel>\r\n            \r\n            <SparseTabPanel selectedTab={tab} index={1} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 1 &&\r\n                    <SparseScatter\r\n                        xValues={data.times}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Time'\r\n                        yTitle={`${data.parameters.fields}[${metadata.Unit}]`}\r\n                        type='time'\r\n                    />\r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={2} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 2 &&\r\n                    <SparseScatter\r\n                        xValues={data.lats}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Latitude'\r\n                        yTitle={data.parameters.fields}\r\n                        type='latitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={3} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 3 && \r\n                    <SparseScatter\r\n                        xValues={data.lons}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Longitude'\r\n                        yTitle={data.parameters.fields}\r\n                        type='longitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            {data.hasDepth &&\r\n                <SparseTabPanel selectedTab={tab} index={4} controlPanelProps={controlPanelProps.scatter}>\r\n                    {tab === 4 &&\r\n                        <SparseScatter\r\n                            xValues={data.variableValues}\r\n                            yValues={data.depths}\r\n                            markerOptions={markerOptions}\r\n                            infoObject={data}\r\n                            xTitle={data.parameters.fields}\r\n                            yTitle='Depth[m]'\r\n                            type='depth'\r\n                        />                    \r\n                    }\r\n                </SparseTabPanel>            \r\n            }\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseMap));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { IconButton, Paper } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport SpaceTimeChart from './SpaceTimeChart';\r\nimport TimeSeriesChart from './TimeSeriesChart';\r\nimport DepthProfileChart from './DepthProfileChart';\r\nimport SectionMapChart from './SectionMapChart';\r\nimport SparseMap from './SparseMap';\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  deleteChart\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  chartPaper: {\r\n    backgroundColor: colors.backgroundGray,\r\n    marginTop: '5vh',\r\n    marginBottom: '2vh',\r\n    padding: theme.spacing(1),\r\n    boxShadow: '2px 2px 2px 2px #242424',\r\n  }\r\n})\r\n\r\nconst SamplePlot = () => {\r\n  let x = [0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4];\r\n  let y = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,];\r\n  let z = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4];\r\n  \r\n  return (\r\n\r\n      <Plot\r\n      useResizeHandler={true}\r\n      style= {{\r\n          position: 'relative',\r\n          display:'inline-block',\r\n          // marginTop: '30px',\r\n          width: '66vw',\r\n          height: '44vw'\r\n      }}\r\n      \r\n      data={[\r\n          {   \r\n              x,\r\n              y,\r\n              z,\r\n              connectgaps: false,\r\n              zsmooth: 'best',\r\n\r\n              name: 'Test',\r\n              type: 'heatmap',\r\n              contours: {\r\n                  showlabels: true,\r\n                  labelfont: {\r\n                      family: 'Raleway',\r\n                      size: 12,\r\n                      color: 'white',\r\n                  },\r\n                  labelformat: '.2e'\r\n              },\r\n              colorbar: {\r\n                  title: {\r\n                      text: `test`\r\n                  },\r\n                  exponentformat: 'power'\r\n              }\r\n          }\r\n      ]}\r\n\r\n      config={{responsive: true}}\r\n      \r\n      layout= {{\r\n        autosize: true,\r\n          font: {color: '#ffffff'},\r\n          margin: {\r\n            t: 50\r\n          },\r\n          title: {\r\n              text: `A sample chart title`,\r\n              font: {\r\n                size: 16\r\n              }\r\n          },\r\n          paper_bgcolor: colors.backgroundGray,\r\n          xaxis: {title: 'Longitude', color: '#ffffff'},\r\n          yaxis: {title: 'Latitude', color: '#ffffff'},\r\n          annotations: [\r\n              {\r\n                  text: `Brought to you by chef boyardee`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                  yref: 'paper',\r\n                  y: -.24,\r\n                  showarrow: false,\r\n                  xref: 'paper',\r\n                  x: .5\r\n                  }\r\n              ]\r\n              \r\n          }}   \r\n          />\r\n          )\r\n}\r\n\r\nconst closeChartStyles = {\r\n    closeChartIcon: {\r\n      float: 'right',\r\n      marginTop: '-12px',\r\n      marginRight: '-8px'\r\n    }\r\n}\r\n\r\nconst _CloseChartIcon = (props) => {\r\n  const { classes } = props;\r\n  return (\r\n    <React.Fragment>\r\n      <IconButton className={classes.closeChartIcon} color=\"inherit\" onClick={() => props.handleDeleteChart(props.chartIndex)} disableFocusRipple disableRipple>\r\n        <Close/>\r\n      </IconButton>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst CloseChartIcon = withStyles(closeChartStyles)(_CloseChartIcon);\r\n\r\nclass Charts extends Component {\r\n\r\n  handleDeleteChart = (chartIndex) => {\r\n    this.props.deleteChart(chartIndex);\r\n  }\r\n\r\n    render(){\r\n        const { classes, charts } = this.props;\r\n        return (\r\n            <React.Fragment>\r\n              {/* <Paper elevation={12} className={classes.chartPaper}>\r\n              <SamplePlot/> \r\n              </Paper> */}\r\n                {charts.map((chart, index) => {\r\n                    switch(chart.data.parameters.spName){\r\n\r\n                        case storedProcedures.spaceTime:\r\n                          if(chart.subType === vizSubTypes.sparse) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseMap chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          } else if(chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseHistogram chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          }\r\n                          else return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SpaceTimeChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.timeSeries:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <TimeSeriesChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.depthProfile:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <DepthProfileChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.sectionMap:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SectionMapChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n                        \r\n                        default:\r\n                          return '';\r\n                  }\r\n                })}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Charts));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport * as JsSearch from 'js-search';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\nimport { Table, TableBody, TableCell, TableRow, Icon } from '@material-ui/core';\r\n\r\nimport { cruiseListRequestSend, cruiseTrajectoryRequestSend, cruiseTrajectoryClear } from '../../Redux/actions/visualization';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    cruiseList: state.cruiseList,\r\n    getCruiseListState: state.getCruiseListState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseListRequestSend,\r\n    cruiseTrajectoryRequestSend,\r\n    cruiseTrajectoryClear\r\n}\r\n\r\nconst esriFonts = '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif';\r\nconst esriFontColor = 'white';\r\n\r\nconst styles = theme => ({\r\n    outerDiv: {\r\n        padding:'12px',\r\n        maxWidth: '260px',\r\n        backgroundColor: 'transparent',\r\n        color: esriFontColor,\r\n        borderRadius: '4px',\r\n        boxShadow: '2px',\r\n        position: 'relative',\r\n        backdropFilter: 'blur(2px)',\r\n        transform: 'translateY(35px)',\r\n        marginTop: '24px'\r\n    },\r\n\r\n    cruiseSelect: {\r\n        width: '260px',\r\n        borderRadius: '4px',\r\n    },\r\n\r\n    cruiseInfo: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        margin: '12px auto 0 auto',\r\n    },\r\n\r\n    cruiseInfoCell: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        borderStyle: 'none',\r\n    },\r\n})\r\n\r\n// Replace react-select selected option\r\nconst SingleValue = (props) => {\r\n    return (\r\n        <components.SingleValue {...props} className={props.className}/>\r\n    )\r\n}\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst cruiseSort =  (a,b) => a.Name < b.Name ? -1 : 1;\r\n\r\nconst ValueContainer = (props) => {\r\n    return (\r\n        <components.ValueContainer {...props}>\r\n            <Search color='primary' style={{ position: \"absolute\", left: 6 }}/>\r\n            {props.children}\r\n        </components.ValueContainer>\r\n    )\r\n}\r\n\r\nclass CruiseSelector extends Component {\r\n    \r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Nickname');\r\n        search.addIndex('Name');\r\n        search.addIndex('Chief_Name');\r\n        search.addIndex('Keywords');\r\n        try{\r\n            if(props.cruiseList && props.cruiseList.length) search.addDocuments(props.cruiseList);\r\n        } catch(e) {\r\n            console.log(e);\r\n            console.log(props.cruiseList);\r\n        }\r\n\r\n        this.state = {\r\n            search,\r\n            searchField: '',\r\n            selectedCruise: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.cruiseList || !this.props.cruiseList.length) this.props.cruiseListRequestSend();\r\n    }\r\n\r\n    formatOptionLabel = (option) => {\r\n        let label = option.data.Name === option.data.Nickname ?\r\n            option.data.Name :\r\n            `${option.data.Name} - ${option.data.Nickname}`;\r\n\r\n        return label;\r\n    }\r\n\r\n    getSelectOptionsFromCruiseList = (list) => {\r\n        return list.map(item => ({\r\n            value: item.Name,\r\n            label: item.Name,\r\n            data: item\r\n        })) || []\r\n    }\r\n\r\n    handleCruiseSelect = (selection) => {\r\n        if(selection && selection.data){\r\n            const id = selection.data.ID;\r\n            this.props.cruiseTrajectoryRequestSend(id);\r\n        } else {this.props.cruiseTrajectoryClear()}\r\n\r\n        this.setState({...this.state, selectedCruise: selection});\r\n        this.props.updateParametersFromCruiseBoundary(selection);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);\r\n            this.setState({search: this.state.search})\r\n        }\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') this.setState({...this.state, searchField: searchString});\r\n        if(action.action ==='set-value' || action.action === 'menu-close') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    render(){\r\n\r\n        const { search, searchField, selectedCruise } = this.state;        \r\n        const { classes, cruiseList} = this.props;\r\n        \r\n        const options = searchField && cruiseList ? this.getSelectOptionsFromCruiseList(search.search(searchField).sort(cruiseSort)) \r\n            : cruiseList ? this.getSelectOptionsFromCruiseList(cruiseList) \r\n            : []\r\n\r\n        return (\r\n            <div id='cruise-selector' className={classes.outerDiv}>\r\n                <div className={classes.blurEffectDiv}></div>\r\n                {/* <ConnectedTooltip placement='left' title={tooltips.visualization.cruiseSelector}> */}\r\n                    <Select\r\n                        isLoading={this.props.getCruiseListState === states.inProgress}\r\n                        components={{\r\n                            IndicatorSeparator:'',\r\n                            Option,\r\n                            SingleValue,\r\n                            ValueContainer\r\n                        }}\r\n                        isClearable\r\n                        formatOptionLabel={this.formatOptionLabel}\r\n                        onInputChange={this.onAutoSuggestChange}\r\n                        filterOption={null}\r\n                        className={classes.cruiseSelect}\r\n                        escapeClearsValue\r\n                        label=\"Cruise\"\r\n                        options={options}\r\n                        onChange={this.handleCruiseSelect}\r\n                        value={this.state.selectedCruise}\r\n                        placeholder=\"Search Cruises\"\r\n                        styles={{\r\n                            menu: provided => ({ ...provided, zIndex: 9999 }),\r\n\r\n                            menuList: provided => ({...provided, backgroundColor: colors.backgroundGray}),\r\n\r\n                            input: provided => ({...provided,\r\n                                color: 'inherit',\r\n                                fontFamily: esriFonts\r\n                            }),\r\n\r\n                            control: provided => ({...provided,\r\n                                backgroundColor: colors.backgroundGray,\r\n                                border: 'none',\r\n                                boxShadow: '1px 1px 1px 1px #242424',\r\n                                color: esriFontColor,\r\n                                borderRadius: 4,\r\n                                '&:hover': { \r\n                                    border: `1px solid white`,\r\n                                },\r\n                                '&:focus-within': {\r\n                                    borderColor: colors.primary\r\n                                }\r\n                            }),\r\n\r\n                            placeholder: provided => ({...provided,\r\n                                fontFamily: esriFonts,\r\n                                color: colors.primary,\r\n                                fontSize: '14px'\r\n                            }),\r\n\r\n                            noOptionsMessage: provided => ({...provided,\r\n                                fontFamily: esriFonts,\r\n                                color: esriFontColor,\r\n                                backgroundColor: colors.backgroundGray\r\n                            }),\r\n\r\n                            option: (provided, state) => ({...provided,\r\n                                backgroundColor: colors.backgroundGray,\r\n                                color: state.isFocused ? colors.primary : 'white',\r\n                                '&:hover': { backgroundColor: colors.greenHover}\r\n                            }),\r\n\r\n                            singleValue: (provided, state) => ({...provided,\r\n                                fontFamily: esriFonts,\r\n                                color: 'inherit',\r\n                                paddingRight: '20px',\r\n                            }),\r\n\r\n                            valueContainer: provided => ({\r\n                                ...provided,\r\n                                padding: '0 0 0 34px',\r\n                                fontWeight: 100\r\n                            }),\r\n                        }}\r\n                        theme={theme => ({\r\n                            ...theme,\r\n                            colors: {\r\n                                ...theme.colors,\r\n                                // Background color of hovered options\r\n                                primary25: '#e0e0e0',\r\n                                primary: '#212121',\r\n                            },\r\n                        })}\r\n                    />\r\n                {/* </ConnectedTooltip> */}\r\n                {selectedCruise &&\r\n                    <Table size='small' className={classes.cruiseInfo}>\r\n                        <TableBody>\r\n                            <TableRow>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    Cruise:\r\n                                </TableCell>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    {selectedCruise.data.Name}\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    Nickname:\r\n                                </TableCell>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    {selectedCruise.data.Nickname}\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            {\r\n                                selectedCruise.data.Start_Time &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Start Date:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Start_Time.slice(0,10)}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.End_Time &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        End Date:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.End_Time.slice(0,10)}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.Chief_Name &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Chief Scientist:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Chief_Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.Ship_Name &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Ship:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Ship_Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n                        </TableBody>\r\n                    </Table>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(CruiseSelector));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Scene } from '@esri/react-arcgis';\r\n\r\nimport CruiseSelector from './CruiseSelector';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        margin: '0 auto 0 auto',\r\n        width: '100vw',\r\n        height: '100vh',\r\n    }\r\n})\r\n\r\nconst drawButtonStyles = (theme) => ({\r\n    outerDiv: {\r\n        // padding:'12px 0 12px 0',\r\n        backgroundColor: 'transparent',\r\n        // width: '180px',\r\n        borderRadius: '4px',\r\n        marginRight: '20px'\r\n    },\r\n\r\n    drawButton: {\r\n        // border: '1px solid #333333',\r\n        border: `1px solid #333333`,\r\n        borderRadius: '4px',\r\n        color: colors.primary,\r\n        cursor: 'pointer',\r\n        padding: '6px',\r\n        width: '160px',\r\n        fontSize:'14px',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        // backgroundColor: 'rgba(255, 128, 0, .8)',\r\n        // backgroundColor: 'transparent',\r\n        fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n        '&:hover': { \r\n            borderColor: 'white'\r\n        },\r\n    },\r\n\r\n    helpText: {\r\n        marginTop: 0,\r\n        color: 'white',\r\n        fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif'\r\n    },\r\n\r\n    cancelButton: {\r\n        display: 'none',\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst DrawButtonRaw = (props) => {\r\n    const { classes, showHelp } = props;\r\n\r\n    return (\r\n        <div className={classes.outerDiv} id='draw-region-div'>\r\n            {showHelp && <p className={classes.helpText}>Click once to draw <br/>and again to finish</p>}\r\n            <button id='draw-button' className={classes.drawButton}>\r\n                Select Region\r\n            </button>\r\n            <button id='cancel-button' className={`${classes.drawButton} ${classes.cancelButton}`}>\r\n                Cancel\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst DrawButton = withStyles(drawButtonStyles)(DrawButtonRaw);\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst polylineSymbol = {\r\n    type: \"line-3d\",\r\n        symbolLayers: [\r\n            {\r\n                type: \"line\",\r\n                size: \"3px\",\r\n                material: {\r\n                    color: {\r\n                        r: 0,\r\n                        g: 255,\r\n                        b: 255,\r\n                        a: 0\r\n                    }\r\n                },\r\n            }\r\n        ]\r\n}\r\n\r\nclass UiComponents extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.sketchModel = new props.esriModules.SketchViewModel({\r\n            layer: props.regionLayer,\r\n            view: props.view,\r\n            polygonSymbol,\r\n            polylineSymbol,\r\n            defaultUpdateOptions: {\r\n                toggleToolOnClick: false,\r\n                tool: \"transform\"\r\n            }\r\n        })\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const { view, esriModules, regionLayer, setShowHelp } = this.props;\r\n        var { sketchModel } = this;\r\n\r\n        var drawButton = document.getElementById('draw-button');\r\n        var cancelButton = document.getElementById('cancel-button');\r\n\r\n        const throttledUpdate = throttle(75, (event) => {\r\n            if(event.state === 'active'){\r\n                this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n            }\r\n        })\r\n\r\n        sketchModel.on(\"create\", (event) => {\r\n            if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n                sketchModel.complete();\r\n            }\r\n\r\n            if(event.graphic && event.graphic.visible) {\r\n                event.graphic.visible = false;\r\n            }\r\n            if(event.state === 'cancel'){\r\n                setShowHelp(false);\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n\r\n            if(event.state === \"complete\") {\r\n                setShowHelp(false);\r\n                this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n        });\r\n\r\n        sketchModel.on('create', throttledUpdate)\r\n\r\n        sketchModel.on('update', (event) => {\r\n            if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n                if(event.state === 'cancel') return;\r\n                this.props.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n        });   \r\n        \r\n        drawButton.addEventListener(\"click\", (event) => {\r\n                regionLayer.removeAll();\r\n                setShowHelp(true);\r\n                sketchModel.create('polyline', {\r\n                    mode:'click'            \r\n                });\r\n                drawButton.style.display = 'none';\r\n                cancelButton.style.display = 'inline-block';\r\n        });\r\n\r\n        cancelButton.addEventListener('click', (event) => {\r\n            sketchModel.cancel();\r\n            setShowHelp(false);\r\n            drawButton.style.display = 'inline-block';\r\n            cancelButton.style.display = 'none';\r\n        })\r\n\r\n        view.ui.add('draw-region-div', 'bottom-right');\r\n        view.ui.add('cruise-selector', 'top-right');\r\n\r\n        view.ui.remove('zoom');\r\n        view.ui.remove('navigation-toggle');\r\n        view.ui.remove('compass');\r\n        view.ui.remove('attribution');\r\n\r\n        return null;\r\n    }\r\n}\r\n\r\nconst TrajectoryController = React.memo((props) => {\r\n    const { cruiseTrajectory, trajectoryLayer, esriModules } = props;\r\n    \r\n    if(cruiseTrajectory){\r\n        const { lons, lats } = cruiseTrajectory;\r\n\r\n        let midIndex = Math.floor(lons.length / 2);\r\n\r\n        trajectoryLayer.removeAll();\r\n\r\n        var polyLines = [[]];\r\n        var lineIndex = 0;\r\n\r\n        let lonStart = lons[0];\r\n        let latStart = lats[0];\r\n        let maxDistance = 0;\r\n\r\n        // Create a new path array each time 180 lon is crossed\r\n        lons.forEach((lon, i) => {\r\n            let lat = lats[i];\r\n\r\n            let latDistance = Math.abs(lat - latStart);\r\n            let _lonDistance = Math.abs(lon - lonStart);\r\n            let lonDistance = _lonDistance > 180? 360 - _lonDistance : _lonDistance;\r\n\r\n            let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n            maxDistance = distance > maxDistance ? distance : maxDistance;\r\n\r\n            polyLines[lineIndex].push([lon, lat]);\r\n\r\n            if(i < lons.length - 1){\r\n                if((lon > 160 && lon < 180) && (lons[i + 1] > -180 && lons[i + 1] < -160)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n\r\n                if((lon > -180 && lon < -160) && (lon[i + 1] > 160 && lon[i + 1] < 180)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n            }\r\n        })\r\n\r\n        var cruiseTrajectorySymbol = {\r\n            type: 'line-3d',\r\n            symbolLayers: [{\r\n                type: 'line',\r\n                material: { color: [0, 255, 255, 1] },\r\n                cap:  'round',\r\n                join: 'round',\r\n                size: 2\r\n            }]\r\n        }\r\n\r\n        polyLines.forEach(line => {\r\n\r\n            let cruiseTrajectoryGeometry = {\r\n                type: 'polyline',\r\n                paths: line\r\n            }\r\n\r\n            let graphic = new esriModules.Graphic({\r\n                geometry: cruiseTrajectoryGeometry,\r\n                symbol: cruiseTrajectorySymbol\r\n            });\r\n\r\n            trajectoryLayer.add(graphic);\r\n        })\r\n\r\n        try {\r\n            const center = [lons[midIndex], lats[midIndex]];\r\n\r\n            var zoom = 7 - Math.floor(maxDistance / 6);            \r\n    \r\n            props.view.goTo({\r\n                target: center,\r\n                zoom\r\n            }, {\r\n                maxDuration: 2500,\r\n                speedFactor: .5\r\n            });    \r\n\r\n        } catch(e) {console.log(e)}\r\n\r\n    } else {\r\n        trajectoryLayer.removeAll();\r\n\r\n        props.view.goTo({\r\n            target: [-140, 30],\r\n            zoom: 3\r\n        }, {\r\n            maxDuration: 2500,\r\n            speedFactor: .5\r\n        }); \r\n    }\r\n    return '';\r\n})\r\n\r\nclass MapContainer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            showHelp: false\r\n        }\r\n        this.regionLayer = new props.esriModules.GraphicsLayer();\r\n        this.trajectoryLayer = new props.esriModules.GraphicsLayer();\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, esriModules, spParams, cruiseTrajectory, globeUIRef } = this.props;\r\n\r\n\r\n        const lat1 = parseFloat(spParams.lat1);\r\n        const lat2 = parseFloat(spParams.lat2);\r\n        const lon1 = parseFloat(spParams.lon1);\r\n        let _lon2 = parseFloat(spParams.lon2);\r\n        const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n        this.regionLayer.removeAll();\r\n\r\n        var polygon = {\r\n            type: 'polygon', \r\n            rings: [\r\n                [lon1, lat1],\r\n                [lon2, lat1],\r\n                [lon2, lat2],\r\n                [lon1, lat2],\r\n                [lon1, lat1]\r\n            ]\r\n        };\r\n\r\n        let regionGraphic = new esriModules.Graphic({\r\n            geometry: polygon,\r\n            symbol: polygonSymbol\r\n        })\r\n\r\n        this.regionLayer.add(regionGraphic);\r\n\r\n        return (\r\n            <div className={classes.container}>\r\n                <Scene\r\n                    mapProperties={{ \r\n                        basemap: 'satellite',\r\n                        layers: [\r\n                            this.regionLayer,\r\n                            this.trajectoryLayer\r\n                        ],\r\n\r\n                    }}\r\n                    viewProperties={{\r\n                        center: [-140, 30],\r\n                        zoom: 3,\r\n                        highlightOptions: {\r\n                            haloOpacity: 0,\r\n                            haloColor: 'rgba(0, 0, 0, 0)',\r\n                            fillOpacity: 0,\r\n                            color: \"rgba(0, 0, 0, 0)\"\r\n                        }\r\n                    }}\r\n                >\r\n                    <TrajectoryController \r\n                        cruiseTrajectory={cruiseTrajectory}\r\n                        trajectoryLayer={this.trajectoryLayer}\r\n                        esriModules={esriModules}\r\n                    />\r\n                    <UiComponents\r\n                        updateDomainFromGraphicExtent = {this.props.updateDomainFromGraphicExtent}\r\n                        esriModules={esriModules}\r\n                        measurementPositions={this.props.measurementPositions}\r\n                        regionLayer={this.regionLayer}\r\n                        setShowHelp={(showHelp) => this.setState({...this.state, showHelp})}\r\n                        ref={globeUIRef}\r\n                    />\r\n                </Scene>\r\n                <DrawButton showHelp={this.state.showHelp}/>\r\n                <CruiseSelector updateParametersFromCruiseBoundary={this.props.updateParametersFromCruiseBoundary}/>\r\n            </div>            \r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(MapContainer);","const cleanSPParams = ({depth1, depth2, dt1, dt2, fields, lat1, lat2, lon1, lon2, spName, tableName}) => ({\r\n    depth1: parseFloat(depth1),\r\n    depth2: parseFloat(depth2),\r\n    dt1,\r\n    dt2,\r\n    fields,\r\n    lat1: parseFloat(lat1),\r\n    lat2: parseFloat(lat2),\r\n    lon1: parseFloat(lon1),\r\n    lon2: parseFloat(lon2),\r\n    spName,\r\n    tableName,\r\n})\r\n\r\nexport default cleanSPParams;","const localDateToString = (date) => {\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate()\r\n\r\n    let nYear = year.toString();\r\n    let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n    let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n    return nYear + '-' + nMonth + '-' + nDay;\r\n}\r\n\r\nexport default localDateToString;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginRequiredPrompt from '../User/LoginRequiredPrompt';\r\n// import VisualizationController from './VisualizationController';\r\nimport VizControlPanel from './VizControlPanel';\r\nimport DownloadConfirmationDialog from './DownloadConfirmationDialog';\r\n\r\nimport { showLoginDialog, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { queryRequestSend, storedProcedureRequestSend, cruiseListRequestSend, completedShowCharts } from '../../Redux/actions/visualization';\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\n\r\nimport { loadModules } from 'esri-loader';\r\n\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nimport Charts from './Charts';\r\nimport MapContainer from './MapContainer';\r\nimport colors from '../../Enums/colors'\r\nimport cleanSPParams from '../../Utility/cleanSPParams';\r\nimport localDateToString from '../../Utility/localDateToString';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport stars from '../../Utility/starsBase64';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    sampleData: state.sampleData,\r\n    queryRequestState: state.queryRequestState,\r\n    maps: state.maps,\r\n    charts: state.charts,\r\n    data: state.data,\r\n    storedProcedureRequestState: state.storedProcedureRequestState,\r\n    loadingMessage: state.loadingMessage,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    cruiseList: state.cruiseList,\r\n    showChartsOnce: state.showChartsOnce,\r\n    datasets: state.datasets,\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    queryRequestSend,\r\n    retrievalRequestSend,\r\n    storedProcedureRequestSend,\r\n    snackbarOpen,\r\n    cruiseListRequestSend,\r\n    completedShowCharts,\r\n    datasetRetrievalRequestSend\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    displayNone: {\r\n        display: 'none'\r\n    },\r\n\r\n    background: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    showCharts: {\r\n        display: 'inline-block',\r\n        paddingTop: theme.spacing(6)\r\n        // width: '90%'\r\n    },\r\n\r\n    vizWrapper: {\r\n        minHeight: '100vh',\r\n        // overflow: 'hidden',\r\n        // width: '100vw',\r\n        background: `url(${stars})`\r\n    }\r\n})\r\n\r\nconst baseSPParams = {\r\n    tableName: '',\r\n    fields: null,\r\n    depth1: 0,\r\n    depth2: 0,\r\n    dt1: new Date(),\r\n    dt2: new Date(),\r\n    lat1: 0,\r\n    lat2: 0,\r\n    lon1: 0,\r\n    lon2: 0,\r\n    selectedVizType: ''\r\n}\r\n\r\nclass Visualization extends Component {\r\n    globeUIRef = React.createRef();\r\n\r\n    state = {\r\n        filteredData: [],\r\n        opacity: 1,\r\n        showCharts: false,\r\n        showUI: false,\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        downloadTarget: null,\r\n\r\n        spParams: baseSPParams\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        if(!this.props.cruiseList) this.props.cruiseListRequestSend();\r\n        if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n\r\n        const esriModuleNames = [\r\n            'AreaMeasurement3D',\r\n            'Search',\r\n            'GraphicsLayer',\r\n            'SketchViewModel',\r\n            'Utils',\r\n            'Graphic',\r\n        ];\r\n\r\n        var loadedModules = await loadModules([\r\n            'esri/widgets/AreaMeasurement3D',\r\n            'esri/widgets/Search',\r\n            'esri/layers/GraphicsLayer',\r\n            'esri/widgets/Sketch/SketchViewModel',\r\n            'esri/geometry/support/webMercatorUtils',\r\n            'esri/Graphic',\r\n        ], {version: '4.14'});\r\n\r\n        var esriModules = esriModuleNames.reduce((accumulator, currentValue, currentIndex) => {\r\n            accumulator[currentValue] = loadedModules[currentIndex];\r\n            return accumulator;\r\n        }, {});\r\n\r\n        this.setState({...this.state, esriModules});\r\n    }\r\n\r\n    handleSetDownloadTarget = (downloadTarget) => {\r\n        this.setState({...this.state, downloadTarget})\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(this.props.showChartsOnce) {\r\n            this.props.completedShowCharts();\r\n            this.setState({...this.state, showCharts: true})\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, spParams: {...this.state.spParams, [event.target.name]: event.target.value}})\r\n    };\r\n\r\n    handleLatLonChange = (event) => {\r\n        this.setState({\r\n            ...this.state, \r\n            spParams: {...this.state.spParams, [event.target.name]: event.target.value},\r\n        })\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt1:newDate}});\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt2:newDate}});\r\n        }\r\n    }\r\n\r\n    onVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state.spParams;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: localDateToString(dt1),\r\n            dt2: localDateToString(dt2),\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.state.spParams.fields && this.state.spParams.fields.value,\r\n            tableName: this.state.spParams.fields && this.state.spParams.tableName,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.state.spParams.fields && this.state.spParams.fields.data\r\n        }\r\n    \r\n        this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    // Update the \"fields\" state piece when the variables input changes\r\n    // Field in this case refers to a react-select option, which contains catalog metadata\r\n    updateFields = (fields) => {\r\n        if(fields) {\r\n            let surfaceOnly = !fields.data.Depth_Min;\r\n            let irregularSpatialResolution = fields.data.Spatial_Resolution === 'Irregular';\r\n\r\n            let sparseMaxDate = utcDateStringToLocal(fields.data.Time_Max);\r\n            sparseMaxDate.setDate(sparseMaxDate.getDate() + 1);\r\n\r\n            let dt1 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt1 : utcDateStringToLocal(fields.data.Time_Min);\r\n            let dt2 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt2 : \r\n                irregularSpatialResolution ? sparseMaxDate :\r\n                utcDateStringToLocal(fields.data.Time_Min);\r\n            \r\n            let latMin = Math.floor(fields.data.Lat_Min * 1000) /1000;\r\n            let latMax = Math.ceil(fields.data.Lat_Max * 1000) /1000;\r\n            let lonMin = Math.floor(fields.data.Lon_Min * 1000) /1000;\r\n            let lonMax = Math.ceil(fields.data.Lon_Max * 1000) /1000;\r\n\r\n            let lat1 = irregularSpatialResolution ? latMin : this.state.spParams.lat1;\r\n            let lat2 = irregularSpatialResolution ? latMax : this.state.spParams.lat2;\r\n            let lon1 = irregularSpatialResolution ? lonMin : this.state.spParams.lon1;\r\n            let lon2 = irregularSpatialResolution ? lonMax : this.state.spParams.lon2;\r\n            let depth1 = irregularSpatialResolution ? fields.data.Depth_Min || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? 0 :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? 0 : \r\n                this.state.spParams.depth1;\r\n\r\n            let depth2 = irregularSpatialResolution ? fields.data.Depth_Max || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2) : \r\n                this.state.spParams.depth2;\r\n\r\n            if(irregularSpatialResolution){\r\n                this.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            let tableName = fields.data.Table_Name;\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                spParams: {...this.state.spParams, \r\n                    fields,\r\n                    dt1,\r\n                    dt2,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    depth1,\r\n                    depth2,\r\n                    tableName,\r\n                    selectedVizType: ''\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({...this.state, spParams: {...this.state.spParams, fields, tableName: ''}})\r\n        }\r\n    }\r\n\r\n    updateParametersFromCruiseBoundary = (cruise) => {\r\n        if(cruise && this.state.spParams.fields){\r\n            this.props.snackbarOpen('Setting chart parameters to cruise boundaries.');\r\n            let lat1 = Math.floor(cruise.data.Lat_Min * 1000) / 1000;\r\n            let lat2 = Math.ceil(cruise.data.Lat_Max * 1000) / 1000;\r\n            let lon1 = Math.floor(cruise.data.Lon_Min * 1000) / 1000;\r\n            let lon2 = Math.ceil(cruise.data.Lon_Max * 1000) / 1000;\r\n\r\n            this.setState({...this.state,\r\n                spParams: {...this.state.spParams,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    dt1: utcDateStringToLocal(cruise.data.Start_Time),\r\n                    dt2: utcDateStringToLocal(cruise.data.End_Time)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    handleShowCharts = () => {\r\n        this.setState({...this.state, showCharts: true})\r\n    }\r\n\r\n    handleShowGlobe = () => {\r\n        this.setState({...this.state, showCharts: false})\r\n    }\r\n\r\n    toggleShowUI = () => {\r\n        this.setState({...this.state, showUI: !this.state.showUI});\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: extent.ymin.toFixed(3),\r\n            lat2: extent.ymax.toFixed(3),\r\n            lon1: _lon1.toFixed(3),\r\n            lon2: _lon2.toFixed(3)\r\n        };\r\n\r\n        this.setState({...this.state, spParams: {...this.state.spParams, ...newCoordinates}});\r\n    }\r\n\r\n    resetSPParams = () => {\r\n        this.setState({...this.state, spParams: baseSPParams})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        if(!this.props.user) return <LoginRequiredPrompt/>\r\n\r\n        return (\r\n            <div className={classes.vizWrapper}>\r\n                <DownloadConfirmationDialog\r\n                    {...this.state.spParams}\r\n                    downloadTarget={this.state.downloadTarget}\r\n                    handleSetDownloadTarget={this.handleSetDownloadTarget}\r\n                />\r\n\r\n                <VizControlPanel\r\n                    handleSetDownloadTarget={this.handleSetDownloadTarget}\r\n                    toggleChartView={this.toggleChartView}\r\n                    toggleShowUI={this.toggleShowUI}\r\n                    handleChange={this.handleChange}\r\n                    handleLatLonChange={this.handleLatLonChange}\r\n                    handleStartDateChange={this.handleStartDateChange} \r\n                    handleEndDateChange={this.handleEndDateChange} \r\n                    showUI={this.state.showUI}\r\n                    onVisualize={this.onVisualize}\r\n                    updateFields={this.updateFields}\r\n                    {...this.state.spParams}\r\n                    surfaceOnly={this.state.surfaceOnly}\r\n                    irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                    showCharts={this.state.showCharts}\r\n                    handleShowCharts={this.handleShowCharts}\r\n                    handleShowGlobe={this.handleShowGlobe}\r\n                    resetSPParams={this.resetSPParams}\r\n                />\r\n                { this.state.esriModules &&\r\n                    <div className={`${this.state.showCharts ? classes.displayNone : ''}`}>\r\n                        <MapContainer\r\n                            globeUIRef={this.globeUIRef}\r\n                            updateDomainFromGraphicExtent={this.updateDomainFromGraphicExtent}\r\n                            updateParametersFromCruiseBoundary={this.updateParametersFromCruiseBoundary}\r\n                            esriModules={this.state.esriModules}\r\n                            spParams={this.state.spParams}\r\n                            cruiseTrajectory={this.props.cruiseTrajectory}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n                <div className={this.state.showCharts ? classes.showCharts : classes.displayNone}>\r\n                    <Charts/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Visualization));","export default 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=';","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport Link from '@material-ui/core/Link';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { showLoginDialog, hideLoginDialog, restoreInterfaceDefaults, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { logOut, userLoginRequestSend, googleLoginRequestSend } from '../../Redux/actions/user';\r\n\r\nimport GoogleSignInButton from './GoogleSignInButton';\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        loginDialogIsOpen: state.loginDialogIsOpen,\r\n        userLoginState: state.userLoginState,\r\n        userLoginError: state.userLoginError\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    hideLoginDialog,\r\n    showLoginDialog,\r\n    logOut,\r\n    userLoginRequestSend,\r\n    restoreInterfaceDefaults,\r\n    googleLoginRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst styles = theme => ({\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: 'relative',\r\n    },\r\n\r\n    buttonProgress: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n\r\n    googleIconWrapper: {\r\n        marginRight: '100px',\r\n        marginLeft: '-8px'\r\n    },\r\n\r\n    dialogWrapper: {\r\n        backgroundColor: colors.solidPaper\r\n    },\r\n\r\n    colorCorrectionPrimary: {\r\n        color: colors.primary\r\n    },\r\n\r\n    colorCorrectionWhite: {\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst loginClickHandlerTarget = 'g-signin';\r\n\r\nclass LoginDialog extends Component{\r\n    // Text input state is managed in the TopNavBar component\r\n\r\n    handleLogin = (event) => {\r\n        this.props.userLoginRequestSend(this.props.username, this.props.password);\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.clearState();\r\n        this.props.hideLoginDialog();\r\n        this.props.restoreInterfaceDefaults();\r\n    }\r\n\r\n    onGoogleSignin = (user) => {\r\n        let token = user.getAuthResponse(true).id_token;\r\n        this.props.googleLoginRequestSend(token);\r\n    }\r\n\r\n    onDialogEnter = () => {\r\n        // clean up listener on unmount\r\n        let _this = this;\r\n        let auth = window.gapi.auth2\r\n        if(auth){\r\n            let authInstance = auth.getAuthInstance();\r\n            authInstance.attachClickHandler(\r\n                loginClickHandlerTarget, \r\n                null, \r\n                _this.onGoogleSignin,\r\n                () => _this.props.snackbarOpen('There was a problem accessing your google account')\r\n            );\r\n        } else {\r\n            setTimeout(_this.onDialogEnter, 20);\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n        let loginDisabled = !this.props.username || !this.props.password;\r\n\r\n        return (\r\n            <Dialog\r\n                open={this.props.loginDialogIsOpen}\r\n                onClose={this.handleClose}\r\n                aria-labelledby=\"form-dialog-title\"\r\n                onEnter={this.onDialogEnter}\r\n                PaperProps={{\r\n                    className: classes.dialogWrapper\r\n                }}\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">Login</DialogTitle>\r\n                <DialogContent>                \r\n                    <DialogContentText>\r\n                        Please enter your username and password, or <Link className={classes.colorCorrectionPrimary} onClick={this.handleClose} component={RouterLink} to={{pathname: '/register'}}>Register.</Link>\r\n                    </DialogContentText>\r\n                    <form onSubmit={e => (e.preventDefault())}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"username\"\r\n                            label=\"Username\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='username'\r\n                            value={this.props.username}\r\n                            onChange={this.props.handleChange}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}                            \r\n                        />\r\n\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"name\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='password'\r\n                            value={this.props.password}\r\n                            onChange={this.props.handleChange}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            helperText={<Link className={classes.colorCorrectionPrimary} onClick={this.handleClose} component={RouterLink} to={{pathname: '/forgotpass'}}>Forgot Username or Password</Link>}\r\n                        />\r\n\r\n                        <DialogActions>\r\n                            <div className={classes.googleIconWrapper}>\r\n                                <GoogleSignInButton clickHandlerTarget={loginClickHandlerTarget} text='Sign in with Google'/>\r\n                            </div>\r\n\r\n                            <Button onClick={this.handleClose}>\r\n                                <span className={classes.colorCorrectionWhite}>Cancel</span>\r\n                            </Button>\r\n\r\n                            <div className={classes.wrapper}>\r\n                                <Button \r\n                                    color=\"primary\" \r\n                                    type='submit' \r\n                                    onClick={this.handleLogin} \r\n                                    disabled={loginDisabled}\r\n                                    className={loginDisabled ? '' : classes.colorCorrection}\r\n                                >\r\n                                    Log In\r\n                                </Button>\r\n                            </div>\r\n                        </DialogActions>\r\n                    </form>\r\n                    {this.props.userLoginState === states.failed ?\r\n                    <DialogContentText>\r\n                        Login failed. Please try again.\r\n                    </DialogContentText>\r\n                    : ''               \r\n                    }\r\n                </DialogContent>\r\n                \r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(LoginDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { snackbarClose } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    snackbarIsOpen: state.snackbarIsOpen,\r\n    snackbarMessage: state.snackbarMessage\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarClose,\r\n}\r\n\r\nconst styles = (theme) => {\r\n    return ({\r\n\r\n    })\r\n}\r\n\r\nconst SnackbarWrapper = (props) => {\r\n    const { classes } = props;\r\n    return (\r\n        \r\n        <React.Fragment>\r\n            <Snackbar\r\n                autoHideDuration={2500} \r\n                message={props.snackbarMessage}\r\n                onClose={props.snackbarClose}\r\n                open={props.snackbarIsOpen}\r\n                anchorOrigin={{horizontal:'center', vertical:'top'}}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SnackbarWrapper));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport * as Spinner from 'react-spinkit';\r\n\r\nconst styles = theme => ({\r\n    loader: {\r\n        backgroundColor: '#000000',\r\n        position: 'fixed',\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        opacity: 0.5,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        zIndex: 9998\r\n    },\r\n\r\n    loaderContent: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItem: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 9999,\r\n        opacity: 1\r\n    },\r\n\r\n    spinnerText: {\r\n        zIndex: 10000,\r\n        color: theme.palette.primary.main,\r\n        // color: '#FF8000',\r\n        marginTop: '25px',\r\n        opacity: 1\r\n    },\r\n\r\n    spinner: {\r\n        opacity: 1\r\n    }\r\n})\r\n\r\nconst LoadingOverlay = (props) => {\r\n    const { classes, loadingMessage } = props;\r\n\r\n    if(loadingMessage && loadingMessage.length){\r\n        return (\r\n            <div className={classes.loader}>\r\n                <div className={classes.loaderContent}>\r\n                    <Spinner className={classes.spinner} color={colors.primary} name=\"ball-pulse-rise\" fadeIn='quarter'/>\r\n                    <Typography variant='h6' className={classes.spinnerText}>{loadingMessage}</Typography>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else return '';\r\n\r\n}\r\n\r\nexport default withStyles(styles)(LoadingOverlay);","// This component is a wrapper and control center for\r\n// UI components that need to be accessible anywhere\r\n// in the application such as login dialog and snackbar.\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginDialog from '../User/LoginDialog';\r\nimport SnackbarWrapper from './SnackbarWrapper';\r\nimport LoadingOverlay from './LoadingOverlay';\r\n\r\nimport { loginDialogWasCleared } from '../../Redux/actions/user';\r\n\r\nconst styles = theme => ({\r\n    inlineBlock: {\r\n        display: 'inline-block'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    clearLoginDialog: state.clearLoginDialog,\r\n    loadingMessage: state.loadingMessage\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    loginDialogWasCleared\r\n}\r\n\r\nclass GlobalUIComponentWrapper extends Component {\r\n\r\n    state = {\r\n        // Login dialog\r\n        username: '',\r\n        password: ''\r\n    }\r\n    \r\n    // Controls login dialog text fields to allow reset from logout button\r\n    handleChange = (event) => {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    };\r\n\r\n    handleLogOut = () => {\r\n        this.clearState();\r\n    }\r\n\r\n    clearState = () => {\r\n        this.setState({\r\n            username: '',\r\n            password: ''\r\n        });\r\n        this.props.loginDialogWasCleared();\r\n    }\r\n\r\n    componentDidUpdate = (preProps) => {\r\n        if(this.props.clearLoginDialog) {\r\n            this.clearState();\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        // const { classes } = this.props;\r\n\r\n        return (\r\n            <React.Fragment>    \r\n                <LoginDialog clearState={this.clearState} username={this.state.username} password={this.state.password} handleChange={this.handleChange}/>\r\n                <SnackbarWrapper/>\r\n                <LoadingOverlay loadingMessage={this.props.loadingMessage}/>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(GlobalUIComponentWrapper));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n    landingWrapper: {\r\n        margin: '15vh auto'\r\n    }\r\n})\r\n\r\nclass LandingPage extends Component {\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.landingWrapper}>\r\n                <img \r\n                    src='/images/large_cmap_logo.png'\r\n                    alt='Simons CMAP Logo'\r\n                    height='290'\r\n                    width='600'\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(LandingPage);","const jss = {\r\n    // styles for top navbar links\r\n    navLink: theme => ({\r\n        textDecoration: 'none',\r\n        marginRight: 40,\r\n        fontFamily: '\"Lato\",sans-serif',\r\n        color: 'white',\r\n        '&:hover': {\r\n            color: theme.palette.primary.main\r\n        },\r\n        fontSize: '15px',\r\n        fontWeight: 100,\r\n        display: 'inline-block',\r\n        cursor: 'pointer' ,\r\n        verticalAlign: 'middle',\r\n        pointerEvents: 'all',\r\n        fontWeight: 500,\r\n        letterSpacing: 'normal'\r\n    }),\r\n}\r\n\r\nexport default jss;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\r\nimport { Typography, MenuItem, ClickAwayListener, Grow, Paper, Popper, MenuList } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nconst styles = (theme) => ({\r\n    navLink: JSS.navLink(theme),\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle',\r\n        color: colors.primary\r\n    },\r\n\r\n    dropdown: {\r\n        zIndex: 1300,\r\n        marginTop: '21px',\r\n        width: '200px'\r\n    },\r\n\r\n    popperPaperBlue: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: '#1D4962'\r\n    },\r\n\r\n    popperPaperBlack: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: 'black'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    logOut\r\n}\r\n\r\nconst UserNavbarDropdown = (props) => {\r\n    const { classes, user, pathname, logOut } = props;\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const paperClass = window.location.pathname === '/visualization' ? classes.popperPaperBlack : classes.popperPaperBlue;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='caption' className={`${classes.navLink}`} onClick={handleClick}>\r\n                {user.email}{anchorEl ? <ExpandLess className={classes.icon} color='primary' fontSize='small'/> : <ExpandMore className={classes.icon} color='primary' fontSize='small'/>}\r\n            </Typography>\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} role={undefined} transition className={classes.dropdown}>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={paperClass}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList id=\"menu-list-grow\">\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/profile'>Profile</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/apikeymanagement'>API Access</MenuItem>\r\n                                    <MenuItem onClick={logOut}>Logout</MenuItem>\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(UserNavbarDropdown)));","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\r\n\r\nimport { Typography, MenuItem, ClickAwayListener, Grow, Paper, Popper, MenuList } from '@material-ui/core';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    navLink: JSS.navLink(theme),\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle'\r\n    },\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle',\r\n        color: colors.primary\r\n    },\r\n\r\n    dropdown: {\r\n        zIndex: 1300,\r\n        marginTop: '21px',\r\n        width: '200px'\r\n    },\r\n\r\n    popperPaperBlue: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: '#1D4962'\r\n    },\r\n\r\n    popperPaperBlack: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: 'black'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    logOut\r\n}\r\n\r\nconst DataSubmissionNavbarDropdown = (props) => {\r\n    const { classes, user, pathname, logOut } = props;\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const paperClass = window.location.pathname === '/visualization' ? classes.popperPaperBlack : classes.popperPaperBlue;\r\n\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='caption' className={`${classes.navLink}`} onClick={handleClick}>\r\n                Data Submission{anchorEl ? <ExpandLess className={classes.icon} color='primary' fontSize='small'/> : <ExpandMore className={classes.icon} color='primary' fontSize='small'/>}\r\n            </Typography>\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} role={undefined} transition className={classes.dropdown}>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={paperClass}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList id=\"menu-list-grow\">\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/guide'>Getting Started</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/validationtool'>Submit Data</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/userdashboard'>User Dashboard</MenuItem>\r\n                                    {user && user.isDataSubmissionAdmin &&\r\n                                        <MenuItem onClick={handleClose} component={Link} to='/datasubmission/admindashboard'>Admin Dashboard</MenuItem>\r\n                                    }\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(DataSubmissionNavbarDropdown)));","import React from 'react';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport { Typography, IconButton, Drawer, List, ListItem, ListItemIcon, ListItemText, Divider } from '@material-ui/core';\r\nimport { Menu } from '@material-ui/icons';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = theme => ({\r\n    menuIcon: {\r\n        color: 'white',\r\n        cursor: 'pointer'\r\n    },\r\n\r\n    iconButton: {\r\n        ...JSS.navLink(theme),\r\n        padding: '8px'\r\n    },\r\n\r\n    drawerPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        paddingLeft: '8px'\r\n    },\r\n\r\n    listItem: {\r\n        '&:hover': {\r\n            color: theme.palette.primary.main\r\n        }\r\n    }\r\n})\r\n\r\nconst MobileNavbarMenu = (props) => {\r\n    const { classes, user, handleLogOut, showLoginDialog } = props;\r\n\r\n    const [drawerState, setDrawerState] = React.useState(false);\r\n\r\n    const handleLoginClick = () => {\r\n        showLoginDialog();\r\n        setDrawerState(false);\r\n    }\r\n\r\n    const handleLogoutClick = () => {\r\n        handleLogOut();\r\n        setDrawerState(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <IconButton onClick={() => setDrawerState(true)} className={classes.iconButton}>\r\n                <Menu className={classes.menuIcon}/>\r\n            </IconButton>\r\n\r\n            <Drawer \r\n                anchor='top' \r\n                open={drawerState} \r\n                onClose={() => setDrawerState(false)}\r\n                PaperProps={{\r\n                    className: classes.drawerPaper\r\n                }}\r\n            >\r\n                <List>\r\n                    <ListItem button component={Link} to='/catalog' onClick={() => setDrawerState(false)}>\r\n                        Catalog\r\n                    </ListItem>\r\n\r\n                    <ListItem button component={Link} to='/visualization' onClick={() => setDrawerState(false)}>\r\n                        Visualization\r\n                    </ListItem>\r\n\r\n                    <ListItem button component={Link} to='/community' onClick={() => setDrawerState(false)}>\r\n                        Community\r\n                    </ListItem>\r\n\r\n                    <ListItem button component={Link} to='/datasubmission' onClick={() => setDrawerState(false)}>\r\n                        Data Submission\r\n                    </ListItem>\r\n                </List>\r\n                <Divider/>\r\n                {user &&\r\n                    <List>\r\n                        <ListItem button component={Link} to='/profile' onClick={() => setDrawerState(false)}>\r\n                            Profile\r\n                        </ListItem>\r\n\r\n                        <ListItem button component={Link} to='/apikeymanagement' onClick={() => setDrawerState(false)}>\r\n                            API Access\r\n                        </ListItem>\r\n\r\n                        <ListItem button onClick={handleLogoutClick}>\r\n                                Log Out\r\n                        </ListItem>\r\n                    </List>                \r\n                }\r\n\r\n                {!user && \r\n                    <List>\r\n                        <ListItem button onClick={handleLoginClick}>\r\n                            Log In\r\n                        </ListItem>\r\n\r\n                        <ListItem button component={Link} to='/register' onClick={() => setDrawerState(false)}>\r\n                            Register\r\n                        </ListItem>\r\n                    </List> \r\n                }\r\n            </Drawer>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withRouter(withStyles(styles)(MobileNavbarMenu));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog, restoreInterfaceDefaults, snackbarOpen, toggleShowHelp } from '../../Redux/actions/ui';\r\nimport { logOut } from '../../Redux/actions/user';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport UserNavbarDropdown from '../User/UserNavbarDropdown';\r\nimport DataSubmissionNavbarDropdown from '../DataSubmission/DataSubmissionNavbarDropdown';\r\nimport MobileNavbarMenu from './MobileNavbarMenu';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nconst styles = theme => ({\r\n\r\n    simonsLogo: {\r\n        verticalAlign: 'middle',\r\n        display: 'inline-block',\r\n    },\r\n    \r\n    simonsLogoWrapper: {\r\n        pointerEvents: 'all',\r\n        display: 'inline-block',\r\n        marginRight: '60px !important',     \r\n        verticalAlign: 'middle',   \r\n    },\r\n\r\n    navWrapper: {\r\n        position: 'fixed',\r\n        width: '100vw',\r\n        top: '0px',\r\n        backgroundColor: 'transparent',\r\n        zIndex: 50,\r\n        paddingTop: '14px',\r\n        paddingBottom: '14px',\r\n        paddingLeft: '20px',\r\n        paddingRight: '20px',\r\n        textAlign: 'left',\r\n        boxSizing: 'border-box',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        pointerEvents: 'none'\r\n    },\r\n\r\n    navWrapperBlue: {\r\n        backgroundColor: '#1D4962'\r\n    },\r\n\r\n    rightSectionWrapper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-around'\r\n    },\r\n\r\n    navLink: JSS.navLink(theme),\r\n\r\n    rightNavLink: {\r\n        marginRight: 30\r\n    },    \r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    showHelp: state.showHelp\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    logOut,\r\n    restoreInterfaceDefaults,\r\n    snackbarOpen,\r\n    toggleShowHelp\r\n}\r\n\r\nclass TopNavBar extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            layout: window.innerWidth >= 860 ? 'desktop' : 'mobile'\r\n        }\r\n        \r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        window.addEventListener(\"resize\", this.handleResize);\r\n    }\r\n\r\n    handleResize = (e) => {\r\n        let w = e.target.innerWidth;\r\n\r\n        if(w < 860 && this.state.layout === 'desktop'){\r\n            this.setState({...this.state, layout:'mobile'});\r\n        }\r\n\r\n        else if(w >= 860 && this.state.layout === 'mobile'){\r\n            this.setState({...this.state, layout:'desktop'});\r\n        }\r\n    }\r\n\r\n    // Controls login dialog text fields to allow reset from logout button\r\n    handleChange = (event) => {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    };\r\n\r\n    handleLogOut = () => {\r\n        this.clearState();\r\n        this.props.logOut();\r\n        this.props.restoreInterfaceDefaults();\r\n    }\r\n\r\n    clearState = () => {\r\n        this.setState({\r\n            username: '',\r\n            password: ''\r\n        })\r\n    }\r\n\r\n    render(){\r\n        const { classes, history, user, showHelp } = this.props;\r\n        const { pathname } = history.location;\r\n\r\n        return (\r\n            <div className={`${classes.navWrapper} ${pathname !== '/visualization' && classes.navWrapperBlue}`}>\r\n                {\r\n                    this.state.layout === 'desktop' ?\r\n\r\n                    <React.Fragment>\r\n                        {/* Left side of navbar */}\r\n                        <div>\r\n                            <Typography variant='caption' href='/' component='a' className={`${classes.navLink} ${classes.simonsLogoWrapper}`}>\r\n                                <img src='/images/CMAP_white_logo_2.png' width='40' alt='CMAP logo' className={classes.simonsLogo}/>\r\n                            </Typography>\r\n                            <Typography variant='caption' to='/catalog' component={Link} className={classes.navLink}>Catalog</Typography>\r\n                            <Typography variant='caption' to='/visualization' component={Link} className={classes.navLink}>Visualization</Typography>\r\n                            <Typography variant='caption' to='/community' component={Link} className={classes.navLink}>Community</Typography>\r\n                            {/* <Typography variant='caption' to='/datasubmission' component={Link} className={classes.navLink}>Data Submission</Typography> */}\r\n                            <DataSubmissionNavbarDropdown/>\r\n                        </div>\r\n\r\n                        {/* Right side of navbar */}\r\n                        <div className={classes.rightSectionWrapper}>\r\n                            <div>\r\n                                {/* <Typography variant='caption' onClick={this.props.toggleShowHelp} className={classes.navLink}>{showHelp ? 'Hide Help' : 'Show Help'}</Typography> */}\r\n                                {user && <UserNavbarDropdown pathname={pathname} user={user}/>}\r\n                                {!user && <Typography variant='caption' onClick={() => this.props.showLoginDialog()} className={`${classes.navLink} ${classes.rightNavLink}`}>Log In</Typography>}\r\n                                {!user && <Typography variant='caption' to='/register' component={Link} className={`${classes.navLink} ${classes.rightNavLink}`}>Register</Typography>}\r\n                            </div>\r\n                        </div>\r\n                    </React.Fragment>\r\n\r\n                    :\r\n\r\n                    <React.Fragment>\r\n                        <Typography variant='caption' href='/' component='a' className={`${classes.navLink} ${classes.simonsLogoWrapper}`}>\r\n                            <img src='/images/CMAP_white_logo_2.png' width='40' alt='CMAP logo' className={classes.simonsLogo}/>\r\n                        </Typography>\r\n                        <MobileNavbarMenu handleLogOut={this.handleLogOut} showLoginDialog={this.props.showLoginDialog} user={user}/>\r\n                    </React.Fragment>\r\n                }\r\n\r\n            </div>        \r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(TopNavBar)));","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst Login = (props) => {\r\n\r\n    useEffect(() => {\r\n        if(!props.user) props.showLoginDialog();\r\n        else window.location.href = \"/catalog\";\r\n    })\r\n    \r\n    return (\r\n        ''\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Grid, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Button, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { changePasswordRequestSend } from '../../Redux/actions/user';\r\nimport { hideChangePasswordDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    changePasswordRequestSend,\r\n    hideChangePasswordDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        '@media (max-width: 768px)': {\r\n            margin: 0\r\n        },\r\n    },\r\n\r\n    formWrapper: {\r\n        padding: '3vh 5vw'\r\n    }\r\n})\r\n\r\nconst testNewPassword = (password) => {\r\n    return /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(password);\r\n};\r\n\r\n\r\nconst ChangePassword = (props) => {\r\n    const { classes } = props;\r\n    \r\n    const [currentPassword, setCurrentPassword] = React.useState('');\r\n    const [newPassword, setNewPassword] = React.useState('');\r\n    const [newPasswordConfirm, setNewPasswordConfirm] = React.useState('')\r\n    \r\n    const newPasswordValid = Boolean(testNewPassword(newPassword) || !newPassword);\r\n    const newPasswordConfirmValid = Boolean(!newPasswordConfirm || newPasswordConfirm === newPassword);\r\n    \r\n    const resetFields = () => {\r\n        setCurrentPassword('');\r\n        setNewPassword('');\r\n        setNewPasswordConfirm('');\r\n    }\r\n\r\n    const handleClose = () => {\r\n        props.hideChangePasswordDialog();\r\n        resetFields();\r\n    }\r\n    \r\n    const handleConfirm = () => {\r\n        props.changePasswordRequestSend(currentPassword, newPassword, props.user.username);\r\n    }\r\n    \r\n    const changePasswordButtonRef = React.useRef();\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            changePasswordButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    const buttonIsDisabled = Boolean(!newPassword || !newPasswordConfirm || !newPasswordValid || !newPasswordConfirmValid);\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n            onEnter={resetFields}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">Change Password</DialogTitle>\r\n            <DialogContent>                \r\n                <DialogContentText>\r\n                    Please enter your current and new password.\r\n                </DialogContentText>\r\n\r\n                <Grid container className={classes.formWrapper}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"currentPassword\"\r\n                            label=\"Current Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='currentPassword'\r\n                            value={currentPassword}\r\n                            onChange={(e) => setCurrentPassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            onKeyPress={handleKeyPress}\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"newPassword\"\r\n                            label=\"New Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='newPassword'\r\n                            value={newPassword}\r\n                            onChange={(e) => setNewPassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!newPasswordValid}\r\n                            helperText={!newPasswordValid ? 'Must be 8 to 32 characters with 1 number and 1 special character.' : ''}\r\n                            onKeyPress={handleKeyPress}\r\n                        />                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"newPasswordConfirm\"\r\n                            label=\"Confirm New Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='newPasswordConfirm'\r\n                            value={newPasswordConfirm}\r\n                            onChange={(e) => setNewPasswordConfirm(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!newPasswordConfirmValid}\r\n                            helperText={newPasswordConfirmValid ? '' : 'Passwords must match.'}\r\n                            onKeyPress={handleKeyPress}\r\n                        />                        \r\n                    </Grid>\r\n                </Grid>\r\n\r\n                <DialogActions>\r\n                    <Button onClick={() => handleClose()} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n\r\n                    <Button \r\n                        color=\"primary\" \r\n                        variant='contained'\r\n                        onClick={handleConfirm}\r\n                        disabled={buttonIsDisabled}\r\n                        ref={changePasswordButtonRef}\r\n                    >\r\n                        Confirm\r\n                    </Button>\r\n                </DialogActions>\r\n            </DialogContent>            \r\n        </Dialog>\r\n        )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChangePassword));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Grid, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Button, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { changeEmailRequestSend } from '../../Redux/actions/user';\r\nimport { hideChangeEmailDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    changeEmailRequestSend,\r\n    hideChangeEmailDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        '@media (max-width: 768px)': {\r\n            margin: 0\r\n        },\r\n    },\r\n\r\n    formWrapper: {\r\n        padding: '3vh 5vw'\r\n    }\r\n})\r\n\r\nconst testEmail = (email) => {\r\n    return /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(email);\r\n};\r\n\r\nconst ChangePassword = (props) => {\r\n    const { classes } = props;\r\n\r\n    const [password, setpassword] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [emailConfirm, setEmailConfirm] = React.useState('')\r\n\r\n    const resetFields = () => {\r\n        setpassword('');\r\n        setEmail('');\r\n        setEmailConfirm('');\r\n    }\r\n\r\n    const handleClose = () => {\r\n        resetFields();\r\n        props.hideChangeEmailDialog();\r\n    }\r\n\r\n    const handleConfirm = () => {\r\n        props.changeEmailRequestSend(email, password, props.user.username);\r\n    }\r\n    \r\n    const changeEmailButtonRef = React.useRef();\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            changeEmailButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    const emailValid = Boolean(testEmail(email) || !email);\r\n    const emailConfirmValid = Boolean(!emailConfirm || email === emailConfirm); \r\n\r\n    const buttonIsDisabled = Boolean(!email || !emailConfirm || !emailValid || !emailConfirmValid);\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n            onEnter={resetFields}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">Change Email</DialogTitle>\r\n            <DialogContent>                \r\n                <DialogContentText>\r\n                    Please enter your account password, and new email address.\r\n                </DialogContentText>\r\n\r\n                <Grid container className={classes.formWrapper}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"currentPassword\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='currentPassword'\r\n                            value={password}\r\n                            onChange={(e) => setpassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            onKeyPress={handleKeyPress}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"email\"\r\n                            label=\"New Email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='email'\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!emailValid}\r\n                            helperText={!emailValid ? 'Please enter a valid email address' : ''}\r\n                        />                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"emailConfirm\"\r\n                            label=\"Confirm Email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='emailConfirm'\r\n                            value={emailConfirm}\r\n                            onChange={(e) => setEmailConfirm(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            onKeyPress={handleKeyPress}\r\n                            error={!emailConfirmValid}\r\n                            helperText={emailConfirmValid ? '' : 'Email addresses must match.'}                            \r\n                        />                        \r\n                    </Grid>\r\n                </Grid>\r\n\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\">\r\n                            Cancel\r\n                        </Button>\r\n\r\n                        <Button \r\n                            color=\"primary\" \r\n                            variant='contained'\r\n                            onClick={handleConfirm}\r\n                            ref={changeEmailButtonRef}\r\n                            disabled={buttonIsDisabled}\r\n                        >\r\n                            Confirm\r\n                        </Button>\r\n                    </DialogActions>\r\n            </DialogContent>            \r\n        </Dialog>\r\n        )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChangePassword));","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { IconButton, Tooltip, Paper, Button, TextField, Typography, Grid } from '@material-ui/core';\r\nimport { Edit } from '@material-ui/icons';\r\n\r\nimport { updateUserInfoRequestSend } from '../../Redux/actions/user';\r\nimport { showChangePasswordDialog, showChangeEmailDialog } from '../../Redux/actions/ui';\r\n\r\nimport ChangePassword from './ChangePassword';\r\nimport ChangeEmail from './ChangeEmail';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    changePasswordDialogIsOpen: state.changePasswordDialogIsOpen,\r\n    changeEmailDialogIsOpen: state.changeEmailDialogIsOpen\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    updateUserInfoRequestSend,\r\n    showChangePasswordDialog,\r\n    showChangeEmailDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    profilePaper: {\r\n        '@media (min-width: 768px)': {\r\n            width: '60vw'\r\n        },\r\n        width: '100vw',\r\n        margin: `${theme.spacing(16)}px auto 0 auto`,\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n\r\n    accountPaper: {\r\n        '@media (min-width: 768px)': {\r\n            width: '60vw'\r\n        },\r\n        width: '100vw',\r\n        margin: `${theme.spacing(6)}px auto 0 auto`,\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n\r\n    textField: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n        maxWidth: 'calc(100% - 52px)'\r\n    },\r\n\r\n    buttonGrid: {\r\n        marginTop: theme.spacing(1)\r\n    },\r\n\r\n    editButton: {\r\n        float: 'right',\r\n        display: 'inline-block',\r\n        marginTop: '-16px'\r\n    },\r\n\r\n    header: {\r\n        paddingLeft: theme.spacing(3),\r\n        display: 'inline-block',\r\n        marginTop: '-4px',\r\n        float: 'left'\r\n    },\r\n\r\n    accountEditButton: {\r\n        float: 'left',\r\n        marginTop: '6px'\r\n    }\r\n})\r\n\r\nconst userProperties = {\r\n    firstName: {\r\n        label:'First Name',\r\n        name: 'firstName',\r\n        type: 'text',\r\n        requirement: 'Must be 2 or more alphabetical characters.',\r\n    },\r\n\r\n    lastName: {\r\n        label:'Last Name',\r\n        name: 'lastName',\r\n        type: 'text',\r\n        requirement: 'Must be 2 or more alphabetical characters.',\r\n    },\r\n\r\n    institute: {\r\n        label:'Institute',\r\n        name: 'institute',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    },\r\n\r\n    department: {\r\n        label:'Department',\r\n        name: 'department',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    },\r\n\r\n    country: {\r\n        label:'Country',\r\n        name: 'country',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    }\r\n}\r\n\r\nconst userToState = (user) => ({\r\n    editable: false,\r\n    firstName: {\r\n        value: user.firstName,\r\n        valid: true\r\n    },\r\n\r\n    lastName: {\r\n        value: user.lastName,\r\n        valid: true\r\n    },\r\n    institute: {\r\n        value: user.institute || '',\r\n        valid: true\r\n    },\r\n    department: {\r\n        value: user.department || '',\r\n        valid: true\r\n    },\r\n    country: {\r\n        value: user.country || '',\r\n        valid: true\r\n    },\r\n    email: {\r\n        value: user.email || '',\r\n        valid: true\r\n    }\r\n})\r\n\r\nclass Profile extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        if(!props.user) return;\r\n\r\n        this.state = {\r\n            ...userToState(props.user),\r\n            editable: false,\r\n            infoHasChanged: false\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        let newValue = event.target.value;\r\n        let fieldName = event.target.name;\r\n        let valid = this.handleValidation(fieldName, newValue);\r\n        this.setState({\r\n            ...this.state,\r\n            infoHasChanged: true,\r\n            [fieldName]: {\r\n                value: newValue,\r\n                valid\r\n            }\r\n        })\r\n    };\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(prevProps.user !== this.props.user){\r\n            this.setState({...this.state, ...userToState(this.props.user)});\r\n        }\r\n    }\r\n\r\n    handleValidation = (fieldName, newValue) => {\r\n        let value = newValue.trim();\r\n        let pattern = /$^/;\r\n\r\n        switch(fieldName){\r\n            case 'firstName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'lastName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'email':\r\n                pattern = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n                break;\r\n            case 'institute':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'department':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'country':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return pattern.test(value);\r\n    }\r\n\r\n    handleEdit = () => {\r\n        this.setState({...this.state, editable: true})\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.setState({...userToState(this.props.user), editable: false, infoHasChanged: false})\r\n    }\r\n\r\n    handleConfirm = () => {\r\n        this.props.updateUserInfoRequestSend({\r\n            firstName: this.state.firstName.value.trim(),\r\n            lastName: this.state.lastName.value.trim(),\r\n            institute: this.state.institute.value.trim(),\r\n            department: this.state.department.value.trim(),\r\n            country: this.state.country.value.trim()\r\n        })\r\n    }\r\n\r\n    render(){\r\n        if(!this.props.user) {\r\n            window.location.href = \"/login\";\r\n            return '';\r\n        }\r\n\r\n        const { classes, changeEmailDialogIsOpen, changePasswordDialogIsOpen, showChangePasswordDialog, showChangeEmailDialog } = this.props;\r\n        const { editable, infoHasChanged } = this.state;\r\n        let formIsValid = true;\r\n        \r\n        Object.keys(userProperties).forEach((property) => {\r\n            if(!this.state[property].valid) formIsValid = false;\r\n        })\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <ChangePassword\r\n                    open={changePasswordDialogIsOpen}\r\n                    close={() => this.setState({...this.state, changePasswordDialogOpen: false})}\r\n                />\r\n                <ChangeEmail\r\n                    open={changeEmailDialogIsOpen}\r\n                    close={() => this.setState({...this.state, changeEmailDialogOpen: false})}\r\n                />\r\n\r\n                <Paper className={classes.profilePaper} elevation={6}>\r\n                    <Typography variant='h5' align='left' className={classes.header}>\r\n                        Profile\r\n                    </Typography>\r\n\r\n                    <Tooltip title='Edit Information'>\r\n                        <IconButton className={classes.editButton} color=\"primary\" onClick={this.handleEdit} disableFocusRipple disableRipple>\r\n                                <Edit/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Grid container spacing={1}>\r\n                        {\r\n                            Object.keys(userProperties).map((property, index) => (\r\n                                <Grid key={index} item xs={12} md={6}>\r\n                                    <TextField\r\n                                        name={property}\r\n                                        label={userProperties[property].label}\r\n                                        value={this.state[property].value}\r\n                                        error={!this.state[property].valid}\r\n                                        helperText={this.state[property].valid ? '' : userProperties[property].requirement}\r\n                                        key={index}\r\n                                        onChange={this.handleChange}\r\n                                        inputProps={{\r\n                                            readOnly: !editable\r\n                                        }}\r\n                                        InputLabelProps={{\r\n                                            shrink: true,\r\n                                        }}\r\n                                        className={classes.textField}\r\n                                    />\r\n                                </Grid>\r\n                            ))\r\n                        }\r\n\r\n                        <Grid item xs={6}>\r\n\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    { editable &&\r\n                        <Grid className={classes.buttonGrid} container>\r\n                                <Grid item md={9} xs={false}></Grid>\r\n                                <Grid item md={1} xs={6}>\r\n                                    <Button onClick={this.handleCancel}>Cancel</Button>\r\n\r\n                                </Grid>\r\n\r\n                                <Grid item md={2} xs={6}>\r\n                                    <Button\r\n                                        onClick={this.handleConfirm}\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={!infoHasChanged || !formIsValid}\r\n                                    >\r\n                                        Confirm\r\n                                    </Button>\r\n                                </Grid>\r\n                        </Grid>\r\n                    }\r\n\r\n                </Paper>\r\n\r\n                <Paper className={classes.accountPaper} elevation={6}>\r\n                    <Typography variant='h5' align='left' className={classes.header}>\r\n                        Account\r\n                    </Typography>\r\n                    <Grid container >\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                name='email'\r\n                                label= 'Email'\r\n                                value={this.state.email.value}\r\n                                inputProps={{\r\n                                    readOnly: true\r\n                                }}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                className={classes.textField}\r\n                            />\r\n                            <Tooltip title='Change Email'>\r\n                                <IconButton \r\n                                    color=\"primary\" \r\n                                    disableFocusRipple \r\n                                    disableRipple\r\n                                    onClick={() => showChangeEmailDialog()}\r\n                                >\r\n                                    <Edit/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={12}>                            \r\n                            <TextField\r\n                                name='Password'\r\n                                label= 'Password'\r\n                                value= '********'\r\n                                inputProps={{\r\n                                    readOnly: true\r\n                                }}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                className={classes.textField}\r\n                            />\r\n                            <Tooltip title='Change Password'>\r\n                                <IconButton \r\n                                    color=\"primary\" \r\n                                    disableFocusRipple \r\n                                    disableRipple\r\n                                    onClick={() => showChangePasswordDialog()}\r\n                                >\r\n                                    <Edit/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid>\r\n\r\n\r\n                </Paper>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Profile));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Paper, Typography, Link } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        marginTop: '70px',\r\n        display: 'flex'\r\n    },\r\n\r\n    descriptionPaper: {\r\n        padding: '6vh 6vw',\r\n        margin: '110px 10vw 0px 10vw'\r\n    },\r\n})\r\n\r\nconst DataSubmissionTemp = (props) => {\r\n    const { classes } = props;\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper className={classes.descriptionPaper} elevation={8}>\r\n                <Typography variant='body1'>\r\n                    If you wish to suggest a dataset be added to the database or have some data that you would like added, an overview of our data submission process can be found <Link target='_blank' href='https://cmap.readthedocs.io/en/latest/faq_and_contributing/datasubmission.html'>here</Link>.\r\n                </Typography>\r\n\r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(DataSubmissionTemp);","const number = (value) => {\r\n    if(!value && value !== 0) return null;\r\n    if(isNaN(value) || value === '') return 'Must be a number';\r\n}\r\n\r\nconst validLat = (value) => {\r\n    if(value < -90 || value > 90) return 'Must be -90 to 90';\r\n}\r\n\r\nconst validLon = (value) => {\r\n    if(value < -180 || value > 180) return 'Must be -180 to 180';\r\n}\r\n\r\nconst validTime = (value) => {\r\n    if(!value && value !== 0) return null;\r\n\r\n\r\n    if(/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\\\.[0-9]+)?(Z)?$/.test(value) === false){\r\n        return 'Format must match 2016-04-21T15:22:00'\r\n    }    \r\n}\r\n\r\nconst required = (value) => {\r\n    if(value === null || value === undefined || value === '') return 'Value is required';\r\n}\r\n\r\nconst length = (min, max) => {\r\n    return (value) => {\r\n        if(value < min || value > max) {\r\n            return `Must be ${min} to ${max} characters in length`;\r\n        }\r\n    }\r\n}\r\n\r\nconst positive = (value) => {\r\n    if(value < 0) return 'Cannot be negative';\r\n}\r\n\r\nconst _makes = ['Observation', 'Model', 'Assimilation'];\r\nconst makes = _makes.map(e => e.toLowerCase());\r\nconst makesString = makes.join('\\n');\r\nconst makesSet = new Set(makes);\r\n\r\nconst validMake = (value) => {\r\n    if(value && value !== 0 && !makesSet.has(value.toLowerCase())) {\r\n        return `Make must be one of: \\n${makesString}`;\r\n    }\r\n}\r\n\r\nconst _disciplines = ['Physics', 'Chemistry', 'Biology', 'Biogeochemistry', 'Physics+Biogeochemistry', 'Chemistry+Biology+Biogeochemistry', 'Biosample', 'Biology+BioGeoChemistry+Biogeography', 'Physics+Chemistry', 'Genomics', 'Chemistry+Biogeochemistry'];\r\nconst disciplines = _disciplines.map(e => e.toLowerCase());\r\nconst disciplinesSet = new Set(disciplines);\r\n\r\nconst validDiscipline = (value) => {\r\n    if(value && value !== 0 && !disciplinesSet.has(value.toLowerCase())) {\r\n        return `Must be one of: \\n${disciplines.join('\\n')}`;\r\n    }\r\n}\r\n\r\nconst _sensors = ['Satellite', 'In-Situ', 'Blend', 'Flow Cytometry', 'CTD', 'Underway CTD', 'Optical', 'Float', 'Drifter', 'AUV', 'Bottle', 'Sediment Trap', 'CPR', 'Towfish', 'fluorometer', 'Seaglider'];\r\nconst sensors = _sensors.map(e => e.toLowerCase());\r\nconst sensorsSet = new Set(sensors);\r\n\r\nconst validSensor = (value) => {\r\n    if(value && value !== 0 && !sensorsSet.has(value.toLowerCase())) {\r\n        return `Must be one of: \\n${sensors.join('\\n')}`;\r\n    }\r\n}\r\n\r\nconst codeFriendly = (value) => {\r\n    // TODO identify regex for this\r\n}\r\n\r\nconst binary = (value) => {\r\n    if(!value || value === 1){\r\n        return;\r\n    }\r\n\r\n    else {\r\n        return 'Must be 0, 1, or empty.';\r\n    }\r\n}\r\n\r\nconst validEmail = (value) => {\r\n    if(!(/^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(value))){\r\n        return 'Must be a valid email address'\r\n    }\r\n}\r\n\r\nconst _spatialResolutions = [\r\n    'Irregular',\r\n    '1/2 X 1/2',\r\n    '1/4 X 1/4',\r\n    '1/25 X 1/25',\r\n    '4km X 4km',\r\n    '1/12 X 1/12',\r\n    '70km X 70km',\r\n    '1 X 1',\r\n    '9km X 9km',\r\n    '25km X 25km'\r\n];\r\n\r\nconst spatialResolutions = _spatialResolutions.map(e => e.toLowerCase());\r\nconst spatialResolutionSet = new Set(spatialResolutions);\r\nconst validSpatialResolution = (value) => {\r\n    if(value && value !== 0 && !spatialResolutionSet.has(value.toLowerCase())) {\r\n        return `Must be one of: \\n${spatialResolutions.join('\\n')}`;\r\n    }\r\n}\r\n\r\nconst _temporalResolutions = [\r\n    'Three Minutes',\r\n    'Six Hourly',\r\n    'Daily',\r\n    'Weekly',\r\n    'Monthly',\r\n    'Annual',\r\n    'Irregular',\r\n    'Monthly Climatology',\r\n    'Three Days',\r\n    'Eight Day Running',\r\n    'Eight Days',\r\n    'One Second'\r\n];\r\n\r\nconst temporalResolutions = _temporalResolutions.map(e => e.toLowerCase());\r\nconst temporalResolutionsSet = new Set(temporalResolutions);\r\nconst validTemporalResolution = (value) => {\r\n    if(value && value !== 0 && !temporalResolutionsSet.has(value.toLowerCase())) {\r\n        return `Must be one of: \\n${temporalResolutions.join('\\n')}`;\r\n    }\r\n}\r\n\r\nconst maxDepth = (value) => {\r\n    if(value > 11000) {\r\n        return 'Cannot be greater than 11000';\r\n    }\r\n}\r\n\r\nconst releaseDate = (value) => {\r\n    if(!(/^([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))$/.test(value))){\r\n        return 'Format must match 2018-06-20'\r\n    }\r\n}\r\n\r\nexport default {\r\n    time: [required, validTime],\r\n    lat: [number, required, validLat],\r\n    lon: [number, required, validLon],\r\n    depth: [number, positive, maxDepth],\r\n\r\n    dataset_short_name: [codeFriendly, length(1, 50)],\r\n    dataset_long_name: [length(1, 130)],\r\n    dataset_version: [length(0, 50)],\r\n    dataset_release_date: [releaseDate],\r\n    dataset_make: [required, validMake],\r\n    dataset_source: [length(1, 50)],\r\n    dataset_distributor: [length(0, 100)],\r\n    dataset_acknowledgement: [length(1, 300)],\r\n    dataset_history: [length(0, 500)],\r\n    dataset_description: [length(50, 10000)],\r\n    dataset_references: [length(1, 500)],\r\n    climatology: [binary],\r\n    contact_email: [validEmail],\r\n    'official_cruise_name(s)': [],\r\n\r\n    var_short_name: [codeFriendly, length(1, 50)],\r\n    var_long_name: [length(1, 200)],\r\n    var_sensor: [required, validSensor],\r\n    var_unit: [required],\r\n    var_spatial_res: [required, validSpatialResolution],\r\n    var_temporal_res: [required, validTemporalResolution],\r\n    var_discipline: [required, validDiscipline],\r\n    visualize: [binary],\r\n    var_keywords: []\r\n}\r\n\r\n\r\n// match data column names to data_metadata\r\n// there should be at least 1 additional column \r\n// check resolutions against time and lat/lon increments\r\n// keyword validation\r\n","import audits from './audits';\r\n\r\nexport default (value, col) => {\r\n    let cellAudit = [];\r\n    let auditFuncs = audits[col];\r\n\r\n    if(auditFuncs){\r\n        auditFuncs.forEach(func => {\r\n            let result = func(value);\r\n\r\n            if(result) {\r\n                cellAudit.push(result);\r\n            }\r\n        });\r\n    }\r\n\r\n    return cellAudit;\r\n}","import audits from './audits';\r\nimport checkCell from './checkCell';\r\n\r\nconst fixedVariables = new Set(['time', 'lat', 'lon', 'depth']);\r\n\r\nconst auditWorkbook = ({ data, dataset_meta_data, vars_meta_data }) => {\r\n    // Messages that don't pertain to a particular cell\r\n\r\n    // check for correct sheets\r\n    // check for mismatch between vars_meta_data short names and data column headers\r\n    \r\n    // check date format?\r\n\r\n    let additionalVariables = Object.keys(data[0]).filter(key => !fixedVariables.has(key));\r\n    let metadataVariables = new Set(vars_meta_data.map(e => e.var_short_name));\r\n}\r\n\r\nconst auditRows = (rows) => {\r\n    //\r\n    let audit = [];\r\n\r\n    rows.forEach((row, i) => {\r\n        let rowAudit = {};\r\n\r\n        let columns = Object.keys(row);\r\n\r\n        columns.forEach((col) => {\r\n            let cellAudit = checkCell(row[col], col);\r\n\r\n            if(cellAudit.length){\r\n                rowAudit[col] = cellAudit;\r\n            }\r\n        });\r\n\r\n        if(Object.keys(rowAudit).length){\r\n            audit[i] = rowAudit;\r\n        }\r\n    });\r\n\r\n    return audit;\r\n}\r\n\r\n// Takes a workbook and returns an audit report\r\nexport default (state) => {\r\n    const { data, dataset_meta_data, vars_meta_data } = state;\r\n\r\n    let report = {\r\n        workbook: auditWorkbook(state),\r\n        data: auditRows(data),\r\n        dataset_meta_data: auditRows(dataset_meta_data),\r\n        vars_meta_data: auditRows(vars_meta_data),\r\n    };\r\n\r\n    return report;\r\n}","import React from 'react';\r\n\r\nimport checkCell from '../../Utility/DataSubmission/checkCell';\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nclass DSCellEditor extends React.Component {\r\n    constructor(props){\r\n        const { auditReport, sheet } = props.context;\r\n        const { rowIndex } = props;\r\n        const { colId } = props.column;\r\n        super(props);\r\n        this.inputRef = React.createRef();\r\n        this.parseValue = props.parseValue;\r\n        this.state = {\r\n            value: props.value || '',\r\n            errors: auditReport[sheet][rowIndex] && auditReport[sheet][rowIndex][colId] ? auditReport[sheet][rowIndex][colId] : [],\r\n            attached: false\r\n        }\r\n    }\r\n\r\n    getValue(){\r\n        return this.parseValue(this.state.value);\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { value } = e.target;\r\n\r\n        let errors = checkCell(value, this.props.column.colId);\r\n        this.setState({...this.state, value, errors});\r\n    }\r\n\r\n    afterGuiAttached = () => {\r\n        this.inputRef.current.focus();\r\n        this.inputRef.current.select();\r\n        setTimeout(() => {\r\n            this.setState({...this.state, attached: true})\r\n        }, 20);\r\n    }\r\n\r\n    handleClickAway = () => {\r\n        if(this.state.attached){\r\n            this.props.stopEditing();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n\r\n        return (\r\n            <div\r\n                style={{\r\n                    maxWidth: '175px',\r\n                    margin: '0 auto'\r\n                }}\r\n            >\r\n                <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                    <div>\r\n                        <input\r\n                            spellCheck='false'\r\n                            ref={this.inputRef}\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange}\r\n                            style={{\r\n                                backgroundColor: 'transparent',\r\n                                color: 'white',\r\n                                height: '28px',\r\n                                border: `1px solid black`,\r\n                                borderRadius: '2px',\r\n                                padding: '2px 6px',\r\n                                maxWidth: '100%'\r\n                            }}\r\n                        />\r\n                        {\r\n                            errors.map((err, i) => {\r\n                                return (\r\n                                    <p \r\n                                        key={i}\r\n                                        style={{\r\n                                            lineHeight: 1.2,\r\n                                            margin: '6px auto',\r\n                                            textAlign: 'left',\r\n                                            maxWidth: '100%',\r\n                                            whiteSpace: 'pre-wrap'\r\n                                        }}\r\n                                    >\r\n                                        {err}\r\n                                    </p>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DSCellEditor;","import React from 'react';\r\n\r\nimport { Typography, Paper, IconButton } from '@material-ui/core';\r\nimport { ChevronLeft, ChevronRight } from \"@material-ui/icons\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n\r\n    errorStepperPaper: {\r\n        width: '80vw',\r\n        margin: '0 auto 24px auto'\r\n    }\r\n\r\n})\r\n\r\nconst ErrorNavigator = (props) => {\r\n    const { classes, errors, errorIndex } = props;\r\n\r\n    return (\r\n        <Paper className={classes.errorStepperPaper}>\r\n            <Typography>\r\n                {errors[errorIndex] && errors[errorIndex].message}\r\n            </Typography>\r\n\r\n            <IconButton \r\n                onClick={props.stepBackward}\r\n                size='small' \r\n                disabled={Boolean(errorIndex === 0)}\r\n            >\r\n                <ChevronLeft />\r\n            </IconButton>\r\n\r\n            <IconButton \r\n                onClick={props.stepForward} \r\n                size='small' \r\n                disabled={Boolean(errorIndex === errors.length - 1)}\r\n            >\r\n                <ChevronRight/>\r\n            </IconButton>\r\n\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ErrorNavigator);","import React from 'react';\r\n\r\nimport checkCell from '../../Utility/DataSubmission/checkCell';\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nclass DSCellEditor extends React.Component {\r\n    constructor(props){\r\n        const { auditReport, sheet } = props.context;\r\n        const { rowIndex } = props;\r\n        const { colId } = props.column;\r\n        super(props);\r\n        this.inputRef = React.createRef();\r\n        this.parseValue = props.parseValue;\r\n        this.state = {\r\n            value: props.value || '',\r\n            errors: auditReport[sheet][rowIndex] && auditReport[sheet][rowIndex][colId] ? auditReport[sheet][rowIndex][colId] : [],\r\n            attached: false\r\n        }\r\n    }\r\n\r\n    getValue(){\r\n        return this.parseValue(this.state.value);\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { value } = e.target;\r\n\r\n        let errors = checkCell(value, this.props.column.colId);\r\n        this.setState({...this.state, value, errors});\r\n    }\r\n\r\n    afterGuiAttached = () => {\r\n        this.inputRef.current.focus();\r\n        this.inputRef.current.select();\r\n        setTimeout(() => {\r\n            this.setState({...this.state, attached: true})\r\n        }, 20);\r\n    }\r\n\r\n    handleClickAway = () => {\r\n        if(this.state.attached){\r\n            this.props.stopEditing();\r\n        }\r\n    }\r\n\r\n    isPopup = () => true;\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n        const { column, context } = this.props;\r\n\r\n        const rowCount = context.textAreaLookup[column.colId];\r\n\r\n        return (\r\n            <div\r\n                style={{\r\n                    margin: '0 auto',\r\n                    width: 'auto',\r\n                    padding: '12px',\r\n                    height: 'auto'\r\n                }}\r\n            >\r\n                <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                    <div>\r\n                        <textarea\r\n                            rows={rowCount}\r\n                            cols='70'\r\n                            spellCheck='false'\r\n                            ref={this.inputRef}\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange}\r\n                            style={{\r\n                                backgroundColor: 'transparent',\r\n                                color: 'white',\r\n                                // height: '28px',\r\n                                border: `1px solid ${colors.primary}`,\r\n                                borderRadius: '2px',\r\n                                padding: '2px 6px',\r\n                                // maxWidth: '100%'\r\n                            }}\r\n                        />\r\n                        {\r\n                            errors.map((err, i) => {\r\n                                return (\r\n                                    <p \r\n                                        key={i}\r\n                                        style={{\r\n                                            lineHeight: 1.2,\r\n                                            margin: '6px auto',\r\n                                            textAlign: 'left',\r\n                                            maxWidth: '100%',\r\n                                            whiteSpace: 'pre-wrap'\r\n                                        }}\r\n                                    >\r\n                                        {err}\r\n                                    </p>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DSCellEditor;","import React from 'react';\r\n\r\nimport checkCell from '../../Utility/DataSubmission/checkCell';\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nclass DSCellEditor extends React.Component {\r\n    constructor(props){\r\n        const { auditReport, sheet } = props.context;\r\n        const { rowIndex } = props;\r\n        const { colId } = props.column;\r\n        super(props);\r\n        this.inputRef = React.createRef();\r\n        this.parseValue = props.parseValue;\r\n        this.state = {\r\n            value: props.value || '',\r\n            errors: auditReport[sheet][rowIndex] && auditReport[sheet][rowIndex][colId] ? auditReport[sheet][rowIndex][colId] : [],\r\n            attached: false\r\n        }\r\n    }\r\n\r\n    getValue(){\r\n        return this.parseValue(this.state.value);\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { value } = e.target;\r\n\r\n        let errors = checkCell(value, this.props.column.colId);\r\n        this.setState({...this.state, value, errors});\r\n    }\r\n\r\n    afterGuiAttached = () => {\r\n        this.inputRef.current.focus();\r\n        setTimeout(() => {\r\n            this.setState({...this.state, attached: true})\r\n        }, 20);\r\n    }\r\n\r\n    handleClickAway = () => {\r\n        if(this.state.attached){\r\n            this.props.stopEditing();\r\n        }\r\n    }\r\n\r\n    isPopup = () => true;\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n        const { column, context } = this.props;\r\n\r\n        const opts = context.selectOptions[column.colId].map( (e, i) => (\r\n            <option\r\n                key={i} \r\n                value={e}\r\n                className='ds-cell-editor-select-option'\r\n                style={{\r\n                    backgroundColor: '#184562',\r\n                }}\r\n            >\r\n                {e}\r\n            </option>\r\n        ));\r\n\r\n        opts.push(\r\n            <option key={opts.length} disabled style={{display: 'none'}} value=''></option>\r\n        )\r\n\r\n        return (\r\n            <div\r\n                style={{\r\n                    margin: '0 auto',\r\n                    width: 'auto',\r\n                    padding: '12px',\r\n                    height: 'auto',\r\n                    maxWidth: '300px'\r\n                }}\r\n            >\r\n                <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                    <div>\r\n                        <select\r\n                            ref={this.inputRef}\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange}\r\n                            style={{\r\n                                backgroundColor: 'transparent',\r\n                                color: 'white',\r\n                                // height: '28px',\r\n                                border: `1px solid ${colors.primary}`,\r\n                                borderRadius: '2px',\r\n                                padding: '2px 6px',\r\n                                // maxWidth: '100%'\r\n                            }}\r\n                        >\r\n                            {opts}\r\n                        </select>\r\n                        {\r\n                            errors.map((err, i) => {\r\n                                return (\r\n                                    <p \r\n                                        key={i}\r\n                                        style={{\r\n                                            lineHeight: 1.2,\r\n                                            margin: '6px auto',\r\n                                            textAlign: 'left',\r\n                                            maxWidth: '100%',\r\n                                            whiteSpace: 'pre-wrap'\r\n                                        }}\r\n                                    >\r\n                                        {err}\r\n                                    </p>\r\n                                )\r\n                            })\r\n                        }\r\n\r\n                        <p \r\n                            style={{\r\n                                lineHeight: 1.2,\r\n                                margin: '10px auto',\r\n                                textAlign: 'left',\r\n                                maxWidth: '100%',\r\n                                whiteSpace: 'pre-wrap'\r\n                            }}\r\n                        >\r\n                            If you don't see the correct value on this list please contact us at: {'\\n'}<a style={{color:colors.primary, textDecoration: 'none'}} href=\"mailto:cmap-data-submission@uw.edu\">cmap-data-submission@uw.edu</a>.\r\n                        </p>\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DSCellEditor;","import React from 'react';\r\n\r\nimport { AgGridReact } from 'ag-grid-react';\r\n\r\nimport DSCellEditor from './DSCellEditor';\r\nimport DSCellEditorTextArea from './DSCellEditorTextArea';\r\nimport DSCellEditorSelect from './DSCellEditorSelect';\r\n\r\nconst numberParser = ({newValue}) => {\r\n    return !newValue && newValue !== 0 ? null : Number(newValue);\r\n}\r\n\r\nconst columnDefs = {\r\n    data: [\r\n        {\r\n            headerName: 'Time',\r\n            field: 'time'\r\n        },\r\n    \r\n        {\r\n            headerName: 'Latitude',\r\n            field: 'lat',\r\n            valueParser: numberParser\r\n        },\r\n    \r\n        {\r\n            headerName: 'Longitude',\r\n            field: 'lon',\r\n            valueParser: numberParser\r\n        },\r\n    \r\n        {\r\n            headerName: 'Depth',\r\n            field: 'depth',\r\n            valueParser: numberParser\r\n        }\r\n    ],\r\n\r\n    dataset_meta_data: [\r\n        {\r\n            headerName: 'Short Name',\r\n            field: 'dataset_short_name',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_short_name',\r\n        },\r\n\r\n        {\r\n            headerName: 'Long Name',\r\n            field: 'dataset_long_name',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_long_name',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Version',\r\n            field: 'dataset_version',\r\n            autoHeight: true\r\n        },\r\n        \r\n\r\n        {\r\n            headerName: 'Release Date',\r\n            field: 'dataset_release_date',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'Make',\r\n            field: 'dataset_make',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Source',\r\n            field: 'dataset_source',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'Official Cruise Names',\r\n            field: 'official_cruise_name(s)',\r\n            autoHeight: true,\r\n            tooltipField: 'official_cruise_name(s)',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Distributor',\r\n            field: 'dataset_distributor',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'acknowledgement',\r\n            field: 'dataset_acknowledgement',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_acknowledgement',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Contact Email',\r\n            field: 'contact_email',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'History',\r\n            field: 'dataset_history',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_history',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },      \r\n\r\n        {\r\n            headerName: 'Description',\r\n            field: 'dataset_description',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_description',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'References',\r\n            field: 'dataset_references',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_references',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'climatology',\r\n            field: 'climatology',\r\n            valueParser: numberParser\r\n        },\r\n    ],\r\n\r\n    vars_meta_data: [\r\n        {\r\n            headerName: 'Short Name',\r\n            field: 'var_short_name',\r\n            autoHeight: true,\r\n            tooltipField: 'var_short_name'\r\n        },\r\n\r\n        {\r\n            headerName: 'Long Name',\r\n            field: 'var_long_name',\r\n            autoHeight: true,\r\n            tooltipField: 'var_long_name',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Sensor',\r\n            field: 'var_sensor',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Unit',\r\n            field: 'var_unit',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'Spatial Resolution',\r\n            field: 'var_spatial_res',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Temporal Resolution',\r\n            field: 'var_temporal_res',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Discipline',\r\n            field: 'var_discipline',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Visualize',\r\n            field: 'visualize',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'Keywords',\r\n            field: 'var_keywords',\r\n            autoHeight: true,\r\n            tooltipField: 'var_keywords',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Comment',\r\n            field: 'var_comment',\r\n            tooltipField: 'var_comment',\r\n            autoHeight: true,\r\n            tooltipField: 'var_comment',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n    ]\r\n}\r\n\r\nclass ValidationGrid extends React.PureComponent {\r\n\r\n    render = () => {\r\n        const { gridContext } = this.props;\r\n        \r\n        return (\r\n            <AgGridReact\r\n                singleClickEdit={true}\r\n                onModelUpdated={this.props.onModelUpdated}\r\n                columnDefs={columnDefs[gridContext.sheet]}\r\n                defaultColDef={this.props.defaultColumnDef}\r\n                rowData={this.props.rowData}\r\n                onGridReady={this.props.onGridReady}\r\n                // onGridSizeChanged={this.props.onGridSizeChanged}\r\n                suppressDragLeaveHidesColumns={true}\r\n                suppressMovableColumns={true}\r\n                enableCellTextSelection={true}\r\n                suppressContextMenu={true}\r\n                onCellValueChanged={this.props.handleCellValueChanged}\r\n                context={gridContext}\r\n                frameworkComponents={{\r\n                    DSCellEditor,\r\n                    DSCellEditorSelect,\r\n                    DSCellEditorTextArea\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nexport default ValidationGrid;","export default (data, workbook) => {\r\n\r\n    let sample = data[0].time;\r\n\r\n    // Test sample row for correct format\r\n    if(/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\\\.[0-9]+)?(Z)?$/.test(sample)){\r\n        return data;\r\n    }\r\n\r\n    let is1904 = !!(((workbook.Workbook||{}).WBProps||{}).date1904);\r\n\r\n    let type = typeof sample;\r\n\r\n    try {\r\n        if(type === 'number') {\r\n            if(is1904){\r\n                data.forEach(e => {\r\n                    e.time = new Date(((e.time - (25567))*86400*1000) + 1000 * 60 * 60 * 24 * 365 * 4).toISOString().slice(0, -5);\r\n                })\r\n            }\r\n    \r\n            else {\r\n                data.forEach(e => {\r\n                    e.time = new Date(((e.time - (25567))*86400*1000)).toISOString().slice(0, -5);\r\n                })\r\n            }\r\n    \r\n        }\r\n    \r\n        else {\r\n            data.forEach(e => {\r\n                e.time = new Date(e.time).toISOString().slice(0, -5);\r\n            })\r\n        }\r\n    }\r\n\r\n    catch{\r\n        return data;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\n// Format must match 2016-04-21T15:22:00\r\n\r\n// const localDateToString = (date) => {\r\n//     let year = date.getFullYear();\r\n//     let month = date.getMonth() + 1;\r\n//     let day = date.getDate()\r\n\r\n//     let nYear = year.toString();\r\n//     let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n//     let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n//     return nYear + '-' + nMonth + '-' + nDay;\r\n// }\r\n\r\n// export default localDateToString;","export default (metadata, workbook) => {\r\n    let sample = metadata[0];\r\n    let type = typeof sample.dataset_release_date;\r\n\r\n    let is1904 = !!(((workbook.Workbook||{}).WBProps||{}).date1904);\r\n\r\n    try {\r\n        if(type === 'number') {\r\n            if(is1904){\r\n                sample.dataset_release_date = new Date(((sample.dataset_release_date - (25567))*86400*1000) + 1000 * 60 * 60 * 24 * 365 * 4).toISOString().slice(0, -14);\r\n            }\r\n    \r\n            else {\r\n                sample.dataset_release_date = new Date(((sample.dataset_release_date - (25567))*86400*1000)).toISOString().slice(0, -14);\r\n            }    \r\n        }\r\n    \r\n        else {\r\n            sample.dataset_release_date = new Date(sample.dataset_release_date).toISOString().slice(0, -14);\r\n        }\r\n    }\r\n\r\n    catch{\r\n        return metadata;\r\n    }\r\n\r\n    let collapsedRow = {...sample};\r\n\r\n    for(let i = 1; i < metadata.length; i++){\r\n        Object.keys(sample).forEach(e => {\r\n            if(metadata[i][e]){\r\n                collapsedRow[e] += '\\n\\n';\r\n                collapsedRow[e] += metadata[i][e];\r\n            }\r\n        });\r\n    }\r\n\r\n    return [collapsedRow];\r\n}\r\n\r\n// Format must match 2016-04-21T15:22:00\r\n\r\n// const localDateToString = (date) => {\r\n//     let year = date.getFullYear();\r\n//     let month = date.getMonth() + 1;\r\n//     let day = date.getDate()\r\n\r\n//     let nYear = year.toString();\r\n//     let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n//     let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n//     return nYear + '-' + nMonth + '-' + nDay;\r\n// }\r\n\r\n// export default localDateToString;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport XLSX from 'xlsx';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography, Paper, Button, Link, IconButton, Tooltip } from '@material-ui/core';\r\nimport { ChevronLeft, ChevronRight } from \"@material-ui/icons\";\r\n\r\nimport { Close } from '@material-ui/icons';\r\n\r\nimport { uploadSubmission, retrieveMostRecentFile, storeSubmissionFile } from '../../Redux/actions/dataSubmission';\r\nimport { snackbarOpen, setLoadingMessage } from '../../Redux/actions/ui';\r\n\r\nimport dataSubmissionAudit from '../../Utility/DataSubmission/dataSubmissionAudit';\r\nimport ErrorNavigator from './ErrorNavigator';\r\n\r\nimport ValidationGrid from './ValidationGrid';\r\n\r\nimport checkCell from '../../Utility/DataSubmission/checkCell';\r\nimport formatDataSheet from '../../Utility/DataSubmission/formatDataSheet';\r\nimport formatDatasetMetadataSheet from '../../Utility/DataSubmission/formatDatasetMetadataSheet';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    submissionFile: state.submissionFile\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarOpen,\r\n    uploadSubmission,\r\n    setLoadingMessage,\r\n    retrieveMostRecentFile,\r\n    storeSubmissionFile\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '40vw',\r\n        // height: '30vh',\r\n        margin:'40px auto'\r\n    },\r\n\r\n    dragTarget: {\r\n        border: '1px solid red',\r\n        width: '100px',\r\n        height: '100px',\r\n        margin:'40px auto'\r\n    },\r\n\r\n    input: {\r\n        display: 'none'\r\n    },\r\n\r\n    button: {\r\n        color: 'white',\r\n        textTransform: 'none',\r\n        display: 'block',\r\n        maxWidth: '100px',\r\n        margin: '12px auto 0px auto'\r\n    },\r\n\r\n    needHelp: {\r\n        float: 'left',\r\n        color: 'white',\r\n        margin: '12px 0 0 12px',\r\n        letterSpacing: 'normal'\r\n    },\r\n\r\n    needHelpLink: {\r\n        letterSpacing: 'normal',\r\n        color: theme.palette.primary.main\r\n    },\r\n\r\n    fileSelectPaper: {\r\n        margin: '80px auto 24px auto',\r\n        maxWidth: '50vw',\r\n        padding: '16px',        \r\n        padding: '12px'\r\n    },\r\n\r\n    addBorder: {\r\n        border: `1px dashed ${theme.palette.primary.main}`\r\n    },\r\n\r\n    fileName: {\r\n        color: theme.palette.primary.main,\r\n        letterSpacing: 'normal'\r\n    },\r\n\r\n    clearFileIcon: {\r\n        float: 'right',\r\n        marginTop: '-12px',\r\n        marginRight: '-8px'\r\n    },\r\n\r\n    dataTable: {\r\n        maxWidth: '80vw',\r\n        margin: '0 auto 24px auto'\r\n    },\r\n\r\n    tableWrapper: {\r\n        maxWidth: '80vw',\r\n        margin: '24px auto'\r\n    },\r\n\r\n    submitButton: {\r\n        color: 'white'\r\n    },\r\n\r\n    tabPaper: {\r\n        maxWidth: '80vw',\r\n        height: '80vh',\r\n        margin: '0 auto 24px auto'\r\n    },\r\n\r\n    errorStepperPaper: {\r\n        width: '80vw',\r\n        margin: '0 auto 24px auto'\r\n    },\r\n\r\n    currentlyViewingTypography: {\r\n        letterSpacing: 'normal'\r\n    },\r\n\r\n    ilb: {\r\n        display: 'inline-block'\r\n    },\r\n\r\n    findNextButton: {\r\n        textTransform: 'none',\r\n        marginBottom: '12px'\r\n    }\r\n\r\n});\r\n\r\nconst textAreaLookup = {\r\n    var_keywords: 4,\r\n    var_comment: 5,\r\n    var_long_name: 3,\r\n    dataset_references: 8,\r\n    dataset_description: 14,\r\n    dataset_acknowledgement: 8,\r\n    'official_cruise_name(s)': 5,\r\n    dataset_long_name: 3,\r\n    dataset_history: 3,\r\n    dataset_distributor: 3\r\n};\r\n\r\nconst selectOptions = {\r\n    var_temporal_res: [\r\n        'Three Minutes',\r\n        'Six Hourly',\r\n        'Daily',\r\n        'Weekly',\r\n        'Monthly',\r\n        'Annual',\r\n        'Irregular',\r\n        'Monthly Climatology',\r\n        'Three Days',\r\n        'Eight Day Running',\r\n        'Eight Days',\r\n        'One Second'\r\n    ],\r\n\r\n    var_discipline: [\r\n        'Physics', \r\n        'Chemistry', \r\n        'Biology', \r\n        'Biogeochemistry', \r\n        'Physics+Biogeochemistry', \r\n        'Chemistry+Biology+Biogeochemistry', \r\n        'Biosample', \r\n        'Biology+BioGeoChemistry+Biogeography', \r\n        'Physics+Chemistry', \r\n        'Genomics', \r\n        'Chemistry+Biogeochemistry'\r\n    ],\r\n\r\n    var_sensor: [\r\n        'Satellite', \r\n        'In-Situ', \r\n        'Blend', \r\n        'Flow Cytometry', \r\n        'CTD', \r\n        'Underway CTD', \r\n        'Optical', \r\n        'Float', \r\n        'Drifter', \r\n        'AUV', \r\n        'Bottle', \r\n        'Sediment Trap', \r\n        'CPR', \r\n        'Towfish', \r\n        'fluorometer', \r\n        'Seaglider'\r\n    ],\r\n\r\n    var_spatial_res: [\r\n        'Irregular',\r\n        '1/2 X 1/2',\r\n        '1/4 X 1/4',\r\n        '1/25 X 1/25',\r\n        '4km X 4km',\r\n        '1/12 X 1/12',\r\n        '70km X 70km',\r\n        '1 X 1',\r\n        '9km X 9km',\r\n        '25km X 25km'\r\n    ],\r\n\r\n    dataset_make: [\r\n        'Observation', \r\n        'Model', \r\n        'Assimilation'\r\n    ]\r\n    \r\n};\r\n\r\nconst validationSteps = [\r\n    {\r\n        // before selecting file?\r\n    },\r\n\r\n    {\r\n        label: 'Data',\r\n        sheet: 'data'\r\n    },\r\n\r\n    {\r\n        label: 'Dataset Metadata',\r\n        sheet: 'dataset_meta_data'\r\n    },\r\n\r\n    {\r\n        label: 'Variable Metadata',\r\n        sheet: 'vars_meta_data'\r\n    },\r\n]\r\n\r\nclass ValidationTool extends React.Component {\r\n\r\n    checkCellStyle = (params) => {\r\n        let row = params.node.childIndex;\r\n        let colId = params.column.colId; \r\n        let { sheet } = params.context;\r\n\r\n        let styles = {\r\n            //TODO fix view of long strings as below but better\r\n            // whiteSpace: 'pre-wrap !important',\r\n            // paddingLeft: '10px',\r\n            // paddingRight: '10px',\r\n            // overflow: 'visible'\r\n        };\r\n        \r\n        if(this.state.auditReport && this.state.auditReport[sheet] && this.state.auditReport[sheet][row] && this.state.auditReport[sheet][row][colId]){\r\n            styles.boxShadow = 'inset 0 0 3px 2px rgba(255, 0, 0, .5)'\r\n        }\r\n\r\n        return styles;\r\n    }\r\n\r\n    state = {\r\n        validationStep: 0,\r\n        file: null,\r\n        data: null,\r\n        dataset_meta_data: null,\r\n        vars_meta_data: null,\r\n        errorIndex: 0,\r\n        auditReport: null,\r\n        defaultColumnDef: {\r\n            menuTabs: [],\r\n            resizable: true,\r\n            editable: true,\r\n            cellStyle: this.checkCellStyle,\r\n            cellEditor: 'DSCellEditor',\r\n            width: 270\r\n        }\r\n    }\r\n\r\n    handleDragOver = (e) => {\r\n        e.preventDefault();\r\n    }\r\n\r\n    handleResetState = () => {\r\n        this.props.storeSubmissionFile(null);\r\n        this.props.history.push({ pathname: '/datasubmission/validationtool', query: {} });\r\n        this.setState({\r\n            ...this.state,\r\n            data: null,\r\n            dataset_meta_data: null,\r\n            vars_meta_data: null,\r\n            errorIndex: 0\r\n        });\r\n        //TODO track first and last row ?\r\n    }\r\n\r\n    handleChangeValidationStep = (validationStep) => {\r\n        this.setState({...this.state, validationStep}, this.gridApi.sizeColumnsToFit());\r\n    }\r\n    \r\n    handleCellValueChanged = ({rowIndex, newValue, column, node, context}) => {\r\n        let { sheet } = context;\r\n\r\n        let newAudit = checkCell(newValue, column.colId);\r\n        \r\n        let auditReport = {...this.state.auditReport};\r\n\r\n        if(!auditReport[sheet][rowIndex]) auditReport[sheet][rowIndex] = {};\r\n\r\n        auditReport[sheet] = [...this.state.auditReport[sheet]];\r\n\r\n        if(newAudit.length){\r\n            auditReport[sheet][rowIndex][column.colId] = newAudit\r\n        } else delete auditReport[sheet][rowIndex][column.colId];\r\n\r\n        if(!Object.keys(auditReport[sheet][rowIndex]).length) {\r\n            auditReport[sheet][rowIndex] = null;\r\n        }\r\n\r\n        let updated = [...this.state[sheet].slice(0, rowIndex), node.data, ...this.state[sheet].slice(rowIndex + 1)];\r\n        this.setState({...this.state, [sheet]: updated, auditReport}, () => {\r\n            this.gridApi.redrawRows();\r\n        });\r\n    }\r\n\r\n    handleReadFile = (file) => {\r\n        var reader = new FileReader();\r\n\r\n        reader.onload = (file) => {\r\n            var readFile = new Uint8Array(file.target.result);\r\n            var workbook = XLSX.read(readFile, {type: 'array'});\r\n            \r\n            if(!workbook.Sheets['data']){\r\n                this.props.snackbarOpen('Unable to parse file. Missing sheet \"data\"');\r\n                this.handleResetState();\r\n            } \r\n            \r\n            else if (!workbook.Sheets['dataset_meta_data']) {\r\n                this.props.snackbarOpen('Unable to parse file. Missing sheet \"dataset_meta_data\"');\r\n                this.handleResetState();\r\n            } \r\n            \r\n            else if(!workbook.Sheets['dataset_meta_data']){\r\n                this.props.snackbarOpen('Unable to parse file. Missing sheet \"dataset_meta_data\"');\r\n                this.handleResetState();\r\n            }\r\n\r\n            else {\r\n                let _data = XLSX.utils.sheet_to_json(workbook.Sheets['data'], {defval: null});\r\n                let data = formatDataSheet(_data, workbook);\r\n\r\n                let _dataset_meta_data = XLSX.utils.sheet_to_json(workbook.Sheets['dataset_meta_data'], {defval: null});\r\n                let dataset_meta_data = formatDatasetMetadataSheet(_dataset_meta_data, workbook);\r\n\r\n                let vars_meta_data = XLSX.utils.sheet_to_json(workbook.Sheets['vars_meta_data'], {defval: null});\r\n\r\n                var auditReport = dataSubmissionAudit({data, dataset_meta_data, vars_meta_data});\r\n\r\n                this.setState({...this.state, data, dataset_meta_data, vars_meta_data, auditReport, validationStep: 1});\r\n            }\r\n        }\r\n\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => this.props.setLoadingMessage(''));\r\n        }, 50)\r\n\r\n        reader.readAsArrayBuffer(file);        \r\n    }\r\n\r\n    handleDrop = (e) => {\r\n        e.preventDefault();        \r\n        var file = e.dataTransfer.items[0].getAsFile();\r\n        this.props.setLoadingMessage('Reading Workbook');\r\n        this.props.storeSubmissionFile(file);\r\n    }\r\n\r\n    handleFileSelect = (e) => {\r\n        var file = e.target.files[0];\r\n        this.props.setLoadingMessage('Reading Workbook');\r\n        this.props.storeSubmissionFile(file);\r\n    }\r\n\r\n    handleClearState = () => {\r\n        this.setState({})\r\n    }\r\n\r\n    handleUploadSubmission = () => {\r\n        let workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.data), 'data');\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.dataset_meta_data), 'dataset_meta_data');\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.vars_meta_data), 'vars_meta_data');\r\n\r\n        let wbArray = XLSX.write(workbook, {bookType:'xlsx', type:'array'});\r\n        let file = new File([wbArray], `${this.state.dataset_meta_data[0].dataset_short_name}.xlsx`);\r\n        this.props.uploadSubmission(file);\r\n    }\r\n\r\n    onGridReady = (params) => {\r\n        this.gridApi = params.api;\r\n        this.columnApi = params.columnApi;\r\n        this.gridApi.sizeColumnsToFit();\r\n    }\r\n\r\n    onModelUpdated = (params) => {\r\n        if(this.gridApi && validationSteps[this.state.validationStep].sheet === 'data'){\r\n            this.gridApi.sizeColumnsToFit();\r\n        }\r\n    }\r\n\r\n    scrollGridTo = (index) => {\r\n        this.gridApi.ensureIndexVisible(index, 'middle')\r\n    }\r\n  \r\n    // onGridSizeChanged = (params) => {\r\n    //   this.gridApi.sizeColumnsToFit();\r\n    // }\r\n\r\n    stepForward = () => {\r\n        let errors = Object.values(this.state.auditReport.data.errors);\r\n        this.setState({...this.state, errorIndex: this.state.errorIndex + 1});\r\n        this.scrollGridTo(errors[this.state.errorIndex + 1].row);\r\n    }\r\n\r\n    stepBackward = () => {\r\n        let errors = Object.values(this.state.auditReport.data.errors);\r\n        this.setState({...this.state, errorIndex: this.state.errorIndex - 1});\r\n        this.scrollGridTo(errors[this.state.errorIndex - 1].row);\r\n    }\r\n\r\n    handleFindNext = () => {\r\n        let lastFocused = this.gridApi.getFocusedCell();\r\n        let { sheet } = validationSteps[this.state.validationStep];\r\n        let { auditReport } = this.state;\r\n        \r\n        let start = lastFocused ? lastFocused.rowIndex : 0;\r\n        let end = start === 0 ? auditReport[sheet].length : start - 1;\r\n\r\n        for(let i = start; i !== end; i++){\r\n            if(auditReport[sheet][i]){\r\n                let keys = Object.keys(auditReport[sheet][i]);\r\n                this.gridApi.ensureColumnVisible(keys[0]);\r\n                this.gridApi.startEditingCell({\r\n                    rowIndex: i,\r\n                    colKey: keys[0]\r\n                })\r\n                return;\r\n            }\r\n\r\n            if(i === auditReport[sheet].length) {\r\n                i = -1;\r\n            }\r\n        }\r\n\r\n        this.props.snackbarOpen(`Found no errors in ${sheet}`);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let submissionID = new URLSearchParams(window.location.search).get('submissionID');\r\n        if(submissionID){\r\n            this.props.retrieveMostRecentFile(submissionID);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n        if(prevProps.submissionFile !== this.props.submissionFile && this.props.submissionFile !== null){\r\n            this.handleReadFile(this.props.submissionFile);\r\n        }\r\n    }\r\n\r\n    render = () => {\r\n        const { classes } = this.props;\r\n        const { validationStep } = this.state;\r\n\r\n        const sheet = validationSteps[validationStep].sheet;\r\n\r\n        return (\r\n            <React.Fragment>\r\n\r\n                <Typography className={classes.needHelp}>\r\n                    Need help? \r\n                    <Link \r\n                        href='https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx' \r\n                        download='datasetTemplate.xlsx' \r\n                        className={classes.needHelpLink}\r\n                    >\r\n                        &nbsp;Download\r\n                    </Link>\r\n                    &nbsp;a blank template, or view the <Link className={classes.needHelpLink} component={RouterLink} to='/datasubmission/guide'>Data Submission Guide</Link>.\r\n                </Typography>\r\n\r\n                <Paper className={`${classes.fileSelectPaper} ${!this.state.file && classes.addBorder}`} onDragOver={this.handleDragOver} onDrop={this.handleDrop}>\r\n                    {\r\n                        this.props.submissionFile ?\r\n                        <React.Fragment>\r\n                            <IconButton className={classes.clearFileIcon} color=\"inherit\" onClick={this.handleResetState} disableFocusRipple disableRipple>\r\n                                <Close/>\r\n                            </IconButton>\r\n\r\n                            <Typography className={classes.currentlyViewingTypography}>\r\n                                Currently viewing: <span className={classes.fileName}>{this.props.submissionFile.name}</span>\r\n                            </Typography>\r\n\r\n                            <Typography className={classes.currentlyViewingTypography}>\r\n                                {validationSteps[validationStep].label}\r\n                            </Typography>\r\n\r\n                            <Tooltip title='Previous Sheet'>\r\n                                <div className={classes.ilb}>\r\n                                    <IconButton \r\n                                        size='small'\r\n                                        onClick={() => this.handleChangeValidationStep(this.state.validationStep - 1)}\r\n                                        disabled={Boolean(this.state.validationStep <= 1)}\r\n                                    >\r\n                                        <ChevronLeft />\r\n                                    </IconButton>\r\n                                </div>\r\n                            </Tooltip>\r\n\r\n                            <Tooltip title='Next Sheet'>\r\n                                <div className={classes.ilb}>\r\n                                    <IconButton \r\n                                        size='small'\r\n                                        onClick={() => this.handleChangeValidationStep(this.state.validationStep + 1)}\r\n                                        disabled={Boolean(this.state.validationStep >= 3)}\r\n                                    >\r\n                                        <ChevronRight/>\r\n                                    </IconButton>\r\n                                </div>\r\n                            </Tooltip>\r\n                                \r\n                        </React.Fragment>\r\n\r\n                        :\r\n\r\n                        <React.Fragment>\r\n                            <Typography variant='h5'>\r\n                                To begin drag or \r\n\r\n                                <label htmlFor=\"select-file-input\">\r\n                                    <Button variant='contained' color=\"primary\" component=\"span\" className={classes.button}>\r\n                                        Select File\r\n                                    </Button>\r\n                                </label>                                \r\n                            </Typography>\r\n\r\n                            <input\r\n                                onChange={this.handleFileSelect}\r\n                                className={classes.input}\r\n                                accept='.xlsx'\r\n                                id=\"select-file-input\"\r\n                                type=\"file\"\r\n                            />\r\n                        </React.Fragment>\r\n                    }\r\n                </Paper>\r\n\r\n                {/* { Boolean(auditReport) && */}\r\n                {\r\n                    Boolean(this.state.data) &&\r\n                    <React.Fragment>\r\n                        \r\n                        {/* <ErrorNavigator\r\n                            errors={auditReport.data}\r\n                            errorIndex={errorIndex}\r\n                            stepForward={this.stepForward}\r\n                            stepBackward={this.stepBackward}\r\n                        /> */}\r\n                        <Button \r\n                            variant='contained' \r\n                            onClick={this.handleFindNext} \r\n                            color='primary' \r\n                            className={classes.findNextButton}\r\n                        >\r\n                            Find Errors\r\n                        </Button>\r\n\r\n                        <Paper className={classes.tabPaper + \" ag-theme-material\"}>\r\n\r\n                            {Boolean(this.state.data && this.state.data.length) &&\r\n                                <ValidationGrid\r\n                                    onGridReady={this.onGridReady}\r\n                                    rowData={this.state[sheet]}\r\n                                    defaultColumnDef={this.state.defaultColumnDef}\r\n                                    // onGridSizeChanged={this.onGridSizeChanged}      \r\n                                    handleCellValueChanged={this.handleCellValueChanged}\r\n                                    gridContext={{sheet, auditReport: this.state.auditReport, textAreaLookup, selectOptions}}\r\n                                    onModelUpdated={this.onModelUpdated}\r\n                                />                            \r\n                            }\r\n\r\n                        </Paper>\r\n                    </React.Fragment>\r\n\r\n                }\r\n\r\n                    <Button variant='contained' color='primary' className={classes.submitButton} onClick={this.handleUploadSubmission}>\r\n                        Submit\r\n                    </Button>\r\n\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(ValidationTool)));\r\n\r\n// startEditingCell(params): Starts editing the provided cell. If another cell is editing, the editing will be stopped in that other cell. Parameters are as follows:\r\n// rowIndex: The row index of the row to start editing.\r\n// colKey: The column key of the column to start editing.\r\n// rowPinned: Set to 'top' or 'bottom' to started editing a pinned row.\r\n// keyPress, charPress: The keyPress and charPress that are passed to the cell editor.\r\n\r\n//Undo / redo\r\n// https://www.ag-grid.com/javascript-grid-undo-redo-edits/","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Typography, Paperider, Grid, Paper } from '@material-ui/core';\r\n\r\nimport { ArrowRightAlt } from '@material-ui/icons';\r\n\r\nconst styles = (theme) => ({\r\n    pageHeader: {\r\n        color: 'white',\r\n        marginTop: theme.spacing(4),\r\n        marginBottom: theme.spacing(7),\r\n        fontWeight: 100\r\n    },\r\n\r\n    guideSection: {\r\n        color: 'white',\r\n        width: '65vw',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        marginBottom: theme.spacing(8),\r\n        padding: theme.spacing(2)\r\n    },\r\n\r\n    sectionHeader: {\r\n        color: theme.palette.primary.main\r\n    },\r\n\r\n    sectionContent: {\r\n        marginLeft: theme.spacing(1),\r\n        marginTop: theme.spacing(2)\r\n    },\r\n\r\n    gridItem: {\r\n        padding: theme.spacing(2)\r\n    },\r\n\r\n    getStartedPaper: {\r\n        width: '50vw',\r\n        color: theme.palette.primary.main,\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        marginBottom: theme.spacing(12),\r\n        padding: theme.spacing(2)        \r\n    }\r\n})\r\n\r\nconst SubmissionGuide = (props) => {\r\n    const { classes } = props;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='h3' className={classes.pageHeader}>\r\n                Submitting Data to CMAP\r\n            </Typography>\r\n\r\n            <Paper className={classes.guideSection} elevation={9}>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={7} className={classes.gridItem}>\r\n                        <Typography variant='h5' align='left' className={classes.sectionHeader}>\r\n                            The Simons CMAP Database\r\n                        </Typography>\r\n\r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            Information about our database, its organization and indexing.\r\n                        </Typography>\r\n                        \r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            What does submitting data mean / data ingestion process\r\n                        </Typography>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={5} className={classes.gridItem}>\r\n                        <img alt='What' width='100%' src='/images/catalog/viz_sample.png'/>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n\r\n            <Paper className={classes.guideSection} elevation={9}>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={5} className={classes.gridItem}>\r\n                        <img alt='What' width='100%' src='/images/catalog/viz_sample.png'/>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={7} className={classes.gridItem}>\r\n                        <Typography variant='h5' align='left' className={classes.sectionHeader}>\r\n                            The Simons CMAP Database\r\n                        </Typography>\r\n\r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            Information about our database, its organization and indexing, importance of uniformity.\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n\r\n            <Paper className={classes.guideSection} elevation={9}>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={7} className={classes.gridItem}>\r\n                        <Typography variant='h5' align='left' className={classes.sectionHeader}>\r\n                            The Simons CMAP Database\r\n                        </Typography>\r\n\r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            Information about our database.\r\n                        </Typography>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={5} className={classes.gridItem}>\r\n                        <img alt='What' width='100%' src='/images/catalog/viz_sample.png'/>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(SubmissionGuide);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Grid } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n    commentArea: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        width: '70vw',\r\n        margin: \"0 auto\",\r\n        padding: '12px 16px',\r\n        textAlign: 'left',\r\n        whiteSpace: 'pre-wrap'\r\n    },\r\n\r\n    commenterAndDateTime: {\r\n        marginTop: '16px',\r\n        width: 'calc(70vw + 32px)',\r\n        padding: '4px 0',\r\n        margin: '0 auto',\r\n        textAlign: 'left',\r\n        color: theme.palette.primary.main,\r\n        fontSize: 12\r\n    },\r\n});\r\n\r\nconst Comment = (props) => {\r\n    const { classes } = props;\r\n    const { Comment, Commenter, Comment_Date_Time } = props.comment;\r\n    \r\n    let dateTime = new Date(Comment_Date_Time).toLocaleString();\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className={classes.commenterAndDateTime}>\r\n                {Commenter} at {dateTime}\r\n            </div>\r\n\r\n            <div className={classes.commentArea}>              \r\n                {Comment}\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(Comment);","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { ExpansionPanelDetails, TextField, Button, Typography, Link, Step, StepLabel, Stepper } from '@material-ui/core';\r\n\r\nimport { retrieveSubmissionCommentHistory, addSubmissionComment } from '../../Redux/actions/dataSubmission';\r\n\r\nimport Comment from './Comment';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = (theme) => ({\r\n    panelDetails: {\r\n        display: 'block',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    newCommentDiv: {\r\n        width: '70vw',\r\n        margin: '24px auto 0px auto'\r\n    },\r\n\r\n    newCommentTextField: {\r\n        flexBasis: 'calc(70vw - 200px)',\r\n        marginRight: '16px'\r\n    },\r\n\r\n    postButton: {\r\n        color: 'white',\r\n        marginTop: '16px'\r\n    },\r\n\r\n    setPhaseButton: {\r\n        color: 'white',\r\n        marginLeft: '12px'\r\n    },\r\n\r\n    stepper: {\r\n        borderRadius: '4px',\r\n        margin: '16px 2vw 24px 2vw'\r\n    },\r\n\r\n    newUpload: {\r\n        marginLeft: '2vw'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    submissionCommentHistoryRetrievalState: state.submissionCommentHistoryRetrievalState,\r\n    submissionComments: state.submissionComments\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveSubmissionCommentHistory,\r\n    addSubmissionComment,\r\n};\r\n\r\nconst steps = [\r\n    {\r\n        label: 'Submission'\r\n    },\r\n\r\n    {\r\n        label: 'Admin Approval'\r\n    },\r\n\r\n    {\r\n        label: 'DOI'\r\n    },\r\n\r\n    {\r\n        label: 'Ingestion'\r\n    }\r\n]\r\n\r\nconst UserDashboardPanelDetails = (props) => {\r\n    const { classes, submission } = props;\r\n\r\n    const [ comment, setComment ] = React.useState();\r\n\r\n    let comments = props.submissionComments[submission.Submission_ID];\r\n    let renderComments = Boolean(comments && comments.length);\r\n\r\n    let activeStep;\r\n\r\n    switch(submission.Phase){\r\n        case 'Awaiting admin action':\r\n            activeStep = 1;\r\n            break;\r\n\r\n        case 'Awaiting user update':\r\n            activeStep = 1;\r\n            break;  \r\n\r\n        case 'Awaiting DOI':\r\n            activeStep = 2;\r\n            break;\r\n\r\n        case 'Awaiting ingestion':\r\n            activeStep = 3;\r\n            break;\r\n\r\n        default:\r\n            activeStep = 1;        \r\n    }\r\n\r\n    useEffect(() => {\r\n        props.retrieveSubmissionCommentHistory(submission.Submission_ID);\r\n    }, []);\r\n\r\n    // control this input from redux so we can reset properly, also create connected \"NewComment\" component\r\n    const handlePostComment = () => {\r\n        props.addSubmissionComment(submission.Submission_ID, comment);\r\n        setComment('');\r\n    }\r\n\r\n    return (\r\n        <ExpansionPanelDetails className={classes.panelDetails}>\r\n            <Stepper \r\n                className={classes.stepper} \r\n                alternativeLabel \r\n                activeStep={activeStep}\r\n            >\r\n                {steps.map((item, i) => {\r\n                        return (\r\n                            <Step key={i}>\r\n                                <StepLabel>\r\n                                    {item.label}\r\n                                </StepLabel>\r\n                            </Step>\r\n                        )\r\n                    })} \r\n            </Stepper>\r\n\r\n            <Typography className={classes.newUpload}>\r\n                <Link component={RouterLink} to={`/datasubmission/validationtool?submissionID=${encodeURIComponent(submission.Submission_ID)}`}>Update</Link> this submission.\r\n            </Typography>\r\n\r\n            {\r\n                props.submissionCommentHistoryRetrievalState === states.inProgress ?\r\n                'Loading Comments.....' : \r\n\r\n                <React.Fragment>\r\n                    {\r\n                        renderComments && comments.map((e,i) => (\r\n                            <Comment comment={e} key={i}/>\r\n                        ))\r\n                    }\r\n                </React.Fragment>\r\n            }\r\n            <div className={classes.newCommentDiv}>\r\n                <TextField\r\n                    multiline\r\n                    rows={4}\r\n                    variant='outlined'\r\n                    onChange={(e) => setComment(e.target.value)}\r\n                    value={comment}\r\n                    fullWidth\r\n                />\r\n\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary' \r\n                    className={classes.postButton}\r\n                    onClick={handlePostComment}\r\n                >\r\n                    Post Comment\r\n                </Button>\r\n            </div>\r\n        </ExpansionPanelDetails>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(UserDashboardPanelDetails));","import React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { ExpansionPanel, ExpansionPanelSummary, Typography } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport { retrieveDataSubmissionsByUser } from '../../Redux/actions/dataSubmission';\r\nimport UserDashboardPanelDetails from './UserDashboardPanelDetails';\r\n\r\n// import colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n    dataSubmissions: state.dataSubmissions\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveDataSubmissionsByUser\r\n}\r\n\r\nconst styles = theme => ({\r\n    wrapperDiv: {\r\n        width: '90vw',\r\n        margin: '24px auto'\r\n    },\r\n\r\n    panelSummaryText: {\r\n        flexBasis: '40%',\r\n        textAlign: 'left',\r\n        paddingRight: '20px',\r\n        fontSize: '.8rem'\r\n    },\r\n\r\n})\r\n\r\nconst UserDashboard = (props) => {\r\n\r\n    React.useEffect(() => {\r\n        props.retrieveDataSubmissionsByUser();\r\n    }, [])\r\n\r\n    const [ expandedPanel, setExpandedPanel ] = React.useState(false);\r\n\r\n    const handleExpansion = (i) => {\r\n        if(expandedPanel === i){\r\n            setExpandedPanel(false);\r\n        }\r\n\r\n        else {\r\n            setExpandedPanel(i);\r\n        }\r\n    }\r\n\r\n    const { classes, dataSubmissions } = props;\r\n\r\n    return (\r\n        <div className={classes.wrapperDiv}>\r\n            {dataSubmissions && dataSubmissions.length ?\r\n\r\n            <React.Fragment>                    \r\n                {\r\n                    dataSubmissions.map((e, i) => (\r\n                        <ExpansionPanel \r\n                            expanded={expandedPanel === i}\r\n                            onChange={() => handleExpansion(i)} \r\n                            key={i}\r\n                            TransitionProps={{ unmountOnExit: true }}\r\n                        >\r\n                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                \r\n                                <Typography noWrap className={classes.panelSummaryText}>\r\n                                    {e.Dataset}\r\n                                </Typography>\r\n\r\n                                <Typography noWrap className={classes.panelSummaryText}>\r\n                                    {e.Phase}\r\n                                </Typography>\r\n                            </ExpansionPanelSummary>\r\n\r\n                            <UserDashboardPanelDetails \r\n                                submission={e} \r\n                            />\r\n                        </ExpansionPanel>\r\n                    ))\r\n                }\r\n            </React.Fragment>\r\n                \r\n                :\r\n\r\n                <Typography>\r\n                    No submissions yet...\r\n                </Typography>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(UserDashboard));","import React, { useEffect } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { ExpansionPanelDetails, TextField, Button, Select, MenuItem } from '@material-ui/core';\r\n\r\nimport { retrieveSubmissionCommentHistory, addSubmissionComment, setSubmissionPhase } from '../../Redux/actions/dataSubmission';\r\n\r\nimport Comment from './Comment';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = (theme) => ({\r\n    panelDetails: {\r\n        display: 'block'\r\n    },\r\n\r\n    newCommentDiv: {\r\n        width: '70vw',\r\n        margin: '24px auto 0px auto'\r\n    },\r\n\r\n    newCommentTextField: {\r\n        flexBasis: 'calc(70vw - 200px)',\r\n        marginRight: '16px'\r\n    },\r\n\r\n    postButton: {\r\n        color: 'white',\r\n        marginTop: '16px'\r\n    },\r\n\r\n    setPhaseButton: {\r\n        color: 'white',\r\n        marginLeft: '12px'\r\n    },\r\n\r\n    phaseControlWrapper: {\r\n        textAlign: 'left',\r\n        margin: '12px 0 32px 0'\r\n    },\r\n\r\n    phaseSelect: {\r\n        width: '190px'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    submissionCommentHistoryRetrievalState: state.submissionCommentHistoryRetrievalState,\r\n    submissionComments: state.submissionComments\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveSubmissionCommentHistory,\r\n    addSubmissionComment,\r\n    setSubmissionPhase\r\n};\r\n\r\nconst AdminDashboardPanelDetails = (props) => {\r\n    const { classes, submission, setSubmissionPhase } = props;\r\n\r\n    const [ comment, setComment ] = React.useState();\r\n    const [ phase, setPhase ] = React.useState(submission.Phase_ID);\r\n\r\n    let comments = props.submissionComments[submission.Submission_ID];\r\n    let renderComments = Boolean(comments && comments.length);\r\n\r\n    useEffect(() => {\r\n        props.retrieveSubmissionCommentHistory(submission.Submission_ID);\r\n    }, []);\r\n\r\n    // control this input from redux so we can reset properly, also create connected \"NewComment\" component\r\n    const handlePostComment = () => {\r\n        props.addSubmissionComment(submission.Submission_ID, comment);\r\n        setComment('');\r\n    }\r\n    \r\n    const handlePhaseChange = (e) => {\r\n        setPhase(e.target.value);\r\n    }\r\n\r\n    const handleCommitPhase = () => {\r\n        props.handleResetExpandedPanel();\r\n        setSubmissionPhase(submission.Submission_ID, phase);\r\n    }\r\n\r\n    return (\r\n        <ExpansionPanelDetails className={classes.panelDetails}>\r\n            <div className={classes.phaseControlWrapper}>\r\n                <Select value={phase} onChange={handlePhaseChange} className={classes.phaseSelect}>\r\n                    <MenuItem value={2}>Awaiting admin action</MenuItem>\r\n                    <MenuItem value={3}>Awaiting user update</MenuItem>\r\n                    <MenuItem value={4}>Awaiting DOI</MenuItem>\r\n                    <MenuItem value={5}>Awaiting ingestion</MenuItem>\r\n                    <MenuItem value={6}>Complete</MenuItem>\r\n                </Select>\r\n\r\n                <Button\r\n                    variant='contained' \r\n                    color='primary' \r\n                    onClick={handleCommitPhase}\r\n                    className={classes.setPhaseButton}\r\n                    disabled={Boolean(phase === submission.Phase_ID)}\r\n                >\r\n                    Set Phase\r\n                </Button>\r\n            </div>\r\n\r\n            {\r\n                props.submissionCommentHistoryRetrievalState === states.inProgress ?\r\n                'Loading Comments.....' : \r\n\r\n                <React.Fragment>\r\n                    {\r\n                        renderComments && comments.map((e,i) => (\r\n                            <Comment comment={e} key={i}/>\r\n                        ))\r\n                    }\r\n                </React.Fragment>\r\n            }\r\n            <div className={classes.newCommentDiv}>\r\n                <TextField\r\n                    multiline\r\n                    rows={4}\r\n                    variant='outlined'\r\n                    onChange={(e) => setComment(e.target.value)}\r\n                    value={comment}\r\n                    // className={classes.newCommentTextField}\r\n                    fullWidth\r\n                />\r\n\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary' \r\n                    className={classes.postButton}\r\n                    onClick={handlePostComment}\r\n                >\r\n                    Post Comment\r\n                </Button>\r\n            </div>\r\n        </ExpansionPanelDetails>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(AdminDashboardPanelDetails));","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nimport * as JsSearch from 'js-search';\r\n\r\nimport { ExpansionPanel, ExpansionPanelSummary, Typography, FormGroup, FormControlLabel, Checkbox, TextField, InputAdornment } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport AdminDashboardPanelDetails from './AdminDashboardPanelDetails';\r\n\r\nimport { retrieveAllSubmissions } from '../../Redux/actions/dataSubmission';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n    dataSubmissions: state.dataSubmissions\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveAllSubmissions\r\n}\r\n\r\nconst styles = theme => ({\r\n    wrapperDiv: {\r\n        width: '90vw',\r\n        margin: '24px auto'\r\n    },\r\n\r\n    panelSummaryText: {\r\n        flexBasis: '40%',\r\n        textAlign: 'left',\r\n        paddingRight: '20px',\r\n        fontSize: '.8rem'\r\n    },\r\n\r\n    filterFormGroup: {\r\n        backgroundColor: 'rgba(0,0,0,.4)',\r\n        color: 'white',\r\n        padding: '8px 12px',\r\n        borderTopLeftRadius: '4px',\r\n        borderTopRightRadius: '4px',\r\n        flexWrap: 'wrap'\r\n    },\r\n\r\n    filterFormControl: {\r\n        marginRight: '24px'\r\n    },\r\n\r\n    searchFieldWrapper: {\r\n        flexBasis: '100%',\r\n        textAlign: 'left'\r\n    }\r\n})\r\n\r\nconst initialFilterState = {\r\n    'Awaiting admin action': true,\r\n    'Awaiting user update': true,\r\n    'Awaiting DOI': true,\r\n    'Awaiting ingestion': true,\r\n    'Complete': false\r\n}\r\n\r\nclass AdminDashboard extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('Submission_ID');\r\n        search.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Dataset');\r\n        search.addIndex('Name');\r\n\r\n        if(props.dataSubmissions) search.addDocuments(props.dataSubmissions);\r\n\r\n        this.state = {\r\n            searchString: '',\r\n            search,\r\n            expandedPanel: false,\r\n            filters: initialFilterState,\r\n            modifiedDatasetID: null\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.dataSubmissions && prevProps.dataSubmissions.length) && (this.props.dataSubmissions && this.props.dataSubmissions.length)){\r\n            this.state.search.addDocuments(this.props.dataSubmissions);\r\n            this.setState({search: this.state.search});\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.props.retrieveAllSubmissions();\r\n    }\r\n\r\n    handleExpansion = (i) => {\r\n        if(this.state.expandedPanel === i){\r\n            this.setState({...this.state, expandedPanel: false})\r\n        }\r\n\r\n        else {\r\n            this.setState({...this.state, expandedPanel: i})\r\n        }\r\n    }\r\n\r\n    handleChangeFilter = (e) => {\r\n        let newFilterState = {...this.state.filters};\r\n        newFilterState[e.target.name] = !newFilterState[e.target.name];\r\n        this.setState({...this.state, filters: {...newFilterState}});\r\n    }\r\n\r\n    handleChangeSearchString = (e) => {\r\n        this.setState({...this.state, searchString: e.target.value});\r\n    }\r\n\r\n    handleResetExpandedPanel = () => {\r\n        this.setState({...this.state, expandedPanel: false});\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, dataSubmissions } = this.props;\r\n        const { search, searchString } = this.state;\r\n        \r\n        let submissions = searchString ? \r\n            search.search(searchString).filter(item => this.state.filters[item.Phase]) :\r\n            dataSubmissions.filter(item => this.state.filters[item.Phase]);\r\n\r\n        return (\r\n            <div className={classes.wrapperDiv}>\r\n                <FormGroup row className={classes.filterFormGroup}>\r\n                    <div className={classes.searchFieldWrapper}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            value={searchString}\r\n                            onChange={this.handleChangeSearchString}\r\n                            placeholder='Search'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <Search style={{color:colors.primary}}/>\r\n                                </InputAdornment>\r\n                            )\r\n                        }}\r\n                        />\r\n                    </div>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={this.state.filters[\"Awaiting admin action\"]}\r\n                                    onChange={this.handleChangeFilter}\r\n                                    name=\"Awaiting admin action\"\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Awaiting admin action\"\r\n                            className={classes.filterFormControl}\r\n                        />\r\n\r\n                        <FormControlLabel\r\n                                control={\r\n                                    <Checkbox\r\n                                        checked={this.state.filters[\"Awaiting user update\"]}\r\n                                        onChange={this.handleChangeFilter}\r\n                                        name=\"Awaiting user update\"\r\n                                        color=\"primary\"\r\n                                    />\r\n                                }\r\n                                label=\"Awaiting user update\"\r\n                                className={classes.filterFormControl}\r\n                            />\r\n\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                checked={this.state.filters[\"Awaiting DOI\"]}\r\n                                onChange={this.handleChangeFilter}\r\n                                name=\"Awaiting DOI\"\r\n                                color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Awaiting DOI\"\r\n                            className={classes.filterFormControl}\r\n                            />\r\n\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                checked={this.state.filters[\"Awaiting ingestion\"]}\r\n                                onChange={this.handleChangeFilter}\r\n                                name=\"Awaiting ingestion\"\r\n                                color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Awaiting ingestion\"\r\n                            className={classes.filterFormControl}\r\n                            />\r\n\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                checked={this.state.filters[\"Complete\"]}\r\n                                onChange={this.handleChangeFilter}\r\n                                name=\"Complete\"\r\n                                color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Complete\"\r\n                            className={classes.filterFormControl}\r\n                            />\r\n                    </FormGroup>\r\n\r\n                {submissions && submissions.length ?\r\n\r\n                <React.Fragment>                    \r\n                    {\r\n                        submissions.map((e, i) => (\r\n                            <ExpansionPanel \r\n                                // expanded={e.expandPanel} \r\n                                expanded={this.state.expandedPanel === i}\r\n                                onChange={() => this.handleExpansion(i)} \r\n                                key={i}\r\n                                TransitionProps={{ unmountOnExit: true }}\r\n                            >\r\n                                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                    <Typography noWrap className={classes.panelSummaryText}>\r\n                                        {e.Dataset}\r\n                                    </Typography>\r\n    \r\n                                    <Typography noWrap className={classes.panelSummaryText}>\r\n                                        {e.Phase}\r\n                                    </Typography>\r\n                                </ExpansionPanelSummary>\r\n                                <AdminDashboardPanelDetails \r\n                                    submission={e} \r\n                                    handleResetExpandedPanel={this.handleResetExpandedPanel}\r\n                                />\r\n                            </ExpansionPanel>\r\n                        ))\r\n                    }\r\n                </React.Fragment>\r\n                    \r\n                    :\r\n\r\n                    <Typography>\r\n                        No submissions yet...\r\n                    </Typography>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(AdminDashboard));","import React from 'react';\r\n\r\nimport { Route, Switch } from 'react-router-dom'\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport ValidationTool from './ValidationTool';\r\nimport SubmissionGuide from './SubmissionGuide';\r\nimport UserDashboard from './UserDashboard';\r\nimport AdminDashboard from './AdminDashboard';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        paddingTop: '70px'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n});\r\n\r\nconst DataSubmission = (props) => {\r\n    const { classes, match, user } = props;\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n        <Switch>          \r\n            <Route exact path={match.url + '/guide'} component={ SubmissionGuide } />\r\n            <Route exact path={match.url + '/validationtool'} component={ ValidationTool } />\r\n            <Route exact path={match.url + '/userdashboard'} component={ UserDashboard } />\r\n            <Route exact path={match.url + '/admindashboard'} component={ AdminDashboard } /> \r\n        </Switch>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(withStyles(styles)(DataSubmission));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Typography, TextField, Paper, Grid, Button } from '@material-ui/core';\r\n\r\nimport { snackbarOpen } from '../Redux/actions/ui';\r\nimport { contactUsRequestSend } from '../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        color: 'white',\r\n        width: '65vw',\r\n        marginTop: theme.spacing(18),\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        marginBottom: theme.spacing(8),\r\n        padding: theme.spacing(2)\r\n    },\r\n\r\n    header: {\r\n        color: theme.palette.primary.main,\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    \r\n    description: {\r\n        marginBottom: theme.spacing(3)\r\n    },\r\n\r\n    textField: {\r\n        marginLeft: 0,\r\n        marginRight: theme.spacing(2),\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    messageTextField: {\r\n        width: '100%'\r\n    },\r\n\r\n    submitButton: {\r\n        marginTop: theme.spacing(2),\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    contactUsRequestSend,\r\n    snackbarOpen\r\n};\r\n\r\nclass ContactUs extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            name: props.user ? props.user.firstName + ' ' + props.user.lastName : '',\r\n            email: props.user ? props.user.email : '',\r\n            subject: '',\r\n            message: ''\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        let payload = {...this.state};\r\n        var invalid = false;\r\n        Object.keys(payload).forEach(key => {\r\n            payload[key] = payload[key].trim();\r\n            if(payload[key].length < 1) invalid = true;\r\n        });\r\n\r\n        if(invalid) {\r\n            this.props.snackbarOpen('Please complete all fields');\r\n            return;\r\n        }\r\n        \r\n        this.props.contactUsRequestSend(payload);\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <Paper className={classes.root} elevation={6}>\r\n                <Typography variant='h4' className={classes.header} align='left'>\r\n                    Contact Us\r\n                </Typography>\r\n    \r\n                <Typography variant='body2' className={classes.description} align='left'>\r\n                    Have a question or feedback? Fill out the form below to contact a member of the Simons CMAP team.\r\n                </Typography>\r\n\r\n                <Grid container>\r\n                    <Grid item container direction='column' justify='flex-start' xs={12} md={3}>\r\n                        <TextField\r\n                            name='name'\r\n                            label='Name'\r\n                            value={this.state.name}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n\r\n                        <TextField\r\n                            name='email'\r\n                            label='Email'\r\n                            value={this.state.email}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n\r\n                        <TextField\r\n                            name='subject'\r\n                            label='Subject'\r\n                            value={this.state.subject}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={9}>\r\n                        <TextField\r\n                            placeholder='Your message...'\r\n                            value={this.state.message}\r\n                            className={classes.messageTextField}\r\n                            name='message'\r\n                            onChange={this.handleChange}\r\n                            multiline\r\n                            rows='10'\r\n                            variant='outlined'\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary'\r\n                    className={classes.submitButton}\r\n                    onClick={this.handleSubmit}\r\n                >\r\n                    Submit\r\n                </Button>\r\n    \r\n            </Paper>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ContactUs));","import React from 'react';\r\n\r\nimport { Grid, Typography, Paper, Tooltip, Link, Button } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        marginTop: '70px'\r\n    },\r\n\r\n    descriptionPaper: {\r\n        padding: '6vh 6vw',\r\n        margin: '110px 10vw 0px 10vw'\r\n    },\r\n\r\n    iconContainer: {\r\n        marginTop: '4vh'\r\n    },\r\n\r\n    followContainer: {\r\n        marginTop: '4vh'\r\n    },\r\n\r\n    softwareIcon: {\r\n        maxHeight: 'calc(100% - 1vh)',\r\n        maxWidth: 'calc(100% - .5vw)',\r\n        height: '110px',\r\n    },\r\n\r\n    followUs: {\r\n        lineHeight: 3.1,\r\n        fontSize: '16px'\r\n    },\r\n\r\n    followUsGridSection: {\r\n        textAlign: 'right',\r\n        marginBottom: '12px'\r\n    },\r\n\r\n    followUsIcon: {\r\n        marginLeft: '12px'\r\n    },\r\n\r\n    docButtonGrid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '12px'\r\n    },\r\n\r\n    docButton: {\r\n        color: 'white',\r\n        textTransform: 'none',        \r\n        width: '180px'\r\n    }\r\n})\r\n\r\nconst CommunityTemp = (props) => {\r\n    const { classes } = props;\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper className={classes.descriptionPaper} elevation={8}>\r\n                <Typography variant='body1'>\r\n                    Simons CMAP is a community-based project intending to further cultivate the collaborative efforts at ocean sciences. It supports popular programming languages used for data analysis and seamlessly blends into your existing codebase. Review the <Link target='_blank' href='https://cmap.readthedocs.io/en/latest/'>documentation</Link> to discover how to retrieve, visualize, and analyze the CMAP data sets using your preferred language. There you will also find information on how your own datasets can be submitted to CMAP. Please join us and contribute to growing the CMAP data and software ecosystem.\r\n                </Typography>\r\n                \r\n                <Grid container className={classes.iconContainer}>\r\n                    <Grid item xs={12} md ={6} lg={3}>\r\n                        <a href=\"https://github.com/simonscmap/cmap4r\" target=\"_blank\">\r\n                            <img src=\"images/cmap-sdk-R-COLORED.png\" width=\"152\" alt=\"\" className={classes.softwareIcon}/>                \r\n                        </a>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md ={6} lg={3}>\r\n                        <a href=\"https://github.com/simonscmap/pycmap\" target=\"_blank\">\r\n                            <img src=\"images/cmap-sdk-python-COLORED.png\" width=\"273\" alt=\"\" className={classes.softwareIcon}/>                \r\n                        </a>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={6} lg={3}>\r\n                        <a href='https://github.com/simonscmap/CMAP.jl' target='_blank'>\r\n                            <img src=\"images/cmap-sdk-julia-COLORED.png\" width=\"176\" alt=\"\" className={classes.softwareIcon}/>                \r\n                        </a>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md ={6} lg={3}>\r\n                        <a href=\"https://github.com/simonscmap/matcmap\" target=\"_blank\">\r\n                            <img src=\"images/cmap-sdk-Matlab-COLORED.png\" alt=\"\" className={classes.softwareIcon}/>\r\n                        </a>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n                <Grid container className={classes.followContainer}>\r\n                    <Grid item xs={12} md={1}>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={5} md={2} className={classes.followUsGridSection}>\r\n                        <Typography variant='caption' className={classes.followUs}>\r\n                            Follow Us:\r\n                        </Typography>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={4} md={3}>\r\n                        <a href=\"https://github.com/simonscmap\" target=\"_blank\">\r\n                            <img src=\"images/github-icon.png\" width=\"55\" srcSet=\"images/github-icon-p-500.png 500w, images/github-icon.png 512w\" alt=\"\" className={classes.followUsIcon}/>\r\n                        </a>                        \r\n                        <a href=\"https://join.slack.com/t/simons-cmap/shared_invite/enQtNjQzMTkzMjg0NjQ2LTdlOGRhZjNhMDY3MjRlNjg2OTY5NzE3ZWZhNWE0OWZhYmQzMTJjNDkyNDQ1MjNkZDg0N2MzMzhlZDliNGYxYzQ\" target=\"_blank\" className={classes.followUsIcon}>\r\n                            <img src=\"images/slack-icon.png\" width=\"55\" srcSet=\"images/slack-icon-p-500.png 500w, images/slack-icon.png 600w\" alt=\"\"/>\r\n                        </a>                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={5} className={classes.docButtonGrid}>\r\n                        <Button color='primary' variant='contained' href=\"https://cmap.readthedocs.io/en/latest/\" target=\"_blank\" className={classes.docButton}>\r\n                            Documentation\r\n                        </Button>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={3} md={12}>\r\n                    </Grid>\r\n               \r\n                </Grid>\r\n\r\n                \r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(CommunityTemp);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Paper, Button, Typography, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { recoverPasswordRequestSend } from '../../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '10% auto',\r\n        height: '40vh'\r\n    },\r\n\r\n    description: {\r\n        paddingTop: '110px'\r\n    },\r\n\r\n    emailSentDescription: {\r\n        padding: '140px 70px 0 70px'\r\n    },\r\n\r\n    sendButton: {\r\n        marginLeft: '8px',\r\n        marginTop: '9px',\r\n        height: '41px'\r\n    },\r\n\r\n    formWrapper: {\r\n        marginTop: '24px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    recoverPasswordRequestSend\r\n}\r\n\r\nconst ForgotPass = (props) => {\r\n    const { classes } = props;\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [emailWasSent, setEmailWasSent] = React.useState(false);\r\n\r\n    const handleChange = event => {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    const handleSubmit = event => {\r\n        setEmailWasSent(true);\r\n        props.recoverPasswordRequestSend(email);\r\n    }\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n          handleSubmit();\r\n        }\r\n    }\r\n\r\n    const valid = email === '' || /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(email);\r\n\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            {emailWasSent ? \r\n                <Typography className={classes.emailSentDescription}>\r\n                    An email has been sent to {email}. If you don't receive anything from us within the next few minutes please check your spam folder.\r\n                </Typography>\r\n            :\r\n                <React.Fragment>\r\n                    <Typography className={classes.description}>\r\n                        Enter your email address below to recover your username and password.\r\n                    </Typography>\r\n            \r\n                    <div className={classes.formWrapper}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='email'                        \r\n                            value={email}\r\n                            onChange={handleChange}\r\n                            error={!valid}\r\n                            helperText={valid ? '' : 'Please enter a valid email address'}\r\n                            onKeyPress={handleKeyPress}\r\n                        />\r\n                        <Button \r\n                            color='primary' \r\n                            variant='contained' \r\n                            className={classes.sendButton} \r\n                            onClick={handleSubmit}\r\n                            disabled={Boolean(!valid || !email.length)}\r\n                        >\r\n                            Submit\r\n                        </Button>\r\n                    </div>               \r\n                </React.Fragment>\r\n            }\r\n        </Paper>                \r\n    )    \r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(ForgotPass));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nimport { Paper, Button, Typography, TextField, Grid, Link } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { choosePasswordRequestSend, choosePasswordRequestReset } from '../../Redux/actions/user';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '120px auto',\r\n        // height: '40vh',\r\n        padding: '24px 12px'\r\n    },\r\n\r\n    textFields: {\r\n        display: 'block',\r\n        width: '380px'\r\n    },\r\n\r\n    description: {\r\n        marginBottom: '12px'\r\n    },\r\n\r\n    formGrid: {\r\n        height: '270px',\r\n        padding: '0 90px'\r\n\r\n    },\r\n\r\n    button: {\r\n        width: '120px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    choosePasswordRequestSend,\r\n    choosePasswordRequestReset\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    choosePasswordState: state.choosePasswordState,\r\n  });\r\n\r\n\r\nconst choosePasswordButtonRef = React.createRef();\r\n\r\n// Used with forgot password link from email\r\nclass ChoosePassword extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        let token = props.location.pathname.split('/')[2];\r\n        let decodedToken = jwtDecode(token)\r\n        console.log(decodedToken);\r\n        let expiration = new Date(0);\r\n        expiration.setUTCSeconds(decodedToken.exp);\r\n\r\n        let expired = new Date() > expiration;\r\n\r\n        this.state = {\r\n            password: '',\r\n            confirmPassword: '',\r\n            expired,\r\n            token,\r\n            email: decodedToken.sub\r\n        }\r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        this.props.choosePasswordRequestReset();\r\n    }\r\n\r\n    handleChangePassword = event => {\r\n        this.setState({...this.state, password: event.target.value});\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        this.props.choosePasswordRequestSend({\r\n            password: this.state.password,\r\n            token: this.state.token\r\n        })\r\n    }\r\n    handleChangeConfirmPassword = event => {\r\n        this.setState({...this.state, confirmPassword: event.target.value});\r\n    }\r\n\r\n    handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            choosePasswordButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { classes, choosePasswordState } = this.props;\r\n        const { password, confirmPassword, expired } = this.state;\r\n\r\n        const passwordValid = /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(password);\r\n        const confirmPasswordValid = password === confirmPassword;    \r\n        const disabled = Boolean(password.length === 0 || !passwordValid || !confirmPasswordValid);\r\n        \r\n        if(expired){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        This link has expired. Click here to send a <Link component={RouterLink} to={{pathname: '/forgotpass'}}>new link</Link>.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        }\r\n\r\n        if(choosePasswordState === states.succeeded){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        Success! You can now log in using your new password.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        } \r\n        \r\n        else if(choosePasswordState === states.failed){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        We were unable to complete this request. Please try again.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Paper className={classes.paper}>\r\n                <Typography className={classes.description}>\r\n                    Please choose a password\r\n                </Typography>\r\n    \r\n                <Grid direction='column' justify='space-evenly' className={classes.formGrid} container>\r\n                    <Grid item>\r\n                        <TextField     \r\n                            fullWidth           \r\n                            autoFocus\r\n                            label='Password'\r\n                            margin=\"normal\"\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='password'                        \r\n                            value={password}\r\n                            onChange={this.handleChangePassword}\r\n                            error={Boolean(!passwordValid && password.length)}\r\n                            helperText='Must be 8 to 32 characters with 1 number and 1 special character.'\r\n                            onKeyPress={this.handleKeyPress}\r\n                            InputLabelProps={{\r\n                                shrink: true\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n    \r\n                    <Grid item>\r\n                        <TextField\r\n                            fullWidth\r\n                            label='Confirm Password'\r\n                            margin=\"normal\"\r\n                            id=\"confirmPassword\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='confirmPassword'                        \r\n                            value={confirmPassword}\r\n                            onChange={this.handleChangeConfirmPassword}\r\n                            error={!confirmPasswordValid}\r\n                            helperText={confirmPasswordValid ? '' : 'Passwords must match'}\r\n                            onKeyPress={this.handleKeyPress}\r\n                            InputLabelProps={{\r\n                                shrink: true\r\n                            }}\r\n                        />                    \r\n                    </Grid>\r\n    \r\n                    <Grid item>\r\n                        <Button \r\n                            fullWidth \r\n                            variant='outlined' \r\n                            color='primary' \r\n                            disabled={disabled} \r\n                            onClick={this.handleSubmit}\r\n                            ref={choosePasswordButtonRef}\r\n                        >\r\n                            Submit\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>   \r\n            </Paper>                \r\n        )    \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(ChoosePassword)));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\nimport './Stylesheets/App.scss';\r\n\r\nimport colors from './Enums/colors';\r\n\r\nimport { Route, BrowserRouter, Switch } from 'react-router-dom'\r\n\r\nimport Home from './Components/Home';\r\nimport Catalog from './Components/Catalog/Catalog';\r\nimport Register from './Components/User/Register';\r\nimport Visualization from './Components/Visualization/Visualization';\r\nimport GlobalUIComponentWrapper from './Components/UI/GlobalUIComponentWrapper';\r\nimport LandingPage from './Components/LandingPage';\r\nimport TopNavBar from './Components/UI/TopNavBar';\r\nimport Login from './Components/User/Login';\r\nimport Profile from './Components/User/Profile';\r\nimport DataSubmissionTemp from './Components/DataSubmission/DataSubmissionTemp';\r\nimport DataSubmission from './Components/DataSubmission/DataSubmission';\r\nimport ContactUs from './Components/ContactUs';\r\nimport CommunityTemp from './Components/Community/CommunityTemp';\r\n\r\nimport { initializeGoogleAuth } from './Redux/actions/user';\r\nimport { toggleShowHelp } from './Redux/actions/ui';\r\n\r\nimport ForgotPass from './Components/User/ForgotPass';\r\nimport ChoosePassword from './Components/User/ChoosePassword';\r\n\r\nconst theme = createMuiTheme({\r\n\r\n  typography: {\r\n    useNextVariants: true,\r\n    fontFamily: [\r\n      '\"Lato\"',\r\n      'sans-serif'\r\n    ].join(',')\r\n  },\r\n\r\n  palette: {\r\n    primary: {\r\n      contrastText: '#000000',\r\n      main: colors.primary\r\n    },\r\n\r\n    error: {\r\n      main: colors.errorYellow\r\n    },\r\n\r\n    secondary: {\r\n      main: colors.secondary,\r\n      // contrastText: '#fff700',\r\n    },\r\n\r\n    background: {\r\n      default: colors.backgroundGray,\r\n      paper: colors.backgroundGray\r\n    },\r\n\r\n    text: {\r\n      primary: '#ffffff',\r\n      secondary: colors.primary\r\n    }\r\n  },\r\n\r\n  overrides: {\r\n    MuiIconButton: {\r\n      root: {\r\n        color: colors.primary,\r\n        borderRadius: '10%'\r\n      }\r\n    },\r\n    \r\n    MuiPaper: {\r\n      root: {\r\n        backgroundColor: 'rgba(0,0,0,.3)',\r\n      }\r\n    },\r\n\r\n    MuiListItemIcon: {\r\n      root: {\r\n        minWidth: '40px'\r\n      }\r\n    },\r\n\r\n    MuiFormHelperText: {\r\n      filled: {\r\n        paddingLeft: '1px',\r\n        paddingRight: '1px',\r\n        fontSize: '13px'\r\n      }\r\n    },\r\n\r\n    MuiListItem: {\r\n      gutters: {\r\n        paddingLeft: '6px',\r\n        paddingRight: '10px'\r\n      },\r\n\r\n      root: {\r\n        paddingTop: '4px',\r\n        paddingBottom: '4px'\r\n      }\r\n    },\r\n\r\n    MuiToolbar: {\r\n      root: {\r\n        backgroundColor: 'transparent',\r\n        color: colors.primary\r\n      }\r\n    },\r\n\r\n    MuiMenuItem: {\r\n      root: {\r\n        '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n        },\r\n      }\r\n    },\r\n\r\n    MuiPickersBasePicker: {\r\n      container: {\r\n        backgroundColor: colors.backgroundGray\r\n      }\r\n    },\r\n    \r\n    MuiOutlinedInput: {\r\n      input: {\r\n        padding: '12px 14px'\r\n      },\r\n\r\n      root: {\r\n        \"&$focused\": {\r\n          \"borderColor\": colors.primary\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiSnackbarContent: {\r\n      message: {\r\n        margin: 'auto'\r\n      }\r\n    },\r\n\r\n    MuiButtonGroup: {\r\n      groupedOutlined: {\r\n        '&:not(:first-child)': {\r\n          marginLeft: 0\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiTableCell: {\r\n      root: {\r\n        borderBottomColor: \"rgba(0, 0, 0, 0.9)\"\r\n      }\r\n    },\r\n\r\n    MuiFormControl: {\r\n      marginNormal: {\r\n        marginTop: '8px'\r\n      }\r\n    },\r\n\r\n    MuiDialogContentText: {\r\n      root: {\r\n        color: 'white'\r\n      }\r\n    },\r\n\r\n    MuiExpansionPanel: {\r\n      root: {\r\n        \"&$expanded\": {\r\n          margin: 0\r\n        }\r\n      }\r\n    },\r\n    \r\n    MuiDialogTitle: {\r\n      root: {\r\n        color: colors.primary\r\n      }\r\n    },\r\n\r\n    MuiFilledInput: {\r\n      input: {\r\n        paddingLeft: '6px',\r\n      },\r\n\r\n      adornedEnd: {\r\n        paddingRight: '6px'\r\n      },\r\n\r\n      root: {\r\n        backgroundColor: 'transparent',\r\n        '&:hover': {\r\n          backgroundColor: 'transparent',\r\n        },\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent',\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiPopover: {\r\n      paper: {\r\n        backgroundColor: '#1B4156'\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  loadingMessage: state.loadingMessage\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  initializeGoogleAuth,\r\n  toggleShowHelp\r\n};\r\n\r\nclass App extends Component {\r\n  componentDidMount = () => {\r\n    this.props.initializeGoogleAuth();\r\n  }\r\n  render() {\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <div className=\"App\">\r\n          <MuiThemeProvider theme={theme}>\r\n          <BrowserRouter>\r\n            <GlobalUIComponentWrapper/>\r\n            <TopNavBar/>\r\n            <Switch>          \r\n              <Route exact path='/apikeymanagement' component={ Home } />\r\n              <Route exact path='/' component={ LandingPage } />\r\n              <Route exact path='/catalog' component={ Catalog } />\r\n              <Route exact path='/login' component={ Login } />\r\n              <Route exact path='/register' component={ Register } />\r\n              <Route exact path='/visualization' component={Visualization} />\r\n              <Route exact path='/profile' component={Profile} />\r\n              <Route exact path='/forgotpass' component={ForgotPass} />\r\n              {/* <Route path='/datasubmission' component={DataSubmissionTemp} /> */}\r\n              <Route path='/datasubmission' component={DataSubmission} />\r\n              <Route path='/choosepassword' component={ChoosePassword} />\r\n              <Route exact path='/contact' component={ContactUs}/>\r\n              <Route path='/community' component={CommunityTemp} />\r\n            </Switch>\r\n          </BrowserRouter>\r\n          </MuiThemeProvider>\r\n        </div>\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './Stylesheets/index.css';\r\nimport 'ag-grid-enterprise';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { Provider } from 'react-redux'\r\nimport store from './Redux/store';\r\n\r\nimport App from './App'\r\n\r\nimport {LicenseManager} from \"ag-grid-enterprise\";\r\n\r\nLicenseManager.setLicenseKey(\"School_of_Oceanography_Simons_CMAP_1Devs_1Deployment_19_June_2020__MTU5MjUyMTIwMDAwMA==aec33f954c06d90afed06467402921bd\");\r\n\r\nconst rootElement = document.getElementById('root')\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>,\r\n  rootElement\r\n)\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}