{"version":3,"sources":["serviceWorker.js","Enums/asyncRequestStates.js","Redux/actionTypes/ui.js","Redux/Reducers/ui.js","Redux/Reducers/dataSubmission.js","Redux/Reducers/index.js","Redux/Reducers/catalog.js","Redux/actionTypes/catalog.js","Redux/Reducers/user.js","Redux/actionTypes/user.js","Redux/Reducers/visualization.js","Redux/actionTypes/visualization.js","Redux/actionTypes/dataSubmission.js","Redux/actions/user.js","Redux/actions/catalog.js","Redux/actions/ui.js","Redux/actions/visualization.js","Redux/actions/dataSubmission.js","config.js","Enums/spatialResolutions.js","Utility/mapSpatialResolutionToNumber.js","Utility/flattenArray.js","Utility/splitData.js","Utility/mergeArraysAndComputeMeans.js","Utility/mergeArrays.js","Enums/visualizationSubTypes.js","Enums/temporalResolutions.js","Classes/SpaceTimeData.js","Enums/storedProcedures.js","Classes/TimeSeriesData.js","Classes/DepthProfileData.js","Classes/SectionMapData.js","Classes/SparseData.js","api.js","Redux/sagas.js","Redux/store.js","Enums/colors.js","Components/UI/CopyableText.js","Components/User/ApiKeyManagement.js","Components/User/LoginRequiredPrompt.js","Components/Home.js","Components/Catalog/GridDetail.js","Components/Catalog/DatasetDescriptionDialog.js","Components/Catalog/VariableDescriptionDialog.js","Components/UI/ConnectedTooltip.js","Components/Catalog/GroupedDatasetRow.js","Components/Catalog/AGGridWrapper.js","Components/Catalog/Catalog.js","Components/User/RegistrationCard.js","Components/User/RegistrationStepper.js","Components/User/GoogleSignInButton.js","Components/User/Register.js","Enums/validation.js","Components/Visualization/TableStatsDialog.js","Utility/mapTemporalResolutionToNumber.js","Utility/utcDateStringToLocal.js","Utility/depthCounter.js","Utility/countWebGLContexts.js","Components/Visualization/VizControlPanel.js","Components/Visualization/DownloadConfirmationDialog.js","Enums/months.js","Utility/handleChartDatestring.js","Utility/chartBase.js","Components/Visualization/ChartControlPanel.js","Components/Visualization/SparseHistogram.js","Utility/handleXTicks.js","Utility/getChartDimensions.js","Components/Visualization/SpaceTimeChart.js","Components/Visualization/TimeSeriesChart.js","Components/Visualization/DepthProfileChart.js","Components/Visualization/SectionMapChart.js","Components/Visualization/SparseScatter.js","Components/Visualization/SparseMap.js","Components/Visualization/Charts.js","Components/Visualization/CruiseSelector.js","Components/Visualization/MapContainer.js","Utility/cleanSPParams.js","Utility/localDateToString.js","Components/Visualization/Visualization.js","Utility/starsBase64.js","Components/User/LoginDialog.js","Components/UI/SnackbarWrapper.js","Components/UI/LoadingOverlay.js","Components/UI/GlobalUIComponentWrapper.js","Components/LandingPage.js","Stylesheets/JSS.js","Components/User/UserNavbarDropdown.js","Components/DataSubmission/DataSubmissionNavbarDropdown.js","Components/UI/MobileNavbarMenu.js","Components/UI/TopNavBar.js","Components/User/Login.js","Components/User/ChangePassword.js","Components/User/ChangeEmail.js","Components/User/Profile.js","Components/DataSubmission/DSCellEditor.js","Components/DataSubmission/DSCellEditorTextArea.js","Components/DataSubmission/DSCellEditorSelect.js","Components/DataSubmission/ValidationGrid.js","Utility/DataSubmission/workbookAudits.js","Components/DataSubmission/ValidationTool.js","Utility/DataSubmission/formatDataSheet.js","Utility/DataSubmission/formatDatasetMetadataSheet.js","Utility/DataSubmission/formatVariableMetadataSheet.js","Utility/DataSubmission/generateAudits.js","Components/DataSubmission/SubmissionGuide.js","Components/DataSubmission/Comment.js","Components/DataSubmission/UserDashboardPanelDetails.js","Components/DataSubmission/UserDashboard.js","Components/DataSubmission/AdminDashboardPanelDetails.js","Components/DataSubmission/AdminDashboard.js","Components/DataSubmission/DataSubmission.js","Components/ContactUs.js","Components/Community/CommunityTemp.js","Components/User/ForgotPass.js","Components/User/ChoosePassword.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","states","inProgress","failed","succeeded","expired","uiResetState","catalogRequestState","loginDialogIsOpen","registrationActiveStep","userLoginState","userLoginError","userValidationState","userValidationError","userRegistrationState","apiKeyRetrievalState","apiKeyCreationState","initialState","catalog","datasetRequestState","datasets","submissionOptions","changePasswordDialogIsOpen","changeEmailDialogIsOpen","snackbarIsOpen","snackbarMessage","loadingMessage","showHelp","user","JSON","parse","Cookies","get","apiKeys","clearLoginDialog","choosePasswordState","preferences","maps","charts","getCruiseTrajectoryRequestState","cruiseTrajectory","sampleData","queryRequestState","storedProcedureRequestState","getTableStatsRequestState","cruiseList","getCruiseListRequestState","showChartsOnce","chartID","dataSubmissions","submissionComments","submissionCommentHistoryRetrievalState","submissionFile","submissionUploadState","reducedReducer","reduceReducers","state","action","type","payload","datasetsRequestState","options","keys","message","layers","newLayer","mapInfo","chartInfo","id","slice","chartIndex","trajectory","datasetLongName","tableStats","submissions","updatedComments","submissionID","comments","file","storeInfo","googleLoginRequestSend","userIDToken","logOut","keyRetrievalRequestSend","initializeGoogleAuth","retrievalRequestSend","retrievalRequestSuccess","datasetRetrievalRequestSend","datasetRetrievalRequestSuccess","storeSubmissionOptions","showLoginDialog","hideLoginDialog","registrationNextActiveStep","restoreInterfaceDefaults","snackbarOpen","setLoadingMessage","toggleShowHelp","hideChangePasswordDialog","hideChangeEmailDialog","cruiseTrajectoryRequestSend","cruiseListRequestSend","cruiseListRequestSuccess","csvDownloadRequestSend","query","fileName","tableName","downloadTextAsCsv","text","csvFromVizRequestSend","vizObject","shortName","longName","retrieveDataSubmissionsByUser","addSubmissionComment","comment","retrieveSubmissionCommentHistory","storeSubmissions","storeSubmissionComments","retrieveAllSubmissions","setSubmissionCommentHistoryRetrievalState","storeSubmissionFile","checkSubmissionOptionsAndStoreFile","setUploadState","downloadMostRecentFile","apiUrl","origin","spatialResolutions","irregular","halfDegree","quarterDegree","twentyFifthDegree","fourKm","twelfthDegree","seventyKm","oneDegree","nineKm","twentyFiveKm","mapSpatialResolutionToNumber","resolution","flattenArray","arr","flattenedArray","i","length","j","push","splitData","data","changeInterval","numDistinct","Math","floor","mergeArraysAndComputeMeans","mergeTargetDistance","nextMergeStartDistance","numArraysPerMerge","mergedArrays","travelDistance","subArray","sum","count","k","isNaN","mergeArrays","subTypes","sectionMap","contourSectionMap","timeSeries","histogram","depthProfile","heatmap","contourMap","sparse","temporalResolutions","threeMinutes","sixHourly","daily","weekly","monthly","annual","monthlyClimatology","threeDay","eightDayRunning","eightDays","SpaceTimeData","constructor","generateCsv","dates","Array","from","this","depths","csvArray","hasDepth","parameters","fields","variableValues","lats","lons","join","metadata","hasHours","isMonthly","Set","zMin","zMax","extent","indexAdjust","lonMin","lonMax","latMin","latMax","distinctLatCount","distinctLonCount","add","row","lat","parseFloat","_lon","lon","lon1","hasHour","Table_Name","Temporal_Resolution","value","time","Date","setUTCHours","toISOString","finalize","size","lonCount","latCount","quantile1","quantile","quantile2","undefined","toPrecision","spatialResolution","Spatial_Resolution","round","generatePlotData","subType","splitByDate","splitByDepth","depthInterval","dateInterval","variableValueSubsets","map","subset","vizSubTypes","storedProcedures","spaceTime","TimeSeriesData","stds","depth","depthIndexAdjust","csvString","DepthProfileData","SectionMapData","lonInterval","latInterval","orientation","lonArray","max","min","splitBySpace","spaceCount","SparseData","variableIndex","Depth_Min","times","latDistance","abs","lonDistance","distance","sqrt","_zoom","zoom","lonCenter","latCenter","center","fetchOptions","credentials","postOptions","method","headers","storedProcedureParametersToUri","Object","reduce","queryString","key","api","login","fetch","body","stringify","logout","register","validate","googleLoginRequest","a","response","contactUs","changePassword","changeEmail","retrieve","decoder","encoding","TextDecoder","csvParser","CSVParser","columns","on","record","read","ok","reader","getReader","readerIsDone","chunk","done","write","decode","Dataset_Long_Name","trim","keyRetrieval","keyCreation","description","updateUserInfo","userInfo","recoverPassword","email","choosePassword","password","token","visualization","storedProcedureRequest","spName","vizData","console","log","status","e","getTableStats","json","cruiseTrajectoryRequest","csvDownload","dataSubmission","retrieveSubmissionByUser","beginUploadSession","formData","uploadPart","commitUpload","setPhase","retrieveCommentHistory","retrieveMostRecentFile","getFileFromLink","link","userLogin","userLogout","userRegistration","userValidation","catalogRetrieval","datasetRetrieval","queryRequest","cruiseListRequest","tableStatsRequest","csvDownloadRequest","csvFromVizRequest","refreshLogin","updateUserInfoRequest","recoverPasswordRequest","choosePasswordRequest","contactUsRequest","changePasswordRequest","changeEmailRequest","copyTextToClipboard","retrieveSubmissionsByUser","uploadSubmission","setDataSubmissionPhase","watchUserLogin","watchUserRegistration","watchUserValidation","watchUserLogout","watchGoogleLoginRequest","watchCatalogRetrieval","watchDatasetRetrieval","watchKeyRetrieval","watchKeyCreationRequest","watchQueryRequest","watchStoredProcedureRequest","watchCruiseTrajectoryRequest","watchCruiseListRequest","watchTableStatsRequest","watchCsvDownloadRequest","watchDownloadTextAsCsv","watchRefreshLogin","watchUpdateUserInfoRequest","watchInitializeGoogleAuth","watchRecoverPasswordRequest","watchChoosePasswordRequest","watchContactUs","watchChangePasswordRequest","watchChangeEmailRequest","watchCsvFromVizRequest","watchCopyTextToClipboard","watchRetrieveSubmissionsByUser","watchRetrieveAllSubmissions","watchAddSubmissionComment","watchRetrieveSubmissionCommentHistory","watchUploadSubmission","watchSetDataSubmissionPhase","watchRetrieveMostRecentFile","watchCheckSubmissionOptionsAndStoreFile","watchDownloadMostRecentFile","rootSaga","put","call","userActions","interfaceActions","pathname","href","gapi","auth2","getAuthInstance","authInstance","signOut","result","catalogActions","visualizationActions","delay","scrollTo","metadataQuery","all","dataResponse","metadataResponse","csvData","csv","blob","Blob","url","URL","createObjectURL","document","createElement","setAttribute","appendChild","click","removeChild","currentUser","getAuthResponse","authResponse","id_token","textArea","select","execCommand","remove","jsonResponse","dataSubmissionActions","datasetName","fileSize","chunkSize","offset","retries","beginSessionFormData","FormData","append","sessionID","beginSessionResponse","currentPartSucceeded","part","commitSucceeded","phaseID","linkResponse","dataset","getFileResponse","name","storedOptions","takeLatest","sagaMiddleware","createSagaMiddleware","store","createStore","rootReducer","applyMiddleware","run","colors","primary","solidPaper","backgroundGray","secondary","errorYellow","greenHover","mapDispatchToProps","connect","forwardRef","props","tooltipPlacement","innerSpanProps","handleCopyText","event","target","innerText","hideTooltip","style","cursor","onClick","Tooltip","placement","title","keyCreationRequestSend","ApiKeyManagement","Component","super","componentDidMount","handleClick","handleChange","setState","render","classes","className","wrapper","Paper","root","elevation","Typography","variant","apiKeyTableHeader","Divider","Table","table","TableHead","TableRow","TableCell","align","TableBody","apiKey","index","Description","showChildOnHover","Api_Key","warningCaption","Grid","container","alignItems","justify","spacing","item","TextField","margin","onChange","placeholder","descriptionField","autoComplete","Button","disabled","color","ownProps","withStyles","theme","width","marginTop","paddingTop","minWidth","marginBottom","visibility","fontSize","loginRequiredMessage","useEffect","Link","component","RouterLink","to","Home","Fragment","tableMapping1","tableMapping2","tableMapping3","padding","height","userSelect","infoCard","gridClass","maxHeight","gridItem","display","justifyContent","verticalAlign","datasetDescriptionWrapper","whiteSpace","overflow","datasetDescription","vizSampleImage","maxWidth","variableDetailTable","marginLeft","marginRight","tableLayout","variableDetailTableRow","variableDetailTableCell","borderBottomColor","textOverflow","paddingRight","gridDetailTypography","boldText","fontWeight","rightGridItem","boxSizing","datasetDescriptionButton","backgroundColor","buttonTextWrapper","xs","Time_Min","Time_Max","Depth_Max","Comment","context","handleDescribeVariable","ID","DatasetDescriptionDialog","clearDescription","Dialog","open","onClose","PaperProps","dialogPaper","DialogTitle","DialogContent","source","markdown","palette","main","textDecoration","describedVariable","variable","find","Long_Name","tooltip","boxShadow","borderRadius","textAlign","children","datasetGroupWrapper","bozSizing","nonDatasetGroupWrapper","paddingLeft","datasetGridClass","adjustGridLeft","groupName","chevronButton","datasetChevronButton","chevronIcon","transform","datasetButtonWrapper","tableGridSection","shortCell","acknowledgement","acknowledgementHeader","buttonMarginLeft","buttonMarginTop","node","allLeafChildren","React","useState","expanded","setExpanded","toggleExpand","field","onDoubleClick","IconButton","ExpandMore","enterDelay","ChevronRight","src","Icon_URL","alt","direction","Data_Source","Distributor","Acknowledgement","handleDescribeDataset","Dataset_Name","level","disableRipple","disableFocusRipple","columnDefs","headerName","sortable","filter","tooltipField","cellRenderer","hide","enableRowGroup","rowGroup","defaultColDef","resizable","cellStyle","autoGroupColumnDef","getRowHeight","params","group","detail","AGGridWrapper","filterText","describedDataset","gridApi","setQuickFilter","onGridReady","columnApi","sizeColumnsToFit","onGridSizeChanged","handleColumnRowGroupChanged","forEach","column","setColumnVisible","colId","handleDownloadCatalog","header","gridPaper","gridSearch","autoFocus","InputProps","startAdornment","InputAdornment","position","Search","downloadButton","gridWrapper","rowData","suppressDragLeaveHidesColumns","enableCellTextSelection","suppressContextMenu","getRowStyle","styles","background","rowGroupPanelShow","groupMultiAutoColumn","onColumnRowGroupChanged","enableBrowserTooltips","groupUseEntireRow","groupRowRenderer","masterDetail","frameworkComponents","myDetailCellRenderer","GridDetail","datasetGroupRowRenderer","GroupedDatasetRow","detailCellRenderer","detailRowHeight","textTransform","dark","Catalog","determineContent","content","registrationCard","textField","inputFieldState","handleKeyPress","buttonRef","current","Card","inputFieldInfo","label","error","valid","helperText","requirement","onKeyPress","registrationPreviousActiveStep","userRegistrationRequestSend","userValidationRequestSend","username","createRef","RegistrationStepper","userValidationRequestSuccess","validateField","rawValue","pattern","previousState","newCardState","cards","confirmPassword","test","processStateToActionPayload","actionPayload","card","cardKey","currentCardIsValid","currentCard","optional","handleNext","handleBack","newValue","fieldName","firstName","lastName","institute","department","country","newCard","steps","activeStep","cardInfoArray","Stepper","Step","StepLabel","instructionsPaper","instructions","handleHideStepper","button","ref","CircularProgress","buttonProgress","bottomError","handleClose","top","left","textSpan","fontFamily","clickHandlerTarget","viewBox","version","xmlns","xmlnsXlink","x","y","filterUnits","dx","dy","in","stdDeviation","values","rx","stroke","strokeWidth","fill","fillRule","xlinkHref","d","Register","showStepper","onGoogleSignup","registerGoogleClickHandler","_this","auth","attachClickHandler","setTimeout","handleShowStepper","paper","googleWrapper","emailSignUpWrapper","emailSignUpButton","validation","depthOneIsLower","depthOneOutOfBounds","depthTwoOutOfBounds","negative","date","dateOneIsLater","dateOneOutOfBounds","dateTwoOutOfBounds","latOneIsHigher","latOneOutOfBounds","latTwoOutOfBounds","lonOneIsHigher","lonOneOutOfBounds","lonTwoOutOfBounds","dataIsIrregular","dateRangeRequired","depthRangeRequired","surfaceOnlyDataset","irregularOnly","dataSizeTooLarge","webGLContextLimit","generic","invalid","dataSizeWarning","dataSizePrevent","variableMissing","vizTypeMissing","DialogContentText","Sensor","Lat_Min","Lat_Max","Lon_Min","Lon_Max","Variable_Min","Unit","Variable_Max","Variable_Mean","Variable_Std","mapTemporalResolutionToNumber","utcDateStringToLocal","utcString","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDate","getUTCDate","newDate","setFullYear","darwinDepths","piscesDepths","piscesTable","darwinTable","exports","depth1","depth2","has","chart","visualizationSubTypes","overrideDisabledStyle","clearCharts","getDatePlaceholder","valueOf","month","getMonth","day","getDate","getFullYear","reactWindowListRef","selectRef","MenuList","componentDidUpdate","prevProps","prevState","resetAfterIndex","scrollOffset","foundFocus","child","groupHasFocus","isFocused","getValue","initialOffset","indexOf","groupHeights","some","grandChild","totalHeight","acc","cur","estimatedItemSize","itemCount","itemSize","initialScrollOffset","Group","hasFocus","element","sensor","CustomHeading","headingProps","headingLabel","firstChild","selectProps","hidden","customHeading","icon","typography","iconClass","ListItem","focusedOption","Icon","handleSetDownloadTarget","stopPropagation","CloudDownload","Doc_URL","Info","DropdownIndicator","ArrowRight","Menu","Option","innerProps","onMouseMove","preventDefault","onMouseOver","GroupHeading","SingleValue","optionLabelSpanStyleLeft","optionLabelSpanStyleMid","optionLabelSpanStyleRight","formatOptionLabel","option","meta","ValueContainer","VizControlPanel","search","addDocuments","handleOpenControlPanel","showControlPanel","handleCloseControlPanel","handleTableStatsDialogClose","tableStatsDialogIsOpen","handleTableStatsDialogOpen","getSelectOptionsFromCatalogItems","items","Visualize","Variable","sort","opt1","opt2","estimateCsvSize","member","parseInt","Variable_Count","handleResetSPParams","resetSPParams","searchField","onAutoSuggestChange","searchString","estimateDataSize","dt1","dt2","lat1","lat2","lon2","selectedVizType","date1","dayDiff","res","dateCount","depthUtils","checkStartDepth","surfaceOnly","replace","toFixed","checkEndDepth","checkStartDateValid","checkEndDateValid","checkStartDate","checkEndDate","checkStartLat","checkEndLat","checkStartLon","checkEndLon","checkHeatmap","irregularSpatialResolution","checkContour","checkSection","checkHistogram","checkTimeSeries","checkDepthProfile","checkSparseMap","checkGeneralWarn","dataSize","checkGeneralPrevent","webGLCount","countWebGLContexts","handleShowChartsAndResize","dispatchEvent","Event","handleShowCharts","handleUpdateFields","updateFields","lastSelectedFieldId","JsSearch","indexStrategy","searchIndex","addIndex","showCharts","handleShowGlobe","handleLatLonChange","validations","catalogMinDate","setHours","catalogMaxDate","zeroedDT1","zeroedDT2","minDate","minDateMessage","maxDateMessage","maxDate","startDepthMessage","endDepthMessage","startLatMessage","endLatMessage","startLonMessage","endLonMessage","heatmapMessage","contourMessage","sectionMapMessage","histogramMessage","timeSeriesMessage","depthProfileMessage","sparseMapMessage","generalWarnMessage","checkDisableVisualizeList","errorCount","errorSizeAdjust","disableVisualizeMessage","checkDisableVisualize","visualizeButtonTooltip","closePanelChevron","aria-label","ChevronLeft","openPanelChevron","Drawer","drawer","drawerPaper","anchor","ButtonGroup","groupedButtons","depressed","Language","InsertChartOutlined","clearChartsButton","Delete","resetSPParamsButton","Cached","isLoading","components","IndicatorSeparator","escapeClearsValue","onInputChange","filterOption","variableSelect","isClearable","inputValue","menu","provided","zIndex","backdropFilter","valueContainer","input","control","border","borderBottom","borderColor","noOptionsMessage","singleValue","tableStatsButton","LibraryBooks","datePicker","format","autoOk","handleStartDateChange","inputVariant","KeyboardButtonProps","datePickerInputAdornment","handleEndDateChange","formGridItem","FormHelperTextProps","padLeft","InputLabelProps","ceil","FormControl","vizTypeSelectFormControl","InputLabel","shrink","htmlFor","inputProps","MenuProps","MenuListProps","vizTypeMenu","MenuItem","vizTypeMenuItem","vizButtonTooltip","visualizeButton","onVisualize","fullWidth","bottom","drawerPaperError1","drawerPaperError2","drawerPaperError3","drawerPaperError4","drawerPaperError5","navDrawerWidth","controlPanelForm","borderLeft","fontVariant","borderRight","tableStatsRequestSend","DownloadConfirmationDialog","downloadTarget","handleFullDatasetDownload","handleSubsetDownload","sampleMember","isMonthyClimatology","timeUnit","timeStart","timeEnd","timeMin","timeMax","subsetLat1","subsetLat2","subsetLon1","subsetLon2","subsetTime1","subsetTime2","depthMin","depthMax","subsetDepth1","subsetDepth2","totalDataPoints","Variables","split","fullDataAvailable","dateRatio","totalDays","subsetDays","totalLatSize","subsetLatSize","latRatio","totalLonSize","subsetLonSize","lonRatio","depthRatio","totalDepthSize","subsetDepthSize","subsetDataPoints","subsetAvailable","timeString1","timeString2","timeStringMin","timeStringMax","tableFooter","DialogActions","dateString","months","layout","font","paper_bgcolor","autosize","config","displaylogo","annotations","distributor","yshift","documentElement","clientWidth","xref","yref","showarrow","colorscaleOptions","chartWrapper","popover","paddingBottom","iconButton","colorForm","lastIcon","borderTopRightRadius","borderBottomRightRadius","buttonGroup","colorscaleMenu","grayBackground","onToggleSplitByDate","onToggleSplitBySpace","downloadCsv","handleZValueConfirm","zValues","markerOptions","handleMarkerOptionsConfirm","showErrorBars","handleSetShowErrorBars","showLines","handleSetShowLines","paletteAnchorElement","setPaletteAnchorElement","zScalePopoverAnchorElement","setZScalePopoverAnchorElement","localZMin","setLocalZMin","localZMax","setLocalZMax","zScalePopoverOpen","zScalePopoverID","handleZScalePopoverClose","zScaleValidations","zMinMessage","zMaxMessage","markerOptionsAnchorElement","setMarkerOptionsAnchorElement","opacity","localMarkerOpacity","setLocalMarkerOpacity","localMarkerColor","setLocalMarkerColor","localMarkerSize","setLocalMarkerSize","previousOpacity","useRef","usePreviousOpacity","previousColor","usePreviousColor","previousSize","usePreviousSize","markerPopoverOpen","markerPopoverID","handleMarkerOptionsClose","markerOptionsValidations","checkLocalMarkerOpacity","checkLocalMarkerSize","localMarkerOpacityMessage","localMarkerSizeMessage","DateRange","LineWeight","currentTarget","SwapVert","ShowChart","Tune","handlePaletteChoice","Palette","Gamepad","anchorEl","keepMounted","Popover","anchorOrigin","vertical","horizontal","transformOrigin","OutlinedInput","aria-describedby","labelWidth","FormHelperText","buttonBlock","iconButtonWrapper","handleChartDateString","useResizeHandler","marker","chartBase","plot_bgcolor","xaxis","exponentformat","yaxis","infoObject","sectionSize","lonRange","tickvals","ticktext","tickmode","sizeRatio","setSplitByDate","setSplitByDepth","setPalette","setZValues","subSets","plots","subsets","xTicks","handleXTicks","getChartDimensions","latTitle","lonTitle","hovertext","formatter","minHeight","zauto","zmin","zmax","z","connectgaps","autocolorscale","colorscale","hoverinfo","contours","coloring","showlabels","labelfont","family","labelformat","colorbar","handleContourMap","zsmooth","handleHeatmap","requestAnimationFrame","onToggleSplitByDepth","chartCount","availableWGLContexts","setMarkerOptions","setShowLines","setShowErrorBars","mode","error_y","array","visible","line","isMonthy","date2","error_x","autorange","setSplitBySpace","setOrientation","spaces","distinctMeridiansOrParallelsForSplitting","xAxis","handleSectionMap","switchOrientation","SparseScatter","xValues","yValues","xTitle","yTitle","tabProps","SparseTabPanel","selectedTab","controlPanelProps","tabs","tab","setTab","plot","radius","mapbox","sourcetype","below","mapboxAccessToken","handleSparseMap","scatter","Tabs","centered","indicatorColor","Tab","deleteChart","CloseChartIcon","closeChartIcon","float","handleDeleteChart","Close","Charts","chartPaper","cruiseTrajectoryClear","esriFonts","cruiseSort","b","Name","CruiseSelector","Nickname","getSelectOptionsFromCruiseList","list","handleCruiseSelect","selection","selectedCruise","updateParametersFromCruiseBoundary","outerDiv","blurEffectDiv","getCruiseListState","cruiseSelect","menuList","primary25","cruiseInfo","cruiseInfoCell","Start_Time","End_Time","Chief_Name","Ship_Name","borderStyle","DrawButton","drawButton","helpText","cancelButton","polygonSymbol","symbolLayers","material","outline","polylineSymbol","r","g","UiComponents","shouldComponentUpdate","nextProps","nextState","sketchModel","esriModules","SketchViewModel","layer","regionLayer","view","defaultUpdateOptions","toggleToolOnClick","tool","setShowHelp","getElementById","throttledUpdate","throttle","updateDomainFromGraphicExtent","Utils","webMercatorToGeographic","graphic","geometry","toolEventInfo","complete","graphics","addEventListener","removeAll","create","cancel","ui","TrajectoryController","memo","trajectoryLayer","midIndex","polyLines","lineIndex","lonStart","latStart","maxDistance","_lonDistance","cruiseTrajectorySymbol","cap","cruiseTrajectoryGeometry","paths","Graphic","symbol","goTo","maxDuration","speedFactor","MapContainer","spParams","globeUIRef","_lon2","polygon","rings","regionGraphic","mapProperties","basemap","viewProperties","highlightOptions","haloOpacity","haloColor","fillOpacity","measurementPositions","GraphicsLayer","cleanSPParams","localDateToString","year","toString","queryRequestSend","storedProcedureRequestSend","storedProcedureInfo","completedShowCharts","baseSPParams","Visualization","filteredData","showUI","mapping","sp","sparseMaxDate","setDate","cruise","toggleShowUI","_lon1","xmin","xmax","newCoordinates","ymin","ymax","esriModuleNames","loadModules","loadedModules","accumulator","currentValue","currentIndex","vizWrapper","toggleChartView","displayNone","userLoginRequestSend","LoginDialog","handleLogin","clearState","onGoogleSignin","onDialogEnter","loginDisabled","aria-labelledby","onEnter","dialogWrapper","colorCorrectionPrimary","onSubmit","googleIconWrapper","colorCorrectionWhite","colorCorrection","snackbarClose","Snackbar","autoHideDuration","loader","right","loaderContent","flexDirection","alignItem","spinnerText","spinner","fadeIn","loginDialogWasCleared","GlobalUIComponentWrapper","handleLogOut","preProps","inlineBlock","LandingPage","landingWrapper","jss","navLink","pointerEvents","letterSpacing","withRouter","JSS","dropdown","popperPaperBlue","borderTopLeftRadius","popperPaperBlack","setAnchorEl","paperClass","ExpandLess","Popper","role","transition","TransitionProps","Grow","ClickAwayListener","onClickAway","isDataSubmissionAdmin","menuIcon","listItem","drawerState","setDrawerState","List","TopNavBar","handleResize","w","innerWidth","history","navWrapper","navWrapperBlue","simonsLogoWrapper","simonsLogo","rightSectionWrapper","rightNavLink","changePasswordRequestSend","oldPassword","newPassword","formWrapper","currentPassword","setCurrentPassword","setNewPassword","newPasswordConfirm","setNewPasswordConfirm","newPasswordValid","newPasswordConfirmValid","resetFields","changePasswordButtonRef","buttonIsDisabled","changeEmailRequestSend","setpassword","setEmail","emailConfirm","setEmailConfirm","changeEmailButtonRef","emailValid","testEmail","emailConfirmValid","updateUserInfoRequestSend","showChangePasswordDialog","showChangeEmailDialog","userProperties","userToState","editable","Profile","handleValidation","infoHasChanged","handleEdit","handleCancel","handleConfirm","formIsValid","property","close","changePasswordDialogOpen","ChangeEmail","changeEmailDialogOpen","profilePaper","editButton","Edit","md","readOnly","buttonGrid","accountPaper","accountEditButton","DSCellEditor","getAuditReport","sheet","rowIndex","auditReport","errors","auditCell","afterGuiAttached","inputRef","focus","attached","handleClickAway","stopEditing","parseValue","spellCheck","err","lineHeight","DSCellEditorTextArea","isPopup","rowCount","textAreaLookup","rows","cols","DSCellEditorSelect","checkAgainst","selectOptions","toLowerCase","dynamicOpts","opts","numberParser","Number","valueParser","dataset_meta_data","autoHeight","cellEditor","vars_meta_data","ValidationGrid","gridContext","singleClickEdit","onModelUpdated","defaultColumnDef","suppressMovableColumns","onCellValueChanged","handleCellValueChanged","handleGridSizeChanged","nanVariants","workbook","warnings","sheetCheck","missingSheets","Sheets","checkSheets","missingCols","sample","checkRequiredCols","fixedVariables","userVariables","variableNameMismatches","var_short_name","checkVariableNameMismatches","emptyColumns","checkEmptyColumns","includeDepth","checkDepthAllOrNone","hasInSitu","var_sensor","isObservation","dataset_make","shouldHaveCruise","hasCruise","checkMissingCruiseNames","pi","PI","checkRadians","duplicates","obj","matched","checkUniqueSpaceTime","typeConsistency","columnIsNumerical","checkTypeConsistency","allSameValue","col","sampleValue","allSameValueHelper","checkAllSameValue","containsNans","checkNans","outliers","vectors","stats","mean","deviation","checkOutliers","CleanupDummy","var_keywords","var_comment","var_long_name","dataset_references","dataset_description","dataset_acknowledgement","cruise_names","dataset_long_name","dataset_history","dataset_distributor","validationSteps","orderedColumns","StyledBadgeRed","badge","Badge","StyledBadgeGreen","fileSizeTooLargeDummyState","validationStep","ValidationTool","checkCellStyle","childIndex","menuTabs","handleDragOver","cellAudit","auditFuncs","audits","func","auditWorkbook","workbookAudits","auditRows","audit","rowAudit","performAudit","info","handleResetState","handleChangeValidationStep","oldValue","newAudit","updated","redrawRows","handleReadFile","FileReader","onload","progressEvent","readFile","Uint8Array","XLSX","_data","utils","sheet_to_json","defval","is1904","Workbook","WBProps","date1904","keysContaining__EMPTY","formatDataSheet","_dataset_meta_data","dataset_release_date","formatDatasetMetadataSheet","_vars_meta_data","formatVariableMetadataSheet","readAsArrayBuffer","handleDrop","dataTransfer","getAsFile","handleFileSelect","files","handleUploadSubmission","book_new","book_append_sheet","json_to_sheet","wbArray","bookType","dataset_short_name","handleDownload","writeFile","scrollGridTo","ensureIndexVisible","handleFindNext","lastFocused","getFocusedCell","startRow","startColIndex","findIndex","ensureColumnVisible","startEditingCell","colKey","countErrors","counts","handleClickTab","URLSearchParams","componentWillUnmount","Make","Study_Domain","number","required","datasetLength","makes","makesSet","disciplines","sensors","sensorsSet","codeFriendly","binary","spatialResolutionSet","temporalResolutionsSet","firstRowOnly","dataset_version","dataset_source","climatology","var_unit","var_spatial_res","var_temporal_res","var_discipline","visualize","generateAudits","reduxStoreOptions","needHelp","download","needHelpLink","fileSelectPaper","addBorder","onDragOver","onDrop","currentlyViewingTypography","chooseNewFileLabel","ilb","ArrowBack","currentSectionSpan","ArrowForward","divider","ErrorOutline","linkLabel","Done","workbookAuditPaper","dense","ListItemIcon","ListItemText","tabPaper","badgeContent","workbookTab","submittedTypography","encodeURI","submitButton","accept","dragTarget","dataTable","tableWrapper","errorStepperPaper","findNextButton","doiProviderList","dataSheetProps","anchorEnd","bullets","datasetMetadataSheetProps","images","caption","variableMetadataSheetProps","stickyPaper","guideSection","sectionHeader","navListItem","navListItemText","doiListItem","doiListItemText","doiListItemtextWrapper","navListItemtextWrapper","subListText","sampleTableRow","navListSubItemText","navListSubSubItemText","activeSection","setActiveSection","observer","IntersectionObserver","entries","isIntersecting","threshold","querySelector","observe","disconnect","bullet","image","l","maxwidth","commentArea","commenterAndDateTime","Commenter","Comment_Date_Time","dateTime","toLocaleString","panelDetails","newCommentDiv","newCommentTextField","flexBasis","postButton","setPhaseButton","stepper","newUpload","submission","setComment","Submission_ID","renderComments","Phase","ExpansionPanelDetails","alternativeLabel","encodeURIComponent","multiline","UserDashboard","expandedPanel","Dataset","handleExpansion","wrapperDiv","ExpansionPanel","unmountOnExit","ExpansionPanelSummary","expandIcon","noWrap","panelSummaryText","setSubmissionPhase","phaseControlWrapper","phaseSelect","Phase_ID","phase","Select","handleResetExpandedPanel","initialFilterState","AdminDashboard","handleChangeFilter","newFilterState","filters","handleChangeSearchString","FormGroup","filterFormGroup","searchFieldWrapper","FormControlLabel","Checkbox","checked","filterFormControl","modifiedDatasetID","flexWrap","DataSubmission","exact","path","SubmissionGuide","contactUsRequestSend","subject","ContactUs","handleSubmit","messageTextField","descriptionPaper","iconContainer","followContainer","softwareIcon","followUs","followUsGridSection","followUsIcon","docButtonGrid","docButton","lg","srcSet","recoverPasswordRequestSend","emailSentDescription","sendButton","emailWasSent","setEmailWasSent","choosePasswordRequestSend","choosePasswordRequestReset","choosePasswordButtonRef","ChoosePassword","handleChangePassword","handleChangeConfirmPassword","decodedToken","jwtDecode","expiration","setUTCSeconds","exp","sub","passwordValid","confirmPasswordValid","formGrid","textFields","createMuiTheme","useNextVariants","contrastText","default","overrides","MuiIconButton","MuiPaper","MuiListItemIcon","MuiFormHelperText","filled","MuiListItem","gutters","MuiToolbar","MuiMenuItem","MuiPickersBasePicker","MuiOutlinedInput","MuiSnackbarContent","MuiButtonGroup","groupedOutlined","MuiTableCell","MuiFormControl","marginNormal","MuiDialogContentText","MuiExpansionPanel","MuiDialogTitle","MuiFilledInput","adornedEnd","MuiPopover","App","DateFnsUtils","Login","ForgotPass","CommunityTemp","LicenseManager","setLicenseKey","rootElement","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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C/B,CAACN,GAAoB9C,WAAa,KAClC,CAAC8C,GAAoBO,oBAAqB,GAC1C,CAACP,GAAoBQ,UAAW,EAChC,CAACR,GAAoBS,iBAAkB,EACvC,CAACT,GAAoBU,WAAY,GAG1B7C,ICNAmvB,OAXeC,IAC1B,IAAIpC,EAAO,IAAIxnB,KAAK4pB,GAChBC,EAAUrC,EAAKsC,iBACfC,EAAWvC,EAAKwC,cAChBC,EAAUzC,EAAK0C,aAEfC,EAAU,IAAInqB,KAElB,OADAmqB,EAAQC,YAAYP,EAASE,EAAUE,GAChCE,GCPX,MAAME,GAAe,CACjB,EACA,GACA,GACA,GACA,GACA,GACA,GACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,OACA,SACA,SACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SAGEC,GAAe,CACjB,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,eAkBEC,GAAc,IAAI9rB,IAfF,CAClB,gBACA,2BAcE+rB,GAAc,IAAI/rB,IAXH,CACjB,4BACA,sBACA,qBACA,iCACA,wBACA,0BACA,mCA+BWgsB,OAzBC,CACZ3uB,MAAO,CAAC4f,EAAOgP,EAAQC,KAAY,MACX1X,EAAUyI,EAAMzgB,KAA5B2E,WACR,IAAI9D,EAAQ,EAEZ,GAAGyuB,GAAYK,IAAI3X,GACf,IAAI,IAAIrY,EAAI,EAAGA,EAAI0vB,GAAazvB,UACzByvB,GAAa1vB,GAAK+vB,GADe/vB,IAEjC0vB,GAAa1vB,GAAK8vB,GAAQ5uB,SAE9B,GAAI0uB,GAAYI,I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","file":"static/js/main.afb36566.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// Enum for async requests.\r\n\r\nconst states = {\r\n    inProgress: 'inProgress',\r\n    failed: 'failed',\r\n    succeeded: 'succeeded',\r\n    expired: 'expired'\r\n}\r\n\r\nexport default states;","export const INTERFACE_SHOW_LOGIN_DIALOG = \"INTERFACE_SHOW_LOGIN_DIALOG\";\r\nexport const INTERFACE_HIDE_LOGIN_DIALOG = \"INTERFACE_HIDE_LOGIN_DIALOG\";\r\n\r\nexport const REGISTRATION_NEXT_ACTIVE_STEP = 'REGISTRATION_NEXT_ACTIVE_STEP';\r\nexport const REGISTRATION_PREVIOUS_ACTIVE_STEP = 'REGISTRATION_PREVIOUS_ACTIVE_STEP';\r\n\r\nexport const RESTORE_INTERFACE_DEFAULTS = 'RESTORE_INTERFACE_DEFAULTS';\r\n\r\nexport const SNACKBAR_OPEN = 'SNACKBAR_OPEN';\r\nexport const SNACKBAR_CLOSE = 'SNACKBAR_CLOSE';\r\n\r\nexport const SET_LOADING_MESSAGE = 'SET_LOADING_MESSAGE';\r\n\r\nexport const TOGGLE_SHOW_HELP = 'TOGGLE_SHOW_HELP';\r\n\r\nexport const SHOW_CHANGE_PASSWORD_DIALOG = 'SHOW_CHANGE_PASSWORD_DIALOG';\r\nexport const HIDE_CHANGE_PASSWORD_DIALOG = 'HIDE_CHANGE_PASSWORD_DIALOG';\r\n\r\nexport const SHOW_CHANGE_EMAIL_DIALOG = 'SHOW_CHANGE_EMAIL_DIALOG';\r\nexport const HIDE_CHANGE_EMAIL_DIALOG = 'HIDE_CHANGE_EMAIL_DIALOG';\r\n\r\nexport const COPY_TEXT_TO_CLIPBOARD = 'COPY_TEXT_TO_CLIPBOARD';","import * as interfaceActionTypes from '../actionTypes/ui';\r\n\r\nconst uiResetState = {\r\n  catalogRequestState: null,\r\n\r\n  loginDialogIsOpen: false,\r\n  registrationActiveStep: 0,\r\n\r\n  userLoginState: null,\r\n  userLoginError: null,\r\n\r\n  userValidationState: null,\r\n  userValidationError: null,\r\n\r\n  userRegistrationState: null,\r\n\r\n  apiKeyRetrievalState: null,\r\n  apiKeyCreationState: null\r\n}\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {\r\n    case interfaceActionTypes.INTERFACE_SHOW_LOGIN_DIALOG: return {...state, loginDialogIsOpen: true};\r\n    case interfaceActionTypes.INTERFACE_HIDE_LOGIN_DIALOG: return {...state, loginDialogIsOpen: false, userLoginError: null};\r\n    case interfaceActionTypes.REGISTRATION_NEXT_ACTIVE_STEP: return {...state, registrationActiveStep: state.registrationActiveStep + 1}\r\n    case interfaceActionTypes.REGISTRATION_PREVIOUS_ACTIVE_STEP: return {...state, registrationActiveStep: state.registrationActiveStep - 1}\r\n    case interfaceActionTypes.RESTORE_INTERFACE_DEFAULTS: return {\r\n      ...state,\r\n      ...uiResetState\r\n    }\r\n    case interfaceActionTypes.SNACKBAR_OPEN: return {\r\n      ...state,\r\n      snackbarIsOpen: true,\r\n      snackbarMessage: action.payload.message\r\n    }\r\n    case interfaceActionTypes.SNACKBAR_CLOSE: return {...state, snackbarIsOpen: false}\r\n    case interfaceActionTypes.SET_LOADING_MESSAGE: return {...state, loadingMessage: action.payload.message}\r\n    \r\n    case interfaceActionTypes.TOGGLE_SHOW_HELP: return {...state, showHelp: !state.showHelp}\r\n\r\n    case interfaceActionTypes.SHOW_CHANGE_EMAIL_DIALOG: return {...state, changeEmailDialogIsOpen: true}\r\n    case interfaceActionTypes.HIDE_CHANGE_EMAIL_DIALOG: return {...state, changeEmailDialogIsOpen: false}\r\n\r\n    case interfaceActionTypes.SHOW_CHANGE_PASSWORD_DIALOG: return {...state, changePasswordDialogIsOpen: true}\r\n    case interfaceActionTypes.HIDE_CHANGE_PASSWORD_DIALOG: return {...state, changePasswordDialogIsOpen: false}\r\n    \r\n    default: return state;\r\n  }\r\n}","import * as dataSubmissionActionTypes from '../actionTypes/dataSubmission';\r\n\r\nexport default function(state, action) {\r\n  \r\n  switch (action.type) {    \r\n    case dataSubmissionActionTypes.STORE_SUBMISSIONS: return {...state, dataSubmissions: action.payload.submissions}\r\n    case dataSubmissionActionTypes.SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE: return {...state, submissionCommentHistoryRetrievalState: action.payload.state}\r\n    case dataSubmissionActionTypes.STORE_SUBMISSION_COMMENTS:\r\n      let updatedComments = [...state.submissionComments];\r\n      updatedComments[action.payload.submissionID] = action.payload.comments;\r\n\r\n      return {\r\n        ...state,\r\n        submissionComments: updatedComments\r\n      }\r\n\r\n    case dataSubmissionActionTypes.STORE_SUBMISSION_FILE: return {...state, submissionFile: action.payload.file}\r\n    case dataSubmissionActionTypes.SET_UPLOAD_STATE: return {...state, submissionUploadState: action.payload.state}\r\n      \r\n    default: return state;\r\n    }\r\n}","import catalog from './catalog';\r\nimport user from './user';\r\nimport ui from './ui';\r\nimport visualization from './visualization';\r\nimport dataSubmission from './dataSubmission.js';\r\nimport reduceReducers from 'reduce-reducers';\r\nimport Cookies from 'js-cookie';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\n// Consider building this object from initial states from each reducer\r\n// ** When adding new keys to redux store consider whether they need to be\r\n// reset on navigation for UI purposes. If so, add them with a default state\r\n// to the uiResetState in the ui reducer **\r\nconst initialState = {\r\n    // Catalog state pieces\r\n    catalogRequestState: null,\r\n    catalog: null,\r\n    datasetRequestState: null,\r\n    datasets: null,\r\n    submissionOptions: null,\r\n\r\n    // Interface state pieces\r\n    loginDialogIsOpen: false,\r\n    changePasswordDialogIsOpen: false,\r\n    changeEmailDialogIsOpen: false,\r\n    registrationActiveStep: 0,\r\n    snackbarIsOpen: false,\r\n    snackbarMessage: null,\r\n    loadingMessage: '',\r\n    showHelp: false,\r\n\r\n    // User state pieces\r\n    user: JSON.parse(Cookies.get('UserInfo') || null),\r\n\r\n    apiKeys: null,\r\n    apiKeyRetrievalState: null,\r\n    apiKeyCreationState: null,\r\n\r\n    clearLoginDialog: false,\r\n\r\n    userLoginState: null,\r\n\r\n    userValidationState: null,\r\n\r\n    userRegistrationState: null,\r\n\r\n    choosePasswordState: null,\r\n\r\n    preferences: {\r\n        \r\n    },\r\n\r\n    // Visualization state pieces\r\n    maps: [],\r\n    charts: [],\r\n    getCruiseTrajectoryRequestState: null,\r\n    cruiseTrajectory: null,\r\n    sampleData: null,\r\n    queryRequestState: null,\r\n    storedProcedureRequestState: null,\r\n    getTableStatsRequestState: null,\r\n    cruiseList: [],\r\n    getCruiseListRequestState: null,\r\n    showChartsOnce: null,\r\n    chartID: 0,\r\n\r\n    // Data Submission state pieces\r\n\r\n    dataSubmissions: [],\r\n    submissionComments: [],\r\n    submissionCommentHistoryRetrievalState: states.succeeded,\r\n    submissionFile: null,\r\n    submissionUploadState: null\r\n}\r\n\r\nconst reducedReducer = reduceReducers(initialState, catalog, user, ui, visualization, dataSubmission);\r\n\r\nexport default reducedReducer;","import * as catalogActionTypes from '../actionTypes/catalog';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_SUCCESS: return {\r\n      ...state, \r\n      catalogRequestState: states.succeeded, \r\n      catalog: action.payload.catalog\r\n    }\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_FAILURE: return {...state, catalogRequestState: states.failed}\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_PROCESSING: return {...state, catalogRequestState: states.inProgress}\r\n\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SUCCESS: return {...state,\r\n      datasetsRequestState: states.succeeded, \r\n      datasets: action.payload.datasets\r\n    }\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_FAILURE: return {...state, datasetsRequestState: states.failed}\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_PROCESSING: return {...state, datasetsRequestState: states.inProgress}\r\n    case catalogActionTypes.STORE_SUBMISSION_OPTIONS: return {...state, submissionOptions: action.payload.options}\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n}","export const RETRIEVAL_REQUEST_SEND = 'CATALOG_RETRIEVAL_REQUEST_SEND';\r\nexport const RETRIEVAL_REQUEST_SUCCESS = 'CATALOG_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const RETRIEVAL_REQUEST_FAILURE = 'CATALOG_RETRIEVAL_REQUEST_FAILURE';\r\nexport const RETRIEVAL_REQUEST_PROCESSING = 'CATALOG_RETRIEVAL_REQUEST_PROCESSING';\r\n\r\nexport const DATASET_RETRIEVAL_REQUEST_SEND = 'DATASET_CATALOG_RETRIEVAL_REQUEST_SEND';\r\nexport const DATASET_RETRIEVAL_REQUEST_SUCCESS = 'DATASET_CATALOG_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const DATASET_RETRIEVAL_REQUEST_FAILURE = 'DATASET_CATALOG_RETRIEVAL_REQUEST_FAILURE';\r\nexport const DATASET_RETRIEVAL_REQUEST_PROCESSING = 'DATASET_CATALOG_RETRIEVAL_REQUEST_PROCESSING';\r\n\r\nexport const SUBMISSION_OPTIONS_RETRIEVAL = 'SUBMISSION_OPTIONS_RETRIEVAL';\r\nexport const STORE_SUBMISSION_OPTIONS = 'STORE_SUBMISSION_OPTIONS';","import * as userActionTypes from '../actionTypes/user';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {    \r\n\r\n    case userActionTypes.LOGIN_REQUEST_PROCESSING: return {...state, userLoginState: states.inProgress}\r\n    case userActionTypes.LOGIN_REQUEST_SUCCESS: return {...state, userLoginState: states.succeeded, userLoginError: null}\r\n    case userActionTypes.LOGIN_REQUEST_FAILURE: return {...state, userLoginState: states.failed}\r\n    case userActionTypes.LOGIN_REQUEST_CLEAR_ERROR: return {...state, userLoginError: null}\r\n\r\n    case userActionTypes.STORE_INFO: return {...state, user: {...action.payload.user}}\r\n    case userActionTypes.DESTROY_INFO: return {...state, user: null, apiKeys: null, clearLoginDialog: true}\r\n    case userActionTypes.LOGIN_DIALOG_WAS_CLEARED: return {...state, clearLoginDialog: false}\r\n\r\n    case userActionTypes.VALIDATION_REQUEST_PROCESSING: return {...state, userValidationState: states.inProgress}\r\n    case userActionTypes.VALIDATION_REQUEST_FAILURE: return {...state, userValidationState: states.failed}\r\n    case userActionTypes.VALIDATION_REQUEST_SUCCESS: return {...state, userValidationState: null}\r\n\r\n    case userActionTypes.REGISTRATION_REQUEST_PROCESSING: return {...state, userRegistrationState: states.inProgress}\r\n    case userActionTypes.REGISTRATION_REQUEST_FAILURE: return {...state, userRegistrationState: states.failed}\r\n    case userActionTypes.REGISTRATION_REQUEST_SUCCESS: return {...state, userRegistrationState: states.succeeded}\r\n\r\n    case userActionTypes.KEY_RETRIEVAL_REQUEST_SUCCESS: return {...state, apiKeys: action.payload.keys}\r\n    case userActionTypes.KEY_RETRIEVAL_REQUEST_FAILURE: return {...state, apiKeyRetrievalState: states.failed}\r\n\r\n    case userActionTypes.KEY_CREATION_REQUEST_PROCESSING: return {...state, apiKeyCreationState: states.inProgress}\r\n    case userActionTypes.KEY_CREATION_REQUEST_FAILURE: return {...state, apiKeyCreationState: states.failed}\r\n    case userActionTypes.KEY_CREATION_REQUEST_SUCCESS: return {...state, apiKeyCreationState: states.succeeded}\r\n\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_SUCCESS: return {...state, choosePasswordState: states.succeeded}\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_FAILURE: return {...state, choosePasswordState: states.failed}\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_RESET: return {...state, choosePasswordState: null}\r\n\r\n    default: return state;\r\n    }\r\n}","export const LOG_OUT = \"LOG_OUT\";\r\n\r\nexport const STORE_INFO = 'STORE_INFO';\r\nexport const DESTROY_INFO = 'DESTROY_INFO';\r\nexport const LOGIN_DIALOG_WAS_CLEARED = 'LOGIN_DIALOG_WAS_CLEARED'\r\n\r\nexport const LOGIN_REQUEST_SEND = 'LOGIN_REQUEST_SEND';\r\nexport const LOGIN_REQUEST_PROCESSING = 'LOGIN_REQUEST_PROCESSING';\r\nexport const LOGIN_REQUEST_SUCCESS = 'LOGIN_REQUEST_SUCCESS';\r\nexport const LOGIN_REQUEST_FAILURE = 'LOGIN_REQUEST_FAILURE';\r\nexport const LOGIN_REQUEST_CLEAR_ERROR = 'LOGIN_REQUEST_CLEAR_ERROR';\r\n\r\nexport const GOOGLE_LOGIN_REQUEST_SEND = 'GOOGLE_LOGIN_REQUEST_SEND';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_PROCESSING = 'GOOGLE_LOGIN_REQUEST_SEND_PROCESSING';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_SUCCESS = 'GOOGLE_LOGIN_REQUEST_SEND_SUCCESS';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_FAILURE = 'GOOGLE_LOGIN_REQUEST_SEND_FAILURE';\r\n\r\nexport const REGISTRATION_REQUEST_SEND = 'REGISTRATION_REQUEST_SEND';\r\nexport const REGISTRATION_REQUEST_PROCESSING = 'REGISTRATION_REQUEST_PROCESSING';\r\nexport const REGISTRATION_REQUEST_SUCCESS = 'REGISTRATION_REQUEST_SUCCESS';\r\nexport const REGISTRATION_REQUEST_FAILURE = 'REGISTRATION_REQUEST_FAILURE';\r\n\r\nexport const VALIDATION_REQUEST_SEND = 'VALIDATION_REQUEST_SEND';\r\nexport const VALIDATION_REQUEST_PROCESSING = 'VALIDATION_REQUEST_PROCESSING';\r\nexport const VALIDATION_REQUEST_SUCCESS = 'VALIDATION_REQUEST_SUCCESS';\r\nexport const VALIDATION_REQUEST_FAILURE = 'VALIDATION_REQUEST_FAILURE';\r\n\r\nexport const KEY_RETRIEVAL_REQUEST_SEND = 'KEY_RETRIEVAL_REQUEST_SEND';\r\nexport const KEY_RETRIEVAL_REQUEST_SUCCESS = 'KEY_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const KEY_RETRIEVAL_REQUEST_FAILURE = 'KEY_RETRIEVAL_REQUEST_FAILURE';\r\n\r\nexport const KEY_CREATION_REQUEST_SEND = 'KEY_CREATION_REQUEST_SEND';\r\nexport const KEY_CREATION_REQUEST_PROCESSING = 'KEY_CREATION_REQUEST_PROCESSING';\r\nexport const KEY_CREATION_REQUEST_SUCCESS = 'KEY_CREATION_REQUEST_SUCCESS';\r\nexport const KEY_CREATION_REQUEST_FAILURE = 'KEY_CREATION_REQUEST_FAILURE';\r\n\r\nexport const UPDATE_USER_INFO_REQUEST_SEND = 'UPDATE_USER_INFO_REQUEST_SEND';\r\nexport const UPDATE_USER_INFO_REQUEST_SUCCESS = 'UPDATE_USER_INFO_REQUEST_SUCCESS';\r\nexport const UPDATE_USER_INFO_REQUEST_FAILURE = 'UPDATE_USER_INFO_REQUEST_FAILURE';\r\n\r\nexport const REFRESH_LOGIN = 'REFRESH_LOGIN';\r\n\r\nexport const INITIALIZE_GOOGLE_AUTH = 'INITIALIZE_GOOGLE_AUTH';\r\nexport const STORE_GOOGLE_AUTH = 'STORE_GOOGLE_AUTH';\r\n\r\nexport const RECOVER_PASSWORD_REQUEST_SEND = 'RECOVER_PASSWORD_REQUEST_SEND';\r\n\r\nexport const CHOOSE_PASSWORD_REQUEST_SEND = 'CHOOSE_PASSWORD_REQUEST_SEND';\r\nexport const CHOOSE_PASSWORD_REQUEST_SUCCESS = 'CHOOSE_PASSWORD_REQUEST_SUCCESS';\r\nexport const CHOOSE_PASSWORD_REQUEST_FAILURE = 'CHOOSE_PASSWORD_REQUEST_FAILURE';\r\nexport const CHOOSE_PASSWORD_REQUEST_RESET = 'CHOOSE_PASSWORD_REQUEST_RESET';\r\n\r\nexport const CONTACT_US_REQUEST_SEND = 'CONTACT_US_REQUEST_SEND';\r\n\r\nexport const CHANGE_PASSWORD_REQUEST_SEND = 'CHANGE_PASSWORD_REQUEST_SEND';\r\n\r\nexport const CHANGE_EMAIL_REQUEST_SEND = 'CHANGE_EMAIL_REQUEST_SEND';","import states from '../../Enums/asyncRequestStates';\r\nimport * as visualizationActionTypes from '../actionTypes/visualization';\r\n\r\nexport default function(state, action) {\r\n    switch(action.type) {\r\n        case visualizationActionTypes.QUERY_REQUEST_PROCESSING: return {...state, queryRequestState: states.inProgress};\r\n        case visualizationActionTypes.QUERY_REQUEST_FAILURE: return {...state, queryRequestState: states.failed};\r\n        case visualizationActionTypes.QUERY_REQUEST_SUCCESS: return {...state, queryRequestState: states.succeeded};\r\n        \r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_PROCESSING: return {...state, storedProcedureRequestState: states.inProgress}\r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_FAILURE: return {...state, storedProcedureRequestState: states.failed}\r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_SUCCESS: return {...state, storedProcedureRequestState: states.succeeded}\r\n\r\n\r\n        case visualizationActionTypes.ADD_LAYER: return { // Not currently in use\r\n            ...state,\r\n            layers: [...state.layers, action.payload.newLayer]\r\n        }\r\n\r\n        case visualizationActionTypes.STORE_SAMPLE_DATA: return {\r\n            ...state,\r\n            sampleData: action.payload.sampleData\r\n        }\r\n\r\n        case visualizationActionTypes.ADD_MAP: return {\r\n            ...state,\r\n            maps: [...state.maps, action.payload.mapInfo]\r\n        }\r\n\r\n        case visualizationActionTypes.ADD_CHART: return {\r\n            ...state,\r\n            charts: [{...action.payload.chartInfo, id: state.chartID}, ...state.charts],\r\n            chartID: state.chartID + 1\r\n        }\r\n\r\n        case visualizationActionTypes.CLEAR_CHARTS: return {...state, charts: []}\r\n\r\n        case visualizationActionTypes.CLEAR_MAPS: return {...state, maps: []}\r\n\r\n        case visualizationActionTypes.DELETE_CHART: return {...state, \r\n            charts: [\r\n                ...state.charts.slice(0, action.payload.chartIndex),\r\n                ...state.charts.slice(action.payload.chartIndex + 1)\r\n            ]\r\n        }\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_PROCESSING: return {...state, getCruiseTrajectoryRequestState: states.inProgress}\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SUCCESS: return {...state,\r\n            cruiseTrajectory: action.payload.trajectory,\r\n            getCruiseTrajectoryRequestState: states.succeeded\r\n        }\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_CLEAR: return {...state, cruiseTrajectory: null}\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_FAILURE: return {...state, getCruiseTrajectoryRequestState: states.failed}\r\n\r\n        case visualizationActionTypes.CRUISE_LIST_REQUEST_PROCESSING: return {...state, getCruiseListRequestState: states.inProgress}\r\n\r\n        case visualizationActionTypes.CRUISE_LIST_REQUEST_SUCCESS: return {\r\n            ...state,\r\n            getCruiseListRequestState: states.succeeded,\r\n            cruiseList: action.payload.cruiseList\r\n        }\r\n\r\n        case visualizationActionTypes.TRIGGER_SHOW_CHARTS: return {...state, showChartsOnce: true}\r\n        case visualizationActionTypes.COMPLETED_SHOW_CHARTS: return {...state, showChartsOnce: false}\r\n\r\n        case visualizationActionTypes.TABLE_STATS_REQUEST_SUCCESS: return {\r\n            ...state, \r\n            datasets: {\r\n                ...state.datasets,\r\n                [action.payload.datasetLongName]: {\r\n                    ...state.datasets[action.payload.datasetLongName],\r\n                    tableStats: action.payload.tableStats\r\n                }\r\n            }}\r\n\r\n        default: return state;\r\n    }\r\n}","export const QUERY_REQUEST_SEND = 'QUERY REQUEST SEND';\r\nexport const QUERY_REQUEST_SUCCESS = 'QUERY REQUEST SUCCESS';\r\nexport const QUERY_REQUEST_FAILURE = 'QUERY REQUEST FAILURE';\r\nexport const QUERY_REQUEST_PROCESSING = 'QUERY REQUEST PROCESSING';\r\n\r\nexport const STORED_PROCEDURE_REQUEST_SEND = 'STORED_PROCEDURE_REQUEST_SEND';\r\nexport const STORED_PROCEDURE_REQUEST_SUCCESS = 'STORED_PROCEDURE_REQUEST_SUCCESS';\r\nexport const STORED_PROCEDURE_REQUEST_FAILURE = 'STORED_PROCEDURE_REQUEST_FAILURE';\r\nexport const STORED_PROCEDURE_REQUEST_PROCESSING = 'STORED_PROCEDURE_REQUEST_PROCESSING';\r\n\r\nexport const ADD_MAP = 'ADD_MAP';\r\nexport const ADD_CHART = 'ADD_CHART';\r\n\r\nexport const ADD_LAYER = 'ADD_LAYER';\r\n\r\nexport const STORE_SAMPLE_DATA = 'STORE_SAMPLE_DATA';\r\n\r\nexport const CLEAR_CHARTS = 'CLEAR_CHARTS';\r\nexport const CLEAR_MAPS = 'CLEAR_MAPS';\r\nexport const DELETE_CHART = 'DELETE_CHART';\r\n\r\nexport const TABLE_STATS_REQUEST_SEND = 'ABLE_STATS_REQUEST_SEND';\r\nexport const TABLE_STATS_REQUEST_PROCESSING = 'TABLE_STATS_REQUEST_PROCESSING';\r\nexport const TABLE_STATS_REQUEST_SUCCESS = 'TABLE_STATS_REQUEST_SUCCESS';\r\nexport const TABLE_STATS_REQUEST_FAILURE = 'TABLE_STATS_REQUEST_FAILURE';\r\n\r\nexport const CRUISE_TRAJECTORY_REQUEST_SEND = 'CRUISE_TRAJECTORY_REQUEST_SEND';\r\nexport const CRUISE_TRAJECTORY_REQUEST_SUCCESS = 'CRUISE_TRAJECTORY_REQUEST_SUCCESS';\r\nexport const CRUISE_TRAJECTORY_REQUEST_FAILURE = 'CRUISE_TRAJECTORY_REQUEST_FAILURE';\r\nexport const CRUISE_TRAJECTORY_REQUEST_PROCESSING = 'CRUISE_TRAJECTORY_REQUEST_PROCESSING';\r\nexport const CRUISE_TRAJECTORY_CLEAR = 'CRUISE_TRAJECTORY_CLEAR';\r\n\r\nexport const CRUISE_LIST_REQUEST_SEND = 'CRUISE_LIST_REQUEST_SEND';\r\nexport const CRUISE_LIST_REQUEST_SUCCESS = 'CRUISE_LIST_REQUEST_SUCCESS';\r\nexport const CRUISE_LIST_REQUEST_FAILURE = 'CRUISE_LIST_REQUEST_FAILURE';\r\nexport const CRUISE_LIST_REQUEST_PROCESSING = 'CRUISE_LIST_REQUEST_PROCESSING';\r\n\r\nexport const TRIGGER_SHOW_CHARTS = 'TRIGGER_SHOW_CHARTS';\r\nexport const COMPLETED_SHOW_CHARTS = 'COMPLETED_SHOW_CHARTS';\r\n\r\nexport const CSV_DOWNLOAD_REQUEST_SEND = 'CSV_DOWNLOAD_REQUEST_SEND';\r\nexport const CSV_DOWNLOAD_REQUEST_SUCCESS = 'CSV_DOWNLOAD_REQUEST_SUCCESS';\r\nexport const CSV_DOWNLOAD_REQUEST_FAILURE = 'CSV_DOWNLOAD_REQUEST_FAILURE';\r\nexport const CSV_DOWNLOAD_REQUEST_PROCESSING = 'CSV_DOWNLOAD_REQUEST_PROCESSING';\r\n\r\nexport const CSV_FROM_VIZ_REQUEST_SEND = 'CSV_FROM_VIZ_REQUEST_SEND';\r\n\r\nexport const DOWNLOAD_TEXT_AS_CSV = 'DOWNLOAD_TEXT_AS_CSV';","export const RETRIEVE_SUBMISSIONS_BY_USER = 'RETRIEVE_SUBMISSIONS_BY_USER';\r\nexport const RETRIEVE_ALL_SUBMISSIONS = 'RETRIEVE_ALL_SUBMISSIONS';\r\nexport const STORE_SUBMISSIONS = 'STORE_SUBMISSIONS';\r\n\r\nexport const ADD_SUBMISSION_COMMENT = 'ADD_SUBMISSION_COMMENT';\r\nexport const RETRIEVE_SUBMISSION_COMMENT_HISTORY = 'RETRIEVE_SUBMISSION_COMMENT_HISTORY';\r\nexport const STORE_SUBMISSION_COMMENTS = 'STORE_SUBMISSION_COMMENTS';\r\n\r\nexport const UPLOAD_SUBMISSION = 'UPLOAD_SUBMISSION';\r\n\r\nexport const SET_SUBMISSION_PHASE = 'SET_SUBMISSION_PHASE';\r\n\r\nexport const SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE = 'SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE';\r\n\r\nexport const RETRIEVE_MOST_RECENT_FILE = 'RETRIEVE_MOST_RECENT_FILE';\r\n\r\nexport const STORE_SUBMISSION_FILE = 'STORE_SUBMISSION_FILE';\r\n\r\nexport const CHECK_SUBMISSION_OPTIONS_AND_STORE_FILE = 'CHECK_SUBMISSION_OPTIONS_AND_STORE_FILE';\r\n\r\nexport const SET_UPLOAD_STATE = 'SET_UPLOAD_STATE';\r\n\r\nexport const DOWNLOAD_MOST_RECENT_FILE = 'DOWNLOAD_MOST_RECENT_FILE';","import * as userActionTypes from '../actionTypes/user';\r\n\r\n// Login actions\r\nexport const userLoginRequestSend = (username, password) => ({\r\n    type: userActionTypes.LOGIN_REQUEST_SEND,\r\n    payload: {\r\n        username,\r\n        password\r\n    }\r\n});\r\n\r\nexport const userLoginRequestProcessing = () => {\r\n    return {type: userActionTypes.LOGIN_REQUEST_PROCESSING};\r\n};\r\n\r\nexport const userLoginRequestFailure = (error) => ({\r\n    type: userActionTypes.LOGIN_REQUEST_FAILURE,\r\n});\r\n\r\nexport const userLoginRequestSuccess = () => ({\r\n    type: userActionTypes.LOGIN_REQUEST_SUCCESS\r\n});\r\n\r\nexport const storeInfo = (user) => ({\r\n    type: userActionTypes.STORE_INFO,\r\n    payload: {\r\n        user\r\n    }\r\n});\r\n\r\nexport const userLoginRequestClearError = () => ({\r\n    type: userActionTypes.LOGIN_REQUEST_CLEAR_ERROR\r\n})\r\n\r\n// Google login actions\r\nexport const googleLoginRequestSend = (userIDToken) => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND,\r\n    payload: {\r\n        userIDToken\r\n    }\r\n});\r\n\r\nexport const googleLoginRequestProcessing = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_PROCESSING\r\n});\r\n\r\nexport const googleLoginRequestSuccess = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_SUCCESS\r\n});\r\n\r\nexport const googleLoginRequestFailure = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_FAILURE\r\n});\r\n\r\n// Log out actions\r\nexport const logOut = () => ({\r\n    type:userActionTypes.LOG_OUT\r\n});\r\n\r\nexport const destroyInfo = () => ({\r\n    type: userActionTypes.DESTROY_INFO\r\n});\r\n\r\nexport const loginDialogWasCleared = () => ({\r\n    type: userActionTypes.LOGIN_DIALOG_WAS_CLEARED\r\n});\r\n\r\n// Validation actions\r\nexport const userValidationRequestSend = (username, email) => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_SEND,\r\n    payload: {\r\n        username,\r\n        email\r\n    }\r\n});\r\n\r\nexport const userValidationRequestProcessing = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const userValidationRequestFailure = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const userValidationRequestSuccess = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_SUCCESS\r\n});\r\n\r\n// Registration actions\r\nexport const userRegistrationRequestSend = (payload) => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_SEND,\r\n    payload\r\n});\r\n\r\nexport const userRegistrationRequestProcessing = () => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const userRegistrationRequestFailure = () => ({\r\n    type:userActionTypes.REGISTRATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const userRegistrationRequestSuccess = () => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_SUCCESS\r\n});\r\n\r\n// Api key retrieval actions\r\nexport const keyRetrievalRequestSend = () => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_SEND\r\n});\r\n\r\nexport const keyRetrievalRequestSuccess = (keys) => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        keys\r\n    }\r\n});\r\n\r\nexport const keyRetrievalRequestFailure = () => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_FAILURE\r\n});\r\n\r\nexport const keyCreationRequestSend = (description) => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_SEND,\r\n    payload: {\r\n        description\r\n    }\r\n});\r\n\r\nexport const keyCreationRequestProcessing = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const keyCreationRequestFailure = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const keyCreationRequestSuccess = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_SUCCESS\r\n});\r\n\r\nexport const refreshLogin = () => ({\r\n    type: userActionTypes.REFRESH_LOGIN\r\n});\r\n\r\nexport const updateUserInfoRequestSend = (userInfo) => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_SEND,\r\n    payload: {\r\n        userInfo\r\n    }\r\n});\r\n\r\nexport const updateUserInfoRequestSuccess = () => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_SUCCESS\r\n});\r\n\r\nexport const updateUserInfoRequestFailure = () => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_FAILURE\r\n});\r\n\r\nexport const initializeGoogleAuth = () => ({\r\n    type: userActionTypes.INITIALIZE_GOOGLE_AUTH\r\n});\r\n\r\nexport const storeGoogleAuth = () => ({\r\n    type: userActionTypes.STORE_GOOGLE_AUTH\r\n});\r\n\r\nexport const recoverPasswordRequestSend = (email) => ({\r\n    type: userActionTypes.RECOVER_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        email\r\n    }\r\n});\r\n\r\nexport const choosePasswordRequestSend = ({password, token}) => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        password,\r\n        token\r\n    }\r\n});\r\n\r\nexport const choosePasswordRequestSuccess = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_SUCCESS\r\n});\r\n\r\nexport const choosePasswordRequestFailure = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_FAILURE\r\n});\r\n\r\nexport const choosePasswordRequestReset = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_RESET\r\n});\r\n\r\nexport const contactUsRequestSend = ({name, email, subject, message}) => ({\r\n    type: userActionTypes.CONTACT_US_REQUEST_SEND,\r\n    payload: {\r\n        name,\r\n        email,\r\n        subject,\r\n        message\r\n    }\r\n});\r\n\r\nexport const changePasswordRequestSend = (oldPassword, newPassword, username) => ({\r\n    type: userActionTypes.CHANGE_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        password: oldPassword,\r\n        newPassword,\r\n        username\r\n    }\r\n});\r\n\r\nexport const changeEmailRequestSend = (email, password, username) => ({\r\n    type: userActionTypes.CHANGE_EMAIL_REQUEST_SEND,\r\n    payload: {\r\n        email,\r\n        password,\r\n        username\r\n    }\r\n});","import * as catalogActionTypes from '../actionTypes/catalog';\r\n\r\nexport const retrievalRequestSend = () => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_SEND\r\n});\r\n\r\nexport const retrievalRequestProcessing = () => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_PROCESSING\r\n});\r\n\r\nexport const retrievalRequestSuccess = (catalog) => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        catalog\r\n    }\r\n});\r\n\r\nexport const retrievalRequestFailure = () => ({\r\n    type:catalogActionTypes.RETRIEVAL_REQUEST_FAILURE\r\n});\r\n\r\nexport const datasetRetrievalRequestSend = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SEND\r\n});\r\n\r\nexport const datasetRetrievalRequestProcessing = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_PROCESSING\r\n});\r\n\r\nexport const datasetRetrievalRequestSuccess = (datasets) => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        datasets\r\n    }\r\n});\r\n\r\nexport const datasetRetrievalRequestFailure = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_FAILURE\r\n});\r\n\r\nexport const submissionOptionsRetrieval = () => ({\r\n    type: catalogActionTypes.SUBMISSION_OPTIONS_RETRIEVAL\r\n});\r\n\r\nexport const storeSubmissionOptions = (options) => ({\r\n    type: catalogActionTypes.STORE_SUBMISSION_OPTIONS,\r\n    payload: {\r\n        options\r\n    }\r\n});","import * as interfaceActionTypes from '../actionTypes/ui';\r\n\r\nexport const showLoginDialog = () => ({\r\n    type: interfaceActionTypes.INTERFACE_SHOW_LOGIN_DIALOG\r\n});\r\n\r\nexport const hideLoginDialog = () => ({\r\n    type: interfaceActionTypes.INTERFACE_HIDE_LOGIN_DIALOG\r\n});\r\n\r\nexport const registrationNextActiveStep = () => ({\r\n    type: interfaceActionTypes.REGISTRATION_NEXT_ACTIVE_STEP\r\n});\r\n\r\nexport const registrationPreviousActiveStep = () => ({\r\n    type: interfaceActionTypes.REGISTRATION_PREVIOUS_ACTIVE_STEP\r\n});\r\n\r\nexport const restoreInterfaceDefaults = () => ({\r\n    type: interfaceActionTypes.RESTORE_INTERFACE_DEFAULTS\r\n});\r\n\r\nexport const snackbarOpen = (message) => ({\r\n    type: interfaceActionTypes.SNACKBAR_OPEN,\r\n    payload: {\r\n        message\r\n    }\r\n});\r\n\r\nexport const snackbarClose = () => ({\r\n    type: interfaceActionTypes.SNACKBAR_CLOSE\r\n});\r\n\r\nexport const setLoadingMessage = (message) => ({\r\n    type:interfaceActionTypes.SET_LOADING_MESSAGE,\r\n    payload: {\r\n        message\r\n    }\r\n});\r\n\r\nexport const toggleShowHelp = () => ({\r\n    type: interfaceActionTypes.TOGGLE_SHOW_HELP\r\n});\r\n\r\nexport const showChangePasswordDialog = () => ({\r\n    type: interfaceActionTypes.SHOW_CHANGE_PASSWORD_DIALOG\r\n});\r\n\r\nexport const hideChangePasswordDialog = () => ({\r\n    type: interfaceActionTypes.HIDE_CHANGE_PASSWORD_DIALOG\r\n});\r\n\r\nexport const showChangeEmailDialog = () => ({\r\n    type: interfaceActionTypes.SHOW_CHANGE_EMAIL_DIALOG\r\n});\r\n\r\nexport const hideChangeEmailDialog = () => ({\r\n    type: interfaceActionTypes.HIDE_CHANGE_EMAIL_DIALOG\r\n});\r\n\r\nexport const copyTextToClipboard = (text) => ({\r\n    type: interfaceActionTypes.COPY_TEXT_TO_CLIPBOARD,\r\n    payload: {\r\n        text\r\n    }\r\n});","import * as visualizationActionTypes from '../actionTypes/visualization';\r\n\r\nexport const queryRequestSend = (query) => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_SEND,\r\n    payload: {\r\n        query\r\n    }\r\n})\r\n\r\nexport const queryRequestSuccess = (data) => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_SUCCESS,\r\n    payload: {\r\n        data\r\n    }\r\n})\r\n\r\nexport const queryRequestFailure = () => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_FAILURE\r\n})\r\n\r\nexport const queryRequestProcessing = () => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_PROCESSING\r\n})\r\n\r\nexport const storedProcedureRequestSend = (storedProcedureInfo) => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_SEND,\r\n    payload: {...storedProcedureInfo}\r\n})\r\n\r\nexport const storedProcedureRequestSuccess = (data) => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_SUCCESS,\r\n    payload: {\r\n        data\r\n    }\r\n})\r\n\r\nexport const storedProcedureRequestFailure = () => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_FAILURE\r\n})\r\n\r\nexport const storedProcedureRequestProcessing = () => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_PROCESSING\r\n})\r\n\r\nexport const addLayer = (newLayer) => ({\r\n    type: visualizationActionTypes.ADD_LAYER,\r\n    payload: {\r\n        newLayer\r\n    }\r\n})\r\n\r\nexport const storeSampleData = sampleData => ({\r\n    type: visualizationActionTypes.STORE_SAMPLE_DATA,\r\n    payload: {\r\n        sampleData\r\n    }\r\n})\r\n\r\nexport const addMap = (mapInfo) => ({\r\n    type: visualizationActionTypes.ADD_MAP,\r\n    payload: {\r\n        mapInfo\r\n    }\r\n})\r\n\r\nexport const addChart = (chartInfo) => ({\r\n    type: visualizationActionTypes.ADD_CHART,\r\n    payload: {\r\n        chartInfo\r\n    }\r\n})\r\n\r\nexport const clearCharts = () => ({\r\n    type: visualizationActionTypes.CLEAR_CHARTS\r\n})\r\n\r\nexport const clearMaps = () => ({\r\n    type: visualizationActionTypes.CLEAR_MAPS\r\n})\r\n\r\nexport const deleteChart = (chartIndex) => ({\r\n    type: visualizationActionTypes.DELETE_CHART,\r\n    payload: {\r\n        chartIndex\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestSend = (tableName, datasetLongName) => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_SEND,\r\n    payload: {\r\n        tableName,\r\n        datasetLongName\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestProcessing = () => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_PROCESSING\r\n})\r\n\r\nexport const tableStatsRequestSuccess = (tableStats, datasetLongName) => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_SUCCESS,\r\n    payload: {\r\n        tableStats,\r\n        datasetLongName\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestFailure = () => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_FAILURE\r\n})\r\n\r\nexport const cruiseTrajectoryRequestSend = (id) => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SEND,\r\n    payload: {\r\n        id\r\n    }\r\n})\r\n\r\nexport const cruiseTrajectoryRequestSuccess = (trajectory) => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SUCCESS,\r\n    payload: {\r\n        trajectory\r\n    }\r\n})\r\n\r\nexport const cruiseTrajectoryRequestFailure = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_FAILURE,\r\n})\r\n\r\nexport const cruiseTrajectoryRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_PROCESSING,\r\n})\r\n\r\nexport const cruiseTrajectoryClear = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_CLEAR\r\n})\r\n\r\nexport const cruiseListRequestSend = (id) => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_SEND,\r\n})\r\n\r\nexport const cruiseListRequestSuccess = (cruiseList) => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_SUCCESS,\r\n    payload: {\r\n        cruiseList\r\n    }\r\n})\r\n\r\nexport const cruiseListRequestFailure = () => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_FAILURE,\r\n})\r\n\r\nexport const cruiseListRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_PROCESSING,\r\n})\r\n\r\nexport const triggerShowCharts = () => ({\r\n    type: visualizationActionTypes.TRIGGER_SHOW_CHARTS\r\n})\r\n\r\nexport const completedShowCharts = () => ({\r\n    type: visualizationActionTypes.COMPLETED_SHOW_CHARTS\r\n})\r\n\r\nexport const csvDownloadRequestSend = (query, fileName, tableName) => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SEND,\r\n    payload: {\r\n        query,\r\n        fileName,\r\n        tableName\r\n    }\r\n})\r\n\r\nexport const csvDownloadRequestFailure = () => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_FAILURE\r\n})\r\n\r\nexport const csvDownloadRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_PROCESSING\r\n})\r\n\r\nexport const csvDownloadRequestSuccess = (text) => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SUCCESS,\r\n    payload: {\r\n        text\r\n    }\r\n})\r\n\r\n//dataset download\r\nexport const downloadTextAsCsv = (text, fileName) => ({\r\n    type: visualizationActionTypes.DOWNLOAD_TEXT_AS_CSV,\r\n    payload: {\r\n        text,\r\n        fileName\r\n    }\r\n})\r\n\r\nexport const csvFromVizRequestSend = (vizObject, tableName, shortName, longName) => ({\r\n    type: visualizationActionTypes.CSV_FROM_VIZ_REQUEST_SEND,\r\n    payload: {\r\n        vizObject,\r\n        tableName,\r\n        shortName,\r\n        longName\r\n    }\r\n})","import * as dataSubmissionActionTypes from '../actionTypes/dataSubmission';\r\n\r\nexport const retrieveDataSubmissionsByUser = () => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_SUBMISSIONS_BY_USER\r\n});\r\n\r\nexport const addSubmissionComment = (submissionID, comment) => ({\r\n    type: dataSubmissionActionTypes.ADD_SUBMISSION_COMMENT,\r\n    payload: {\r\n        submissionID,\r\n        comment\r\n    }\r\n});\r\n\r\nexport const retrieveSubmissionCommentHistory = (submissionID) => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_SUBMISSION_COMMENT_HISTORY,\r\n    payload: {\r\n        submissionID\r\n    }\r\n});\r\n\r\nexport const uploadSubmission = ({ file, datasetName }) => ({\r\n    type: dataSubmissionActionTypes.UPLOAD_SUBMISSION,\r\n    payload: {\r\n        file,\r\n        datasetName\r\n    }\r\n});\r\n\r\nexport const setSubmissionPhase = (submissionID, phaseID) => ({\r\n    type: dataSubmissionActionTypes.SET_SUBMISSION_PHASE,\r\n    payload: {\r\n        submissionID,\r\n        phaseID\r\n    }\r\n});\r\n\r\nexport const storeSubmissions = (submissions) => ({\r\n    type: dataSubmissionActionTypes.STORE_SUBMISSIONS,\r\n    payload: {\r\n        submissions\r\n    }\r\n})\r\n\r\nexport const storeSubmissionComments = (payload) => ({\r\n    type: dataSubmissionActionTypes.STORE_SUBMISSION_COMMENTS,\r\n    payload\r\n});\r\n\r\nexport const retrieveAllSubmissions = () => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_ALL_SUBMISSIONS\r\n});\r\n\r\nexport const setSubmissionCommentHistoryRetrievalState = (state) => ({\r\n    type: dataSubmissionActionTypes.SET_SUBMISSION_COMMENT_HISTORY_RETRIEVAL_STATE,\r\n    payload: {\r\n        state\r\n    }\r\n});\r\n\r\nexport const retrieveMostRecentFile = (submissionID) => ({\r\n    type: dataSubmissionActionTypes.RETRIEVE_MOST_RECENT_FILE,\r\n    payload: {\r\n        submissionID\r\n    }\r\n});\r\n\r\nexport const storeSubmissionFile = (file) => ({\r\n    type: dataSubmissionActionTypes.STORE_SUBMISSION_FILE,\r\n    payload: {\r\n        file\r\n    }\r\n});\r\n\r\nexport const checkSubmissionOptionsAndStoreFile = (file) => ({\r\n    type: dataSubmissionActionTypes.CHECK_SUBMISSION_OPTIONS_AND_STORE_FILE,\r\n    payload: {\r\n        file\r\n    }\r\n});\r\n\r\nexport const setUploadState = (state) => ({\r\n    type: dataSubmissionActionTypes.SET_UPLOAD_STATE,\r\n    payload: {\r\n        state\r\n    }\r\n});\r\n\r\nexport const downloadMostRecentFile = (submissionID) => ({\r\n    type: dataSubmissionActionTypes.DOWNLOAD_MOST_RECENT_FILE,\r\n    payload: {\r\n        submissionID\r\n    }\r\n})","export const apiUrl = window.location.origin === 'http://localhost:3000' ? 'http://localhost:8080' : window.location.origin;","const spatialResolutions = {\r\n    irregular: 'Irregular',\r\n    halfDegree: '1/2° X 1/2°' ,\r\n    quarterDegree: '1/4° X 1/4°' ,\r\n    twentyFifthDegree: '1/25° X 1/25°' ,\r\n    fourKm: '4km X 4km',\r\n    twelfthDegree: '1/12° X 1/12°',\r\n    seventyKm: '70km X 70km',\r\n    oneDegree: '1° X 1°',\r\n    nineKm: '9km X 9km',\r\n    twentyFiveKm: '25km X 25km'\r\n}\r\n\r\nexport default spatialResolutions;","import spatialResolutions from '../Enums/spatialResolutions';\r\n\r\nconst mapSpatialResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [spatialResolutions.halfDegree] : .5,\r\n        [spatialResolutions.quarterDegree] : .25,\r\n        [spatialResolutions.twentyFifthDegree] : .04,\r\n        [spatialResolutions.fourKm] : .041672,\r\n        [spatialResolutions.twelfthDegree] : .083333,\r\n        [spatialResolutions.oneDegree] : 1,\r\n        [spatialResolutions.seventyKm] : .25,\r\n        [spatialResolutions.nineKm] : .083333,\r\n        [spatialResolutions.twentyFiveKm] : .23148\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapSpatialResolutionToNumber;","// Flattens an array by 1 level\r\n// [[[],[]], [[],[]], [[],[]]] => [[], [], [], [], [], []]\r\n\r\nconst flattenArray = (arr) => {\r\n    let flattenedArray = [];\r\n\r\n    for(let i = 0; i < arr.length; i++){\r\n        for(let j = 0; j < arr[i].length; j++){\r\n            flattenedArray.push(arr[i][j]);\r\n        }\r\n    }\r\n\r\n    return flattenedArray;\r\n}\r\n\r\nexport default flattenArray;","// Interval is number of indices between changes in this parameter, or in order words\r\n// how many times will we see the same value for this parameter in a row before it changes\r\n// as we iterate through the values array.\r\n// We use modulo for cases where data.length / interval is larger than the number of \r\n// distinct values for that parameter.\r\n\r\nconst splitData = (data, changeInterval, numDistinct) => {\r\n    var splitData = [];\r\n\r\n    for(let i = 0; i < numDistinct; i++){\r\n        splitData.push([]);\r\n    }\r\n\r\n    for(let i = 0; i < data.length; i++){\r\n        let index = Math.floor(i / changeInterval) % numDistinct;\r\n        splitData[index].push(data[i]);\r\n    }\r\n\r\n    return splitData;\r\n}\r\n\r\nexport default splitData;","// mergeTargetDistance - number of hops between arrays being merged\r\n// mergeTargetNumber - number of arrays being merged - implicit\r\n// nextStartDistance - once a merge is complete how many hops to next start\r\nconst mergeArraysAndComputeMeans = (data, mergeTargetDistance, nextMergeStartDistance, numArraysPerMerge) => {\r\n    let mergedArrays = [];\r\n\r\n    let travelDistance = mergeTargetDistance * (numArraysPerMerge - 1);\r\n    \r\n    // Find each merging start point\r\n    for(let i = 0; i + travelDistance < data.length; i += nextMergeStartDistance){\r\n        let subArray = [];\r\n\r\n        // Iterate through each value in the first array of this merge. Count\r\n        // the number of values summed so we can ignore nulls and compute a mean.\r\n        for(let j = 0; j < data[i].length; j ++){\r\n            let sum = 0;\r\n            let count = 0;\r\n\r\n            // Aggregate values of all merge targets\r\n            for(let k = i; k < i + (mergeTargetDistance * numArraysPerMerge); k += mergeTargetDistance){\r\n                if(isNaN(data[k][j])) {\r\n                    continue;\r\n                } else {                    \r\n                    sum += data[k][j];\r\n                    count ++;\r\n                }\r\n            }\r\n            subArray.push(count < 1 ? null : sum / (count));\r\n        }\r\n\r\n        mergedArrays.push(subArray)\r\n    }\r\n\r\n    return mergedArrays;\r\n}\r\n\r\nexport default mergeArraysAndComputeMeans;","const mergeArrays = (data, mergeTargetDistance, nextMergeStartDistance, numArraysPerMerge) => {\r\n    let mergedArrays = [];\r\n\r\n    let travelDistance = mergeTargetDistance * (numArraysPerMerge - 1);\r\n\r\n    // Find each merge start point\r\n    for(let i = 0; i + travelDistance < data.length; i += nextMergeStartDistance){\r\n        let subArray = [];\r\n\r\n        for(let j = i; j <= i + travelDistance; j += mergeTargetDistance){\r\n            subArray = [...subArray, ...data[j]];\r\n        }\r\n\r\n        mergedArrays.push(subArray);\r\n    }\r\n   \r\n    return mergedArrays;\r\n}\r\n\r\nexport default mergeArrays;\r\n\r\n","const subTypes= {\r\n    sectionMap: 'Section Map',\r\n    contourSectionMap: 'Contour Section Map',\r\n    timeSeries: 'Time Series',\r\n    histogram: 'Histogram',\r\n    depthProfile: 'Depth Profile',\r\n    heatmap: 'Heatmap',\r\n    contourMap: 'Contour Map',\r\n    sparse: 'Sparse'\r\n}\r\n\r\nexport default subTypes;","const temporalResolutions = {\r\n    threeMinutes: 'Three Minutes',\r\n    sixHourly: 'Six Hourly',\r\n    daily: 'Daily',\r\n    weekly: 'Weekly',\r\n    monthly: 'Monthly',\r\n    annual: 'Annual',\r\n    irregular: 'Irregular',\r\n    monthlyClimatology: 'Monthly Climatology',\r\n    threeDay: 'Three Days',\r\n    eightDayRunning: 'Eight Day Running',\r\n    eightDays: 'Eight Days '\r\n}\r\n\r\nexport default temporalResolutions;","import { quantile, extent } from 'd3-array';\r\n\r\nimport mapSpatialResolutionToNumber from '../Utility/mapSpatialResolutionToNumber';\r\nimport flattenArray from '../Utility/flattenArray';\r\nimport splitData from '../Utility/splitData';\r\nimport mergeArraysAndComputeMeans from '../Utility/mergeArraysAndComputeMeans';\r\nimport mergeArrays from '../Utility/mergeArrays';\r\n\r\nimport vizSubTypes from '../Enums/visualizationSubTypes';\r\nimport temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass SpaceTimeData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n\r\n        this.hasDepth = null;\r\n        this.hasHours = null;\r\n        this.isMonthly = null;\r\n\r\n        this.depths = new Set();\r\n        this.dates = new Set();\r\n        this.variableValues = [];\r\n\r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n        this.indexAdjust = null;\r\n        this.payload = payload;\r\n        this.lats = [];\r\n        this.lons = [];\r\n\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n        this.latMin = null;\r\n        this.latMax = null;\r\n\r\n        this.distinctLatCount = null;\r\n        this.distinctLonCount = null;\r\n    }\r\n\r\n    add(row) {\r\n        \r\n        let lat = parseFloat(row[1]);\r\n        let _lon = parseFloat(row[2]);\r\n        let lon = _lon < this.parameters.lon1 ? _lon + 360 : _lon;\r\n\r\n        if(this.hasDepth === null) {\r\n            this.hasHour = this.metadata.Table_Name === 'tblWind_NRT';\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n            this.hasDepth = row.length === 5 && !this.hasHour;\r\n            this.indexAdjust = this.hasDepth || this.hasHour? 1 : 0;\r\n            this.lonMin = lon;\r\n            this.lonMax = lon;\r\n            this.latMin = lat;\r\n            this.latMax = lat;\r\n        }\r\n\r\n        let value = parseFloat(row[3 + this.indexAdjust]);\r\n\r\n        if(this.hasDepth){\r\n            this.depths.add(row[3]);\r\n        }\r\n\r\n        var time;\r\n        if(this.hasHour){\r\n            time = new Date(row[0]);\r\n            time.setUTCHours(row[3])\r\n            time = time.toISOString();\r\n        } else time = row[0];\r\n        this.dates.add(time);\r\n        this.lats.push(lat);\r\n\r\n        this.lons.push(lon);\r\n\r\n        if(lon < this.lonMin) this.lonMin = lon;\r\n        if(lon > this.lonMax) this.lonMax = lon;\r\n        if(lat < this.latMin) this.latMin = lat;\r\n        if(lat > this.latMax) this.latMax = lat;\r\n\r\n        this.variableValues.push(value);\r\n    }\r\n\r\n    finalize() {\r\n\r\n        if(this.depths.size === 0) this.depths.add('Surface');\r\n\r\n        this.lonCount = this.lons.length / this.dates.size / this.depths.size;\r\n        this.latCount = this.lats.length / this.dates.size / this.depths.size;\r\n\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : parseFloat(quantile1.toPrecision(4));\r\n        this.zMax = quantile2 === undefined ? null : parseFloat(quantile2.toPrecision(4));\r\n        this.extent = extent(this.variableValues);\r\n\r\n        let spatialResolution = mapSpatialResolutionToNumber(this.metadata.Spatial_Resolution);\r\n        \r\n        this.distinctLatCount = Math.round((this.latMax - this.latMin) / spatialResolution) + 1;\r\n        this.distinctLonCount = Math.round((this.lonMax - this.lonMin) / spatialResolution) + 1;\r\n    }\r\n\r\n    generatePlotData(subType, splitByDate, splitByDepth) {        \r\n\r\n        // Intervals are the number of indices between each change for that parameter\r\n        // Intervals can change if you split out of order\r\n        const latInterval = this.distinctLonCount;\r\n        const depthInterval = latInterval * this.distinctLatCount;\r\n        const dateInterval = depthInterval * this.depths.size;\r\n\r\n        // an array of arrays containing variable values, each of which will become a chart\r\n        var variableValueSubsets;\r\n        \r\n        variableValueSubsets = splitData(this.variableValues, dateInterval, this.dates.size);\r\n        variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, depthInterval, this.depths.size));\r\n        variableValueSubsets = flattenArray(variableValueSubsets);\r\n\r\n        // Contour and heatmap compute mean variable values per lat and lon\r\n        // when not split by date and/or time\r\n        if(subType === vizSubTypes.contourMap || subType === vizSubTypes.heatmap) {\r\n            if(splitByDate && splitByDepth) {\r\n                // pass\r\n            } else if (splitByDate){\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    1, \r\n                    this.depths.size, \r\n                    this.depths.size\r\n                    );\r\n    \r\n            } else if (splitByDepth){\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    this.depths.size, \r\n                    1, \r\n                    this.dates.size\r\n                    );\r\n    \r\n            } else {\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    1, \r\n                    variableValueSubsets.length, \r\n                    variableValueSubsets.length\r\n                    );            \r\n            }\r\n        } \r\n        \r\n        // Histograms split and aggregate without computing means\r\n        else if (subType === vizSubTypes.histogram) {\r\n            if(splitByDate && splitByDepth) {\r\n                // pass\r\n            } else if (splitByDate){\r\n                variableValueSubsets = mergeArrays(\r\n                    variableValueSubsets, \r\n                    1,\r\n                    this.depths.size,\r\n                    this.depths.size\r\n                    );\r\n            } else if (splitByDepth){\r\n                variableValueSubsets = mergeArrays(\r\n                    variableValueSubsets,\r\n                    this.depths.size,\r\n                    1,\r\n                    this.dates.size\r\n                );\r\n            } else {\r\n                variableValueSubsets = [this.variableValues];\r\n            }\r\n        }\r\n\r\n        // Nothing here yet\r\n        else {}\r\n\r\n        return variableValueSubsets;\r\n    }\r\n\r\n    generateCsv = () => {\r\n        let dates = Array.from(this.dates);\r\n        let depths = Array.from(this.depths);\r\n        var csvArray;\r\n\r\n        if(this.hasDepth){\r\n            csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${this.lats[i]},${this.lons[i] > 180 ? this.lons[i] - 360 : this.lons[i]},${depths[Math.floor(i / (this.variableValues.length / (dates.length * depths.length))) % depths.length]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n\r\n        } else {\r\n            csvArray = [`time,lat,lon,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${this.lats[i]},${this.lons[i] > 180 ? this.lons[i] - 360 : this.lons[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SpaceTimeData;","const storedProcedures = {\r\n    sectionMap: 'uspSectionMap',\r\n    timeSeries: 'uspTimeSeries',\r\n    spaceTime: 'uspSpaceTime',\r\n    depthProfile: 'uspDepthProfile'\r\n}\r\n\r\nexport default storedProcedures;","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass TimeSeriesData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.variableValues = [];\r\n        this.stds = [];\r\n        this.dates = [];\r\n        this.lat = null;\r\n        this.lon = null;\r\n        this.depth = null;\r\n        this.depthIndexAdjust = null;\r\n    }\r\n\r\n    add(row) {\r\n        if(this.lat === null){\r\n            this.depthIndexAdjust = row.length === 6 ? 1 : 0;\r\n            this.lat = row[1];\r\n            this.lon = row[2];\r\n            this.depth = row.length === 6 ? row[3] : false;\r\n            this.hasHour = this.metadata.Table_Name === 'tblWind_NRT';\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }\r\n\r\n        this.variableValues.push(row[3 + this.depthIndexAdjust]);\r\n        this.stds.push(row[4 + this.depthIndexAdjust]);\r\n        this.dates.push(row[0]);\r\n    }\r\n\r\n    finalize() {\r\n        if(this.depth === false) this.depth = 'Surface';\r\n    }\r\n\r\n    generatePlotData() {\r\n        return this.variableValues;\r\n    }    \r\n\r\n    generateCsv() {\r\n        let csvString = `time,${this.parameters.fields},${this.parameters.fields}_std`;\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvString += `\\n${this.dates[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]},${isNaN(this.stds[i]) ? '' : this.stds[i]}`;\r\n        }\r\n\r\n        return csvString;\r\n    }\r\n}\r\n\r\nexport default TimeSeriesData;","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass DepthProfileData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.variableValues = [];\r\n        this.stds = [];\r\n        this.lat = null;\r\n        this.lon = null;\r\n        this.depths = [];\r\n    }\r\n\r\n    add(row) {\r\n        if(this.lat === null){\r\n            this.lat = parseFloat(row[0]);\r\n            this.lon = parseFloat(row[1]);\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }\r\n\r\n        this.variableValues.push(parseFloat(row[2]));\r\n        this.stds.push(parseFloat(row[3]));\r\n        this.depths.push(parseFloat(row[4]));\r\n    }\r\n\r\n    finalize() {\r\n        // pass\r\n    }\r\n\r\n    generatePlotData() {\r\n        return this.variableValues;\r\n    }\r\n    \r\n    generateCsv() {\r\n        let csvString = `depth,${this.parameters.fields},${this.parameters.fields}_std`;\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvString += `\\n${this.depths[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]},${isNaN(this.stds[i]) ? '' : this.stds[i]}`;\r\n        }\r\n\r\n        return csvString;\r\n    }\r\n}\r\n\r\nexport default DepthProfileData;","import { quantile, extent } from 'd3-array';\r\n\r\nimport flattenArray from '../Utility/flattenArray';\r\nimport splitData from '../Utility/splitData';\r\nimport mergeArraysAndComputeMeans from '../Utility/mergeArraysAndComputeMeans';\r\nimport temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass SectionMapData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.subType = payload.subType\r\n        \r\n        this.dates = new Set();\r\n        this.depths = new Set();\r\n        this.lats = new Set();\r\n        this.lons = new Set();\r\n\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n\r\n        this.variableValues = [];\r\n        \r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n\r\n        this.orientation = null;\r\n    }\r\n\r\n    // time, lat, lon, depth, value\r\n    add(row) {        \r\n        const time = row[0];\r\n        const lat = parseFloat(row[1]);\r\n        var _lon = parseFloat(row[2]);\r\n        const lon = _lon < this.parameters.lon1 ? _lon + 360 : _lon;\r\n        const depth = parseFloat(row[3]);\r\n        const value = parseFloat(row[4]);\r\n\r\n        if(this.variableValues.length === 0) {\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }        \r\n\r\n        this.depths.add(depth);\r\n        this.dates.add(time);\r\n        this.lats.add(lat);\r\n        this.lons.add(lon);\r\n\r\n        this.variableValues.push(value);\r\n    }\r\n\r\n    finalize() {\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : parseFloat(quantile1.toPrecision(4));\r\n        this.zMax = quantile2 === undefined ? null : parseFloat(quantile2.toPrecision(4));\r\n\r\n        this.extent = extent(this.variableValues);\r\n\r\n        this.orientation = this.lons.size > this.lats.size ? 'zonal' : 'meridional';\r\n\r\n        let lonArray = Array.from(this.lons);\r\n        this.lonMax = Math.max(...lonArray);\r\n        this.lonMin = Math.min(...lonArray);\r\n    }\r\n\r\n    // Direction is meridional or zonal\r\n    generatePlotData(orientation, splitByDate, splitBySpace) {\r\n        let latCount = this.lats.size;\r\n        let lonCount = this.lons.size;\r\n\r\n        // Intervals are the number of indices between each change for that parameter\r\n        // Intervals can change if you split out of order\r\n        const lonInterval = this.depths.size;\r\n        const latInterval = lonInterval * lonCount;\r\n        const dateInterval = latInterval * latCount;\r\n\r\n        var variableValueSubsets = splitData(this.variableValues, dateInterval, this.dates.size);\r\n\r\n        var spaceCount;\r\n\r\n        if(orientation === 'zonal') {\r\n            variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, latInterval, latCount));\r\n            variableValueSubsets = flattenArray(variableValueSubsets);\r\n            spaceCount = latCount;\r\n        }\r\n\r\n        else {\r\n            variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, lonInterval, lonCount));\r\n            variableValueSubsets = flattenArray(variableValueSubsets);\r\n            spaceCount = lonCount;\r\n        }\r\n\r\n        if(splitByDate && splitBySpace){\r\n            // pass\r\n        } else if (splitByDate){\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                1,\r\n                spaceCount,\r\n                spaceCount\r\n            )\r\n        } else if (splitBySpace) {\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                spaceCount,\r\n                1,\r\n                this.dates.size\r\n            )\r\n        } else {\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                1,\r\n                variableValueSubsets.length,\r\n                variableValueSubsets.length\r\n            )\r\n        }\r\n\r\n        return variableValueSubsets;\r\n    }\r\n\r\n    generateCsv = () => {\r\n        let dates = Array.from(this.dates);\r\n        let depths = Array.from(this.depths);\r\n        let lons = Array.from(this.lons);\r\n        let lats = Array.from(this.lats);\r\n\r\n        const lonInterval = depths.length;\r\n        const latInterval = lonInterval * lons.length;\r\n\r\n        var csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${lats[Math.floor(i / latInterval) % lats.length]},${lons[Math.floor(i / lonInterval) % lons.length]},${depths[i % depths.length]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SectionMapData;","import { quantile, extent } from 'd3-array';\r\n\r\nclass SparseData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.hasDepth = null;\r\n        this.variableIndex = payload.metadata.Depth_Min ? 4 : 3;\r\n        this.depths = [];\r\n        this.times = [];\r\n        this.variableValues = [];\r\n        this.lats = [];\r\n        this.lons = [];\r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n\r\n        this.latMin = null;\r\n        this.latMax = null;\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n    }\r\n\r\n    add(row) {\r\n        let lat = parseFloat(row[1]);\r\n        let lon = parseFloat(row[2]);\r\n\r\n        if(this.hasDepth === null){\r\n            this.hasDepth = Boolean(this.metadata.Depth_Min);\r\n            this.latMin = lat;\r\n            this.latMax = lat;\r\n            this.lonMin = lon;\r\n            this.lonMax = lon;\r\n        }\r\n\r\n        if(row[this.variableIndex]){\r\n\r\n            this.times.push(row[0]);\r\n            this.lats.push(lat);\r\n            this.lons.push(lon);\r\n            if(this.hasDepth) this.depths.push(parseFloat(row[3]));\r\n            this.variableValues.push(parseFloat(row[this.variableIndex]));\r\n\r\n            if(lat < this.latMin) this.latMin = lat;\r\n            if(lat > this.latMax) this.latMax = lat;\r\n            \r\n            if(lon < this.lonMin) this.lonMin = lon;\r\n            if(lon > this.lonMax) this.lonMax = lon;\r\n        }\r\n    }\r\n\r\n    finalize() {\r\n\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : quantile1.toPrecision(4);\r\n        this.zMax = quantile2 === undefined ? null : quantile2.toPrecision(4);\r\n\r\n        this.extent = extent(this.variableValues);\r\n\r\n        let latDistance = Math.abs(this.latMax - this.latMin);\r\n        let lonDistance = Math.abs(this.lonMax - this.lonMin);\r\n        let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n\r\n        let _zoom = 4 - Math.floor(distance / 12);\r\n        this.zoom = _zoom < 0 ? 0 : _zoom;\r\n\r\n        let lonCenter = (this.lonMax + this.lonMin) / 2;\r\n        let latCenter = (this.latMax + this.latMin) / 2;\r\n        this.center = { \r\n            lon: lonCenter, \r\n            lat: latCenter\r\n        }\r\n    }\r\n\r\n    generatePlotData(subType, splitByDate, splitByDepth) {\r\n        return this.variableValues;\r\n    }\r\n\r\n    generateCsv(){\r\n        var csvArray;\r\n\r\n        if(this.hasDepth){\r\n            csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${this.times[i]},${this.lats[i]},${this.lons[i]},${this.depths[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n\r\n        } else {\r\n            csvArray = [`time,lat,lon,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${this.times[i]},${this.lats[i]},${this.lons[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SparseData;","import CSVParser from 'csv-parse';\r\n\r\nimport { apiUrl } from './config';\r\nimport SpaceTimeData from './Classes/SpaceTimeData';\r\n\r\nimport storedProcedures from './Enums/storedProcedures';\r\nimport TimeSeriesData from './Classes/TimeSeriesData';\r\nimport DepthProfileData from './Classes/DepthProfileData';\r\nimport SectionMapData from './Classes/SectionMapData';\r\nimport SparseData from './Classes/SparseData';\r\n\r\nimport encoding from 'text-encoding';\r\n\r\nconst fetchOptions = {\r\n    credentials: 'include'\r\n}\r\n\r\nconst postOptions = {\r\n    ...fetchOptions,\r\n    method: 'POST',\r\n    headers: {\"Content-Type\": \"application/json\"}\r\n}\r\n\r\nconst storedProcedureParametersToUri = (parameters) => {\r\n    return Object.keys(parameters).reduce(function (queryString, key, i) {\r\n        return `${queryString}${i===0 ? '' : '&&'}${key}=${parameters[key]}`;\r\n      }, '');\r\n}\r\n\r\nconst api = {};\r\napi.user = {};\r\napi.dataRetrieval = {};\r\napi.catalog = {};\r\napi.visualization = {};\r\napi.dataSubmission = {};\r\n\r\napi.user.login = (user) => {\r\n    return fetch(apiUrl + '/user/signin', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    });\r\n}\r\n\r\napi.user.logout = () => {\r\n    return fetch(apiUrl + '/user/signout', fetchOptions);\r\n}\r\n\r\napi.user.register = (user) => {\r\n    return fetch(apiUrl + '/user/signup', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    })\r\n}\r\n\r\napi.user.validate = (user) => {\r\n    return fetch(apiUrl + '/user/validate', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    })\r\n}\r\n\r\napi.user.googleLoginRequest = async(userIDToken) => {\r\n    let response = await fetch(apiUrl + '/user/googleauth', {\r\n        ...postOptions,\r\n        body: JSON.stringify({userIDToken}),\r\n    })\r\n\r\n    return response;\r\n}\r\n\r\napi.user.contactUs = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/contactus', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.user.changePassword = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/changepassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.user.changeEmail = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/changeemail', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.catalog.retrieve = async() => {\r\n\r\n    const decoder = new encoding.TextDecoder();\r\n    let catalog = [];\r\n\r\n    let csvParser = CSVParser({columns:true});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record\r\n        while (record = csvParser.read()) {\r\n            catalog.push(record)\r\n        }\r\n    })\r\n\r\n    let response = await fetch(apiUrl + '/api/catalog', fetchOptions);\r\n\r\n    if(!response.ok) return false;\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n    return catalog;\r\n}\r\n\r\napi.catalog.datasets = async() => {\r\n    const decoder = new encoding.TextDecoder();\r\n    let datasets = {};\r\n\r\n    let csvParser = CSVParser({columns:true});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record\r\n        while (record = csvParser.read()) {\r\n            datasets[record.Dataset_Long_Name.trim()] = record;\r\n        }\r\n    })\r\n\r\n    let response = await fetch(apiUrl + '/api/catalog/datasets', fetchOptions);\r\n\r\n    if(!response.ok) return false;\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n    return datasets;\r\n}\r\n\r\napi.catalog.submissionOptions = async() => {\r\n    return await fetch(apiUrl + '/api/catalog/submissionoptions');\r\n}\r\n\r\napi.user.keyRetrieval = async() => {\r\n    return await fetch(apiUrl + '/user/retrieveapikeys', fetchOptions);\r\n}\r\n\r\napi.user.keyCreation = async(description) => {\r\n    return await fetch(apiUrl + `/user/generateapikey?description=${description.trim()}`, fetchOptions);\r\n}\r\n\r\napi.user.updateUserInfo = async(userInfo) => {\r\n    return await fetch(apiUrl + '/api/user/updateinfo', {\r\n        ...postOptions,\r\n        body: JSON.stringify(userInfo),\r\n    });\r\n}\r\n\r\napi.user.recoverPassword = async(email) => {\r\n    fetch(apiUrl + '/api/user/forgotpassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify({email})\r\n    })\r\n}\r\n\r\napi.user.choosePassword = async({password, token}) => {\r\n    return await fetch(apiUrl + '/api/user/choosepassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify({password, token})\r\n    })\r\n}\r\n\r\napi.visualization.storedProcedureRequest = async(payload) => {\r\n    const decoder = new encoding.TextDecoder();\r\n    var vizData;\r\n\r\n    switch(payload.parameters.spName) {\r\n        case storedProcedures.spaceTime:\r\n            if(payload.subType === 'Sparse') vizData = new SparseData(payload);\r\n            else vizData = new SpaceTimeData(payload);\r\n            break;\r\n\r\n        case storedProcedures.timeSeries:\r\n            vizData = new TimeSeriesData(payload);\r\n            break;\r\n\r\n        case storedProcedures.depthProfile:\r\n            vizData = new DepthProfileData(payload);\r\n            break;\r\n\r\n        case storedProcedures.sectionMap:\r\n            vizData = new SectionMapData(payload);\r\n            break;\r\n\r\n        default:\r\n            console.log('Unknown sproc name');\r\n    }\r\n    \r\n    let response = await fetch(apiUrl + '/api/data/sp?' + storedProcedureParametersToUri(payload.parameters), fetchOptions);\r\n\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n\r\n    let csvParser = CSVParser({from: 2});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record;\r\n        while (record = csvParser.read()) {\r\n            vizData.add(record);\r\n        }\r\n    })\r\n\r\n    csvParser.on('error', (e) => {\r\n        console.log(e);\r\n    })\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n\r\n    return vizData;\r\n}\r\n\r\n\r\napi.visualization.getTableStats = async(tableName) => {\r\n    let response = await fetch(apiUrl + '/dataretrieval/tablestats?table=' + tableName, fetchOptions);\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n    return await response.json();\r\n}\r\n\r\napi.visualization.cruiseTrajectoryRequest = async(payload) => {\r\n    const decoder = new encoding.TextDecoder();\r\n    let trajectory = {lats: [], lons: []};\r\n\r\n    let response = await fetch(apiUrl + '/api/data/cruisetrajectory?' + `id=${payload.id}`, fetchOptions);\r\n\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n\r\n    let csvParser = CSVParser({from: 2});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record;\r\n        while (record = csvParser.read()) {\r\n            trajectory.lats.push(parseFloat(record[1]));\r\n            trajectory.lons.push(parseFloat(record[2]));\r\n        }\r\n    })\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n\r\n    return trajectory;\r\n}\r\n\r\napi.visualization.cruiseList = async() => {\r\n    let response = await fetch(apiUrl + '/api/data/cruiselist', fetchOptions);\r\n\r\n    if(response.ok){\r\n        return await response.json();\r\n    } else return false;   \r\n}\r\n\r\napi.visualization.csvDownload = async(query) => {\r\n    if(!query) return null;\r\n    let response = await fetch(apiUrl + `/api/data/query?query=${query}`, fetchOptions);\r\n    if(response.ok) return await response.text();\r\n    else return {failed: true, status: response.status}\r\n}\r\n\r\napi.dataSubmission.retrieveSubmissionByUser = async() => {\r\n    return await fetch(apiUrl + `/api/datasubmission/submissionsbyuser`, fetchOptions);\r\n}\r\n\r\napi.dataSubmission.retrieveAllSubmissions = async() => {\r\n    return await fetch(apiUrl + `/api/datasubmission/submissions`, fetchOptions);\r\n}\r\n\r\napi.dataSubmission.addSubmissionComment = async(payload) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/addcomment', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload),\r\n    });\r\n}\r\n\r\napi.dataSubmission.beginUploadSession = async(formData) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/beginuploadsession', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: formData\r\n    });\r\n}\r\n\r\napi.dataSubmission.uploadPart = async(formData) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/uploadfilepart', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: formData\r\n    });\r\n}\r\n\r\napi.dataSubmission.commitUpload = async(formData) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/commitupload', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: formData\r\n    });\r\n}\r\n\r\napi.dataSubmission.setPhase = async(formData) => {\r\n    return await fetch(apiUrl + '/api/datasubmission/setphase', {\r\n        ...postOptions,\r\n        body: JSON.stringify(formData)\r\n    });\r\n}\r\n\r\napi.dataSubmission.retrieveCommentHistory = async(payload) => {\r\n    return await fetch(`${apiUrl}/api/datasubmission/commenthistory?submissionID=${payload.submissionID}`, fetchOptions);\r\n};\r\n\r\napi.dataSubmission.retrieveMostRecentFile = async(submissionID) => {\r\n    return await fetch(`${apiUrl}/api/datasubmission/retrievemostrecentfile?submissionID=${submissionID}`, fetchOptions)\r\n}\r\n\r\napi.dataSubmission.getFileFromLink = async(link) => {\r\n    return await fetch(link);\r\n}\r\n\r\nexport default api;","import { put, takeLatest, all, call, delay, select } from 'redux-saga/effects';\r\n// import { eventChannel } from 'redux-saga';\r\nimport Cookies from 'js-cookie';\r\n// import worker from '../worker';\r\n\r\nimport * as userActions from './actions/user';\r\nimport * as catalogActions from './actions/catalog';\r\nimport * as interfaceActions from './actions/ui';\r\nimport * as visualizationActions from './actions/visualization';\r\nimport * as dataSubmissionActions from './actions/dataSubmission';\r\n\r\nimport * as userActionTypes from './actionTypes/user';\r\nimport * as catalogActionTypes from './actionTypes/catalog';\r\nimport * as visualizationActionTypes from './actionTypes/visualization';\r\nimport * as interfaceActionTypes from './actionTypes/ui';\r\nimport * as dataSubmissionActionTypes from './actionTypes/dataSubmission';\r\n\r\nimport api from '../api';\r\nimport states from '../Enums/asyncRequestStates';\r\n\r\nfunction* userLogin(action) {\r\n    yield put(userActions.userLoginRequestProcessing());\r\n    let result = yield call(api.user.login, action.payload);\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.hideLoginDialog());\r\n        var userInfo = JSON.parse(Cookies.get('UserInfo'));\r\n        yield put(userActions.userLoginRequestSuccess());\r\n        yield put(userActions.storeInfo(userInfo));\r\n        yield put(interfaceActions.snackbarOpen('Login was successful!'))\r\n        if(window.location.pathname === '/login') window.location.href = \"/catalog\";\r\n    } else {\r\n        yield put(userActions.userLoginRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Login failed.'));\r\n    }\r\n}\r\n\r\nfunction* userLogout(){    \r\n    let authInstance = yield window.gapi.auth2.getAuthInstance();\r\n    yield authInstance.signOut();\r\n    yield call(api.user.logout);\r\n    yield put(userActions.destroyInfo());\r\n    yield window.location.href = \"/\";\r\n}\r\n\r\nfunction* userRegistration(action){\r\n    yield put(userActions.userRegistrationRequestProcessing());\r\n    let result = yield call(api.user.register, action.payload);\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.registrationNextActiveStep());\r\n    } else {\r\n        yield put(userActions.userRegistrationRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Registration failed. Please try again later.'))\r\n    }\r\n}\r\n\r\nfunction* userValidation(action){\r\n    yield put(userActions.userValidationRequestProcessing());\r\n    let result = yield call(api.user.validate, action.payload);\r\n    let isValid = yield result.json();\r\n    \r\n    if(isValid){\r\n        yield put(userActions.userValidationRequestSuccess());\r\n        yield put(interfaceActions.registrationNextActiveStep());\r\n    } else {\r\n        yield put(userActions.userValidationRequestFailure());\r\n    }\r\n}\r\n\r\nfunction* googleLoginRequest(action){\r\n    yield put(userActions.googleLoginRequestProcessing());\r\n    let result = yield call(api.user.googleLoginRequest, action.payload.userIDToken);\r\n\r\n    if(result.ok){\r\n        yield put(interfaceActions.hideLoginDialog());\r\n        var userInfo = JSON.parse(Cookies.get('UserInfo'));\r\n        yield put(userActions.userLoginRequestSuccess());\r\n        yield put(userActions.storeInfo(userInfo));\r\n        // yield put(interfaceActions.snackbarOpen('Login was successful!'))\r\n        if(window.location.pathname === '/login') window.location.href = \"/catalog\";\r\n    } else {\r\n        yield put(userActions.userLoginRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Login failed.'));\r\n    }\r\n}\r\n\r\nfunction* catalogRetrieval(){\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    let catalog = yield call(api.catalog.retrieve);\r\n    \r\n    if(!catalog) {\r\n        yield put(catalogActions.retrievalRequestFailure());\r\n    } else{\r\n        yield put(catalogActions.retrievalRequestSuccess(catalog));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* datasetRetrieval(){\r\n    yield put(catalogActions.datasetRetrievalRequestProcessing());\r\n    let datasets = yield call(api.catalog.datasets);\r\n\r\n    if(!datasets){\r\n        yield put(catalogActions.retrievalRequestFailure());\r\n    } else {\r\n        yield put(catalogActions.datasetRetrievalRequestSuccess(datasets));\r\n    }\r\n}\r\n\r\nfunction* keyRetrieval(action){\r\n    let result = yield call(api.user.keyRetrieval);\r\n\r\n    if(result.status === 401){\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n    \r\n    if(!result.ok){\r\n        yield put(userActions.keyRetrievalRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('API Key Retrieval Failed'));\r\n    } else {\r\n        let response = yield result.json();\r\n        yield put(userActions.keyRetrievalRequestSuccess(response.keys));\r\n    }\r\n}\r\n\r\nfunction* keyCreation(action){\r\n    yield put(userActions.keyCreationRequestProcessing());\r\n    let result = yield call(api.user.keyCreation, action.payload.description);\r\n\r\n    if(result.status === 401){\r\n        yield put(userActions.refreshLogin());\r\n        return;\r\n    }\r\n    \r\n    if(!result.ok) yield put(interfaceActions.snackbarOpen(\"We were unable to create a new API key.\"));\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen(\"A new API key was created\"));\r\n        yield put(userActions.keyCreationRequestSuccess());\r\n        yield put(userActions.keyRetrievalRequestSend());        \r\n    }\r\n}\r\n\r\nfunction* queryRequest(action){\r\n    yield put(visualizationActions.queryRequestProcessing());\r\n    let result = yield call(api.visualization.queryRequest, action.payload.query);\r\n    yield put(visualizationActions.storeSampleData(result));\r\n    yield put(visualizationActions.queryRequestSuccess());\r\n}\r\n\r\nfunction* storedProcedureRequest(action){\r\n    yield put(visualizationActions.storedProcedureRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    let result = yield call(api.visualization.storedProcedureRequest, action.payload);\r\n    yield delay(50);\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'));\r\n    yield delay(70);\r\n    \r\n    // Result will be an object containing variable values and describing date shape\r\n    if(result.failed){\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(visualizationActions.storedProcedureRequestFailure());\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(\"An error occurred. Please try again.\"));\r\n        }\r\n    } else {\r\n        if(result.variableValues.length > 0){\r\n            result.finalize();\r\n            yield put(interfaceActions.setLoadingMessage(''));\r\n            yield put(visualizationActions.storedProcedureRequestSuccess());\r\n            // yield put(interfaceActions.snackbarOpen(`${action.payload.subType} ${action.payload.parameters.fields} is ready`));\r\n            yield put(visualizationActions.triggerShowCharts());\r\n            yield put(visualizationActions.addChart({subType: action.payload.subType, data:result}));\r\n            window.scrollTo(0,0);\r\n           \r\n        } else {\r\n            yield put(interfaceActions.setLoadingMessage(''));\r\n            yield put(interfaceActions.snackbarOpen(`No data found for ${action.payload.parameters.fields} in the requested ranges. Try selecting a different date or depth range.`));\r\n        }\r\n    }\r\n}\r\n\r\nfunction* cruiseTrajectoryRequest(action) {\r\n    yield put(visualizationActions.cruiseTrajectoryRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Cruise Data'));\r\n    let result = yield call(api.visualization.cruiseTrajectoryRequest, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n\r\n    if(result.failed){\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(`Unable to Fetch Cruise Data`));\r\n        }\r\n    } else {\r\n        yield put(visualizationActions.cruiseTrajectoryRequestSuccess(result));\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n    }\r\n}\r\n\r\nfunction* cruiseListRequest() {\r\n    yield put(visualizationActions.cruiseListRequestProcessing());\r\n    let cruiseList = yield call(api.visualization.cruiseList);\r\n\r\n    if(!cruiseList) {\r\n        yield put(visualizationActions.cruiseListRequestFailure());\r\n    } else{\r\n        yield put(visualizationActions.cruiseListRequestSuccess(cruiseList));\r\n    }\r\n}\r\n\r\nfunction* tableStatsRequest(action){\r\n    yield put(visualizationActions.tableStatsRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Dataset Information'));\r\n    let result = yield call(api.visualization.getTableStats, action.payload.tableName);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n\r\n    if(result.failed){\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(`Unable to Fetch Dataset Information`));\r\n        }\r\n    } else {\r\n        yield put(visualizationActions.tableStatsRequestSuccess(result, action.payload.datasetLongName));\r\n    }\r\n}\r\n\r\nfunction* csvDownloadRequest(action){\r\n    yield put(visualizationActions.csvDownloadRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    const metadataQuery = `exec uspDatasetMetadata '${action.payload.tableName}'`;\r\n\r\n    let [ dataResponse, metadataResponse ] = yield all([\r\n        call(api.visualization.csvDownload, action.payload.query),\r\n        call(api.visualization.csvDownload, metadataQuery)\r\n    ]);\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''))\r\n    if(dataResponse.failed || metadataResponse.failed) {\r\n        if(dataResponse.status === 401 || metadataResponse.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen('An error occurred. Please try again.'))\r\n        }\r\n    } else {\r\n        if(dataResponse.length > 1) {\r\n            yield put(visualizationActions.downloadTextAsCsv(dataResponse, action.payload.fileName));\r\n            yield put(visualizationActions.downloadTextAsCsv(metadataResponse, action.payload.fileName + '_METADATA'));\r\n        } else yield put(interfaceActions.snackbarOpen('No data found. Please expand query range.'))        \r\n    }\r\n}\r\n\r\n\r\nfunction* csvFromVizRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'));\r\n    const csvData = yield action.payload.vizObject.generateCsv();\r\n\r\n    yield put(interfaceActions.setLoadingMessage('Fetching metadata'));\r\n    const metadataQuery = `exec uspVariableMetadata '${action.payload.tableName}', '${action.payload.shortName}'`;\r\n    let metadataResponse = yield call(api.visualization.csvDownload, metadataQuery);\r\n    yield put(interfaceActions.setLoadingMessage(''))\r\n\r\n    if(metadataResponse.failed) yield put(interfaceActions.snackbarOpen('Failed to download variable metadata'));\r\n\r\n    yield put(visualizationActions.downloadTextAsCsv(csvData, action.payload.longName));\r\n    yield put(visualizationActions.downloadTextAsCsv(metadataResponse, action.payload.longName + '_Metadata'));\r\n}\r\n\r\nfunction* downloadTextAsCsv(action){\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'))\r\n    let csv = action.payload.text;\r\n    const blob = new Blob([csv], {type: 'text/csv'});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.setAttribute('hidden', '');\r\n    a.setAttribute('href', url);\r\n    a.setAttribute('download', `${action.payload.fileName}.csv`);\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    // URL.revokeObjectURL(url); // TODO test this\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* refreshLogin(){\r\n    yield call(api.user.logout);\r\n    yield put(userActions.destroyInfo());\r\n    yield put(interfaceActions.showLoginDialog());\r\n    yield put(interfaceActions.snackbarOpen(\"Your session has expired. Please log in again.\"));\r\n}\r\n\r\nfunction* updateUserInfoRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Updating your information'));\r\n\r\n    let result = yield call(api.user.updateUserInfo, action.payload);\r\n\r\n    if(result.failed){\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(\"An error occurred. Please try again.\"));\r\n        }\r\n    } else {\r\n        yield put(userActions.storeInfo(JSON.parse(Cookies.get('UserInfo'))));\r\n        yield put(interfaceActions.snackbarOpen(\"Your information was updated\"));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* initializeGoogleAuth(){\r\n    try {\r\n        var authInstance = yield window.gapi.auth2.getAuthInstance();\r\n    }\r\n\r\n    catch(e) {\r\n        yield delay(100);\r\n        yield put(userActions.initializeGoogleAuth());\r\n        return;\r\n    }\r\n\r\n    let user = yield authInstance.currentUser.get();\r\n    let authResponse = yield user.getAuthResponse(true);\r\n    if(authResponse) yield put(userActions.googleLoginRequestSend(authResponse.id_token));\r\n}\r\n\r\nfunction* recoverPasswordRequest(action){\r\n    yield call(api.user.recoverPassword, action.payload.email);\r\n}\r\n\r\nfunction* choosePasswordRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming change'));\r\n    let result = yield call(api.user.choosePassword, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    if(result.ok){\r\n        yield put(userActions.choosePasswordRequestSuccess());\r\n    } else {\r\n        yield put(userActions.choosePasswordRequestFailure());\r\n    }\r\n}\r\n\r\nfunction* contactUsRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Sending'));\r\n    let result = yield call(api.user.contactUs, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    if(result.ok){\r\n        yield put(interfaceActions.snackbarOpen('Your message was successfully sent!'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('Message failed. Please try again or contact simonscmap@uw.edu'));\r\n    }\r\n}\r\n\r\nfunction* changePasswordRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming Changes'));\r\n    let result = yield call(api.user.changePassword, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.hideChangePasswordDialog());\r\n        yield put(interfaceActions.snackbarOpen('Your password has been updated.'));\r\n    } else if(result.status === 401) {\r\n        yield put(interfaceActions.snackbarOpen('The current password you entered is not correct.'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('An error occurred with your request.'));\r\n    }\r\n}\r\n\r\nfunction* changeEmailRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming Changes'));\r\n    let result = yield call(api.user.changeEmail, action.payload);\r\n\r\n    if(result.ok){\r\n        yield put(userActions.storeInfo(JSON.parse(Cookies.get('UserInfo'))));\r\n        yield put(interfaceActions.hideChangeEmailDialog());\r\n        yield put(interfaceActions.snackbarOpen('Your email address has been updated.'));\r\n    } else if(result.status === 401) {\r\n        yield put(interfaceActions.snackbarOpen('The current password you entered is not correct.'));\r\n    } else if(result.status === 409) {\r\n        yield put(interfaceActions.snackbarOpen('That email address is already in use.'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('We were not able to update your email address.'));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* copyTextToClipboard(action) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = action.payload.text;\r\n    document.body.appendChild(textArea);\r\n    textArea.select();\r\n    document.execCommand(\"Copy\");\r\n    textArea.remove();\r\n    yield put(interfaceActions.snackbarOpen('Copied to Clipboard'));\r\n}\r\n\r\nfunction* retrieveSubmissionsByUser() {\r\n    yield put(interfaceActions.setLoadingMessage('Fetching submission information'));\r\n    let response = yield call(api.dataSubmission.retrieveSubmissionByUser);\r\n    if(response.ok){\r\n        let jsonResponse = yield response.json();\r\n        yield put(dataSubmissionActions.storeSubmissions(jsonResponse));\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Unable to retrieve submissions'));\r\n    }\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* retrieveAllSubmissions() {\r\n    let response = yield call(api.dataSubmission.retrieveAllSubmissions);\r\n    if(response.ok){\r\n        let jsonResponse = yield response.json();\r\n\r\n        if(jsonResponse.length < 1){\r\n            yield put(interfaceActions.snackbarOpen('No submissions found'));\r\n        }\r\n\r\n        else {\r\n            yield put(dataSubmissionActions.storeSubmissions(jsonResponse));\r\n        }\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Unable to retrieve submissions'));\r\n    }\r\n}\r\n\r\nfunction* addSubmissionComment(action) {\r\n    let response = yield call(api.dataSubmission.addSubmissionComment, action.payload);\r\n\r\n    if(response.ok){\r\n        yield put(dataSubmissionActions.retrieveSubmissionCommentHistory(action.payload.submissionID));\r\n        yield put(dataSubmissionActions.retrieveDataSubmissionsByUser());\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Failed to submit comment. Please try again.'));\r\n    }\r\n}\r\n\r\nfunction* retrieveSubmissionCommentHistory(action) {\r\n    yield put(dataSubmissionActions.setSubmissionCommentHistoryRetrievalState(states.inProgress));\r\n\r\n    let response = yield call(api.dataSubmission.retrieveCommentHistory, action.payload);\r\n\r\n    if(response.ok){\r\n        let jsonResponse = yield response.json();        \r\n\r\n        if(jsonResponse.length < 1){}\r\n\r\n        else {\r\n            let payload = {\r\n                comments: jsonResponse,\r\n                submissionID: action.payload.submissionID\r\n            }\r\n            yield put(dataSubmissionActions.storeSubmissionComments(payload));\r\n        }\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Failed to retrieve comment history.'));\r\n    }\r\n\r\n    yield put(dataSubmissionActions.setSubmissionCommentHistoryRetrievalState(states.succeeded));\r\n}\r\n\r\nfunction* uploadSubmission(action) {\r\n    yield put(interfaceActions.setLoadingMessage('Uploading Workbook'));\r\n    let { file, datasetName } = action.payload;\r\n    let fileSize = file.size;\r\n\r\n    let chunkSize = 5 * 1024 * 1024;\r\n    let offset = 0;\r\n\r\n    let retries = 0;\r\n    let sessionID;\r\n\r\n    if(fileSize <= 0){\r\n        yield put(interfaceActions.snackbarOpen('The selected file is empty'));\r\n        return;\r\n    }\r\n\r\n    let beginSessionFormData = new FormData();\r\n    beginSessionFormData.append('datasetName', datasetName);\r\n    \r\n    while(retries < 3 && !sessionID){\r\n        let beginSessionResponse = yield call(api.dataSubmission.beginUploadSession, beginSessionFormData);\r\n\r\n        if(beginSessionResponse.ok){\r\n            let jsonResponse = yield beginSessionResponse.json();\r\n            sessionID = jsonResponse.sessionID;\r\n        }\r\n\r\n        else {\r\n            let message = yield beginSessionResponse.text();\r\n            if(message === 'wrongUser'){\r\n                yield put(dataSubmissionActions.setUploadState(states.failed));\r\n                yield put(interfaceActions.setLoadingMessage(''));\r\n                return;\r\n            }\r\n\r\n            else {\r\n                retries ++;\r\n                yield delay(2000);\r\n            }\r\n        }\r\n    }\r\n\r\n    if(!sessionID){\r\n        yield put(interfaceActions.snackbarOpen('Failed to begin upload session'));\r\n        return;\r\n    }\r\n\r\n    retries = 0;\r\n\r\n    var currentPartSucceeded = false;\r\n\r\n    while(offset < fileSize){\r\n        currentPartSucceeded = false;\r\n\r\n        while(currentPartSucceeded === false && retries < 3){\r\n            let part = file.slice(offset, offset + chunkSize);\r\n\r\n            let formData = new FormData();\r\n            formData.append('part', part);\r\n            formData.append('offset', offset);\r\n            formData.append('sessionID', sessionID);\r\n\r\n            let uploadPartResponse = yield call(api.dataSubmission.uploadPart, formData);\r\n\r\n            if(uploadPartResponse.ok){\r\n                currentPartSucceeded = true;\r\n            }\r\n\r\n            else {\r\n                retries ++;\r\n                yield delay(2000);\r\n            }\r\n        }\r\n        \r\n        if(currentPartSucceeded === false){\r\n            yield put(interfaceActions.snackbarOpen('Upload failed'));\r\n            return;\r\n        }\r\n\r\n        else {\r\n            offset += chunkSize;\r\n        }\r\n    }\r\n\r\n    retries = 0;\r\n\r\n    let formData = new FormData();\r\n    formData.append('fileName', datasetName);\r\n    formData.append('offset', fileSize);\r\n    formData.append('sessionID', sessionID);\r\n\r\n    var commitSucceeded = false;\r\n\r\n    while(retries < 4 && commitSucceeded === false) {\r\n        let commitFileResponse = yield call(api.dataSubmission.commitUpload, formData);        \r\n\r\n        if(commitFileResponse.ok){\r\n            commitSucceeded = true;\r\n        }\r\n\r\n        else {\r\n            retries ++;\r\n            yield delay(2000);\r\n        }\r\n    }\r\n\r\n    if(commitSucceeded === true){\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(dataSubmissionActions.setUploadState(states.succeeded));\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(interfaceActions.snackbarOpen('Failed to upload'));\r\n        return;\r\n    }\r\n}\r\n\r\nfunction* setDataSubmissionPhase(action) {\r\n    let formData = {\r\n        phaseID: action.payload.phaseID,\r\n        submissionID: action.payload.submissionID\r\n    };\r\n\r\n    let response = yield call(api.dataSubmission.setPhase, formData);\r\n\r\n    if(response.ok){\r\n        yield put(dataSubmissionActions.retrieveAllSubmissions());\r\n    } \r\n    \r\n    else if (response.status === 401) {\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen('Failed to retrieve submissions'));\r\n    }\r\n}\r\n\r\nfunction* retrieveMostRecentFile(action) {\r\n    const { submissionID } = action.payload;\r\n\r\n    yield put(interfaceActions.setLoadingMessage('Fetching the latest submission'));\r\n\r\n    let linkResponse = yield call(api.dataSubmission.retrieveMostRecentFile, submissionID);\r\n\r\n    if(linkResponse.ok){\r\n        let jsonResponse = yield linkResponse.json();\r\n\r\n        let { link, dataset } = jsonResponse;\r\n\r\n        let getFileResponse = yield call(api.dataSubmission.getFileFromLink, link);\r\n        let blob = yield getFileResponse.blob();\r\n        blob.name = `${dataset}.xlsx`;\r\n\r\n        yield put(dataSubmissionActions.checkSubmissionOptionsAndStoreFile(blob));\r\n    }\r\n\r\n    else if (linkResponse.status === 401) {\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(interfaceActions.snackbarOpen('Failed to retrieve submissions'));\r\n    }    \r\n}\r\n\r\nfunction* checkSubmissionOptionsAndStoreFile(action) {\r\n    let storedOptions = yield select((state) => state.submissionOptions);\r\n    let options;\r\n\r\n    if(storedOptions){\r\n        options = storedOptions;\r\n    }\r\n\r\n    else {\r\n        let result = yield call(api.catalog.submissionOptions);\r\n        if(!result.ok){\r\n            return put(interfaceActions.snackbarOpen('Unable to retrieve validation options'));\r\n        }\r\n\r\n        else {\r\n            options = yield result.json();\r\n            yield put(catalogActions.storeSubmissionOptions(options));\r\n        }\r\n    }\r\n    \r\n    yield put(dataSubmissionActions.storeSubmissionFile(action.payload.file));\r\n}\r\n\r\nfunction* downloadMostRecentFile(action) {\r\n    const { submissionID } = action.payload;\r\n\r\n    yield put(interfaceActions.setLoadingMessage('Downloading the latest submission'));\r\n\r\n    let linkResponse = yield call(api.dataSubmission.retrieveMostRecentFile, submissionID);\r\n\r\n    if(linkResponse.ok){\r\n        let jsonResponse = yield linkResponse.json();\r\n\r\n        let { link, dataset } = jsonResponse;\r\n\r\n        let getFileResponse = yield call(api.dataSubmission.getFileFromLink, link);\r\n        let blob = yield getFileResponse.blob();\r\n\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.setAttribute('hidden', '');\r\n        a.setAttribute('href', url);\r\n        a.setAttribute('download', `${dataset}.xlsx`);\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        // URL.revokeObjectURL(url); // TODO test this\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n    }\r\n\r\n    else if (linkResponse.status === 401) {\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(userActions.refreshLogin());\r\n    }\r\n\r\n    else {\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(interfaceActions.snackbarOpen('Unable to download'));\r\n    } \r\n}\r\n\r\n\r\n\r\nfunction* watchUserLogin() {\r\n    yield takeLatest(userActionTypes.LOGIN_REQUEST_SEND, userLogin);\r\n}\r\n\r\nfunction* watchUserRegistration() {\r\n    yield takeLatest(userActionTypes.REGISTRATION_REQUEST_SEND, userRegistration);\r\n}\r\n\r\nfunction* watchUserValidation(){\r\n    yield takeLatest(userActionTypes.VALIDATION_REQUEST_SEND, userValidation);\r\n}\r\n\r\nfunction* watchUserLogout() {\r\n    yield takeLatest(userActionTypes.LOG_OUT, userLogout)\r\n}\r\n\r\nfunction* watchGoogleLoginRequest(){\r\n    yield takeLatest(userActionTypes.GOOGLE_LOGIN_REQUEST_SEND, googleLoginRequest);\r\n}\r\n\r\nfunction* watchCatalogRetrieval(){\r\n    yield takeLatest(catalogActionTypes.RETRIEVAL_REQUEST_SEND, catalogRetrieval);\r\n}\r\n\r\nfunction* watchDatasetRetrieval(){\r\n    yield takeLatest(catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SEND, datasetRetrieval);\r\n}\r\n\r\nfunction* watchKeyRetrieval(){\r\n    yield takeLatest(userActionTypes.KEY_RETRIEVAL_REQUEST_SEND, keyRetrieval);\r\n}\r\n\r\nfunction* watchKeyCreationRequest(){\r\n    yield takeLatest(userActionTypes.KEY_CREATION_REQUEST_SEND, keyCreation);\r\n}\r\n\r\nfunction* watchQueryRequest(){\r\n    yield takeLatest(visualizationActionTypes.QUERY_REQUEST_SEND, queryRequest);\r\n}\r\n\r\nfunction* watchStoredProcedureRequest(){\r\n    yield takeLatest(visualizationActionTypes.STORED_PROCEDURE_REQUEST_SEND, storedProcedureRequest);\r\n}\r\n\r\nfunction* watchCruiseTrajectoryRequest(){\r\n    yield takeLatest(visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SEND, cruiseTrajectoryRequest);\r\n}\r\n\r\nfunction* watchCruiseListRequest(){\r\n    yield takeLatest(visualizationActionTypes.CRUISE_LIST_REQUEST_SEND, cruiseListRequest);\r\n}\r\n\r\nfunction* watchTableStatsRequest(){\r\n    yield takeLatest(visualizationActionTypes.TABLE_STATS_REQUEST_SEND, tableStatsRequest)\r\n}\r\n\r\nfunction* watchCsvDownloadRequest(){\r\n    yield takeLatest(visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SEND, csvDownloadRequest);\r\n}\r\n\r\nfunction* watchDownloadTextAsCsv(){\r\n    yield takeLatest(visualizationActionTypes.DOWNLOAD_TEXT_AS_CSV, downloadTextAsCsv);\r\n}\r\n\r\nfunction* watchRefreshLogin(){\r\n    yield takeLatest(userActionTypes.REFRESH_LOGIN, refreshLogin);\r\n}\r\n\r\nfunction* watchUpdateUserInfoRequest(){\r\n    yield takeLatest(userActionTypes.UPDATE_USER_INFO_REQUEST_SEND, updateUserInfoRequest);\r\n}\r\n\r\nfunction* watchInitializeGoogleAuth(){\r\n    yield takeLatest(userActionTypes.INITIALIZE_GOOGLE_AUTH, initializeGoogleAuth);\r\n}\r\n\r\nfunction* watchRecoverPasswordRequest(){\r\n    yield takeLatest(userActionTypes.RECOVER_PASSWORD_REQUEST_SEND, recoverPasswordRequest);\r\n}\r\n\r\nfunction* watchChoosePasswordRequest(){\r\n    yield takeLatest(userActionTypes.CHOOSE_PASSWORD_REQUEST_SEND, choosePasswordRequest)\r\n}\r\n\r\nfunction* watchContactUs(){\r\n    yield takeLatest(userActionTypes.CONTACT_US_REQUEST_SEND, contactUsRequest);\r\n}\r\n\r\nfunction* watchChangePasswordRequest(){\r\n    yield takeLatest(userActionTypes.CHANGE_PASSWORD_REQUEST_SEND, changePasswordRequest);\r\n}\r\n\r\nfunction* watchChangeEmailRequest(){\r\n    yield takeLatest(userActionTypes.CHANGE_EMAIL_REQUEST_SEND, changeEmailRequest);\r\n}\r\n\r\nfunction* watchCsvFromVizRequest(){\r\n    yield takeLatest(visualizationActionTypes.CSV_FROM_VIZ_REQUEST_SEND, csvFromVizRequest);\r\n}\r\n\r\nfunction* watchCopyTextToClipboard(){\r\n    yield takeLatest(interfaceActionTypes.COPY_TEXT_TO_CLIPBOARD, copyTextToClipboard);\r\n}\r\n\r\nfunction* watchRetrieveSubmissionsByUser() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_SUBMISSIONS_BY_USER, retrieveSubmissionsByUser);\r\n}\r\n\r\nfunction* watchRetrieveAllSubmissions() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_ALL_SUBMISSIONS, retrieveAllSubmissions);\r\n}\r\n\r\nfunction* watchAddSubmissionComment() {\r\n    yield takeLatest(dataSubmissionActionTypes.ADD_SUBMISSION_COMMENT, addSubmissionComment);\r\n}\r\n\r\nfunction* watchRetrieveSubmissionCommentHistory() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_SUBMISSION_COMMENT_HISTORY, retrieveSubmissionCommentHistory);\r\n}\r\n\r\nfunction* watchUploadSubmission() {\r\n    yield takeLatest(dataSubmissionActionTypes.UPLOAD_SUBMISSION, uploadSubmission);\r\n}\r\n\r\nfunction* watchSetDataSubmissionPhase() {\r\n    yield takeLatest(dataSubmissionActionTypes.SET_SUBMISSION_PHASE, setDataSubmissionPhase);\r\n}\r\n\r\nfunction* watchRetrieveMostRecentFile() {\r\n    yield takeLatest(dataSubmissionActionTypes.RETRIEVE_MOST_RECENT_FILE, retrieveMostRecentFile);\r\n}\r\n\r\nfunction* watchCheckSubmissionOptionsAndStoreFile() {\r\n    yield takeLatest(dataSubmissionActionTypes.CHECK_SUBMISSION_OPTIONS_AND_STORE_FILE, checkSubmissionOptionsAndStoreFile);\r\n}\r\n\r\nfunction* watchDownloadMostRecentFile(){\r\n    yield takeLatest(dataSubmissionActionTypes.DOWNLOAD_MOST_RECENT_FILE, downloadMostRecentFile);\r\n}\r\n// function createWorkerChannel(worker) {\r\n//     return eventChannel(emit => {\r\n//         worker.onmessage = message => {\r\n//             emit(message);\r\n//         }\r\n\r\n//         const unsubscribe = () => {\r\n//             worker.teminate();\r\n//         }\r\n      \r\n//         return unsubscribe;\r\n//     })\r\n// }\r\n\r\n// function* watchWorkerChannel(){\r\n//     const workerChannel = yield call(createWorkerChannel, worker);\r\n\r\n//     while (true) {\r\n//         const message = yield take(workerChannel);\r\n//         yield put(message.data.type, message.data.payload);\r\n//         //   yield put({ type: INCOMING_PONG_PAYLOAD, payload })\r\n//         //   yield fork(pong, socket)\r\n//       }\r\n// }\r\n\r\nexport default function* rootSaga() {\r\n    yield all([\r\n        watchUserLogin(),\r\n        watchUserRegistration(),\r\n        watchUserValidation(),\r\n        watchUserLogout(),\r\n        watchGoogleLoginRequest(),\r\n        watchCatalogRetrieval(),\r\n        watchDatasetRetrieval(),\r\n        watchKeyRetrieval(),\r\n        watchKeyCreationRequest(),\r\n        watchQueryRequest(),\r\n        watchStoredProcedureRequest(),\r\n        watchCruiseTrajectoryRequest(),\r\n        watchCruiseListRequest(),\r\n        watchTableStatsRequest(),\r\n        // watchWorkerChannel(),\r\n        watchCsvDownloadRequest(),\r\n        watchDownloadTextAsCsv(),\r\n        watchRefreshLogin(),\r\n        watchUpdateUserInfoRequest(),\r\n        watchInitializeGoogleAuth(),\r\n        watchRecoverPasswordRequest(),\r\n        watchChoosePasswordRequest(),\r\n        watchContactUs(),\r\n        watchChangePasswordRequest(),\r\n        watchChangeEmailRequest(),\r\n        watchCsvFromVizRequest(),\r\n        watchCopyTextToClipboard(),\r\n        watchRetrieveSubmissionsByUser(),\r\n        watchRetrieveAllSubmissions(),\r\n        watchAddSubmissionComment(),\r\n        watchRetrieveSubmissionCommentHistory(),\r\n        watchUploadSubmission(),\r\n        watchSetDataSubmissionPhase(),\r\n        watchRetrieveMostRecentFile(),\r\n        watchCheckSubmissionOptionsAndStoreFile(),\r\n        watchDownloadMostRecentFile()\r\n    ])\r\n}","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"./Reducers\";\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootSaga from './sagas';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  applyMiddleware(sagaMiddleware)\r\n)\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;","const colors = {\r\n    // orange: '#FF8000',\r\n    // orange: '#93B968',\r\n    primary: '#9dd162',\r\n    solidPaper: '#184562',\r\n    backgroundGray: '#424242',\r\n    secondary: '#22A3B9',\r\n    errorYellow: '#ffe336',\r\n    greenHover: 'rgba(97, 149, 38, .4)'\r\n}\r\n\r\nexport default colors;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Tooltip } from '@material-ui/core';\r\n\r\nimport { copyTextToClipboard } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    copyTextToClipboard\r\n}\r\n\r\n// Wraps a tooltip and span with click event handler for copying to clipboard\r\nconst CopyableText = (props) => {\r\n    const { copyTextToClipboard, tooltipPlacement, text, innerSpanProps, hideTooltip } = props;\r\n\r\n    const handleCopyText = (event) => {\r\n        copyTextToClipboard(event.target.innerText);\r\n    }\r\n\r\n    if(hideTooltip){\r\n        return (\r\n            <span \r\n                style={{cursor: 'copy'}} \r\n                onClick={handleCopyText} \r\n                {...innerSpanProps}\r\n            >\r\n                {text}\r\n            </span>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Tooltip placement={tooltipPlacement || 'top'} title='Click to Copy'>\r\n            <span \r\n                style={{cursor: 'copy'}} \r\n                onClick={handleCopyText} \r\n                {...innerSpanProps}\r\n            >\r\n                {text}\r\n            </span>\r\n        </Tooltip>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps, null, { forwardRef: true })(CopyableText);","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Paper, Button, Table, TableBody, TableCell, TableHead, TableRow, TextField, Typography, Divider, Grid, Tooltip} from '@material-ui/core';\r\n\r\nimport { keyRetrievalRequestSend, keyCreationRequestSend } from '../../Redux/actions/user';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport CopyableText from '../UI/CopyableText';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    apiKeys: state.apiKeys,\r\n    apiKeyCreationState: state.apiKeyCreationState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    keyRetrievalRequestSend,\r\n    keyCreationRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '800px',\r\n        marginTop: theme.spacing(3),\r\n        margin:'auto',\r\n        paddingTop: theme.spacing(2)\r\n      },\r\n    table: {\r\n        minWidth: 700,\r\n    },\r\n    apiKeyTableHeader: {\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n\r\n    showChildOnHover: {\r\n        '& span': {\r\n            visibility: 'hidden',\r\n        },\r\n        '&:hover span': {\r\n            visibility: 'visible'\r\n        },\r\n    },\r\n\r\n    warningCaption: {\r\n        color: colors.primary,\r\n        fontSize: '11px',\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    wrapper: {\r\n        marginTop: theme.spacing(15)\r\n    }\r\n})\r\n\r\nclass ApiKeyManagement extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            description: 'API Access'\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.apiKeys) this.props.keyRetrievalRequestSend();\r\n    }\r\n\r\n\r\n    handleClick = () => {\r\n        this.props.keyCreationRequestSend(this.state.description);\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, description: event.target.value})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            \r\n            <div className={classes.wrapper}>\r\n                {this.props.apiKeys ?\r\n                    <Paper className={classes.root} elevation={6}>             \r\n                        <Typography variant=\"subtitle1\" className={classes.apiKeyTableHeader}>\r\n                            Your API Key\r\n                        </Typography>\r\n                        <Divider/>\r\n                        <Table className={classes.table}>\r\n                            <TableHead>\r\n                            <TableRow>\r\n                                <TableCell variant='head' align='center'>Description</TableCell>\r\n                                <TableCell variant='head' align='center'>Key (hover mouse to view)</TableCell>\r\n                            </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>            \r\n                                {this.props.apiKeys.map((apiKey, index) => (\r\n                                    <TableRow key={index}>\r\n                                        <TableCell align='center'>{apiKey.Description}</TableCell>\r\n                                        <TableCell align='center' className={classes.showChildOnHover}>\r\n                                            <CopyableText text={apiKey.Api_Key} tooltipPlacement='right'/>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))   \r\n                                }  \r\n                            </TableBody>\r\n                        </Table>\r\n                        <Typography variant='caption' className={classes.warningCaption}>\r\n                            This API key is a unique identifier, and should not be shared.\r\n                        </Typography>\r\n                    </Paper>\r\n                    : ''\r\n                }\r\n                <Paper className={classes.root} elevation={6}>\r\n                    <Typography variant=\"body2\">\r\n                        Generate a new API key\r\n                    </Typography>\r\n                    <Grid container={true} alignItems='center' justify='center' spacing={4}>\r\n                        <Grid item>\r\n                            <Tooltip placement='bottom' title='Optionally Add a Custom Description'>\r\n                                <TextField\r\n                                    margin=\"normal\"\r\n                                    id=\"description\"\r\n                                    type=\"text\"\r\n                                    variant='outlined'\r\n                                    name='description'\r\n                                    value={this.state.description}\r\n                                    onChange={this.handleChange}\r\n                                    placeholder='Key Description'\r\n                                    className={classes.descriptionField}\r\n                                    autoComplete='off'\r\n                                />\r\n                            </Tooltip>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Button variant=\"contained\" disabled={this.state.description.length < 1} color=\"primary\" onClick={this.handleClick}>\r\n                                Generate API Key\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                    \r\n                    {this.props.apiKeyCreationState === states.failed ? <span>Key creation failed</span> : ''}\r\n                </Paper>\r\n            </div>    \r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ApiKeyManagement));","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport { Link, Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = (theme) =>  ({\r\n    loginRequiredMessage: {\r\n        marginTop: theme.spacing(10),\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst LoginRequiredPrompt = (props) => {\r\n    const { classes, showLoginDialog } = props;\r\n\r\n    useEffect(() => {\r\n        showLoginDialog();\r\n    })\r\n    \r\n    return (\r\n        <Typography className={classes.loginRequiredMessage}>\r\n            This feature requires a user account. Please <Link component={RouterLink} to={{pathname: window.location.pathname}} onClick={() => props.showLoginDialog()}> log in\r\n            </Link> or <Link component={RouterLink} to={{pathname: '/register'}}> register\r\n            </Link>.\r\n        </Typography>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(LoginRequiredPrompt));","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../Redux/actions/ui';\r\n\r\nimport ApiKeyManagement from './User/ApiKeyManagement';\r\nimport LoginRequiredPrompt from './User/LoginRequiredPrompt';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n\r\n})\r\n\r\nclass Home extends Component {\r\n\r\n    render(){\r\n        if(!this.props.user) return <LoginRequiredPrompt/>;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <ApiKeyManagement/>\r\n            </React.Fragment>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nHome.propTypes = {\r\n    \r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Home));","import React from 'react';\r\n\r\nimport { Typography, Grid, Table, TableBody, TableCell, TableRow, Button } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst tableMapping1 = [\r\n    ['Long Name', 'Long_Name'],\r\n    ['Short Name', 'Variable'],    \r\n    ['Study Domain', 'Study_Domain'],\r\n    ['Process Level', 'Process_Level']\r\n];\r\n\r\nconst tableMapping2 = [\r\n    ['Unit', 'Unit'],\r\n    ['Mean Value', 'Variable_Mean'],\r\n    ['Value Std', 'Variable_Std']\r\n\r\n];\r\n\r\nconst tableMapping3 = [\r\n    ['Start Latitude[\\xb0]', 'Lat_Min'],\r\n    ['End Latitude[\\xb0]', 'Lat_Max'],\r\n    ['Start Longitude[\\xb0]', 'Lon_Min'],\r\n    ['End Longitude[\\xb0]', 'Lon_Max']\r\n]\r\n\r\nconst styles = (theme) => ({\r\n    title:{\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    wrapper: {\r\n        // width: '90%',\r\n        // margin: '0px auto 5px 10px',\r\n        padding: '10px',\r\n        height: '100%',\r\n        userSelect: 'auto'\r\n    },\r\n    infoCard: {\r\n        padding: theme.spacing(1),\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    gridClass: {\r\n        height: '100%',\r\n        maxHeight: '180px'\r\n    },\r\n    gridItem: {\r\n        // height: '90%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        verticalAlign: 'middle',\r\n        maxHeight: '180px'\r\n    },\r\n    datasetDescriptionWrapper: {\r\n        whiteSpace: 'normal',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    datasetDescription: {\r\n        marginBottom: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    vizSampleImage: {\r\n        maxWidth: '80%',\r\n        maxHeight: '260px'\r\n    },\r\n    variableDetailTable: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '100%',\r\n        tableLayout: 'fixed',\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    variableDetailTableRow: {\r\n        height: '24px',\r\n        width: '100%'\r\n    },\r\n    variableDetailTableCell: {\r\n        color: '#FFF6EC',\r\n        borderBottomColor: 'black',\r\n        fontSize: '11px',\r\n        maxWidth: '100%',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        paddingRight: '14px'\r\n    },\r\n\r\n    gridDetailTypography: {\r\n        fontSize: '11px',\r\n        whiteSpace: 'normal',\r\n        width: '100%',\r\n        display: 'block',\r\n    },\r\n\r\n    boldText: {\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    rightGridItem: {\r\n        maxWidth: '100%',\r\n        paddingTop: '10px',\r\n        boxSizing: 'border-box',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    datasetDescriptionButton: {\r\n        backgroundColor: colors.primary,\r\n        color: 'white',\r\n        '&:hover': {\r\n            backgroundColor: '#518516',\r\n        },\r\n        fontSize: '12px',\r\n        maxWidth: '100%',\r\n        marginTop: '50px'\r\n    },\r\n    \r\n    buttonTextWrapper: {\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: '100%',\r\n        overflow: 'hidden'\r\n    }\r\n})\r\n\r\nconst GridDetail = (props) => {\r\n    const {classes} = props;\r\n\r\n    return (\r\n        <div className={`ag-selectable ${classes.wrapper}`}>\r\n                <Grid container className={classes.gridClass}>\r\n                    <Grid container item xs={10} spacing={2}>\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping1.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell} title={props.data[row[1]]}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping2.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                        <TableRow key={tableMapping1.length + 1} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>Start Date</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Time_Min.slice(0,10)}</TableCell>\r\n                                        </TableRow>\r\n                                        <TableRow key={tableMapping1.length + 2} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>End Date</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Time_Max.slice(0,10)}</TableCell>\r\n                                        </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping3.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                        <TableRow key={tableMapping2.length + 1} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>Maximum Depth[m]</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Depth_Max || 'Surface Only'}</TableCell>\r\n                                        </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                {/* <Grid container direction='column' item xs={2} alignContent='center' alignItems='center'> */}\r\n\r\n                    {/* <Grid item xs={props.data.Acknowledgement ? 3 : 6} className={classes.rightGridItem}>\r\n                        <Button \r\n                            variant='contained'\r\n                            className={classes.datasetDescriptionButton} \r\n                            onClick={() => props.context.handleDescribeDataset(props.data.Dataset_Name)}\r\n                        >\r\n                            <span className={classes.buttonTextWrapper}>Dataset Details</span>\r\n                        </Button>\r\n                    </Grid> */}\r\n\r\n                    <Grid item xs={2} className={classes.rightGridItem}>\r\n                        {\r\n                            props.data.Comment &&\r\n                            <Button \r\n                                variant='contained'\r\n                                className={classes.datasetDescriptionButton} \r\n                                onClick={() => props.context.handleDescribeVariable(props.data.ID)}\r\n                            >\r\n                                <span className={classes.buttonTextWrapper}>Comment</span>\r\n                            </Button>\r\n                        }\r\n                    </Grid>\r\n                    {/* { props.data.Acknowledgement &&\r\n                        <Grid item xs={6} className={classes.rightGridItem}>\r\n                            <Typography variant='caption' className={`${classes.gridDetailTypography} ${classes.boldText}`}>\r\n                                Acknowlegement:\r\n                            </Typography>\r\n                            <Typography variant='caption' className={classes.gridDetailTypography} title={props.data.Acknowledgement}>\r\n                                {props.data.Acknowledgement}\r\n                            </Typography>\r\n                        </Grid>\r\n                    } */}\r\n                {/* </Grid> */}\r\n\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (withStyles(styles)(GridDetail));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper\r\n    },\r\n\r\n    markdown: {\r\n        '& img': {\r\n            maxWidth: '100%',\r\n            margin: '20px auto 20px auto',\r\n            display: 'block'\r\n        },\r\n        '& a': {\r\n            color: theme.palette.primary.main,\r\n            textDecoration: 'none'\r\n        }\r\n    }\r\n})\r\n\r\nclass DatasetDescriptionDialog extends Component {\r\n\r\n    // state = {\r\n    //     references: []\r\n    // }\r\n\r\n    render() {\r\n        const { description, classes, datasetName, clearDescription } = this.props;\r\n        // const { references } = this.state;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                { description ?\r\n                <Dialog \r\n                    open={Boolean(description)} \r\n                    onClose={clearDescription} \r\n                    maxWidth={false}\r\n                    PaperProps={{\r\n                        className: classes.dialogPaper\r\n                    }}\r\n                >\r\n                    <DialogTitle>{datasetName}</DialogTitle>\r\n                    <DialogContent>\r\n                        <ReactMarkdown source={description} className={classes.markdown}/>\r\n                    </DialogContent>\r\n\r\n                    {/* {references &&\r\n                        <DialogContent>\r\n                            <strong>References: {references.length}</strong>\r\n                        </DialogContent>\r\n                    } */}\r\n                </Dialog> :\r\n                ''\r\n                }\r\n            </React.Fragment>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default (withStyles(styles)(DatasetDescriptionDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        padding: '8px 16px 16px 16px'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nconst VariableDescriptionDialog = (props) => {\r\n    const { catalog, describedVariable, classes } = props;\r\n    let variable = catalog.find((item) => item.ID === describedVariable);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            { describedVariable ?\r\n            <Dialog \r\n                open={Boolean(describedVariable)} \r\n                onClose={props.clearDescription} \r\n                maxWidth={false}\r\n                PaperProps={{\r\n                    className: classes.dialogPaper\r\n                }}\r\n            >\r\n                <DialogTitle>{variable.Long_Name}</DialogTitle>\r\n                { variable.Comment &&\r\n                <DialogContent>\r\n                    {variable.Comment}\r\n                </DialogContent>\r\n                }\r\n            </Dialog> :\r\n            ''\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VariableDescriptionDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = theme => ({\r\n    tooltip: {\r\n        color: '#00FFFF',\r\n        fontSize: '13px',\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n        padding: '12px',\r\n        borderRadius: '7px',\r\n        textAlign: 'center'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    showHelp: state.showHelp\r\n})\r\n\r\nconst ConnectedTooltip = (props) => {\r\n    const { classes, showHelp } = props;\r\n\r\n    if(!showHelp) {\r\n        return (\r\n            <React.Fragment>\r\n                {props.children}\r\n            </React.Fragment>\r\n        )}\r\n    else {\r\n        return (\r\n            <Tooltip \r\n                placement={props.placement} \r\n                open={showHelp} \r\n                title={props.title} \r\n                classes={{tooltip: classes.tooltip}}\r\n            >\r\n                {props.children}\r\n            </Tooltip>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(withStyles(styles)(ConnectedTooltip));","import React from 'react';\r\n\r\nimport { Typography, Grid, Table, TableBody, TableCell, TableRow, Button, IconButton, Tooltip } from '@material-ui/core';\r\nimport { ChevronRight, ExpandMore } from '@material-ui/icons';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n\r\n    title:{\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    datasetGroupWrapper: {\r\n        // width: '90%',\r\n        // margin: '0px auto 5px 10px',\r\n        padding: '10px',\r\n        height: '100%',\r\n        userSelect: 'auto',\r\n        textAlign: 'left',\r\n        bozSizing: 'border-box'\r\n    },\r\n\r\n    nonDatasetGroupWrapper: {\r\n        height: '100%',\r\n        userSelect: 'auto',\r\n        textAlign: 'left',\r\n        paddingLeft: '18px',\r\n        paddingTop: '10px'\r\n    },\r\n\r\n    infoCard: {\r\n        padding: theme.spacing(1),\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    \r\n    gridClass: {\r\n        height: '100%',\r\n        maxHeight: '200px',\r\n    },\r\n\r\n    datasetGridClass: {\r\n        height: '100%',\r\n        maxHeight: '200px'\r\n    },\r\n\r\n    gridItem: {\r\n        // height: '90%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        verticalAlign: 'middle',\r\n        maxHeight: '200px'\r\n    },\r\n\r\n    adjustGridLeft: {\r\n        marginLeft: '-7vw'\r\n    },\r\n\r\n    datasetDescriptionWrapper: {\r\n        whiteSpace: 'normal',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    datasetDescription: {\r\n        marginBottom: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    vizSampleImage: {\r\n        maxWidth: '15vw',\r\n        maxHeight: '180px'\r\n    },\r\n    variableDetailTable: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '100%',\r\n        tableLayout: 'fixed',\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    variableDetailTableRow: {\r\n        height: '24px',\r\n        width: '100%'\r\n    },\r\n    variableDetailTableCell: {\r\n        color: '#FFF6EC',\r\n        borderBottomColor: 'black',\r\n        fontSize: '11px',\r\n        maxWidth: '100%',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        paddingRight: '14px'\r\n    },\r\n\r\n    gridDetailTypography: {\r\n        fontSize: '11px',\r\n        whiteSpace: 'normal',\r\n        width: '100%',\r\n        display: 'block',\r\n    },\r\n\r\n    boldText: {\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    rightGridItem: {\r\n        maxWidth: '100%',\r\n        paddingTop: '10px',\r\n        boxSizing: 'border-box',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    datasetDescriptionButton: {\r\n        backgroundColor: colors.primary,\r\n        color: 'white',\r\n        '&:hover': {\r\n            backgroundColor: '#518516',\r\n        },\r\n        fontSize: '12px',\r\n        maxWidth: '100%',\r\n        margin: '0 auto',\r\n        verticalAlign: 'middle'\r\n    },\r\n    \r\n    buttonTextWrapper: {\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n\r\n    groupName: {\r\n        textAlign: 'left',\r\n        fontSize: '13px',\r\n        fontWeight: 700,\r\n        marginLeft: '-2px',\r\n        display: 'inline-block',\r\n        marginTop: '3px',\r\n        color: colors.primary\r\n    },\r\n\r\n    chevronButton: {\r\n        marginBottom: '4px',\r\n        marginRight: '21px',\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n\r\n    datasetChevronButton: {\r\n        marginTop: '75px',\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n\r\n    chevronIcon: {\r\n        transform: 'scale(0.8)',\r\n        color: colors.primary\r\n    },\r\n\r\n    datasetButtonWrapper: {\r\n        width: '70px',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    datasetName: {\r\n        marginTop: '-32px',\r\n        // marginBottom: '12px',\r\n        fontSize: '19px',\r\n        marginBottom: '-48px',\r\n        fontWeight: 700\r\n    },\r\n\r\n    tableGridSection: {\r\n        padding: '8px 8px 0 8px',\r\n        marginBottom: '-24px'\r\n    },\r\n\r\n    shortCell: {\r\n        maxWidth: '35%',\r\n        width: '35%'\r\n    },\r\n\r\n    acknowledgement: {\r\n        fontSize: '11px',\r\n        textAlign: 'center',\r\n        padding: '0 10px 0 10px',\r\n        maxWidth: '20vw',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        maxHeight: '100px'\r\n    },\r\n\r\n    acknowledgementHeader: {\r\n        padding: '0 6px 0 6px',\r\n        maxWidth: '20vw',\r\n        fontSize: '13px',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'normal',\r\n        textAlign: 'center',\r\n        marginBottom: '8px'\r\n    },\r\n\r\n    buttonMarginLeft: {\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        display: 'block'\r\n    },\r\n\r\n    buttonMarginTop: {\r\n        marginTop: '-60px',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        display: 'block'\r\n    },\r\n\r\n    tooltip: {\r\n        backgroundColor: colors.solidPaper,\r\n        color: colors.primary\r\n    }\r\n})\r\n\r\nconst GroupedDatasetRow = (props) => {\r\n    const { classes, node, context, value } = props;\r\n    const { data } = node.allLeafChildren[0];\r\n\r\n    const [expanded, setExpanded] = React.useState(node.expanded);\r\n\r\n    const toggleExpand = () => {\r\n        node.setExpanded(!node.expanded)\r\n        setExpanded(node.expanded);\r\n    }\r\n    \r\n    if(props.node.field === 'Dataset_Name') {    \r\n        return (\r\n            <div className={`ag-selectable ${classes.datasetGroupWrapper}`} onDoubleClick={toggleExpand}>            \r\n                <Grid container className={classes.datasetGridClass}>\r\n                    <Grid xs={1} item className={classes.datasetButtonWrapper}>\r\n                        {expanded ?\r\n                            <IconButton onClick={toggleExpand} size='small' className={`${classes.datasetChevronButton}`}>\r\n                                <ExpandMore className={classes.chevronIcon}/>\r\n                            </IconButton>\r\n                        :\r\n                        <Tooltip title='Show member variables' enterDelay={300}>\r\n                            <IconButton onClick={toggleExpand} size='small' className={`${classes.datasetChevronButton}`}>\r\n                                <ChevronRight className={classes.chevronIcon}/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        }\r\n                    </Grid>\r\n\r\n                    <Grid item container xs={11} className={`${classes.gridItem} ${classes.adjustGridLeft}`}>\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <img src={context.datasets[props.value].Icon_URL} alt=\"Mission Icon\" className={classes.vizSampleImage} onClick={toggleExpand}/>\r\n                        </Grid>\r\n\r\n                        <Grid justify='space-between' direction='column' container item xs={8} className={classes.gridItem}>\r\n                            <Grid container item xs={12}>\r\n                                <Typography className={classes.datasetName}>\r\n                                    {value}\r\n                                </Typography>\r\n                            </Grid>\r\n\r\n                            <Grid container item xs={12}>\r\n                                <Grid item xs={8} className={classes.tableGridSection}>\r\n                                    <Table className={classes.variableDetailTable} size='small'>\r\n                                            <TableBody>\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}><strong>Source</strong></TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Data_Source}>{data.Data_Source}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}><strong>Distributor</strong></TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Distributor}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>SQL Table</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Table_Name}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>Temporal Resolution</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Temporal_Resolution}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>Spatial Resolution</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Spatial_Resolution}</TableCell>\r\n                                                </TableRow>\r\n                                            </TableBody>\r\n                                    </Table>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={4} container direction='column' className={classes.tableGridSection}>\r\n                                        <div style={{height: '70%', justifyContent: 'center', width: '100%'}}>\r\n                                    { data.Acknowledgement &&\r\n                                        <div>\r\n                                                <Typography className={classes.acknowledgementHeader}>\r\n                                                    <strong>Acknowledgement:</strong>\r\n                                                </Typography>\r\n\r\n                                                <Typography title={data.Acknowledgement} className={classes.acknowledgement}>\r\n                                                    {data.Acknowledgement}\r\n                                                </Typography>\r\n                                        </div>\r\n                                    }\r\n                                        </div>\r\n\r\n                                        <div style={{height: '30%', justifyContent: 'center', width: '100%'}}>\r\n                                            <Button \r\n                                                variant='contained'\r\n                                                className={`${classes.datasetDescriptionButton} ${data.Acknowledgement ? classes.buttonMarginLeft : classes.buttonMarginTop}`} \r\n                                                onClick={() => props.context.handleDescribeDataset(data.Dataset_Name)}\r\n                                            >\r\n                                                <span className={classes.buttonTextWrapper}>Dataset Details</span>\r\n                                            </Button>\r\n                                        </div>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        )\r\n    }\r\n    else return (\r\n        <div className={`ag-selectable ${classes.nonDatasetGroupWrapper}`}>\r\n            <div style={{display: 'inline-block', marginLeft: `${node.level * 36}px`}}></div>\r\n            {expanded ? \r\n                <IconButton onClick={toggleExpand} size='small' className={`${classes.chevronButton}`}>\r\n                    <ExpandMore className={classes.chevronIcon}/>\r\n                </IconButton> \r\n            :\r\n\r\n                <IconButton onClick={toggleExpand} size='small' className={`${classes.chevronButton}`} disableRipple={true} disableFocusRipple={true}>\r\n                    <ChevronRight className={classes.chevronIcon}/>\r\n                </IconButton>                \r\n            }\r\n\r\n            <Typography className={classes.groupName} variant='h6'>\r\n                {props.value}\r\n            </Typography>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (withStyles(styles)(GroupedDatasetRow));","import React, { Component } from 'react';\r\n\r\nimport { AgGridReact } from 'ag-grid-react';\r\n\r\nimport GridDetail from './GridDetail';\r\nimport DatasetDescriptionDialog from './DatasetDescriptionDialog';\r\nimport VariableDescriptionDialog from './VariableDescriptionDialog';\r\n\r\nimport stringify from 'csv-stringify/lib/sync';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Paper, Button, Grid, Tooltip, InputAdornment } from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nimport ConnectedTooltip from '../UI/ConnectedTooltip';\r\nimport GroupedDatasetRow from './GroupedDatasetRow';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst columnDefs = [\r\n  {\r\n    headerName: \"Long Name\", //\r\n    field: \"Long_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    tooltipField: 'longName',\r\n    cellRenderer: \"agGroupCellRenderer\",\r\n\r\n  },\r\n  {\r\n    headerName: \"Variable\",\r\n    field: \"Variable\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Table Name\",\r\n    field: \"Table_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  }, \r\n  {\r\n    headerName: \"Dataset Name\",\r\n    field: \"Dataset_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    tooltipField: 'datasetName',\r\n    rowGroup: true,\r\n    enableRowGroup: true,\r\n    hide: true\r\n  }, \r\n  {\r\n    headerName: \"Make\",\r\n    field: \"Make\",\r\n    sortable: true,\r\n    filter: true,\r\n    enableRowGroup: true,\r\n    maxWidth: 160\r\n  },\r\n  {\r\n    headerName: \"Sensor\",\r\n    field: \"Sensor\",\r\n    sortable: true,\r\n    filter: true,\r\n    enableRowGroup: true,\r\n    maxWidth: 160\r\n  }, \r\n  {\r\n    headerName: \"Study Domain\",\r\n    field: \"Study_Domain\",\r\n    sortable: true,\r\n    filter: true,\r\n    // hide: true,\r\n    maxWidth: 160,\r\n    enableRowGroup: true\r\n  }, \r\n  {\r\n    headerName: \"Process Level\",\r\n    field: \"Process_Level\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Spatial Resolution\",\r\n    field: \"Spatial_Resolution\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Temporal Resolution\",\r\n    field: \"Temporal_Resolution\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Unit\", \r\n    field: \"Unit\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Key Words\",\r\n    field: 'Keywords',\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Data Source\",\r\n    field: 'Data_Source',\r\n    hide: true\r\n  }\r\n]\r\n\r\nconst styles = (theme) => ({\r\n  gridWrapper: {\r\n    height: '80vh', \r\n    width: '96%',\r\n    margin: '0 auto'\r\n  },\r\n\r\n  gridSearch: {\r\n    margin: '0 auto 20px auto',\r\n    width: '60%'\r\n  },\r\n\r\n  gridPaper: {\r\n    marginTop: '68px',\r\n    padding: '20px',\r\n    height: 'calc(100vh - 68px)',\r\n    boxSizing: 'border-box',\r\n    overflow: 'hidden'\r\n  },\r\n\r\n  downloadButton: {\r\n    margin: '6px 0 0 0',\r\n    textTransform: 'none',\r\n    color: 'white',\r\n    backgroundColor: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n  }\r\n  }\r\n})\r\n\r\nconst defaultColDef = {\r\n  resizable: true,\r\n  cellStyle: {\r\n    textAlign:'left'\r\n  }\r\n}\r\n\r\nconst autoGroupColumnDef = {\r\n  cellStyle: {\r\n    textAlign:'left'\r\n  },\r\n}\r\n\r\nconst getRowHeight = (params) => {\r\n  if(params.node.group && params.node.field === 'Dataset_Name') return 200;\r\n  if(params.node.detail) return 180;\r\n  return 48;\r\n}\r\n\r\nclass AGGridWrapper extends Component {\r\n\r\n  state = {\r\n    filterText: '',\r\n    describedDataset: '',\r\n    describedVariable: null\r\n  }\r\n\r\n  handleDescribeDataset = (dataset) => {\r\n    this.setState({...this.state, describedDataset: dataset})\r\n  }\r\n\r\n  handleDescribeVariable = (variable) => {\r\n    this.setState({...this.state, describedVariable: variable})\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState({...this.state, filterText: event.target.value})\r\n    this.gridApi.setQuickFilter(event.target.value);\r\n  }\r\n\r\n  onGridReady = (params) => {\r\n    this.gridApi = params.api;\r\n    this.columnApi = params.columnApi;\r\n\r\n    this.gridApi.sizeColumnsToFit();\r\n  }\r\n\r\n  onGridSizeChanged = (params) => {\r\n    this.gridApi.sizeColumnsToFit();\r\n  }\r\n\r\n  handleColumnRowGroupChanged = (event) => {\r\n    this.gridApi.sizeColumnsToFit()\r\n    event.columns.forEach(column => {\r\n      column.columnApi.setColumnVisible(column.colId, false);\r\n    })\r\n  }\r\n\r\n  handleDownloadCatalog = () => {\r\n    let csv = stringify(this.props.catalog, {\r\n      header: true\r\n    });\r\n\r\n    const blob = new Blob([csv], {type: 'text/csv'});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.setAttribute('hidden', '');\r\n    a.setAttribute('href', url);\r\n    a.setAttribute('download', `CMAP_Catalog.csv`);\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n\r\n  render = () => {\r\n    const { classes, datasets } = this.props;\r\n    const { describedDataset, describedVariable } = this.state;\r\n    const description = !datasets ? '' : !datasets[describedDataset] ? '' : datasets[describedDataset].Description;\r\n\r\n    return (\r\n      <Paper elevation={12} className={classes.gridPaper}>\r\n        <DatasetDescriptionDialog \r\n          description={description}\r\n          clearDescription={() => this.handleDescribeDataset('')}\r\n          datasetName={describedDataset}\r\n        />\r\n        <VariableDescriptionDialog\r\n          clearDescription={() => this.handleDescribeVariable(null)}\r\n          describedVariable={describedVariable}\r\n        />\r\n        <Grid container>\r\n          <Grid item xs={3}>\r\n\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            {/* <ConnectedTooltip title='Enter one or more search terms.' placement='top'> */}\r\n              <TextField              \r\n                className={classes.gridSearch}\r\n                autoFocus={true}\r\n                margin=\"normal\"\r\n                id=\"name\"\r\n                type=\"text\"\r\n                variant='outlined'\r\n                name='filterText'\r\n                value={this.state.filterText}\r\n                onChange={this.handleChange}\r\n                placeholder='Search Catalog'\r\n                InputProps={{\r\n                  startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search style={{color:colors.primary}}/>\r\n                  </InputAdornment>\r\n                ),\r\n                }}\r\n              />\r\n            {/* </ConnectedTooltip> */}\r\n\r\n          </Grid>\r\n          <Grid item xs={2}>\r\n            <Tooltip placement='top' title='Download the full catalog in CSV format'>\r\n              <Button \r\n                className={classes.downloadButton}\r\n                variant='contained'\r\n                color='primary'\r\n                onClick={this.handleDownloadCatalog}            \r\n              >\r\n                  Download Catalog\r\n              </Button>\r\n            </Tooltip>\r\n          </Grid>\r\n\r\n          <Grid item xs={1}>\r\n\r\n          </Grid>\r\n        </Grid>\r\n\r\n          \r\n          <div className={classes.gridWrapper + \" ag-theme-material\"}>\r\n            <AgGridReact\r\n              // General settings\r\n              columnDefs={columnDefs}\r\n              defaultColDef={defaultColDef}\r\n              rowData={this.props.catalog}\r\n              onGridReady={this.onGridReady}\r\n              onGridSizeChanged={this.onGridSizeChanged}\r\n              suppressDragLeaveHidesColumns= {true}\r\n              enableCellTextSelection={true}\r\n              suppressContextMenu={true}\r\n              getRowHeight={getRowHeight}\r\n              // getRowClass={getRowClass}\r\n\r\n              // Additional props\r\n              context={{\r\n                datasets,\r\n                handleDescribeDataset: this.handleDescribeDataset,\r\n                handleDescribeVariable: this.handleDescribeVariable\r\n              }}\r\n\r\n              // Setting related to styling\r\n              getRowStyle= {function(params) {\r\n                let styles = {};\r\n                if (params.node.detail) {\r\n                    styles.background = 'transparent' \r\n                }\r\n                if(params.node.level > 0){\r\n                  styles.marginLeft = '32px'\r\n                }\r\n                return styles;\r\n              }}\r\n\r\n              //Settings related to grouping functionality\r\n              rowGroupPanelShow='always'\r\n              groupMultiAutoColumn={true}\r\n              onColumnRowGroupChanged={this.handleColumnRowGroupChanged}\r\n              autoGroupColumnDef={autoGroupColumnDef}\r\n              enableBrowserTooltips={true}\r\n              groupUseEntireRow={true}\r\n              // groupColumnDef={groupColumnDef}\r\n              groupRowRenderer='datasetGroupRowRenderer'\r\n\r\n              // Settings related to master/detail\r\n              masterDetail={true}\r\n              frameworkComponents= {{ myDetailCellRenderer: GridDetail, datasetGroupRowRenderer: GroupedDatasetRow}}\r\n              detailCellRenderer=\"myDetailCellRenderer\"\r\n              detailRowHeight={200}\r\n            />\r\n          </div>\r\n          </Paper>\r\n    )\r\n  }  \r\n}\r\n\r\nexport default (withStyles(styles)(AGGridWrapper));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport AGGridWrapper from './AGGridWrapper';\r\n\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    catalogRequestState: state.catalogRequestState,\r\n    catalog : state.catalog,\r\n    datasets: state.datasets\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    retrievalRequestSend,\r\n    datasetRetrievalRequestSend\r\n}\r\n\r\nconst styles = (theme) => ({\r\n\r\n})\r\n\r\nclass Catalog extends Component {\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n    }\r\n\r\n    determineContent = () => {\r\n        if(this.props.catalog && this.props.datasets) return <AGGridWrapper catalog={this.props.catalog} datasets={this.props.datasets}/>\r\n    }\r\n\r\n    render(){\r\n        let content = this.determineContent();\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                {content}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Catalog));","import { withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\n// import IconButton from '@material-ui/core/IconButton';\r\n// import InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\nimport React from 'react';\r\n\r\nconst styles = theme => ({\r\n    registrationCard: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n        height:'200px'\r\n    },\r\n\r\n    textField: {\r\n        margin:theme.spacing(1),\r\n        width: '80%'\r\n    }\r\n});\r\n\r\nconst RegistrationCard = (props) => {\r\n    const { classes } = props;\r\n    const fields = Object.keys(props.inputFieldState);\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            props.buttonRef.current.click();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.registrationCard}>\r\n            <Grid container spacing={1}>\r\n            {\r\n                fields.map((field, index) => {\r\n                    return (\r\n                        <Grid key={index} item xs={fields.length > 2 ? 6 : 12}>\r\n                        <TextField\r\n                            key={index}\r\n                            autoFocus={Boolean(index === 0)}\r\n                            name={props.inputFieldInfo[field].name}\r\n                            label={props.inputFieldInfo[field].label}\r\n                            value={props.inputFieldState[field].value}\r\n                            className={classes.textField}\r\n                            onChange={props.onChange}\r\n                            type={props.inputFieldInfo[field].type}\r\n                            error={!props.inputFieldState[field].valid}                            \r\n                            helperText={props.inputFieldState[field].valid ? ' ' : props.inputFieldInfo[field].requirement}\r\n                            onKeyPress={handleKeyPress}\r\n                            />\r\n                        </Grid>\r\n                    )\r\n                })\r\n            }                \r\n            </Grid>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(RegistrationCard);","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport { Stepper, Step, StepLabel, Button, Typography, CircularProgress, Paper, Link } from '@material-ui/core';\r\n\r\nimport RegistrationCard from './RegistrationCard';\r\n\r\nimport { registrationNextActiveStep, registrationPreviousActiveStep } from '../../Redux/actions/ui';\r\nimport { userRegistrationRequestSend, userValidationRequestSend, userValidationRequestSuccess } from '../../Redux/actions/user';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '60%',\r\n        margin: '10% auto'\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    instructions: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    instructionsPaper: {\r\n        width: '60%',\r\n        margin: '5% auto',\r\n        padding: '24px'\r\n    },\r\n    registrationCard: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n\r\n    textField: {\r\n        margin:theme.spacing(1),\r\n        width: 200\r\n    },\r\n\r\n    buttonProgress: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n\r\n    bottomError: {\r\n        color: 'white',\r\n        marginTop: theme.spacing(2)\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    registrationActiveStep: state.registrationActiveStep,\r\n    userValidationState: state.userValidationState,\r\n    userRegistrationState: state.userRegistrationState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    registrationNextActiveStep,\r\n    registrationPreviousActiveStep,\r\n\r\n    userRegistrationRequestSend,\r\n\r\n    userValidationRequestSend\r\n}\r\n\r\n// const getSteps = () => ['Your Information', 'Optional Organization Info', 'Security'];\r\nconst getSteps = () => ['Your Information', 'Optional Organization Info'];\r\nconst getCardInfo = () => ([\r\n    {\r\n        firstName: {\r\n            label:'First Name*',\r\n            name: 'firstName',\r\n            type: 'text',\r\n            requirement: 'Must be 2 or more alphabetical characters.',\r\n            optional: false\r\n        },\r\n        lastName: {\r\n            label:'Last Name*',\r\n            name: 'lastName',\r\n            type: 'text',\r\n            requirement: 'Must be 2 or more alphabetical characters.',\r\n            optional: false\r\n        },\r\n        username: {\r\n            label:'Username*',\r\n            name: 'username',\r\n            type: 'text',\r\n            requirement: 'Must be 6 to 20 alphanumeric characters.',\r\n            optional: false\r\n        },\r\n        email: {\r\n            label:'Email Address*',\r\n            name: 'email',\r\n            type: 'email',\r\n            requirement: 'Must be a valid email address.',\r\n            optional: false\r\n        }\r\n    },\r\n    {\r\n        institute: {\r\n            label:'Institute',\r\n            name: 'institute',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        },\r\n        department: {\r\n            label:'Department',\r\n            name: 'department',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        },\r\n        country: {\r\n            label:'Country',\r\n            name: 'country',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        }\r\n    }\r\n])\r\n\r\nconst buttonRef = React.createRef();\r\n\r\nclass RegistrationStepper extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        let cards = []\r\n        getCardInfo().forEach(card => {\r\n            let newCard = {};\r\n            Object.keys(card).forEach(key => {\r\n                newCard[key] = {\r\n                    value: '',\r\n                    valid: true,\r\n                    optional: card[key].optional\r\n                }\r\n            })\r\n            cards.push(newCard);\r\n        })\r\n\r\n        this.state = {\r\n            cards\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // Prevents validation failure message from appearing again if user navigates here to try again\r\n        if(this.props.userValidationState === states.failed) this.props.userValidationRequestSuccess();\r\n    }\r\n\r\n    validateField = (name, rawValue) => {\r\n        let value = rawValue.trim();\r\n        let pattern = /$^/;\r\n        switch(name){\r\n            case 'firstName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'lastName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'username':\r\n                pattern = /^[A-Za-z0-9 ]{6,20}$/;\r\n                break;\r\n            case 'email':\r\n                pattern = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n                break;\r\n            case 'institute':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'department':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'country':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'password':\r\n                pattern = /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/\r\n                this.setState(previousState => {\r\n                    let newCardState = [...previousState.cards];\r\n                    newCardState[2].confirmPassword.valid = Boolean(newCardState[2].confirmPassword.value === value);\r\n                    return {cards: newCardState};\r\n                })\r\n                break;\r\n            case 'confirmPassword':\r\n                return this.state.cards[2].password.value === value;\r\n            default:\r\n                break;\r\n        }\r\n        return pattern.test(value);\r\n    }\r\n\r\n    processStateToActionPayload = () => {\r\n        let actionPayload = {};\r\n        this.state.cards.forEach(card => {\r\n            Object.keys(card).forEach(cardKey => {\r\n                actionPayload[cardKey] = card[cardKey].value;\r\n            })\r\n        })\r\n        return actionPayload;\r\n    }\r\n\r\n    currentCardIsValid = () => {\r\n        let currentCard = this.state.cards[this.props.registrationActiveStep];\r\n        for(let key in currentCard){\r\n            if(currentCard[key].optional) continue;\r\n            if(!currentCard[key].value || !currentCard[key].valid) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    handleNext = () => {\r\n        const activeStep = this.props.registrationActiveStep;\r\n        \r\n        switch(activeStep){\r\n            case 0:\r\n                // API request to validate username and email address\r\n                let username= this.state.cards[0].username.value;\r\n                let email= this.state.cards[0].email.value;\r\n                this.props.userValidationRequestSend(username, email);\r\n                break;\r\n            // case 1:\r\n            //     this.props.registrationNextActiveStep();\r\n            //     break;\r\n            case 1:\r\n                // API request to register user\r\n                this.props.userRegistrationRequestSend(this.processStateToActionPayload())\r\n                break;\r\n            default:\r\n                this.props.registrationNextActiveStep();\r\n                break;\r\n\r\n\r\n        }\r\n    };\r\n\r\n    handleBack = () => {\r\n        this.props.registrationPreviousActiveStep();\r\n    };\r\n\r\n    handleChange = (event) => {\r\n        let newValue = event.target.value;\r\n        let fieldName = event.target.name;\r\n        let valid = this.validateField(fieldName, newValue);\r\n        this.setState(previousState => {\r\n            let cards = [...previousState.cards];\r\n            cards[this.props.registrationActiveStep][fieldName] = {\r\n                ...cards[this.props.registrationActiveStep][fieldName],\r\n                value: newValue,\r\n                valid\r\n            }\r\n            return {cards};\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const steps = getSteps();\r\n        const activeStep = this.props.registrationActiveStep;\r\n        const cardInfoArray = getCardInfo();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className={classes.root}>\r\n                    \r\n                    <Stepper activeStep={activeStep}>\r\n                    {steps.map((label, index) => {\r\n                        return (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                        );\r\n                    })}\r\n                    </Stepper>\r\n                    <div>\r\n                    {activeStep === steps.length ? (\r\n                        <Paper className={classes.instructionsPaper}>\r\n                            <Typography className={classes.instructions}>\r\n                                We've sent you an email with a link for finalizing your registration and choosing a password. If you don't receive the email within the next few minute please check your spam folder.\r\n                            </Typography>\r\n                        </Paper>\r\n                    ) : (\r\n                        <div>\r\n                            <RegistrationCard \r\n                                inputFieldState={{...this.state.cards[this.props.registrationActiveStep]}} \r\n                                inputFieldInfo={{...cardInfoArray[this.props.registrationActiveStep]}}\r\n                                onChange={this.handleChange}\r\n                                buttonRef={buttonRef}\r\n                            />\r\n                            <div>\r\n                                <Button\r\n                                onClick={activeStep === 0 ? this.props.handleHideStepper : this.handleBack}\r\n                                className={classes.button}\r\n                                >\r\n                                    Back\r\n                                </Button>\r\n\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={this.handleNext}\r\n                                    className={classes.button}\r\n                                    disabled={!this.currentCardIsValid() || this.props.userValidationState === states.inProgress}\r\n                                    ref={buttonRef}\r\n                                >\r\n                                    {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\r\n                                </Button>\r\n                                {this.props.userValidationState === states.inProgress && <CircularProgress size={24} className= {classes.buttonProgress} />}\r\n                                {this.props.userValidationState === states.failed && <Typography className={classes.bottomError}>That username or email address is already in use. If you previously registered you can recover your password <Link onClick={this.handleClose} component={RouterLink} to={{pathname: '/forgotpass'}}>here</Link>.</Typography>}\r\n                                {this.props.userRegistrationState === states.failed && <Typography className={classes.bottomError}>Registration failed. Please try again.</Typography>}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(RegistrationStepper));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n    wrapper: {\r\n        height: '46px',\r\n        display: 'flex',\r\n        cursor: 'pointer',\r\n        borderRadius: '4px',\r\n        '&:hover': {\r\n            boxShadow: '0 0 3px 3px rgba(66,133,244,.3)'\r\n        },\r\n        paddingRight: '14px',\r\n        // backgroundColor: '#4285F4',\r\n        width: '200px',\r\n        color: '#ffffff',\r\n\r\n        // backgroundColor: 'white',\r\n        // color: '#444',\r\n    },\r\n\r\n    textSpan: {\r\n        marginTop: '13px',\r\n        marginLeft: '10px',\r\n        fontFamily: \"'Roboto', sans-serif\"\r\n    }\r\n})\r\n\r\nconst GoogleSignInButton = (props) => {\r\n    const { classes, clickHandlerTarget } = props;\r\n\r\n    return (\r\n        <div id={clickHandlerTarget} className={classes.wrapper}>\r\n            {/* Google Icon */}\r\n            <svg width=\"46px\" height=\"46px\" viewBox=\"0 0 46 46\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\r\n            <title>btn_google_dark_normal_ios</title>\r\n            <desc>Created with Sketch.</desc>\r\n            <defs>\r\n                <filter x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" filterUnits=\"objectBoundingBox\" id=\"filter-1\">\r\n                    <feOffset dx=\"0\" dy=\"1\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset>\r\n                    <feGaussianBlur stdDeviation=\"0.5\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur>\r\n                    <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0\" in=\"shadowBlurOuter1\" type=\"matrix\" result=\"shadowMatrixOuter1\"></feColorMatrix>\r\n                    <feOffset dx=\"0\" dy=\"0\" in=\"SourceAlpha\" result=\"shadowOffsetOuter2\"></feOffset>\r\n                    <feGaussianBlur stdDeviation=\"0.5\" in=\"shadowOffsetOuter2\" result=\"shadowBlurOuter2\"></feGaussianBlur>\r\n                    <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0\" in=\"shadowBlurOuter2\" type=\"matrix\" result=\"shadowMatrixOuter2\"></feColorMatrix>\r\n                    <feMerge>\r\n                        <feMergeNode in=\"shadowMatrixOuter1\"></feMergeNode>\r\n                        <feMergeNode in=\"shadowMatrixOuter2\"></feMergeNode>\r\n                        <feMergeNode in=\"SourceGraphic\"></feMergeNode>\r\n                    </feMerge>\r\n                </filter>\r\n                <rect id=\"path-2\" x=\"0\" y=\"0\" width=\"40\" height=\"40\" rx=\"2\"></rect>\r\n                <rect id=\"path-3\" x=\"5\" y=\"5\" width=\"38\" height=\"38\" rx=\"1\"></rect>\r\n            </defs>\r\n            <g id=\"Google-Button\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\r\n                <g id=\"9-PATCH\"  transform=\"translate(-608.000000, -219.000000)\"></g>\r\n                <g id=\"btn_google_dark_normal\" transform=\"translate(-1.000000, -1.000000)\">\r\n                    <g id=\"button\" transform=\"translate(4.000000, 4.000000)\" filter=\"url(#filter-1)\">\r\n                        <g id=\"button-bg\">\r\n                            <use fill=\"#4285F4\" fillRule=\"evenodd\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                        </g>\r\n                    </g>\r\n                    <g id=\"button-bg-copy\">\r\n                        <use fill=\"#FFFFFF\" fillRule=\"evenodd\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                    </g>\r\n                    <g id=\"logo_googleg_48dp\" transform=\"translate(15.000000, 15.000000)\">\r\n                        <path d=\"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z\" id=\"Shape\" fill=\"#4285F4\"></path>\r\n                        <path d=\"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z\" id=\"Shape\" fill=\"#34A853\"></path>\r\n                        <path d=\"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z\" id=\"Shape\" fill=\"#FBBC05\"></path>\r\n                        <path d=\"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z\" id=\"Shape\" fill=\"#EA4335\"></path>\r\n                        <path d=\"M0,0 L18,0 L18,18 L0,18 L0,0 Z\" id=\"Shape\" ></path>\r\n                    </g>\r\n                    <g id=\"handles_square\" ></g>\r\n                </g>\r\n            </g>\r\n            </svg>\r\n\r\n            <span className={classes.textSpan}>\r\n                {props.text}\r\n            </span>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default withStyles(styles)(GoogleSignInButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Paper, Button, Typography } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport RegistrationStepper from './RegistrationStepper';\r\nimport GoogleSignInButton from './GoogleSignInButton';\r\n\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\nimport { googleLoginRequestSend } from '../../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '10% auto',\r\n        padding: '24px'\r\n        // height: '40vh'\r\n    },\r\n\r\n    emailSignUpButton: {\r\n        textTransform: 'none',\r\n        height: '46px',\r\n        color: 'white'\r\n    },\r\n\r\n    googleWrapper: {\r\n        margin: '50px auto 0 0',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    description: {\r\n        paddingTop: '50px'\r\n    },\r\n\r\n    emailSignUpWrapper: {\r\n        marginTop: '40px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarOpen,\r\n    googleLoginRequestSend\r\n}\r\n\r\nconst registerClickHandlerTarget = 'g-signup';\r\n\r\nclass Register extends Component {\r\n    state = {\r\n        showStepper: false\r\n    }\r\n\r\n    onGoogleSignup = (user) => {\r\n        let token = user.getAuthResponse(true).id_token;\r\n        this.props.googleLoginRequestSend(token);\r\n    }\r\n\r\n    registerGoogleClickHandler = () => {\r\n        let _this = this;\r\n        let auth = window.gapi.auth2\r\n        if(auth){\r\n            let authInstance = auth.getAuthInstance();\r\n            authInstance.attachClickHandler(\r\n                registerClickHandlerTarget, \r\n                null, \r\n                _this.onGoogleSignup,\r\n                () => _this.props.snackbarOpen('There was a problem accessing your google account')\r\n            );\r\n        } else {\r\n            setTimeout(_this.registerGoogleClickHandler, 20);\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.registerGoogleClickHandler();\r\n    }\r\n\r\n    handleShowStepper = () => {\r\n        this.setState({showStepper: true})\r\n    }\r\n\r\n    handleHideStepper = () => {\r\n        this.setState({showStepper: false});\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {!this.state.showStepper &&\r\n                    <Paper className={classes.paper}>\r\n                        <Typography className={classes.description}>\r\n                            Create an account to visualize data, and access the Simons CMAP API.\r\n                        </Typography>\r\n\r\n                        <div className={classes.googleWrapper}>\r\n                            <GoogleSignInButton clickHandlerTarget={registerClickHandlerTarget} text='Sign up with Google'/>\r\n                        </div>\r\n\r\n                        <div className={classes.emailSignUpWrapper}>\r\n                            <Button variant='contained' color='primary' className={classes.emailSignUpButton} onClick={this.handleShowStepper}>\r\n                                Sign up with an Email Address\r\n                            </Button>\r\n                        </div>\r\n                    </Paper>                \r\n                }\r\n                {this.state.showStepper && <RegistrationStepper handleHideStepper={this.handleHideStepper}/>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(Register));","const validation = {\r\n    depth: {\r\n        depthOneIsLower: 'Cannot be larger than end',\r\n        depthOneOutOfBounds: 'Data ends at $',\r\n        depthTwoOutOfBounds: 'Data begins at $',\r\n        negative: 'Cannot be negative'\r\n    },\r\n\r\n    date: {\r\n        dateOneIsLater: 'Cannot be after end',\r\n        dateOneOutOfBounds: 'Data ends at $',\r\n        dateTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lat: {\r\n        latOneIsHigher: 'Cannot be larger than end',\r\n        latOneOutOfBounds: 'Data ends at $',\r\n        latTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    lon: {\r\n        lonOneIsHigher: 'Cannot be larger than end',\r\n        lonOneOutOfBounds: 'Data ends at $',\r\n        lonTwoOutOfBounds: 'Data begins at $'\r\n    },\r\n\r\n    type: {\r\n        dataIsIrregular: '$ is not available for sparse data',\r\n        dateRangeRequired: '$ requires a range of dates',\r\n        depthRangeRequired: '$ requires a range of depths',\r\n        surfaceOnlyDataset: '$ contains only surface data',\r\n        irregularOnly: 'Sparse map is only available for sparse data',\r\n        dataSizeTooLarge: 'Data set is too large for this visualization type.',\r\n        webGLContextLimit: 'Limit exceeded for sparse and heatmaps. Please delete one or more to proceed.'\r\n    },\r\n\r\n    generic: {\r\n        invalid: 'Invalid input',\r\n        dataSizeWarning: 'Wait time and application performance may be poor due to size of data.',\r\n        dataSizePrevent: 'Data set is too large. Please reduce date range or area size.',\r\n        variableMissing: 'Please select a variable',\r\n        vizTypeMissing: 'Please select a visualization type'\r\n    }\r\n}\r\n\r\nexport default validation;","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, Table, TableRow, TableCell, TableBody } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray,\r\n        width: '700px'\r\n    }\r\n})\r\n\r\nconst TableStatsDialog = (props) => {\r\n    const { data, classes } = props;\r\n\r\n    if(!data) return '';\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <DialogTitle>{data.Long_Name}</DialogTitle>\r\n            <DialogContent>\r\n                { data.Comment &&\r\n                    <DialogContentText>\r\n                        {data.Comment}\r\n                    </DialogContentText>\r\n                }\r\n                <Table size='small'>\r\n                    <TableBody>\r\n                            <TableRow>\r\n                                <TableCell>Dataset</TableCell>\r\n                                <TableCell title={data.Dataset_Name}>{data.Dataset_Name.length > 25 ? data.Dataset_Name.slice(0,23) + '...' : data.Dataset_Name}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Table Name</TableCell>\r\n                                <TableCell title={data.Table_Name}>{data.Table_Name > 25 ? data.Table_Name.slice(0,23) + '...' : data.Table_Name}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Source</TableCell>\r\n                                <TableCell title={data.Data_Source}>{data.Data_Source > 25 ? data.Data_Source.slice(0,23) + '...' : data.Data_Source}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Distributor</TableCell>\r\n                                <TableCell title={data.Distributor}>{data.Distributor.length > 25 ? data.Distributor.slice(0,23) + '...' : data.Distributor}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Sensor</TableCell>\r\n                                <TableCell>{data.Sensor}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Spatial Resolution</TableCell>\r\n                                <TableCell>{data.Spatial_Resolution}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Resolution</TableCell>\r\n                                <TableCell>{data.Temporal_Resolution}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Coverage Begin</TableCell>\r\n                                <TableCell>{data.Time_Min ? data.Time_Min.slice(0,10) : 'Irregular'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Coverage End</TableCell>\r\n                                <TableCell>{data.Time_Max ? data.Time_Max.slice(0,10) : 'Irregular'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lat Coverage Begin</TableCell>\r\n                                <TableCell>{`${data.Lat_Min}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n                            <TableRow>\r\n                                <TableCell>Lat Coverage End</TableCell>\r\n                                <TableCell>{`${data.Lat_Max}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lon Coverage Begin</TableCell>\r\n                                <TableCell>{`${data.Lon_Min}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lon Coverage End</TableCell>\r\n                                <TableCell>{`${data.Lon_Max}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Depth Coverage Begin</TableCell>\r\n                                <TableCell>{data.Depth_Min ? `${data.Depth_Min}(m)` : 'Surface Only'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Depth Coverage End</TableCell>\r\n                                <TableCell>{data.Depth_Max ? `${data.Depth_Max}(m)` : 'Surface Only'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            {data.Variable_Min &&\r\n                                <TableRow>\r\n                                    <TableCell>Minimum Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Min}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Max &&\r\n                                <TableRow>\r\n                                    <TableCell>Maximum Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Max}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Mean && \r\n                                <TableRow>\r\n                                    <TableCell>Mean Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Mean}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Std &&\r\n                                <TableRow>\r\n                                    <TableCell>Standard Deviation({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Std}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n                    </TableBody>\r\n                </Table>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(TableStatsDialog);","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nconst mapTemporalResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [temporalResolutions.threeMinutes] : 1,\r\n        [temporalResolutions.sixHourly] : 1,\r\n        [temporalResolutions.daily] : 1,\r\n        [temporalResolutions.weekly] : 7,\r\n        [temporalResolutions.monthly] : 30,\r\n        [temporalResolutions.annual] : 365,\r\n        [temporalResolutions.irregular] : null,\r\n        [temporalResolutions.monthlyClimatology]: 30,\r\n        [temporalResolutions.threeDay]: 3,\r\n        [temporalResolutions.eightDayRunning]: 8,\r\n        [temporalResolutions.eightDays]: 8\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapTemporalResolutionToNumber;","const utcDateStringToLocal = (utcString) => {\r\n    let date = new Date(utcString);\r\n    let utcYear = date.getUTCFullYear();\r\n    let utcMonth = date.getUTCMonth();\r\n    let utcDate = date.getUTCDate();\r\n\r\n    let newDate = new Date();\r\n    newDate.setFullYear(utcYear, utcMonth, utcDate);\r\n    return newDate;\r\n}\r\n\r\nexport default utcDateStringToLocal;","\r\nconst darwinDepths = [\r\n    5,\r\n    15,\r\n    25,\r\n    35,\r\n    45,\r\n    55,\r\n    65,\r\n    75.005,\r\n    85.025,\r\n    95.095,\r\n    105.31,\r\n    115.87,\r\n    127.15,\r\n    139.74,\r\n    154.47,\r\n    172.4,\r\n    194.735,\r\n    222.71,\r\n    257.47,\r\n    299.93,\r\n    350.68,\r\n    409.93,\r\n    477.47,\r\n    552.71,\r\n    634.735,\r\n    722.4,\r\n    814.47,\r\n    909.74,\r\n    1007.155,\r\n    1105.905,\r\n    1205.535,\r\n    1306.205,\r\n    1409.15,\r\n    1517.095,\r\n    1634.175,\r\n    1765.135,\r\n    1914.15,\r\n    2084.035,\r\n    2276.225,\r\n    2491.25,\r\n    2729.25,\r\n    2990.25,\r\n    3274.25,\r\n    3581.25,\r\n    3911.25,\r\n    4264.25,\r\n    4640.25,\r\n    5039.25,\r\n    5461.25,\r\n    5906.25\r\n]\r\n\r\nconst piscesDepths = [\r\n    0.494024991989,\r\n    1.54137504101,\r\n    2.64566898346,\r\n    3.81949496269,\r\n    5.07822418213,\r\n    6.44061422348,\r\n    7.92956018448,\r\n    9.5729970932,\r\n    11.404999733,\r\n    13.4671401978,\r\n    15.8100700378,\r\n    18.4955596924,\r\n    21.5988197327,\r\n    25.2114105225,\r\n    29.4447307587,\r\n    34.4341506958,\r\n    40.3440513611,\r\n    47.3736915588,\r\n    55.764289856,\r\n    65.8072662354,\r\n    77.8538513184,\r\n    92.3260726929,\r\n    109.729301453,\r\n    130.666000366,\r\n    155.850692749,\r\n    186.125595093,\r\n    222.475204468,\r\n    266.040313721,\r\n    318.127410889,\r\n    380.213012695,\r\n    453.937713623,\r\n    541.088928223,\r\n    643.566772461,\r\n    763.333129883,\r\n    902.339294434,\r\n    1062.43994141,\r\n    1245.29101562,\r\n    1452.25097656,\r\n    1684.28405762,\r\n    1941.89294434,\r\n    2225.07788086,\r\n    2533.3359375,\r\n    2865.70288086,\r\n    3220.82006836,\r\n    3597.03198242,\r\n    3992.48388672,\r\n    4405.22412109,\r\n    4833.29101562,\r\n    5274.78417969,\r\n    5727.91699219\r\n]\r\n\r\nconst _piscesTables = [\r\n    'tblPisces_NRT',\r\n    'tblPisces_NRT_Calendar'\r\n]\r\n\r\nconst _darwinTable = [\r\n    'tblDarwin_Chl_Climatology',\r\n    'tblDarwin_Ecosystem',\r\n    'tblDarwin_Nutrient',\r\n    'tblDarwin_Nutrient_Climatology',\r\n    'tblDarwin_Ocean_Color',\r\n    'tblDarwin_Phytoplankton',\r\n    'tblDarwin_Plankton_Climatology'\r\n]\r\n\r\nconst piscesTable = new Set(_piscesTables);\r\nconst darwinTable = new Set(_darwinTable);\r\n\r\nconst exports = {\r\n    count: (field, depth1, depth2) => {\r\n        const { Table_Name: table } = field.data;\r\n        var count = 0;\r\n    \r\n        if(piscesTable.has(table)) {\r\n            for(let i = 0; i < piscesDepths.length; i++){\r\n                if(piscesDepths[i] > depth2) break;\r\n                if(piscesDepths[i] > depth1) count ++; \r\n            }\r\n        } else if (darwinTable.has(table)) {\r\n            for(let i = 0; i < darwinDepths.length; i++){\r\n                if(darwinDepths[i] > depth2) break;\r\n                if(darwinDepths[i] > depth1) count ++; \r\n            }\r\n        } else {}\r\n        return count;\r\n    },\r\n\r\n    piscesTable,\r\n    darwinTable,\r\n    piscesDepths,\r\n    darwinDepths\r\n}\r\n\r\nexport default exports;","import visualizationSubTypes from '../Enums/visualizationSubTypes';\r\n\r\nexport default (charts) => {\r\n    let count = 0;\r\n    charts.forEach(chart => {\r\n        if(chart.subType === visualizationSubTypes.heatmap) count ++;\r\n        if(chart.subType === visualizationSubTypes.sparse){\r\n            count ++;\r\n            if(chart.data.variableValues.length > 10000) count +=3;\r\n        }\r\n    })\r\n    return count;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport * as JsSearch from 'js-search';\r\nimport { VariableSizeList as ReactWindowList } from \"react-window\";\r\n\r\nimport { ButtonGroup, Grid, IconButton, Icon, ListItem, MenuItem, Typography, Drawer, TextField, FormControl, InputLabel, Button, Tooltip} from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\nimport { Search, Cached, LibraryBooks, ArrowRight, ChevronLeft, ChevronRight, InsertChartOutlined, Language, Delete, CloudDownload, Info } from '@material-ui/icons';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\nimport validation from '../../Enums/validation';\r\nimport TableStatsDialog from './TableStatsDialog';\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nconst navDrawerWidth = 320;\r\n\r\nconst errorHeightAdjust = 23;\r\n\r\nconst styles = theme => ({\r\n    drawer: {\r\n        width: navDrawerWidth,\r\n        top: 32,\r\n        bottom: 'auto',\r\n        overflow: 'visible'\r\n    },\r\n\r\n    drawerPaper: {\r\n        width: navDrawerWidth,\r\n        height: '540px',\r\n        top: 'calc(50% - 270px)',\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    drawerPaperError1: {\r\n        height: `${540 + errorHeightAdjust}px`\r\n    },\r\n\r\n    drawerPaperError2: {\r\n        height: `${540 + errorHeightAdjust * 2}px`\r\n    },\r\n\r\n    drawerPaperError3: {\r\n        height: `${540 + errorHeightAdjust * 3}px`\r\n    },\r\n\r\n    drawerPaperError4: {\r\n        height: `${540 + errorHeightAdjust * 4}px`\r\n    },\r\n\r\n    drawerPaperError5: {\r\n        height: `${540 + errorHeightAdjust * 5}px`\r\n    },\r\n\r\n  openPanelChevron: {\r\n    position: 'fixed',\r\n    left: '5px',\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  closePanelChevron: {\r\n    position: 'fixed',\r\n    left: navDrawerWidth + 5,\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  groupedButtons: {\r\n      width: '50%',\r\n      border: '1px solid #313131',\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c'\r\n  },\r\n\r\n  controlPanelForm: {\r\n      marginTop: theme.spacing(1)\r\n  },\r\n\r\n  tableStatsButton: {\r\n      borderRadius: 0,\r\n      paddingTop: '11px',\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n    formGridItem: {\r\n        borderLeft: '1px solid #313131',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  vizTypeSelectFormControl: {\r\n      width: '100%',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    }\r\n  },\r\n\r\n  depressed: {\r\n      boxShadow: 'inset 1px 1px 5px #1c1c1c'\r\n  },\r\n\r\n  padLeft: {\r\n      padding: '6px 0 2px 7px'\r\n  },\r\n\r\n  visualizeButton: {\r\n      height: '56px',\r\n      borderRadius: 0,\r\n      backgroundColor: colors.backgroundGray,\r\n      color: theme.palette.primary.main,\r\n      fontVariant: 'normal',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    },\r\n      '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n            color: 'white'\r\n        }\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  vizButtonTooltip: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  datePickerInputAdornment: {\r\n      padding: 0\r\n  },\r\n\r\n  clearChartsButton: {\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c',\r\n      width: '100%',\r\n      borderRight: '1px solid #313131'\r\n\r\n  },\r\n\r\n  resetSPParamsButton: {\r\n    borderRadius: 0,\r\n    backgroundColor: '#3c3c3c',\r\n    width: '100%',\r\n  },\r\n\r\n  datePicker: {\r\n      width: '100%'\r\n  },\r\n\r\n  vizTypeMenu: {\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n  vizTypeMenuItem: {\r\n    '&:hover': {backgroundColor: colors.greenHover}\r\n  }\r\n});\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    storedProcedureRequestState: state.storedProcedureRequestState,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst getDatePlaceholder = (date) => {\r\n    if(isNaN(new Date(date)).valueOf()) return 'yyyy-MM-dd';\r\n    \r\n    let month  = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n    let year = date.getFullYear();\r\n    return [year, month < 10 ? '0' + month : month, day < 10 ? '0' + day : day].join('-');\r\n}\r\n\r\nconst groupHeaderHeight = 37;\r\nconst height = 35;\r\n\r\nconst reactWindowListRef = React.createRef();\r\nconst selectRef = React.createRef();\r\n\r\nclass MenuList extends Component {\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n      if(reactWindowListRef.current) reactWindowListRef.current.resetAfterIndex(0);\r\n      if(!(this.props.children && this.props.children.length)) return;\r\n      let scrollOffset = 0;\r\n      let foundFocus = false;\r\n      this.props.children.forEach(child => {\r\n        if(foundFocus) return;\r\n\r\n        let count = groupHeaderHeight;\r\n        let groupHasFocus= false;\r\n        for(let i = 0; i < child.props.children.length; i++){\r\n          if(child.props.children[i].props.isFocused) {\r\n            foundFocus = true;\r\n            groupHasFocus = true;\r\n            break;\r\n          }\r\n          count += 37.6;\r\n        }\r\n\r\n        if(groupHasFocus) scrollOffset += count;\r\n        else scrollOffset += 37.6;\r\n      })\r\n      if(foundFocus) reactWindowListRef.current.scrollTo(scrollOffset > 150 ? scrollOffset - 150 : 0);\r\n    }\r\n\r\n    render() {\r\n        const { options, children, getValue } = this.props;\r\n\r\n        if(!children || !children.length) return '';\r\n        const [value] = getValue();\r\n        const initialOffset = options.indexOf(value) * height;\r\n        const groupHeights = children.map(child => {\r\n          return child.props.children.some(grandChild => grandChild.props.isFocused) ? child.props.children.length * 37.6 + groupHeaderHeight : groupHeaderHeight;\r\n        });\r\n        const totalHeight = groupHeights.reduce((acc, cur) => acc + cur, 0);\r\n        const estimatedItemSize = totalHeight / children.length;\r\n        const getItemSize = index => groupHeights[index];\r\n\r\n        return (\r\n            <ReactWindowList\r\n                height={totalHeight < 400 ? totalHeight :  400}\r\n                estimatedItemSize={estimatedItemSize}\r\n                itemCount={children.length}\r\n                itemSize={getItemSize}\r\n                initialScrollOffset={initialOffset || 0}\r\n                ref={reactWindowListRef}\r\n            >\r\n                {({ index, style }) => <div style={{...style}}>{children[index]}</div>}\r\n            </ReactWindowList>\r\n        );\r\n    }\r\n}\r\n\r\nclass Group extends Component {\r\n    render() {\r\n        const hasFocus = this.props.children.some(element => element.props.isFocused);\r\n        const sensor = this.props.children[0].props.data.data.Sensor;\r\n\r\n      return (\r\n          <React.Fragment>\r\n            <CustomHeading \r\n              {...this.props.headingProps} \r\n              headingLabel={this.props.data.label} \r\n              firstChild={this.props.children[0].props.data}\r\n              hasFocus={hasFocus}\r\n              sensor={sensor}\r\n              tableName={this.props.children[0].props.data.data.Table_Name}\r\n              selectProps={this.props.selectProps}\r\n            />\r\n            <div hidden={!hasFocus}>\r\n              {this.props.children.map(child => child)}\r\n            </div>\r\n          </React.Fragment>\r\n        );\r\n    }    \r\n}\r\n\r\nconst customHeadingStyles = (theme) => ({\r\n    customHeading: {\r\n        backgroundColor: 'rgba(0,0,0,.5)',\r\n        height: groupHeaderHeight,\r\n        '&:hover': {\r\n            // backgroundColor: 'rgba(122,67,0,.5)',\r\n            backgroundColor: colors.greenHover\r\n        },\r\n        boxShadow: '0px 1px 1px 1px #242424'\r\n    },\r\n\r\n    icon: {\r\n        marginRight: '10px',\r\n        width: '30px'\r\n    },\r\n\r\n    typography: {\r\n        width: '650px',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    }\r\n})\r\n\r\nconst _CustomHeading = props => {\r\n    const { classes, sensor, selectProps } = props;\r\n    let iconClass;\r\n\r\n    if(sensor === 'Satellite') iconClass = 'fa-satellite';\r\n    else if(sensor === 'Blend') iconClass = 'fa-laptop';\r\n    else iconClass = 'fa-ship';\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ListItem \r\n          button \r\n          alignItems='center' \r\n          onClick={() => selectRef.current.select.setState({focusedOption: props.hasFocus ? null : props.firstChild})}\r\n          className={classes.customHeading}\r\n        >\r\n            <Icon fontSize='small' color='inherit' className={`fas ${iconClass} ${classes.icon}`}></Icon>\r\n        <Typography className={classes.typography}>\r\n            {props.headingLabel.length > 70 ? props.headingLabel.slice(0,67) + '...' : props.headingLabel}\r\n        </Typography>\r\n\r\n        <Tooltip title='Download Data' placement='right'>\r\n            <IconButton \r\n                color='inherit' \r\n                onClick={(e) => {\r\n                    selectProps.handleSetDownloadTarget({dataset: props.headingLabel})\r\n                    e.stopPropagation();\r\n                }}>\r\n                <CloudDownload/>\r\n            </IconButton>\r\n        </Tooltip>\r\n\r\n        { selectProps.datasets[props.headingLabel] &&\r\n            <Tooltip title='Dataset Info' placement='right'>\r\n                <IconButton \r\n                    color='inherit' \r\n                    onClick={(e) => {\r\n                        window.open(selectProps.datasets[props.headingLabel].Doc_URL);\r\n                        e.stopPropagation();\r\n                    }}\r\n                >\r\n                    <Info/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        }\r\n        </ListItem>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\nconst CustomHeading = withStyles(customHeadingStyles)(_CustomHeading);\r\n\r\n// Replace react-select dropdown area with material version\r\nconst DropdownIndicator = (props) => {\r\n    return (\r\n    <components.DropdownIndicator {...props}>\r\n        <ArrowRight/>\r\n    </components.DropdownIndicator>\r\n    );\r\n};\r\n\r\nconst Menu = (props) => {\r\n    return (\r\n        <components.Menu\r\n        {...props}\r\n        className='react-select-menu-cmap'\r\n        >\r\n\r\n        </components.Menu>\r\n    )\r\n}\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst GroupHeading = (props) => '';\r\n\r\nconst SingleValue = (props) => {\r\n    return (\r\n        <components.SingleValue\r\n            {...props}\r\n            children={null}\r\n        >\r\n            {props.data.label}\r\n        </components.SingleValue>\r\n    )\r\n}\r\n\r\nconst optionLabelSpanStyleLeft = {\r\n    display: 'inline-block',\r\n    boxSizing: 'border-box',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    fontSize: '15px',\r\n    marginRight: '32px',\r\n    width: 'calc(60% - 32px)',\r\n    textAlign: 'left'\r\n}\r\n\r\nconst optionLabelSpanStyleMid = {\r\n    ...optionLabelSpanStyleLeft,\r\n    marginRight: '24px',\r\n    width: 'calc(15% - 24px)'\r\n}\r\n\r\nconst optionLabelSpanStyleRight = {\r\n    ...optionLabelSpanStyleLeft,\r\n    textAlign: 'right',\r\n    marginRight: '0px',\r\n    width: '25%'\r\n}\r\n\r\nconst formatOptionLabel = (option, meta) => {\r\n    return (\r\n        <React.Fragment>\r\n            <span style={optionLabelSpanStyleLeft}>{option.label}</span>\r\n            <span style={optionLabelSpanStyleMid}>{option.data.Spatial_Resolution === 'Irregular' ? 'Irregular' : 'Gridded'}</span>\r\n            <span style={optionLabelSpanStyleRight}>{option.data.Data_Source}</span>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst ValueContainer = (props) => {\r\n    return (\r\n        <components.ValueContainer {...props}>\r\n            <Search color='primary' style={{ position: \"absolute\", left: 6 }}/>\r\n            {props.children}\r\n        </components.ValueContainer>\r\n    )\r\n}\r\n\r\nclass VizControlPanel extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Variable');\r\n        search.addIndex('Unit');\r\n        search.addIndex('Make');\r\n        search.addIndex('Sensor');\r\n        search.addIndex('Data_Source');\r\n        search.addIndex('Process_Level');\r\n        search.addIndex('Long_Name');\r\n        search.addIndex('Keywords');\r\n        search.addIndex('Table_Name');\r\n        search.addIndex('Dataset_Name');\r\n        search.addIndex('Study_Domain');\r\n        search.addIndex('Spatial_Resolution');\r\n        search.addIndex('Temporal_Resolution');\r\n\r\n        if(props.catalog) search.addDocuments(props.catalog);\r\n\r\n        this.state = {\r\n            tableStatsDialogIsOpen: false,\r\n            search,\r\n            searchField: '',\r\n            showControlPanel: true,\r\n            lastSelectedFieldId: null\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.catalog && prevProps.catalog.length) && (this.props.catalog && this.props.catalog.length)){\r\n            this.state.search.addDocuments(this.props.catalog);\r\n            this.setState({search: this.state.search});\r\n        }\r\n    }\r\n\r\n    handleOpenControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: true})\r\n    }\r\n\r\n    handleCloseControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: false})\r\n    }      \r\n    \r\n    handleTableStatsDialogClose = () => {\r\n        this.setState({...this.state, tableStatsDialogIsOpen: false})\r\n    }\r\n\r\n    handleTableStatsDialogOpen = (event) => {\r\n        event.stopPropagation();\r\n        this.setState({...this.state, tableStatsDialogIsOpen: true});\r\n    }\r\n\r\n    getSelectOptionsFromCatalogItems = (items) => {\r\n        var options = {};\r\n        let count = 0;\r\n\r\n        items.forEach(item => {\r\n            if(item.Visualize == 1) {\r\n                if(!options[item.Dataset_Name]){\r\n                    options[item.Dataset_Name] = {\r\n                        label: item.Dataset_Name,\r\n                        options: []\r\n                    }\r\n                }\r\n                // TODO use css textoverflow for this if possible\r\n                options[item.Dataset_Name].options.push({\r\n                    value: item.Variable,\r\n                    label: item.Long_Name.length < 80 ? item.Long_Name : item.Long_Name.slice(0,78) + '...',\r\n                    data: item\r\n                })\r\n            }\r\n        });\r\n\r\n        let sortedOptions = Object.values(options).sort((opt1, opt2) => {\r\n            return opt1.label < opt2.label ? -1 : 1;\r\n        })\r\n        return sortedOptions;\r\n    }\r\n\r\n    estimateCsvSize = (datasetName) => {\r\n        // let members = [];\r\n        let count = 0;\r\n        this.props.catalog.forEach((member, i) => {\r\n            if(member.Dataset_Name === datasetName){\r\n                count += parseInt(member.Variable_Count) || 0;\r\n                // members.push(member);\r\n            }\r\n        })\r\n        return count;\r\n    }\r\n\r\n    handleResetSPParams = () => {\r\n        this.props.resetSPParams();\r\n        this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') {\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n\r\n        if(action.action === 'escape-clear'){\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n        // if(action.action ==='set-value') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, fields, depth1, depth2, selectedVizType } = this.props;\r\n        if(!fields) return 0;\r\n        if(fields.data.Spatial_Resolution === spatialResolutions.irregular) return 0;\r\n        if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return 0;\r\n\r\n        const date1 = Date.parse(dt1);\r\n        const date2 = Date.parse(dt2);\r\n        \r\n        const dayDiff = (date2 - date1) / 86400000;\r\n        \r\n        const res = mapSpatialResolutionToNumber(fields.data.Spatial_Resolution);\r\n        \r\n        const dateCount = Math.floor(dayDiff / mapTemporalResolutionToNumber(fields.data.Temporal_Resolution)) || 1;\r\n        const depthCount = depthUtils.count(fields, depth1, depth2) || 1;\r\n        \r\n        const latCount = (lat2 - lat1) / res;\r\n        const lonCount = (lon2 - lon1) / res;\r\n\r\n        const pointCount = lonCount * latCount * depthCount * dateCount;\r\n        return pointCount;\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth1) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.fields.data.Depth_Max)) return validation.depth.depthOneOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Max).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth2) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth2) < parseFloat(this.props.fields.data.Depth_Min)) return validation.depth.depthTwoOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Min).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkStartDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt1)).valueOf() || !this.props.dt1) return 'Start date is invalid';\r\n    }\r\n\r\n    checkEndDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt2)).valueOf() || !this.props.dt1) return 'End date is invalid';\r\n    }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.dt1 > this.props.dt2) return validation.date.dateOneIsLater;\r\n        if(this.props.dt1 > this.props.fields.data.Time_Max) return validation.date.dateOneOutOfBounds.replace('$', this.props.fields.data.Time_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.dt2 < this.props.fields.data.Time_Min) return validation.date.dateTwoOutOfBounds.replace('$', this.props.fields.data.Time_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) < -90 || parseFloat(this.props.lat1) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.lat2)) return validation.lat.latOneIsHigher;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.fields.data.Lat_Max)) return validation.lat.latOneOutOfBounds.replace('$', this.props.fields.data.Lat_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < -90 || parseFloat(this.props.lat2) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < parseFloat(this.props.fields.data.Lat_Min)) return validation.lat.latTwoOutOfBounds.replace('$', this.props.fields.data.Lat_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon1) < -180 || parseFloat(this.props.lon1) > 180) return validation.generic.invalid;\r\n        if(this.props.lon1 > this.props.lon2) return '';\r\n        if(parseFloat(this.props.lon1) > parseFloat(this.props.fields.data.Lon_Max)) return validation.lon.lonOneOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < -180 || parseFloat(this.props.lon2) > 180) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < parseFloat(this.props.fields.data.Lon_Min)) return validation.lon.lonTwoOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', \"Section Map\");\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        if(this.props.dt1 === this.props.dt2) return validation.type.dateRangeRequired.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', 'Depth Profile');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.props.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.props.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count(this.props.fields, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n        if(this.props.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1200000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.fields) return validation.generic.variableMissing;\r\n        if(!this.props.selectedVizType) return validation.generic.vizTypeMissing;\r\n        return ''}\r\n\r\n    handleShowChartsAndResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);\r\n        this.props.handleShowCharts();     \r\n    }\r\n\r\n    handleUpdateFields = (newValue, action) => {\r\n        this.props.updateFields(newValue);\r\n        this.setState({...this.state, searchField: '', lastSelectedFieldId: newValue ? newValue.data.ID : this.state.lastSelectedFieldId});\r\n    }\r\n    \r\n    render() {      \r\n        const { search, searchField, showControlPanel } = this.state;\r\n        \r\n        const { classes, \r\n            fields, \r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType,\r\n            catalog,\r\n            catalogRequestState,\r\n            showCharts,\r\n            handleShowGlobe,\r\n            handleChange,\r\n            handleLatLonChange,\r\n            datasets,\r\n        } = this.props;\r\n\r\n\r\n        const options = searchField && catalog ? this.getSelectOptionsFromCatalogItems(search.search(searchField)) \r\n            : catalog ? this.getSelectOptionsFromCatalogItems(catalog) \r\n            : []\r\n\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n        var catalogMinDate = fields && utcDateStringToLocal(fields.data.Time_Min).setHours(0,0,0,0);\r\n        var catalogMaxDate = fields && utcDateStringToLocal(fields.data.Time_Max).setHours(0,0,0,0);\r\n        var zeroedDT1 = dt1.setHours(0,0,0,0);\r\n        var zeroedDT2 = dt2.setHours(0,0,0,0);\r\n        \r\n        var minDate = fields ? catalogMinDate : utcDateStringToLocal('1900-01-01').setHours(0,0,0,0);\r\n\r\n        let minDateMessage = fields && zeroedDT2 < catalogMinDate ? 'End cannot be before dataset start date' : '';\r\n        var maxDateMessage;\r\n        var maxDate;\r\n\r\n        if(!fields){\r\n            maxDate = zeroedDT2;\r\n            maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n        } else {\r\n            \r\n\r\n            if(catalogMaxDate < zeroedDT2){\r\n                maxDate = catalogMaxDate;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after dataset end date' : '';\r\n            } else {\r\n                maxDate = zeroedDT2;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n            }\r\n        }\r\n\r\n        if(fields) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDateValid(),\r\n                this.checkEndDateValid()\r\n            ];\r\n        } else validations = Array(16).fill('');\r\n\r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            minDateMessage,\r\n            maxDateMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ];\r\n\r\n        let cdvl = checkDisableVisualizeList;\r\n        let errorCount = 0;\r\n        \r\n        if(cdvl[0] || cdvl[1]) errorCount ++;\r\n        if(cdvl[2] || cdvl[3]) errorCount ++;\r\n        if(cdvl[4] || cdvl[5]) errorCount ++;\r\n        if(cdvl[7] || cdvl[9]) errorCount ++;\r\n        if(cdvl[8] || cdvl[10]) errorCount ++;\r\n\r\n        const errorSizeAdjust = errorCount > 0 ? 'drawerPaperError' + errorCount : '';\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <div>\r\n                <TableStatsDialog\r\n                    open={this.state.tableStatsDialogIsOpen}\r\n                    onClose={this.handleTableStatsDialogClose}\r\n                    data={fields && fields.data}\r\n                />\r\n\r\n                { showControlPanel ? \r\n\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleCloseControlPanel}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                :\r\n                    \r\n                        <IconButton \r\n                            className={classes.openPanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleOpenControlPanel}>\r\n                            <ChevronRight />\r\n                        </IconButton>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper} ${classes[errorSizeAdjust]}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n                    <ButtonGroup>\r\n                        <Tooltip title='Show Globe' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${!showCharts && classes.depressed}`} \r\n                                onClick={handleShowGlobe}\r\n                                color='inherit'\r\n                            >\r\n                                <Language/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        \r\n                        <Tooltip title='Show Charts' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${showCharts && classes.depressed}`}\r\n                                onClick={this.handleShowChartsAndResize}\r\n                                color='inherit'\r\n                            >\r\n                                <InsertChartOutlined/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </ButtonGroup>\r\n                    \r\n                    <Grid container>\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Clear Charts' placement='bottom'>\r\n                                <IconButton color='inherit' onClick={this.props.clearCharts} className={classes.clearChartsButton}>\r\n                                    <Delete/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Reset Parameters' placement='right'>\r\n                                <IconButton color='inherit' onClick={this.handleResetSPParams} className={classes.resetSPParamsButton}>\r\n                                    <Cached/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <form>\r\n                        <Grid container>\r\n                            <Grid item xs={10}>\r\n                                {/* <ConnectedTooltip placement='top' title='Enter one or more search terms.'> */}\r\n                                    <Select\r\n                                        formatOptionLabel={formatOptionLabel}\r\n                                        handleSetDownloadTarget={this.props.handleSetDownloadTarget}\r\n                                        handleTableStatsDialogOpen={this.handleTableStatsDialogOpen}\r\n                                        isLoading = {catalogRequestState === states.inProgress}\r\n                                        onAutoSuggestChange = {this.onAutoSuggestChange}\r\n                                        datasets = {datasets}\r\n                                        \r\n                                        components={{\r\n                                            IndicatorSeparator:'',\r\n                                            DropdownIndicator,\r\n                                            GroupHeading,\r\n                                            Group,\r\n                                            Option,\r\n                                            MenuList,\r\n                                            SingleValue,\r\n                                            Menu,\r\n                                            ValueContainer\r\n                                        }}\r\n                                        lastSelectedFieldId={this.state.lastSelectedFieldId}\r\n                                        escapeClearsValue\r\n                                        ref={selectRef}\r\n                                        onInputChange={this.onAutoSuggestChange}\r\n                                        filterOption={null}\r\n                                        // menuIsOpen={true}\r\n                                        className={classes.variableSelect}\r\n                                        isClearable\r\n                                        inputValue={this.state.searchField}\r\n                                        name=\"fields\"\r\n                                        label=\"Variables\"\r\n                                        options={options}\r\n                                        onChange={this.handleUpdateFields}\r\n                                        value={fields}\r\n                                        placeholder=\"Search Catalog\"\r\n                                        styles={{\r\n                                            menu: provided => ({\r\n                                                ...provided, \r\n                                                zIndex: 1300, \r\n                                                width: '980px',\r\n                                                maxWidth: '90vw',\r\n                                                borderRadius: '4px',\r\n                                                boxShadow: '2px 2px 2px 2px #242424',\r\n                                                overflow: 'hidden',\r\n                                                backgroundColor: 'rgba(0,0,0,.5)',\r\n                                                backdropFilter: 'blur(5px)',\r\n                                            }),\r\n\r\n                                            valueContainer: provided => ({\r\n                                                ...provided,\r\n                                                padding: '0 0 0 34px',\r\n                                                fontWeight: 100\r\n                                            }),\r\n\r\n                                            input: provided => ({...provided,\r\n                                                color: 'white',\r\n                                                fontFamily: '\"Lato\", sans-serif'\r\n                                            }),\r\n\r\n                                            control: provided => ({...provided,\r\n                                                backgroundColor: colors.backgroundGray,\r\n                                                border: 'none',\r\n                                                borderBottom: '1px solid #333333',\r\n                                                borderRadius: 0,\r\n                                                '&:hover': { borderColor: 'white' },\r\n                                                '&:focus-within': { borderColor: colors.primary },\r\n                                                height: '56px'\r\n                                            }),\r\n\r\n                                            placeholder: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                fontSize: '14px',\r\n                                                fontWeight: 300\r\n                                            }),\r\n\r\n                                            noOptionsMessage: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                backgroundColor: colors.backgroundGray\r\n                                            }),\r\n\r\n                                            option: (provided, { data, isFocused }) => {\r\n                                                return ({...provided,\r\n                                                    fontWeight: 400,\r\n                                                    fontSize: '16px',\r\n                                                    backgroundColor: 'transparent',\r\n                                                    color: isFocused ? colors.primary : 'white',\r\n                                                    '&:hover': { backgroundColor: colors.greenHover},\r\n                                            })},\r\n\r\n                                            singleValue: (provided, state) => ({...provided,\r\n                                                color: 'white',\r\n                                                fontWeight: 400,\r\n                                                zIndex: 1290\r\n                                            })\r\n                                        }}\r\n                                        theme={theme => ({\r\n                                            ...theme,\r\n                                            colors: {\r\n                                            ...theme.colors,\r\n                                            },\r\n                                        })}\r\n                                    />\r\n                                {/* </ConnectedTooltip> */}\r\n                            </Grid>\r\n                            <Grid item xs={2} className={classes.tableStatsButton}>\r\n                                {\r\n                                    fields ? \r\n                                    <Tooltip placement='right' title='View Variable Summary Statistics'>\r\n                                        <IconButton \r\n                                            size='small' \r\n                                            onClick={this.handleTableStatsDialogOpen}                                     \r\n                                            disabled={!fields}\r\n                                        >\r\n                                            <LibraryBooks/>\r\n                                        </IconButton>\r\n                                    </Tooltip> :\r\n                                    <IconButton \r\n                                        size='small' \r\n                                        onClick={this.handleTableStatsDialogOpen}                                     \r\n                                        disabled={!fields}\r\n                                    >\r\n                                        <LibraryBooks/>\r\n                                    </IconButton>\r\n                                }\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12}>\r\n                                <KeyboardDatePicker\r\n                                    className={classes.datePicker}\r\n                                    placeholder={getDatePlaceholder(dt1)}\r\n                                    id=\"startDate\"\r\n                                    label=\"Start Date\"\r\n                                    name=\"dt1\"\r\n                                    format='yyyy-MM-dd'\r\n                                    maxDate={maxDate}\r\n                                    // minDate={null}\r\n                                    maxDateMessage={maxDateMessage}\r\n                                    autoOk\r\n                                    value={dt1}\r\n                                    onChange={this.props.handleStartDateChange}\r\n                                    inputVariant='filled'\r\n                                    variant='inline'\r\n                                    KeyboardButtonProps={{\r\n                                        className: classes.datePickerInputAdornment\r\n                                    }}\r\n                                />\r\n                            </Grid>  \r\n\r\n                            <Grid item xs={12}>\r\n                                <KeyboardDatePicker\r\n                                    className={classes.datePicker}\r\n                                    placeholder={getDatePlaceholder(dt2)}\r\n                                    id=\"endDate\"\r\n                                    label=\"End Date\"\r\n                                    name=\"dt2\"\r\n                                    format='yyyy-MM-dd'\r\n                                    minDate={minDate}\r\n                                    // maxDate={null}\r\n                                    minDateMessage={minDateMessage}\r\n                                    autoOk\r\n                                    value={dt2}\r\n                                    onChange={this.props.handleEndDateChange}\r\n                                    inputVariant='filled'\r\n                                    variant='inline'\r\n                                    KeyboardButtonProps={{\r\n                                        className: classes.datePickerInputAdornment\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lat1-input\"\r\n                                    error={Boolean(startLatMessage)}\r\n                                    label={\"Start Lat(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lat1}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startLatMessage}\r\n                                    name='lat1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lat2-input\"\r\n                                    error={Boolean(endLatMessage)}\r\n                                    label={\"End Lat(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lat2}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endLatMessage}\r\n                                    name='lat2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lon1-input\"\r\n                                    error={Boolean(startLonMessage)}\r\n                                    label={\"Start Lon(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lon1}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startLonMessage}\r\n                                    name='lon1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lon2-input\"\r\n                                    error={Boolean(endLonMessage)}\r\n                                    label={\"End Lon(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lon2}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endLonMessage}\r\n                                    name='lon2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"depth1-input\"\r\n                                    error={Boolean(startDepthMessage)}\r\n                                    label=\"Start Depth(m)\"\r\n                                    className={classes.textField}\r\n                                    value={isNaN(Math.floor(depth1 * 1000) / 1000) ? depth1 : Math.ceil(depth1 * 1000) / 1000}\r\n                                    onChange={handleChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startDepthMessage}\r\n                                    name='depth1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"depth2-input\"\r\n                                    error={Boolean(endDepthMessage)}\r\n                                    label=\"End Depth(m)\"\r\n                                    className={classes.textField}\r\n                                    value={isNaN(Math.ceil(depth2 * 1000) / 1000) ? depth2 : Math.ceil(depth2 * 1000) / 1000}\r\n                                    onChange={handleChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endDepthMessage}\r\n                                    name='depth2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12}>\r\n                                <FormControl variant='filled' className={classes.vizTypeSelectFormControl} disabled={!fields}>\r\n                                    <InputLabel shrink htmlFor=\"vizSelector\" >Type</InputLabel>\r\n                                    <MUISelect\r\n                                        className={classes.vizTypeSelectFormControl}\r\n                                        style={overrideDisabledStyle}\r\n                                        value={selectedVizType}\r\n                                        variant='filled'\r\n                                        onChange={this.props.handleChange}\r\n                                        inputProps={{\r\n                                            name: 'selectedVizType',\r\n                                            id: 'vizSelector',\r\n                                            variant: 'filled'\r\n                                        }}\r\n                                        MenuProps={{\r\n                                            MenuListProps: {\r\n                                                className: classes.vizTypeMenu\r\n                                            }\r\n                                        }}\r\n                                        >\r\n                                        {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                        {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                        {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                        {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                        {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                        {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Sparse Map</MenuItem>}\r\n                                    </MUISelect>\r\n                                </FormControl>\r\n                            </Grid>\r\n\r\n                            <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                                <Grid item xs={12}>\r\n                                    <Button\r\n                                        className={classes.visualizeButton}\r\n                                        variant='contained'\r\n                                        onClick={() => this.props.onVisualize()}\r\n                                        disabled={Boolean(disableVisualizeMessage) || !fields || !selectedVizType}\r\n                                        fullWidth\r\n                                    >\r\n                                        Visualize\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                    </form>                    \r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VizControlPanel));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, Typography, Table, TableBody, TableCell, TableRow, TableHead } from '@material-ui/core';\r\n\r\nimport { tableStatsRequestSend, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nconst styles = (theme) => ({\r\n    tableFooter: {\r\n        fontSize: '11px',\r\n        margin: '5px 0px 0px 10px'\r\n    },\r\n\r\n    table: {\r\n        marginTop: '9px'\r\n    },\r\n\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    datasets: state.datasets,\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    tableStatsRequestSend,\r\n    csvDownloadRequestSend\r\n}\r\n\r\nclass DownloadConfirmationDialog extends Component {\r\n\r\n    componentDidUpdate = () => {\r\n        const { downloadTarget, datasets, catalog, tableStatsRequestSend } = this.props;\r\n        if(downloadTarget && datasets && !datasets[downloadTarget.dataset].tableStats){\r\n            const firstMember = catalog.find(item => item.Dataset_Name === downloadTarget.dataset);\r\n            tableStatsRequestSend(firstMember.Table_Name, downloadTarget.dataset);\r\n        }\r\n    }\r\n\r\n    handleFullDatasetDownload = (tableName) => {\r\n        let query = `select%20*%20from%20${tableName}`;\r\n        const fileName = this.props.downloadTarget.variable || this.props.downloadTarget.dataset;\r\n        this.props.csvDownloadRequestSend(query, fileName, tableName);\r\n    }\r\n\r\n    handleSubsetDownload = (tableName, dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2) => {\r\n        const sampleMember = this.props.catalog.find(item => item.Dataset_Name === this.props.downloadTarget.dataset);\r\n        let isMonthyClimatology = Boolean(sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology);\r\n\r\n        const timeUnit = isMonthyClimatology ? 'month' : 'time';\r\n        const timeStart = isMonthyClimatology ? new Date(dt1).getMonth() + 1 : dt1;\r\n        const timeEnd = isMonthyClimatology ? new Date(dt2).getMonth() + 1 : dt2;\r\n\r\n        let query = `select * from ${tableName} where ${timeUnit} between '${timeStart}' and '${timeEnd}' and ` +\r\n            `lat between ${lat1} and ${lat2} and ` +\r\n            `lon between ${lon1} and ${lon2}`;\r\n\r\n        if(Boolean(sampleMember.Depth_Max)){\r\n            query += `and depth between ${depth1} and ${depth2}`\r\n        }\r\n\r\n        const fileName = this.props.downloadTarget.variable || this.props.downloadTarget.dataset;\r\n        this.props.csvDownloadRequestSend(query, fileName, tableName);\r\n    }\r\n\r\n    render() {\r\n        const { classes, datasets, downloadTarget, lat1, lat2, lon1, lon2, dt1, dt2, depth1, depth2, catalog } = this.props;\r\n\r\n        if(!downloadTarget || ! datasets ||  !catalog) return '';\r\n        \r\n        const tableStats = datasets[downloadTarget.dataset].tableStats;\r\n\r\n        if(!tableStats) return '';\r\n\r\n        const sampleMember = catalog.find(item => item.Dataset_Name === downloadTarget.dataset);\r\n        const { Lat_Min, Lat_Max, Lon_Min, Lon_Max, Time_Min, Time_Max, Depth_Min, Depth_Max, Table_Name } = sampleMember;\r\n        const latMin = parseFloat(Lat_Min);\r\n        const latMax = parseFloat(Lat_Max);\r\n        const lonMin = parseFloat(Lon_Min);\r\n        const lonMax = parseFloat(Lon_Max);\r\n        const timeMin = Date.parse(Time_Min);\r\n        const timeMax = Date.parse(Time_Max);\r\n\r\n        const subsetLat1 = lat1 < latMin ? latMin :\r\n            lat1 > latMax ? latMax :\r\n            lat1;\r\n\r\n        const subsetLat2 = lat2 < latMin ? latMin :\r\n        lat2 > latMax ? latMax :\r\n        lat2;\r\n\r\n        const subsetLon1 = lon1 < lonMin ? lonMin :\r\n            lon1 > lonMax ? lonMax :\r\n            lon1;\r\n\r\n        const subsetLon2 = lon2 < lonMin ? lonMin :\r\n            lon2 > lonMax ? lonMax :\r\n            lon2;\r\n\r\n        const subsetTime1 = dt1 < timeMin ? timeMin :\r\n            dt1 > timeMax ? timeMax :\r\n            dt1;\r\n\r\n        const subsetTime2 = dt2 < timeMin ? timeMin :\r\n            dt2 > timeMax ? timeMax:\r\n            dt2;\r\n\r\n        if(Depth_Max){\r\n            var depthMin = parseFloat(Depth_Min);\r\n            var depthMax = parseFloat(Depth_Max);\r\n\r\n            var subsetDepth1 = depth1 < depthMin ? depthMin : \r\n                depth1 > depthMax ? depthMax : \r\n                depth1;\r\n\r\n            var subsetDepth2 = depth2 < depthMin ? depthMin : \r\n                depth2 > depthMax ? depthMax : \r\n                depth2;\r\n        }        \r\n\r\n        const tableName = sampleMember.Table_Name;\r\n        \r\n        const totalRows = tableStats.lat.count;\r\n        const variableColumns = datasets[downloadTarget.dataset].Variables && datasets[downloadTarget.dataset].Variables.split(',').length;\r\n        const depthColumns = tableStats.depth ? 1 : 0;\r\n        const fixedColumns = 3;\r\n\r\n        const totalColumns = variableColumns + depthColumns + fixedColumns;\r\n\r\n        const totalDataPoints = totalRows * totalColumns;\r\n        const fullDataAvailable = totalDataPoints < 20000000;\r\n\r\n        var dateRatio;\r\n\r\n        if(sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology){\r\n            const subsetMonths = new Date(subsetTime2).getMonth() - new Date(subsetTime1).getMonth();\r\n            dateRatio = (subsetMonths + 1) / 12;\r\n        } else {\r\n            var totalDays = (timeMax - timeMin) / 86400000 || 1;\r\n            var subsetDays = (subsetTime2 - subsetTime1) / 86400000 || 1;\r\n            dateRatio = totalDays > subsetDays ? subsetDays / totalDays : 1;\r\n        }\r\n\r\n        const totalLatSize = (latMax - latMin) || 1;\r\n        const subsetLatSize = (subsetLat2 - subsetLat1) || 1;\r\n        const latRatio = totalLatSize > subsetLatSize ? subsetLatSize / totalLatSize : 1;\r\n\r\n        const totalLonSize = (lonMax - lonMin) || 1;\r\n        const subsetLonSize = subsetLon2 > subsetLon1 ? (subsetLon2 - subsetLon1) || 1 : (subsetLon2 + 360 - subsetLon1) || 1;\r\n        const lonRatio = totalLonSize > subsetLonSize ? subsetLonSize / totalLonSize : 1;\r\n\r\n        var depthRatio = 1;\r\n\r\n        if(sampleMember.Depth_Max) {\r\n            if(depthUtils.piscesTable.has(sampleMember.Table_Name)){\r\n                let depthCount = depthUtils.count({data: sampleMember}, subsetDepth1, subsetDepth2);\r\n                depthRatio = depthCount / depthUtils.piscesDepths.length || 1;\r\n            } else if (depthUtils.darwinTable.has(sampleMember.Table_Name)){\r\n                let depthCount = depthUtils.count({data: sampleMember}, subsetDepth1, subsetDepth2);\r\n                depthRatio = depthCount / depthUtils.darwinDepths.length || 1;\r\n            } else {\r\n                var totalDepthSize = depthMax - depthMin || 1;\r\n                var subsetDepthSize = subsetDepth2 - subsetDepth1 || 1;\r\n                depthRatio = subsetDepthSize > totalDepthSize ? 1 : subsetDepthSize / totalDepthSize;\r\n            }\r\n        }\r\n\r\n        const subsetDataPoints = Math.floor(totalDataPoints * dateRatio * latRatio * lonRatio * depthRatio);\r\n\r\n        const subsetAvailable = subsetDataPoints <= 20000000;\r\n\r\n        const timeString1 = new Date(subsetTime1).toISOString().slice(0,10);\r\n        const timeString2 = new Date(subsetTime2).toISOString().slice(0,10);\r\n        const timeStringMin = sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n            'Monthly' : new Date(timeMin).toISOString().slice(0,10);\r\n        const timeStringMax = sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n            'Monthly' : new Date(timeMax).toISOString().slice(0,10);\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <Dialog\r\n                    PaperProps={{\r\n                        className:classes.dialogPaper\r\n                    }}\r\n                    open={Boolean(downloadTarget)} \r\n                    onClose={() => this.props.handleSetDownloadTarget(null)} \r\n                    maxWidth={false}\r\n                >\r\n                    <DialogTitle>Downloading {downloadTarget.variable && `${downloadTarget.variable} from `} {downloadTarget.dataset}</DialogTitle>\r\n                    \r\n                    <DialogContent>\r\n                        {fullDataAvailable ? \r\n                            `The full dataset is available for download.` :\r\n                            `The full dataset is too large for download.`\r\n                        }\r\n                    </DialogContent>\r\n                    \r\n                    <DialogContent>\r\n                        <Typography>\r\n                            {subsetAvailable ? \r\n                                'The described subset is available for download' :\r\n                                `The described subset contains approximately ${subsetDataPoints} data points. Maximum download size is 20000000. Please reduce subset size.`\r\n                            }\r\n                        </Typography>\r\n\r\n                        <Table size='small'>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Parameter</TableCell>\r\n                                    <TableCell>Subset Start</TableCell>\r\n                                    <TableCell>Subset End</TableCell>\r\n                                    <TableCell>Dataset Min</TableCell>\r\n                                    <TableCell>Dataset Max</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                <TableRow>\r\n                                    <TableCell>Time</TableCell>\r\n                                    <TableCell>{timeString1}</TableCell>\r\n                                    <TableCell>{timeString2}</TableCell>\r\n                                    <TableCell>{timeStringMin}</TableCell>\r\n                                    <TableCell>{timeStringMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Latitude[{'\\xb0'}]</TableCell>\r\n                                    <TableCell>{subsetLat1}</TableCell>\r\n                                    <TableCell>{subsetLat2}</TableCell>\r\n                                    <TableCell>{latMin}</TableCell>\r\n                                    <TableCell>{latMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Longitude[{'\\xb0'}]</TableCell>\r\n                                    <TableCell>{subsetLon1}</TableCell>\r\n                                    <TableCell>{subsetLon2}</TableCell>\r\n                                    <TableCell>{lonMin}</TableCell>\r\n                                    <TableCell>{lonMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Depth[m]</TableCell>\r\n                                    <TableCell>{isNaN(subsetDepth1) ? 'NA' : subsetDepth1}</TableCell>\r\n                                    <TableCell>{isNaN(subsetDepth2) ? 'NA' : subsetDepth2}</TableCell>\r\n                                    <TableCell>{isNaN(depthMin) ? 'NA' : depthMin}</TableCell>\r\n                                    <TableCell>{isNaN(depthMax) ? 'NA' : depthMax}</TableCell>\r\n                                </TableRow>\r\n                            </TableBody>\r\n                                \r\n                        </Table>\r\n\r\n                        <Typography className={classes.tableFooter}>\r\n                            *Subset start and end values may automatically adjust to fit dataset boundaries.\r\n                        </Typography>\r\n\r\n                    </DialogContent>\r\n\r\n                    <DialogActions>\r\n                        <Button onClick={() => this.props.handleSetDownloadTarget(null)}>\r\n                            Cancel\r\n                        </Button>\r\n\r\n                        {subsetAvailable &&\r\n                            <Button onClick={() => this.handleSubsetDownload(tableName, timeString1, timeString2, subsetLat1, subsetLat2, subsetLon1, subsetLon2, subsetDepth1, subsetDepth2)}>\r\n                                Download Subset\r\n                            </Button>                            \r\n                        }\r\n\r\n                        {fullDataAvailable && \r\n                            <Button onClick={() => this.handleFullDatasetDownload(tableName)}>\r\n                                Download Full Dataset\r\n                            </Button>\r\n                        }\r\n                    </DialogActions>\r\n                </Dialog> \r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DownloadConfirmationDialog));","export default [\r\n    null,\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n]","import months from '../Enums/months';\r\n\r\nexport default (dateString, hasHour, isMonthly) => {\r\n    return isMonthly ? months[parseInt(dateString)] : hasHour ? dateString.slice(0,10) + ' ' + dateString.slice(11,16): dateString.slice(0,10);\r\n}","import colors from '../Enums/colors';\r\n\r\nexport default {\r\n    layout: {\r\n        font: {color: '#ffffff'},\r\n        paper_bgcolor: colors.backgroundGray,\r\n        autosize: true\r\n    },\r\n\r\n    config: {\r\n        displaylogo: false\r\n    },\r\n\r\n    annotations: (distributor, height = 40) => {\r\n        let yshift = ((document.documentElement.clientWidth * (height / 100)) / -2) + 20;\r\n        return (\r\n            [\r\n                {\r\n                    text: `Data Source: ${distributor.length < 35 ? \r\n                        distributor : \r\n                        distributor.slice(0,32) + '...'} -- Provided by Simons CMAP`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                    xref: 'paper',\r\n                    yref: 'paper',\r\n                    // yshift: height ? 0 - height + 160 : -290,\r\n                    yshift,\r\n                    showarrow: false,\r\n                }\r\n            ]\r\n        )   \r\n    }\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Button from '@material-ui/core/Button';\r\nimport { DateRange, CloudDownload, Palette, SwapVert, Gamepad, LineWeight, ShowChart, Tune } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { ButtonGroup } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    popover: {\r\n        width: '470px',\r\n        height: '120px',\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2.5),\r\n        paddingRight: theme.spacing(2.5)\r\n    },\r\n\r\n    iconButton: {\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n    },\r\n\r\n    colorForm: {\r\n        width: '100%'\r\n    },\r\n\r\n    lastIcon: {\r\n        borderTopRightRadius: '10%',\r\n        borderBottomRightRadius: '10%'\r\n    },\r\n\r\n    buttonGroup: {\r\n        display: 'block',\r\n        margin: '0px auto 8px auto',\r\n        maxWidth: '700px'\r\n    },\r\n\r\n    depressed: {\r\n        boxShadow: 'inset 1px 1px 5px #262626'\r\n    },\r\n\r\n    colorscaleMenu: {\r\n        maxHeight: '400px'\r\n    },\r\n\r\n    grayBackground: {\r\n        backgroundColor: colors.backgroundGray\r\n    }\r\n})\r\n\r\nconst colorscaleOptions = [\r\n    'Default',\r\n    'Greys', \r\n    'YlGnBu', \r\n    'Greens', \r\n    'YlOrRd',\r\n    'Bluered',\r\n    'RdBu',\r\n    'Reds',\r\n    'Blues',\r\n    'Picnic',\r\n    'Rainbow',\r\n    'Portland',\r\n    'Jet',\r\n    'Hot',\r\n    'Blackbody',\r\n    'Earth',\r\n    'Electric',\r\n    'Viridis',\r\n    'Cividis'];\r\n\r\nfunction usePreviousSize(value) {\r\n    let size = value ? value.size : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = size;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousColor(value) {\r\n    let color = value ? value.color : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = color;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousOpacity(value) {\r\n    let opacity = value ? value.opacity : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = opacity;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nconst ChartControlPanel = (props) => {\r\n\r\n    const { \r\n        classes, \r\n        onToggleSplitByDate,\r\n        splitByDate,\r\n        onToggleSplitBySpace,\r\n        splitBySpace,\r\n        orientation, \r\n        downloadCsv, \r\n        handleZValueConfirm,\r\n        zValues,\r\n        markerOptions,\r\n        handleMarkerOptionsConfirm,\r\n        showErrorBars,\r\n        handleSetShowErrorBars,\r\n        showLines,\r\n        handleSetShowLines\r\n    } = props;\r\n\r\n    const [paletteAnchorElement, setPaletteAnchorElement] = useState(null);\r\n\r\n    let handleOpenPalette = (event) => {\r\n        setPaletteAnchorElement(event.currentTarget);\r\n    }\r\n\r\n    // Local version, not from props\r\n    let handlePaletteChoice = (option) => {\r\n        setPaletteAnchorElement(null);\r\n        props.handlePaletteChoice(option);\r\n    }\r\n\r\n    const [zScalePopoverAnchorElement, setZScalePopoverAnchorElement] = React.useState(null);\r\n    const [localZMin, setLocalZMin] = React.useState(zValues && zValues[0]);\r\n    const [localZMax, setLocalZMax] = React.useState(zValues && zValues[1]);\r\n\r\n    const zScalePopoverOpen = Boolean(zScalePopoverAnchorElement);\r\n    const zScalePopoverID = zScalePopoverOpen ? 'zscale-popover' : undefined;\r\n\r\n    const handleZScalePopoverClose = () => {\r\n        setZScalePopoverAnchorElement(null);\r\n    };\r\n    \r\n    const checkLocalZMin = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMin)) return 'Invalid value';\r\n    }\r\n\r\n    const checkLocalZMax = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMax)) return 'Invalid value';\r\n    }\r\n\r\n    const zScaleValidations = [\r\n        checkLocalZMin(),\r\n        checkLocalZMax()\r\n    ];\r\n\r\n    const [\r\n        zMinMessage,\r\n        zMaxMessage\r\n    ] = zScaleValidations;\r\n\r\n    const handleLocalZConfirm = () => {\r\n        handleZValueConfirm([localZMin, localZMax]);\r\n        handleZScalePopoverClose();\r\n    }\r\n\r\n    const [markerOptionsAnchorElement, setMarkerOptionsAnchorElement] = React.useState(null);\r\n    const [localMarkerOpacity, setLocalMarkerOpacity] = React.useState(markerOptions && markerOptions.opacity);\r\n    const [localMarkerColor, setLocalMarkerColor] = React.useState(markerOptions && markerOptions.color);\r\n    const [localMarkerSize, setLocalMarkerSize] = React.useState(markerOptions && markerOptions.size);\r\n\r\n    var previousOpacity = usePreviousOpacity(markerOptions);\r\n    var previousColor = usePreviousColor(markerOptions);\r\n    var previousSize = usePreviousSize(markerOptions);\r\n\r\n    useEffect(() => {\r\n        if(markerOptions){\r\n            if(markerOptions.opacity !== previousOpacity){\r\n                setLocalMarkerOpacity(markerOptions.opacity);\r\n            }\r\n    \r\n            if(markerOptions.color !== previousColor){\r\n                setLocalMarkerColor(markerOptions.color);\r\n            }\r\n    \r\n            if(markerOptions.size !== previousSize){\r\n                setLocalMarkerSize(markerOptions.size);\r\n            }\r\n        }\r\n    })\r\n\r\n    const markerPopoverOpen = Boolean(markerOptionsAnchorElement);\r\n    const markerPopoverID = markerPopoverOpen ? 'marker-popover' : undefined;\r\n\r\n    const handleMarkerOptionsClose = () => {\r\n        setMarkerOptionsAnchorElement(null);\r\n    }\r\n\r\n    const checkLocalMarkerOpacity = () => {\r\n        if(localMarkerOpacity < 0.1 || localMarkerOpacity > 1 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerOpacity)){\r\n            return 'Opacity should be 0.1 to 1'\r\n        }\r\n    }\r\n\r\n    const checkLocalMarkerSize = () => {\r\n        if(localMarkerSize < 1 || localMarkerSize > 18 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerSize)){\r\n            return 'Size should be 1 to 18'\r\n        }\r\n    }\r\n\r\n    const markerOptionsValidations = [\r\n        checkLocalMarkerOpacity(),\r\n        checkLocalMarkerSize()\r\n    ]\r\n\r\n    const [\r\n        localMarkerOpacityMessage,\r\n        localMarkerSizeMessage\r\n    ] = markerOptionsValidations;\r\n\r\n    const handleLocalMarkerOptionsConfirm = () => {\r\n        handleMarkerOptionsConfirm({opacity: localMarkerOpacity, color: localMarkerColor, size: localMarkerSize});\r\n        handleMarkerOptionsClose();\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ButtonGroup className={classes.buttonGroup}>\r\n\r\n                {Boolean(onToggleSplitByDate) && \r\n                    <Tooltip placement='top' title='Split By Date'>\r\n                        <IconButton color='inherit' className={`${classes.iconButton} ${splitByDate && classes.depressed}`} \r\n                            onClick={onToggleSplitByDate}\r\n                        >\r\n                            <DateRange/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(onToggleSplitBySpace) && \r\n                    <Tooltip placement='top' title={orientation === 'zonal' ? 'Split by Latitude' : 'Split by Longitude'}>\r\n                        <IconButton color='inherit' className={`${classes.iconButton} ${splitBySpace && classes.depressed}`} \r\n                            onClick={onToggleSplitBySpace}\r\n                        >\r\n                            <LineWeight/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                <Tooltip placement='top' title='Download CSV'>\r\n                    <IconButton color='inherit' onClick={downloadCsv} className={classes.iconButton} >\r\n                        <CloudDownload/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n\r\n                {Boolean(handleZValueConfirm) &&\r\n                    <Tooltip title='Change Colorscale Range' placement='top'>\r\n                        <IconButton color='inherit' onClick={(event) => setZScalePopoverAnchorElement(event.currentTarget)} className={classes.iconButton}>\r\n                            <SwapVert/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(handleSetShowLines) &&\r\n                    <Tooltip title={showLines ? 'Hide Plot Line' : 'Show Plot Line'} placement='top'>\r\n                        <IconButton color='inherit' onClick={() => handleSetShowLines(!showLines)} className={`${classes.iconButton} ${showLines && classes.depressed}`}>\r\n                            <ShowChart/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(handleSetShowErrorBars) &&\r\n                    <Tooltip title={showErrorBars ? 'Hide Error Bars' : 'Show Error Bars'} placement='top'>\r\n                        <IconButton color='inherit' onClick={() => handleSetShowErrorBars(!showErrorBars)} className={`${classes.iconButton} ${showErrorBars && classes.depressed}`}>\r\n                            <Tune/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(props.handlePaletteChoice) &&\r\n                    <Tooltip title='Change Palette' placement='top'>\r\n                        <IconButton disabled={!Boolean(props.handlePaletteChoice)} color='inherit' onClick={handleOpenPalette} className={classes.iconButton}>\r\n                            <Palette/>\r\n                        </IconButton>                \r\n                    </Tooltip>      \r\n                }\r\n\r\n                {Boolean(props.handleMarkerOptionsConfirm) &&\r\n                    <Tooltip title='Marker Options' placement='top'>\r\n                        <IconButton color='inherit' onClick={(event) => setMarkerOptionsAnchorElement(event.currentTarget)} className={`${classes.iconButton} ${classes.lastIcon}`} >\r\n                            <Gamepad/>\r\n                        </IconButton>                \r\n                    </Tooltip>\r\n                }\r\n                \r\n            </ButtonGroup>\r\n            \r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={paletteAnchorElement}\r\n                keepMounted\r\n                open={Boolean(paletteAnchorElement)}\r\n                onClose={() => setPaletteAnchorElement(null)}\r\n                className={classes.colorscaleMenu}\r\n                MenuListProps= {{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                {colorscaleOptions.map((option, index) => (\r\n                    <MenuItem onClick={() => handlePaletteChoice(option === 'Default' ? 'heatmap' : option)} key={index}>{option}</MenuItem>\r\n                ))}\r\n                \r\n            </Menu>\r\n            \r\n            {/* zscale popover */}\r\n            <Popover\r\n                id={zScalePopoverID}\r\n                open={zScalePopoverOpen}\r\n                anchorEl={zScalePopoverAnchorElement}\r\n                onClose={handleZScalePopoverClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMinMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-min-input' >Min</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-min-input'\r\n                                    value={localZMin}\r\n                                    onChange={(event) => setLocalZMin(event.target.value)}\r\n                                    aria-describedby='local-zmin-error'\r\n                                    labelWidth={36}\r\n                                    name='local-zmin'\r\n                                />\r\n                                <FormHelperText id='local-zmin-error'>{zMinMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-max-input' >Max</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-max-input'\r\n                                    value={localZMax}\r\n                                    onChange={(event) => setLocalZMax(event.target.value)}\r\n                                    aria-describedby=\"local-zmax-error\"\r\n                                    labelWidth={36}\r\n                                    name='local-zmax'\r\n                                />\r\n                                <FormHelperText id=\"local-zmax-error\">{zMaxMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={7}>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleZScalePopoverClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalZConfirm}\r\n                                disabled={Boolean(zMinMessage || zMaxMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n                \r\n            {/* Marker popover */}\r\n            <Popover\r\n                id={markerPopoverID}\r\n                open={markerPopoverOpen}\r\n                anchorEl={markerOptionsAnchorElement}\r\n                onClose={handleMarkerOptionsClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(localMarkerOpacityMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-opacity' >Opacity</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='local-marker-opacity'\r\n                                    value={localMarkerOpacity}\r\n                                    onChange={(event) => setLocalMarkerOpacity(event.target.value)}\r\n                                    aria-describedby='local-marker-opacity'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-opacity'\r\n                                />\r\n                            <FormHelperText id=\"local-marker-opacity-error\">{localMarkerOpacityMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                // error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-size' >Size</InputLabel>\r\n                                <OutlinedInput\r\n                                    error={Boolean(localMarkerSizeMessage)}\r\n                                    id='local-marker-size'\r\n                                    value={localMarkerSize}\r\n                                    onChange={(event) => setLocalMarkerSize(event.target.value)}\r\n                                    aria-describedby=\"local-marker-size\"\r\n                                    labelWidth={36}\r\n                                    name='local-marker-size'\r\n                                />\r\n                                <FormHelperText id=\"local-marker-size-error\">{localMarkerSizeMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                className={classes.colorForm}\r\n                            >\r\n                                <InputLabel htmlFor='z-min-input'>Color</InputLabel>\r\n                                <OutlinedInput\r\n                                    type='color'\r\n                                    id='marker-color'\r\n                                    value={localMarkerColor}\r\n                                    onChange={(event) => setLocalMarkerColor(event.target.value)}\r\n                                    aria-describedby='local-marker-color'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-color'\r\n                                />\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={1}></Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleMarkerOptionsClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalMarkerOptionsConfirm}\r\n                                disabled={Boolean(localMarkerOpacityMessage || localMarkerSizeMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ChartControlPanel);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    csvFromVizRequestSend\r\n}\r\n\r\n// User for all histograms sparse or otherwise\r\nconst SparseHistogram = (props) => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata, parameters } = data;\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !data.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n            />\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {\r\n                    x: data.variableValues,\r\n                    name: data.parameters.fields,\r\n                    type: 'histogram',\r\n                    marker: {\r\n                        color: '#00FFFF'\r\n                    }\r\n                }\r\n            ]}\r\n            \r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${parameters.fields} [${metadata.Unit}]`,\r\n                    exponentformat: 'power',\r\n                    color: '#ffffff'\r\n                },\r\n                yaxis:{\r\n                    color: '#ffffff',\r\n                    title: 'Frequency'\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor)             \r\n            }}\r\n            config={{...chartBase.config}}\r\n        />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseHistogram));","export default (infoObject) => {\r\n\r\n    let lonRange = infoObject.lonMax - infoObject.lonMin;\r\n\r\n    let sectionSize;\r\n    if(lonRange < 2){\r\n        sectionSize = (lonRange / 6).toFixed(2);\r\n    } else {\r\n        sectionSize = Math.floor(lonRange / 6);\r\n    }\r\n\r\n    let tickvals = Array.from(Array(5), (e, i) => Math.ceil(infoObject.lonMin + ((i + 1) * sectionSize)));\r\n    let ticktext = tickvals.map(e => e > 180 ? e - 360 : e);\r\n\r\n    return {\r\n        tickmode: 'array',\r\n        tickvals,\r\n        ticktext\r\n    }\r\n}","export default (infoObject) => {    \r\n    const xRange = infoObject.lonMax - infoObject.lonMin;\r\n    const yRange = infoObject.latMax - infoObject.latMin;\r\n    const sizeRatio = xRange / yRange;\r\n\r\n    let height = 40;\r\n    let width = 40;\r\n\r\n    if(isNaN(sizeRatio)){\r\n        height = height / 1.65;\r\n    } else if (sizeRatio > 1) {\r\n        if(sizeRatio <= 1.5){\r\n            width = width * sizeRatio;\r\n            // height = sizeRatio > 2 ? height / 2 : height / sizeRatio;\r\n        } else {\r\n            width = width * 1.5;\r\n            height = sizeRatio > 3 ? height / 1.65 : height * (1.8 / sizeRatio);\r\n        }\r\n    } else {\r\n        width = sizeRatio < .5 ? width * .5 : width * sizeRatio;\r\n    }\r\n\r\n    return [height, width];\r\n}","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport getChartDimensions from '../../Utility/getChartDimensions';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\nimport subTypes from '../../Enums/visualizationSubTypes';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst handleContourMap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n    \r\n    // Handle axis labels when crossing 180th meridian\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`; \r\n\r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n                margin: '0 auto'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext,\r\n                    \r\n                    name: infoObject.parameters.fields,\r\n                    type: 'contour',\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: infoObject.zMin > 1 && infoObject.zMin < 1000 ? '.2f' : '.2e'\r\n                    },\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    }\r\n                }\r\n            ]}\r\n\r\n            config={{...chartBase.config}}\r\n            \r\n            key={index}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                // autosize: true,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {title: 'Longitude', color: '#ffffff', ...xTicks},\r\n                yaxis: {title: 'Latitude', color: '#ffffff'},\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst handleHeatmap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n        \r\n        var hovertext = subset.map((value, i) => {\r\n            let abs = Math.abs(value);\r\n            let formatter = abs > .01 && abs < 1000 ? '.2f' : '.2e';\r\n            if(value === null || isNaN(value)) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                minWidth: `${width * 10}px`,\r\n                minHeight: `${height * 10}px`,\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    zsmooth: subset.length < 20000 ? 'fast' : 'false',\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    name: infoObject.parameters.fields,\r\n                    type: 'heatmap',\r\n                    colorscale: palette,\r\n                    autocolorscale: false,\r\n                    \r\n                    hoverinfo: 'text',\r\n                    text: hovertext,\r\n\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n                    \r\n                },\r\n                // // Mask null values - currently tooltips aren't working\r\n                // {\r\n                //     x: infoObject.lons,\r\n                //     y: infoObject.lats,\r\n                //     z: subset.map(value => value === null ? 0 : 1),\r\n                //     type: 'heatmap',\r\n\r\n                //     colorscale: [\r\n                //         [0, 'rgba(255,255,255,1)'],\r\n                //         [0.5, 'rgba(255,255,255,1)'],\r\n                //         [0.5, 'rgba(0,0,0,0)'],\r\n                //         [1.0, 'rgba(0,0,0,0)'],\r\n                //     ],\r\n                //     showscale: false\r\n                // }\r\n            ]}                \r\n            key={index}\r\n\r\n            config={{...chartBase.config}}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: 'Longitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Latitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SpaceTimeChart = (props) => {\r\n\r\n    const { snackbarOpen, csvFromVizRequestSend } = props;\r\n    const { data, subType } = props.chart;\r\n    const { dates, depths, extent, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitByDepth, setSplitByDepth] = useState(true);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    const subSets = data.generatePlotData(subType, splitByDate, splitByDepth);\r\n    var plots;\r\n    switch(subType){\r\n        case vizSubTypes.contourMap:\r\n            plots = handleContourMap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.heatmap:\r\n            plots = handleHeatmap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.histogram:\r\n            return <SparseHistogram chart={{data}}/>;\r\n\r\n        default:\r\n            plots = '';\r\n            break;        \r\n\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = depths ? depths.size : 1;\r\n\r\n        if(subType === vizSubTypes.heatmap){\r\n            let availableWGLContexts = 15 - countWebGLContexts(props.charts);\r\n\r\n            if(!splitByDate && chartCount * dates.size > availableWGLContexts){\r\n                snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(subType === vizSubTypes.contourMap){\r\n            if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n            }\r\n        }\r\n\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDate(!splitByDate);\r\n        }, 100)\r\n    }\r\n \r\n    const onToggleSplitByDepth = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDepth(!splitByDepth);\r\n        }, 100)\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                handlePaletteChoice={subType !== subTypes.histogram && handlePaletteChoice}\r\n                onToggleSplitByDepth={depths.size===1 ? null : onToggleSplitByDepth}\r\n                onToggleSplitByDate={dates.size===1 ? null : onToggleSplitByDate}\r\n                splitByDepth={splitByDepth}\r\n                splitByDate={splitByDate}\r\n                handleZValueConfirm={subType !== subTypes.histogram && handleZValueConfirm}\r\n                zValues={subType !== subTypes.histogram && zValues}\r\n                extent={subType !== subTypes.histogram && extent}\r\n                downloadCsv={downloadCsv}\r\n            />\r\n            {plots}     \r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SpaceTimeChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport months from '../../Enums/months';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst TimeSeriesChart = (props) => {\r\n    const { csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, dates, parameters, metadata } = data;\r\n\r\n    const [ markerOptions, setMarkerOptions ] = React.useState({opacity: .2, color:'#ff1493', size: 12});\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Time: ${dates[i].slice(0,10)}<br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(dates[0], data.hasHour, data.isMonthly) :\r\n        handleChartDateString(dates[0], data.hasHour, data.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], data.hasHour, data.isMonthly);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = parameters.depth2 === 0 ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    const x = data.isMonthly ? dates.map(date => months[parseInt(date)]) : dates;\r\n\r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                  {\r\n                    // mode: 'lines+markers',\r\n                    mode: showLines ? 'lines+markers' : 'markers',\r\n                    x: x,\r\n                    y: variableValues,\r\n                    error_y: {\r\n                        type: 'data',\r\n                        array: stds,\r\n                        opacity: 0.3,\r\n                        color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                        visible: true\r\n                    },\r\n\r\n                    name: parameters.fields,\r\n                    type: 'scatter',\r\n                    line: {color: markerOptions.color},\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                  },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${parameters.fields} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            depth + \r\n                            `<br>Lat: ${lat}, ` +\r\n                            `Lon: ${lon}`,\r\n                        font: {\r\n                            size: 13\r\n                        }\r\n                    },\r\n                  xaxis: {\r\n                      title: data.isMonthy? 'Month' : 'Time',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  yaxis: {\r\n                      title: `${parameters.fields}[${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(TimeSeriesChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst DepthProfileChart = (props) => {\r\n\r\n    const { setLoadingMessage, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, depths, parameters, metadata } = data;\r\n\r\n    const [ showLines, setShowLines ] = React.useState(true);\r\n    const [ showErrorBars, setShowErrorBars ] = React.useState(variableValues && variableValues.length <= 40 ? true : false);\r\n\r\n    var infoObject = data;\r\n\r\n    const [markerOptions, setMarkerOptions] = React.useState({opacity: .2, color:'#ff1493', size: 12})\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Depth: ${format('.2f')(depths[i])} [m] <br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }    \r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleSetShowLines = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowLines(value);\r\n        }, 50)\r\n    }\r\n\r\n    const handleSetShowErrorBars = (value) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setShowErrorBars(value);\r\n        }, 50)\r\n    }\r\n\r\n    const date1 = infoObject.isMonthly ? new Date(parameters.dt1).getMonth() + 1 : parameters.dt1;\r\n    const date2 = infoObject.isMonthly ? new Date(parameters.dt2).getMonth() + 1 : parameters.dt2;\r\n\r\n    const date = date1 === date2 ? handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) :\r\n            handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(date2, infoObject.hasHour, infoObject.isMonthly);\r\n    \r\n            return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n                showErrorBars={showErrorBars}\r\n                handleSetShowErrorBars={handleSetShowErrorBars}\r\n                showLines={showLines}\r\n                handleSetShowLines={handleSetShowLines}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                    {   \r\n                        // mode: 'lines+markers',\r\n                        mode: showLines ? 'lines+markers' : 'markers',\r\n                        y: depths,\r\n                        x: variableValues,\r\n                        error_x: {\r\n                            type: 'data',\r\n                            array: stds,\r\n                            opacity: 0.3,\r\n                            color: showErrorBars ? '#f2f2f2' : 'transparent',\r\n                            visible: true\r\n                        },\r\n                        name: parameters.fields,\r\n                        type: 'scatter',\r\n\r\n                        marker: {\r\n                            line: {color: markerOptions.color},\r\n                            opacity: markerOptions.opacity,\r\n                            size: markerOptions.size,\r\n                            color: markerOptions.color\r\n                        },\r\n\r\n                        hoverinfo: 'text',\r\n                        hovertext\r\n                    },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${parameters.fields} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                            `Lat: ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0, ` +\r\n                            `Lon: ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`,\r\n                        font: {\r\n                            size: 13\r\n                        }\r\n                    },\r\n                        \r\n                  yaxis: {\r\n                      title: 'Depth[m]',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power',\r\n                      autorange:'reversed'\r\n                    },\r\n                  xaxis: {\r\n                      title: `${parameters.fields}[${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(DepthProfileChart));","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport visualizationSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nconst handleSectionMap = (subsets, infoObject, splitByDate, splitBySpace, orientation, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const dates = Array.from(infoObject.dates);\r\n    const depths = Array.from(infoObject.depths);\r\n    const lats = Array.from(infoObject.lats);\r\n    const lons = Array.from(infoObject.lons);\r\n\r\n    const distinctMeridiansOrParallelsForSplitting = \r\n        orientation === 'zonal' ?\r\n        lats : \r\n        lons;\r\n\r\n    const xAxis = orientation === 'zonal' ?\r\n        'Longitude' :\r\n        'Latitude';\r\n\r\n    let xTicks = parameters.lon1 > parameters.lon2 && orientation === 'zonal' ? handleXTicks(infoObject) : {};\r\n\r\n\r\n    return subsets.map((subset, index) => {\r\n        let z = subset;\r\n        let x = [];\r\n        let y = [];\r\n\r\n        if(orientation === 'zonal'){\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lons[Math.floor(i / depths.length)])\r\n            }\r\n        } else {\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lats[Math.floor(i / depths.length)])\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < subset.length; i++){\r\n            y.push(depths[i % depths.length]);\r\n        }\r\n\r\n        const latTitle = orientation === 'meridional' ? `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = orientation === 'zonal' ? `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n\r\n        const date = dates.length < 2 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            splitByDate && splitBySpace ? handleChartDateString(dates[Math.floor(index / distinctMeridiansOrParallelsForSplitting.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            splitByDate ? handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly) :\r\n            'Averaged Values ' + handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        let hovertext = z.map((value, i) => {\r\n            \r\n            if(orientation === 'zonal'){\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            } else {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lat: ${format('.2f')(x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lat: ${format('.2f')(x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            }\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    zsmooth: subset.length < 20000 ? 'best' : 'fast',\r\n                    x,\r\n                    y,\r\n                    z,\r\n                    name: parameters.fields,\r\n                    type: infoObject.subType === visualizationSubTypes.contourSectionMap ? 'contour' : 'heatmap',\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: '.2e'\r\n                    },\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                }\r\n            ]}                \r\n            key={index}\r\n\r\n            layout= {{\r\n                font: {color: '#ffffff'},\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${xAxis}[\\xB0]`,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Depth[m]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: 'reversed'\r\n                },\r\n                paper_bgcolor: colors.backgroundGray,\r\n                annotations: chartBase.annotations(metadata.Distributor)\r\n\r\n            }}   \r\n        />\r\n        )\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nconst SectionMapChart = (props) => {\r\n\r\n    const { classes, snackbarOpen, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { dates, extent, lats, lons, metadata } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitBySpace, setSplitBySpace] = useState(false);\r\n    const [orientation, setOrientation] = useState(data.orientation);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    var spaces = orientation === 'zonal' ? lats : lons;\r\n\r\n    const subsets = data.generatePlotData(orientation, splitByDate, splitBySpace);\r\n    var plots = handleSectionMap(subsets, data, splitByDate, splitBySpace, orientation, palette, zMin, zMax);\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const onToggleSplitBySpace = () => {\r\n        let chartCount = splitByDate ? dates.size : 1;\r\n        if(!splitBySpace && chartCount * spaces.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitBySpace(!splitBySpace);\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = splitBySpace ? spaces.size : 1;\r\n        if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitByDate(!splitByDate);\r\n            }, 100)\r\n        }     \r\n    }\r\n\r\n    const switchOrientation = () => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setOrientation(orientation === 'zonal' ? 'meridional' : 'zonal');\r\n        }, 100)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.buttonBlock}>\r\n            <ChartControlPanel\r\n                orientation={orientation}\r\n                switchOrientation={switchOrientation}\r\n                onToggleSplitBySpace={spaces.size === 1 ? null : onToggleSplitBySpace}\r\n                splitBySpace={splitBySpace}\r\n                onToggleSplitByDate={dates.size === 1 ? null : onToggleSplitByDate}\r\n                splitByDate={splitByDate}\r\n                handlePaletteChoice={handlePaletteChoice}\r\n                handleZValueConfirm={handleZValueConfirm}\r\n                zValues={zValues}\r\n                extent={extent}\r\n                downloadCsv={downloadCsv}\r\n            />\r\n            </div>\r\n            {plots}      \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SectionMapChart));","import React from 'react';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst SparseScatter = (props) => {\r\n    const {\r\n        xValues,\r\n        yValues,\r\n        markerOptions,\r\n        infoObject,\r\n        xTitle,\r\n        yTitle,\r\n        type\r\n    } = props;\r\n\r\n    const { parameters, metadata, hasDepth, variableValues, times, lats, lons, depths } = infoObject;\r\n\r\n    // const title = `${parameters.fields} [${metadata.Unit}]`;\r\n    \r\n    var hovertext;\r\n\r\n    switch(type){\r\n        case 'time':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'latitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lat: ${lats[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'longitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lon: ${lons[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'depth':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Depth: ${depths[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        default:\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n        }\r\n        \r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n    \r\n            data={[\r\n                {\r\n                    x: xValues,\r\n                    y: yValues,\r\n                    mode: 'markers',\r\n                    name: parameters.fields,\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    // type: 'scatter',\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                },\r\n            ]}\r\n            config={{...chartBase.config}}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                // width: 800,\r\n                // height: 570,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: xTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                yaxis: {\r\n                    title: yTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: type === 'depth' ? 'reversed' : true\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor)\r\n            }}            \r\n        />\r\n    )\r\n}\r\n\r\nexport default SparseScatter;","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\nimport { csvFromVizRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport SparseScatter from './SparseScatter';\r\n\r\nconst handleSparseMap = (infoObject, palette, zValues) => {\r\n\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !infoObject.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw',\r\n                minWidth: '510px',\r\n                minHeight: '340px'\r\n            }}\r\n            \r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zValues[0],\r\n                    zmax: zValues[1],\r\n                    lon: infoObject.lons,\r\n                    lat: infoObject.lats,\r\n                    z: infoObject.variableValues,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    radius: 6,                    \r\n                    name: infoObject.parameters.fields,\r\n                    type: 'densitymapbox',\r\n                    \r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    },\r\n                }\r\n            ]}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                mapbox: {\r\n                    style: \"white-bg\",\r\n                    layers: [\r\n                        {\r\n                            sourcetype: \"raster\",\r\n                            source: [\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"],\r\n                            below: \"traces\"\r\n                        }\r\n                    ],\r\n                    center: infoObject.center,\r\n                    zoom: infoObject.zoom\r\n                },\r\n\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor)\r\n            }}\r\n            \r\n            config={{\r\n                ...chartBase.config,\r\n                mapboxAccessToken:\r\n                  \"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w\",\r\n                \r\n              }}\r\n        />)\r\n}\r\n\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n\r\n    tabs: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    tab: {\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        fontSize: '15px',\r\n        textTransform: 'none',\r\n        color: theme.palette.primary.main\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    csvFromVizRequestSend\r\n}\r\n\r\nfunction tabProps(index) {\r\n    return {\r\n      id: `sparse-tab-${index}`,\r\n      'aria-controls': `sparse-tab-${index}`,\r\n    };\r\n  }\r\n\r\nconst SparseTabPanel = (props) => {\r\n    const { children, selectedTab, index, controlPanelProps, } = props;\r\n\r\n    return (\r\n        <div hidden={selectedTab !== index}>\r\n            <ChartControlPanel\r\n                {...controlPanelProps}\r\n            />\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst SparseMap = (props) => {\r\n\r\n    const { classes, csvFromVizRequestSend } = props;\r\n    const { data } = props.chart;\r\n    const { metadata } = data;\r\n\r\n    const [palette, setPalette] = useState('Heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [markerOptions, setMarkerOptions] = useState({opacity: .7, color:'#ff1493', size: 12});\r\n    const [tab, setTab] = useState(0);\r\n\r\n    const plot = handleSparseMap(data, palette, zValues)\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleTabChange = (event, newValue) => {\r\n        setTab(newValue)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        csvFromVizRequestSend(data, metadata.Table_Name, metadata.Variable, metadata.Long_Name);\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const forceResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);        \r\n    }\r\n\r\n    const controlPanelProps = {\r\n        map: {\r\n            palette,\r\n            handlePaletteChoice,\r\n            zValues,\r\n            handleZValueConfirm,\r\n            downloadCsv\r\n        },\r\n\r\n        scatter: {\r\n            downloadCsv,\r\n            markerOptions,\r\n            setMarkerOptions,\r\n            handleMarkerOptionsConfirm\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Tabs \r\n                value={tab} \r\n                onChange={handleTabChange} \r\n                aria-label=\"Sparse tabs\" \r\n                centered\r\n                indicatorColor='primary'\r\n                className={classes.tabs}\r\n            >\r\n                <Tab label=\"Map\" {...tabProps(0)} className={classes.tab} onClick={forceResize}/>\r\n                <Tab label=\"By Time\" {...tabProps(1)} className={classes.tab}/>\r\n                <Tab label=\"By Lat\" {...tabProps(2)} className={classes.tab}/>\r\n                <Tab label=\"By Lon\" {...tabProps(3)} className={classes.tab}/>\r\n                {data.hasDepth && <Tab label=\"By Depth\" {...tabProps(4)} className={classes.tab}/>}\r\n            </Tabs>\r\n            <SparseTabPanel selectedTab={tab} index={0} controlPanelProps={controlPanelProps.map}>\r\n                {tab === 0 && plot}\r\n            </SparseTabPanel>\r\n            \r\n            <SparseTabPanel selectedTab={tab} index={1} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 1 &&\r\n                    <SparseScatter\r\n                        xValues={data.times}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Time'\r\n                        yTitle={`${data.parameters.fields}[${metadata.Unit}]`}\r\n                        type='time'\r\n                    />\r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={2} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 2 &&\r\n                    <SparseScatter\r\n                        xValues={data.lats}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Latitude'\r\n                        yTitle={data.parameters.fields}\r\n                        type='latitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={3} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 3 && \r\n                    <SparseScatter\r\n                        xValues={data.lons}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Longitude'\r\n                        yTitle={data.parameters.fields}\r\n                        type='longitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            {data.hasDepth &&\r\n                <SparseTabPanel selectedTab={tab} index={4} controlPanelProps={controlPanelProps.scatter}>\r\n                    {tab === 4 &&\r\n                        <SparseScatter\r\n                            xValues={data.variableValues}\r\n                            yValues={data.depths}\r\n                            markerOptions={markerOptions}\r\n                            infoObject={data}\r\n                            xTitle={data.parameters.fields}\r\n                            yTitle='Depth[m]'\r\n                            type='depth'\r\n                        />                    \r\n                    }\r\n                </SparseTabPanel>            \r\n            }\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseMap));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { IconButton, Paper } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport SpaceTimeChart from './SpaceTimeChart';\r\nimport TimeSeriesChart from './TimeSeriesChart';\r\nimport DepthProfileChart from './DepthProfileChart';\r\nimport SectionMapChart from './SectionMapChart';\r\nimport SparseMap from './SparseMap';\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  deleteChart\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  chartPaper: {\r\n    backgroundColor: colors.backgroundGray,\r\n    marginTop: '5vh',\r\n    marginBottom: '2vh',\r\n    padding: theme.spacing(1),\r\n    boxShadow: '2px 2px 2px 2px #242424',\r\n  }\r\n})\r\n\r\nconst SamplePlot = () => {\r\n  let x = [0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4];\r\n  let y = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,];\r\n  let z = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4];\r\n  \r\n  return (\r\n\r\n      <Plot\r\n      useResizeHandler={true}\r\n      style= {{\r\n          position: 'relative',\r\n          display:'inline-block',\r\n          // marginTop: '30px',\r\n          width: '66vw',\r\n          height: '44vw'\r\n      }}\r\n      \r\n      data={[\r\n          {   \r\n              x,\r\n              y,\r\n              z,\r\n              connectgaps: false,\r\n              zsmooth: 'best',\r\n\r\n              name: 'Test',\r\n              type: 'heatmap',\r\n              contours: {\r\n                  showlabels: true,\r\n                  labelfont: {\r\n                      family: 'Raleway',\r\n                      size: 12,\r\n                      color: 'white',\r\n                  },\r\n                  labelformat: '.2e'\r\n              },\r\n              colorbar: {\r\n                  title: {\r\n                      text: `test`\r\n                  },\r\n                  exponentformat: 'power'\r\n              }\r\n          }\r\n      ]}\r\n\r\n      config={{responsive: true}}\r\n      \r\n      layout= {{\r\n        autosize: true,\r\n          font: {color: '#ffffff'},\r\n          margin: {\r\n            t: 50\r\n          },\r\n          title: {\r\n              text: `A sample chart title`,\r\n              font: {\r\n                size: 16\r\n              }\r\n          },\r\n          paper_bgcolor: colors.backgroundGray,\r\n          xaxis: {title: 'Longitude', color: '#ffffff'},\r\n          yaxis: {title: 'Latitude', color: '#ffffff'},\r\n          annotations: [\r\n              {\r\n                  text: `Brought to you by chef boyardee`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                  yref: 'paper',\r\n                  y: -.24,\r\n                  showarrow: false,\r\n                  xref: 'paper',\r\n                  x: .5\r\n                  }\r\n              ]\r\n              \r\n          }}   \r\n          />\r\n          )\r\n}\r\n\r\nconst closeChartStyles = {\r\n    closeChartIcon: {\r\n      float: 'right',\r\n      marginTop: '-12px',\r\n      marginRight: '-8px'\r\n    }\r\n}\r\n\r\nconst _CloseChartIcon = (props) => {\r\n  const { classes } = props;\r\n  return (\r\n    <React.Fragment>\r\n      <IconButton className={classes.closeChartIcon} color=\"inherit\" onClick={() => props.handleDeleteChart(props.chartIndex)} disableFocusRipple disableRipple>\r\n        <Close/>\r\n      </IconButton>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst CloseChartIcon = withStyles(closeChartStyles)(_CloseChartIcon);\r\n\r\nclass Charts extends Component {\r\n\r\n  handleDeleteChart = (chartIndex) => {\r\n    this.props.deleteChart(chartIndex);\r\n  }\r\n\r\n    render(){\r\n        const { classes, charts } = this.props;\r\n        return (\r\n            <React.Fragment>\r\n              {/* <Paper elevation={12} className={classes.chartPaper}>\r\n              <SamplePlot/> \r\n              </Paper> */}\r\n                {charts.map((chart, index) => {\r\n                    switch(chart.data.parameters.spName){\r\n\r\n                        case storedProcedures.spaceTime:\r\n                          if(chart.subType === vizSubTypes.sparse) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseMap chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          } else if(chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseHistogram chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          }\r\n                          else return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SpaceTimeChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.timeSeries:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <TimeSeriesChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.depthProfile:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <DepthProfileChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.sectionMap:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SectionMapChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n                        \r\n                        default:\r\n                          return '';\r\n                  }\r\n                })}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Charts));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport * as JsSearch from 'js-search';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\nimport { Table, TableBody, TableCell, TableRow, Icon } from '@material-ui/core';\r\n\r\nimport { cruiseListRequestSend, cruiseTrajectoryRequestSend, cruiseTrajectoryClear } from '../../Redux/actions/visualization';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    cruiseList: state.cruiseList,\r\n    getCruiseListState: state.getCruiseListState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseListRequestSend,\r\n    cruiseTrajectoryRequestSend,\r\n    cruiseTrajectoryClear\r\n}\r\n\r\nconst esriFonts = '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif';\r\nconst esriFontColor = 'white';\r\n\r\nconst styles = theme => ({\r\n    outerDiv: {\r\n        padding:'12px',\r\n        maxWidth: '260px',\r\n        backgroundColor: 'transparent',\r\n        color: esriFontColor,\r\n        borderRadius: '4px',\r\n        boxShadow: '2px',\r\n        position: 'relative',\r\n        backdropFilter: 'blur(2px)',\r\n        transform: 'translateY(35px)',\r\n        marginTop: '24px'\r\n    },\r\n\r\n    cruiseSelect: {\r\n        width: '260px',\r\n        borderRadius: '4px',\r\n    },\r\n\r\n    cruiseInfo: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        margin: '12px auto 0 auto',\r\n    },\r\n\r\n    cruiseInfoCell: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        borderStyle: 'none',\r\n    },\r\n})\r\n\r\n// Replace react-select selected option\r\nconst SingleValue = (props) => {\r\n    return (\r\n        <components.SingleValue {...props} className={props.className}/>\r\n    )\r\n}\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst cruiseSort =  (a,b) => a.Name < b.Name ? -1 : 1;\r\n\r\nconst ValueContainer = (props) => {\r\n    return (\r\n        <components.ValueContainer {...props}>\r\n            <Search color='primary' style={{ position: \"absolute\", left: 6 }}/>\r\n            {props.children}\r\n        </components.ValueContainer>\r\n    )\r\n}\r\n\r\nclass CruiseSelector extends Component {\r\n    \r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Nickname');\r\n        search.addIndex('Name');\r\n        search.addIndex('Chief_Name');\r\n        search.addIndex('Keywords');\r\n        try{\r\n            if(props.cruiseList && props.cruiseList.length) search.addDocuments(props.cruiseList);\r\n        } catch(e) {\r\n            console.log(e);\r\n            console.log(props.cruiseList);\r\n        }\r\n\r\n        this.state = {\r\n            search,\r\n            searchField: '',\r\n            selectedCruise: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.cruiseList || !this.props.cruiseList.length) this.props.cruiseListRequestSend();\r\n    }\r\n\r\n    formatOptionLabel = (option) => {\r\n        let label = option.data.Name === option.data.Nickname ?\r\n            option.data.Name :\r\n            `${option.data.Name} - ${option.data.Nickname}`;\r\n\r\n        return label;\r\n    }\r\n\r\n    getSelectOptionsFromCruiseList = (list) => {\r\n        return list.map(item => ({\r\n            value: item.Name,\r\n            label: item.Name,\r\n            data: item\r\n        })) || []\r\n    }\r\n\r\n    handleCruiseSelect = (selection) => {\r\n        if(selection && selection.data){\r\n            const id = selection.data.ID;\r\n            this.props.cruiseTrajectoryRequestSend(id);\r\n        } else {this.props.cruiseTrajectoryClear()}\r\n\r\n        this.setState({...this.state, selectedCruise: selection});\r\n        this.props.updateParametersFromCruiseBoundary(selection);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);\r\n            this.setState({search: this.state.search})\r\n        }\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') this.setState({...this.state, searchField: searchString});\r\n        if(action.action ==='set-value' || action.action === 'menu-close') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    render(){\r\n\r\n        const { search, searchField, selectedCruise } = this.state;        \r\n        const { classes, cruiseList} = this.props;\r\n        \r\n        const options = searchField && cruiseList ? this.getSelectOptionsFromCruiseList(search.search(searchField).sort(cruiseSort)) \r\n            : cruiseList ? this.getSelectOptionsFromCruiseList(cruiseList) \r\n            : []\r\n\r\n        return (\r\n            <div id='cruise-selector' className={classes.outerDiv}>\r\n                <div className={classes.blurEffectDiv}></div>\r\n                {/* <ConnectedTooltip placement='left' title={tooltips.visualization.cruiseSelector}> */}\r\n                    <Select\r\n                        isLoading={this.props.getCruiseListState === states.inProgress}\r\n                        components={{\r\n                            IndicatorSeparator:'',\r\n                            Option,\r\n                            SingleValue,\r\n                            ValueContainer\r\n                        }}\r\n                        isClearable\r\n                        formatOptionLabel={this.formatOptionLabel}\r\n                        onInputChange={this.onAutoSuggestChange}\r\n                        filterOption={null}\r\n                        className={classes.cruiseSelect}\r\n                        escapeClearsValue\r\n                        label=\"Cruise\"\r\n                        options={options}\r\n                        onChange={this.handleCruiseSelect}\r\n                        value={this.state.selectedCruise}\r\n                        placeholder=\"Search Cruises\"\r\n                        styles={{\r\n                            menu: provided => ({ ...provided, zIndex: 9999 }),\r\n\r\n                            menuList: provided => ({...provided, backgroundColor: colors.backgroundGray}),\r\n\r\n                            input: provided => ({...provided,\r\n                                color: 'inherit',\r\n                                fontFamily: esriFonts\r\n                            }),\r\n\r\n                            control: provided => ({...provided,\r\n                                backgroundColor: colors.backgroundGray,\r\n                                border: 'none',\r\n                                boxShadow: '1px 1px 1px 1px #242424',\r\n                                color: esriFontColor,\r\n                                borderRadius: 4,\r\n                                '&:hover': { \r\n                                    border: `1px solid white`,\r\n                                },\r\n                                '&:focus-within': {\r\n                                    borderColor: colors.primary\r\n                                }\r\n                            }),\r\n\r\n                            placeholder: provided => ({...provided,\r\n                                fontFamily: esriFonts,\r\n                                color: colors.primary,\r\n                                fontSize: '14px'\r\n                            }),\r\n\r\n                            noOptionsMessage: provided => ({...provided,\r\n                                fontFamily: esriFonts,\r\n                                color: esriFontColor,\r\n                                backgroundColor: colors.backgroundGray\r\n                            }),\r\n\r\n                            option: (provided, state) => ({...provided,\r\n                                backgroundColor: colors.backgroundGray,\r\n                                color: state.isFocused ? colors.primary : 'white',\r\n                                '&:hover': { backgroundColor: colors.greenHover}\r\n                            }),\r\n\r\n                            singleValue: (provided, state) => ({...provided,\r\n                                fontFamily: esriFonts,\r\n                                color: 'inherit',\r\n                                paddingRight: '20px',\r\n                            }),\r\n\r\n                            valueContainer: provided => ({\r\n                                ...provided,\r\n                                padding: '0 0 0 34px',\r\n                                fontWeight: 100\r\n                            }),\r\n                        }}\r\n                        theme={theme => ({\r\n                            ...theme,\r\n                            colors: {\r\n                                ...theme.colors,\r\n                                // Background color of hovered options\r\n                                primary25: '#e0e0e0',\r\n                                primary: '#212121',\r\n                            },\r\n                        })}\r\n                    />\r\n                {/* </ConnectedTooltip> */}\r\n                {selectedCruise &&\r\n                    <Table size='small' className={classes.cruiseInfo}>\r\n                        <TableBody>\r\n                            <TableRow>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    Cruise:\r\n                                </TableCell>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    {selectedCruise.data.Name}\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    Nickname:\r\n                                </TableCell>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    {selectedCruise.data.Nickname}\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            {\r\n                                selectedCruise.data.Start_Time &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Start Date:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Start_Time.slice(0,10)}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.End_Time &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        End Date:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.End_Time.slice(0,10)}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.Chief_Name &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Chief Scientist:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Chief_Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.Ship_Name &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Ship:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Ship_Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n                        </TableBody>\r\n                    </Table>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(CruiseSelector));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Scene } from '@esri/react-arcgis';\r\n\r\nimport CruiseSelector from './CruiseSelector';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        margin: '0 auto 0 auto',\r\n        width: '100vw',\r\n        height: '100vh',\r\n    }\r\n})\r\n\r\nconst drawButtonStyles = (theme) => ({\r\n    outerDiv: {\r\n        // padding:'12px 0 12px 0',\r\n        backgroundColor: 'transparent',\r\n        // width: '180px',\r\n        borderRadius: '4px',\r\n        marginRight: '20px'\r\n    },\r\n\r\n    drawButton: {\r\n        // border: '1px solid #333333',\r\n        border: `1px solid #333333`,\r\n        borderRadius: '4px',\r\n        color: colors.primary,\r\n        cursor: 'pointer',\r\n        padding: '6px',\r\n        width: '160px',\r\n        fontSize:'14px',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        // backgroundColor: 'rgba(255, 128, 0, .8)',\r\n        // backgroundColor: 'transparent',\r\n        fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n        '&:hover': { \r\n            borderColor: 'white'\r\n        },\r\n    },\r\n\r\n    helpText: {\r\n        marginTop: 0,\r\n        color: 'white',\r\n        fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif'\r\n    },\r\n\r\n    cancelButton: {\r\n        display: 'none',\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst DrawButtonRaw = (props) => {\r\n    const { classes, showHelp } = props;\r\n\r\n    return (\r\n        <div className={classes.outerDiv} id='draw-region-div'>\r\n            {showHelp && <p className={classes.helpText}>Click once to draw <br/>and again to finish</p>}\r\n            <button id='draw-button' className={classes.drawButton}>\r\n                Select Region\r\n            </button>\r\n            <button id='cancel-button' className={`${classes.drawButton} ${classes.cancelButton}`}>\r\n                Cancel\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst DrawButton = withStyles(drawButtonStyles)(DrawButtonRaw);\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst polylineSymbol = {\r\n    type: \"line-3d\",\r\n        symbolLayers: [\r\n            {\r\n                type: \"line\",\r\n                size: \"3px\",\r\n                material: {\r\n                    color: {\r\n                        r: 0,\r\n                        g: 255,\r\n                        b: 255,\r\n                        a: 0\r\n                    }\r\n                },\r\n            }\r\n        ]\r\n}\r\n\r\nclass UiComponents extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.sketchModel = new props.esriModules.SketchViewModel({\r\n            layer: props.regionLayer,\r\n            view: props.view,\r\n            polygonSymbol,\r\n            polylineSymbol,\r\n            defaultUpdateOptions: {\r\n                toggleToolOnClick: false,\r\n                tool: \"transform\"\r\n            }\r\n        })\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const { view, esriModules, regionLayer, setShowHelp } = this.props;\r\n        var { sketchModel } = this;\r\n\r\n        var drawButton = document.getElementById('draw-button');\r\n        var cancelButton = document.getElementById('cancel-button');\r\n\r\n        const throttledUpdate = throttle(75, (event) => {\r\n            if(event.state === 'active'){\r\n                this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n            }\r\n        })\r\n\r\n        sketchModel.on(\"create\", (event) => {\r\n            if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n                sketchModel.complete();\r\n            }\r\n\r\n            if(event.graphic && event.graphic.visible) {\r\n                event.graphic.visible = false;\r\n            }\r\n            if(event.state === 'cancel'){\r\n                setShowHelp(false);\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n\r\n            if(event.state === \"complete\") {\r\n                setShowHelp(false);\r\n                this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n        });\r\n\r\n        sketchModel.on('create', throttledUpdate)\r\n\r\n        sketchModel.on('update', (event) => {\r\n            if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n                if(event.state === 'cancel') return;\r\n                this.props.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n        });   \r\n        \r\n        drawButton.addEventListener(\"click\", (event) => {\r\n                regionLayer.removeAll();\r\n                setShowHelp(true);\r\n                sketchModel.create('polyline', {\r\n                    mode:'click'            \r\n                });\r\n                drawButton.style.display = 'none';\r\n                cancelButton.style.display = 'inline-block';\r\n        });\r\n\r\n        cancelButton.addEventListener('click', (event) => {\r\n            sketchModel.cancel();\r\n            setShowHelp(false);\r\n            drawButton.style.display = 'inline-block';\r\n            cancelButton.style.display = 'none';\r\n        })\r\n\r\n        view.ui.add('draw-region-div', 'bottom-right');\r\n        view.ui.add('cruise-selector', 'top-right');\r\n\r\n        view.ui.remove('zoom');\r\n        view.ui.remove('navigation-toggle');\r\n        view.ui.remove('compass');\r\n        view.ui.remove('attribution');\r\n\r\n        return null;\r\n    }\r\n}\r\n\r\nconst TrajectoryController = React.memo((props) => {\r\n    const { cruiseTrajectory, trajectoryLayer, esriModules } = props;\r\n    \r\n    if(cruiseTrajectory){\r\n        const { lons, lats } = cruiseTrajectory;\r\n\r\n        let midIndex = Math.floor(lons.length / 2);\r\n\r\n        trajectoryLayer.removeAll();\r\n\r\n        var polyLines = [[]];\r\n        var lineIndex = 0;\r\n\r\n        let lonStart = lons[0];\r\n        let latStart = lats[0];\r\n        let maxDistance = 0;\r\n\r\n        // Create a new path array each time 180 lon is crossed\r\n        lons.forEach((lon, i) => {\r\n            let lat = lats[i];\r\n\r\n            let latDistance = Math.abs(lat - latStart);\r\n            let _lonDistance = Math.abs(lon - lonStart);\r\n            let lonDistance = _lonDistance > 180? 360 - _lonDistance : _lonDistance;\r\n\r\n            let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n            maxDistance = distance > maxDistance ? distance : maxDistance;\r\n\r\n            polyLines[lineIndex].push([lon, lat]);\r\n\r\n            if(i < lons.length - 1){\r\n                if((lon > 160 && lon < 180) && (lons[i + 1] > -180 && lons[i + 1] < -160)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n\r\n                if((lon > -180 && lon < -160) && (lon[i + 1] > 160 && lon[i + 1] < 180)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n            }\r\n        })\r\n\r\n        var cruiseTrajectorySymbol = {\r\n            type: 'line-3d',\r\n            symbolLayers: [{\r\n                type: 'line',\r\n                material: { color: [0, 255, 255, 1] },\r\n                cap:  'round',\r\n                join: 'round',\r\n                size: 2\r\n            }]\r\n        }\r\n\r\n        polyLines.forEach(line => {\r\n\r\n            let cruiseTrajectoryGeometry = {\r\n                type: 'polyline',\r\n                paths: line\r\n            }\r\n\r\n            let graphic = new esriModules.Graphic({\r\n                geometry: cruiseTrajectoryGeometry,\r\n                symbol: cruiseTrajectorySymbol\r\n            });\r\n\r\n            trajectoryLayer.add(graphic);\r\n        })\r\n\r\n        try {\r\n            const center = [lons[midIndex], lats[midIndex]];\r\n\r\n            var zoom = 7 - Math.floor(maxDistance / 6);            \r\n    \r\n            props.view.goTo({\r\n                target: center,\r\n                zoom\r\n            }, {\r\n                maxDuration: 2500,\r\n                speedFactor: .5\r\n            });    \r\n\r\n        } catch(e) {console.log(e)}\r\n\r\n    } else {\r\n        trajectoryLayer.removeAll();\r\n\r\n        props.view.goTo({\r\n            target: [-140, 30],\r\n            zoom: 3\r\n        }, {\r\n            maxDuration: 2500,\r\n            speedFactor: .5\r\n        }); \r\n    }\r\n    return '';\r\n})\r\n\r\nclass MapContainer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            showHelp: false\r\n        }\r\n        this.regionLayer = new props.esriModules.GraphicsLayer();\r\n        this.trajectoryLayer = new props.esriModules.GraphicsLayer();\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, esriModules, spParams, cruiseTrajectory, globeUIRef } = this.props;\r\n\r\n\r\n        const lat1 = parseFloat(spParams.lat1);\r\n        const lat2 = parseFloat(spParams.lat2);\r\n        const lon1 = parseFloat(spParams.lon1);\r\n        let _lon2 = parseFloat(spParams.lon2);\r\n        const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n        this.regionLayer.removeAll();\r\n\r\n        var polygon = {\r\n            type: 'polygon', \r\n            rings: [\r\n                [lon1, lat1],\r\n                [lon2, lat1],\r\n                [lon2, lat2],\r\n                [lon1, lat2],\r\n                [lon1, lat1]\r\n            ]\r\n        };\r\n\r\n        let regionGraphic = new esriModules.Graphic({\r\n            geometry: polygon,\r\n            symbol: polygonSymbol\r\n        })\r\n\r\n        this.regionLayer.add(regionGraphic);\r\n\r\n        return (\r\n            <div className={classes.container}>\r\n                <Scene\r\n                    mapProperties={{ \r\n                        basemap: 'satellite',\r\n                        layers: [\r\n                            this.regionLayer,\r\n                            this.trajectoryLayer\r\n                        ],\r\n\r\n                    }}\r\n                    viewProperties={{\r\n                        center: [-140, 30],\r\n                        zoom: 3,\r\n                        highlightOptions: {\r\n                            haloOpacity: 0,\r\n                            haloColor: 'rgba(0, 0, 0, 0)',\r\n                            fillOpacity: 0,\r\n                            color: \"rgba(0, 0, 0, 0)\"\r\n                        }\r\n                    }}\r\n                >\r\n                    <TrajectoryController \r\n                        cruiseTrajectory={cruiseTrajectory}\r\n                        trajectoryLayer={this.trajectoryLayer}\r\n                        esriModules={esriModules}\r\n                    />\r\n                    <UiComponents\r\n                        updateDomainFromGraphicExtent = {this.props.updateDomainFromGraphicExtent}\r\n                        esriModules={esriModules}\r\n                        measurementPositions={this.props.measurementPositions}\r\n                        regionLayer={this.regionLayer}\r\n                        setShowHelp={(showHelp) => this.setState({...this.state, showHelp})}\r\n                        ref={globeUIRef}\r\n                    />\r\n                </Scene>\r\n                <DrawButton showHelp={this.state.showHelp}/>\r\n                <CruiseSelector updateParametersFromCruiseBoundary={this.props.updateParametersFromCruiseBoundary}/>\r\n            </div>            \r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(MapContainer);","const cleanSPParams = ({depth1, depth2, dt1, dt2, fields, lat1, lat2, lon1, lon2, spName, tableName}) => ({\r\n    depth1: parseFloat(depth1),\r\n    depth2: parseFloat(depth2),\r\n    dt1,\r\n    dt2,\r\n    fields,\r\n    lat1: parseFloat(lat1),\r\n    lat2: parseFloat(lat2),\r\n    lon1: parseFloat(lon1),\r\n    lon2: parseFloat(lon2),\r\n    spName,\r\n    tableName,\r\n})\r\n\r\nexport default cleanSPParams;","const localDateToString = (date) => {\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate()\r\n\r\n    let nYear = year.toString();\r\n    let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n    let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n    return nYear + '-' + nMonth + '-' + nDay;\r\n}\r\n\r\nexport default localDateToString;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginRequiredPrompt from '../User/LoginRequiredPrompt';\r\n// import VisualizationController from './VisualizationController';\r\nimport VizControlPanel from './VizControlPanel';\r\nimport DownloadConfirmationDialog from './DownloadConfirmationDialog';\r\n\r\nimport { showLoginDialog, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { queryRequestSend, storedProcedureRequestSend, cruiseListRequestSend, completedShowCharts } from '../../Redux/actions/visualization';\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\n\r\nimport { loadModules } from 'esri-loader';\r\n\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nimport Charts from './Charts';\r\nimport MapContainer from './MapContainer';\r\nimport colors from '../../Enums/colors'\r\nimport cleanSPParams from '../../Utility/cleanSPParams';\r\nimport localDateToString from '../../Utility/localDateToString';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport stars from '../../Utility/starsBase64';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    sampleData: state.sampleData,\r\n    queryRequestState: state.queryRequestState,\r\n    maps: state.maps,\r\n    charts: state.charts,\r\n    data: state.data,\r\n    storedProcedureRequestState: state.storedProcedureRequestState,\r\n    loadingMessage: state.loadingMessage,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    cruiseList: state.cruiseList,\r\n    showChartsOnce: state.showChartsOnce,\r\n    datasets: state.datasets,\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    queryRequestSend,\r\n    retrievalRequestSend,\r\n    storedProcedureRequestSend,\r\n    snackbarOpen,\r\n    cruiseListRequestSend,\r\n    completedShowCharts,\r\n    datasetRetrievalRequestSend\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    displayNone: {\r\n        display: 'none'\r\n    },\r\n\r\n    background: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    showCharts: {\r\n        display: 'inline-block',\r\n        paddingTop: theme.spacing(6)\r\n        // width: '90%'\r\n    },\r\n\r\n    vizWrapper: {\r\n        minHeight: '100vh',\r\n        // overflow: 'hidden',\r\n        // width: '100vw',\r\n        background: `url(${stars})`\r\n    }\r\n})\r\n\r\nconst baseSPParams = {\r\n    tableName: '',\r\n    fields: null,\r\n    depth1: 0,\r\n    depth2: 0,\r\n    dt1: new Date(),\r\n    dt2: new Date(),\r\n    lat1: 0,\r\n    lat2: 0,\r\n    lon1: 0,\r\n    lon2: 0,\r\n    selectedVizType: ''\r\n}\r\n\r\nclass Visualization extends Component {\r\n    globeUIRef = React.createRef();\r\n\r\n    state = {\r\n        filteredData: [],\r\n        opacity: 1,\r\n        showCharts: false,\r\n        showUI: false,\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        downloadTarget: null,\r\n\r\n        spParams: baseSPParams\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        if(!this.props.cruiseList) this.props.cruiseListRequestSend();\r\n        if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n\r\n        const esriModuleNames = [\r\n            'AreaMeasurement3D',\r\n            'Search',\r\n            'GraphicsLayer',\r\n            'SketchViewModel',\r\n            'Utils',\r\n            'Graphic',\r\n        ];\r\n\r\n        var loadedModules = await loadModules([\r\n            'esri/widgets/AreaMeasurement3D',\r\n            'esri/widgets/Search',\r\n            'esri/layers/GraphicsLayer',\r\n            'esri/widgets/Sketch/SketchViewModel',\r\n            'esri/geometry/support/webMercatorUtils',\r\n            'esri/Graphic',\r\n        ], {version: '4.14'});\r\n\r\n        var esriModules = esriModuleNames.reduce((accumulator, currentValue, currentIndex) => {\r\n            accumulator[currentValue] = loadedModules[currentIndex];\r\n            return accumulator;\r\n        }, {});\r\n\r\n        this.setState({...this.state, esriModules});\r\n    }\r\n\r\n    handleSetDownloadTarget = (downloadTarget) => {\r\n        this.setState({...this.state, downloadTarget})\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(this.props.showChartsOnce) {\r\n            this.props.completedShowCharts();\r\n            this.setState({...this.state, showCharts: true})\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, spParams: {...this.state.spParams, [event.target.name]: event.target.value}})\r\n    };\r\n\r\n    handleLatLonChange = (event) => {\r\n        this.setState({\r\n            ...this.state, \r\n            spParams: {...this.state.spParams, [event.target.name]: event.target.value},\r\n        })\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt1:newDate}});\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt2:newDate}});\r\n        }\r\n    }\r\n\r\n    onVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state.spParams;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: localDateToString(dt1),\r\n            dt2: localDateToString(dt2),\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.state.spParams.fields && this.state.spParams.fields.value,\r\n            tableName: this.state.spParams.fields && this.state.spParams.tableName,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.state.spParams.fields && this.state.spParams.fields.data\r\n        }\r\n    \r\n        this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    // Update the \"fields\" state piece when the variables input changes\r\n    // Field in this case refers to a react-select option, which contains catalog metadata\r\n    updateFields = (fields) => {\r\n        if(fields) {\r\n            let surfaceOnly = !fields.data.Depth_Min;\r\n            let irregularSpatialResolution = fields.data.Spatial_Resolution === 'Irregular';\r\n\r\n            let sparseMaxDate = utcDateStringToLocal(fields.data.Time_Max);\r\n            sparseMaxDate.setDate(sparseMaxDate.getDate() + 1);\r\n\r\n            let dt1 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt1 : utcDateStringToLocal(fields.data.Time_Min);\r\n            let dt2 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt2 : \r\n                irregularSpatialResolution ? sparseMaxDate :\r\n                utcDateStringToLocal(fields.data.Time_Min);\r\n            \r\n            let latMin = Math.floor(fields.data.Lat_Min * 1000) /1000;\r\n            let latMax = Math.ceil(fields.data.Lat_Max * 1000) /1000;\r\n            let lonMin = Math.floor(fields.data.Lon_Min * 1000) /1000;\r\n            let lonMax = Math.ceil(fields.data.Lon_Max * 1000) /1000;\r\n\r\n            let lat1 = irregularSpatialResolution ? latMin : this.state.spParams.lat1;\r\n            let lat2 = irregularSpatialResolution ? latMax : this.state.spParams.lat2;\r\n            let lon1 = irregularSpatialResolution ? lonMin : this.state.spParams.lon1;\r\n            let lon2 = irregularSpatialResolution ? lonMax : this.state.spParams.lon2;\r\n            let depth1 = irregularSpatialResolution ? fields.data.Depth_Min || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? 0 :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? 0 : \r\n                this.state.spParams.depth1;\r\n\r\n            let depth2 = irregularSpatialResolution ? fields.data.Depth_Max || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2) : \r\n                this.state.spParams.depth2;\r\n\r\n            if(irregularSpatialResolution){\r\n                this.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            let tableName = fields.data.Table_Name;\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                spParams: {...this.state.spParams, \r\n                    fields,\r\n                    dt1,\r\n                    dt2,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    depth1,\r\n                    depth2,\r\n                    tableName,\r\n                    selectedVizType: ''\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({...this.state, spParams: {...this.state.spParams, fields, tableName: ''}})\r\n        }\r\n    }\r\n\r\n    updateParametersFromCruiseBoundary = (cruise) => {\r\n        if(cruise && this.state.spParams.fields){\r\n            this.props.snackbarOpen('Setting chart parameters to cruise boundaries.');\r\n            let lat1 = Math.floor(cruise.data.Lat_Min * 1000) / 1000;\r\n            let lat2 = Math.ceil(cruise.data.Lat_Max * 1000) / 1000;\r\n            let lon1 = Math.floor(cruise.data.Lon_Min * 1000) / 1000;\r\n            let lon2 = Math.ceil(cruise.data.Lon_Max * 1000) / 1000;\r\n\r\n            this.setState({...this.state,\r\n                spParams: {...this.state.spParams,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    dt1: utcDateStringToLocal(cruise.data.Start_Time),\r\n                    dt2: utcDateStringToLocal(cruise.data.End_Time)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    handleShowCharts = () => {\r\n        this.setState({...this.state, showCharts: true})\r\n    }\r\n\r\n    handleShowGlobe = () => {\r\n        this.setState({...this.state, showCharts: false})\r\n    }\r\n\r\n    toggleShowUI = () => {\r\n        this.setState({...this.state, showUI: !this.state.showUI});\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin;\r\n\r\n        while(_lon1 < -180) _lon1 += 360;\r\n        while (_lon1 > 180) _lon1 -= 360;\r\n\r\n        var _lon2 = extent.xmax;\r\n\r\n        while(_lon2 < -180) _lon2 += 360;\r\n        while(_lon2 > 180) _lon2 -= 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: extent.ymin.toFixed(3),\r\n            lat2: extent.ymax.toFixed(3),\r\n            lon1: _lon1.toFixed(3),\r\n            lon2: _lon2.toFixed(3)\r\n        };\r\n\r\n        this.setState({...this.state, spParams: {...this.state.spParams, ...newCoordinates}});\r\n    }\r\n\r\n    resetSPParams = () => {\r\n        this.setState({...this.state, spParams: baseSPParams})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        if(!this.props.user) return <LoginRequiredPrompt/>\r\n\r\n        return (\r\n            <div className={classes.vizWrapper}>\r\n                <DownloadConfirmationDialog\r\n                    {...this.state.spParams}\r\n                    downloadTarget={this.state.downloadTarget}\r\n                    handleSetDownloadTarget={this.handleSetDownloadTarget}\r\n                />\r\n\r\n                <VizControlPanel\r\n                    handleSetDownloadTarget={this.handleSetDownloadTarget}\r\n                    toggleChartView={this.toggleChartView}\r\n                    toggleShowUI={this.toggleShowUI}\r\n                    handleChange={this.handleChange}\r\n                    handleLatLonChange={this.handleLatLonChange}\r\n                    handleStartDateChange={this.handleStartDateChange} \r\n                    handleEndDateChange={this.handleEndDateChange} \r\n                    showUI={this.state.showUI}\r\n                    onVisualize={this.onVisualize}\r\n                    updateFields={this.updateFields}\r\n                    {...this.state.spParams}\r\n                    surfaceOnly={this.state.surfaceOnly}\r\n                    irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                    showCharts={this.state.showCharts}\r\n                    handleShowCharts={this.handleShowCharts}\r\n                    handleShowGlobe={this.handleShowGlobe}\r\n                    resetSPParams={this.resetSPParams}\r\n                />\r\n                { this.state.esriModules &&\r\n                    <div className={`${this.state.showCharts ? classes.displayNone : ''}`}>\r\n                        <MapContainer\r\n                            globeUIRef={this.globeUIRef}\r\n                            updateDomainFromGraphicExtent={this.updateDomainFromGraphicExtent}\r\n                            updateParametersFromCruiseBoundary={this.updateParametersFromCruiseBoundary}\r\n                            esriModules={this.state.esriModules}\r\n                            spParams={this.state.spParams}\r\n                            cruiseTrajectory={this.props.cruiseTrajectory}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n                <div className={this.state.showCharts ? classes.showCharts : classes.displayNone}>\r\n                    <Charts/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Visualization));","export default 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=';","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport Link from '@material-ui/core/Link';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { showLoginDialog, hideLoginDialog, restoreInterfaceDefaults, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { logOut, userLoginRequestSend, googleLoginRequestSend } from '../../Redux/actions/user';\r\n\r\nimport GoogleSignInButton from './GoogleSignInButton';\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        loginDialogIsOpen: state.loginDialogIsOpen,\r\n        userLoginState: state.userLoginState,\r\n        userLoginError: state.userLoginError\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    hideLoginDialog,\r\n    showLoginDialog,\r\n    logOut,\r\n    userLoginRequestSend,\r\n    restoreInterfaceDefaults,\r\n    googleLoginRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst styles = theme => ({\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: 'relative',\r\n    },\r\n\r\n    buttonProgress: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n\r\n    googleIconWrapper: {\r\n        marginRight: '100px',\r\n        marginLeft: '-8px'\r\n    },\r\n\r\n    dialogWrapper: {\r\n        backgroundColor: colors.solidPaper\r\n    },\r\n\r\n    colorCorrectionPrimary: {\r\n        color: colors.primary\r\n    },\r\n\r\n    colorCorrectionWhite: {\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst loginClickHandlerTarget = 'g-signin';\r\n\r\nclass LoginDialog extends Component{\r\n    // Text input state is managed in the TopNavBar component\r\n\r\n    handleLogin = (event) => {\r\n        this.props.userLoginRequestSend(this.props.username, this.props.password);\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.clearState();\r\n        this.props.hideLoginDialog();\r\n        this.props.restoreInterfaceDefaults();\r\n    }\r\n\r\n    onGoogleSignin = (user) => {\r\n        let token = user.getAuthResponse(true).id_token;\r\n        this.props.googleLoginRequestSend(token);\r\n    }\r\n\r\n    onDialogEnter = () => {\r\n        // clean up listener on unmount\r\n        let _this = this;\r\n        let auth = window.gapi.auth2\r\n        if(auth){\r\n            let authInstance = auth.getAuthInstance();\r\n            authInstance.attachClickHandler(\r\n                loginClickHandlerTarget, \r\n                null, \r\n                _this.onGoogleSignin,\r\n                () => _this.props.snackbarOpen('There was a problem accessing your google account')\r\n            );\r\n        } else {\r\n            setTimeout(_this.onDialogEnter, 20);\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n        let loginDisabled = !this.props.username || !this.props.password;\r\n\r\n        return (\r\n            <Dialog\r\n                open={this.props.loginDialogIsOpen}\r\n                onClose={this.handleClose}\r\n                aria-labelledby=\"form-dialog-title\"\r\n                onEnter={this.onDialogEnter}\r\n                PaperProps={{\r\n                    className: classes.dialogWrapper\r\n                }}\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">Login</DialogTitle>\r\n                <DialogContent>                \r\n                    <DialogContentText>\r\n                        Please enter your username and password, or <Link className={classes.colorCorrectionPrimary} onClick={this.handleClose} component={RouterLink} to={{pathname: '/register'}}>Register.</Link>\r\n                    </DialogContentText>\r\n                    <form onSubmit={e => (e.preventDefault())}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"username\"\r\n                            label=\"Username\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='username'\r\n                            value={this.props.username}\r\n                            onChange={this.props.handleChange}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}                            \r\n                        />\r\n\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"name\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='password'\r\n                            value={this.props.password}\r\n                            onChange={this.props.handleChange}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            helperText={<Link className={classes.colorCorrectionPrimary} onClick={this.handleClose} component={RouterLink} to={{pathname: '/forgotpass'}}>Forgot Username or Password</Link>}\r\n                        />\r\n\r\n                        <DialogActions>\r\n                            <div className={classes.googleIconWrapper}>\r\n                                <GoogleSignInButton clickHandlerTarget={loginClickHandlerTarget} text='Sign in with Google'/>\r\n                            </div>\r\n\r\n                            <Button onClick={this.handleClose}>\r\n                                <span className={classes.colorCorrectionWhite}>Cancel</span>\r\n                            </Button>\r\n\r\n                            <div className={classes.wrapper}>\r\n                                <Button \r\n                                    color=\"primary\" \r\n                                    type='submit' \r\n                                    onClick={this.handleLogin} \r\n                                    disabled={loginDisabled}\r\n                                    className={loginDisabled ? '' : classes.colorCorrection}\r\n                                >\r\n                                    Log In\r\n                                </Button>\r\n                            </div>\r\n                        </DialogActions>\r\n                    </form>\r\n                    {this.props.userLoginState === states.failed ?\r\n                    <DialogContentText>\r\n                        Login failed. Please try again.\r\n                    </DialogContentText>\r\n                    : ''               \r\n                    }\r\n                </DialogContent>\r\n                \r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(LoginDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { snackbarClose } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    snackbarIsOpen: state.snackbarIsOpen,\r\n    snackbarMessage: state.snackbarMessage\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarClose,\r\n}\r\n\r\nconst styles = (theme) => {\r\n    return ({\r\n\r\n    })\r\n}\r\n\r\nconst SnackbarWrapper = (props) => {\r\n    const { classes } = props;\r\n    return (\r\n        \r\n        <React.Fragment>\r\n            <Snackbar\r\n                autoHideDuration={2500} \r\n                message={props.snackbarMessage}\r\n                onClose={props.snackbarClose}\r\n                open={props.snackbarIsOpen}\r\n                anchorOrigin={{horizontal:'center', vertical:'top'}}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SnackbarWrapper));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport * as Spinner from 'react-spinkit';\r\n\r\nconst styles = theme => ({\r\n    loader: {\r\n        backgroundColor: '#000000',\r\n        position: 'fixed',\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        opacity: 0.5,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        zIndex: 9998\r\n    },\r\n\r\n    loaderContent: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItem: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 9999,\r\n        opacity: 1\r\n    },\r\n\r\n    spinnerText: {\r\n        zIndex: 10000,\r\n        color: theme.palette.primary.main,\r\n        // color: '#FF8000',\r\n        marginTop: '25px',\r\n        opacity: 1\r\n    },\r\n\r\n    spinner: {\r\n        opacity: 1\r\n    }\r\n})\r\n\r\nconst LoadingOverlay = (props) => {\r\n    const { classes, loadingMessage } = props;\r\n\r\n    if(loadingMessage && loadingMessage.length){\r\n        return (\r\n            <div className={classes.loader}>\r\n                <div className={classes.loaderContent}>\r\n                    <Spinner className={classes.spinner} color={colors.primary} name=\"ball-pulse-rise\" fadeIn='quarter'/>\r\n                    <Typography variant='h6' className={classes.spinnerText}>{loadingMessage}</Typography>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else return '';\r\n\r\n}\r\n\r\nexport default withStyles(styles)(LoadingOverlay);","// This component is a wrapper and control center for\r\n// UI components that need to be accessible anywhere\r\n// in the application such as login dialog and snackbar.\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginDialog from '../User/LoginDialog';\r\nimport SnackbarWrapper from './SnackbarWrapper';\r\nimport LoadingOverlay from './LoadingOverlay';\r\n\r\nimport { loginDialogWasCleared } from '../../Redux/actions/user';\r\n\r\nconst styles = theme => ({\r\n    inlineBlock: {\r\n        display: 'inline-block'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    clearLoginDialog: state.clearLoginDialog,\r\n    loadingMessage: state.loadingMessage\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    loginDialogWasCleared\r\n}\r\n\r\nclass GlobalUIComponentWrapper extends Component {\r\n\r\n    state = {\r\n        // Login dialog\r\n        username: '',\r\n        password: ''\r\n    }\r\n    \r\n    // Controls login dialog text fields to allow reset from logout button\r\n    handleChange = (event) => {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    };\r\n\r\n    handleLogOut = () => {\r\n        this.clearState();\r\n    }\r\n\r\n    clearState = () => {\r\n        this.setState({\r\n            username: '',\r\n            password: ''\r\n        });\r\n        this.props.loginDialogWasCleared();\r\n    }\r\n\r\n    componentDidUpdate = (preProps) => {\r\n        if(this.props.clearLoginDialog) {\r\n            this.clearState();\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        // const { classes } = this.props;\r\n\r\n        return (\r\n            <React.Fragment>    \r\n                <LoginDialog clearState={this.clearState} username={this.state.username} password={this.state.password} handleChange={this.handleChange}/>\r\n                <SnackbarWrapper/>\r\n                <LoadingOverlay loadingMessage={this.props.loadingMessage}/>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(GlobalUIComponentWrapper));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n    landingWrapper: {\r\n        margin: '15vh auto'\r\n    }\r\n})\r\n\r\nclass LandingPage extends Component {\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.landingWrapper}>\r\n                <img \r\n                    src='/images/large_cmap_logo.png'\r\n                    alt='Simons CMAP Logo'\r\n                    height='290'\r\n                    width='600'\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(LandingPage);","const jss = {\r\n    // styles for top navbar links\r\n    navLink: theme => ({\r\n        textDecoration: 'none',\r\n        marginRight: 40,\r\n        fontFamily: '\"Lato\",sans-serif',\r\n        color: 'white',\r\n        '&:hover': {\r\n            color: theme.palette.primary.main\r\n        },\r\n        fontSize: '15px',\r\n        fontWeight: 100,\r\n        display: 'inline-block',\r\n        cursor: 'pointer' ,\r\n        verticalAlign: 'middle',\r\n        pointerEvents: 'all',\r\n        fontWeight: 500,\r\n        letterSpacing: 'normal'\r\n    }),\r\n}\r\n\r\nexport default jss;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\r\nimport { Typography, MenuItem, ClickAwayListener, Grow, Paper, Popper, MenuList } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nconst styles = (theme) => ({\r\n    navLink: JSS.navLink(theme),\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle',\r\n        color: colors.primary\r\n    },\r\n\r\n    dropdown: {\r\n        zIndex: 1300,\r\n        marginTop: '21px',\r\n        width: '200px'\r\n    },\r\n\r\n    popperPaperBlue: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: '#1D4962'\r\n    },\r\n\r\n    popperPaperBlack: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: 'black'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    logOut\r\n}\r\n\r\nconst UserNavbarDropdown = (props) => {\r\n    const { classes, user, pathname, logOut } = props;\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const paperClass = window.location.pathname === '/visualization' ? classes.popperPaperBlack : classes.popperPaperBlue;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='caption' className={`${classes.navLink}`} onClick={handleClick}>\r\n                {user.email}{anchorEl ? <ExpandLess className={classes.icon} color='primary' fontSize='small'/> : <ExpandMore className={classes.icon} color='primary' fontSize='small'/>}\r\n            </Typography>\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} role={undefined} transition className={classes.dropdown}>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={paperClass}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList id=\"menu-list-grow\">\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/profile'>Profile</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/apikeymanagement'>API Access</MenuItem>\r\n                                    <MenuItem onClick={logOut}>Logout</MenuItem>\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(UserNavbarDropdown)));","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\r\n\r\nimport { Typography, MenuItem, ClickAwayListener, Grow, Paper, Popper, MenuList } from '@material-ui/core';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    navLink: JSS.navLink(theme),\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle'\r\n    },\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle',\r\n        color: colors.primary\r\n    },\r\n\r\n    dropdown: {\r\n        zIndex: 1300,\r\n        marginTop: '21px',\r\n        width: '200px'\r\n    },\r\n\r\n    popperPaperBlue: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: '#1D4962'\r\n    },\r\n\r\n    popperPaperBlack: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: 'black'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    logOut\r\n}\r\n\r\nconst DataSubmissionNavbarDropdown = (props) => {\r\n    const { classes, user, pathname, logOut } = props;\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const paperClass = window.location.pathname === '/visualization' ? classes.popperPaperBlack : classes.popperPaperBlue;\r\n\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='caption' className={`${classes.navLink}`} onClick={handleClick}>\r\n                Data Submission{anchorEl ? <ExpandLess className={classes.icon} color='primary' fontSize='small'/> : <ExpandMore className={classes.icon} color='primary' fontSize='small'/>}\r\n            </Typography>\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} role={undefined} transition className={classes.dropdown}>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={paperClass}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList id=\"menu-list-grow\">\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/guide'>Submission Guide</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/validationtool'>Submit Data</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/userdashboard'>User Dashboard</MenuItem>\r\n                                    {user && user.isDataSubmissionAdmin &&\r\n                                        <MenuItem onClick={handleClose} component={Link} to='/datasubmission/admindashboard'>Admin Dashboard</MenuItem>\r\n                                    }\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(DataSubmissionNavbarDropdown)));","import React from 'react';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport { Typography, IconButton, Drawer, List, ListItem, ListItemIcon, ListItemText, Divider } from '@material-ui/core';\r\nimport { Menu } from '@material-ui/icons';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = theme => ({\r\n    menuIcon: {\r\n        color: 'white',\r\n        cursor: 'pointer'\r\n    },\r\n\r\n    iconButton: {\r\n        ...JSS.navLink(theme),\r\n        padding: '8px'\r\n    },\r\n\r\n    drawerPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        paddingLeft: '8px'\r\n    },\r\n\r\n    listItem: {\r\n        '&:hover': {\r\n            color: theme.palette.primary.main\r\n        }\r\n    }\r\n})\r\n\r\nconst MobileNavbarMenu = (props) => {\r\n    const { classes, user, handleLogOut, showLoginDialog } = props;\r\n\r\n    const [drawerState, setDrawerState] = React.useState(false);\r\n\r\n    const handleLoginClick = () => {\r\n        showLoginDialog();\r\n        setDrawerState(false);\r\n    }\r\n\r\n    const handleLogoutClick = () => {\r\n        handleLogOut();\r\n        setDrawerState(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <IconButton onClick={() => setDrawerState(true)} className={classes.iconButton}>\r\n                <Menu className={classes.menuIcon}/>\r\n            </IconButton>\r\n\r\n            <Drawer \r\n                anchor='top' \r\n                open={drawerState} \r\n                onClose={() => setDrawerState(false)}\r\n                PaperProps={{\r\n                    className: classes.drawerPaper\r\n                }}\r\n            >\r\n                <List>\r\n                    <ListItem button component={Link} to='/catalog' onClick={() => setDrawerState(false)}>\r\n                        Catalog\r\n                    </ListItem>\r\n\r\n                    <ListItem button component={Link} to='/visualization' onClick={() => setDrawerState(false)}>\r\n                        Visualization\r\n                    </ListItem>\r\n\r\n                    <ListItem button component={Link} to='/community' onClick={() => setDrawerState(false)}>\r\n                        Community\r\n                    </ListItem>\r\n\r\n                    <ListItem button component={Link} to='/datasubmission' onClick={() => setDrawerState(false)}>\r\n                        Data Submission\r\n                    </ListItem>\r\n                </List>\r\n                <Divider/>\r\n                {user &&\r\n                    <List>\r\n                        <ListItem button component={Link} to='/profile' onClick={() => setDrawerState(false)}>\r\n                            Profile\r\n                        </ListItem>\r\n\r\n                        <ListItem button component={Link} to='/apikeymanagement' onClick={() => setDrawerState(false)}>\r\n                            API Access\r\n                        </ListItem>\r\n\r\n                        <ListItem button onClick={handleLogoutClick}>\r\n                                Log Out\r\n                        </ListItem>\r\n                    </List>                \r\n                }\r\n\r\n                {!user && \r\n                    <List>\r\n                        <ListItem button onClick={handleLoginClick}>\r\n                            Log In\r\n                        </ListItem>\r\n\r\n                        <ListItem button component={Link} to='/register' onClick={() => setDrawerState(false)}>\r\n                            Register\r\n                        </ListItem>\r\n                    </List> \r\n                }\r\n            </Drawer>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withRouter(withStyles(styles)(MobileNavbarMenu));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog, restoreInterfaceDefaults, snackbarOpen, toggleShowHelp } from '../../Redux/actions/ui';\r\nimport { logOut } from '../../Redux/actions/user';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport UserNavbarDropdown from '../User/UserNavbarDropdown';\r\nimport DataSubmissionNavbarDropdown from '../DataSubmission/DataSubmissionNavbarDropdown';\r\nimport MobileNavbarMenu from './MobileNavbarMenu';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nconst styles = theme => ({\r\n\r\n    simonsLogo: {\r\n        verticalAlign: 'middle',\r\n        display: 'inline-block',\r\n    },\r\n    \r\n    simonsLogoWrapper: {\r\n        pointerEvents: 'all',\r\n        display: 'inline-block',\r\n        marginRight: '60px !important',     \r\n        verticalAlign: 'middle',   \r\n    },\r\n\r\n    navWrapper: {\r\n        position: 'fixed',\r\n        width: '100vw',\r\n        top: '0px',\r\n        backgroundColor: 'transparent',\r\n        zIndex: 50,\r\n        paddingTop: '14px',\r\n        paddingBottom: '14px',\r\n        paddingLeft: '20px',\r\n        paddingRight: '20px',\r\n        textAlign: 'left',\r\n        boxSizing: 'border-box',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        pointerEvents: 'none'\r\n    },\r\n\r\n    navWrapperBlue: {\r\n        backgroundColor: '#1D4962'\r\n    },\r\n\r\n    rightSectionWrapper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-around'\r\n    },\r\n\r\n    navLink: JSS.navLink(theme),\r\n\r\n    rightNavLink: {\r\n        marginRight: 30\r\n    },    \r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    showHelp: state.showHelp\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    logOut,\r\n    restoreInterfaceDefaults,\r\n    snackbarOpen,\r\n    toggleShowHelp\r\n}\r\n\r\nclass TopNavBar extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            layout: window.innerWidth >= 860 ? 'desktop' : 'mobile'\r\n        }\r\n        \r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        window.addEventListener(\"resize\", this.handleResize);\r\n    }\r\n\r\n    handleResize = (e) => {\r\n        let w = e.target.innerWidth;\r\n\r\n        if(w < 860 && this.state.layout === 'desktop'){\r\n            this.setState({...this.state, layout:'mobile'});\r\n        }\r\n\r\n        else if(w >= 860 && this.state.layout === 'mobile'){\r\n            this.setState({...this.state, layout:'desktop'});\r\n        }\r\n    }\r\n\r\n    // Controls login dialog text fields to allow reset from logout button\r\n    handleChange = (event) => {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    };\r\n\r\n    handleLogOut = () => {\r\n        this.clearState();\r\n        this.props.logOut();\r\n        this.props.restoreInterfaceDefaults();\r\n    }\r\n\r\n    clearState = () => {\r\n        this.setState({\r\n            username: '',\r\n            password: ''\r\n        })\r\n    }\r\n\r\n    render(){\r\n        const { classes, history, user, showHelp } = this.props;\r\n        const { pathname } = history.location;\r\n\r\n        return (\r\n            <div className={`${classes.navWrapper} ${pathname !== '/visualization' && classes.navWrapperBlue}`}>\r\n                {\r\n                    this.state.layout === 'desktop' ?\r\n\r\n                    <React.Fragment>\r\n                        {/* Left side of navbar */}\r\n                        <div>\r\n                            <Typography variant='caption' href='/' component='a' className={`${classes.navLink} ${classes.simonsLogoWrapper}`}>\r\n                                <img src='/images/CMAP_white_logo_2.png' width='40' alt='CMAP logo' className={classes.simonsLogo}/>\r\n                            </Typography>\r\n                            <Typography variant='caption' to='/catalog' component={Link} className={classes.navLink}>Catalog</Typography>\r\n                            <Typography variant='caption' to='/visualization' component={Link} className={classes.navLink}>Visualization</Typography>\r\n                            <Typography variant='caption' to='/community' component={Link} className={classes.navLink}>Community</Typography>\r\n                            {/* <Typography variant='caption' to='/datasubmission' component={Link} className={classes.navLink}>Data Submission</Typography> */}\r\n                            <DataSubmissionNavbarDropdown/>\r\n                        </div>\r\n\r\n                        {/* Right side of navbar */}\r\n                        <div className={classes.rightSectionWrapper}>\r\n                            <div>\r\n                                {/* <Typography variant='caption' onClick={this.props.toggleShowHelp} className={classes.navLink}>{showHelp ? 'Hide Help' : 'Show Help'}</Typography> */}\r\n                                {user && <UserNavbarDropdown pathname={pathname} user={user}/>}\r\n                                {!user && <Typography variant='caption' onClick={() => this.props.showLoginDialog()} className={`${classes.navLink} ${classes.rightNavLink}`}>Log In</Typography>}\r\n                                {!user && <Typography variant='caption' to='/register' component={Link} className={`${classes.navLink} ${classes.rightNavLink}`}>Register</Typography>}\r\n                            </div>\r\n                        </div>\r\n                    </React.Fragment>\r\n\r\n                    :\r\n\r\n                    <React.Fragment>\r\n                        <Typography variant='caption' href='/' component='a' className={`${classes.navLink} ${classes.simonsLogoWrapper}`}>\r\n                            <img src='/images/CMAP_white_logo_2.png' width='40' alt='CMAP logo' className={classes.simonsLogo}/>\r\n                        </Typography>\r\n                        <MobileNavbarMenu handleLogOut={this.handleLogOut} showLoginDialog={this.props.showLoginDialog} user={user}/>\r\n                    </React.Fragment>\r\n                }\r\n\r\n            </div>        \r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(TopNavBar)));","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst Login = (props) => {\r\n\r\n    useEffect(() => {\r\n        if(!props.user) props.showLoginDialog();\r\n        else window.location.href = \"/catalog\";\r\n    })\r\n    \r\n    return (\r\n        ''\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Grid, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Button, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { changePasswordRequestSend } from '../../Redux/actions/user';\r\nimport { hideChangePasswordDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    changePasswordRequestSend,\r\n    hideChangePasswordDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        '@media (max-width: 768px)': {\r\n            margin: 0\r\n        },\r\n    },\r\n\r\n    formWrapper: {\r\n        padding: '3vh 5vw'\r\n    }\r\n})\r\n\r\nconst testNewPassword = (password) => {\r\n    return /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(password);\r\n};\r\n\r\n\r\nconst ChangePassword = (props) => {\r\n    const { classes } = props;\r\n    \r\n    const [currentPassword, setCurrentPassword] = React.useState('');\r\n    const [newPassword, setNewPassword] = React.useState('');\r\n    const [newPasswordConfirm, setNewPasswordConfirm] = React.useState('')\r\n    \r\n    const newPasswordValid = Boolean(testNewPassword(newPassword) || !newPassword);\r\n    const newPasswordConfirmValid = Boolean(!newPasswordConfirm || newPasswordConfirm === newPassword);\r\n    \r\n    const resetFields = () => {\r\n        setCurrentPassword('');\r\n        setNewPassword('');\r\n        setNewPasswordConfirm('');\r\n    }\r\n\r\n    const handleClose = () => {\r\n        props.hideChangePasswordDialog();\r\n        resetFields();\r\n    }\r\n    \r\n    const handleConfirm = () => {\r\n        props.changePasswordRequestSend(currentPassword, newPassword, props.user.username);\r\n    }\r\n    \r\n    const changePasswordButtonRef = React.useRef();\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            changePasswordButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    const buttonIsDisabled = Boolean(!newPassword || !newPasswordConfirm || !newPasswordValid || !newPasswordConfirmValid);\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n            onEnter={resetFields}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">Change Password</DialogTitle>\r\n            <DialogContent>                \r\n                <DialogContentText>\r\n                    Please enter your current and new password.\r\n                </DialogContentText>\r\n\r\n                <Grid container className={classes.formWrapper}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"currentPassword\"\r\n                            label=\"Current Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='currentPassword'\r\n                            value={currentPassword}\r\n                            onChange={(e) => setCurrentPassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            onKeyPress={handleKeyPress}\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"newPassword\"\r\n                            label=\"New Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='newPassword'\r\n                            value={newPassword}\r\n                            onChange={(e) => setNewPassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!newPasswordValid}\r\n                            helperText={!newPasswordValid ? 'Must be 8 to 32 characters with 1 number and 1 special character.' : ''}\r\n                            onKeyPress={handleKeyPress}\r\n                        />                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"newPasswordConfirm\"\r\n                            label=\"Confirm New Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='newPasswordConfirm'\r\n                            value={newPasswordConfirm}\r\n                            onChange={(e) => setNewPasswordConfirm(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!newPasswordConfirmValid}\r\n                            helperText={newPasswordConfirmValid ? '' : 'Passwords must match.'}\r\n                            onKeyPress={handleKeyPress}\r\n                        />                        \r\n                    </Grid>\r\n                </Grid>\r\n\r\n                <DialogActions>\r\n                    <Button onClick={() => handleClose()} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n\r\n                    <Button \r\n                        color=\"primary\" \r\n                        variant='contained'\r\n                        onClick={handleConfirm}\r\n                        disabled={buttonIsDisabled}\r\n                        ref={changePasswordButtonRef}\r\n                    >\r\n                        Confirm\r\n                    </Button>\r\n                </DialogActions>\r\n            </DialogContent>            \r\n        </Dialog>\r\n        )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChangePassword));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Grid, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Button, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { changeEmailRequestSend } from '../../Redux/actions/user';\r\nimport { hideChangeEmailDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    changeEmailRequestSend,\r\n    hideChangeEmailDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        '@media (max-width: 768px)': {\r\n            margin: 0\r\n        },\r\n    },\r\n\r\n    formWrapper: {\r\n        padding: '3vh 5vw'\r\n    }\r\n})\r\n\r\nconst testEmail = (email) => {\r\n    return /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(email);\r\n};\r\n\r\nconst ChangePassword = (props) => {\r\n    const { classes } = props;\r\n\r\n    const [password, setpassword] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [emailConfirm, setEmailConfirm] = React.useState('')\r\n\r\n    const resetFields = () => {\r\n        setpassword('');\r\n        setEmail('');\r\n        setEmailConfirm('');\r\n    }\r\n\r\n    const handleClose = () => {\r\n        resetFields();\r\n        props.hideChangeEmailDialog();\r\n    }\r\n\r\n    const handleConfirm = () => {\r\n        props.changeEmailRequestSend(email, password, props.user.username);\r\n    }\r\n    \r\n    const changeEmailButtonRef = React.useRef();\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            changeEmailButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    const emailValid = Boolean(testEmail(email) || !email);\r\n    const emailConfirmValid = Boolean(!emailConfirm || email === emailConfirm); \r\n\r\n    const buttonIsDisabled = Boolean(!email || !emailConfirm || !emailValid || !emailConfirmValid);\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n            onEnter={resetFields}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">Change Email</DialogTitle>\r\n            <DialogContent>                \r\n                <DialogContentText>\r\n                    Please enter your account password, and new email address.\r\n                </DialogContentText>\r\n\r\n                <Grid container className={classes.formWrapper}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"currentPassword\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='currentPassword'\r\n                            value={password}\r\n                            onChange={(e) => setpassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            onKeyPress={handleKeyPress}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"email\"\r\n                            label=\"New Email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='email'\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!emailValid}\r\n                            helperText={!emailValid ? 'Please enter a valid email address' : ''}\r\n                        />                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"emailConfirm\"\r\n                            label=\"Confirm Email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='emailConfirm'\r\n                            value={emailConfirm}\r\n                            onChange={(e) => setEmailConfirm(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            onKeyPress={handleKeyPress}\r\n                            error={!emailConfirmValid}\r\n                            helperText={emailConfirmValid ? '' : 'Email addresses must match.'}                            \r\n                        />                        \r\n                    </Grid>\r\n                </Grid>\r\n\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\">\r\n                            Cancel\r\n                        </Button>\r\n\r\n                        <Button \r\n                            color=\"primary\" \r\n                            variant='contained'\r\n                            onClick={handleConfirm}\r\n                            ref={changeEmailButtonRef}\r\n                            disabled={buttonIsDisabled}\r\n                        >\r\n                            Confirm\r\n                        </Button>\r\n                    </DialogActions>\r\n            </DialogContent>            \r\n        </Dialog>\r\n        )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChangePassword));","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { IconButton, Tooltip, Paper, Button, TextField, Typography, Grid } from '@material-ui/core';\r\nimport { Edit } from '@material-ui/icons';\r\n\r\nimport { updateUserInfoRequestSend } from '../../Redux/actions/user';\r\nimport { showChangePasswordDialog, showChangeEmailDialog } from '../../Redux/actions/ui';\r\n\r\nimport ChangePassword from './ChangePassword';\r\nimport ChangeEmail from './ChangeEmail';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    changePasswordDialogIsOpen: state.changePasswordDialogIsOpen,\r\n    changeEmailDialogIsOpen: state.changeEmailDialogIsOpen\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    updateUserInfoRequestSend,\r\n    showChangePasswordDialog,\r\n    showChangeEmailDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    profilePaper: {\r\n        '@media (min-width: 768px)': {\r\n            width: '60vw'\r\n        },\r\n        width: '100vw',\r\n        margin: `${theme.spacing(16)}px auto 0 auto`,\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n\r\n    accountPaper: {\r\n        '@media (min-width: 768px)': {\r\n            width: '60vw'\r\n        },\r\n        width: '100vw',\r\n        margin: `${theme.spacing(6)}px auto 0 auto`,\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n\r\n    textField: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n        maxWidth: 'calc(100% - 52px)'\r\n    },\r\n\r\n    buttonGrid: {\r\n        marginTop: theme.spacing(1)\r\n    },\r\n\r\n    editButton: {\r\n        float: 'right',\r\n        display: 'inline-block',\r\n        marginTop: '-16px'\r\n    },\r\n\r\n    header: {\r\n        paddingLeft: theme.spacing(3),\r\n        display: 'inline-block',\r\n        marginTop: '-4px',\r\n        float: 'left'\r\n    },\r\n\r\n    accountEditButton: {\r\n        float: 'left',\r\n        marginTop: '6px'\r\n    }\r\n})\r\n\r\nconst userProperties = {\r\n    firstName: {\r\n        label:'First Name',\r\n        name: 'firstName',\r\n        type: 'text',\r\n        requirement: 'Must be 2 or more alphabetical characters.',\r\n    },\r\n\r\n    lastName: {\r\n        label:'Last Name',\r\n        name: 'lastName',\r\n        type: 'text',\r\n        requirement: 'Must be 2 or more alphabetical characters.',\r\n    },\r\n\r\n    institute: {\r\n        label:'Institute',\r\n        name: 'institute',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    },\r\n\r\n    department: {\r\n        label:'Department',\r\n        name: 'department',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    },\r\n\r\n    country: {\r\n        label:'Country',\r\n        name: 'country',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    }\r\n}\r\n\r\nconst userToState = (user) => ({\r\n    editable: false,\r\n    firstName: {\r\n        value: user.firstName,\r\n        valid: true\r\n    },\r\n\r\n    lastName: {\r\n        value: user.lastName,\r\n        valid: true\r\n    },\r\n    institute: {\r\n        value: user.institute || '',\r\n        valid: true\r\n    },\r\n    department: {\r\n        value: user.department || '',\r\n        valid: true\r\n    },\r\n    country: {\r\n        value: user.country || '',\r\n        valid: true\r\n    },\r\n    email: {\r\n        value: user.email || '',\r\n        valid: true\r\n    }\r\n})\r\n\r\nclass Profile extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        if(!props.user) return;\r\n\r\n        this.state = {\r\n            ...userToState(props.user),\r\n            editable: false,\r\n            infoHasChanged: false\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        let newValue = event.target.value;\r\n        let fieldName = event.target.name;\r\n        let valid = this.handleValidation(fieldName, newValue);\r\n        this.setState({\r\n            ...this.state,\r\n            infoHasChanged: true,\r\n            [fieldName]: {\r\n                value: newValue,\r\n                valid\r\n            }\r\n        })\r\n    };\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(prevProps.user !== this.props.user){\r\n            this.setState({...this.state, ...userToState(this.props.user)});\r\n        }\r\n    }\r\n\r\n    handleValidation = (fieldName, newValue) => {\r\n        let value = newValue.trim();\r\n        let pattern = /$^/;\r\n\r\n        switch(fieldName){\r\n            case 'firstName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'lastName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'email':\r\n                pattern = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n                break;\r\n            case 'institute':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'department':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'country':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return pattern.test(value);\r\n    }\r\n\r\n    handleEdit = () => {\r\n        this.setState({...this.state, editable: true})\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.setState({...userToState(this.props.user), editable: false, infoHasChanged: false})\r\n    }\r\n\r\n    handleConfirm = () => {\r\n        this.props.updateUserInfoRequestSend({\r\n            firstName: this.state.firstName.value.trim(),\r\n            lastName: this.state.lastName.value.trim(),\r\n            institute: this.state.institute.value.trim(),\r\n            department: this.state.department.value.trim(),\r\n            country: this.state.country.value.trim()\r\n        })\r\n    }\r\n\r\n    render(){\r\n        if(!this.props.user) {\r\n            window.location.href = \"/login\";\r\n            return '';\r\n        }\r\n\r\n        const { classes, changeEmailDialogIsOpen, changePasswordDialogIsOpen, showChangePasswordDialog, showChangeEmailDialog } = this.props;\r\n        const { editable, infoHasChanged } = this.state;\r\n        let formIsValid = true;\r\n        \r\n        Object.keys(userProperties).forEach((property) => {\r\n            if(!this.state[property].valid) formIsValid = false;\r\n        })\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <ChangePassword\r\n                    open={changePasswordDialogIsOpen}\r\n                    close={() => this.setState({...this.state, changePasswordDialogOpen: false})}\r\n                />\r\n                <ChangeEmail\r\n                    open={changeEmailDialogIsOpen}\r\n                    close={() => this.setState({...this.state, changeEmailDialogOpen: false})}\r\n                />\r\n\r\n                <Paper className={classes.profilePaper} elevation={6}>\r\n                    <Typography variant='h5' align='left' className={classes.header}>\r\n                        Profile\r\n                    </Typography>\r\n\r\n                    <Tooltip title='Edit Information'>\r\n                        <IconButton className={classes.editButton} color=\"primary\" onClick={this.handleEdit} disableFocusRipple disableRipple>\r\n                                <Edit/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Grid container spacing={1}>\r\n                        {\r\n                            Object.keys(userProperties).map((property, index) => (\r\n                                <Grid key={index} item xs={12} md={6}>\r\n                                    <TextField\r\n                                        name={property}\r\n                                        label={userProperties[property].label}\r\n                                        value={this.state[property].value}\r\n                                        error={!this.state[property].valid}\r\n                                        helperText={this.state[property].valid ? '' : userProperties[property].requirement}\r\n                                        key={index}\r\n                                        onChange={this.handleChange}\r\n                                        inputProps={{\r\n                                            readOnly: !editable\r\n                                        }}\r\n                                        InputLabelProps={{\r\n                                            shrink: true,\r\n                                        }}\r\n                                        className={classes.textField}\r\n                                    />\r\n                                </Grid>\r\n                            ))\r\n                        }\r\n\r\n                        <Grid item xs={6}>\r\n\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    { editable &&\r\n                        <Grid className={classes.buttonGrid} container>\r\n                                <Grid item md={9} xs={false}></Grid>\r\n                                <Grid item md={1} xs={6}>\r\n                                    <Button onClick={this.handleCancel}>Cancel</Button>\r\n\r\n                                </Grid>\r\n\r\n                                <Grid item md={2} xs={6}>\r\n                                    <Button\r\n                                        onClick={this.handleConfirm}\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={!infoHasChanged || !formIsValid}\r\n                                    >\r\n                                        Confirm\r\n                                    </Button>\r\n                                </Grid>\r\n                        </Grid>\r\n                    }\r\n\r\n                </Paper>\r\n\r\n                <Paper className={classes.accountPaper} elevation={6}>\r\n                    <Typography variant='h5' align='left' className={classes.header}>\r\n                        Account\r\n                    </Typography>\r\n                    <Grid container >\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                name='email'\r\n                                label= 'Email'\r\n                                value={this.state.email.value}\r\n                                inputProps={{\r\n                                    readOnly: true\r\n                                }}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                className={classes.textField}\r\n                            />\r\n                            <Tooltip title='Change Email'>\r\n                                <IconButton \r\n                                    color=\"primary\" \r\n                                    disableFocusRipple \r\n                                    disableRipple\r\n                                    onClick={() => showChangeEmailDialog()}\r\n                                >\r\n                                    <Edit/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={12}>                            \r\n                            <TextField\r\n                                name='Password'\r\n                                label= 'Password'\r\n                                value= '********'\r\n                                inputProps={{\r\n                                    readOnly: true\r\n                                }}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                className={classes.textField}\r\n                            />\r\n                            <Tooltip title='Change Password'>\r\n                                <IconButton \r\n                                    color=\"primary\" \r\n                                    disableFocusRipple \r\n                                    disableRipple\r\n                                    onClick={() => showChangePasswordDialog()}\r\n                                >\r\n                                    <Edit/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid>\r\n\r\n\r\n                </Paper>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Profile));","import React from 'react';\r\n\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nclass DSCellEditor extends React.Component {\r\n    constructor(props){\r\n        const { getAuditReport, sheet } = props.context;\r\n        const { rowIndex } = props;\r\n        const { colId } = props.column;\r\n        let auditReport = getAuditReport();\r\n\r\n        super(props);\r\n        this.inputRef = React.createRef();\r\n        this.parseValue = props.parseValue;\r\n        this.state = {\r\n            value: props.value || '',\r\n            errors: auditReport[sheet][rowIndex] && auditReport[sheet][rowIndex][colId] ? auditReport[sheet][rowIndex][colId] : [],\r\n            attached: false\r\n        }\r\n    }\r\n\r\n    getValue(){\r\n        return this.parseValue(this.state.value);\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { value } = e.target;\r\n\r\n        let errors = this.props.context.auditCell(value, this.props.column.colId, this.props.rowIndex);\r\n        this.setState({...this.state, value, errors});\r\n    }\r\n\r\n    afterGuiAttached = () => {\r\n        this.inputRef.current.focus();\r\n        this.inputRef.current.select();\r\n        setTimeout(() => {\r\n            this.setState({...this.state, attached: true})\r\n        }, 20);\r\n    }\r\n\r\n    handleClickAway = () => {\r\n        if(this.state.attached){\r\n            this.props.stopEditing();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n\r\n        return (\r\n            <div\r\n                style={{\r\n                    maxWidth: '175px',\r\n                    margin: '0 auto'\r\n                }}\r\n            >\r\n                <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                    <div>\r\n                        <input\r\n                            spellCheck='false'\r\n                            ref={this.inputRef}\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange}\r\n                            style={{\r\n                                backgroundColor: 'transparent',\r\n                                color: 'white',\r\n                                height: '28px',\r\n                                border: `1px solid black`,\r\n                                borderRadius: '2px',\r\n                                padding: '2px 6px',\r\n                                maxWidth: '100%'\r\n                            }}\r\n                        />\r\n                        {\r\n                            errors.map((err, i) => {\r\n                                return (\r\n                                    <p \r\n                                        key={i}\r\n                                        style={{\r\n                                            lineHeight: 1.2,\r\n                                            margin: '6px auto',\r\n                                            textAlign: 'left',\r\n                                            maxWidth: '100%',\r\n                                            whiteSpace: 'pre-wrap'\r\n                                        }}\r\n                                    >\r\n                                        {err}\r\n                                    </p>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DSCellEditor;","import React from 'react';\r\n\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nclass DSCellEditorTextArea extends React.Component {\r\n    constructor(props){\r\n        const { getAuditReport, sheet } = props.context;\r\n        const { rowIndex } = props;\r\n        const { colId } = props.column;\r\n        super(props);\r\n        let auditReport = getAuditReport();\r\n        this.inputRef = React.createRef();\r\n        this.parseValue = props.parseValue;\r\n        this.state = {\r\n            value: props.value || '',\r\n            errors: auditReport[sheet][rowIndex] && auditReport[sheet][rowIndex][colId] ? auditReport[sheet][rowIndex][colId] : [],\r\n            attached: false\r\n        }\r\n    }\r\n\r\n    getValue(){\r\n        return this.parseValue(this.state.value);\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { value } = e.target;\r\n\r\n        let errors = this.props.context.auditCell(value, this.props.column.colId, this.props.rowIndex);\r\n        this.setState({...this.state, value, errors});\r\n    }\r\n\r\n    afterGuiAttached = () => {\r\n        this.inputRef.current.focus();\r\n        setTimeout(() => {\r\n            this.setState({...this.state, attached: true})\r\n        }, 20);\r\n    }\r\n\r\n    handleClickAway = () => {\r\n        if(this.state.attached){\r\n            this.props.stopEditing();\r\n        }\r\n    }\r\n\r\n    isPopup = () => true;\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n        const { column, context } = this.props;\r\n\r\n        const rowCount = context.textAreaLookup[column.colId];\r\n\r\n        return (\r\n            <div\r\n                style={{\r\n                    margin: '0 auto',\r\n                    width: 'auto',\r\n                    padding: '12px',\r\n                    height: 'auto'\r\n                }}\r\n            >\r\n                <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                    <div>\r\n                        <textarea\r\n                            rows={rowCount}\r\n                            cols='70'\r\n                            spellCheck='false'\r\n                            ref={this.inputRef}\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange}\r\n                            style={{\r\n                                backgroundColor: 'transparent',\r\n                                color: 'white',\r\n                                border: `1px solid ${colors.primary}`,\r\n                                borderRadius: '2px',\r\n                                padding: '2px 6px',\r\n                            }}\r\n                        />\r\n                        {\r\n                            errors.map((err, i) => {\r\n                                return (\r\n                                    <p \r\n                                        key={i}\r\n                                        style={{\r\n                                            lineHeight: 1.2,\r\n                                            margin: '6px auto',\r\n                                            textAlign: 'left',\r\n                                            maxWidth: '100%',\r\n                                            whiteSpace: 'pre-wrap'\r\n                                        }}\r\n                                    >\r\n                                        {err}\r\n                                    </p>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DSCellEditorTextArea;","import React from 'react';\r\n\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nclass DSCellEditorSelect extends React.Component {\r\n    constructor(props){\r\n        const { getAuditReport, sheet } = props.context;\r\n        const { rowIndex } = props;\r\n        const { colId } = props.column;\r\n        let auditReport = getAuditReport();\r\n        super(props);\r\n        this.inputRef = React.createRef();\r\n        this.parseValue = props.parseValue;\r\n        let checkAgainst = new Set(props.context.selectOptions[colId]);\r\n        let value = props.value ? props.value.toLowerCase() : '';\r\n        value = checkAgainst.has(value) ? value : '';\r\n        this.state = {\r\n            value,\r\n            errors: auditReport[sheet][rowIndex] && auditReport[sheet][rowIndex][colId] ? auditReport[sheet][rowIndex][colId] : [],\r\n            attached: false\r\n        }\r\n    }\r\n\r\n    getValue(){\r\n        return this.parseValue(this.state.value);\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { value } = e.target;\r\n\r\n        this.setState({...this.state, value}, () => this.props.stopEditing());\r\n    }\r\n\r\n    afterGuiAttached = () => {\r\n        this.inputRef.current.focus();\r\n        setTimeout(() => {\r\n            this.setState({...this.state, attached: true})\r\n        }, 20);\r\n    }\r\n\r\n    handleClickAway = () => {\r\n        if(this.state.attached){\r\n            this.props.stopEditing();\r\n        }\r\n    }\r\n\r\n    isPopup = () => true;\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n        const { column, context } = this.props;       \r\n\r\n        let dynamicOpts = context.selectOptions[column.colId].map( (e, i) => (\r\n            <option\r\n                key={i + 1} \r\n                value={e.toLowerCase()}\r\n                className='ds-cell-editor-select-option'\r\n                style={{\r\n                    backgroundColor: '#184562',\r\n                }}\r\n            >\r\n                {e}\r\n            </option>\r\n        ));\r\n\r\n        let opts = [<option key={0} disabled style={{display: 'none'}} value=''></option>, ...dynamicOpts];\r\n\r\n        return (\r\n            <div\r\n                style={{\r\n                    margin: '0 auto',\r\n                    width: 'auto',\r\n                    padding: '12px',\r\n                    height: 'auto',\r\n                    maxWidth: '300px'\r\n                }}\r\n            >\r\n                <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                    <div>\r\n                        <select\r\n                            ref={this.inputRef}\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange}\r\n                            style={{\r\n                                backgroundColor: 'transparent',\r\n                                color: 'white',\r\n                                // height: '28px',\r\n                                border: `1px solid ${colors.primary}`,\r\n                                borderRadius: '2px',\r\n                                padding: '2px 6px',\r\n                                // maxWidth: '100%'\r\n                            }}\r\n                        >\r\n                            {opts}\r\n                        </select>\r\n                        {\r\n                            errors.map((err, i) => {\r\n                                return (\r\n                                    <p \r\n                                        key={i}\r\n                                        style={{\r\n                                            lineHeight: 1.2,\r\n                                            margin: '6px auto',\r\n                                            textAlign: 'left',\r\n                                            maxWidth: '100%',\r\n                                            whiteSpace: 'pre-wrap'\r\n                                        }}\r\n                                    >\r\n                                        {err}\r\n                                    </p>\r\n                                )\r\n                            })\r\n                        }\r\n\r\n                        <p \r\n                            style={{\r\n                                lineHeight: 1.2,\r\n                                margin: '10px auto',\r\n                                textAlign: 'left',\r\n                                maxWidth: '100%',\r\n                                whiteSpace: 'pre-wrap'\r\n                            }}\r\n                        >\r\n                            If you don't see the correct value on this list please contact us at: {'\\n'}<a style={{color:colors.primary, textDecoration: 'none'}} href=\"mailto:cmap-data-submission@uw.edu\">cmap-data-submission@uw.edu</a>.\r\n                        </p>\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DSCellEditorSelect;","import React from 'react';\r\n\r\nimport { AgGridReact } from 'ag-grid-react';\r\n\r\nimport DSCellEditor from './DSCellEditor';\r\nimport DSCellEditorTextArea from './DSCellEditorTextArea';\r\nimport DSCellEditorSelect from './DSCellEditorSelect';\r\n\r\nconst numberParser = ({newValue}) => isNaN(newValue) ? null : Number(newValue);\r\n\r\nconst columnDefs = {\r\n    data: [\r\n        {\r\n            headerName: 'Time',\r\n            field: 'time'\r\n        },\r\n    \r\n        {\r\n            headerName: 'Latitude',\r\n            field: 'lat',\r\n            valueParser: numberParser\r\n        },\r\n    \r\n        {\r\n            headerName: 'Longitude',\r\n            field: 'lon',\r\n            valueParser: numberParser\r\n        },\r\n    \r\n        {\r\n            headerName: 'Depth',\r\n            field: 'depth',\r\n            valueParser: numberParser\r\n        }\r\n    ],\r\n\r\n    dataset_meta_data: [\r\n        {\r\n            headerName: 'Short Name',\r\n            field: 'dataset_short_name',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_short_name',\r\n        },\r\n\r\n        {\r\n            headerName: 'Long Name',\r\n            field: 'dataset_long_name',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_long_name',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Version',\r\n            field: 'dataset_version',\r\n            autoHeight: true\r\n        },\r\n        \r\n\r\n        {\r\n            headerName: 'Release Date',\r\n            field: 'dataset_release_date',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'Make',\r\n            field: 'dataset_make',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Source',\r\n            field: 'dataset_source',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'Cruise Names',\r\n            field: 'cruise_names',\r\n            autoHeight: true,\r\n            tooltipField: 'cruise_names',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Distributor',\r\n            field: 'dataset_distributor',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'acknowledgement',\r\n            field: 'dataset_acknowledgement',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_acknowledgement',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        // {\r\n        //     headerName: 'Contact Email',\r\n        //     field: 'contact_email',\r\n        //     autoHeight: true\r\n        // },\r\n\r\n        {\r\n            headerName: 'History',\r\n            field: 'dataset_history',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_history',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },      \r\n\r\n        {\r\n            headerName: 'Description',\r\n            field: 'dataset_description',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_description',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'References',\r\n            field: 'dataset_references',\r\n            autoHeight: true,\r\n            tooltipField: 'dataset_references',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'climatology',\r\n            field: 'climatology',\r\n            valueParser: numberParser\r\n        },\r\n    ],\r\n\r\n    vars_meta_data: [\r\n        {\r\n            headerName: 'Short Name',\r\n            field: 'var_short_name',\r\n            autoHeight: true,\r\n            tooltipField: 'var_short_name'\r\n        },\r\n\r\n        {\r\n            headerName: 'Long Name',\r\n            field: 'var_long_name',\r\n            autoHeight: true,\r\n            tooltipField: 'var_long_name',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Sensor',\r\n            field: 'var_sensor',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Unit',\r\n            field: 'var_unit',\r\n            autoHeight: true\r\n        },\r\n\r\n        {\r\n            headerName: 'Spatial Resolution',\r\n            field: 'var_spatial_res',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Temporal Resolution',\r\n            field: 'var_temporal_res',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditorSelect'\r\n        },\r\n\r\n        {\r\n            headerName: 'Discipline',\r\n            field: 'var_discipline',\r\n            autoHeight: true,\r\n            cellEditor: 'DSCellEditor'\r\n        },\r\n\r\n        {\r\n            headerName: 'Visualize',\r\n            field: 'visualize',\r\n            autoHeight: true,\r\n            valueParser: numberParser\r\n        },\r\n\r\n        {\r\n            headerName: 'Keywords',\r\n            field: 'var_keywords',\r\n            autoHeight: true,\r\n            tooltipField: 'var_keywords',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n\r\n        {\r\n            headerName: 'Comment',\r\n            field: 'var_comment',\r\n            tooltipField: 'var_comment',\r\n            autoHeight: true,\r\n            tooltipField: 'var_comment',\r\n            cellEditor: 'DSCellEditorTextArea'\r\n        },\r\n    ]\r\n}\r\n\r\nclass ValidationGrid extends React.Component {\r\n\r\n    render = () => {\r\n        const { gridContext } = this.props;\r\n        \r\n        return (\r\n            <AgGridReact\r\n                singleClickEdit={true}\r\n                onModelUpdated={this.props.onModelUpdated}\r\n                columnDefs={columnDefs[gridContext.sheet]}\r\n                defaultColDef={this.props.defaultColumnDef}\r\n                rowData={this.props.rowData}\r\n                onGridReady={this.props.onGridReady}\r\n                // onGridSizeChanged={this.props.onGridSizeChanged}\r\n                suppressDragLeaveHidesColumns={true}\r\n                suppressMovableColumns={true}\r\n                enableCellTextSelection={true}\r\n                suppressContextMenu={true}\r\n                onCellValueChanged={this.props.handleCellValueChanged}\r\n                context={gridContext}\r\n                onGridSizeChanged={this.props.handleGridSizeChanged}\r\n                frameworkComponents={{\r\n                    DSCellEditor,\r\n                    DSCellEditorSelect,\r\n                    DSCellEditorTextArea\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nexport default ValidationGrid;","import { mean, deviation } from 'd3-array';\r\n\r\nlet checkSheets = (workbook) => {\r\n    let expected = ['data', 'vars_meta_data', 'dataset_meta_data'];\r\n    let missingSheets = [];\r\n\r\n    expected.forEach(e => {\r\n        if(!workbook.Sheets[e]){\r\n            missingSheets.push(e);\r\n        }\r\n    });\r\n    \r\n    return missingSheets;\r\n}\r\n\r\nlet checkVariableNameMismatches = (data, vars_meta_data, userVariables) => {\r\n    let shortNames = vars_meta_data.map(e => e.var_short_name);\r\n    return shortNames.filter(e => !userVariables.has(e));\r\n}\r\n\r\nlet checkEmptyColumns = (data, userVariables) => {\r\n    let emptyColumns = [];\r\n\r\n    userVariables.forEach(header => {\r\n        for(let i = 0; i < data.length; i++){\r\n            if(data[i][header] || data[i][header] === 0) return;\r\n        }\r\n    \r\n        emptyColumns.push(header);\r\n    });\r\n\r\n    return emptyColumns;    \r\n}\r\n\r\nlet checkMissingCruiseNames = (dataset_meta_data, vars_meta_data) => {\r\n    let hasInSitu = vars_meta_data.some(e => e.var_sensor && e.var_sensor.toLowerCase() == 'in-situ');\r\n    let isObservation = dataset_meta_data[0].dataset_make && dataset_meta_data[0].dataset_make.toLowerCase() == 'observation';\r\n    let shouldHaveCruise = Boolean(hasInSitu && isObservation);\r\n    let hasCruise = (dataset_meta_data[0]['cruise_names']);\r\n    return Boolean(shouldHaveCruise && !hasCruise);\r\n}\r\n\r\nlet checkRadians = (data) => {\r\n    let lonMin = data[0].lon;\r\n    let lonMax = data[0].lon;\r\n    let latMin = data[0].lat;\r\n    let latMax = data[0].lat;\r\n    let pi = Math.PI;\r\n\r\n    data.forEach(e => {\r\n        if(e.lon < lonMin) lonMin = e.lon;\r\n        if(e.lon > lonMax) lonMax = e.lon;\r\n        if(e.lat < latMin) latMin = e.lat;\r\n        if(e.lat > latMax) latMax = e.lat;\r\n    });\r\n\r\n    return Boolean(lonMin >= -pi && lonMax <= pi && latMin >= -pi/2 && latMax <= pi/2);\r\n}\r\n\r\nlet checkUniqueSpaceTime = (data) => {\r\n    let includeDepth = Boolean(data[0].depth || data[0].depth == 0);\r\n    let obj = {};\r\n    let result = []; //{row: Number, matched: Number}\r\n\r\n    try {\r\n        for(let i = 0; i < data.length; i++){\r\n            if(obj[data[i].time] === undefined){\r\n                obj[data[i].time] = {};\r\n            }\r\n    \r\n            if(obj[data[i].time][data[i].lat] === undefined){\r\n                obj[data[i].time][data[i].lat] = {};\r\n            }\r\n\r\n            if(!includeDepth){\r\n                if(obj[data[i].time][data[i].lat][data[i].lon] === undefined){\r\n                    obj[data[i].time][data[i].lat][data[i].lon] = i + 2;\r\n                }\r\n\r\n                else {\r\n                    result.push({row: i + 2, matched: obj[data[i].time][data[i].lat][data[i].lon]});\r\n                    if(result.length > 5) return result;\r\n                }\r\n            }\r\n\r\n            else {\r\n                if(obj[data[i].time][data[i].lat][data[i].lon] === undefined){\r\n                    obj[data[i].time][data[i].lat][data[i].lon] = {};\r\n                }\r\n\r\n                if(obj[data[i].time][data[i].lat][data[i].lon][data[i].depth] === undefined){\r\n                    obj[data[i].time][data[i].lat][data[i].lon][data[i].depth] = i + 2;\r\n                }\r\n\r\n                else {\r\n                    result.push({row: i + 2, matched: obj[data[i].time][data[i].lat][data[i].lon][data[i].depth]});\r\n                    if(result.length > 5) return result;\r\n                }\r\n            }    \r\n        }\r\n    }\r\n\r\n    catch(e) {\r\n        result = [];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nlet checkTypeConsistency = (data, userVariables) => {\r\n    // Look for mixture of strings and numbers\r\n    let result = [];\r\n\r\n    userVariables.forEach(e => {\r\n        let columnIsNumerical;\r\n        for(let i = 0; i < data.length; i++){\r\n            if(columnIsNumerical === undefined){\r\n                if(data[i][e] || data[i][e] == 0) columnIsNumerical = !isNaN(parseFloat(data[i][e]));\r\n            }\r\n\r\n            else if(columnIsNumerical && (data[i][e] || data[i][e] == 0)) {\r\n                if(isNaN(parseFloat(data[i][e]))){\r\n                    result.push({column: e, row: i + 2});\r\n                    break;\r\n                }\r\n            }\r\n\r\n            else if(data[i][e] || data[i][e] == 0){\r\n                if(!isNaN(parseFloat(data[i][e]))){\r\n                    result.push({column: e, row: i + 2});\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    return result;\r\n}\r\n\r\nlet allSameValueHelper = (data, col) => {\r\n    let sampleValue;\r\n    let i = 0;\r\n\r\n    while(sampleValue === undefined && i < data.length){\r\n        if(data[i][col] || data[i][col] == 0){\r\n            sampleValue = data[i][col];\r\n        }\r\n        i++;\r\n    }\r\n\r\n    for(let j = i; j < data.length; j++){\r\n        if(data[j][col] != sampleValue) return false;\r\n    }\r\n\r\n    return true;    \r\n}\r\n\r\nlet checkAllSameValue = (data, userVariables) => {\r\n    let result = [];\r\n\r\n    userVariables.forEach(e => {\r\n        let allSame = allSameValueHelper(data, e);\r\n        if(allSame) result.push(e);\r\n    })\r\n\r\n    return result;\r\n}\r\n\r\nlet checkDepthAllOrNone = (data) => {\r\n    let includeDepth = Boolean(data[0].depth || data[0].depth == 0);\r\n\r\n    for(let i = 0; i < data.length; i++){\r\n        if(includeDepth != Boolean(data[i].depth || data[i].depth == 0)){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nlet nanVariants = new Set(['nan', 'NaN', 'NAN', 'Nan', 'null', 'Null', 'NULL'])\r\nlet checkNans = (data, userVariables) => {\r\n    let result = []; // {row, column}\r\n\r\n    for(let i = 0; i < data.length; i++){\r\n        for(let j = 0; j < userVariables.length; j++){\r\n            if(nanVariants.has(data[i][userVariables[j]])){\r\n                result.push({row: i + 2, column: userVariables[j]});\r\n                if(result.length > 4) return result;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nlet outlierN = 5;\r\nlet checkOutliers = (data, userVariables) => {\r\n    let outliers = []; //{row, column}\r\n    let vectors = {};\r\n    userVariables.forEach(e => vectors[e] = []);\r\n\r\n    let stats = {};\r\n    userVariables.forEach(e => stats[e] = {});\r\n\r\n    data.forEach(row => {\r\n        userVariables.forEach(e => {\r\n            vectors[e].push(row[e]);\r\n        })\r\n    });\r\n\r\n    userVariables.forEach(e => {\r\n        stats[e].mean = mean(vectors[e]);\r\n        stats[e].deviation = deviation(vectors[e]);\r\n    })\r\n    \r\n    let keys = Object.keys(stats);\r\n\r\n    for(let i = 0; i < keys.length; i++){\r\n        if((stats[keys[i]].mean || stats[keys[i]].mean === 0) && (stats[keys[i]].deviation || stats[keys[i]].deviation === 0)){\r\n            for(let j = 0; j < data.length; j++){\r\n                if((data[j][keys[i]] ||  data[j][keys[i]] == 0) && Math.abs(data[j][keys[i]] - stats[keys[i]].mean) > outlierN * stats[keys[i]].deviation){\r\n                    outliers.push({row: j + 2, column: keys[i], value:data[j][keys[i]]});\r\n                    if(outliers.length > 9) return outliers;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return outliers;\r\n}\r\n\r\nlet checkRequiredCols = data => {\r\n    let missingCols = [];\r\n    let sample = data[0];\r\n\r\n    ['time', 'lat', 'lon'].forEach(e => {\r\n        if(!sample[e] && sample[e] !== 0 ) missingCols.push(e);\r\n    })\r\n\r\n    return missingCols;\r\n}\r\n\r\nexport default ({ data, dataset_meta_data, vars_meta_data, workbook }) => {\r\n    let errors = [];\r\n    let warnings = [];\r\n\r\n    let sheetCheck = checkSheets(workbook);\r\n    if(sheetCheck.length){\r\n        errors.push(`Workbook is missing required sheet${sheetCheck.length > 1 ? 's' : ''}: ${sheetCheck.join(', ')}.`);\r\n        return {errors, warnings};\r\n    }\r\n\r\n    if(!data.length){\r\n        errors.join.push(`Found no rows on the data sheet`);\r\n        return {errors, warnings};\r\n    }\r\n\r\n    let missingCols = checkRequiredCols(data);\r\n    if(missingCols.length){\r\n        errors.push(`Data sheet is missing required column${missingCols.length > 1 ? 's' : ''}: ${missingCols.join(', ')}`);\r\n    }\r\n\r\n    let fixedVariables = new Set(['time', 'lat', 'lon', 'depth']);        \r\n    let userVariables = new Set(Object.keys(data[0]).filter(key => !fixedVariables.has(key)));\r\n    \r\n    let variableNameMismatches = checkVariableNameMismatches(data, vars_meta_data, userVariables);\r\n    if(variableNameMismatches.length){\r\n        errors.push(`The following value${variableNameMismatches.length > 1 ? 's' : ''} ` +\r\n        `for var_short_name on the vars_meta_data sheet did not match a column header on the data sheet:\\n` +\r\n        `${variableNameMismatches.join(', ')}.`);\r\n    }\r\n\r\n    let emptyColumns = checkEmptyColumns(data, userVariables);\r\n    if(emptyColumns.length){\r\n        errors.push(`The column${emptyColumns.length > 1 ? 's' : ''} ${emptyColumns.join(', ')} contain${emptyColumns > 1 ? '' : 's'} no values.`);\r\n    }\r\n\r\n    if(!checkDepthAllOrNone(data)){\r\n        errors.push('The depth column on the data sheet must contain a value for every row, or be empty.');\r\n    }\r\n\r\n    if(checkMissingCruiseNames(dataset_meta_data, vars_meta_data)){\r\n        warnings.push(`The supplied values for make and sensor suggest that some or all of your data may ` + \r\n        `have been gathered on a scientific cruise, but no values were included for cruise_names in the dataset_meta_data sheet. ` +\r\n        `Including cruise names will improve the discoverability of your data.`);\r\n    }\r\n\r\n    if(checkRadians(data)){\r\n        warnings.push(`Values supplied for lat and lon indicate the possible use of radian as unit of measurement.` +\r\n        `Lat and lon must be in degrees north and degrees east, respectively.`);\r\n    }\r\n\r\n    let duplicates = checkUniqueSpaceTime(data);\r\n    if(duplicates.length){\r\n        warnings.push(`Found non-unique space and time value combinations` +\r\n            `${duplicates.length >= 5 ? '(Showing a maximum of 5 matches)' : ''}:\\n` +         \r\n            `${duplicates.map(e => `Row ${e.row} matched ${e.matched}`).join('\\n')}`);\r\n    }\r\n\r\n    let typeConsistency = checkTypeConsistency(data, userVariables);\r\n    if(typeConsistency.length){\r\n        warnings.push(`Found column${typeConsistency.length > 1 ? 's' : ''} with a mixture of string and numerical data types.` +\r\n        `\\n${typeConsistency.map(e => `Column ${e.column} contained a value of unexpected type in row ${e.row}`).join('\\n')}`)\r\n    }\r\n\r\n    let allSameValue = checkAllSameValue(data, userVariables);\r\n    if(allSameValue.length){\r\n        warnings.push(`Found column${allSameValue.length > 1 ? 's' : ''} on data sheet with all identical values: ${allSameValue.join(', ')}.`);\r\n    }\r\n\r\n    let containsNans = checkNans(data, userVariables);\r\n    if(containsNans.length){\r\n        errors.push(`NaN and null strings are not allowed. Cells should contain a value or be blank.` +\r\n            `${containsNans.length > 4 ? 'Showing a maximum of 5 matches.' : ''}` +\r\n            `Found illegal value${containsNans.length > 1 ? 's' : ''}` +\r\n            `at ${containsNans.map(e => `row ${e.row} column ${e.column}`).join('\\n')}.`)\r\n    }\r\n\r\n    let outliers = checkOutliers(data, userVariables);\r\n    if(outliers.length){\r\n        warnings.push(`Found possible data outlier${outliers.length > 1 ? 's' : ''} ` +\r\n            `${outliers.length > 9 ? '(Showing a maximum of 10 values)' : ''}:\\n` +\r\n            `${outliers.map(e => `Value ${e.value} in column ${e.column} row ${e.row}`).join('\\n')}`);\r\n    }\r\n\r\n    return {errors, warnings};\r\n};","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport XLSX from 'xlsx';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography, Paper, Button, Link, IconButton, Tooltip, List, ListItem, ListItemIcon, ListItemText, Divider, Tabs, Tab, Badge } from '@material-ui/core';\r\nimport { ErrorOutline, ArrowBack, ArrowForward, Done } from \"@material-ui/icons\";\r\n\r\nimport { uploadSubmission, retrieveMostRecentFile, storeSubmissionFile, checkSubmissionOptionsAndStoreFile, setUploadState } from '../../Redux/actions/dataSubmission';\r\nimport { snackbarOpen, setLoadingMessage } from '../../Redux/actions/ui';\r\n\r\nimport ValidationGrid from './ValidationGrid';\r\nimport LoginRequiredPrompt from '../User/LoginRequiredPrompt';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport formatDataSheet from '../../Utility/DataSubmission/formatDataSheet';\r\nimport formatDatasetMetadataSheet from '../../Utility/DataSubmission/formatDatasetMetadataSheet';\r\nimport formatVariableMetadataSheet from '../../Utility/DataSubmission/formatVariableMetadataSheet';\r\nimport generateAudits from '../../Utility/DataSubmission/generateAudits';\r\nimport workbookAudits from '../../Utility/DataSubmission/workbookAudits';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    submissionFile: state.submissionFile,\r\n    submissionOptions: state.submissionOptions,\r\n    submissionUploadState: state.submissionUploadState,\r\n    user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarOpen,\r\n    uploadSubmission,\r\n    setLoadingMessage,\r\n    retrieveMostRecentFile,\r\n    storeSubmissionFile,\r\n    checkSubmissionOptionsAndStoreFile\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '40vw',\r\n        // height: '30vh',\r\n        margin:'40px auto'\r\n    },\r\n\r\n    dragTarget: {\r\n        border: '1px solid red',\r\n        width: '100px',\r\n        height: '100px',\r\n        margin:'40px auto'\r\n    },\r\n\r\n    input: {\r\n        display: 'none'\r\n    },\r\n\r\n    button: {\r\n        color: 'white',\r\n        textTransform: 'none',\r\n        display: 'block',\r\n        maxWidth: '100px',\r\n        margin: '12px auto 0px auto'\r\n    },\r\n\r\n    needHelp: {\r\n        float: 'left',\r\n        color: 'white',\r\n        margin: '12px 0 0 12px',\r\n        letterSpacing: 'normal'\r\n    },\r\n\r\n    needHelpLink: {\r\n        letterSpacing: 'normal',\r\n        color: theme.palette.primary.main,\r\n        cursor: 'pointer'\r\n    },\r\n\r\n    fileSelectPaper: {\r\n        margin: '70px auto 24px auto',\r\n        maxWidth: '50vw',\r\n        padding: '16px',        \r\n        padding: '12px',\r\n        whiteSpace: 'pre-wrap'\r\n    },\r\n\r\n    workbookAuditPaper: {\r\n        margin: '70px auto 24px auto',\r\n        maxWidth: '50vw',\r\n        padding: '16px',        \r\n        padding: '12px',\r\n        minHeight: '110px',\r\n        whiteSpace: 'pre-wrap',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    addBorder: {\r\n        border: `1px dashed ${theme.palette.primary.main}`\r\n    },\r\n\r\n    fileName: {\r\n        color: theme.palette.primary.main,\r\n        letterSpacing: 'normal'\r\n    },\r\n\r\n    chooseNewFileLabel: {\r\n        display: 'inline',\r\n        position: 'absolute',\r\n        marginTop: '10px',\r\n        marginLeft : '14px',\r\n        fontSize: '11px',\r\n        borderRadius: '2px',\r\n        color: colors.primary,\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: 'rgba(0,0,0,.2)'\r\n        }\r\n    },\r\n\r\n    linkLabel: {\r\n        color: colors.primary,\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: 'rgba(0,0,0,.2)'\r\n        }\r\n    },\r\n\r\n    dataTable: {\r\n        maxWidth: '80vw',\r\n        margin: '0 auto 24px auto'\r\n    },\r\n\r\n    tableWrapper: {\r\n        maxWidth: '80vw',\r\n        margin: '24px auto'\r\n    },\r\n\r\n    submitButton: {\r\n        color: 'white',\r\n        margin: '24px 0 12px 0'\r\n    },\r\n\r\n    tabPaper: {\r\n        maxWidth: '80vw',\r\n        height: '70vh',\r\n        margin: '0 auto 24px auto'\r\n    },\r\n\r\n    errorStepperPaper: {\r\n        width: '80vw',\r\n        margin: '0 auto 24px auto'\r\n    },\r\n\r\n    currentlyViewingTypography: {\r\n        marginLeft: '4px'\r\n    },\r\n\r\n    ilb: {\r\n        display: 'inline-block'\r\n    },\r\n\r\n    findNextButton: {\r\n        textTransform: 'none',\r\n        marginBottom: '12px'\r\n    },\r\n\r\n    link: {\r\n        cursor: 'pointer'\r\n    },\r\n\r\n    currentSectionSpan: {\r\n        margin: '4px 8px 0 8px',\r\n        width: '200px',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    divider: {\r\n        margin: '8px 0'\r\n    },\r\n\r\n    workbookTab: {\r\n        textTransform: 'none'\r\n    },\r\n\r\n    submittedTypography: {\r\n        marginBottom: '12px'\r\n    }\r\n\r\n});\r\n\r\nconst _CleanupDummy = (props) => {\r\n    React.useEffect(() => {\r\n        return function cleanup() {\r\n            props.setUploadState(null);\r\n        };\r\n    });\r\n\r\n    return '';\r\n}\r\n\r\nconst CleanupDummy = connect(null, {setUploadState})(_CleanupDummy);\r\n\r\nconst textAreaLookup = {\r\n    var_keywords: 4,\r\n    var_comment: 5,\r\n    var_long_name: 3,\r\n    dataset_references: 8,\r\n    dataset_description: 14,\r\n    dataset_acknowledgement: 8,\r\n    cruise_names: 5,\r\n    dataset_long_name: 3,\r\n    dataset_history: 3,\r\n    dataset_distributor: 3\r\n};\r\n\r\nconst validationSteps = [\r\n    {\r\n        // before selecting file\r\n    },\r\n\r\n    {\r\n        label: 'Workbook Validation',\r\n        sheet: 'workbook'\r\n    },\r\n\r\n    {\r\n        label: 'Data Sheet',\r\n        sheet: 'data'\r\n    },\r\n\r\n    {\r\n        label: 'Dataset Metadata Sheet',\r\n        sheet: 'dataset_meta_data'\r\n    },\r\n\r\n    {\r\n        label: 'Variable Metadata Sheet',\r\n        sheet: 'vars_meta_data'\r\n    },\r\n\r\n    {\r\n        label: 'Submission',\r\n        sheet: 'submission'\r\n    }\r\n];\r\n\r\nlet orderedColumns = {\r\n    data: ['time', 'lat', 'lon', 'depth'],\r\n    dataset_meta_data: ['dataset_short_name', 'dataset_long_name', 'dataset_version', 'dataset_release_date', 'dataset_make', 'cruise_names', 'dataset_source', 'dataset_distributor', 'dataset_acknowledgement', //'contact_email'\r\n    , 'dataset_doi', 'dataset_history', 'dataset_description', 'dataset_references', 'climatology'],\r\n    vars_meta_data: ['var_short_name', 'var_long_name', 'var_unit', 'var_sensor', 'var_spatial_res', 'var_temporal_res', 'var_discipline', 'visualize',\t'var_keywords', 'var_comment']\r\n}\r\n\r\nconst generateSelectOptions = (reduxStoreOptions) => ({\r\n    var_temporal_res: reduxStoreOptions.Temporal_Resolution,\r\n    var_discipline: reduxStoreOptions.Study_Domain,\r\n    var_sensor: reduxStoreOptions.Sensor,\r\n    var_spatial_res: reduxStoreOptions.Spatial_Resolution,\r\n    dataset_make: reduxStoreOptions.Make\r\n});\r\n\r\nconst StyledBadgeRed = withStyles((theme) => ({\r\n    badge: {\r\n        right: -11,\r\n        top: 1,\r\n        backgroundColor: 'rgba(255, 0, 0, .6)'\r\n    },\r\n}))(Badge);\r\n\r\nconst StyledBadgeGreen = withStyles((theme) => ({\r\n    badge: {\r\n        right: -11,\r\n        top: 1,\r\n        backgroundColor: 'green'\r\n    },\r\n}))(Badge);\r\n\r\nlet fileSizeTooLargeDummyState = {\r\n    auditReport: {\r\n        workbook: {\r\n            errors: ['This workbook exceeds the file size limit of this application. Please contact our data curation team at cmap-data-submission@uw.edu for assistance.'],\r\n            warnings: []\r\n        },\r\n        data: [],\r\n        dataset_meta_data: [],\r\n        vars_meta_data: []\r\n    },\r\n    validationStep: 1,\r\n};\r\n\r\nclass ValidationTool extends React.Component {\r\n\r\n    checkCellStyle = (params) => {\r\n        let row = params.node.childIndex;\r\n        let colId = params.column.colId; \r\n        let { sheet } = params.context;\r\n\r\n        let styles = {\r\n            //TODO fix view of long strings as below but better\r\n            // whiteSpace: 'pre-wrap !important',\r\n            // paddingLeft: '10px',\r\n            // paddingRight: '10px',\r\n            // overflow: 'visible'\r\n        };\r\n        \r\n        if(this.state.auditReport && this.state.auditReport[sheet] && this.state.auditReport[sheet][row] && this.state.auditReport[sheet][row][colId]){\r\n            styles.boxShadow = 'inset 0 0 3px 2px rgba(255, 0, 0, .5)'\r\n        }\r\n\r\n        return styles;\r\n    }\r\n\r\n    state = {\r\n        validationStep: 0,\r\n        file: null,\r\n        data: null,\r\n        dataset_meta_data: null,\r\n        vars_meta_data: null,\r\n        auditReport: null,\r\n        defaultColumnDef: {\r\n            menuTabs: [],\r\n            resizable: true,\r\n            editable: true,\r\n            cellStyle: this.checkCellStyle,\r\n            cellEditor: 'DSCellEditor',\r\n            width: 270\r\n        }\r\n    }\r\n\r\n    handleGridSizeChanged = () => {\r\n        if(this.state.validationStep === 2){\r\n            this.gridApi.sizeColumnsToFit()\r\n        }\r\n    }\r\n\r\n    handleDragOver = (e) => {\r\n        e.preventDefault();\r\n    }\r\n\r\n    auditCell = (value, col, row) => {\r\n        let cellAudit = [];\r\n        let auditFuncs = this.audits[col];\r\n    \r\n        if(auditFuncs){\r\n            auditFuncs.forEach(func => {\r\n                let result = func(value, row);\r\n    \r\n                if(result) {\r\n                    cellAudit.push(result);\r\n                }\r\n            });\r\n        }\r\n    \r\n        return cellAudit;\r\n    }\r\n\r\n    auditWorkbook = (params) => {\r\n        return workbookAudits(params);\r\n    }\r\n\r\n    auditRows = (rows) => {\r\n        let audit = [];\r\n\r\n        rows.forEach((row, i) => {\r\n            let rowAudit = {};\r\n\r\n            let columns = Object.keys(row);\r\n\r\n            columns.forEach((col) => {\r\n                let cellAudit = this.auditCell(row[col], col, i);\r\n\r\n                if(cellAudit.length){\r\n                    rowAudit[col] = cellAudit;\r\n                }\r\n            });\r\n\r\n            if(Object.keys(rowAudit).length){\r\n                audit[i] = rowAudit;\r\n            }\r\n        });\r\n\r\n        return audit;\r\n    }\r\n\r\n    // Takes a workbook and returns an audit report\r\n    performAudit = (info) => {\r\n        let report = {\r\n            workbook: this.auditWorkbook(info),\r\n            data: this.auditRows(info.data),\r\n            dataset_meta_data: this.auditRows(info.dataset_meta_data),\r\n            vars_meta_data: this.auditRows(info.vars_meta_data),\r\n        };\r\n\r\n        return report;\r\n    }\r\n\r\n    handleResetState = () => {\r\n        this.props.storeSubmissionFile(null);\r\n        this.props.history.push({ pathname: '/datasubmission/validationtool', query: {} });\r\n        this.setState({\r\n            ...this.state,\r\n            data: null,\r\n            dataset_meta_data: null,\r\n            vars_meta_data: null,\r\n            validationStep: 0\r\n        });\r\n    }\r\n\r\n    handleChangeValidationStep = (validationStep) => {\r\n        this.setState({...this.state, validationStep}, () => {\r\n            if(this.gridApi && validationStep == 2) this.gridApi.sizeColumnsToFit()\r\n        });\r\n    }\r\n    \r\n    handleCellValueChanged = ({rowIndex, newValue, column, node, context, oldValue}) => {\r\n        if(oldValue === newValue) return;\r\n\r\n        let { sheet } = context;\r\n\r\n        let newAudit = this.auditCell(newValue, column.colId, rowIndex);\r\n        \r\n        let auditReport = {...this.state.auditReport};\r\n\r\n        if(!auditReport[sheet][rowIndex]) auditReport[sheet][rowIndex] = {};\r\n\r\n        auditReport[sheet] = [...this.state.auditReport[sheet]];\r\n\r\n        if(newAudit.length){\r\n            auditReport[sheet][rowIndex][column.colId] = newAudit\r\n        } else delete auditReport[sheet][rowIndex][column.colId];\r\n\r\n        if(!Object.keys(auditReport[sheet][rowIndex]).length) {\r\n            auditReport[sheet][rowIndex] = null;\r\n        }\r\n\r\n        let updated = [...this.state[sheet].slice(0, rowIndex), node.data, ...this.state[sheet].slice(rowIndex + 1)];\r\n        this.setState({...this.state, [sheet]: updated, auditReport}, () => {\r\n            this.gridApi.redrawRows();\r\n        });\r\n    }\r\n\r\n    handleReadFile = (file) => {\r\n        var reader = new FileReader();\r\n        if(file.size > 150000000){\r\n            this.setState({...this.state, ...fileSizeTooLargeDummyState}, () => this.props.setLoadingMessage(''));\r\n            return;\r\n        }\r\n        \r\n        reader.onload = (progressEvent) => {\r\n            var readFile = new Uint8Array(progressEvent.target.result);\r\n            var workbook = XLSX.read(readFile, {type: 'array'});\r\n            let _data = XLSX.utils.sheet_to_json(workbook.Sheets['data'], {defval: null});\r\n            let data = _data ? formatDataSheet(_data, workbook) : _data;\r\n\r\n            let _dataset_meta_data = XLSX.utils.sheet_to_json(workbook.Sheets['dataset_meta_data'], {defval: null});\r\n            let dataset_meta_data = _dataset_meta_data ? formatDatasetMetadataSheet(_dataset_meta_data, workbook) : _dataset_meta_data;\r\n            \r\n            let _vars_meta_data = XLSX.utils.sheet_to_json(workbook.Sheets['vars_meta_data'], {defval: null});\r\n            let vars_meta_data = _vars_meta_data ? formatVariableMetadataSheet(_vars_meta_data) : _vars_meta_data;\r\n\r\n            var auditReport = this.performAudit({workbook, data, dataset_meta_data, vars_meta_data});\r\n\r\n            let validationStep = (auditReport.workbook.errors.length || auditReport.workbook.warnings.length) ? 1 : 2;\r\n            this.setState({...this.state, data, dataset_meta_data, vars_meta_data, auditReport, validationStep}, () => this.props.setLoadingMessage(''));\r\n        }\r\n\r\n        reader.readAsArrayBuffer(file);        \r\n    }\r\n\r\n    handleDrop = (e) => {\r\n        e.preventDefault();        \r\n        var file = e.dataTransfer.items[0].getAsFile();\r\n        this.props.setLoadingMessage('Reading Workbook');\r\n        this.props.checkSubmissionOptionsAndStoreFile(file);\r\n    }\r\n\r\n    handleFileSelect = (e) => {\r\n        var file = e.target.files[0];\r\n        if(!file) return;\r\n        this.props.setLoadingMessage('Reading Workbook');\r\n        this.props.checkSubmissionOptionsAndStoreFile(file);\r\n        e.target.value = null;\r\n    }\r\n\r\n    handleUploadSubmission = () => {\r\n        let workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.data), 'data');\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.dataset_meta_data), 'dataset_meta_data');\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.vars_meta_data), 'vars_meta_data');\r\n        \r\n        let wbArray = XLSX.write(workbook, {bookType:'xlsx', type:'array'});\r\n        let file = new Blob([wbArray]);\r\n        file.name = `${this.state.dataset_meta_data[0].dataset_short_name}.xlsx`;\r\n        this.props.uploadSubmission({file, datasetName: this.state.dataset_meta_data[0].dataset_short_name});\r\n    }\r\n\r\n    handleDownload = () => {\r\n        this.props.setLoadingMessage('Downloading');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => this.props.setLoadingMessage(''));\r\n        }, 50)\r\n        let workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.data), 'data');\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.dataset_meta_data), 'dataset_meta_data');\r\n        XLSX.utils.book_append_sheet(workbook, XLSX.utils.json_to_sheet(this.state.vars_meta_data), 'vars_meta_data');\r\n        XLSX.writeFile(workbook, this.state.dataset_meta_data[0].dataset_short_name + '.xlsx');\r\n    }\r\n\r\n    onGridReady = (params) => {\r\n        this.gridApi = params.api;\r\n        this.columnApi = params.columnApi;\r\n        if(this.state.validationStep === 2) this.gridApi.sizeColumnsToFit();\r\n    }\r\n\r\n    onModelUpdated = (params) => {\r\n        if(this.gridApi && validationSteps[this.state.validationStep].sheet === 'data'){\r\n            this.gridApi.sizeColumnsToFit();\r\n        }\r\n    }\r\n\r\n    scrollGridTo = (index) => {\r\n        this.gridApi.ensureIndexVisible(index, 'middle')\r\n    }\r\n\r\n    //TODO clean this up when it's not late at night\r\n    handleFindNext = () => {\r\n        let lastFocused = this.gridApi.getFocusedCell();\r\n        let { sheet } = validationSteps[this.state.validationStep];\r\n        let { auditReport } = this.state;\r\n        \r\n        let cols = orderedColumns[sheet];\r\n        var startRow = lastFocused ? lastFocused.rowIndex : -1;\r\n        var startColIndex = lastFocused ? cols.findIndex(e => e === lastFocused.column.colId) : 0;\r\n\r\n        // Search the remaining columns in focused row\r\n        if(lastFocused){\r\n            for(let i = startColIndex + 1; i < cols.length && i > -1; i++){\r\n                if(auditReport[sheet][startRow] && auditReport[sheet][startRow][cols[i]]){\r\n                    this.gridApi.ensureColumnVisible(cols[i]);\r\n                    this.gridApi.startEditingCell({\r\n                        rowIndex: startRow,\r\n                        colKey: cols[i]\r\n                    });\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Start from startRow + 1, end at beginning of startRow\r\n        for(let i = startRow + 1; i != startRow; i++){\r\n            if(auditReport[sheet][i]){\r\n                for(let j = 0; j < cols.length; j++){\r\n                    if(auditReport[sheet][i][cols[j]]){\r\n                        this.gridApi.ensureColumnVisible(cols[j]);\r\n                        this.gridApi.startEditingCell({\r\n                            rowIndex: i,\r\n                            colKey: cols[j]\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(i === auditReport[sheet].length) i = -1;\r\n        }\r\n\r\n        // Search the rest of start row\r\n        if(lastFocused){\r\n            for(let i = 0; i <= startColIndex && i < cols.length; i++){\r\n                if(auditReport[sheet][startRow] && auditReport[sheet][startRow][cols[i]]){\r\n                    this.gridApi.ensureColumnVisible(cols[i]);\r\n                    this.gridApi.startEditingCell({\r\n                        rowIndex: startRow,\r\n                        colKey: cols[i]\r\n                    });\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    countErrors = () => {\r\n        let counts = {\r\n            workbook: this.state.auditReport.workbook.errors.length,\r\n            data: 0,\r\n            dataset_meta_data: 0,\r\n            vars_meta_data: 0\r\n        };        \r\n\r\n        this.state.auditReport['data'].forEach(e => {\r\n            if(e){\r\n                counts.data += Object.keys(e).length;\r\n            }\r\n        })\r\n\r\n        this.state.auditReport['dataset_meta_data'].forEach(e => {\r\n            if(e){\r\n                counts.dataset_meta_data += Object.keys(e).length;\r\n            }\r\n        })\r\n\r\n        this.state.auditReport['vars_meta_data'].forEach(e => {\r\n            if(e){\r\n                counts.vars_meta_data += Object.keys(e).length;\r\n            }\r\n        })\r\n\r\n        return counts;\r\n    }\r\n\r\n    handleClickTab = (event, newValue) => {\r\n        this.setState({...this.state, validationStep: newValue});\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let submissionID = new URLSearchParams(window.location.search).get('submissionID');\r\n        if(submissionID){\r\n            this.props.retrieveMostRecentFile(submissionID);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.storeSubmissionFile(null);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n        if((!prevProps.submissionOptions && this.props.submissionOptions) || (!this.audits && this.props.submissionOptions)){\r\n            this.audits = generateAudits(this.props.submissionOptions);\r\n        }\r\n        if(prevProps.submissionFile !== this.props.submissionFile && this.props.submissionFile){\r\n            this.handleReadFile(this.props.submissionFile);\r\n        }\r\n\r\n    }\r\n\r\n    render = () => {\r\n        if(!this.props.user) return <LoginRequiredPrompt/>\r\n\r\n        const { classes } = this.props;\r\n        const { validationStep } = this.state;\r\n\r\n        const datasetName = this.state.dataset_meta_data && this.state.dataset_meta_data.length ? this.state.dataset_meta_data[0].dataset_short_name : null;\r\n\r\n        const sheet = validationSteps[validationStep].sheet;\r\n\r\n        var errorCount;\r\n\r\n        if(validationStep > 0 && validationStep < 5){\r\n            errorCount = this.countErrors();\r\n        }       \r\n\r\n        return (\r\n            <React.Fragment>\r\n\r\n                <Typography className={classes.needHelp}>\r\n                    Need help? \r\n                    <Link \r\n                        href='https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx' \r\n                        download='datasetTemplate.xlsx' \r\n                        className={classes.needHelpLink}\r\n                    >\r\n                        &nbsp;Download\r\n                    </Link>\r\n                    &nbsp;a blank template, or view the <Link className={classes.needHelpLink} component={RouterLink} to='/datasubmission/guide'>Data Submission Guide</Link>.\r\n                </Typography>\r\n\r\n                <Paper elevation={2} className={`${classes.fileSelectPaper} ${!this.props.submissionFile && classes.addBorder}`} onDragOver={this.handleDragOver} onDrop={this.handleDrop}>\r\n                    {\r\n                        this.props.submissionFile ?\r\n                        <React.Fragment>\r\n\r\n                            <Typography variant='h6' className={classes.currentlyViewingTypography}>\r\n\r\n                                {datasetName ? `${datasetName}` : ''} \r\n                                <label htmlFor=\"select-file-input\" className={classes.chooseNewFileLabel}>\r\n                                    Select a Different File\r\n                                </label> {'\\n'}\r\n                            </Typography>\r\n\r\n                            <div>\r\n                                <Tooltip title='Previous Section'>\r\n                                    <div className={classes.ilb}>\r\n                                        <IconButton \r\n                                            size='small'\r\n                                            onClick={() => this.handleChangeValidationStep(this.state.validationStep - 1)}\r\n                                            disabled={Boolean(this.state.validationStep <= 1)}\r\n                                        >\r\n                                            <ArrowBack/>\r\n                                        </IconButton>\r\n                                    </div>\r\n                                </Tooltip>\r\n\r\n                                <span className={classes.currentSectionSpan}>{validationSteps[validationStep].label}</span>\r\n\r\n                                <Tooltip title='Next Section'>\r\n                                    <div className={classes.ilb}>\r\n                                        <IconButton \r\n                                            size='small'\r\n                                            onClick={() => this.handleChangeValidationStep(this.state.validationStep + 1)}\r\n                                            disabled={\r\n                                                Boolean(\r\n                                                    validationStep >= 5 || \r\n                                                    (validationStep === 1 && errorCount.workbook) ||\r\n                                                    (validationStep === 4 && (\r\n                                                        errorCount.data > 0 || \r\n                                                        errorCount.dataset_meta_data > 0 ||\r\n                                                        errorCount.vars_meta_data > 0\r\n                                                    ))\r\n                                                )\r\n                                            }\r\n                                        >\r\n                                            <ArrowForward/>\r\n                                        </IconButton>\r\n                                    </div>\r\n                                </Tooltip>\r\n                            </div>\r\n                        </React.Fragment>\r\n\r\n                        :\r\n\r\n                        <React.Fragment>\r\n                            <Typography variant='h5'>\r\n                                To begin drag or \r\n\r\n                                <label htmlFor=\"select-file-input\">\r\n                                    <Button variant='contained' color=\"primary\" component=\"span\" className={classes.button}>\r\n                                        Select File\r\n                                    </Button>\r\n                                </label>                                \r\n                            </Typography>\r\n\r\n                            \r\n                        </React.Fragment>\r\n                    }\r\n\r\n                    {\r\n                        (validationStep > 1 && validationStep < 5) &&\r\n                        <React.Fragment>\r\n                            <Divider className={classes.divider}/>\r\n                            {\r\n                                Boolean(errorCount[sheet] > 0) ?\r\n\r\n                                <Typography variant='body2'>\r\n                                    <ErrorOutline style={{color: 'rgba(255, 0, 0, .7)', margin: '0 2px -5px 0', fontSize: '1.4em'}}/> \r\n                                    We found {errorCount[sheet]} cell{errorCount[sheet] > 1 ? 's' : ''} with errors on this sheet. \r\n                                    <span className={classes.linkLabel} onClick={this.handleFindNext}> Find Errors</span>\r\n                                </Typography>\r\n\r\n                                :\r\n\r\n                                Boolean(sheet === 'vars_meta_data' && (errorCount['data'] || errorCount['dataset_meta_data'])) ?\r\n\r\n                                <Typography variant='body2'>\r\n                                    <ErrorOutline style={{color: 'rgba(255, 0, 0, .7)', margin: '0 2px -5px 0', fontSize: '1.4em'}}/> \r\n                                    Please correct errors from the previous sheets before moving forward. \r\n                                </Typography>\r\n                                \r\n                                :\r\n                                \r\n                                <Typography variant='body2'>\r\n                                    <Done style={{color: colors.primary, margin: '0 2px -5px 0', fontSize: '1.4em'}}/>All set! Click the arrow above to move to the next step.\r\n                                </Typography>\r\n                            }\r\n                        </React.Fragment>\r\n                    }\r\n                </Paper>\r\n\r\n                {Boolean(validationStep === 1) &&\r\n                    <Paper elevation={2} className={`${classes.workbookAuditPaper}`}>\r\n                        <Typography style={{marginBottom: '24px'}}>\r\n                            {\r\n                                Boolean(this.state.auditReport.workbook.errors.length) &&\r\n\r\n                                <React.Fragment>\r\n                                    One or more parts of your submission did not match CMAP's requirements. \r\n                                    Please review the information below, update your workbook, \r\n                                    and <label className={classes.linkLabel} htmlFor='select-file-input'>try again</label>.\r\n                                </React.Fragment>\r\n                            }\r\n\r\n                            {\r\n                                Boolean(!this.state.auditReport.workbook.errors.length && this.state.auditReport.workbook.warnings.length) &&\r\n                                'We found some potential issues with your submission.'\r\n                            }\r\n\r\n                            {\r\n                                Boolean(this.state.auditReport.workbook.warnings.length) &&\r\n                                    <React.Fragment>\r\n                                        {'\\n'}\r\n                                        {'\\n'}\r\n                                        Messages marked with a yellow icon\r\n                                        <ErrorOutline style={{color: 'rgba(255, 255, 0, .7)', fontSize: '18px', margin: '0 3px -4px 3px'}}/>\r\n                                        are warnings. These should be reviewed and corrected if necessary, but will not prevent you \r\n                                        from moving to the next validation step.\r\n                                    </React.Fragment>\r\n                            }\r\n                        </Typography>\r\n\r\n                        {\r\n\r\n                        <List dense={true}>\r\n                            {\r\n                                this.state.auditReport.workbook.errors.map((e,i) => (\r\n                                    <ListItem key={i}>\r\n                                        <ListItemIcon style={{color: 'rgba(255, 0, 0, .7)'}}>\r\n                                            <ErrorOutline/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            primary={e}\r\n                                        />\r\n                                    </ListItem>\r\n                                ))\r\n                            }\r\n\r\n                            {\r\n                                this.state.auditReport.workbook.warnings.map((e,i) => (\r\n                                    <ListItem key={i}>\r\n                                        <ListItemIcon style={{color: 'rgba(255, 255, 0, .7)'}}>\r\n                                            <ErrorOutline/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            primary={e}\r\n                                        />\r\n                                    </ListItem>\r\n                                    ))\r\n                            }\r\n                            \r\n                        </List>\r\n                        }\r\n                    </Paper>\r\n                }\r\n\r\n                {Boolean((this.state.data && this.state.data.length) && (validationStep >= 2 && validationStep < 5)) &&\r\n                    <React.Fragment>\r\n\r\n                        <Paper elevation={2} className={classes.tabPaper + \" ag-theme-material\"}>\r\n                            <Tabs value={validationStep} onChange={this.handleClickTab}>\r\n                                <Tab \r\n                                    value={2}\r\n                                    label={ \r\n                                        errorCount['data'] > 0 ?\r\n                                        <StyledBadgeRed badgeContent={errorCount['data']}>Data</StyledBadgeRed>\r\n                                        :                              \r\n                                        <StyledBadgeGreen badgeContent={'\\u2713'}>Data</StyledBadgeGreen>\r\n                                    } \r\n                                    className={classes.workbookTab}\r\n                                />\r\n\r\n                                <Tab \r\n                                    value={3}\r\n                                    label={ \r\n                                        errorCount['dataset_meta_data'] > 0 ?\r\n                                        <StyledBadgeRed badgeContent={errorCount['dataset_meta_data']}>Dataset Metadata</StyledBadgeRed>\r\n                                        :                              \r\n                                        <StyledBadgeGreen badgeContent={'\\u2713'}>Dataset Metadata</StyledBadgeGreen>\r\n                                    } \r\n                                    className={classes.workbookTab}\r\n                                />\r\n\r\n                                <Tab \r\n                                    value={4}\r\n                                    label={ \r\n                                        errorCount['vars_meta_data'] > 0 ?\r\n                                        <StyledBadgeRed badgeContent={errorCount['vars_meta_data']}>Variable Metadata</StyledBadgeRed>\r\n                                        :                              \r\n                                        <StyledBadgeGreen badgeContent={'\\u2713'}>Variable Metadata</StyledBadgeGreen>\r\n                                    } \r\n                                    className={classes.workbookTab}\r\n                                />\r\n                            </Tabs>\r\n\r\n                            <div style={{height: 'calc(100% - 48px)'}}>\r\n                                <ValidationGrid\r\n                                    onGridReady={this.onGridReady}\r\n                                    rowData={this.state[sheet]}\r\n                                    defaultColumnDef={this.state.defaultColumnDef}\r\n                                    handleCellValueChanged={this.handleCellValueChanged}\r\n                                    handleGridSizeChanged={this.handleGridSizeChanged}\r\n                                    gridContext={{\r\n                                        sheet, \r\n                                        getAuditReport: () => this.state.auditReport, \r\n                                        textAreaLookup, \r\n                                        selectOptions: generateSelectOptions(this.props.submissionOptions),\r\n                                        auditCell: this.auditCell\r\n                                    }}\r\n                                    onModelUpdated={this.onModelUpdated}\r\n                                />\r\n                            </div>\r\n                        </Paper>\r\n                    </React.Fragment>\r\n                }\r\n\r\n                {Boolean(validationStep === 5) && \r\n                    <Paper elevation={2} className={`${classes.fileSelectPaper}`}>\r\n                        <CleanupDummy/>                        \r\n                        {\r\n                            this.props.submissionUploadState === states.succeeded ?\r\n                                <React.Fragment>\r\n                                    <Typography className={classes.submittedTypography}>\r\n                                        Your dataset has been successfully submitted, and will be reviewed by our data curation team.\r\n                                    </Typography>\r\n\r\n                                    <Typography className={classes.submittedTypography}>\r\n                                        You can view the status of your submission <Link style={{display: 'inline-block'}} className={classes.needHelpLink} component={RouterLink} to={`/datasubmission/userdashboard?datasetName=${encodeURI(datasetName)}`}>here</Link>.\r\n                                    </Typography>\r\n\r\n                                    <Typography className={classes.submittedTypography}>                                    \r\n                                        If you made any changes during this process you can download the edited workbook <Link style={{display: 'inline-block'}} className={classes.needHelpLink} onClick={this.handleDownload} component='span'>here</Link>.\r\n                                    </Typography>\r\n\r\n                                    <Typography className={classes.submittedTypography}>\r\n                                        A detailed description of remaining steps in the submission process can be found in the <Link style={{display: 'inline-block'}} className={classes.needHelpLink} component={RouterLink} to='/datasubmission/guide'>Data Submission Guide</Link>.\r\n                                    </Typography>\r\n                                </React.Fragment>\r\n\r\n                            :\r\n\r\n                            this.props.submissionUploadState === states.failed ?\r\n\r\n                            <React.Fragment>\r\n                                <List>\r\n                                    <ListItem>\r\n                                        <ListItemIcon style={{color: 'rgba(255, 0, 0, .7)'}}>\r\n                                            <ErrorOutline/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            primary=\"A dataset with this name has already been submitted by another user. If you believe you're receiving this message in error please contact us at cmap-data-submission@uw.edu.\"\r\n                                        />\r\n                                    </ListItem>\r\n                                </List>\r\n                                    \r\n                                <Typography className={classes.submittedTypography}>                                    \r\n                                    If you made any changes during this process you can download the edited workbook <Link style={{display: 'inline-block'}} className={classes.needHelpLink} onClick={this.handleDownload} component='span'>here</Link>.\r\n                                </Typography>\r\n\r\n                            </React.Fragment>\r\n\r\n                            :\r\n\r\n                            <React.Fragment>\r\n                                <Typography>\r\n                                    You've completed dataset validation! Click the button below to upload your workbook.\r\n                                </Typography>\r\n\r\n                                <Button variant='contained' color='primary' className={classes.submitButton} onClick={this.handleUploadSubmission}>\r\n                                    Submit\r\n                                </Button>\r\n                            </React.Fragment>\r\n                        }\r\n                    </Paper>\r\n                }\r\n                <input\r\n                    onChange={this.handleFileSelect}\r\n                    className={classes.input}\r\n                    accept='.xlsx'\r\n                    id=\"select-file-input\"\r\n                    type=\"file\"\r\n                />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(ValidationTool)));\r\n\r\n//Undo / redo\r\n// https://www.ag-grid.com/javascript-grid-undo-redo-edits/\r\n\r\n","export default (data, workbook) => {\r\n\r\n    try {\r\n        let sample = data[0].time;\r\n\r\n        // Test sample row for correct format\r\n        if(/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\\\.[0-9]+)?(Z)?$/.test(sample)){\r\n        }\r\n\r\n        else {\r\n            let is1904 = !!(((workbook.Workbook||{}).WBProps||{}).date1904);\r\n    \r\n            let type = typeof sample;\r\n    \r\n            if(type === 'number') {\r\n                if(is1904){\r\n                    data.forEach(e => {\r\n                        e.time = new Date(((e.time - (25567))*86400*1000) + 1000 * 60 * 60 * 24 * 365 * 4).toISOString().slice(0, -5);\r\n                    })\r\n                }\r\n        \r\n                else {\r\n                    data.forEach(e => {\r\n                        e.time = new Date(((e.time - (25567))*86400*1000)).toISOString().slice(0, -5);\r\n                    })\r\n                }\r\n        \r\n            }\r\n        \r\n            else {\r\n                data.forEach(e => {\r\n                    e.time = new Date(e.time).toISOString().slice(0, -5);\r\n                })\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    catch(e){\r\n        console.log('Caught while formatting data');\r\n    }\r\n\r\n    let cols = Object.keys(data[0]);\r\n    let keysContaining__EMPTY = [];\r\n    cols.forEach(e => {\r\n        if(e.indexOf('__EMPTY') !== -1) keysContaining__EMPTY.push(e);\r\n    })\r\n\r\n    if(keysContaining__EMPTY.length){\r\n        data.forEach(e => {\r\n            keysContaining__EMPTY.forEach(key => {\r\n                delete e[key];\r\n            })\r\n        })\r\n    }\r\n\r\n    return data;\r\n}","export default (metadata, workbook) => {\r\n    try {\r\n        var sample = metadata[0];\r\n        var type = typeof sample.dataset_release_date;\r\n\r\n        var is1904 = !!(((workbook.Workbook||{}).WBProps||{}).date1904);\r\n\r\n        if(type === 'number') {\r\n            if(is1904){\r\n                sample.dataset_release_date = new Date(((sample.dataset_release_date - (25567))*86400*1000) + 1000 * 60 * 60 * 24 * 365 * 4).toISOString().slice(0, -14);\r\n            }\r\n    \r\n            else {\r\n                sample.dataset_release_date = new Date(((sample.dataset_release_date - (25567))*86400*1000)).toISOString().slice(0, -14);\r\n            }    \r\n        }\r\n    \r\n        else {\r\n            sample.dataset_release_date = new Date(sample.dataset_release_date).toISOString().slice(0, -14);\r\n        }\r\n    }\r\n\r\n    catch{\r\n        \r\n    }\r\n\r\n    let cols = Object.keys(metadata[0]);\r\n    let keysContaining__EMPTY = [];\r\n    cols.forEach(e => {\r\n        if(e.indexOf('__EMPTY') !== -1) keysContaining__EMPTY.push(e);\r\n    })\r\n\r\n    if(keysContaining__EMPTY.length){\r\n        metadata.forEach(e => {\r\n            keysContaining__EMPTY.forEach(key => {\r\n                delete e[key];\r\n            })\r\n        })\r\n    }\r\n\r\n    return metadata;\r\n}\r\n\r\n// Format must match 2016-04-21T15:22:00\r\n\r\n// const localDateToString = (date) => {\r\n//     let year = date.getFullYear();\r\n//     let month = date.getMonth() + 1;\r\n//     let day = date.getDate()\r\n\r\n//     let nYear = year.toString();\r\n//     let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n//     let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n//     return nYear + '-' + nMonth + '-' + nDay;\r\n// }\r\n\r\n// export default localDateToString;","export default (metadata) => {\r\n    let cols = Object.keys(metadata[0]);\r\n    let keysContaining__EMPTY = [];\r\n    cols.forEach(e => {\r\n        if(e.indexOf('__EMPTY') !== -1) keysContaining__EMPTY.push(e);\r\n    })\r\n\r\n    if(keysContaining__EMPTY.length){\r\n        metadata.forEach(e => {\r\n            keysContaining__EMPTY.forEach(key => {\r\n                delete e[key];\r\n            })\r\n        })\r\n    }\r\n\r\n    return metadata;\r\n}","export default (submissionOptions) => {\r\n    const { Make, Sensor, Spatial_Resolution, Study_Domain, Temporal_Resolution } = submissionOptions;\r\n    \r\n    const number = (value) => {\r\n        if(!value && value !== 0) return null;\r\n        if(isNaN(value) || value === '') return 'Must be a number';\r\n    }\r\n    \r\n    const validLat = (value) => {\r\n        if(value < -90 || value > 90) return 'Must be -90 to 90';\r\n    }\r\n    \r\n    const validLon = (value) => {\r\n        if(value < -180 || value > 180) return 'Must be -180 to 180';\r\n    }\r\n    \r\n    const validTime = (value) => {\r\n        if(!value && value !== 0) return null;\r\n    \r\n    \r\n        if(/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\\\.[0-9]+)?(Z)?$/.test(value) === false){\r\n            return 'Format must match 2016-04-21T15:22:00'\r\n        }    \r\n    }\r\n\r\n    const required = (value) => {\r\n        if(value === null || value === undefined || value === '') return 'Value is required';\r\n    }\r\n\r\n    const datasetRequired = (value, row) => {\r\n        if(row !== 0) return;\r\n        if(value === null || value === undefined || value === '') return 'Value is required';\r\n    }\r\n    \r\n    const length = (min, max) => {\r\n        return (value) => {\r\n            value = value + '';\r\n            if(value.length < min || value.length > max) {\r\n                return `Must be ${min} to ${max} characters in length`;\r\n            }\r\n        }\r\n    }\r\n\r\n    const datasetLength = (min, max) => {\r\n        return (value, row) => {\r\n            value = value + '';\r\n            if((value.length < min && row === 0) || (value.length > max && row === 0)) {\r\n                return `Must be ${min} to ${max} characters in length`;\r\n            }\r\n        }\r\n    }\r\n    \r\n    const positive = (value) => {\r\n        if(value < 0) return 'Cannot be negative';\r\n    }\r\n    \r\n    const makes = Make.map(e => e.toLowerCase());\r\n    const makesSet = new Set(makes);\r\n    \r\n    const validMake = (value) => {\r\n        if(value && value !== 0 && !makesSet.has(value.toLowerCase())) {\r\n            return `Must be one of the above options.`;\r\n        }\r\n    }\r\n    \r\n    const disciplines = Study_Domain.map(e => e.toLowerCase());\r\n    const disciplinesSet = new Set(disciplines);\r\n    \r\n    const validDiscipline = (value) => {\r\n        if(value && value !== 0 && !disciplinesSet.has(value.toLowerCase())) {\r\n            return `Must be one of the above options.`;\r\n        }\r\n    }\r\n    \r\n    const sensors = Sensor.map(e => e.toLowerCase());\r\n    const sensorsSet = new Set(sensors);\r\n    \r\n    const validSensor = (value) => {\r\n        if(value && value !== 0 && !sensorsSet.has(value.toLowerCase())) {\r\n            return `Must be one of the above options.`;\r\n        }\r\n    }\r\n    \r\n    const codeFriendly = (value) => {\r\n        if(!(/^[a-zA-Z]{1}[a-zA-Z0-9_]*$/.test(value))){\r\n            return 'Must start with a letter and contain only letters, numbers, and underscores.'\r\n        }\r\n    }\r\n    \r\n    const binary = (value) => {\r\n        if(!value || value == 1 || value == 0){\r\n            return;\r\n        }\r\n    \r\n        else {\r\n            return 'Must be 0, 1, or empty.';\r\n        }\r\n    }\r\n    \r\n    // const validEmail = (value, row) => {\r\n    //     if(!value) return;\r\n    //     if(row > 0) return;\r\n    //     if(!(/^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(value))){\r\n    //         return 'Must be a valid email address'\r\n    //     }\r\n    // }\r\n    \r\n    const spatialResolutions = Spatial_Resolution.map(e => e.toLowerCase());\r\n    const spatialResolutionSet = new Set(spatialResolutions);\r\n    const validSpatialResolution = (value) => {\r\n        if(value && value !== 0 && !spatialResolutionSet.has(value.toLowerCase())) {\r\n            return `Must be one of the above options.`;\r\n        }\r\n    }\r\n    \r\n    const temporalResolutions = Temporal_Resolution.map(e => e.toLowerCase());\r\n    const temporalResolutionsSet = new Set(temporalResolutions);\r\n    const validTemporalResolution = (value) => {\r\n        if(value && value !== 0 && !temporalResolutionsSet.has(value.toLowerCase())) {\r\n            return `Must be one of the above options.`;\r\n        }\r\n    }\r\n    \r\n    const maxDepth = (value) => {\r\n        if(value > 11000) {\r\n            return 'Cannot be greater than 11000';\r\n        }\r\n    }\r\n    \r\n    const releaseDate = (value, row) => {\r\n        if(row !== 0) return;\r\n        if(!(/^([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))$/.test(value))){\r\n            return 'Format must match 2018-06-20'\r\n        }\r\n    }\r\n\r\n    const firstRowOnly = (value, row) => {\r\n        if((value || value === 0) && row > 0){\r\n            return 'Value only allowed in first row of sheet'\r\n        }\r\n    }\r\n    \r\n    return {\r\n        time: [required, validTime],\r\n        lat: [number, required, validLat],\r\n        lon: [number, required, validLon],\r\n        depth: [number, positive, maxDepth],\r\n    \r\n        dataset_short_name: [codeFriendly, datasetLength(1, 50), firstRowOnly],\r\n        dataset_long_name: [datasetLength(1, 130), firstRowOnly],\r\n        dataset_version: [length(0, 50), firstRowOnly],\r\n        dataset_release_date: [releaseDate, firstRowOnly],\r\n        dataset_make: [datasetRequired, validMake, firstRowOnly],\r\n        dataset_source: [datasetLength(1, 100), firstRowOnly],\r\n        dataset_distributor: [length(0, 100), firstRowOnly],\r\n        dataset_acknowledgement: [datasetLength(1, 10000)],\r\n        dataset_history: [length(0, 500), firstRowOnly],\r\n        dataset_description: [datasetLength(50, 10000), firstRowOnly],\r\n        dataset_references: [datasetLength(1, 500)],\r\n        climatology: [binary, firstRowOnly],\r\n        // contact_email: [validEmail, firstRowOnly],\r\n        cruise_names: [datasetLength(0, 200)],\r\n        \r\n        var_short_name: [codeFriendly, length(1, 50)],\r\n        var_long_name: [length(1, 200)],\r\n        var_sensor: [validSensor],\r\n        var_unit: [],\r\n        var_spatial_res: [required, validSpatialResolution],\r\n        var_temporal_res: [required, validTemporalResolution],\r\n        var_discipline: [],\r\n        visualize: [binary],\r\n        var_keywords: []\r\n    }\r\n}\r\n\r\n// match data column names to data_metadata\r\n// there should be at least 1 additional column \r\n// check resolutions against time and lat/lon increments\r\n// keyword validation","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Typography, ListItem, List, ListItemText, Grid, Paper, Divider, Link, Table, TableRow, TableHead, TableCell, TableBody } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst doiProviderList = [\r\n    {link: 'https://zenodo.org/', name: 'Zenodo'},\r\n    {link: 'https://datadryad.org/stash', name: 'Dryad'},\r\n    {link: 'https://figshare.com/', name: 'FigShare'},\r\n    {link: 'https://osf.io/', name: 'Open Science Framework'},\r\n    {link: 'https://dataverse.harvard.edu/', name: 'Harvard Dataverse'},\r\n    {link: 'https://www.nodc.noaa.gov/', name: 'NCEI'},\r\n    {link: 'https://daac.ornl.gov/', name: 'ORNL DAAC'},\r\n    {link: 'https://portal.edirepository.org/nis/home.jsp', name: 'EDI'},\r\n    {link: 'https://www.pangaea.de/', name: 'PANGAEA'},\r\n    {link: 'https://www.seanoe.org/', name: 'SEANOE'},\r\n    {link: 'https://disc.gsfc.nasa.gov/', name: 'NASA Goddard'},\r\n    {link: 'https://nerc.ukri.org/research/sites/data/', name: 'NERC'},\r\n];\r\n\r\nconst dataSheetProps = [\r\n    {\r\n        label: 'time',\r\n        anchorEnd: 'time',\r\n        text: [\r\n            'This column holds datetime values with the following format: %Y-%m-%dT%H:%M:%S. The date and time sections are separated by a “T” character.',\r\n            'Example: 2010-02-09T18:15:00'\r\n        ],\r\n        bullets: [\r\n            'Year (%Y) is a four-digit value: example 2010',\r\n            'Month (%m) is a two-digit value: example 02 (for Feburary)',\r\n            'Day (%d) is a two-digit value: example 09',\r\n            'Hour (%H) is a two-digit value from 00 to 23: example 18',\r\n            'Minute (%M) is a two-digit value from 00 to 59: example 15',\r\n            'Second (%S) is a two-digit value from 00 to 59: example 00',\r\n            'Time zone: UTC'\r\n        ]\r\n    },\r\n    {\r\n        label: 'lat',\r\n        anchorEnd: 'lat',\r\n        text: ['This column holds the latitude values with the following characteristics:'],\r\n        bullets: [\r\n            'Type: Numeric values from -90 to 90',\r\n            'Format: Decimal (not military grid system)',\r\n            'Unit: degree North'\r\n        ]\r\n    },\r\n    {\r\n        label: 'lon',\r\n        anchorEnd: 'lon',\r\n        text: ['This column holds the longitude values with the following characteristics:'],\r\n        bullets: [\r\n            'Type: Numeric values from -180 to 180',\r\n            'Format: Decimal (not military grid system)',\r\n            'Unit: degree East'\r\n        ]\r\n    },\r\n    {\r\n        label: 'depth',\r\n        anchorEnd: 'depth',\r\n        text: ['This column holds the depth values with the following characteristics:'],\r\n        bullets: [\r\n            'Type: Positive numeric values. It is 0 at surface with increased values with depth.',\r\n            'Format: Decimal',\r\n            'Unit: meter',\r\n        ]\r\n    },\r\n    {\r\n        label: <React.Fragment>var<sub>1</sub>...var<sub>n</sub></React.Fragment>,\r\n        anchorEnd: 'var',\r\n        text: [\r\n            <React.Fragment>\r\n                These columns represent the dataset variables (measurements). Please rename them to names appropriate for your data.\r\n                Note that these names should be identical to the names defined as <Link href='#data-structure-var_short_name'>var_short_name</Link> \r\n                &nbsp;in the <Link href='#data-structure-variable'>Variable Metadata</Link> sheet. Please do not include units in these columns; \r\n                units are recorded in the Variable Metadata sheet. Leave a given cell empty for those instances when data was not taken and a value \r\n                is missing. Do not replace the missing data with arbitrary values such as “99999”, “0”, “UNKNOWN”, etc. Please review the example \r\n                datasets in the <Link href='#resources'>resources</Link> section for more information.\r\n            </React.Fragment>\r\n        ],\r\n        bullets: []\r\n    },\r\n\r\n];\r\n\r\nconst datasetMetadataSheetProps = [\r\n    {\r\n        label: 'dataset_short_name',\r\n        anchorEnd: 'dataset_short_name',\r\n        text: ['This name is meant to be used in programming codes and scripts. It should only contain a combination of letters, numbers, and underscores (the first character can not be a number). Do not use space, dash, or special characters such as <, +, %, etc.'],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 50 characters'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'dataset_long_name',\r\n        anchorEnd: 'dataset_long_name',\r\n        text: [\r\n            <React.Fragment>\r\n                A descriptive and human-readable name for the dataset. This name will identify your dataset in the CMAP \r\n                catalog (<Link href='#fig-1'>Fig.1</Link>) and visualization search dialog (<Link href='#fig-2'>Fig.2</Link>). \r\n                Any Unicode character can be used here, but please avoid names longer than 200 characters as they may get \r\n                trimmed when displayed on graphical interfaces. A full textual description of your dataset, with no length limits, \r\n                is entered in “<Link href='#data-structure-dataset_description'>dataset_description</Link>”. If your dataset is \r\n                associated with a cruise, we recommend including the official cruise and and the cruise nickname in the\r\n                dataset_long_name. For example: Underway CTD Gradients 3 KM1906.\r\n            </React.Fragment>\r\n            ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 200 characters'\r\n        ],\r\n        images: [            \r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/dataset_long_name_cat.png',\r\n                alt: 'Dataset Long_name in Catalog',\r\n                caption: 'Figure 1. A sample dataset shown in the Simons CMAP catalog. The \"dataset_long_name\" is enclosed in the red rectangle.',\r\n                id: 'fig-1'\r\n            },\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/dataset_long_name_viz_search.png',\r\n                alt: 'Dataset Long_name in Visualization Page',\r\n                caption: 'Figure 2. The \"dataset_long_name\" appears in the visualization page search dialog.',\r\n                id: 'fig-2'\r\n            },\r\n        ]\r\n    },\r\n    {\r\n        label: 'dataset_version',\r\n        anchorEnd: 'dataset_version',\r\n        text: ['Please assign a version number or an identifier to your dataset such as “1.0.0” or “Final”. Version identifiers will help track the evolution of a dataset over time.'],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 50 characters',\r\n            'Example: 1.0'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'dataset_release_date',\r\n        anchorEnd: 'dataset_release_date',\r\n        text: ['Indicates the release date of the dataset. If your dataset has been previously published or released publicly, please specify that date. Otherwise, use the date the dataset was submitted to CMAP.'],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 50 characters',\r\n            'Example: 2020-06-22'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'dataset_make',\r\n        anchorEnd: 'dataset_make',\r\n        text: ['This is a required field that provides a broad category description of how a dataset was produced (also referred to as dataset make). Each dataset requires a single descriptor from a fixed set of options (observation, model, assimilation, laboratory), which are described below. This field will help in discovery of data in CMAP by categorizing datasets according to their Make class. Please contact us if you believe your dataset Make is not consistent with any of the categories below:'],\r\n        bullets: [\r\n            'Observation: refers to any in-situ or remote sensing measurements such as measurements made during a cruise expedition, data from an in-situ sensor, or satellite observations. Observations made as part of laboratory experiments have their own distinct category and do not fall in this category.',\r\n            'Model: refers to the outputs of numerical simulations.',\r\n            'Assimilation: refers to products that are a blend of observations and numerical models.',\r\n            'Laboratory: refers to the observations made in a laboratory setting such as culture experiment results.'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'dataset_source',\r\n        anchorEnd: 'dataset_source',\r\n        text: [\r\n            <React.Fragment>\r\n                Specifies the group and/or the institute name of the data owner(s). It can also include any link (such as a website) to \r\n                the data producers. This information will be visible in the CMAP catalog as shown in <Link href='#fig-3'>Fig 3</Link>. \r\n                Also, dataset_source will be annotated to any visualization made using the dataset (<Link href='#fig-4'>Fig. 4</Link>).\r\n            </React.Fragment>\r\n            ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 100 characters',\r\n            'Example: Armbrust Lab, University of Washington'\r\n        ],\r\n        images: [\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/dataset_source_cat.png',\r\n                alt: 'Dataset Source in Catalog',\r\n                caption: 'Figure 3. A sample dataset shown in the Simons CMAP catalog. The \"dataset_source\" is enclosed in the red rectangle.',\r\n                id: 'fig-3'\r\n            },\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/dataset_source_viz.png',\r\n                alt: 'Dataset Source in Visualizations\"',\r\n                caption: 'Figure 4. The \"dataset_source\" appears in visualizations made using the corresponding dataset (enclosed in the red rectangle).',\r\n                id: 'fig-4'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        label: 'dataset_distributor',\r\n        anchorEnd: 'dataset_distributor',\r\n        text: ['If your dataset has already been published by a data distributor provide a link to the data distributor. Otherwise, leave this field empty.'],\r\n        bullets: [\r\n            'Required: No (optional)',\r\n            'Constraint: Less than 100 characters',\r\n            'Example: http://marine.copernicus.eu/'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'dataset_acknowledgement',\r\n        anchorEnd: 'dataset_acknowledgement',\r\n        text: [\r\n            <React.Fragment>\r\n                Specify how your dataset should be acknowleged. You may mention your funding agency, grant number, or \r\n                you may ask those that use your data to acknowledge your dataset with a particular statement. Dataset \r\n                acknowlegment will be visible in the catalog page (<Link href='#fig-5'>Fig. 5</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: No (optional)',\r\n            'Constraint: No length limits'\r\n        ],\r\n        images: [\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/dataset_ack_cat.png',\r\n                alt: 'Dataset Acknowledgment in Catalog',\r\n                caption: 'Figure 5. A sample dataset shown in the Simons CMAP catalog. The \"dataset_acknowledgement\" is enclosed in the red rectangle.',\r\n                id: 'fig-5'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        label: 'dataset_history',\r\n        anchorEnd: 'dataset_history',\r\n        text: ['Use this field if your dataset has evolved over time and you wish to add notes about the history of your dataset. Otherwise, leave this field empty.'],\r\n        bullets: ['Required: No (optional)'],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'dataset_description',\r\n        anchorEnd: 'dataset_description',\r\n        text: [\r\n            <React.Fragment>\r\n                Include any description that you think will help a reader better understand your dataset. This description can \r\n                include information about data acquisition, processing methods, figures, and links to external content. This \r\n                field serves as the dataset documentation that is visible in the Simons CMAP catalog (<Link href='#fig-6'>Fig. 6</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: No length limits'\r\n        ],\r\n        images: [\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/dataset_description_cat.png',\r\n                alt: 'Dataset description in Catalog',\r\n                caption: 'Figure 6. A sample dataset shown in the Simons CMAP catalog. The \"dataset_description\" is accessible using the \"Dataset Details\" button, enclosed in the red rectangle.',\r\n                id: 'fig-6'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        label: 'dataset_references',\r\n        anchorEnd: 'dataset_references',\r\n        text: ['List any publications or documentation that one may cite in reference to the dataset. If there are more than one reference, please put them in separate cells under the dataset_reference column. Leave this field empty if there are no publications associated with this dataset.'],\r\n        bullets: ['Required: No (optional)'],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'climatology',\r\n        anchorEnd: 'climatology',\r\n        text: ['This is a flag indicating whether the dataset represents a climatological product. If your dataset is a climatological product fill this field with “1”. Otherwise, leave this field blank.'],\r\n        bullets: ['Required: No (optional)'],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'cruise_names',\r\n        anchorEnd: 'cruise_names',\r\n        text: ['If your dataset represents measurements made during a cruise expedition (or expeditions), provide a list of cruise official names here. If your dataset is associated with more than one cruise, please put them in separate cells under the cruise_names column. If the cruises have any nicknames, please include them in the same cell as the official cruise name separated by a comma(s). Leave this field blank if your dataset is not associated with a cruise expedition.'],\r\n        bullets: [\r\n            'Required: No (optional)',\r\n            'Constraint: No length limits',\r\n            'Example: KOK1606, Gradients 1'\r\n        ],\r\n        images: []\r\n    }\r\n];\r\n\r\nconst variableMetadataSheetProps = [\r\n    {\r\n        label: 'var_short_name',\r\n        anchorEnd: 'var_short_name',\r\n        text: [\r\n            <React.Fragment>\r\n                This name is meant to be used in programming codes and scripts. It should only contain a combination of letters, numbers, \r\n                and underscores (the first character can not be a number). Do not use space, dash, or special characters such as {'<'}, +, \r\n                %, etc. Finally, there must be a one-to-one match between the short_names listed here and the variable column names in the \r\n                “Data” sheet (see <Link href='#data-structure-var'>vars</Link>). var_short_name will be seen in the CMAP catalog \r\n                (<Link href='#fig-7'>Fig. 7</Link>), and will appear as the title of the generated figures (\r\n                <Link href='#fig-8'>Fig. 8</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 50 characters'\r\n        ],\r\n        images: [\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/var_short_name_cat.png',\r\n                alt: 'Variable short name in catalog',\r\n                caption: 'Figure 7. A sample dataset shown in the Simons CMAP catalog. The \"var_short_name\" is highlighted in the red rectangle.',\r\n                id: 'fig-7'\r\n            },\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/viz_short_name.png',\r\n                alt: 'Variable short name in a figure',\r\n                caption: 'Figure 8. A sample figure generated in the Simons CMAP catalog. The \"var_short_name\" appears as the figure title and is highlighted in the red rectangle.',\r\n                id: 'fig-8'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        label: 'var_long_name',\r\n        anchorEnd: 'var_long_name',\r\n        text: [\r\n            <React.Fragment>\r\n                A descriptive and human-readable label for the variable in accordance with the CF and COARDS conventions [\r\n                <Link href='#reference-1'>1</Link>, <Link href='#reference-2'>2</Link>, <Link href='#reference-3'>3</Link>]. This \r\n                name will present your variable in the CMAP catalog (<Link href='#fig-9'>Fig. 9</Link>) and visualization search \r\n                dialog (<Link href='#fig-10'>Fig. 10</Link>). var_long_name can contain any unicode character, but please avoid names \r\n                longer than 200 characters as they may get trimmed while displayed on graphical interfaces. Please use&nbsp;\r\n                <Link href='#data-structure-var_comment'>var_comment</Link> if you would like to add a full textual description \r\n                (with no length limits) for your variable.\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 200 characters'\r\n        ],\r\n        images: [\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/var_long_name_cat.png',\r\n                alt: 'Variable long name in catalog',\r\n                caption: 'Figure 9. A sample dataset shown in the Simons CMAP catalog. The \"var_long_name\" is highlighted in the red rectangle.',\r\n                id: 'fig-9'\r\n            },\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/var_long_name_viz_search.png',\r\n                alt: 'var long name in visualization page',\r\n                caption: 'Figure 10. The \"var_long_name\" appears in the visualization page search dialog.',\r\n                id: 'fig-10'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        label: 'var_sensor',\r\n        anchorEnd: 'var_sensor',\r\n        text: ['This is a required field that refers to the instrument used to produce the measurements such as CTD, fluorometer, flow cytometer, sediment trap, etc. If your dataset is the result of a field expedition but you are not sure about the name of the instrument used for the measurements, use the term “in-situ” to fill out this field. If your dataset is the output of a numerical model or a combination of model and observation, use the term “simulation” and “blend”, respectively. This field will significantly help to find and categorize data generated using a similar class of instruments. var_sensor will be visible in the Simons CMAP catalog.'],\r\n        bullets: [],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'var_unit',\r\n        anchorEnd: 'var_unit',\r\n        text: [\r\n            <React.Fragment>\r\n                Specifies variable units, if applicable. Leave this field blank if your variable is unitless (e.g. “station numbers” or “quality \r\n                flags”). Units may contain unicode characters such as subscripts and superscripts. var_unit will be visible in the Simons CMAP \r\n                catalog (see <Link href='#fig-9'>Fig. 9</Link>) and in the generated visualizations (see <Link href='#fig-8'>Fig. 8</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: No (optional)',\r\n            'Constraint: Less than 50 characters',\r\n            <React.Fragment>Example: ug L<sup>-1</sup></React.Fragment>\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'var_spatial_res',\r\n        anchorEnd: 'var_spatial_res',\r\n        text: [\r\n            <React.Fragment>\r\n                Specifies the spatial resolution of the variable. Typically, gridded products have uniform spatial spacing (such as 0.25° X 0.25°) \r\n                while field expeditions do not have a regular spatial resolution. If your variable does not have a regular spatial resolution, \r\n                use the term “irregular” to fill out this field. Note that if samples are taken at a series of distinct but spatially-non-uniform \r\n                stations, the spatial resolution is considered irregular. var_spatial_res may contain unicode characters such as degree symbol ( ° ) \r\n                and will be visible in the Simons CMAP catalog (see <Link href='#fig-9'>Fig. 9</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 50 characters',\r\n            'Example: irregular'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'var_temporal_res',\r\n        anchorEnd: 'var_temporal_res',\r\n        text: [\r\n            <React.Fragment>\r\n                Specifies the temporal resolution of measurements (such as daily, hourly, 3-minutes, etc). If the measurements do not have a \r\n                regular temporal spacing, use the term “irregular” to fill out this field. var_temporal_res will be visible in the Simons CMAP \r\n                catalog (see <Link href='#fig-9'>Fig. 9</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 50 characters',\r\n            'Example: irregular'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'var_discipline',\r\n        anchorEnd: 'var_discipline',\r\n        text: [\r\n            <React.Fragment>\r\n                Indicates in which disciplines (such as Physics, Biology …) this variable is commonly studied. You can specify more than one \r\n                discipline. If you list multiple disciplines per variable, please separate them by comma. var_discipline will be visible in \r\n                the Simons CMAP catalog (referred to as “Study Domain” in <Link href='#fig-9'>Fig. 9</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: Yes',\r\n            'Constraint: Less than 100 characters',\r\n            'Example: Physics, BioGeoChemistry'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'visualize',\r\n        anchorEnd: 'visualize',\r\n        text: ['This is a flag field and can only be 0 or 1. Fill this field with 1, if you think this variable can be visualized on a graph by Simons CMAP. In principle, any variable with numeric values can be visualized while variables with string values, station numbers, or quality flags may not be the best candidates for visualization in CMAP. Please consult with the data curation team if you have any questions.'],\r\n        bullets: ['Required: No'],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'var_keywords',\r\n        anchorEnd: 'var_keywords',\r\n        text: ['Every variable in CMAP is annotated with a range of semantically related keywords to ensure a variable can be easily discovered. For example, use of keywords allows you to search using the term “PO4” and retrieve a list of all phosphate data even if “PO4” was not used as the var_long_name for a given dataset. Similarly, if one searches for “MIT”, CMAP returns all variables generated by MIT groups, or if one looks for “model”, only model outputs are returned. These “semantic” searches are made possible using the keywords that are added to each variable. We would like to have keywords to cover the following areas described below (where applicable). Please note that there is no limit to the number of keywords used for a variable. The keywords are case-insensitive and you may add/remove them at any point (even after data ingestion). This is a required field.'],\r\n        bullets: [\r\n            'Alternative names: other official, unofficial, abbreviation, technical (or jargon) names or notations associated with the variable. Examples: Nitrate, NO3, NO_3',\r\n            'Method and Instrument: Keywords related to the method and instruments used for the variable measurements. Examples: observation, in-situ, model, satellite, remote sensing, cruise, CTD, cytometry, ….',\r\n            'Note these keywords are not mutually exclusive. For example, a CTD temperature measurement made during a cruise can have all of the following keywords: observation, in-situ, cruise, CTD',\r\n            'Data Producers: Keywords associated with the lead scientist/lab name/institute name. Examples: UW, University of Washington, Virginia Armbrust, Ginger',\r\n            'Cruise: The official/unoffical name of the cruise(s) during which the variable was measured, if applicable. Examples: KOK1606, Gradients_1, diel',\r\n            'Project name: If your data are in the context of a project, include the project name. Examples: HOT, Darwin, SeaFlow'\r\n        ],\r\n        images: []\r\n    },\r\n    {\r\n        label: 'var_comment',\r\n        anchorEnd: 'var_comment',\r\n        text: [\r\n            <React.Fragment>\r\n                Use this field to communicate any detailed information about this particular variable with the users. This could include, \r\n                for example, description of method(s) used to process the raw measurements. var_comment is visible in the Simons CMAP \r\n                catalog (<Link href='#fig-11'>Fig. 11</Link>).\r\n            </React.Fragment>\r\n        ],\r\n        bullets: [\r\n            'Required: No (optional)',\r\n            'Constraint: No length limits'\r\n        ],\r\n        images: [\r\n            {\r\n                src: 'https://cmap.readthedocs.io/en/latest/_static/data_submission_pics/var_comment_cat.png',\r\n                alt: 'Variable description in Catalog',\r\n                caption: 'Figure 11. A sample dataset shown in the Simons CMAP catalog. The \"var_commentn\" is accessible using the \"Comment\" button, highlighted in the red rectangle.',\r\n                id: 'fig-11'\r\n            }\r\n        ]\r\n    }\r\n];\r\n\r\nconst styles = (theme) => ({\r\n    stickyPaper: {\r\n        position: '-webkit-sticky',\r\n        maxHeight: 'calc(100vh - 128px)',\r\n        position: 'sticky',\r\n        top: '90px',\r\n        width: '200px',\r\n        marginLeft: '20px',\r\n        paddingLeft: '12px',\r\n        backgroundColor: 'rgba(0,0,0,.4)',\r\n        overflow: 'auto'\r\n    },\r\n\r\n    guideSection: {\r\n        width: '90%',\r\n        // height: '2000px',\r\n        margin: '20px auto 0 auto',\r\n        textAlign: 'left',\r\n        padding: '12px 32px',\r\n        fontFamily: '\"roboto\", Serif',\r\n        maxWidth: '800px',\r\n        backgroundColor: 'rgba(0,0,0,.4)',\r\n        marginBottom: '20px'\r\n    },\r\n\r\n    sectionHeader: {\r\n        margin: '8px 0',\r\n        fontWeight: 100,\r\n        fontFamily: '\"roboto\", Serif', \r\n    },\r\n\r\n    '@media screen and (max-width: 1300px)': {\r\n        stickyPaper: {\r\n          display: 'none',\r\n        },\r\n    },\r\n\r\n    navListItem: {\r\n        color: theme.palette.primary.main,\r\n        padding: '2px 10px 2px 6px'\r\n    },\r\n\r\n    navListItemText: {\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    },\r\n\r\n    doiListItem: {\r\n        color: theme.palette.primary.main,\r\n        padding: '0 10px 0 6px',\r\n        width: 'max-content'\r\n    },\r\n\r\n    doiListItemText: {\r\n        fontSize: '16px',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    },\r\n\r\n    doiListItemtextWrapper: {\r\n        margin: '0'\r\n    },\r\n\r\n    navListItemtextWrapper: {\r\n        margin: '2px 0'\r\n    },\r\n\r\n    subListText: {\r\n        margin: 0,\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    },\r\n\r\n    anchor: {\r\n        display: 'block',\r\n        position: 'relative',\r\n        top: '-120px',\r\n        visibility: 'hidden'\r\n    },\r\n\r\n    divider: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        marginBottom: '8px'\r\n    },\r\n\r\n    sampleTableRow: {\r\n        border: '1px solid black'\r\n    },\r\n\r\n    navListSubItemText: {\r\n        fontSize: '.785rem'\r\n    },\r\n\r\n    navListSubSubItemText: {\r\n        fontSize: '.7rem'\r\n    }\r\n})\r\n// toggle display from none to block\r\nconst SubmissionGuide = (props) => {\r\n    const { classes } = props;\r\n\r\n    const [ activeSection, setActiveSection ] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        let onThreshold = (entries) => {\r\n            entries.forEach(e => {\r\n                if(e.isIntersecting && e.target.id !== activeSection) setActiveSection(e.target.id);\r\n            })\r\n        }\r\n        let observer = new IntersectionObserver(onThreshold, {threshold: .5});\r\n        [\r\n            document.querySelector('#data-structure-time'),\r\n            document.querySelector('#data-structure-dataset_short_name'),\r\n            document.querySelector('#data-structure-var_short_name')\r\n        ].forEach(e => observer.observe(e));\r\n\r\n        return (() => observer.disconnect());\r\n    });\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container>\r\n                <Grid item xs={2}>\r\n                    <Paper className={classes.stickyPaper} elevation={6}>\r\n                        <List dense={true}>\r\n                            <ListItem component='a' href='#getting-started' className={classes.navListItem}>\r\n                                <ListItemText\r\n                                    primary=\"Getting Started\"\r\n                                    classes={{primary: classes.navListItemText}}\r\n                                    className={classes.navListItemtextWrapper}\r\n                                />\r\n                            </ListItem>\r\n\r\n                            <ListItem component='a' href='#submission-process' className={classes.navListItem}>\r\n                                <ListItemText\r\n                                    primary=\"Submission Process\"\r\n                                    classes={{primary: classes.navListItemText}}\r\n                                    className={classes.navListItemtextWrapper}\r\n                                />\r\n                            </ListItem>\r\n\r\n                            <List dense={true} style={{padding: '0 0 0 12px'}}>\r\n                                <ListItem component='a' href='#validation' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Validation\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <ListItem component='a' href='#feedback' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Feedback\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <ListItem component='a' href='#doi' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"DOI\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <ListItem component='a' href='#ingestion' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Ingestion\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n                            </List>\r\n\r\n                            <ListItem component='a' href='#dashboard' className={classes.navListItem}>\r\n                                <ListItemText\r\n                                    primary=\"User Dashboard\"\r\n                                    classes={{primary: classes.navListItemText}}\r\n                                    className={classes.navListItemtextWrapper}\r\n                                />\r\n                            </ListItem>\r\n\r\n                            <ListItem component='a' href='#data-structure' className={classes.navListItem}>\r\n                                <ListItemText\r\n                                    primary=\"Data Structure\"\r\n                                    classes={{primary: classes.navListItemText}}\r\n                                    className={classes.navListItemtextWrapper}\r\n                                />\r\n                            </ListItem>\r\n\r\n                            <List dense={true} style={{padding: '0 0 0 12px'}}>\r\n                                <ListItem component='a' href='#data-structure-data' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Data\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <List dense={true} style={{padding: '0 0 0 12px', display: activeSection === 'data-structure-time' ? 'block' : 'none'}}>\r\n                                    {\r\n                                        dataSheetProps.map((e, i) => (\r\n                                            <ListItem component='a' href={`#data-structure-${e.anchorEnd}`} className={classes.navListItem} key={i}>\r\n                                                <ListItemText                                                    \r\n                                                    primary={e.label}\r\n                                                    className={classes.subListText}\r\n                                                    classes={{primary: classes.navListSubItemText}}\r\n                                                />\r\n                                            </ListItem>\r\n                                        ))\r\n                                    }\r\n                                </List>\r\n\r\n                                <ListItem component='a' href='#data-structure-dataset_short_name' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Dataset Metadata\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <List dense={true} style={{padding: '0 0 0 12px', display: activeSection === 'data-structure-dataset_short_name' ? 'block' : 'none'}}>\r\n                                    {\r\n                                        datasetMetadataSheetProps.map((e, i) => (\r\n                                            <ListItem component='a' href={`#data-structure-${e.anchorEnd}`} className={classes.navListItem} key={i}>\r\n                                                <ListItemText                                                    \r\n                                                    primary={e.label}\r\n                                                    className={classes.subListText}\r\n                                                    classes={{primary: classes.navListSubItemText}}\r\n                                                />\r\n                                            </ListItem>\r\n                                        ))\r\n                                    }\r\n                                </List>\r\n\r\n                                <ListItem component='a' href='#data-structure-variable' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Variable Metadata\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <List dense={true} style={{padding: '0 0 0 12px', display: activeSection === 'data-structure-var_short_name' ? 'block' : 'none'}}>\r\n                                    {\r\n                                        variableMetadataSheetProps.map((e, i) => (\r\n                                            <ListItem component='a' href={`#data-structure-${e.anchorEnd}`} className={classes.navListItem} key={i}>\r\n                                                <ListItemText                                                    \r\n                                                    primary={e.label}\r\n                                                    className={classes.subListText}\r\n                                                    classes={{primary: classes.navListSubItemText}}\r\n                                                />\r\n                                            </ListItem>\r\n                                        ))\r\n                                    }\r\n                                </List>\r\n\r\n                                <ListItem component='a' href='#data-structure-references' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"References\"\r\n                                        className={classes.subListText}\r\n                                        classes={{primary: classes.navListSubItemText}}\r\n                                    />\r\n                                </ListItem>\r\n                            </List>\r\n\r\n                            <ListItem component='a' href='#faq' className={classes.navListItem}>\r\n                                <ListItemText\r\n                                    primary=\"FAQ &amp; Help\"\r\n                                    classes={{primary: classes.navListItemText}}\r\n                                    className={classes.navListItemtextWrapper}\r\n                                />\r\n                            </ListItem>\r\n\r\n                            <List dense={true} style={{padding: '0 0 0 12px'}}>\r\n                                <ListItem component='a' href='#faq-doi' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"DOIs\"\r\n                                        className={classes.subListText}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <ListItem component='a' href='#faq-curation' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Curation\"\r\n                                        className={classes.subListText}\r\n                                    />\r\n                                </ListItem>\r\n\r\n                                <ListItem component='a' href='#faq-validation-warnings' className={classes.navListItem}>\r\n                                    <ListItemText\r\n                                        primary=\"Validation Warnings\"\r\n                                        className={classes.subListText}\r\n                                    />\r\n                                </ListItem>\r\n                            </List>\r\n\r\n                            <ListItem component='a' href='#contact' className={classes.navListItem}>\r\n                                <ListItemText\r\n                                    primary=\"Contact\"\r\n                                    classes={{primary: classes.navListItemText}}\r\n                                    className={classes.navListItemtextWrapper}\r\n                                />\r\n                            </ListItem>\r\n\r\n                            <ListItem component='a' href='#resources' className={classes.navListItem}>\r\n                                <ListItemText\r\n                                    primary=\"Resources\"\r\n                                    classes={{primary: classes.navListItemText}}\r\n                                    className={classes.navListItemtextWrapper}\r\n                                />\r\n                            </ListItem>\r\n                        </List>\r\n                    </Paper>\r\n                </Grid>\r\n\r\n                <Grid item xs={8}>\r\n                    <Paper className={classes.guideSection} elevation={4}>\r\n                        <Typography variant='h3' className={classes.sectionHeader}>\r\n                            <a className={classes.anchor} id='getting-started'></a>\r\n                            Getting Started\r\n                        </Typography>\r\n\r\n                        <Divider variant='fullWidth' classes={{root: classes.divider}}/>\r\n\r\n                        <Typography>\r\n                            Data submitted to <span style={{fontWeight: 600}}>Simons Collaborative Marine Atlas Project</span> must be precisely formatted to maintain\r\n                            high levels of <em>discoverability</em>, <em>comparability</em>, and <em>database performance</em>. \r\n                        </Typography>\r\n                        \r\n                        <Typography style={{marginTop: '16px'}}>\r\n                            The purpose of the data submission toolset is to provide automatic, immediate feedback to assist you in formatting your \r\n                            submission, facilitate communication with the data curation team, and allow you to track the progress of your submission.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h3' className={classes.sectionHeader} style={{marginTop: '80px'}}>\r\n                            <a className={classes.anchor} id='submission-process'></a>\r\n                            The Submission Process\r\n                        </Typography>\r\n                        <Divider variant='fullWidth' classes={{root: classes.divider}}/>\r\n\r\n                        <Typography>\r\n                            Begin the process by downloading and populating a&nbsp;\r\n                            <Link href='https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx' download='datasetTemplate.xlsx'>\r\n                                blank xlsx template.\r\n                            </Link>\r\n                            &nbsp;Completed sample templates can be found in the&nbsp;\r\n                            <Link href='#resources'>resources section</Link>.\r\n                            Details on the requirements and structure can be found in the&nbsp;\r\n                            <Link href='#data-structure'>Data Structure</Link> section.\r\n                        </Typography>\r\n\r\n                        <Typography style={{marginTop: '16px'}}>\r\n                            Please note that xlsx workbooks over 150MB <em>cannot be processed</em> using the web submission tools. If you would like to submit\r\n                            a dataset that exceeds this limit please contact the data curation team at <a style={{color:colors.primary, textDecoration: 'none'}} href=\"mailto:cmap-data-submission@uw.edu\">cmap-data-submission@uw.edu</a>.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            Validation\r\n                            <a className={classes.anchor} id='validation'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            Load your workbook into the&nbsp;\r\n                            <Link target='_blank' href='/datasubmission/validationtool'>submission tool</Link>\r\n                            &nbsp;to begin validation. The tool will walk you through a step-by-step\r\n                            process to identify and resolve any potential data or format issues.\r\n                            Once the workbook has been validated it will be uploaded to a staging \r\n                            area to be reviewed by our data curation team. From this point you'll be able to track\r\n                            the progress of your submission in the&nbsp;\r\n                            <Link href='#dashboard'>user dashboard</Link>.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            Feedback\r\n                            <a className={classes.anchor} id='feedback'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            The data curation team may have suggestions for additional changes to the workbook.\r\n                            Any feedback will be sent to you via email notification, and visible in the&nbsp;\r\n                            <Link href='#dashboard'>user dashboard</Link>.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            DOI\r\n                            <a className={classes.anchor} id='doi'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            Once your submission has been approved the data curation team will request a DOI\r\n                            for the data. Information on DOIs can be found in the&nbsp;\r\n                            <Link href='#faq-doi'>\r\n                                DOI Help Section\r\n                            </Link>.\r\n                            The DOI can be submitted using the messaging feature of the <Link href='#dashboard'>user dashboard</Link>.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            Ingestion\r\n                            <a className={classes.anchor} id='ingestion'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            Once a DOI has been submitted your data will be ingested into the CMAP database. After ingestion,\r\n                            you'll be able to view your dataset in the <Link href='/catalog' target=\"_blank\">data catalog</Link>, and\r\n                            access it through the CMAP API using any of the CMAP&nbsp;\r\n                            <Link href='https://cmap.readthedocs.io/en/latest/user_guide/API_ref/api_ref.html' target=\"_blank\">software packages</Link>.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h3' className={classes.sectionHeader} style={{marginTop: '80px'}}>\r\n                            <a className={classes.anchor} id='dashboard'></a>\r\n                            User Dashboard\r\n                        </Typography>\r\n                        <Divider variant='fullWidth' classes={{root: classes.divider}}/>\r\n\r\n                        <Typography>\r\n                            In the&nbsp;\r\n                            <Link href='/datasubmission/userdashboard' target=\"_blank\">user dashboard</Link>&nbsp;\r\n                            you can track the ingestion process for any dataset that you've submitted,\r\n                            send messages to the data curation team, and download the most recently submitted version of the workbook.\r\n                            Additionally, in the event that the curation team requests additional changes to your submission you can \r\n                            load the most recent version directly into the validation tool, make any necessary changes, and resubmit.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h3' className={classes.sectionHeader} style={{marginTop: '80px'}}>\r\n                            <a className={classes.anchor} id='data-structure'></a>\r\n                            Data Structure\r\n                        </Typography>\r\n                        <Divider variant='fullWidth' classes={{root: classes.divider}}/>\r\n\r\n                        <Typography>\r\n                            The CMAP data template consists of three sheets: data, dataset metadata, and variable metadata. Data is stored \r\n                            in the first sheet called “data”. Metadata that describes the dataset is entered in the second \r\n                            sheet called “dataset_meta_data”. Metadata associated with the variables in the dataset are entered in the third \r\n                            sheet called “vars_meta_data”. Information must be provided for all columns except those specifically noted as \r\n                            optional. The data and metadata field names (e.g. time, lat, lon, short_name, long_name, ...) used in the template \r\n                            file are based on the CF and COARDS naming conventions [\r\n                                <Link href='#reference-1'>1</Link>,&nbsp;\r\n                                <Link href='#reference-2'>2</Link>,&nbsp;\r\n                                <Link href='#reference-3'>3</Link>\r\n                            ].\r\n                        </Typography>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            Data\r\n                            <a className={classes.anchor} id='data-structure-data'></a>\r\n                        </Typography>\r\n\r\n                        <Table size='small' style={{marginBottom: '12px'}}>\r\n                            <TableHead>\r\n                                <TableRow className={classes.sampleTableRow}>\r\n                                    <TableCell>\r\n                                        time\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        lat\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        lon\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        depth[if exists]\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        var<sub>1</sub>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        ...\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        var<sub>n</sub>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n\r\n                            <TableBody>\r\n                                <TableRow className={classes.sampleTableRow}>\r\n                                    <TableCell>\r\n                                        2016-5-01T15:02:00\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        25\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        -158\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        5\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        value\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        ...\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        value\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            </TableBody>\r\n                        </Table>\r\n\r\n                        <Typography>\r\n                            All data points are stored in the “Data” sheet. Each data point must have time and location information. The \r\n                            exact name and order of the time and location columns are shown in the table above. If a dataset does not have \r\n                            depth values (e.g., sea surface measurements), you may remove the depth column. If your dataset represents \r\n                            results of a Laboratory study (see dataset_make) fill these fields with the time of study and the location of \r\n                            your laboratory. The columns var<sub>1</sub>...var<sub>n</sub> represent the dataset variables (measurements). Please \r\n                            rename var<sub>1</sub>...var<sub>n</sub> to names appropriate to your data. The format of “time”, “lat”, “lon”, and \r\n                            “depth” columns are described in the following sections. Please review the example datasets listed under&nbsp;\r\n                            <Link href='#resources'>resources</Link> for more detailed information.\r\n                        </Typography>\r\n\r\n                        {dataSheetProps.map((e, i) => (\r\n                            <React.Fragment key={i}>\r\n                                <Typography variant='h6' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                                    {e.label}\r\n                                    <a className={classes.anchor} id={`data-structure-${e.anchorEnd}`}></a>\r\n                                </Typography>\r\n                                {e.text.map((text, j) => (\r\n                                    <Typography key={i + j * 100}>\r\n                                        {text}                           \r\n                                    </Typography>\r\n                                ))}\r\n                                <ul>\r\n                                    {e.bullets.map((bullet, k) => (\r\n                                        <li key={k + i * 1000}>{bullet}</li>\r\n                                    ))}\r\n                                </ul>\r\n                            </React.Fragment>\r\n                        ))}\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            Dataset Metadata\r\n                            <a className={classes.anchor} id='data-structure-dataset'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            This sheet holds a list of top-level attributes about the dataset such as the dataset name and description. \r\n                            Below are the list of these attributes along with their descriptions. Please review the example datasets listed \r\n                            under <Link href='#resources'>resources</Link> for more detailed information.\r\n                        </Typography>\r\n\r\n                        {datasetMetadataSheetProps.map((e, i) => (\r\n                            <React.Fragment key={i}>\r\n                                <Typography variant='h6' className={classes.sectionHeader} style={{marginTop: '50px'}} key={i}>\r\n                                    {e.label}\r\n                                    <a className={classes.anchor} id={`data-structure-${e.anchorEnd}`}></a>\r\n                                </Typography>\r\n                                {e.text.map((text, j) => (\r\n                                    <Typography key={j + i * 10}>\r\n                                        {text}                           \r\n                                    </Typography>\r\n                                ))}\r\n                                <ul>\r\n                                    {e.bullets.map((bullet, k) => (\r\n                                        <li key={k + i * 100}>{bullet}</li>\r\n                                    ))}\r\n                                </ul>\r\n                                {e.images.map((image, l) => (\r\n                                    <figure key={l + i * 1000} style={{margin: '30px 0 0 0'}}>\r\n                                        <a className={classes.anchor} id={image.id}></a>\r\n                                        <img\r\n                                            src={image.src}\r\n                                            alt={image.alt}\r\n                                            width='100%'\r\n                                            style={{maxwidth: '100%'}}                                            \r\n                                        />\r\n                                        <figcaption>\r\n                                            {image.caption}\r\n                                        </figcaption>\r\n                                    </figure>\r\n                                ))\r\n\r\n                                }\r\n                            </React.Fragment>\r\n                        ))}\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            Variable Metadata\r\n                            <a className={classes.anchor} id='data-structure-variable'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            A dataset can contain multiple different measurements (variables). This sheet (labeled as \"vars_meta_data\") \r\n                            holds a list of top-level attributes about these variables such as the variable name, unit, and description. \r\n                            Each variable along with its attributes (metadata) is stored in separate rows. Below is the list of these \r\n                            attributes along with their descriptions. Please review the example datasets listed in the&nbsp;\r\n                            <Link href='#resources'>resources</Link> section for more information.\r\n                        </Typography>\r\n\r\n                        {variableMetadataSheetProps.map((e, i) => (\r\n                            <React.Fragment key={i}>\r\n                                <Typography variant='h6' className={classes.sectionHeader} style={{marginTop: '50px'}} key={i}>\r\n                                    {e.label}\r\n                                    <a className={classes.anchor} id={`data-structure-${e.anchorEnd}`}></a>\r\n                                </Typography>\r\n                                {e.text.map((text, j) => (\r\n                                    <Typography key={j + i * 10}>\r\n                                        {text}                           \r\n                                    </Typography>\r\n                                ))}\r\n                                <ul>\r\n                                    {e.bullets.map((bullet, k) => (\r\n                                        <li key={k + i * 100}>{bullet}</li>\r\n                                    ))}\r\n                                </ul>\r\n                                {e.images.map((image, l) => (\r\n                                    <figure key={l + i * 1000} style={{margin: '30px 0 0 0'}}>\r\n                                        <a className={classes.anchor} id={image.id}></a>\r\n                                        <img\r\n                                            src={image.src}\r\n                                            alt={image.alt}\r\n                                            width='100%'\r\n                                            style={{maxwidth: '100%'}}                                            \r\n                                        />\r\n                                        <figcaption>\r\n                                            {image.caption}\r\n                                        </figcaption>\r\n                                    </figure>\r\n                                ))\r\n\r\n                                }\r\n                            </React.Fragment>\r\n                        ))}\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            References\r\n                            <a className={classes.anchor} id='data-structure-references'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            <a className={classes.anchor} id='reference-1'></a>\r\n                            <Link href='http://cfconventions.org/cf-conventions/cf-conventions.html' target='_blank'>\r\n                                NetCDF Climate and Forecast (CF) Metadata Conventions\r\n                            </Link>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            <a className={classes.anchor} id='reference-2'></a>\r\n                            <Link href='https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html' target='_blank'>\r\n                                Conventions for the standardization of NetCDF files\r\n                            </Link>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            <a className={classes.anchor} id='reference-3'></a>\r\n                            <Link href='https://ferret.pmel.noaa.gov/Ferret/documentation/coards-netcdf-conventions' target='_blank'>\r\n                                COARDS NetCDF Conventions\r\n                            </Link>\r\n                        </Typography>\r\n\r\n                        <Typography variant='h3' className={classes.sectionHeader} style={{marginTop: '80px'}}>\r\n                            <a className={classes.anchor} id='faq'></a>\r\n                            FAQ &amp; Help\r\n                        </Typography>\r\n                        <Divider variant='fullWidth' classes={{root: classes.divider}}/>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            What is a DOI and how can I get one for my dataset?\r\n                            <a className={classes.anchor} id='faq-doi'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            A <em>DOI</em> or <em>Digital Object Identifier</em> is a digital identifier for a dataset. Some DOI providers, such as Zenodo, \r\n                            allow for dataset version controlling. We require a DOI to be registered for your dataset in the submission process. \r\n                            It allows for users to cite the use of a dataset and properly acknowledge the dataset creators.\r\n                        </Typography>\r\n\r\n                        <Typography style={{marginTop:'24px'}}>\r\n                            Below is a list of entities that may issue and link your dataset to a unique DOI:\r\n                        </Typography>\r\n\r\n                        <List>\r\n                            {\r\n                                doiProviderList.map((e, i) => (\r\n                                    <ListItem target='_blank' component='a' href={e.link} className={classes.doiListItem} key={i}>\r\n                                        <ListItemText\r\n                                            primary={e.name}\r\n                                            classes={{primary: classes.doiListItemText}}\r\n                                            className={classes.doiListItemtextWrapper}\r\n                                        />\r\n                                    </ListItem>\r\n                                ))\r\n                            }\r\n                        </List>\r\n\r\n                        <Typography style={{margin:'18px 0'}}>\r\n                            See the tutorial video below to learn how to obtain a DOI for your dataset using Zenodo.\r\n                        </Typography>\r\n\r\n                        <iframe src=\"https://player.vimeo.com/video/407462463\" width=\"780\" height=\"440\" style={{margin:'0 auto'}}></iframe>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            Isn't this automated? Why do I need to wait for feedback from a curator?\r\n                            <a className={classes.anchor} id='faq-curation'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            The online validator is designed to catch formatting issues, missing information, and fields which don't meet  \r\n                            CMAP's ingestion requirements. Evaluating the accuracy and descriptiveness of metadata \r\n                            requires significant domain knowledge and understanding of the CMAP ecosystem, and are best done by a human.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h5' className={classes.sectionHeader} style={{marginTop: '50px'}}>\r\n                            What should I do about the validation warnings?\r\n                            <a className={classes.anchor} id='faq-curation'></a>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            Validation warnings if present will appear in yellow when you select your workbook in the validation tool, \r\n                            indicating <em>possible</em> errors in your data or metadata such as outliers, columns with mixed data types, or\r\n                            missing cruise information. They should be reviewed carefully, but if you determine they do not need to be corrected\r\n                            they will not prevent you from moving forward with your submission.\r\n                        </Typography>                \r\n\r\n                        <Typography variant='h3' className={classes.sectionHeader} style={{marginTop: '80px'}}>\r\n                            <a className={classes.anchor} id='contact'></a>\r\n                            Contact\r\n                        </Typography>\r\n                        <Divider variant='fullWidth' classes={{root: classes.divider}}/>\r\n\r\n                        <Typography>\r\n                            You can reach the CMAP data curation team at <a style={{color:colors.primary, textDecoration: 'none'}} href=\"mailto:cmap-data-submission@uw.edu\">cmap-data-submission@uw.edu</a>.\r\n                        </Typography>\r\n\r\n                        <Typography variant='h3' className={classes.sectionHeader} style={{marginTop: '80px'}}>\r\n                            <a className={classes.anchor} id='resources'></a>\r\n                            Resources\r\n                        </Typography>\r\n                        <Divider variant='fullWidth' classes={{root: classes.divider}}/>\r\n\r\n                        <Typography>\r\n                            <Link href='https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx' download='datasetTemplate.xlsx'>\r\n                                Download a Blank xlsx Template\r\n                            </Link>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            <Link href='https://github.com/simonscmap/DBIngest/raw/master/template/KOK1606_Gradients1_Cobalamin_example_2020_07_15.xlsx' download='KOK1606_Gradients1_Cobalamin_Sample.xlsx'>\r\n                                Sample Dataset - KOK1606_Gradients1_Cobalamin\r\n                            </Link>\r\n                        </Typography>\r\n\r\n                        <Typography>\r\n                            <Link href='https://github.com/simonscmap/DBIngest/raw/master/template/amt01_extracted_cholorphyll_2020_07_25.xlsx' download='AMT01_Extracted_Cholorphyll_Sample.xlsx'>\r\n                                Sample Dataset - amt01_extracted_cholorphyll\r\n                            </Link>\r\n                        </Typography>\r\n                    </Paper>\r\n                </Grid>\r\n            </Grid>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(SubmissionGuide);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n    commentArea: {\r\n        backgroundColor: 'rgba(0,0,0,.2)',\r\n        width: '70vw',\r\n        margin: \"0 auto\",\r\n        padding: '12px 16px',\r\n        textAlign: 'left',\r\n        whiteSpace: 'pre-wrap',\r\n        overflow: 'auto'\r\n    },\r\n\r\n    commenterAndDateTime: {\r\n        marginTop: '16px',\r\n        width: 'calc(70vw + 32px)',\r\n        padding: '4px 0',\r\n        margin: '0 auto',\r\n        textAlign: 'left',\r\n        color: theme.palette.primary.main,\r\n        fontSize: 12\r\n    },\r\n});\r\n\r\nconst Comment = (props) => {\r\n    const { classes } = props;\r\n    const { Comment, Commenter, Comment_Date_Time } = props.comment;\r\n    \r\n    let dateTime = new Date(Comment_Date_Time).toLocaleString();\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className={classes.commenterAndDateTime}>\r\n                {Commenter} at {dateTime}\r\n            </div>\r\n\r\n            <div className={classes.commentArea}>              \r\n                {Comment}\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(Comment);","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { ExpansionPanelDetails, TextField, Button, Typography, Link, Step, StepLabel, Stepper } from '@material-ui/core';\r\n\r\nimport { retrieveSubmissionCommentHistory, addSubmissionComment, downloadMostRecentFile } from '../../Redux/actions/dataSubmission';\r\n\r\nimport Comment from './Comment';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = (theme) => ({\r\n    panelDetails: {\r\n        display: 'block',\r\n        textAlign: 'left'\r\n    },\r\n\r\n    newCommentDiv: {\r\n        width: '70vw',\r\n        margin: '24px auto 0px auto'\r\n    },\r\n\r\n    newCommentTextField: {\r\n        flexBasis: 'calc(70vw - 200px)',\r\n        marginRight: '16px'\r\n    },\r\n\r\n    postButton: {\r\n        color: 'white',\r\n        marginTop: '16px',\r\n        textTransform: 'none'\r\n    },\r\n\r\n    setPhaseButton: {\r\n        color: 'white',\r\n        marginLeft: '12px'\r\n    },\r\n\r\n    stepper: {\r\n        borderRadius: '4px',\r\n        margin: '16px 2vw 24px 2vw'\r\n    },\r\n\r\n    newUpload: {\r\n        marginLeft: '2vw',\r\n        cursor: 'pointer'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    submissionCommentHistoryRetrievalState: state.submissionCommentHistoryRetrievalState,\r\n    submissionComments: state.submissionComments\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveSubmissionCommentHistory,\r\n    addSubmissionComment,\r\n    downloadMostRecentFile\r\n};\r\n\r\nconst steps = [\r\n    {\r\n        label: 'Submission'\r\n    },\r\n\r\n    {\r\n        label: 'Admin Approval'\r\n    },\r\n\r\n    {\r\n        label: 'DOI'\r\n    },\r\n\r\n    {\r\n        label: 'Ingestion'\r\n    }\r\n]\r\n\r\nconst UserDashboardPanelDetails = (props) => {\r\n    const { classes, submission } = props;\r\n\r\n    const [ comment, setComment ] = React.useState();\r\n\r\n    let comments = props.submissionComments[submission.Submission_ID];\r\n    let renderComments = Boolean(comments && comments.length);\r\n\r\n    let activeStep;\r\n\r\n    switch(submission.Phase){\r\n        case 'Awaiting admin action':\r\n            activeStep = 1;\r\n            break;\r\n\r\n        case 'Awaiting user update':\r\n            activeStep = 1;\r\n            break;  \r\n\r\n        case 'Awaiting DOI':\r\n            activeStep = 2;\r\n            break;\r\n\r\n        case 'Awaiting ingestion':\r\n            activeStep = 3;\r\n            break;\r\n\r\n        default:\r\n            activeStep = 1;        \r\n    }\r\n\r\n    useEffect(() => {\r\n        props.retrieveSubmissionCommentHistory(submission.Submission_ID);\r\n    }, []);\r\n\r\n    // control this input from redux so we can reset properly, also create connected \"NewComment\" component\r\n    const handlePostComment = () => {\r\n        props.addSubmissionComment(submission.Submission_ID, comment);\r\n        setComment('');\r\n    }\r\n\r\n    return (\r\n        <ExpansionPanelDetails className={classes.panelDetails}>\r\n            <Stepper \r\n                className={classes.stepper} \r\n                alternativeLabel \r\n                activeStep={activeStep}\r\n            >\r\n                {steps.map((item, i) => {\r\n                        return (\r\n                            <Step key={i}>\r\n                                <StepLabel>\r\n                                    {item.label}\r\n                                </StepLabel>\r\n                            </Step>\r\n                        )\r\n                    })} \r\n            </Stepper>\r\n\r\n            <Typography className={classes.newUpload}>\r\n                <Link component={RouterLink} to={`/datasubmission/validationtool?submissionID=${encodeURIComponent(submission.Submission_ID)}`}>Update</Link> this submission.\r\n            </Typography>\r\n\r\n            <Typography className={classes.newUpload}>\r\n                <Link component='span' onClick={() => props.downloadMostRecentFile(submission.Submission_ID)}>Download</Link> the most recent version.\r\n            </Typography>\r\n\r\n            {\r\n                props.submissionCommentHistoryRetrievalState === states.inProgress ?\r\n                'Loading Comments.....' : \r\n\r\n                <React.Fragment>\r\n                    {\r\n                        renderComments && comments.map((e,i) => (\r\n                            <Comment comment={e} key={i}/>\r\n                        ))\r\n                    }\r\n                </React.Fragment>\r\n            }\r\n            <div className={classes.newCommentDiv}>\r\n                <TextField\r\n                    multiline\r\n                    rows={4}\r\n                    variant='outlined'\r\n                    onChange={(e) => setComment(e.target.value)}\r\n                    value={comment}\r\n                    fullWidth\r\n                />\r\n\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary' \r\n                    className={classes.postButton}\r\n                    onClick={handlePostComment}\r\n                >\r\n                    Post Message\r\n                </Button>\r\n            </div>\r\n        </ExpansionPanelDetails>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(UserDashboardPanelDetails));","import React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport { Link, ExpansionPanel, ExpansionPanelSummary, Typography } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport { retrieveDataSubmissionsByUser } from '../../Redux/actions/dataSubmission';\r\n\r\nimport UserDashboardPanelDetails from './UserDashboardPanelDetails';\r\nimport LoginRequiredPrompt from '../User/LoginRequiredPrompt';\r\n\r\n// import colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n    dataSubmissions: state.dataSubmissions\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveDataSubmissionsByUser\r\n}\r\n\r\nconst styles = theme => ({\r\n    wrapperDiv: {\r\n        width: '90vw',\r\n        margin: '24px auto'\r\n    },\r\n\r\n    panelSummaryText: {\r\n        flexBasis: '40%',\r\n        textAlign: 'left',\r\n        paddingRight: '20px',\r\n        fontSize: '.8rem'\r\n    },\r\n\r\n    needHelp: {\r\n        float: 'left',\r\n        color: 'white',\r\n        margin: '12px 0 0 12px',\r\n        letterSpacing: 'normal'\r\n    },\r\n\r\n})\r\n\r\nclass UserDashboard extends React.Component {\r\n    state = {\r\n        expandedPanel: false\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.props.retrieveDataSubmissionsByUser();\r\n\r\n        let params = new URLSearchParams(window.location.search)\r\n        let submissionID = params.get('submissionID');\r\n        let datasetName = params.get('datasetName');\r\n\r\n        if(submissionID){\r\n            this.props.dataSubmissions.forEach((e, i) => {\r\n                if(submissionID == e.Submission_ID){\r\n                    this.setState({...this.state, expandedPanel: i});\r\n                }\r\n            })\r\n        }\r\n\r\n        if(datasetName){\r\n            this.props.dataSubmissions.forEach((e, i) => {\r\n                if(datasetName.trim() == e.Dataset.trim()){\r\n                    this.setState({...this.state, expandedPanel: i});\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n        if(!prevProps.user && this.props.user){\r\n            this.props.retrieveDataSubmissionsByUser();\r\n        }\r\n    }\r\n\r\n    handleExpansion = (i) => {\r\n        this.props.history.push({ pathname: '/datasubmission/userdashboard', query: {} });\r\n        if(this.state.expandedPanel === i){\r\n            this.setState({...this.state, expandedPanel: false});\r\n        }\r\n\r\n        else {\r\n            this.setState({...this.state, expandedPanel: i});\r\n        }\r\n    }\r\n\r\n    render = () => {\r\n        if(!this.props.user) return <LoginRequiredPrompt/>    \r\n        const { classes, dataSubmissions } = this.props;\r\n        const { expandedPanel } = this.state;\r\n\r\n        return (\r\n            <div className={classes.wrapperDiv}>\r\n            {dataSubmissions && dataSubmissions.length ?\r\n\r\n            <React.Fragment>                    \r\n                {\r\n                    dataSubmissions.map((e, i) => (\r\n                        <ExpansionPanel \r\n                            expanded={expandedPanel === i}\r\n                            onChange={() => this.handleExpansion(i)} \r\n                            key={i}\r\n                            TransitionProps={{ unmountOnExit: true }}\r\n                        >\r\n                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                \r\n                                <Typography noWrap className={classes.panelSummaryText}>\r\n                                    {e.Dataset}\r\n                                </Typography>\r\n\r\n                                <Typography noWrap className={classes.panelSummaryText}>\r\n                                    {e.Phase}\r\n                                </Typography>\r\n                            </ExpansionPanelSummary>\r\n\r\n                            <UserDashboardPanelDetails \r\n                                submission={e} \r\n                            />\r\n                        </ExpansionPanel>\r\n                    ))\r\n                }\r\n            </React.Fragment>\r\n                \r\n                :\r\n\r\n                <Typography className={classes.needHelp}>\r\n                    We haven't received any submissions from you yet. Need help? \r\n                    <Link \r\n                        href='https://github.com/simonscmap/DBIngest/raw/master/template/datasetTemplate.xlsx' \r\n                        download='datasetTemplate.xlsx' \r\n                        className={classes.needHelpLink}\r\n                    >\r\n                        &nbsp;Download\r\n                    </Link>\r\n                    &nbsp;a blank template, or view the <Link className={classes.needHelpLink} component={RouterLink} to='/datasubmission/guide'>Data Submission Guide</Link>.\r\n                </Typography>\r\n            }\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(UserDashboard)));","import React, { useEffect } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { ExpansionPanelDetails, TextField, Button, Select, MenuItem, Typography, Link } from '@material-ui/core';\r\n\r\nimport { retrieveSubmissionCommentHistory, addSubmissionComment, setSubmissionPhase, downloadMostRecentFile } from '../../Redux/actions/dataSubmission';\r\n\r\nimport Comment from './Comment';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = (theme) => ({\r\n    panelDetails: {\r\n        display: 'block'\r\n    },\r\n\r\n    newCommentDiv: {\r\n        width: '70vw',\r\n        margin: '24px auto 0px auto'\r\n    },\r\n\r\n    newCommentTextField: {\r\n        flexBasis: 'calc(70vw - 200px)',\r\n        marginRight: '16px'\r\n    },\r\n\r\n    postButton: {\r\n        color: 'white',\r\n        marginTop: '16px',\r\n        textTransform: 'none'\r\n    },\r\n\r\n    setPhaseButton: {\r\n        color: 'white',\r\n        marginLeft: '12px'\r\n    },\r\n\r\n    phaseControlWrapper: {\r\n        textAlign: 'left',\r\n        margin: '12px 0 32px 0'\r\n    },\r\n\r\n    phaseSelect: {\r\n        width: '190px'\r\n    },\r\n\r\n    newUpload: {\r\n        marginBottom: '2vw',\r\n        cursor: 'pointer',\r\n        textAlign: 'left'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    submissionCommentHistoryRetrievalState: state.submissionCommentHistoryRetrievalState,\r\n    submissionComments: state.submissionComments\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveSubmissionCommentHistory,\r\n    addSubmissionComment,\r\n    setSubmissionPhase,\r\n    downloadMostRecentFile\r\n};\r\n\r\nconst AdminDashboardPanelDetails = (props) => {\r\n    const { classes, submission, setSubmissionPhase } = props;\r\n\r\n    const [ comment, setComment ] = React.useState();\r\n    const [ phase, setPhase ] = React.useState(submission.Phase_ID);\r\n\r\n    let comments = props.submissionComments[submission.Submission_ID];\r\n    let renderComments = Boolean(comments && comments.length);\r\n\r\n    useEffect(() => {\r\n        props.retrieveSubmissionCommentHistory(submission.Submission_ID);\r\n    }, []);\r\n\r\n    // control this input from redux so we can reset properly, also create connected \"NewComment\" component\r\n    const handlePostComment = () => {\r\n        props.addSubmissionComment(submission.Submission_ID, comment);\r\n        setComment('');\r\n    }\r\n    \r\n    const handlePhaseChange = (e) => {\r\n        setPhase(e.target.value);\r\n    }\r\n\r\n    const handleCommitPhase = () => {\r\n        props.handleResetExpandedPanel();\r\n        setSubmissionPhase(submission.Submission_ID, phase);\r\n    }\r\n\r\n    return (\r\n        <ExpansionPanelDetails className={classes.panelDetails}>\r\n            <Typography className={classes.newUpload}>\r\n                <Link component='span' onClick={() => props.downloadMostRecentFile(submission.Submission_ID)}>Download</Link> the most recent version.\r\n            </Typography>\r\n\r\n            <div className={classes.phaseControlWrapper}>\r\n                <Select value={phase} onChange={handlePhaseChange} className={classes.phaseSelect}>\r\n                    <MenuItem value={2}>Awaiting admin action</MenuItem>\r\n                    <MenuItem value={3}>Awaiting user update</MenuItem>\r\n                    <MenuItem value={4}>Awaiting DOI</MenuItem>\r\n                    <MenuItem value={5}>Awaiting ingestion</MenuItem>\r\n                    <MenuItem value={6}>Complete</MenuItem>\r\n                </Select>\r\n\r\n                <Button\r\n                    variant='contained' \r\n                    color='primary' \r\n                    onClick={handleCommitPhase}\r\n                    className={classes.setPhaseButton}\r\n                    disabled={Boolean(phase === submission.Phase_ID)}\r\n                >\r\n                    Set Phase\r\n                </Button>\r\n            </div>\r\n\r\n            {\r\n                props.submissionCommentHistoryRetrievalState === states.inProgress ?\r\n                'Loading Comments.....' : \r\n\r\n                <React.Fragment>\r\n                    {\r\n                        renderComments && comments.map((e,i) => (\r\n                            <Comment comment={e} key={i}/>\r\n                        ))\r\n                    }\r\n                </React.Fragment>\r\n            }\r\n            <div className={classes.newCommentDiv}>\r\n                <TextField\r\n                    multiline\r\n                    rows={4}\r\n                    variant='outlined'\r\n                    onChange={(e) => setComment(e.target.value)}\r\n                    value={comment}\r\n                    // className={classes.newCommentTextField}\r\n                    fullWidth\r\n                />\r\n\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary' \r\n                    className={classes.postButton}\r\n                    onClick={handlePostComment}\r\n                >\r\n                    Post Message\r\n                </Button>\r\n            </div>\r\n        </ExpansionPanelDetails>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(AdminDashboardPanelDetails));","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nimport * as JsSearch from 'js-search';\r\n\r\nimport { ExpansionPanel, ExpansionPanelSummary, Typography, FormGroup, FormControlLabel, Checkbox, TextField, InputAdornment } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport AdminDashboardPanelDetails from './AdminDashboardPanelDetails';\r\n\r\nimport { retrieveAllSubmissions } from '../../Redux/actions/dataSubmission';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n    dataSubmissions: state.dataSubmissions\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    retrieveAllSubmissions\r\n}\r\n\r\nconst styles = theme => ({\r\n    wrapperDiv: {\r\n        width: '90vw',\r\n        margin: '24px auto'\r\n    },\r\n\r\n    panelSummaryText: {\r\n        flexBasis: '40%',\r\n        textAlign: 'left',\r\n        paddingRight: '20px',\r\n        fontSize: '.8rem'\r\n    },\r\n\r\n    filterFormGroup: {\r\n        backgroundColor: 'rgba(0,0,0,.4)',\r\n        color: 'white',\r\n        padding: '8px 12px',\r\n        borderTopLeftRadius: '4px',\r\n        borderTopRightRadius: '4px',\r\n        flexWrap: 'wrap'\r\n    },\r\n\r\n    filterFormControl: {\r\n        marginRight: '24px'\r\n    },\r\n\r\n    searchFieldWrapper: {\r\n        flexBasis: '100%',\r\n        textAlign: 'left'\r\n    }\r\n})\r\n\r\nconst initialFilterState = {\r\n    'Awaiting admin action': true,\r\n    'Awaiting user update': true,\r\n    'Awaiting DOI': true,\r\n    'Awaiting ingestion': true,\r\n    'Complete': false\r\n}\r\n\r\nclass AdminDashboard extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        let params = new URLSearchParams(window.location.search)\r\n        let datasetName = params.get('datasetName') && params.get('datasetName').trim();\r\n\r\n        var search = new JsSearch.Search('Submission_ID');\r\n        search.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Dataset');\r\n        search.addIndex('Name');\r\n\r\n        if(props.dataSubmissions) search.addDocuments(props.dataSubmissions);\r\n\r\n        this.state = {\r\n            searchString: datasetName || '',\r\n            search,\r\n            expandedPanel: false,\r\n            filters: initialFilterState,\r\n            modifiedDatasetID: null\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.dataSubmissions && prevProps.dataSubmissions.length) && (this.props.dataSubmissions && this.props.dataSubmissions.length)){\r\n            this.state.search.addDocuments(this.props.dataSubmissions);\r\n            this.setState({search: this.state.search});\r\n        }\r\n\r\n        if(!prevProps.user && this.props.user) this.props.retrieveAllSubmissions();\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.props.retrieveAllSubmissions();\r\n    }\r\n\r\n    handleExpansion = (i) => {\r\n        if(this.state.expandedPanel === i){\r\n            this.setState({...this.state, expandedPanel: false})\r\n        }\r\n\r\n        else {\r\n            this.setState({...this.state, expandedPanel: i})\r\n        }\r\n    }\r\n\r\n    handleChangeFilter = (e) => {\r\n        let newFilterState = {...this.state.filters};\r\n        newFilterState[e.target.name] = !newFilterState[e.target.name];\r\n        this.setState({...this.state, filters: {...newFilterState}});\r\n    }\r\n\r\n    handleChangeSearchString = (e) => {\r\n        this.setState({...this.state, searchString: e.target.value});\r\n    }\r\n\r\n    handleResetExpandedPanel = () => {\r\n        this.setState({...this.state, expandedPanel: false});\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, dataSubmissions } = this.props;\r\n        const { search, searchString } = this.state;\r\n        \r\n        let submissions = searchString ? \r\n            search.search(searchString).filter(item => this.state.filters[item.Phase]) :\r\n            dataSubmissions.filter(item => this.state.filters[item.Phase]);\r\n\r\n        return (\r\n            <div className={classes.wrapperDiv}>\r\n                <FormGroup row className={classes.filterFormGroup}>\r\n                    <div className={classes.searchFieldWrapper}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            value={searchString}\r\n                            onChange={this.handleChangeSearchString}\r\n                            placeholder='Search'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <Search style={{color:colors.primary}}/>\r\n                                </InputAdornment>\r\n                            )\r\n                        }}\r\n                        />\r\n                    </div>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={this.state.filters[\"Awaiting admin action\"]}\r\n                                    onChange={this.handleChangeFilter}\r\n                                    name=\"Awaiting admin action\"\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Awaiting admin action\"\r\n                            className={classes.filterFormControl}\r\n                        />\r\n\r\n                        <FormControlLabel\r\n                                control={\r\n                                    <Checkbox\r\n                                        checked={this.state.filters[\"Awaiting user update\"]}\r\n                                        onChange={this.handleChangeFilter}\r\n                                        name=\"Awaiting user update\"\r\n                                        color=\"primary\"\r\n                                    />\r\n                                }\r\n                                label=\"Awaiting user update\"\r\n                                className={classes.filterFormControl}\r\n                            />\r\n\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                checked={this.state.filters[\"Awaiting DOI\"]}\r\n                                onChange={this.handleChangeFilter}\r\n                                name=\"Awaiting DOI\"\r\n                                color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Awaiting DOI\"\r\n                            className={classes.filterFormControl}\r\n                            />\r\n\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                checked={this.state.filters[\"Awaiting ingestion\"]}\r\n                                onChange={this.handleChangeFilter}\r\n                                name=\"Awaiting ingestion\"\r\n                                color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Awaiting ingestion\"\r\n                            className={classes.filterFormControl}\r\n                            />\r\n\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                checked={this.state.filters[\"Complete\"]}\r\n                                onChange={this.handleChangeFilter}\r\n                                name=\"Complete\"\r\n                                color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Complete\"\r\n                            className={classes.filterFormControl}\r\n                            />\r\n                    </FormGroup>\r\n\r\n                {submissions && submissions.length ?\r\n\r\n                <React.Fragment>                    \r\n                    {\r\n                        submissions.map((e, i) => (\r\n                            <ExpansionPanel \r\n                                // expanded={e.expandPanel} \r\n                                expanded={this.state.expandedPanel === i}\r\n                                onChange={() => this.handleExpansion(i)} \r\n                                key={i}\r\n                                TransitionProps={{ unmountOnExit: true }}\r\n                            >\r\n                                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                    <Typography noWrap className={classes.panelSummaryText}>\r\n                                        {e.Dataset}\r\n                                    </Typography>\r\n    \r\n                                    <Typography noWrap className={classes.panelSummaryText}>\r\n                                        {e.Phase}\r\n                                    </Typography>\r\n                                </ExpansionPanelSummary>\r\n                                <AdminDashboardPanelDetails \r\n                                    submission={e} \r\n                                    handleResetExpandedPanel={this.handleResetExpandedPanel}\r\n                                />\r\n                            </ExpansionPanel>\r\n                        ))\r\n                    }\r\n                </React.Fragment>\r\n                    \r\n                    :\r\n\r\n                    <Typography>\r\n                        No submissions yet...\r\n                    </Typography>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(AdminDashboard));","import React from 'react';\r\n\r\nimport { Route, Switch } from 'react-router-dom'\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport ValidationTool from './ValidationTool';\r\nimport SubmissionGuide from './SubmissionGuide';\r\nimport UserDashboard from './UserDashboard';\r\nimport AdminDashboard from './AdminDashboard';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        paddingTop: '70px'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarOpen\r\n}\r\n\r\nclass DataSubmission extends React.Component {\r\n\r\n    // componentDidCatch = () => {\r\n    //     this.props.snackbarOpen('An error occurred');\r\n    // }\r\n\r\n    render = () => {\r\n        const { classes, match, user } = this.props;\r\n        return (\r\n            <div className={classes.root}>\r\n            <Switch>\r\n                <Route exact path={match.url + '/'} component={ SubmissionGuide } />\r\n                <Route exact path={match.url + '/guide'} component={ SubmissionGuide } />\r\n                <Route exact path={match.url + '/validationtool'} component={ ValidationTool } />\r\n                <Route exact path={match.url + '/userdashboard'} component={ UserDashboard } />\r\n                <Route exact path={match.url + '/admindashboard'} component={ AdminDashboard } /> \r\n            </Switch>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DataSubmission));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Typography, TextField, Paper, Grid, Button } from '@material-ui/core';\r\n\r\nimport { snackbarOpen } from '../Redux/actions/ui';\r\nimport { contactUsRequestSend } from '../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        color: 'white',\r\n        width: '65vw',\r\n        marginTop: theme.spacing(18),\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        marginBottom: theme.spacing(8),\r\n        padding: theme.spacing(2)\r\n    },\r\n\r\n    header: {\r\n        color: theme.palette.primary.main,\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    \r\n    description: {\r\n        marginBottom: theme.spacing(3)\r\n    },\r\n\r\n    textField: {\r\n        marginLeft: 0,\r\n        marginRight: theme.spacing(2),\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    messageTextField: {\r\n        width: '100%'\r\n    },\r\n\r\n    submitButton: {\r\n        marginTop: theme.spacing(2),\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    contactUsRequestSend,\r\n    snackbarOpen\r\n};\r\n\r\nclass ContactUs extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            name: props.user ? props.user.firstName + ' ' + props.user.lastName : '',\r\n            email: props.user ? props.user.email : '',\r\n            subject: '',\r\n            message: ''\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        let payload = {...this.state};\r\n        var invalid = false;\r\n        Object.keys(payload).forEach(key => {\r\n            payload[key] = payload[key].trim();\r\n            if(payload[key].length < 1) invalid = true;\r\n        });\r\n\r\n        if(invalid) {\r\n            this.props.snackbarOpen('Please complete all fields');\r\n            return;\r\n        }\r\n        \r\n        this.props.contactUsRequestSend(payload);\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <Paper className={classes.root} elevation={6}>\r\n                <Typography variant='h4' className={classes.header} align='left'>\r\n                    Contact Us\r\n                </Typography>\r\n    \r\n                <Typography variant='body2' className={classes.description} align='left'>\r\n                    Have a question or feedback? Fill out the form below to contact a member of the Simons CMAP team.\r\n                </Typography>\r\n\r\n                <Grid container>\r\n                    <Grid item container direction='column' justify='flex-start' xs={12} md={3}>\r\n                        <TextField\r\n                            name='name'\r\n                            label='Name'\r\n                            value={this.state.name}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n\r\n                        <TextField\r\n                            name='email'\r\n                            label='Email'\r\n                            value={this.state.email}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n\r\n                        <TextField\r\n                            name='subject'\r\n                            label='Subject'\r\n                            value={this.state.subject}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={9}>\r\n                        <TextField\r\n                            placeholder='Your message...'\r\n                            value={this.state.message}\r\n                            className={classes.messageTextField}\r\n                            name='message'\r\n                            onChange={this.handleChange}\r\n                            multiline\r\n                            rows='10'\r\n                            variant='outlined'\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary'\r\n                    className={classes.submitButton}\r\n                    onClick={this.handleSubmit}\r\n                >\r\n                    Submit\r\n                </Button>\r\n    \r\n            </Paper>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ContactUs));","import React from 'react';\r\n\r\nimport { Grid, Typography, Paper, Tooltip, Link, Button } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        marginTop: '70px'\r\n    },\r\n\r\n    descriptionPaper: {\r\n        padding: '6vh 6vw',\r\n        margin: '110px 10vw 0px 10vw'\r\n    },\r\n\r\n    iconContainer: {\r\n        marginTop: '4vh'\r\n    },\r\n\r\n    followContainer: {\r\n        marginTop: '4vh'\r\n    },\r\n\r\n    softwareIcon: {\r\n        maxHeight: 'calc(100% - 1vh)',\r\n        maxWidth: 'calc(100% - .5vw)',\r\n        height: '110px',\r\n    },\r\n\r\n    followUs: {\r\n        lineHeight: 3.1,\r\n        fontSize: '16px'\r\n    },\r\n\r\n    followUsGridSection: {\r\n        textAlign: 'right',\r\n        marginBottom: '12px'\r\n    },\r\n\r\n    followUsIcon: {\r\n        marginLeft: '12px'\r\n    },\r\n\r\n    docButtonGrid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '12px'\r\n    },\r\n\r\n    docButton: {\r\n        color: 'white',\r\n        textTransform: 'none',        \r\n        width: '180px'\r\n    }\r\n})\r\n\r\nconst CommunityTemp = (props) => {\r\n    const { classes } = props;\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper className={classes.descriptionPaper} elevation={8}>\r\n                <Typography variant='body1'>\r\n                    Simons CMAP is a community-based project intending to further cultivate the collaborative efforts at ocean sciences. It supports popular programming languages used for data analysis and seamlessly blends into your existing codebase. Review the <Link target='_blank' href='https://cmap.readthedocs.io/en/latest/'>documentation</Link> to discover how to retrieve, visualize, and analyze the CMAP data sets using your preferred language. There you will also find information on how your own datasets can be submitted to CMAP. Please join us and contribute to growing the CMAP data and software ecosystem.\r\n                </Typography>\r\n                \r\n                <Grid container className={classes.iconContainer}>\r\n                    <Grid item xs={12} md ={6} lg={3}>\r\n                        <a href=\"https://github.com/simonscmap/cmap4r\" target=\"_blank\">\r\n                            <img src=\"images/cmap-sdk-R-COLORED.png\" width=\"152\" alt=\"\" className={classes.softwareIcon}/>                \r\n                        </a>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md ={6} lg={3}>\r\n                        <a href=\"https://github.com/simonscmap/pycmap\" target=\"_blank\">\r\n                            <img src=\"images/cmap-sdk-python-COLORED.png\" width=\"273\" alt=\"\" className={classes.softwareIcon}/>                \r\n                        </a>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={6} lg={3}>\r\n                        <a href='https://github.com/simonscmap/CMAP.jl' target='_blank'>\r\n                            <img src=\"images/cmap-sdk-julia-COLORED.png\" width=\"176\" alt=\"\" className={classes.softwareIcon}/>                \r\n                        </a>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md ={6} lg={3}>\r\n                        <a href=\"https://github.com/simonscmap/matcmap\" target=\"_blank\">\r\n                            <img src=\"images/cmap-sdk-Matlab-COLORED.png\" alt=\"\" className={classes.softwareIcon}/>\r\n                        </a>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n                <Grid container className={classes.followContainer}>\r\n                    <Grid item xs={12} md={1}>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={5} md={2} className={classes.followUsGridSection}>\r\n                        <Typography variant='caption' className={classes.followUs}>\r\n                            Follow Us:\r\n                        </Typography>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={4} md={3}>\r\n                        <a href=\"https://github.com/simonscmap\" target=\"_blank\">\r\n                            <img src=\"images/github-icon.png\" width=\"55\" srcSet=\"images/github-icon-p-500.png 500w, images/github-icon.png 512w\" alt=\"\" className={classes.followUsIcon}/>\r\n                        </a>                        \r\n                        <a href=\"https://join.slack.com/t/simons-cmap/shared_invite/enQtNjQzMTkzMjg0NjQ2LTdlOGRhZjNhMDY3MjRlNjg2OTY5NzE3ZWZhNWE0OWZhYmQzMTJjNDkyNDQ1MjNkZDg0N2MzMzhlZDliNGYxYzQ\" target=\"_blank\" className={classes.followUsIcon}>\r\n                            <img src=\"images/slack-icon.png\" width=\"55\" srcSet=\"images/slack-icon-p-500.png 500w, images/slack-icon.png 600w\" alt=\"\"/>\r\n                        </a>                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={5} className={classes.docButtonGrid}>\r\n                        <Button color='primary' variant='contained' href=\"https://cmap.readthedocs.io/en/latest/\" target=\"_blank\" className={classes.docButton}>\r\n                            Documentation\r\n                        </Button>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={3} md={12}>\r\n                    </Grid>\r\n               \r\n                </Grid>\r\n\r\n                \r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(CommunityTemp);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Paper, Button, Typography, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { recoverPasswordRequestSend } from '../../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '10% auto',\r\n        height: '40vh'\r\n    },\r\n\r\n    description: {\r\n        paddingTop: '110px'\r\n    },\r\n\r\n    emailSentDescription: {\r\n        padding: '140px 70px 0 70px'\r\n    },\r\n\r\n    sendButton: {\r\n        marginLeft: '8px',\r\n        marginTop: '9px',\r\n        height: '41px'\r\n    },\r\n\r\n    formWrapper: {\r\n        marginTop: '24px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    recoverPasswordRequestSend\r\n}\r\n\r\nconst ForgotPass = (props) => {\r\n    const { classes } = props;\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [emailWasSent, setEmailWasSent] = React.useState(false);\r\n\r\n    const handleChange = event => {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    const handleSubmit = event => {\r\n        setEmailWasSent(true);\r\n        props.recoverPasswordRequestSend(email);\r\n    }\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n          handleSubmit();\r\n        }\r\n    }\r\n\r\n    const valid = email === '' || /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(email);\r\n\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            {emailWasSent ? \r\n                <Typography className={classes.emailSentDescription}>\r\n                    An email has been sent to {email}. If you don't receive anything from us within the next few minutes please check your spam folder.\r\n                </Typography>\r\n            :\r\n                <React.Fragment>\r\n                    <Typography className={classes.description}>\r\n                        Enter your email address below to recover your username and password.\r\n                    </Typography>\r\n            \r\n                    <div className={classes.formWrapper}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='email'                        \r\n                            value={email}\r\n                            onChange={handleChange}\r\n                            error={!valid}\r\n                            helperText={valid ? '' : 'Please enter a valid email address'}\r\n                            onKeyPress={handleKeyPress}\r\n                        />\r\n                        <Button \r\n                            color='primary' \r\n                            variant='contained' \r\n                            className={classes.sendButton} \r\n                            onClick={handleSubmit}\r\n                            disabled={Boolean(!valid || !email.length)}\r\n                        >\r\n                            Submit\r\n                        </Button>\r\n                    </div>               \r\n                </React.Fragment>\r\n            }\r\n        </Paper>                \r\n    )    \r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(ForgotPass));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nimport { Paper, Button, Typography, TextField, Grid, Link } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { choosePasswordRequestSend, choosePasswordRequestReset } from '../../Redux/actions/user';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '120px auto',\r\n        // height: '40vh',\r\n        padding: '24px 12px'\r\n    },\r\n\r\n    textFields: {\r\n        display: 'block',\r\n        width: '380px'\r\n    },\r\n\r\n    description: {\r\n        marginBottom: '12px'\r\n    },\r\n\r\n    formGrid: {\r\n        height: '270px',\r\n        padding: '0 90px'\r\n\r\n    },\r\n\r\n    button: {\r\n        width: '120px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    choosePasswordRequestSend,\r\n    choosePasswordRequestReset\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    choosePasswordState: state.choosePasswordState,\r\n  });\r\n\r\n\r\nconst choosePasswordButtonRef = React.createRef();\r\n\r\n// Used with forgot password link from email\r\nclass ChoosePassword extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        let token = props.location.pathname.split('/')[2];\r\n        let decodedToken = jwtDecode(token)\r\n        let expiration = new Date(0);\r\n        expiration.setUTCSeconds(decodedToken.exp);\r\n\r\n        let expired = new Date() > expiration;\r\n\r\n        this.state = {\r\n            password: '',\r\n            confirmPassword: '',\r\n            expired,\r\n            token,\r\n            email: decodedToken.sub\r\n        }\r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        this.props.choosePasswordRequestReset();\r\n    }\r\n\r\n    handleChangePassword = event => {\r\n        this.setState({...this.state, password: event.target.value});\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        this.props.choosePasswordRequestSend({\r\n            password: this.state.password,\r\n            token: this.state.token\r\n        })\r\n    }\r\n    handleChangeConfirmPassword = event => {\r\n        this.setState({...this.state, confirmPassword: event.target.value});\r\n    }\r\n\r\n    handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            choosePasswordButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { classes, choosePasswordState } = this.props;\r\n        const { password, confirmPassword, expired } = this.state;\r\n\r\n        const passwordValid = /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(password);\r\n        const confirmPasswordValid = password === confirmPassword;    \r\n        const disabled = Boolean(password.length === 0 || !passwordValid || !confirmPasswordValid);\r\n        \r\n        if(expired){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        This link has expired. Click here to send a <Link component={RouterLink} to={{pathname: '/forgotpass'}}>new link</Link>.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        }\r\n\r\n        if(choosePasswordState === states.succeeded){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        Success! You can now log in using your new password.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        } \r\n        \r\n        else if(choosePasswordState === states.failed){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        We were unable to complete this request. Please try again.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Paper className={classes.paper}>\r\n                <Typography className={classes.description}>\r\n                    Please choose a password\r\n                </Typography>\r\n    \r\n                <Grid direction='column' justify='space-evenly' className={classes.formGrid} container>\r\n                    <Grid item>\r\n                        <TextField     \r\n                            fullWidth           \r\n                            autoFocus\r\n                            label='Password'\r\n                            margin=\"normal\"\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='password'                        \r\n                            value={password}\r\n                            onChange={this.handleChangePassword}\r\n                            error={Boolean(!passwordValid && password.length)}\r\n                            helperText='Must be 8 to 32 characters with 1 number and 1 special character.'\r\n                            onKeyPress={this.handleKeyPress}\r\n                            InputLabelProps={{\r\n                                shrink: true\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n    \r\n                    <Grid item>\r\n                        <TextField\r\n                            fullWidth\r\n                            label='Confirm Password'\r\n                            margin=\"normal\"\r\n                            id=\"confirmPassword\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='confirmPassword'                        \r\n                            value={confirmPassword}\r\n                            onChange={this.handleChangeConfirmPassword}\r\n                            error={!confirmPasswordValid}\r\n                            helperText={confirmPasswordValid ? '' : 'Passwords must match'}\r\n                            onKeyPress={this.handleKeyPress}\r\n                            InputLabelProps={{\r\n                                shrink: true\r\n                            }}\r\n                        />                    \r\n                    </Grid>\r\n    \r\n                    <Grid item>\r\n                        <Button \r\n                            fullWidth \r\n                            variant='outlined' \r\n                            color='primary' \r\n                            disabled={disabled} \r\n                            onClick={this.handleSubmit}\r\n                            ref={choosePasswordButtonRef}\r\n                        >\r\n                            Submit\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>   \r\n            </Paper>                \r\n        )    \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(ChoosePassword)));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\nimport './Stylesheets/App.scss';\r\n\r\nimport colors from './Enums/colors';\r\n\r\nimport { Route, BrowserRouter, Switch } from 'react-router-dom'\r\n\r\nimport Home from './Components/Home';\r\nimport Catalog from './Components/Catalog/Catalog';\r\nimport Register from './Components/User/Register';\r\nimport Visualization from './Components/Visualization/Visualization';\r\nimport GlobalUIComponentWrapper from './Components/UI/GlobalUIComponentWrapper';\r\nimport LandingPage from './Components/LandingPage';\r\nimport TopNavBar from './Components/UI/TopNavBar';\r\nimport Login from './Components/User/Login';\r\nimport Profile from './Components/User/Profile';\r\nimport DataSubmission from './Components/DataSubmission/DataSubmission';\r\nimport ContactUs from './Components/ContactUs';\r\nimport CommunityTemp from './Components/Community/CommunityTemp';\r\n\r\nimport { initializeGoogleAuth } from './Redux/actions/user';\r\nimport { toggleShowHelp } from './Redux/actions/ui';\r\n\r\nimport ForgotPass from './Components/User/ForgotPass';\r\nimport ChoosePassword from './Components/User/ChoosePassword';\r\n\r\nconst theme = createMuiTheme({\r\n\r\n  typography: {\r\n    useNextVariants: true,\r\n    fontFamily: [\r\n      '\"Lato\"',\r\n      'sans-serif'\r\n    ].join(',')\r\n  },\r\n\r\n  palette: {\r\n    primary: {\r\n      contrastText: '#000000',\r\n      main: colors.primary\r\n    },\r\n\r\n    error: {\r\n      main: colors.errorYellow\r\n    },\r\n\r\n    secondary: {\r\n      main: colors.secondary,\r\n      // contrastText: '#fff700',\r\n    },\r\n\r\n    background: {\r\n      default: colors.backgroundGray,\r\n      paper: colors.backgroundGray\r\n    },\r\n\r\n    text: {\r\n      primary: '#ffffff',\r\n      secondary: colors.primary\r\n    }\r\n  },\r\n\r\n  overrides: {\r\n    MuiIconButton: {\r\n      root: {\r\n        color: colors.primary,\r\n        borderRadius: '10%'\r\n      }\r\n    },\r\n    \r\n    MuiPaper: {\r\n      root: {\r\n        backgroundColor: 'rgba(0,0,0,.3)',\r\n      }\r\n    },\r\n\r\n    MuiListItemIcon: {\r\n      root: {\r\n        minWidth: '40px'\r\n      }\r\n    },\r\n\r\n    MuiFormHelperText: {\r\n      filled: {\r\n        paddingLeft: '1px',\r\n        paddingRight: '1px',\r\n        fontSize: '13px'\r\n      }\r\n    },\r\n\r\n    MuiListItem: {\r\n      gutters: {\r\n        paddingLeft: '6px',\r\n        paddingRight: '10px'\r\n      },\r\n\r\n      root: {\r\n        paddingTop: '4px',\r\n        paddingBottom: '4px'\r\n      }\r\n    },\r\n\r\n    MuiToolbar: {\r\n      root: {\r\n        backgroundColor: 'transparent',\r\n        color: colors.primary\r\n      }\r\n    },\r\n\r\n    MuiMenuItem: {\r\n      root: {\r\n        '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n        },\r\n      }\r\n    },\r\n\r\n    MuiPickersBasePicker: {\r\n      container: {\r\n        backgroundColor: colors.backgroundGray\r\n      }\r\n    },\r\n    \r\n    MuiOutlinedInput: {\r\n      input: {\r\n        padding: '12px 14px'\r\n      },\r\n\r\n      root: {\r\n        \"&$focused\": {\r\n          \"borderColor\": colors.primary\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiSnackbarContent: {\r\n      message: {\r\n        margin: 'auto'\r\n      }\r\n    },\r\n\r\n    MuiButtonGroup: {\r\n      groupedOutlined: {\r\n        '&:not(:first-child)': {\r\n          marginLeft: 0\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiTableCell: {\r\n      root: {\r\n        borderBottomColor: \"rgba(0, 0, 0, 0.9)\"\r\n      }\r\n    },\r\n\r\n    MuiFormControl: {\r\n      marginNormal: {\r\n        marginTop: '8px'\r\n      }\r\n    },\r\n\r\n    MuiDialogContentText: {\r\n      root: {\r\n        color: 'white'\r\n      }\r\n    },\r\n\r\n    MuiExpansionPanel: {\r\n      root: {\r\n        \"&$expanded\": {\r\n          margin: 0\r\n        }\r\n      }\r\n    },\r\n    \r\n    MuiDialogTitle: {\r\n      root: {\r\n        color: colors.primary\r\n      }\r\n    },\r\n\r\n    MuiFilledInput: {\r\n      input: {\r\n        paddingLeft: '6px',\r\n      },\r\n\r\n      adornedEnd: {\r\n        paddingRight: '6px'\r\n      },\r\n\r\n      root: {\r\n        backgroundColor: 'transparent',\r\n        '&:hover': {\r\n          backgroundColor: 'transparent',\r\n        },\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent',\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiPopover: {\r\n      paper: {\r\n        backgroundColor: '#1B4156'\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  loadingMessage: state.loadingMessage\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  initializeGoogleAuth,\r\n  toggleShowHelp\r\n};\r\n\r\nclass App extends Component {\r\n  componentDidMount = () => {\r\n    this.props.initializeGoogleAuth();\r\n  }\r\n  render() {\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <div className=\"App\">\r\n          <MuiThemeProvider theme={theme}>\r\n          <BrowserRouter>\r\n            <GlobalUIComponentWrapper/>\r\n            <TopNavBar/>\r\n            <Switch>          \r\n              <Route exact path='/apikeymanagement' component={ Home } />\r\n              <Route exact path='/' component={ LandingPage } />\r\n              <Route exact path='/catalog' component={ Catalog } />\r\n              <Route exact path='/login' component={ Login } />\r\n              <Route exact path='/register' component={ Register } />\r\n              <Route exact path='/visualization' component={Visualization} />\r\n              <Route exact path='/profile' component={Profile} />\r\n              <Route exact path='/forgotpass' component={ForgotPass} />\r\n              <Route path='/datasubmission' component={DataSubmission} />\r\n              <Route path='/choosepassword' component={ChoosePassword} />\r\n              <Route exact path='/contact' component={ContactUs}/>\r\n              <Route path='/community' component={CommunityTemp} />\r\n            </Switch>\r\n          </BrowserRouter>\r\n          </MuiThemeProvider>\r\n        </div>\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './Stylesheets/index.css';\r\nimport 'ag-grid-enterprise';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { Provider } from 'react-redux'\r\nimport store from './Redux/store';\r\n\r\nimport App from './App'\r\n\r\nimport {LicenseManager} from \"ag-grid-enterprise\";\r\n\r\nLicenseManager.setLicenseKey(\"School_of_Oceanography_Simons_CMAP_1Devs_1Deployment_19_June_2020__MTU5MjUyMTIwMDAwMA==aec33f954c06d90afed06467402921bd\");\r\n\r\nconst rootElement = document.getElementById('root')\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>,\r\n  rootElement\r\n)\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}