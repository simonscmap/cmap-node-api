{"version":3,"sources":["serviceWorker.js","Redux/actionTypes/catalog.js","Enums/asyncRequestStates.js","Redux/actionTypes/user.js","Redux/Reducers/ui.js","Redux/actionTypes/visualization.js","Redux/Reducers/index.js","Redux/Reducers/catalog.js","Redux/Reducers/user.js","Redux/actionTypes/ui.js","Redux/Reducers/visualization.js","Redux/actions/user.js","Redux/actions/catalog.js","Redux/actions/ui.js","Redux/actions/visualization.js","config.js","Enums/spatialResolutions.js","Utility/mapSpatialResolutionToNumber.js","Utility/flattenArray.js","Utility/splitData.js","Utility/mergeArraysAndComputeMeans.js","Utility/mergeArrays.js","Enums/visualizationSubTypes.js","Enums/temporalResolutions.js","Classes/SpaceTimeData.js","Enums/storedProcedures.js","Classes/TimeSeriesData.js","Classes/DepthProfileData.js","Classes/SectionMapData.js","Classes/SparseData.js","api.js","Redux/sagas.js","Redux/store.js","Enums/colors.js","Components/User/ApiKeyManagement.js","Components/User/LoginRequiredPrompt.js","Components/Home.js","Components/Catalog/GridDetail.js","Components/Catalog/DatasetDescriptionDialog.js","Components/Catalog/VariableDescriptionDialog.js","Components/UI/ConnectedTooltip.js","Components/Catalog/GroupedDatasetRow.js","Components/Catalog/AGGridWrapper.js","Components/Catalog/Catalog.js","Components/User/RegistrationCard.js","Components/User/RegistrationStepper.js","Components/User/GoogleSignInButton.js","Components/User/Register.js","Enums/validation.js","Components/Visualization/TableStatsDialog.js","Utility/mapTemporalResolutionToNumber.js","Utility/utcDateStringToLocal.js","Utility/depthCounter.js","Utility/countWebGLContexts.js","Components/Visualization/VizControlPanel.js","Components/Visualization/DownloadConfirmationDialog.js","Enums/months.js","Utility/handleChartDatestring.js","Utility/chartBase.js","Components/Visualization/ChartControlPanel.js","Components/Visualization/SparseHistogram.js","Utility/handleXTicks.js","Utility/getChartDimensions.js","Components/Visualization/SpaceTimeChart.js","Components/Visualization/TimeSeriesChart.js","Components/Visualization/DepthProfileChart.js","Components/Visualization/SectionMapChart.js","Components/Visualization/SparseScatter.js","Components/Visualization/SparseMap.js","Components/Visualization/Charts.js","Components/Visualization/CruiseSelector.js","Components/Visualization/MapContainer.js","Utility/cleanSPParams.js","Utility/localDateToString.js","Components/Visualization/Visualization.js","Utility/starsBase64.js","Components/User/LoginDialog.js","Components/UI/SnackbarWrapper.js","Components/UI/LoadingOverlay.js","Components/UI/GlobalUIComponentWrapper.js","Components/LandingPage.js","Stylesheets/JSS.js","Components/User/UserNavbarDropdown.js","Components/DataSubmission/DataSubmissionNavbarDropdown.js","Components/UI/TopNavBar.js","Components/User/Login.js","Components/User/ChangePassword.js","Components/User/ChangeEmail.js","Components/User/Profile.js","Components/DataSubmission/ValidationTool.js","Components/DataSubmission/SubmissionGuide.js","Components/DataSubmission/DataSubmission.js","Components/ContactUs.js","Components/User/ForgotPass.js","Components/User/ChoosePassword.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","RETRIEVAL_REQUEST_SEND","DATASET_RETRIEVAL_REQUEST_SEND","states","inProgress","failed","succeeded","expired","LOG_OUT","LOGIN_REQUEST_SEND","GOOGLE_LOGIN_REQUEST_SEND","REGISTRATION_REQUEST_SEND","VALIDATION_REQUEST_SEND","KEY_RETRIEVAL_REQUEST_SEND","KEY_CREATION_REQUEST_SEND","UPDATE_USER_INFO_REQUEST_SEND","REFRESH_LOGIN","INITIALIZE_GOOGLE_AUTH","RECOVER_PASSWORD_REQUEST_SEND","CHOOSE_PASSWORD_REQUEST_SEND","CONTACT_US_REQUEST_SEND","CHANGE_PASSWORD_REQUEST_SEND","CHANGE_EMAIL_REQUEST_SEND","uiResetState","catalogRequestState","loginDialogIsOpen","registrationActiveStep","userLoginState","userLoginError","userValidationState","userValidationError","userRegistrationState","apiKeyRetrievalState","apiKeyCreationState","QUERY_REQUEST_SEND","STORED_PROCEDURE_REQUEST_SEND","TABLE_STATS_REQUEST_SEND","CRUISE_TRAJECTORY_REQUEST_SEND","CRUISE_LIST_REQUEST_SEND","CSV_DOWNLOAD_REQUEST_SEND","DOWNLOAD_TEXT_AS_CSV","initialState","catalog","datasetRequestState","datasets","changePasswordDialogIsOpen","changeEmailDialogIsOpen","snackbarIsOpen","snackbarMessage","loadingMessage","showHelp","user","JSON","parse","Cookies","get","apiKeys","clearLoginDialog","choosePasswordState","maps","charts","getCruiseTrajectoryRequestState","cruiseTrajectory","sampleData","queryRequestState","storedProcedureRequestState","getTableStatsRequestState","cruiseList","getCruiseListRequestState","showChartsOnce","chartID","reducedReducer","reduceReducers","state","action","type","payload","datasetsRequestState","keys","message","layers","newLayer","mapInfo","chartInfo","id","slice","chartIndex","trajectory","datasetLongName","tableStats","userLoginRequestProcessing","userLoginRequestFailure","error","userLoginRequestSuccess","storeInfo","googleLoginRequestSend","userIDToken","userActionTypes","googleLoginRequestProcessing","logOut","destroyInfo","userValidationRequestProcessing","userValidationRequestFailure","userValidationRequestSuccess","userRegistrationRequestProcessing","userRegistrationRequestFailure","keyRetrievalRequestSend","keyRetrievalRequestSuccess","keyRetrievalRequestFailure","keyCreationRequestProcessing","keyCreationRequestSuccess","refreshLogin","choosePasswordRequestSuccess","choosePasswordRequestFailure","retrievalRequestSend","catalogActionTypes","retrievalRequestSuccess","retrievalRequestFailure","datasetRetrievalRequestSend","datasetRetrievalRequestProcessing","datasetRetrievalRequestSuccess","showLoginDialog","hideLoginDialog","registrationNextActiveStep","restoreInterfaceDefaults","snackbarOpen","setLoadingMessage","hideChangePasswordDialog","hideChangeEmailDialog","queryRequestSuccess","data","queryRequestProcessing","storedProcedureRequestSuccess","storedProcedureRequestFailure","storedProcedureRequestProcessing","storeSampleData","addChart","tableStatsRequestProcessing","tableStatsRequestSuccess","cruiseTrajectoryRequestSend","visualizationActionTypes","cruiseTrajectoryRequestSuccess","cruiseTrajectoryRequestProcessing","cruiseListRequestSend","cruiseListRequestSuccess","cruiseListRequestFailure","cruiseListRequestProcessing","triggerShowCharts","csvDownloadRequestSend","query","fileName","csvDownloadRequestProcessing","downloadTextAsCsv","text","datasetName","apiUrl","spatialResolutions","irregular","halfDegree","quarterDegree","twentyFifthDegree","fourKm","twelfthDegree","seventyKm","oneDegree","nineKm","twentyFiveKm","mapSpatialResolutionToNumber","resolution","flattenArray","arr","flattenedArray","i","length","j","push","splitData","changeInterval","numDistinct","Math","floor","mergeArraysAndComputeMeans","mergeTargetDistance","nextMergeStartDistance","numArraysPerMerge","mergedArrays","travelDistance","subArray","sum","count","k","isNaN","mergeArrays","subTypes","sectionMap","contourSectionMap","timeSeries","histogram","depthProfile","heatmap","contourMap","sparse","temporalResolutions","threeMinutes","sixHourly","daily","weekly","monthly","annual","monthlyClimatology","threeDay","eightDayRunning","eightDays","SpaceTimeData","generateCsv","csvArray","dates","Array","from","depths","hasDepth","parameters","fields","variableValues","lats","lons","join","this","metadata","hasHours","isMonthly","Set","zMin","zMax","extent","indexAdjust","lonMin","lonMax","latMin","latMax","distinctLatCount","distinctLonCount","row","lat","parseFloat","_lon","lon","lon1","hasHour","Table_Name","Temporal_Resolution","time","value","add","Date","setUTCHours","toISOString","size","lonCount","latCount","quantile1","quantile","quantile2","undefined","toPrecision","spatialResolution","Spatial_Resolution","round","subType","splitByDate","splitByDepth","variableValueSubsets","depthInterval","dateInterval","map","subset","vizSubTypes","storedProcedures","spaceTime","TimeSeriesData","stds","depth","depthIndexAdjust","csvString","DepthProfileData","SectionMapData","lonInterval","latInterval","orientation","lonArray","max","min","splitBySpace","spaceCount","SparseData","variableIndex","Depth_Min","times","latDistance","abs","lonDistance","distance","sqrt","_zoom","zoom","lonCenter","latCenter","center","fetchOptions","credentials","postOptions","method","headers","storedProcedureParametersToUri","Object","reduce","queryString","key","api","login","fetch","body","stringify","logout","register","validate","googleLoginRequest","a","async","response","contactUs","changePassword","changeEmail","console","log","retrieve","decoder","encoding","TextDecoder","csvParser","CSVParser","columns","on","record","read","ok","reader","getReader","readerIsDone","chunk","done","write","decode","Dataset_Long_Name","trim","keyRetrieval","json","keyCreation","description","updateUserInfo","userInfo","recoverPassword","email","choosePassword","password","token","visualization","storedProcedureRequest","spName","vizData","status","e","getTableStats","tableName","cruiseTrajectoryRequest","csvDownload","userLogin","userLogout","userRegistration","userValidation","catalogRetrieval","datasetRetrieval","queryRequest","cruiseListRequest","tableStatsRequest","csvDownloadRequest","updateUserInfoRequest","initializeGoogleAuth","recoverPasswordRequest","choosePasswordRequest","contactUsRequest","changePasswordRequest","changeEmailRequest","watchUserLogin","watchUserRegistration","watchUserValidation","watchUserLogout","watchGoogleLoginRequest","watchCatalogRetrieval","watchDatasetRetrieval","watchKeyRetrieval","watchKeyCreationRequest","watchQueryRequest","watchStoredProcedureRequest","watchCruiseTrajectoryRequest","watchCruiseListRequest","watchTableStatsRequest","watchCsvDownloadRequest","watchDownloadTextAsCsv","watchRefreshLogin","watchUpdateUserInfoRequest","watchInitializeGoogleAuth","watchRecoverPasswordRequest","watchChoosePasswordRequest","watchContactUs","watchChangePasswordRequest","watchChangeEmailRequest","rootSaga","put","userActions","call","interfaceActions","pathname","href","gapi","auth2","getAuthInstance","authInstance","signOut","result","catalogActions","visualizationActions","delay","finalize","csv","blob","Blob","url","URL","createObjectURL","document","createElement","setAttribute","appendChild","click","removeChild","currentUser","getAuthResponse","authResponse","id_token","takeLatest","all","sagaMiddleware","createSagaMiddleware","store","createStore","rootReducer","applyMiddleware","run","colors","primary","solidPaper","backgroundGray","secondary","errorYellow","greenHover","mapDispatchToProps","keyCreationRequestSend","ApiKeyManagement","props","componentDidMount","handleClick","handleChange","event","setState","target","classes","className","wrapper","Paper","root","elevation","Typography","variant","apiKeyTableHeader","Divider","Table","table","TableHead","TableRow","TableCell","align","TableBody","apiKey","index","Description","showChildOnHover","keyTableCell","Api_Key","warningCaption","Grid","container","alignItems","justify","spacing","item","TextField","margin","name","onChange","placeholder","descriptionField","Button","disabled","color","onClick","Component","connect","ownProps","withStyles","theme","width","marginTop","paddingTop","minWidth","marginBottom","visibility","fontSize","loginRequiredMessage","useEffect","Link","component","RouterLink","to","Home","Fragment","tableMapping1","tableMapping2","tableMapping3","title","padding","height","userSelect","infoCard","gridClass","maxHeight","gridItem","display","justifyContent","verticalAlign","datasetDescriptionWrapper","whiteSpace","overflow","datasetDescription","vizSampleImage","maxWidth","variableDetailTable","marginLeft","marginRight","tableLayout","variableDetailTableRow","variableDetailTableCell","borderBottomColor","textOverflow","paddingRight","gridDetailTypography","boldText","fontWeight","rightGridItem","boxSizing","datasetDescriptionButton","backgroundColor","buttonTextWrapper","xs","Time_Min","Time_Max","Depth_Max","Comment","context","handleDescribeVariable","ID","DatasetDescriptionDialog","clearDescription","Dialog","open","onClose","PaperProps","dialogPaper","DialogTitle","DialogContent","source","markdown","palette","main","textDecoration","describedVariable","variable","find","Long_Name","tooltip","opacity","Tooltip","placement","popper","children","datasetGroupWrapper","textAlign","bozSizing","nonDatasetGroupWrapper","paddingLeft","datasetGridClass","adjustGridLeft","groupName","chevronButton","datasetChevronButton","chevronIcon","transform","datasetButtonWrapper","tableGridSection","shortCell","acknowledgement","acknowledgementHeader","buttonMarginLeft","buttonMarginTop","node","allLeafChildren","React","useState","expanded","setExpanded","toggleExpand","field","IconButton","ExpandMore","ChevronRight","src","Icon_URL","alt","direction","Data_Source","Distributor","Acknowledgement","style","handleDescribeDataset","Dataset_Name","level","disableRipple","disableFocusRipple","columnDefs","headerName","sortable","filter","tooltipField","cellRenderer","hide","enableRowGroup","rowGroup","defaultColDef","resizable","cellStyle","autoGroupColumnDef","getRowHeight","params","group","detail","AGGridWrapper","filterText","describedDataset","dataset","gridApi","setQuickFilter","onGridReady","columnApi","sizeColumnsToFit","onGridSizeChanged","handleColumnRowGroupChanged","forEach","column","setColumnVisible","colId","handleDownloadCatalog","header","render","gridPaper","gridSearch","autoFocus","label","InputLabelProps","shrink","downloadButton","gridWrapper","rowData","suppressDragLeaveHidesColumns","enableCellTextSelection","suppressContextMenu","getRowStyle","styles","background","rowGroupPanelShow","groupMultiAutoColumn","onColumnRowGroupChanged","enableBrowserTooltips","groupUseEntireRow","groupRowRenderer","masterDetail","frameworkComponents","myDetailCellRenderer","GridDetail","datasetGroupRowRenderer","GroupedDatasetRow","detailCellRenderer","detailRowHeight","textTransform","dark","Catalog","determineContent","content","registrationCard","textField","inputFieldState","handleKeyPress","buttonRef","current","Card","inputFieldInfo","valid","helperText","requirement","onKeyPress","registrationPreviousActiveStep","userRegistrationRequestSend","userValidationRequestSend","username","getCardInfo","firstName","optional","lastName","institute","department","country","createRef","RegistrationStepper","validateField","rawValue","pattern","previousState","newCardState","cards","confirmPassword","test","processStateToActionPayload","actionPayload","card","cardKey","currentCardIsValid","currentCard","handleNext","handleBack","newValue","fieldName","newCard","steps","activeStep","cardInfoArray","Stepper","Step","StepLabel","instructionsPaper","instructions","handleHideStepper","button","ref","CircularProgress","buttonProgress","bottomError","position","top","left","cursor","borderRadius","boxShadow","textSpan","fontFamily","clickHandlerTarget","viewBox","version","xmlns","xmlnsXlink","x","y","filterUnits","dx","dy","in","stdDeviation","values","rx","stroke","strokeWidth","fill","fillRule","xlinkHref","d","registerClickHandlerTarget","Register","showStepper","onGoogleSignup","_this","auth","attachClickHandler","onGoogleSignin","setTimeout","onDialogEnter","handleShowStepper","paper","googleWrapper","emailSignUpWrapper","emailSignUpButton","validation","depthOneIsLower","depthOneOutOfBounds","depthTwoOutOfBounds","negative","date","dateOneIsLater","dateOneOutOfBounds","dateTwoOutOfBounds","latOneIsHigher","latOneOutOfBounds","latTwoOutOfBounds","lonOneIsHigher","lonOneOutOfBounds","lonTwoOutOfBounds","dataIsIrregular","dateRangeRequired","depthRangeRequired","surfaceOnlyDataset","irregularOnly","dataSizeTooLarge","webGLContextLimit","generic","invalid","dataSizeWarning","dataSizePrevent","variableMissing","vizTypeMissing","DialogContentText","Sensor","Lat_Min","Lat_Max","Lon_Min","Lon_Max","Variable_Min","Unit","Variable_Max","Variable_Mean","Variable_Std","mapTemporalResolutionToNumber","utcDateStringToLocal","utcString","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDate","getUTCDate","newDate","setFullYear","darwinDepths","piscesDepths","piscesTable","darwinTable","exports","depth1","depth2","has","chart","visualizationSubTypes","overrideDisabledStyle","clearCharts","getDatePlaceholder","valueOf","month","getMonth","day","getDate","getFullYear","groupHeaderHeight","reactWindowListRef","selectRef","MenuList","componentDidUpdate","prevProps","prevState","resetAfterIndex","scrollOffset","foundFocus","child","groupHasFocus","isFocused","scrollTo","options","getValue","initialOffset","indexOf","groupHeights","some","grandChild","totalHeight","acc","cur","estimatedItemSize","itemCount","itemSize","initialScrollOffset","Group","hasFocus","element","sensor","CustomHeading","headingProps","headingLabel","firstChild","selectProps","hidden","customHeading","icon","typography","iconClass","ListItem","select","focusedOption","Icon","handleSetDownloadTarget","stopPropagation","CloudDownload","Doc_URL","Info","DropdownIndicator","ArrowRight","Option","innerProps","onMouseMove","preventDefault","onMouseOver","GroupHeading","formatOptionLabel","option","meta","VizControlPanel","search","addDocuments","handleOpenControlPanel","showControlPanel","handleCloseControlPanel","handleTableStatsDialogClose","tableStatsDialogIsOpen","handleTableStatsDialogOpen","getSelectOptionsFromCatalogItems","items","Variable","sort","opt1","opt2","estimateCsvSize","member","parseInt","Variable_Count","handleDownloadCsvClick","handleResetSPParams","resetSPParams","searchField","onAutoSuggestChange","searchString","estimateDataSize","dt1","dt2","lat1","lat2","lon2","selectedVizType","date1","dayDiff","res","dateCount","depthUtils","checkStartDepth","surfaceOnly","replace","toFixed","checkEndDepth","checkStartDateValid","checkEndDateValid","checkStartDate","checkEndDate","checkStartLat","checkEndLat","checkStartLon","checkEndLon","checkHeatmap","irregularSpatialResolution","checkContour","checkSection","checkHistogram","checkTimeSeries","checkDepthProfile","checkSparseMap","checkGeneralWarn","dataSize","checkGeneralPrevent","webGLCount","countWebGLContexts","handleShowChartsAndResize","dispatchEvent","Event","handleShowCharts","JsSearch","indexStrategy","searchIndex","addIndex","maxDateMessage","maxDate","showCharts","handleShowGlobe","handleLatLonChange","catalogMinDate","setHours","catalogMaxDate","zeroedDT1","zeroedDT2","minDate","minDateMessage","startDepthMessage","endDepthMessage","startLatMessage","endLatMessage","startLonMessage","endLonMessage","heatmapMessage","contourMessage","sectionMapMessage","histogramMessage","timeSeriesMessage","depthProfileMessage","sparseMapMessage","generalWarnMessage","checkDisableVisualizeList","errorCount","errorSizeAdjust","disableVisualizeMessage","checkDisableVisualize","visualizeButtonTooltip","closePanelChevron","aria-label","ChevronLeft","openPanelChevron","Drawer","drawer","drawerPaper","anchor","ButtonGroup","groupedButtons","depressed","Language","InsertChartOutlined","clearChartsButton","Delete","resetSPParamsButton","Cached","isLoading","components","IndicatorSeparator","escapeClearsValue","onInputChange","filterOption","variableSelect","isClearable","inputValue","updateFields","menu","provided","zIndex","backdropFilter","valueContainer","input","control","border","borderBottom","borderColor","noOptionsMessage","singleValue","tableStatsButton","LibraryBooks","datePicker","format","autoOk","handleStartDateChange","inputVariant","KeyboardButtonProps","datePickerInputAdornment","handleEndDateChange","formGridItem","FormHelperTextProps","InputProps","padLeft","FormControl","vizTypeSelectFormControl","InputLabel","htmlFor","inputProps","MenuProps","MenuListProps","vizTypeMenu","MenuItem","vizTypeMenuItem","vizButtonTooltip","visualizeButton","onVisualize","fullWidth","bottom","drawerPaperError1","drawerPaperError2","drawerPaperError3","drawerPaperError4","drawerPaperError5","navDrawerWidth","controlPanelForm","borderLeft","fontVariant","borderRight","singleValueReplacement","tableStatsRequestSend","DownloadConfirmationDialog","downloadTarget","handleFullDatasetDownload","handleSubsetDownload","sampleMember","timeMin","timeMax","subsetLat1","subsetLat2","subsetLon1","subsetLon2","subsetTime1","subsetTime2","depthMin","depthMax","subsetDepth1","subsetDepth2","dateRatio","totalDataPoints","Variables","split","fullDataAvailable","totalDays","subsetDays","totalLatSize","subsetLatSize","latRatio","totalLonSize","subsetLonSize","lonRatio","depthRatio","totalDepthSize","subsetDepthSize","subsetDataPoints","subsetAvailable","timeString1","timeString2","timeStringMin","timeStringMax","tableFooter","DialogActions","dateString","months","layout","font","paper_bgcolor","autosize","config","displaylogo","annotations","distributor","yshift","documentElement","clientWidth","xref","yref","showarrow","colorscaleOptions","chartWrapper","popover","paddingBottom","iconButton","colorForm","lastIcon","borderTopRightRadius","borderBottomRightRadius","buttonGroup","colorscaleMenu","grayBackground","onToggleSplitByDate","onToggleSplitBySpace","downloadCsv","handleZValueConfirm","zValues","markerOptions","handleMarkerOptionsConfirm","paletteAnchorElement","setPaletteAnchorElement","zScalePopoverAnchorElement","setZScalePopoverAnchorElement","localZMin","setLocalZMin","localZMax","setLocalZMax","zScalePopoverOpen","zScalePopoverID","handleZScalePopoverClose","zScaleValidations","zMinMessage","zMaxMessage","markerOptionsAnchorElement","setMarkerOptionsAnchorElement","localMarkerOpacity","setLocalMarkerOpacity","localMarkerColor","setLocalMarkerColor","localMarkerSize","setLocalMarkerSize","previousOpacity","useRef","usePreviousOpacity","previousColor","usePreviousColor","previousSize","usePreviousSize","markerPopoverOpen","markerPopoverID","handleMarkerOptionsClose","markerOptionsValidations","checkLocalMarkerOpacity","checkLocalMarkerSize","localMarkerOpacityMessage","localMarkerSizeMessage","DateRange","LineWeight","currentTarget","SwapVert","handlePaletteChoice","Palette","Gamepad","Menu","anchorEl","keepMounted","Popover","anchorOrigin","vertical","horizontal","transformOrigin","OutlinedInput","aria-describedby","labelWidth","FormHelperText","buttonBlock","iconButtonWrapper","handleChartDateString","requestAnimationFrame","useResizeHandler","marker","chartBase","plot_bgcolor","xaxis","exponentformat","yaxis","infoObject","sectionSize","lonRange","tickvals","ceil","ticktext","tickmode","sizeRatio","plots","setSplitByDate","setSplitByDepth","setPalette","setZValues","subSets","generatePlotData","subsets","xTicks","handleXTicks","getChartDimensions","latTitle","lonTitle","hovertext","formatter","zauto","zmin","zmax","z","connectgaps","autocolorscale","colorscale","hoverinfo","contours","coloring","showlabels","labelfont","family","labelformat","colorbar","handleContourMap","zsmooth","handleHeatmap","onToggleSplitByDepth","chartCount","availableWGLContexts","setMarkerOptions","mode","error_y","array","visible","line","isMonthy","date2","error_x","autorange","setSplitBySpace","setOrientation","spaces","distinctMeridiansOrParallelsForSplitting","xAxis","handleSectionMap","switchOrientation","SparseScatter","xValues","yValues","xTitle","yTitle","tabProps","SparseTabPanel","selectedTab","controlPanelProps","tabs","tab","setTab","plot","radius","mapbox","sourcetype","below","mapboxAccessToken","handleSparseMap","scatter","Tabs","centered","indicatorColor","Tab","deleteChart","CloseChartIcon","closeChartIcon","float","handleDeleteChart","Close","Charts","chartPaper","cruiseTrajectoryClear","esriFonts","SingleValue","cruiseSort","b","Name","CruiseSelector","getSelectOptionsFromCruiseList","list","handleCruiseSelect","selection","selectedCruise","updateParametersFromCruiseBoundary","outerDiv","blurEffectDiv","getCruiseListState","cruiseSelect","menuList","primary25","cruiseInfo","cruiseInfoCell","Nickname","Start_Time","End_Time","Chief_Name","Ship_Name","borderStyle","DrawButton","drawButton","helpText","cancelButton","polygonSymbol","symbolLayers","material","outline","polylineSymbol","r","g","UiComponents","shouldComponentUpdate","nextProps","nextState","sketchModel","esriModules","SketchViewModel","layer","regionLayer","view","defaultUpdateOptions","toggleToolOnClick","tool","setShowHelp","getElementById","throttledUpdate","throttle","updateDomainFromGraphicExtent","Utils","webMercatorToGeographic","graphic","geometry","toolEventInfo","complete","graphics","addEventListener","removeAll","create","cancel","ui","remove","TrajectoryController","memo","trajectoryLayer","midIndex","polyLines","lineIndex","lonStart","latStart","maxDistance","_lonDistance","cruiseTrajectorySymbol","cap","cruiseTrajectoryGeometry","paths","Graphic","symbol","goTo","maxDuration","speedFactor","MapContainer","spParams","globeUIRef","_lon2","polygon","rings","regionGraphic","mapProperties","basemap","viewProperties","highlightOptions","haloOpacity","haloColor","fillOpacity","measurementPositions","GraphicsLayer","cleanSPParams","localDateToString","year","toString","mapVizType","vizType","sp","queryRequestSend","storedProcedureRequestSend","storedProcedureInfo","completedShowCharts","baseSPParams","Visualization","filteredData","showUI","mapping","cruise","toggleShowUI","_lon1","xmin","xmax","newCoordinates","ymin","ymax","esriModuleNames","loadModules","loadedModules","accumulator","currentValue","currentIndex","vizWrapper","toggleChartView","displayNone","minHeight","userLoginRequestSend","loginClickHandlerTarget","LoginDialog","handleLogin","handleClose","clearState","aria-labelledby","onEnter","dialogWrapper","onSubmit","googleIconWrapper","snackbarClose","centerText","Snackbar","autoHideDuration","loader","right","loaderContent","flexDirection","alignItem","spinnerText","spinner","fadeIn","loginDialogWasCleared","GlobalUIComponentWrapper","handleLogOut","preProps","inlineBlock","LandingPage","landingWrapper","welcomeMessage","jss","navLink","pointerEvents","withRouter","JSS","floatRight","dropdown","popperPaper","borderTopLeftRadius","setAnchorEl","ExpandLess","Popper","role","transition","TransitionProps","Grow","ClickAwayListener","onClickAway","toggleShowHelp","TopNavBar","handleNavigate","route","history","handleOutsideNavigate","navWrapper","navWrapperGradient","simonsLogoWrapper","simonsLogo","rightSectionWrapper","rightNavLink","backgroundImage","changePasswordRequestSend","oldPassword","newPassword","formWrapper","currentPassword","setCurrentPassword","setNewPassword","newPasswordConfirm","setNewPasswordConfirm","newPasswordValid","newPasswordConfirmValid","resetFields","changePasswordButtonRef","buttonIsDisabled","changeEmailRequestSend","setpassword","setEmail","emailConfirm","setEmailConfirm","changeEmailButtonRef","emailValid","testEmail","emailConfirmValid","updateUserInfoRequestSend","showChangePasswordDialog","showChangeEmailDialog","userProperties","userToState","editable","Profile","handleValidation","infoHasChanged","handleEdit","handleCancel","handleConfirm","formIsValid","property","close","changePasswordDialogOpen","ChangeEmail","changeEmailDialogOpen","profilePaper","editButton","Edit","md","readOnly","buttonGrid","accountPaper","accountEditButton","pageHeader","guideSection","sectionHeader","sectionContent","getStartedPaper","exact","path","SubmissionGuide","ValidationTool","contactUsRequestSend","subject","ContactUs","handleSubmit","messageTextField","multiline","rows","submitButton","recoverPasswordRequestSend","emailSentDescription","sendButton","emailWasSent","setEmailWasSent","choosePasswordRequestSend","choosePasswordRequestReset","ChoosePassword","handleChangePassword","handleChangeConfirmPassword","decodedToken","jwtDecode","expiration","setUTCSeconds","exp","sub","passwordValid","confirmPasswordValid","formGrid","textFields","createMuiTheme","useNextVariants","contrastText","default","overrides","MuiIconButton","MuiPaper","MuiListItemIcon","MuiFormHelperText","filled","MuiListItem","gutters","MuiToolbar","MuiMenuItem","MuiOutlinedInput","MuiButtonGroup","groupedOutlined","MuiTableCell","MuiFormControl","marginNormal","MuiDialogContentText","MuiDialogTitle","MuiFilledInput","inputSelect","adornedEnd","App","utils","DateFnsUtils","MuiThemeProvider","Login","ForgotPass","DataSubmission","LicenseManager","setLicenseKey","rootElement","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.20a74133.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const RETRIEVAL_REQUEST_SEND = 'CATALOG_RETRIEVAL_REQUEST_SEND';\r\nexport const RETRIEVAL_REQUEST_SUCCESS = 'CATALOG_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const RETRIEVAL_REQUEST_FAILURE = 'CATALOG_RETRIEVAL_REQUEST_FAILURE';\r\nexport const RETRIEVAL_REQUEST_PROCESSING = 'CATALOG_RETRIEVAL_REQUEST_PROCESSING';\r\n\r\nexport const DATASET_RETRIEVAL_REQUEST_SEND = 'DATASET_CATALOG_RETRIEVAL_REQUEST_SEND';\r\nexport const DATASET_RETRIEVAL_REQUEST_SUCCESS = 'DATASET_CATALOG_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const DATASET_RETRIEVAL_REQUEST_FAILURE = 'DATASET_CATALOG_RETRIEVAL_REQUEST_FAILURE';\r\nexport const DATASET_RETRIEVAL_REQUEST_PROCESSING = 'DATASET_CATALOG_RETRIEVAL_REQUEST_PROCESSING';","// Enum for async requests.\r\n\r\nconst states = {\r\n    inProgress: 'inProgress',\r\n    failed: 'failed',\r\n    succeeded: 'succeeded',\r\n    expired: 'expired'\r\n}\r\n\r\nexport default states;","export const LOG_OUT = \"LOG_OUT\";\r\n\r\nexport const STORE_INFO = 'STORE_INFO';\r\nexport const DESTROY_INFO = 'DESTROY_INFO';\r\nexport const LOGIN_DIALOG_WAS_CLEARED = 'LOGIN_DIALOG_WAS_CLEARED'\r\n\r\nexport const LOGIN_REQUEST_SEND = 'LOGIN_REQUEST_SEND';\r\nexport const LOGIN_REQUEST_PROCESSING = 'LOGIN_REQUEST_PROCESSING';\r\nexport const LOGIN_REQUEST_SUCCESS = 'LOGIN_REQUEST_SUCCESS';\r\nexport const LOGIN_REQUEST_FAILURE = 'LOGIN_REQUEST_FAILURE';\r\nexport const LOGIN_REQUEST_CLEAR_ERROR = 'LOGIN_REQUEST_CLEAR_ERROR';\r\n\r\nexport const GOOGLE_LOGIN_REQUEST_SEND = 'GOOGLE_LOGIN_REQUEST_SEND';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_PROCESSING = 'GOOGLE_LOGIN_REQUEST_SEND_PROCESSING';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_SUCCESS = 'GOOGLE_LOGIN_REQUEST_SEND_SUCCESS';\r\nexport const GOOGLE_LOGIN_REQUEST_SEND_FAILURE = 'GOOGLE_LOGIN_REQUEST_SEND_FAILURE';\r\n\r\nexport const REGISTRATION_REQUEST_SEND = 'REGISTRATION_REQUEST_SEND';\r\nexport const REGISTRATION_REQUEST_PROCESSING = 'REGISTRATION_REQUEST_PROCESSING';\r\nexport const REGISTRATION_REQUEST_SUCCESS = 'REGISTRATION_REQUEST_SUCCESS';\r\nexport const REGISTRATION_REQUEST_FAILURE = 'REGISTRATION_REQUEST_FAILURE';\r\n\r\nexport const VALIDATION_REQUEST_SEND = 'VALIDATION_REQUEST_SEND';\r\nexport const VALIDATION_REQUEST_PROCESSING = 'VALIDATION_REQUEST_PROCESSING';\r\nexport const VALIDATION_REQUEST_SUCCESS = 'VALIDATION_REQUEST_SUCCESS';\r\nexport const VALIDATION_REQUEST_FAILURE = 'VALIDATION_REQUEST_FAILURE';\r\n\r\nexport const KEY_RETRIEVAL_REQUEST_SEND = 'KEY_RETRIEVAL_REQUEST_SEND';\r\nexport const KEY_RETRIEVAL_REQUEST_SUCCESS = 'KEY_RETRIEVAL_REQUEST_SUCCESS';\r\nexport const KEY_RETRIEVAL_REQUEST_FAILURE = 'KEY_RETRIEVAL_REQUEST_FAILURE';\r\n\r\nexport const KEY_CREATION_REQUEST_SEND = 'KEY_CREATION_REQUEST_SEND';\r\nexport const KEY_CREATION_REQUEST_PROCESSING = 'KEY_CREATION_REQUEST_PROCESSING';\r\nexport const KEY_CREATION_REQUEST_SUCCESS = 'KEY_CREATION_REQUEST_SUCCESS';\r\nexport const KEY_CREATION_REQUEST_FAILURE = 'KEY_CREATION_REQUEST_FAILURE';\r\n\r\nexport const UPDATE_USER_INFO_REQUEST_SEND = 'UPDATE_USER_INFO_REQUEST_SEND';\r\nexport const UPDATE_USER_INFO_REQUEST_SUCCESS = 'UPDATE_USER_INFO_REQUEST_SUCCESS';\r\nexport const UPDATE_USER_INFO_REQUEST_FAILURE = 'UPDATE_USER_INFO_REQUEST_FAILURE';\r\n\r\nexport const REFRESH_LOGIN = 'REFRESH_LOGIN';\r\n\r\nexport const INITIALIZE_GOOGLE_AUTH = 'INITIALIZE_GOOGLE_AUTH';\r\nexport const STORE_GOOGLE_AUTH = 'STORE_GOOGLE_AUTH';\r\n\r\nexport const RECOVER_PASSWORD_REQUEST_SEND = 'RECOVER_PASSWORD_REQUEST_SEND';\r\n\r\nexport const CHOOSE_PASSWORD_REQUEST_SEND = 'CHOOSE_PASSWORD_REQUEST_SEND';\r\nexport const CHOOSE_PASSWORD_REQUEST_SUCCESS = 'CHOOSE_PASSWORD_REQUEST_SUCCESS';\r\nexport const CHOOSE_PASSWORD_REQUEST_FAILURE = 'CHOOSE_PASSWORD_REQUEST_FAILURE';\r\nexport const CHOOSE_PASSWORD_REQUEST_RESET = 'CHOOSE_PASSWORD_REQUEST_RESET';\r\n\r\nexport const CONTACT_US_REQUEST_SEND = 'CONTACT_US_REQUEST_SEND';\r\n\r\nexport const CHANGE_PASSWORD_REQUEST_SEND = 'CHANGE_PASSWORD_REQUEST_SEND';\r\n\r\nexport const CHANGE_EMAIL_REQUEST_SEND = 'CHANGE_EMAIL_REQUEST_SEND';","import * as interfaceActionTypes from '../actionTypes/ui';\r\n\r\nconst uiResetState = {\r\n  catalogRequestState: null,\r\n\r\n  loginDialogIsOpen: false,\r\n  registrationActiveStep: 0,\r\n\r\n  userLoginState: null,\r\n  userLoginError: null,\r\n\r\n  userValidationState: null,\r\n  userValidationError: null,\r\n\r\n  userRegistrationState: null,\r\n\r\n  apiKeyRetrievalState: null,\r\n  apiKeyCreationState: null\r\n}\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {\r\n    case interfaceActionTypes.INTERFACE_SHOW_LOGIN_DIALOG: return {...state, loginDialogIsOpen: true};\r\n    case interfaceActionTypes.INTERFACE_HIDE_LOGIN_DIALOG: return {...state, loginDialogIsOpen: false, userLoginError: null};\r\n    case interfaceActionTypes.REGISTRATION_NEXT_ACTIVE_STEP: return {...state, registrationActiveStep: state.registrationActiveStep + 1}\r\n    case interfaceActionTypes.REGISTRATION_PREVIOUS_ACTIVE_STEP: return {...state, registrationActiveStep: state.registrationActiveStep - 1}\r\n    case interfaceActionTypes.RESTORE_INTERFACE_DEFAULTS: return {\r\n      ...state,\r\n      ...uiResetState\r\n    }\r\n    case interfaceActionTypes.SNACKBAR_OPEN: return {\r\n      ...state,\r\n      snackbarIsOpen: true,\r\n      snackbarMessage: action.payload.message\r\n    }\r\n    case interfaceActionTypes.SNACKBAR_CLOSE: return {...state, snackbarIsOpen: false}\r\n    case interfaceActionTypes.SET_LOADING_MESSAGE: return {...state, loadingMessage: action.payload.message}\r\n    \r\n    case interfaceActionTypes.TOGGLE_SHOW_HELP: return {...state, showHelp: !state.showHelp}\r\n\r\n    case interfaceActionTypes.SHOW_CHANGE_EMAIL_DIALOG: return {...state, changeEmailDialogIsOpen: true}\r\n    case interfaceActionTypes.HIDE_CHANGE_EMAIL_DIALOG: return {...state, changeEmailDialogIsOpen: false}\r\n\r\n    case interfaceActionTypes.SHOW_CHANGE_PASSWORD_DIALOG: return {...state, changePasswordDialogIsOpen: true}\r\n    case interfaceActionTypes.HIDE_CHANGE_PASSWORD_DIALOG: return {...state, changePasswordDialogIsOpen: false}\r\n    \r\n    default: return state;\r\n  }\r\n}","export const QUERY_REQUEST_SEND = 'QUERY REQUEST SEND';\r\nexport const QUERY_REQUEST_SUCCESS = 'QUERY REQUEST SUCCESS';\r\nexport const QUERY_REQUEST_FAILURE = 'QUERY REQUEST FAILURE';\r\nexport const QUERY_REQUEST_PROCESSING = 'QUERY REQUEST PROCESSING';\r\n\r\nexport const STORED_PROCEDURE_REQUEST_SEND = 'STORED_PROCEDURE_REQUEST_SEND';\r\nexport const STORED_PROCEDURE_REQUEST_SUCCESS = 'STORED_PROCEDURE_REQUEST_SUCCESS';\r\nexport const STORED_PROCEDURE_REQUEST_FAILURE = 'STORED_PROCEDURE_REQUEST_FAILURE';\r\nexport const STORED_PROCEDURE_REQUEST_PROCESSING = 'STORED_PROCEDURE_REQUEST_PROCESSING';\r\n\r\nexport const ADD_MAP = 'ADD_MAP';\r\nexport const ADD_CHART = 'ADD_CHART';\r\n\r\nexport const ADD_LAYER = 'ADD_LAYER';\r\n\r\nexport const STORE_SAMPLE_DATA = 'STORE_SAMPLE_DATA';\r\n\r\nexport const CLEAR_CHARTS = 'CLEAR_CHARTS';\r\nexport const CLEAR_MAPS = 'CLEAR_MAPS';\r\nexport const DELETE_CHART = 'DELETE_CHART';\r\n\r\nexport const TABLE_STATS_REQUEST_SEND = 'ABLE_STATS_REQUEST_SEND';\r\nexport const TABLE_STATS_REQUEST_PROCESSING = 'TABLE_STATS_REQUEST_PROCESSING';\r\nexport const TABLE_STATS_REQUEST_SUCCESS = 'TABLE_STATS_REQUEST_SUCCESS';\r\nexport const TABLE_STATS_REQUEST_FAILURE = 'TABLE_STATS_REQUEST_FAILURE';\r\n\r\nexport const CRUISE_TRAJECTORY_REQUEST_SEND = 'CRUISE_TRAJECTORY_REQUEST_SEND';\r\nexport const CRUISE_TRAJECTORY_REQUEST_SUCCESS = 'CRUISE_TRAJECTORY_REQUEST_SUCCESS';\r\nexport const CRUISE_TRAJECTORY_REQUEST_FAILURE = 'CRUISE_TRAJECTORY_REQUEST_FAILURE';\r\nexport const CRUISE_TRAJECTORY_REQUEST_PROCESSING = 'CRUISE_TRAJECTORY_REQUEST_PROCESSING';\r\nexport const CRUISE_TRAJECTORY_CLEAR = 'CRUISE_TRAJECTORY_CLEAR';\r\n\r\nexport const CRUISE_LIST_REQUEST_SEND = 'CRUISE_LIST_REQUEST_SEND';\r\nexport const CRUISE_LIST_REQUEST_SUCCESS = 'CRUISE_LIST_REQUEST_SUCCESS';\r\nexport const CRUISE_LIST_REQUEST_FAILURE = 'CRUISE_LIST_REQUEST_FAILURE';\r\nexport const CRUISE_LIST_REQUEST_PROCESSING = 'CRUISE_LIST_REQUEST_PROCESSING';\r\n\r\nexport const TRIGGER_SHOW_CHARTS = 'TRIGGER_SHOW_CHARTS';\r\nexport const COMPLETED_SHOW_CHARTS = 'COMPLETED_SHOW_CHARTS';\r\n\r\nexport const CSV_DOWNLOAD_REQUEST_SEND = 'CSV_DOWNLOAD_REQUEST_SEND';\r\nexport const CSV_DOWNLOAD_REQUEST_SUCCESS = 'CSV_DOWNLOAD_REQUEST_SUCCESS';\r\nexport const CSV_DOWNLOAD_REQUEST_FAILURE = 'CSV_DOWNLOAD_REQUEST_FAILURE';\r\nexport const CSV_DOWNLOAD_REQUEST_PROCESSING = 'CSV_DOWNLOAD_REQUEST_PROCESSING';\r\n\r\nexport const DOWNLOAD_TEXT_AS_CSV = 'DOWNLOAD_TEXT_AS_CSV';","import catalog from './catalog';\r\nimport user from './user';\r\nimport ui from './ui';\r\nimport visualization from './visualization';\r\nimport dataSubmission from './dataSubmission.js';\r\nimport reduceReducers from 'reduce-reducers';\r\nimport Cookies from 'js-cookie';\r\n\r\n// Consider building this object from initial states from each reducer\r\n// ** When adding new keys to redux store consider whether they need to be\r\n// reset on navigation for UI purposes. If so, add them with a default state\r\n// to the uiResetState in the ui reducer **\r\nconst initialState = {\r\n    // Catalog state pieces\r\n    catalogRequestState: null,\r\n    catalog: null,\r\n    datasetRequestState: null,\r\n    datasets: null,\r\n\r\n    // Interface state pieces\r\n    loginDialogIsOpen: false,\r\n    changePasswordDialogIsOpen: false,\r\n    changeEmailDialogIsOpen: false,\r\n    registrationActiveStep: 0,\r\n    snackbarIsOpen: false,\r\n    snackbarMessage: null,\r\n    loadingMessage: '',\r\n    showHelp: false,\r\n\r\n    // User state pieces\r\n    user: JSON.parse(Cookies.get('UserInfo') || null),\r\n\r\n    apiKeys: null,\r\n    apiKeyRetrievalState: null,\r\n    apiKeyCreationState: null,\r\n\r\n    clearLoginDialog: false,\r\n\r\n    userLoginState: null,\r\n\r\n    userValidationState: null,\r\n\r\n    userRegistrationState: null,\r\n\r\n    choosePasswordState: null,\r\n\r\n    // Visualization state pieces\r\n    maps: [],\r\n    charts: [],\r\n    getCruiseTrajectoryRequestState: null,\r\n    cruiseTrajectory: null,\r\n    sampleData: null,\r\n    queryRequestState: null,\r\n    storedProcedureRequestState: null,\r\n    getTableStatsRequestState: null,\r\n    cruiseList: [],\r\n    getCruiseListRequestState: null,\r\n    showChartsOnce: null,\r\n    chartID: 0\r\n\r\n    // Data Submission state pieces\r\n}\r\n\r\nconst reducedReducer = reduceReducers(initialState, catalog, user, ui, visualization);\r\n\r\nexport default reducedReducer;","import * as catalogActionTypes from '../actionTypes/catalog';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_SUCCESS: return {\r\n      ...state, \r\n      catalogRequestState: states.succeeded, \r\n      catalog: action.payload.catalog\r\n    }\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_FAILURE: return {...state, catalogRequestState: states.failed}\r\n    case catalogActionTypes.RETRIEVAL_REQUEST_PROCESSING: return {...state, catalogRequestState: states.inProgress}\r\n\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SUCCESS: return {...state,\r\n      datasetsRequestState: states.succeeded, \r\n      datasets: action.payload.datasets\r\n    }\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_FAILURE: return {...state, datasetsRequestState: states.failed}\r\n    case catalogActionTypes.DATASET_RETRIEVAL_REQUEST_PROCESSING: return {...state, datasetsRequestState: states.inProgress}\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n}","import * as userActionTypes from '../actionTypes/user';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nexport default function(state, action) {\r\n  switch (action.type) {    \r\n\r\n    case userActionTypes.LOGIN_REQUEST_PROCESSING: return {...state, userLoginState: states.inProgress}\r\n    case userActionTypes.LOGIN_REQUEST_SUCCESS: return {...state, userLoginState: states.succeeded, userLoginError: null}\r\n    case userActionTypes.LOGIN_REQUEST_FAILURE: return {...state, userLoginState: states.failed}\r\n    case userActionTypes.LOGIN_REQUEST_CLEAR_ERROR: return {...state, userLoginError: null}\r\n\r\n    case userActionTypes.STORE_INFO: return {...state, user: {...action.payload.user}}\r\n    case userActionTypes.DESTROY_INFO: return {...state, user: null, apiKeys: null, clearLoginDialog: true}\r\n    case userActionTypes.LOGIN_DIALOG_WAS_CLEARED: return {...state, clearLoginDialog: false}\r\n\r\n    case userActionTypes.VALIDATION_REQUEST_PROCESSING: return {...state, userValidationState: states.inProgress}\r\n    case userActionTypes.VALIDATION_REQUEST_FAILURE: return {...state, userValidationState: states.failed}\r\n    case userActionTypes.VALIDATION_REQUEST_SUCCESS: return {...state, userValidationState: null}\r\n\r\n    case userActionTypes.REGISTRATION_REQUEST_PROCESSING: return {...state, userRegistrationState: states.inProgress}\r\n    case userActionTypes.REGISTRATION_REQUEST_FAILURE: return {...state, userRegistrationState: states.failed}\r\n    case userActionTypes.REGISTRATION_REQUEST_SUCCESS: return {...state, userRegistrationState: states.succeeded}\r\n\r\n    case userActionTypes.KEY_RETRIEVAL_REQUEST_SUCCESS: return {...state, apiKeys: action.payload.keys}\r\n    case userActionTypes.KEY_RETRIEVAL_REQUEST_FAILURE: return {...state, apiKeyRetrievalState: states.failed}\r\n\r\n    case userActionTypes.KEY_CREATION_REQUEST_PROCESSING: return {...state, apiKeyCreationState: states.inProgress}\r\n    case userActionTypes.KEY_CREATION_REQUEST_FAILURE: return {...state, apiKeyCreationState: states.failed}\r\n    case userActionTypes.KEY_CREATION_REQUEST_SUCCESS: return {...state, apiKeyCreationState: states.succeeded}\r\n\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_SUCCESS: return {...state, choosePasswordState: states.succeeded}\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_FAILURE: return {...state, choosePasswordState: states.failed}\r\n    case userActionTypes.CHOOSE_PASSWORD_REQUEST_RESET: return {...state, choosePasswordState: null}\r\n\r\n    default: return state;\r\n    }\r\n}","export const INTERFACE_SHOW_LOGIN_DIALOG = \"INTERFACE_SHOW_LOGIN_DIALOG\";\r\nexport const INTERFACE_HIDE_LOGIN_DIALOG = \"INTERFACE_HIDE_LOGIN_DIALOG\";\r\n\r\nexport const REGISTRATION_NEXT_ACTIVE_STEP = 'REGISTRATION_NEXT_ACTIVE_STEP';\r\nexport const REGISTRATION_PREVIOUS_ACTIVE_STEP = 'REGISTRATION_PREVIOUS_ACTIVE_STEP';\r\n\r\nexport const RESTORE_INTERFACE_DEFAULTS = 'RESTORE_INTERFACE_DEFAULTS';\r\n\r\nexport const SNACKBAR_OPEN = 'SNACKBAR_OPEN';\r\nexport const SNACKBAR_CLOSE = 'SNACKBAR_CLOSE';\r\n\r\nexport const SET_LOADING_MESSAGE = 'SET_LOADING_MESSAGE';\r\n\r\nexport const TOGGLE_SHOW_HELP = 'TOGGLE_SHOW_HELP';\r\n\r\nexport const SHOW_CHANGE_PASSWORD_DIALOG = 'SHOW_CHANGE_PASSWORD_DIALOG';\r\nexport const HIDE_CHANGE_PASSWORD_DIALOG = 'HIDE_CHANGE_PASSWORD_DIALOG';\r\n\r\nexport const SHOW_CHANGE_EMAIL_DIALOG = 'SHOW_CHANGE_EMAIL_DIALOG';\r\nexport const HIDE_CHANGE_EMAIL_DIALOG = 'HIDE_CHANGE_EMAIL_DIALOG';","import states from '../../Enums/asyncRequestStates';\r\nimport * as visualizationActionTypes from '../actionTypes/visualization';\r\n\r\nexport default function(state, action) {\r\n    switch(action.type) {\r\n        case visualizationActionTypes.QUERY_REQUEST_PROCESSING: return {...state, queryRequestState: states.inProgress};\r\n        case visualizationActionTypes.QUERY_REQUEST_FAILURE: return {...state, queryRequestState: states.failed};\r\n        case visualizationActionTypes.QUERY_REQUEST_SUCCESS: return {...state, queryRequestState: states.succeeded};\r\n        \r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_PROCESSING: return {...state, storedProcedureRequestState: states.inProgress}\r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_FAILURE: return {...state, storedProcedureRequestState: states.failed}\r\n        case visualizationActionTypes.STORED_PROCEDURE_REQUEST_SUCCESS: return {...state, storedProcedureRequestState: states.succeeded}\r\n\r\n\r\n        case visualizationActionTypes.ADD_LAYER: return { // Not currently in use\r\n            ...state,\r\n            layers: [...state.layers, action.payload.newLayer]\r\n        }\r\n\r\n        case visualizationActionTypes.STORE_SAMPLE_DATA: return {\r\n            ...state,\r\n            sampleData: action.payload.sampleData\r\n        }\r\n\r\n        case visualizationActionTypes.ADD_MAP: return {\r\n            ...state,\r\n            maps: [...state.maps, action.payload.mapInfo]\r\n        }\r\n\r\n        case visualizationActionTypes.ADD_CHART: return {\r\n            ...state,\r\n            charts: [{...action.payload.chartInfo, id: state.chartID}, ...state.charts],\r\n            chartID: state.chartID + 1\r\n        }\r\n\r\n        case visualizationActionTypes.CLEAR_CHARTS: return {...state, charts: []}\r\n\r\n        case visualizationActionTypes.CLEAR_MAPS: return {...state, maps: []}\r\n\r\n        case visualizationActionTypes.DELETE_CHART: return {...state, \r\n            charts: [\r\n                ...state.charts.slice(0, action.payload.chartIndex),\r\n                ...state.charts.slice(action.payload.chartIndex + 1)\r\n            ]\r\n        }\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_PROCESSING: return {...state, getCruiseTrajectoryRequestState: states.inProgress}\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SUCCESS: return {...state,\r\n            cruiseTrajectory: action.payload.trajectory,\r\n            getCruiseTrajectoryRequestState: states.succeeded\r\n        }\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_CLEAR: return {...state, cruiseTrajectory: null}\r\n\r\n        case visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_FAILURE: return {...state, getCruiseTrajectoryRequestState: states.failed}\r\n\r\n        case visualizationActionTypes.CRUISE_LIST_REQUEST_PROCESSING: return {...state, getCruiseListRequestState: states.inProgress}\r\n\r\n        case visualizationActionTypes.CRUISE_LIST_REQUEST_SUCCESS: return {\r\n            ...state,\r\n            getCruiseListRequestState: states.succeeded,\r\n            cruiseList: action.payload.cruiseList\r\n        }\r\n\r\n        case visualizationActionTypes.TRIGGER_SHOW_CHARTS: return {...state, showChartsOnce: true}\r\n        case visualizationActionTypes.COMPLETED_SHOW_CHARTS: return {...state, showChartsOnce: false}\r\n\r\n        case visualizationActionTypes.TABLE_STATS_REQUEST_SUCCESS: return {\r\n            ...state, \r\n            datasets: {\r\n                ...state.datasets,\r\n                [action.payload.datasetLongName]: {\r\n                    ...state.datasets[action.payload.datasetLongName],\r\n                    tableStats: action.payload.tableStats\r\n                }\r\n            }}\r\n\r\n        default: return state;\r\n    }\r\n}","import * as userActionTypes from '../actionTypes/user';\r\n\r\n// Login actions\r\nexport const userLoginRequestSend = (username, password) => ({\r\n    type: userActionTypes.LOGIN_REQUEST_SEND,\r\n    payload: {\r\n        username,\r\n        password\r\n    }\r\n});\r\n\r\nexport const userLoginRequestProcessing = () => {\r\n    return {type: userActionTypes.LOGIN_REQUEST_PROCESSING};\r\n};\r\n\r\nexport const userLoginRequestFailure = (error) => ({\r\n    type: userActionTypes.LOGIN_REQUEST_FAILURE,\r\n});\r\n\r\nexport const userLoginRequestSuccess = () => ({\r\n    type: userActionTypes.LOGIN_REQUEST_SUCCESS\r\n});\r\n\r\nexport const storeInfo = (user) => ({\r\n    type: userActionTypes.STORE_INFO,\r\n    payload: {\r\n        user\r\n    }\r\n});\r\n\r\nexport const userLoginRequestClearError = () => ({\r\n    type: userActionTypes.LOGIN_REQUEST_CLEAR_ERROR\r\n})\r\n\r\n// Google login actions\r\nexport const googleLoginRequestSend = (userIDToken) => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND,\r\n    payload: {\r\n        userIDToken\r\n    }\r\n});\r\n\r\nexport const googleLoginRequestProcessing = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_PROCESSING\r\n});\r\n\r\nexport const googleLoginRequestSuccess = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_SUCCESS\r\n});\r\n\r\nexport const googleLoginRequestFailure = () => ({\r\n    type: userActionTypes.GOOGLE_LOGIN_REQUEST_SEND_FAILURE\r\n});\r\n\r\n// Log out actions\r\nexport const logOut = () => ({\r\n    type:userActionTypes.LOG_OUT\r\n});\r\n\r\nexport const destroyInfo = () => ({\r\n    type: userActionTypes.DESTROY_INFO\r\n});\r\n\r\nexport const loginDialogWasCleared = () => ({\r\n    type: userActionTypes.LOGIN_DIALOG_WAS_CLEARED\r\n});\r\n\r\n// Validation actions\r\nexport const userValidationRequestSend = (username, email) => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_SEND,\r\n    payload: {\r\n        username,\r\n        email\r\n    }\r\n});\r\n\r\nexport const userValidationRequestProcessing = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const userValidationRequestFailure = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const userValidationRequestSuccess = () => ({\r\n    type: userActionTypes.VALIDATION_REQUEST_SUCCESS\r\n});\r\n\r\n// Registration actions\r\nexport const userRegistrationRequestSend = (payload) => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_SEND,\r\n    payload\r\n});\r\n\r\nexport const userRegistrationRequestProcessing = () => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const userRegistrationRequestFailure = () => ({\r\n    type:userActionTypes.REGISTRATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const userRegistrationRequestSuccess = () => ({\r\n    type: userActionTypes.REGISTRATION_REQUEST_SUCCESS\r\n});\r\n\r\n// Api key retrieval actions\r\nexport const keyRetrievalRequestSend = () => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_SEND\r\n});\r\n\r\nexport const keyRetrievalRequestSuccess = (keys) => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        keys\r\n    }\r\n});\r\n\r\nexport const keyRetrievalRequestFailure = () => ({\r\n    type: userActionTypes.KEY_RETRIEVAL_REQUEST_FAILURE\r\n});\r\n\r\nexport const keyCreationRequestSend = (description) => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_SEND,\r\n    payload: {\r\n        description\r\n    }\r\n});\r\n\r\nexport const keyCreationRequestProcessing = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_PROCESSING\r\n});\r\n\r\nexport const keyCreationRequestFailure = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_FAILURE\r\n});\r\n\r\nexport const keyCreationRequestSuccess = () => ({\r\n    type: userActionTypes.KEY_CREATION_REQUEST_SUCCESS\r\n});\r\n\r\nexport const refreshLogin = () => ({\r\n    type: userActionTypes.REFRESH_LOGIN\r\n});\r\n\r\nexport const updateUserInfoRequestSend = (userInfo) => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_SEND,\r\n    payload: {\r\n        userInfo\r\n    }\r\n});\r\n\r\nexport const updateUserInfoRequestSuccess = () => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_SUCCESS\r\n});\r\n\r\nexport const updateUserInfoRequestFailure = () => ({\r\n    type: userActionTypes.UPDATE_USER_INFO_REQUEST_FAILURE\r\n});\r\n\r\nexport const initializeGoogleAuth = () => ({\r\n    type: userActionTypes.INITIALIZE_GOOGLE_AUTH\r\n});\r\n\r\nexport const storeGoogleAuth = () => ({\r\n    type: userActionTypes.STORE_GOOGLE_AUTH\r\n});\r\n\r\nexport const recoverPasswordRequestSend = (email) => ({\r\n    type: userActionTypes.RECOVER_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        email\r\n    }\r\n});\r\n\r\nexport const choosePasswordRequestSend = ({password, token}) => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        password,\r\n        token\r\n    }\r\n});\r\n\r\nexport const choosePasswordRequestSuccess = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_SUCCESS\r\n});\r\n\r\nexport const choosePasswordRequestFailure = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_FAILURE\r\n});\r\n\r\nexport const choosePasswordRequestReset = () => ({\r\n    type: userActionTypes.CHOOSE_PASSWORD_REQUEST_RESET\r\n});\r\n\r\nexport const contactUsRequestSend = ({name, email, subject, message}) => ({\r\n    type: userActionTypes.CONTACT_US_REQUEST_SEND,\r\n    payload: {\r\n        name,\r\n        email,\r\n        subject,\r\n        message\r\n    }\r\n});\r\n\r\nexport const changePasswordRequestSend = (oldPassword, newPassword, username) => ({\r\n    type: userActionTypes.CHANGE_PASSWORD_REQUEST_SEND,\r\n    payload: {\r\n        password: oldPassword,\r\n        newPassword,\r\n        username\r\n    }\r\n});\r\n\r\nexport const changeEmailRequestSend = (email, password, username) => ({\r\n    type: userActionTypes.CHANGE_EMAIL_REQUEST_SEND,\r\n    payload: {\r\n        email,\r\n        password,\r\n        username\r\n    }\r\n});","import * as catalogActionTypes from '../actionTypes/catalog';\r\n\r\nexport const retrievalRequestSend = () => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_SEND\r\n})\r\n\r\nexport const retrievalRequestProcessing = () => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_PROCESSING\r\n})\r\n\r\nexport const retrievalRequestSuccess = (catalog) => ({\r\n    type: catalogActionTypes.RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        catalog\r\n    }\r\n})\r\n\r\nexport const retrievalRequestFailure = () => ({\r\n    type:catalogActionTypes.RETRIEVAL_REQUEST_FAILURE\r\n})\r\n\r\nexport const datasetRetrievalRequestSend = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SEND\r\n})\r\n\r\nexport const datasetRetrievalRequestProcessing = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_PROCESSING\r\n})\r\n\r\nexport const datasetRetrievalRequestSuccess = (datasets) => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SUCCESS,\r\n    payload: {\r\n        datasets\r\n    }\r\n})\r\n\r\nexport const datasetRetrievalRequestFailure = () => ({\r\n    type: catalogActionTypes.DATASET_RETRIEVAL_REQUEST_FAILURE\r\n})","import * as interfaceActionTypes from '../actionTypes/ui';\r\n\r\nexport const showLoginDialog = () => ({\r\n    type: interfaceActionTypes.INTERFACE_SHOW_LOGIN_DIALOG\r\n})\r\n\r\nexport const hideLoginDialog = () => ({\r\n    type: interfaceActionTypes.INTERFACE_HIDE_LOGIN_DIALOG\r\n})\r\n\r\nexport const registrationNextActiveStep = () => ({\r\n    type: interfaceActionTypes.REGISTRATION_NEXT_ACTIVE_STEP\r\n})\r\n\r\nexport const registrationPreviousActiveStep = () => ({\r\n    type: interfaceActionTypes.REGISTRATION_PREVIOUS_ACTIVE_STEP\r\n})\r\n\r\nexport const restoreInterfaceDefaults = () => ({\r\n    type: interfaceActionTypes.RESTORE_INTERFACE_DEFAULTS\r\n})\r\n\r\nexport const snackbarOpen = (message) => ({\r\n    type: interfaceActionTypes.SNACKBAR_OPEN,\r\n    payload: {\r\n        message\r\n    }\r\n})\r\n\r\nexport const snackbarClose = () => ({\r\n    type: interfaceActionTypes.SNACKBAR_CLOSE\r\n})\r\n\r\nexport const setLoadingMessage = (message) => ({\r\n    type:interfaceActionTypes.SET_LOADING_MESSAGE,\r\n    payload: {\r\n        message\r\n    }\r\n})\r\n\r\nexport const toggleShowHelp = () => ({\r\n    type: interfaceActionTypes.TOGGLE_SHOW_HELP\r\n})\r\n\r\nexport const showChangePasswordDialog = () => ({\r\n    type: interfaceActionTypes.SHOW_CHANGE_PASSWORD_DIALOG\r\n})\r\n\r\nexport const hideChangePasswordDialog = () => ({\r\n    type: interfaceActionTypes.HIDE_CHANGE_PASSWORD_DIALOG\r\n})\r\n\r\nexport const showChangeEmailDialog = () => ({\r\n    type: interfaceActionTypes.SHOW_CHANGE_EMAIL_DIALOG\r\n})\r\n\r\nexport const hideChangeEmailDialog = () => ({\r\n    type: interfaceActionTypes.HIDE_CHANGE_EMAIL_DIALOG\r\n})","import * as visualizationActionTypes from '../actionTypes/visualization';\r\n\r\nexport const queryRequestSend = (query) => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_SEND,\r\n    payload: {\r\n        query\r\n    }\r\n})\r\n\r\nexport const queryRequestSuccess = (data) => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_SUCCESS,\r\n    payload: {\r\n        data\r\n    }\r\n})\r\n\r\nexport const queryRequestFailure = () => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_FAILURE\r\n})\r\n\r\nexport const queryRequestProcessing = () => ({\r\n    type: visualizationActionTypes.QUERY_REQUEST_PROCESSING\r\n})\r\n\r\nexport const storedProcedureRequestSend = (storedProcedureInfo) => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_SEND,\r\n    payload: {...storedProcedureInfo}\r\n})\r\n\r\nexport const storedProcedureRequestSuccess = (data) => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_SUCCESS,\r\n    payload: {\r\n        data\r\n    }\r\n})\r\n\r\nexport const storedProcedureRequestFailure = () => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_FAILURE\r\n})\r\n\r\nexport const storedProcedureRequestProcessing = () => ({\r\n    type: visualizationActionTypes.STORED_PROCEDURE_REQUEST_PROCESSING\r\n})\r\n\r\nexport const addLayer = (newLayer) => ({\r\n    type: visualizationActionTypes.ADD_LAYER,\r\n    payload: {\r\n        newLayer\r\n    }\r\n})\r\n\r\nexport const storeSampleData = sampleData => ({\r\n    type: visualizationActionTypes.STORE_SAMPLE_DATA,\r\n    payload: {\r\n        sampleData\r\n    }\r\n})\r\n\r\nexport const addMap = (mapInfo) => ({\r\n    type: visualizationActionTypes.ADD_MAP,\r\n    payload: {\r\n        mapInfo\r\n    }\r\n})\r\n\r\nexport const addChart = (chartInfo) => ({\r\n    type: visualizationActionTypes.ADD_CHART,\r\n    payload: {\r\n        chartInfo\r\n    }\r\n})\r\n\r\nexport const clearCharts = () => ({\r\n    type: visualizationActionTypes.CLEAR_CHARTS\r\n})\r\n\r\nexport const clearMaps = () => ({\r\n    type: visualizationActionTypes.CLEAR_MAPS\r\n})\r\n\r\nexport const deleteChart = (chartIndex) => ({\r\n    type: visualizationActionTypes.DELETE_CHART,\r\n    payload: {\r\n        chartIndex\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestSend = (tableName, datasetLongName) => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_SEND,\r\n    payload: {\r\n        tableName,\r\n        datasetLongName\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestProcessing = () => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_PROCESSING\r\n})\r\n\r\nexport const tableStatsRequestSuccess = (tableStats, datasetLongName) => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_SUCCESS,\r\n    payload: {\r\n        tableStats,\r\n        datasetLongName\r\n    }\r\n})\r\n\r\nexport const tableStatsRequestFailure = () => ({\r\n    type: visualizationActionTypes.TABLE_STATS_REQUEST_FAILURE\r\n})\r\n\r\nexport const cruiseTrajectoryRequestSend = (id) => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SEND,\r\n    payload: {\r\n        id\r\n    }\r\n})\r\n\r\nexport const cruiseTrajectoryRequestSuccess = (trajectory) => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SUCCESS,\r\n    payload: {\r\n        trajectory\r\n    }\r\n})\r\n\r\nexport const cruiseTrajectoryRequestFailure = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_FAILURE,\r\n})\r\n\r\nexport const cruiseTrajectoryRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_PROCESSING,\r\n})\r\n\r\nexport const cruiseTrajectoryClear = () => ({\r\n    type: visualizationActionTypes.CRUISE_TRAJECTORY_CLEAR\r\n})\r\n\r\nexport const cruiseListRequestSend = (id) => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_SEND,\r\n})\r\n\r\nexport const cruiseListRequestSuccess = (cruiseList) => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_SUCCESS,\r\n    payload: {\r\n        cruiseList\r\n    }\r\n})\r\n\r\nexport const cruiseListRequestFailure = () => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_FAILURE,\r\n})\r\n\r\nexport const cruiseListRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CRUISE_LIST_REQUEST_PROCESSING,\r\n})\r\n\r\nexport const triggerShowCharts = () => ({\r\n    type: visualizationActionTypes.TRIGGER_SHOW_CHARTS\r\n})\r\n\r\nexport const completedShowCharts = () => ({\r\n    type: visualizationActionTypes.COMPLETED_SHOW_CHARTS\r\n})\r\n\r\nexport const csvDownloadRequestSend = (query, fileName) => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SEND,\r\n    payload: {\r\n        query,\r\n        fileName\r\n    }\r\n})\r\n\r\nexport const csvDownloadRequestFailure = () => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_FAILURE\r\n})\r\n\r\nexport const csvDownloadRequestProcessing = () => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_PROCESSING\r\n})\r\n\r\nexport const csvDownloadRequestSuccess = (text) => ({\r\n    type: visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SUCCESS,\r\n    payload: {\r\n        text\r\n    }\r\n})\r\n\r\n//dataset download\r\nexport const downloadTextAsCsv = (text, datasetName) => ({\r\n    type: visualizationActionTypes.DOWNLOAD_TEXT_AS_CSV,\r\n    payload: {\r\n        text,\r\n        datasetName\r\n    }\r\n})","// export const apiUrl = 'https://simonscmap.com'\r\n// export const apiUrl = 'http://localhost:8080';\r\nexport const apiUrl = 'https://simonscmap.dev';","const spatialResolutions = {\r\n    irregular: 'Irregular',\r\n    halfDegree: '1/2° X 1/2°' ,\r\n    quarterDegree: '1/4° X 1/4°' ,\r\n    twentyFifthDegree: '1/25° X 1/25°' ,\r\n    fourKm: '4km X 4km',\r\n    twelfthDegree: '1/12° X 1/12°',\r\n    seventyKm: '70km X 70km',\r\n    oneDegree: '1° X 1°',\r\n    nineKm: '9km X 9km',\r\n    twentyFiveKm: '25km X 25km'\r\n}\r\n\r\nexport default spatialResolutions;","import spatialResolutions from '../Enums/spatialResolutions';\r\n\r\nconst mapSpatialResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [spatialResolutions.halfDegree] : .5,\r\n        [spatialResolutions.quarterDegree] : .25,\r\n        [spatialResolutions.twentyFifthDegree] : .04,\r\n        [spatialResolutions.fourKm] : .041672,\r\n        [spatialResolutions.twelfthDegree] : .083333,\r\n        [spatialResolutions.oneDegree] : 1,\r\n        [spatialResolutions.seventyKm] : .25,\r\n        [spatialResolutions.nineKm] : .083333,\r\n        [spatialResolutions.twentyFiveKm] : .23148\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapSpatialResolutionToNumber;","// Flattens an array by 1 level\r\n// [[[],[]], [[],[]], [[],[]]] => [[], [], [], [], [], []]\r\n\r\nconst flattenArray = (arr) => {\r\n    let flattenedArray = [];\r\n\r\n    for(let i = 0; i < arr.length; i++){\r\n        for(let j = 0; j < arr[i].length; j++){\r\n            flattenedArray.push(arr[i][j]);\r\n        }\r\n    }\r\n\r\n    return flattenedArray;\r\n}\r\n\r\nexport default flattenArray;","// Interval is number of indices between changes in this parameter, or in order words\r\n// how many times will we see the same value for this parameter in a row before it changes\r\n// as we iterate through the values array.\r\n// We use modulo for cases where data.length / interval is larger than the number of \r\n// distinct values for that parameter.\r\n\r\nconst splitData = (data, changeInterval, numDistinct) => {\r\n    var splitData = [];\r\n\r\n    for(let i = 0; i < numDistinct; i++){\r\n        splitData.push([]);\r\n    }\r\n\r\n    for(let i = 0; i < data.length; i++){\r\n        let index = Math.floor(i / changeInterval) % numDistinct;\r\n        splitData[index].push(data[i]);\r\n    }\r\n\r\n    return splitData;\r\n}\r\n\r\nexport default splitData;","// mergeTargetDistance - number of hops between arrays being merged\r\n// mergeTargetNumber - number of arrays being merged - implicit\r\n// nextStartDistance - once a merge is complete how many hops to next start\r\nconst mergeArraysAndComputeMeans = (data, mergeTargetDistance, nextMergeStartDistance, numArraysPerMerge) => {\r\n    let mergedArrays = [];\r\n\r\n    let travelDistance = mergeTargetDistance * (numArraysPerMerge - 1);\r\n    \r\n    // Find each merging start point\r\n    for(let i = 0; i + travelDistance < data.length; i += nextMergeStartDistance){\r\n        let subArray = [];\r\n\r\n        // Iterate through each value in the first array of this merge. Count\r\n        // the number of values summed so we can ignore nulls and compute a mean.\r\n        for(let j = 0; j < data[i].length; j ++){\r\n            let sum = 0;\r\n            let count = 0;\r\n\r\n            // Aggregate values of all merge targets\r\n            for(let k = i; k < i + (mergeTargetDistance * numArraysPerMerge); k += mergeTargetDistance){\r\n                if(isNaN(data[k][j])) {\r\n                    continue;\r\n                } else {                    \r\n                    sum += data[k][j];\r\n                    count ++;\r\n                }\r\n            }\r\n            subArray.push(count < 1 ? null : sum / (count));\r\n        }\r\n\r\n        mergedArrays.push(subArray)\r\n    }\r\n\r\n    return mergedArrays;\r\n}\r\n\r\nexport default mergeArraysAndComputeMeans;","const mergeArrays = (data, mergeTargetDistance, nextMergeStartDistance, numArraysPerMerge) => {\r\n    let mergedArrays = [];\r\n\r\n    let travelDistance = mergeTargetDistance * (numArraysPerMerge - 1);\r\n\r\n    // Find each merge start point\r\n    for(let i = 0; i + travelDistance < data.length; i += nextMergeStartDistance){\r\n        let subArray = [];\r\n\r\n        for(let j = i; j <= i + travelDistance; j += mergeTargetDistance){\r\n            subArray = [...subArray, ...data[j]];\r\n        }\r\n\r\n        mergedArrays.push(subArray);\r\n    }\r\n   \r\n    return mergedArrays;\r\n}\r\n\r\nexport default mergeArrays;\r\n\r\n","const subTypes= {\r\n    sectionMap: 'Section Map',\r\n    contourSectionMap: 'Contour Section Map',\r\n    timeSeries: 'Time Series',\r\n    histogram: 'Histogram',\r\n    depthProfile: 'Depth Profile',\r\n    heatmap: 'Heatmap',\r\n    contourMap: 'Contour Map',\r\n    sparse: 'Sparse'\r\n}\r\n\r\nexport default subTypes;","const temporalResolutions = {\r\n    threeMinutes: 'Three Minutes',\r\n    sixHourly: 'Six Hourly',\r\n    daily: 'Daily',\r\n    weekly: 'Weekly',\r\n    monthly: 'Monthly',\r\n    annual: 'Annual',\r\n    irregular: 'Irregular',\r\n    monthlyClimatology: 'Monthly Climatology',\r\n    threeDay: 'Three Days',\r\n    eightDayRunning: 'Eight Day Running',\r\n    eightDays: 'Eight Days '\r\n}\r\n\r\nexport default temporalResolutions;","import { quantile, extent } from 'd3-array';\r\n\r\nimport mapSpatialResolutionToNumber from '../Utility/mapSpatialResolutionToNumber';\r\nimport flattenArray from '../Utility/flattenArray';\r\nimport splitData from '../Utility/splitData';\r\nimport mergeArraysAndComputeMeans from '../Utility/mergeArraysAndComputeMeans';\r\nimport mergeArrays from '../Utility/mergeArrays';\r\n\r\nimport vizSubTypes from '../Enums/visualizationSubTypes';\r\nimport temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass SpaceTimeData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n\r\n        this.hasDepth = null;\r\n        this.hasHours = null;\r\n        this.isMonthly = null;\r\n\r\n        this.depths = new Set();\r\n        this.dates = new Set();\r\n        this.variableValues = [];\r\n\r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n        this.indexAdjust = null;\r\n        this.payload = payload;\r\n        this.lats = [];\r\n        this.lons = [];\r\n\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n        this.latMin = null;\r\n        this.latMax = null;\r\n\r\n        this.distinctLatCount = null;\r\n        this.distinctLonCount = null;\r\n    }\r\n\r\n    add(row) {\r\n        \r\n        let lat = parseFloat(row[1]);\r\n        let _lon = parseFloat(row[2]);\r\n        let lon = _lon < this.parameters.lon1 ? _lon + 360 : _lon;\r\n\r\n        if(this.hasDepth === null) {\r\n            this.hasHour = this.metadata.Table_Name === 'tblWind_NRT';\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n            this.hasDepth = row.length === 5 && !this.hasHour;\r\n            this.indexAdjust = this.hasDepth || this.hasHour? 1 : 0;\r\n            this.lonMin = lon;\r\n            this.lonMax = lon;\r\n            this.latMin = lat;\r\n            this.latMax = lat;\r\n        }\r\n\r\n        let value = parseFloat(row[3 + this.indexAdjust]);\r\n\r\n        if(this.hasDepth){\r\n            this.depths.add(row[3]);\r\n        }\r\n\r\n        var time;\r\n        if(this.hasHour){\r\n            time = new Date(row[0]);\r\n            time.setUTCHours(row[3])\r\n            time = time.toISOString();\r\n        } else time = row[0];\r\n        this.dates.add(time);\r\n        this.lats.push(lat);\r\n\r\n        this.lons.push(lon);\r\n\r\n        if(lon < this.lonMin) this.lonMin = lon;\r\n        if(lon > this.lonMax) this.lonMax = lon;\r\n        if(lat < this.latMin) this.latMin = lat;\r\n        if(lat > this.latMax) this.latMax = lat;\r\n\r\n        this.variableValues.push(value);\r\n    }\r\n\r\n    finalize() {\r\n\r\n        if(this.depths.size === 0) this.depths.add('Surface');\r\n\r\n        this.lonCount = this.lons.length / this.dates.size / this.depths.size;\r\n        this.latCount = this.lats.length / this.dates.size / this.depths.size;\r\n\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : parseFloat(quantile1.toPrecision(4));\r\n        this.zMax = quantile2 === undefined ? null : parseFloat(quantile2.toPrecision(4));\r\n        this.extent = extent(this.variableValues);\r\n\r\n        let spatialResolution = mapSpatialResolutionToNumber(this.metadata.Spatial_Resolution);\r\n        \r\n        this.distinctLatCount = Math.round((this.latMax - this.latMin) / spatialResolution) + 1;\r\n        this.distinctLonCount = Math.round((this.lonMax - this.lonMin) / spatialResolution) + 1;\r\n    }\r\n\r\n    generatePlotData(subType, splitByDate, splitByDepth) {        \r\n\r\n        // Intervals are the number of indices between each change for that parameter\r\n        // Intervals can change if you split out of order\r\n        const latInterval = this.distinctLonCount;\r\n        const depthInterval = latInterval * this.distinctLatCount;\r\n        const dateInterval = depthInterval * this.depths.size;\r\n\r\n        // an array of arrays containing variable values, each of which will become a chart\r\n        var variableValueSubsets;\r\n        \r\n        variableValueSubsets = splitData(this.variableValues, dateInterval, this.dates.size);\r\n        variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, depthInterval, this.depths.size));\r\n        variableValueSubsets = flattenArray(variableValueSubsets);\r\n\r\n        // Contour and heatmap compute mean variable values per lat and lon\r\n        // when not split by date and/or time\r\n        if(subType === vizSubTypes.contourMap || subType === vizSubTypes.heatmap) {\r\n            if(splitByDate && splitByDepth) {\r\n                // pass\r\n            } else if (splitByDate){\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    1, \r\n                    this.depths.size, \r\n                    this.depths.size\r\n                    );\r\n    \r\n            } else if (splitByDepth){\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    this.depths.size, \r\n                    1, \r\n                    this.dates.size\r\n                    );\r\n    \r\n            } else {\r\n                variableValueSubsets = mergeArraysAndComputeMeans(\r\n                    variableValueSubsets, \r\n                    1, \r\n                    variableValueSubsets.length, \r\n                    variableValueSubsets.length\r\n                    );            \r\n            }\r\n        } \r\n        \r\n        // Histograms split and aggregate without computing means\r\n        else if (subType === vizSubTypes.histogram) {\r\n            if(splitByDate && splitByDepth) {\r\n                // pass\r\n            } else if (splitByDate){\r\n                variableValueSubsets = mergeArrays(\r\n                    variableValueSubsets, \r\n                    1,\r\n                    this.depths.size,\r\n                    this.depths.size\r\n                    );\r\n            } else if (splitByDepth){\r\n                variableValueSubsets = mergeArrays(\r\n                    variableValueSubsets,\r\n                    this.depths.size,\r\n                    1,\r\n                    this.dates.size\r\n                );\r\n            } else {\r\n                variableValueSubsets = [this.variableValues];\r\n            }\r\n        }\r\n\r\n        // Nothing here yet\r\n        else {}\r\n\r\n        return variableValueSubsets;\r\n    }\r\n\r\n    generateCsv = () => {\r\n        let dates = Array.from(this.dates);\r\n        let depths = Array.from(this.depths);\r\n        var csvArray;\r\n\r\n        if(this.hasDepth){\r\n            csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${this.lats[i]},${this.lons[i] > 180 ? this.lons[i] - 360 : this.lons[i]},${depths[Math.floor(i / (this.variableValues.length / (dates.length * depths.length))) % depths.length]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n\r\n        } else {\r\n            csvArray = [`time,lat,lon,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${this.lats[i]},${this.lons[i] > 180 ? this.lons[i] - 360 : this.lons[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SpaceTimeData;","const storedProcedures = {\r\n    sectionMap: 'uspSectionMap',\r\n    timeSeries: 'uspTimeSeries',\r\n    spaceTime: 'uspSpaceTime',\r\n    depthProfile: 'uspDepthProfile'\r\n}\r\n\r\nexport default storedProcedures;","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass TimeSeriesData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.variableValues = [];\r\n        this.stds = [];\r\n        this.dates = [];\r\n        this.lat = null;\r\n        this.lon = null;\r\n        this.depth = null;\r\n        this.depthIndexAdjust = null;\r\n    }\r\n\r\n    add(row) {\r\n        if(this.lat === null){\r\n            this.depthIndexAdjust = row.length === 6 ? 1 : 0;\r\n            this.lat = row[1];\r\n            this.lon = row[2];\r\n            this.depth = row.length === 6 ? row[3] : false;\r\n            this.hasHour = this.metadata.Table_Name === 'tblWind_NRT';\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }\r\n\r\n        this.variableValues.push(row[3 + this.depthIndexAdjust]);\r\n        this.stds.push(row[4 + this.depthIndexAdjust]);\r\n        this.dates.push(row[0]);\r\n    }\r\n\r\n    finalize() {\r\n        if(this.depth === false) this.depth = 'Surface';\r\n    }\r\n\r\n    generatePlotData() {\r\n        return this.variableValues;\r\n    }    \r\n\r\n    generateCsv() {\r\n        let csvString = `time,${this.parameters.fields},${this.parameters.fields}_std`;\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvString += `\\n${this.dates[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]},${isNaN(this.stds[i]) ? '' : this.stds[i]}`;\r\n        }\r\n\r\n        return csvString;\r\n    }\r\n}\r\n\r\nexport default TimeSeriesData;","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass DepthProfileData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.variableValues = [];\r\n        this.stds = [];\r\n        this.lat = null;\r\n        this.lon = null;\r\n        this.depths = [];\r\n    }\r\n\r\n    add(row) {\r\n        if(this.lat === null){\r\n            this.lat = parseFloat(row[0]);\r\n            this.lon = parseFloat(row[1]);\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }\r\n\r\n        this.variableValues.push(parseFloat(row[2]));\r\n        this.stds.push(parseFloat(row[3]));\r\n        this.depths.push(parseFloat(row[4]));\r\n    }\r\n\r\n    finalize() {\r\n        // pass\r\n    }\r\n\r\n    generatePlotData() {\r\n        return this.variableValues;\r\n    }\r\n    \r\n    generateCsv() {\r\n        let csvString = `depth,${this.parameters.fields},${this.parameters.fields}_std`;\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvString += `\\n${this.depths[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]},${isNaN(this.stds[i]) ? '' : this.stds[i]}`;\r\n        }\r\n\r\n        return csvString;\r\n    }\r\n}\r\n\r\nexport default DepthProfileData;","import { quantile, extent } from 'd3-array';\r\n\r\nimport flattenArray from '../Utility/flattenArray';\r\nimport splitData from '../Utility/splitData';\r\nimport mergeArraysAndComputeMeans from '../Utility/mergeArraysAndComputeMeans';\r\nimport temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nclass SectionMapData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.subType = payload.subType\r\n        \r\n        this.dates = new Set();\r\n        this.depths = new Set();\r\n        this.lats = new Set();\r\n        this.lons = new Set();\r\n\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n\r\n        this.variableValues = [];\r\n        \r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n\r\n        this.orientation = null;\r\n    }\r\n\r\n    // time, lat, lon, depth, value\r\n    add(row) {        \r\n        const time = row[0];\r\n        const lat = parseFloat(row[1]);\r\n        var _lon = parseFloat(row[2]);\r\n        const lon = _lon < this.parameters.lon1 ? _lon + 360 : _lon;\r\n        const depth = parseFloat(row[3]);\r\n        const value = parseFloat(row[4]);\r\n\r\n        if(this.variableValues.length === 0) {\r\n            this.isMonthly = this.metadata.Temporal_Resolution === temporalResolutions.monthlyClimatology;\r\n        }        \r\n\r\n        this.depths.add(depth);\r\n        this.dates.add(time);\r\n        this.lats.add(lat);\r\n        this.lons.add(lon);\r\n\r\n        this.variableValues.push(value);\r\n    }\r\n\r\n    finalize() {\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : parseFloat(quantile1.toPrecision(4));\r\n        this.zMax = quantile2 === undefined ? null : parseFloat(quantile2.toPrecision(4));\r\n\r\n        this.extent = extent(this.variableValues);\r\n\r\n        this.orientation = this.lons.size > this.lats.size ? 'zonal' : 'meridional';\r\n\r\n        let lonArray = Array.from(this.lons);\r\n        this.lonMax = Math.max(...lonArray);\r\n        this.lonMin = Math.min(...lonArray);\r\n        // console.log(this.variableValues);\r\n    }\r\n\r\n    // Direction is meridional or zonal\r\n    generatePlotData(orientation, splitByDate, splitBySpace) {\r\n        let latCount = this.lats.size;\r\n        let lonCount = this.lons.size;\r\n\r\n        // Intervals are the number of indices between each change for that parameter\r\n        // Intervals can change if you split out of order\r\n        const lonInterval = this.depths.size;\r\n        const latInterval = lonInterval * lonCount;\r\n        const dateInterval = latInterval * latCount;\r\n\r\n        var variableValueSubsets = splitData(this.variableValues, dateInterval, this.dates.size);\r\n\r\n        var spaceCount;\r\n\r\n        if(orientation === 'zonal') {\r\n            variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, latInterval, latCount));\r\n            variableValueSubsets = flattenArray(variableValueSubsets);\r\n            spaceCount = latCount;\r\n        }\r\n\r\n        else {\r\n            variableValueSubsets = variableValueSubsets.map(subset => splitData(subset, lonInterval, lonCount));\r\n            variableValueSubsets = flattenArray(variableValueSubsets);\r\n            spaceCount = lonCount;\r\n        }\r\n\r\n        // console.log('Split by space');\r\n        // console.log(variableValueSubsets);\r\n\r\n        if(splitByDate && splitBySpace){\r\n            // pass\r\n        } else if (splitByDate){\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                1,\r\n                spaceCount,\r\n                spaceCount\r\n            )\r\n        } else if (splitBySpace) {\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                spaceCount,\r\n                1,\r\n                this.dates.size\r\n            )\r\n        } else {\r\n            variableValueSubsets = mergeArraysAndComputeMeans(\r\n                variableValueSubsets,\r\n                1,\r\n                variableValueSubsets.length,\r\n                variableValueSubsets.length\r\n            )\r\n        }\r\n\r\n        return variableValueSubsets;\r\n    }\r\n\r\n    generateCsv = () => {\r\n        let dates = Array.from(this.dates);\r\n        let depths = Array.from(this.depths);\r\n        let lons = Array.from(this.lons);\r\n        let lats = Array.from(this.lats);\r\n\r\n        const lonInterval = depths.length;\r\n        const latInterval = lonInterval * lons.length;\r\n\r\n        var csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n        for(let i = 0; i < this.variableValues.length; i++){\r\n            csvArray.push(`${dates[Math.floor(i / (this.variableValues.length / dates.length))]},${lats[Math.floor(i / latInterval) % lats.length]},${lons[Math.floor(i / lonInterval) % lons.length]},${depths[i % depths.length]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SectionMapData;","import { quantile, extent } from 'd3-array';\r\n\r\nclass SparseData {\r\n    constructor(payload) {\r\n        this.parameters = payload.parameters;\r\n        this.metadata = payload.metadata;\r\n        this.hasDepth = null;\r\n        this.variableIndex = payload.metadata.Depth_Min ? 4 : 3;\r\n        this.depths = [];\r\n        this.times = [];\r\n        this.variableValues = [];\r\n        this.lats = [];\r\n        this.lons = [];\r\n        this.zMin = null;\r\n        this.zMax = null;\r\n        this.extent = [null, null];\r\n\r\n        this.latMin = null;\r\n        this.latMax = null;\r\n        this.lonMin = null;\r\n        this.lonMax = null;\r\n    }\r\n\r\n    add(row) {\r\n        let lat = parseFloat(row[1]);\r\n        let lon = parseFloat(row[2]);\r\n\r\n        if(this.hasDepth === null){\r\n            this.hasDepth = Boolean(this.metadata.Depth_Min);\r\n            this.latMin = lat;\r\n            this.latMax = lat;\r\n            this.lonMin = lon;\r\n            this.lonMax = lon;\r\n        }\r\n\r\n        if(row[this.variableIndex]){\r\n\r\n            this.times.push(row[0]);\r\n            this.lats.push(lat);\r\n            this.lons.push(lon);\r\n            if(this.hasDepth) this.depths.push(parseFloat(row[3]));\r\n            this.variableValues.push(parseFloat(row[this.variableIndex]));\r\n\r\n            if(lat < this.latMin) this.latMin = lat;\r\n            if(lat > this.latMax) this.latMax = lat;\r\n            \r\n            if(lon < this.lonMin) this.lonMin = lon;\r\n            if(lon > this.lonMax) this.lonMax = lon;\r\n        }\r\n    }\r\n\r\n    finalize() {\r\n\r\n        let quantile1 = quantile(this.variableValues, .05);\r\n        let quantile2 = quantile(this.variableValues, .95);\r\n        this.zMin = quantile1 === undefined ? null : quantile1.toPrecision(4);\r\n        this.zMax = quantile2 === undefined ? null : quantile2.toPrecision(4);\r\n\r\n        this.extent = extent(this.variableValues);\r\n\r\n        let latDistance = Math.abs(this.latMax - this.latMin);\r\n        let lonDistance = Math.abs(this.lonMax - this.lonMin);\r\n        let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n\r\n        let _zoom = 4 - Math.floor(distance / 12);\r\n        this.zoom = _zoom < 0 ? 0 : _zoom;\r\n\r\n        let lonCenter = (this.lonMax + this.lonMin) / 2;\r\n        let latCenter = (this.latMax + this.latMin) / 2;\r\n        this.center = { \r\n            lon: lonCenter, \r\n            lat: latCenter\r\n        }\r\n    }\r\n\r\n    generatePlotData(subType, splitByDate, splitByDepth) {\r\n        return this.variableValues;\r\n    }\r\n\r\n    generateCsv(){\r\n        var csvArray;\r\n\r\n        if(this.hasDepth){\r\n            csvArray = [`time,lat,lon,depth,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${this.times[i]},${this.lats[i]},${this.lons[i]},${this.depths[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n\r\n        } else {\r\n            csvArray = [`time,lat,lon,${this.parameters.fields}`];\r\n\r\n            for(let i = 0; i < this.variableValues.length; i++){\r\n                csvArray.push(`${this.times[i]},${this.lats[i]},${this.lons[i]},${isNaN(this.variableValues[i]) ? '' : this.variableValues[i]}`);\r\n            }\r\n        }\r\n\r\n        return csvArray.join('\\n');\r\n    }\r\n}\r\n\r\nexport default SparseData;","import CSVParser from 'csv-parse';\r\n\r\nimport { apiUrl } from './config';\r\nimport SpaceTimeData from './Classes/SpaceTimeData';\r\n\r\nimport storedProcedures from './Enums/storedProcedures';\r\nimport TimeSeriesData from './Classes/TimeSeriesData';\r\nimport DepthProfileData from './Classes/DepthProfileData';\r\nimport SectionMapData from './Classes/SectionMapData';\r\nimport SparseData from './Classes/SparseData';\r\n\r\nimport encoding from 'text-encoding';\r\n\r\nconst fetchOptions = {\r\n    credentials: 'include'\r\n}\r\n\r\nconst postOptions = {\r\n    ...fetchOptions,\r\n    method: 'POST',\r\n    headers: {\"Content-Type\": \"application/json\"}\r\n}\r\n\r\nconst storedProcedureParametersToUri = (parameters) => {\r\n    return Object.keys(parameters).reduce(function (queryString, key, i) {\r\n        return `${queryString}${i===0 ? '' : '&&'}${key}=${parameters[key]}`;\r\n      }, '');\r\n}\r\n\r\nconst api = {};\r\napi.user = {};\r\napi.dataRetrieval = {};\r\napi.catalog = {};\r\napi.visualization = {};\r\n\r\napi.user.login = (user) => {\r\n    return fetch(apiUrl + '/user/signin', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    });\r\n}\r\n\r\napi.user.logout = () => {\r\n    return fetch(apiUrl + '/user/signout', fetchOptions);\r\n}\r\n\r\napi.user.register = (user) => {\r\n    return fetch(apiUrl + '/user/signup', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    })\r\n}\r\n\r\napi.user.validate = (user) => {\r\n    return fetch(apiUrl + '/user/validate', {\r\n        ...postOptions,\r\n        body: JSON.stringify(user),\r\n    })\r\n}\r\n\r\napi.user.googleLoginRequest = async(userIDToken) => {\r\n    let response = await fetch(apiUrl + '/user/googleauth', {\r\n        ...postOptions,\r\n        body: JSON.stringify({userIDToken}),\r\n    })\r\n\r\n    return response;\r\n}\r\n\r\napi.user.contactUs = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/contactus', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.user.changePassword = async(payload) => {\r\n    return await fetch(apiUrl + '/api/user/changepassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.user.changeEmail = async(payload) => {\r\n    console.log(payload);\r\n    return await fetch(apiUrl + '/api/user/changeemail', {\r\n        ...postOptions,\r\n        body: JSON.stringify(payload)\r\n    })\r\n}\r\n\r\napi.catalog.retrieve = async() => {\r\n\r\n    const decoder = new encoding.TextDecoder();\r\n    let catalog = [];\r\n\r\n    let csvParser = CSVParser({columns:true});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record\r\n        while (record = csvParser.read()) {\r\n            catalog.push(record)\r\n        }\r\n    })\r\n\r\n    let response = await fetch(apiUrl + '/api/catalog', fetchOptions);\r\n\r\n    if(!response.ok) return false;\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n    return catalog;\r\n}\r\n\r\napi.catalog.datasets = async() => {\r\n    const decoder = new encoding.TextDecoder();\r\n    let datasets = {};\r\n\r\n    let csvParser = CSVParser({columns:true});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record\r\n        while (record = csvParser.read()) {\r\n            datasets[record.Dataset_Long_Name.trim()] = record;\r\n        }\r\n    })\r\n\r\n    let response = await fetch(apiUrl + '/api/catalog/datasets', fetchOptions);\r\n\r\n    if(!response.ok) return false;\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n    return datasets;\r\n}\r\n\r\napi.user.keyRetrieval = async() => {\r\n    let response = await fetch(apiUrl + '/user/retrieveapikeys', fetchOptions);\r\n    if(!response.ok) return false;\r\n    return await response.json();\r\n}\r\n\r\napi.user.keyCreation = async(description) => {\r\n    return await fetch(apiUrl + `/user/generateapikey?description=${description.trim()}`, fetchOptions);\r\n}\r\n\r\napi.user.updateUserInfo = async(userInfo) => {\r\n    return await fetch(apiUrl + '/api/user/updateinfo', {\r\n        ...postOptions,\r\n        body: JSON.stringify(userInfo),\r\n    });\r\n}\r\n\r\napi.user.recoverPassword = async(email) => {\r\n    fetch(apiUrl + '/api/user/forgotpassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify({email})\r\n    })\r\n}\r\n\r\napi.user.choosePassword = async({password, token}) => {\r\n    return await fetch(apiUrl + '/api/user/choosepassword', {\r\n        ...postOptions,\r\n        body: JSON.stringify({password, token})\r\n    })\r\n}\r\n\r\napi.visualization.storedProcedureRequest = async(payload) => {\r\n    const decoder = new encoding.TextDecoder();\r\n    var vizData;\r\n\r\n    switch(payload.parameters.spName) {\r\n        case storedProcedures.spaceTime:\r\n            if(payload.subType === 'Sparse') vizData = new SparseData(payload);\r\n            else vizData = new SpaceTimeData(payload);\r\n            break;\r\n\r\n        case storedProcedures.timeSeries:\r\n            vizData = new TimeSeriesData(payload);\r\n            break;\r\n\r\n        case storedProcedures.depthProfile:\r\n            vizData = new DepthProfileData(payload);\r\n            break;\r\n\r\n        case storedProcedures.sectionMap:\r\n            vizData = new SectionMapData(payload);\r\n            break;\r\n\r\n        default:\r\n            console.log('Unknown sproc name');\r\n    }\r\n\r\n    let response = await fetch(apiUrl + '/api/data/sp?' + storedProcedureParametersToUri(payload.parameters), fetchOptions);\r\n\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n\r\n    let csvParser = CSVParser({from: 2});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record;\r\n        while (record = csvParser.read()) {\r\n            vizData.add(record);\r\n        }\r\n    })\r\n\r\n    csvParser.on('error', (e) => {\r\n        console.log(e);\r\n    })\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n\r\n    return vizData;\r\n}\r\n\r\n\r\napi.visualization.getTableStats = async(tableName) => {\r\n    let response = await fetch(apiUrl + '/dataretrieval/tablestats?table=' + tableName, fetchOptions);\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n    return await response.json();\r\n}\r\n\r\napi.visualization.cruiseTrajectoryRequest = async(payload) => {\r\n    const decoder = new encoding.TextDecoder();\r\n    let trajectory = {lats: [], lons: []};\r\n\r\n    let response = await fetch(apiUrl + '/api/data/cruisetrajectory?' + `id=${payload.id}`, fetchOptions);\r\n\r\n    if(!response.ok) return {failed: true, status: response.status};\r\n\r\n    let csvParser = CSVParser({from: 2});\r\n\r\n    csvParser.on('readable', function(){\r\n        let record;\r\n        while (record = csvParser.read()) {\r\n            trajectory.lats.push(parseFloat(record[1]));\r\n            trajectory.lons.push(parseFloat(record[2]));\r\n        }\r\n    })\r\n\r\n    let body = response.body;\r\n    let reader = body.getReader();\r\n    let readerIsDone = false;\r\n\r\n    while(!readerIsDone){\r\n        let chunk = await reader.read();\r\n        if(chunk.done) {\r\n            readerIsDone = true;\r\n        }\r\n        else {\r\n            csvParser.write(decoder.decode(chunk.value));\r\n        };\r\n    }\r\n\r\n    return trajectory;\r\n}\r\n\r\napi.visualization.cruiseList = async() => {\r\n    let response = await fetch(apiUrl + '/api/data/cruiselist', fetchOptions);\r\n\r\n    if(response.ok){\r\n        return await response.json();\r\n    } else return false;   \r\n}\r\n\r\napi.visualization.csvDownload = async(payload) => {\r\n    let response = await fetch(apiUrl + `/api/data/query?query=${payload.query}`, fetchOptions);\r\n    if(response.ok) return await response.text();\r\n    else return {failed: true, status: response.status}\r\n}\r\n\r\nexport default api;","import { put, takeLatest, all, call, delay } from 'redux-saga/effects';\r\n// import { eventChannel } from 'redux-saga';\r\nimport Cookies from 'js-cookie';\r\n// import worker from '../worker';\r\n\r\nimport * as userActions from './actions/user';\r\nimport * as catalogActions from './actions/catalog';\r\nimport * as interfaceActions from './actions/ui';\r\nimport * as visualizationActions from './actions/visualization';\r\n\r\nimport * as userActionTypes from './actionTypes/user';\r\nimport * as catalogActionTypes from './actionTypes/catalog';\r\nimport * as visualizationActionTypes from './actionTypes/visualization';\r\n\r\nimport api from '../api';\r\n\r\nfunction* userLogin(action) {\r\n    yield put(userActions.userLoginRequestProcessing());\r\n    let result = yield call(api.user.login, action.payload);\r\n    \r\n    if(result.ok){\r\n        var userInfo = JSON.parse(Cookies.get('UserInfo'));\r\n        yield put(userActions.userLoginRequestSuccess());\r\n        yield put(interfaceActions.hideLoginDialog());\r\n        yield put(userActions.storeInfo(userInfo));\r\n        yield put(interfaceActions.snackbarOpen('Login was successful!'))\r\n        if(window.location.pathname === '/login') window.location.href = \"/catalog\";\r\n    } else {\r\n        yield put(userActions.userLoginRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Login failed.'));\r\n    }\r\n}\r\n\r\nfunction* userLogout(){    \r\n    let authInstance = yield window.gapi.auth2.getAuthInstance();\r\n    yield authInstance.signOut();\r\n    yield call(api.user.logout);\r\n    yield put(userActions.destroyInfo());\r\n    yield put(interfaceActions.snackbarOpen('You have logged out.'))\r\n}\r\n\r\nfunction* userRegistration(action){\r\n    yield put(userActions.userRegistrationRequestProcessing());\r\n    let result = yield call(api.user.register, action.payload);\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.registrationNextActiveStep());\r\n        // yield put(userActions.userRegistrationRequestSuccess());\r\n        // yield put(interfaceActions.snackbarOpen('Registration was successful. Please log in.'));\r\n        // yield put(interfaceActions.showLoginDialog());\r\n    } else {\r\n        yield put(userActions.userRegistrationRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Registration failed. Please try again later.'))\r\n    }\r\n}\r\n\r\nfunction* userValidation(action){\r\n    yield put(userActions.userValidationRequestProcessing());\r\n    let result = yield call(api.user.validate, action.payload);\r\n    let isValid = yield result.json();\r\n    \r\n    if(isValid){\r\n        yield put(userActions.userValidationRequestSuccess());\r\n        yield put(interfaceActions.registrationNextActiveStep());\r\n    } else {\r\n        yield put(userActions.userValidationRequestFailure());\r\n    }\r\n}\r\n\r\nfunction* googleLoginRequest(action){\r\n    yield put(userActions.googleLoginRequestProcessing());\r\n    let result = yield call(api.user.googleLoginRequest, action.payload.userIDToken);\r\n\r\n    if(result.ok){\r\n        var userInfo = JSON.parse(Cookies.get('UserInfo'));\r\n        yield put(userActions.userLoginRequestSuccess());\r\n        yield put(interfaceActions.hideLoginDialog());\r\n        yield put(userActions.storeInfo(userInfo));\r\n        // yield put(interfaceActions.snackbarOpen('Login was successful!'))\r\n        if(window.location.pathname === '/login') window.location.href = \"/catalog\";\r\n    } else {\r\n        yield put(userActions.userLoginRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('Login failed.'));\r\n    }\r\n}\r\n\r\nfunction* catalogRetrieval(){\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    let catalog = yield call(api.catalog.retrieve);\r\n    \r\n    if(!catalog) {\r\n        yield put(catalogActions.retrievalRequestFailure());\r\n    } else{\r\n        yield put(catalogActions.retrievalRequestSuccess(catalog));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* datasetRetrieval(){\r\n    yield put(catalogActions.datasetRetrievalRequestProcessing());\r\n    let datasets = yield call(api.catalog.datasets);\r\n\r\n    if(!datasets){\r\n        yield put(catalogActions.retrievalRequestFailure());\r\n    } else {\r\n        yield put(catalogActions.datasetRetrievalRequestSuccess(datasets));\r\n    }\r\n}\r\n\r\nfunction* keyRetrieval(action){\r\n    let result = yield call(api.user.keyRetrieval);\r\n    \r\n    if(!result){\r\n        yield put(userActions.keyRetrievalRequestFailure());\r\n        yield put(interfaceActions.snackbarOpen('API Key Retrieval Failed'));\r\n    } else {\r\n        yield put(userActions.keyRetrievalRequestSuccess(result.keys));\r\n    }\r\n}\r\n\r\nfunction* keyCreation(action){\r\n    yield put(userActions.keyCreationRequestProcessing());\r\n    let result = yield call(api.user.keyCreation, action.payload.description);\r\n    \r\n    if(!result.ok) yield put(interfaceActions.snackbarOpen(\"We were unable to create a new API key.\"));\r\n    else {\r\n        yield put(interfaceActions.snackbarOpen(\"A new API key was created\"));\r\n        yield put(userActions.keyCreationRequestSuccess());\r\n        yield put(userActions.keyRetrievalRequestSend());        \r\n    }\r\n}\r\n\r\nfunction* queryRequest(action){\r\n    yield put(visualizationActions.queryRequestProcessing());\r\n    let result = yield call(api.visualization.queryRequest, action.payload.query);\r\n    yield put(visualizationActions.storeSampleData(result));\r\n    yield put(visualizationActions.queryRequestSuccess());\r\n}\r\n\r\nfunction* storedProcedureRequest(action){\r\n    yield put(visualizationActions.storedProcedureRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    let result = yield call(api.visualization.storedProcedureRequest, action.payload);\r\n    yield delay(50);\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'));\r\n    yield delay(70);\r\n    \r\n    // Result will be an object containing variable values and describing date shape\r\n    if(result.failed){\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        yield put(visualizationActions.storedProcedureRequestFailure());\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(\"An error occurred. Please try again.\"));\r\n        }\r\n    } else {\r\n        if(result.variableValues.length > 0){\r\n            result.finalize();\r\n            yield put(interfaceActions.setLoadingMessage(''));\r\n            yield put(visualizationActions.storedProcedureRequestSuccess());\r\n            // yield put(interfaceActions.snackbarOpen(`${action.payload.subType} ${action.payload.parameters.fields} is ready`));\r\n            yield put(visualizationActions.triggerShowCharts());\r\n            yield put(visualizationActions.addChart({subType: action.payload.subType, data:result}));\r\n           \r\n        } else {\r\n            yield put(interfaceActions.setLoadingMessage(''));\r\n            yield put(interfaceActions.snackbarOpen(`No data found for ${action.payload.parameters.fields} in the requested ranges. Try selecting a different date or depth range.`));\r\n        }\r\n    }\r\n}\r\n\r\nfunction* cruiseTrajectoryRequest(action) {\r\n    yield put(visualizationActions.cruiseTrajectoryRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Cruise Data'));\r\n    let result = yield call(api.visualization.cruiseTrajectoryRequest, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n\r\n    if(result.failed){\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(`Unable to Fetch Cruise Data`));\r\n        }\r\n    } else {\r\n        yield put(visualizationActions.cruiseTrajectoryRequestSuccess(result));\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n    }\r\n}\r\n\r\nfunction* cruiseListRequest() {\r\n    yield put(visualizationActions.cruiseListRequestProcessing());\r\n    let cruiseList = yield call(api.visualization.cruiseList);\r\n\r\n    if(!cruiseList) {\r\n        yield put(visualizationActions.cruiseListRequestFailure());\r\n    } else{\r\n        yield put(visualizationActions.cruiseListRequestSuccess(cruiseList));\r\n    }\r\n}\r\n\r\nfunction* tableStatsRequest(action){\r\n    yield put(visualizationActions.tableStatsRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Dataset Information'));\r\n    let result = yield call(api.visualization.getTableStats, action.payload.tableName);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n\r\n    if(result.failed){\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(`Unable to Fetch Dataset Information`));\r\n        }\r\n    } else {\r\n        yield put(visualizationActions.tableStatsRequestSuccess(result, action.payload.datasetLongName));\r\n    }\r\n}\r\n\r\nfunction* csvDownloadRequest(action){\r\n    yield put(visualizationActions.csvDownloadRequestProcessing());\r\n    yield put(interfaceActions.setLoadingMessage('Fetching Data'));\r\n    let response = yield call(api.visualization.csvDownload, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''))\r\n    if(response.failed) {\r\n        if(response.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen('An error occurred. Please try again.'))\r\n        }\r\n    } else {\r\n        if(response.length > 1) yield put(visualizationActions.downloadTextAsCsv(response, action.payload.fileName));\r\n        else yield put(interfaceActions.snackbarOpen('No data found. Please expand query range.'))        \r\n    }\r\n}\r\n\r\nfunction* downloadTextAsCsv(action){\r\n    yield put(interfaceActions.setLoadingMessage('Processing Data'))\r\n    let csv = action.payload.text;\r\n    const blob = new Blob([csv], {type: 'text/csv'});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.setAttribute('hidden', '');\r\n    a.setAttribute('href', url);\r\n    a.setAttribute('download', `${action.payload.datasetName}.csv`);\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* refreshLogin(){\r\n    yield call(api.user.logout);\r\n    yield put(userActions.destroyInfo());\r\n    yield put(interfaceActions.showLoginDialog());\r\n    yield put(interfaceActions.snackbarOpen(\"Your session has expired. Please log in again.\"));\r\n}\r\n\r\nfunction* updateUserInfoRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Updating your information'));\r\n\r\n    let result = yield call(api.user.updateUserInfo, action.payload);\r\n\r\n    if(result.failed){\r\n        yield put(interfaceActions.setLoadingMessage(''));\r\n        if(result.status === 401){\r\n            yield put(userActions.refreshLogin());\r\n        } else {\r\n            yield put(interfaceActions.snackbarOpen(\"An error occurred. Please try again.\"));\r\n        }\r\n    } else {\r\n        yield put(userActions.storeInfo(JSON.parse(Cookies.get('UserInfo'))));\r\n        yield put(interfaceActions.snackbarOpen(\"Your information was updated\"));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* initializeGoogleAuth(){\r\n    let authInstance = yield window.gapi.auth2.getAuthInstance();\r\n    let user = yield authInstance.currentUser.get();\r\n    let authResponse = yield user.getAuthResponse(true);\r\n    if(authResponse) yield put(userActions.googleLoginRequestSend(authResponse.id_token));\r\n}\r\n\r\nfunction* recoverPasswordRequest(action){\r\n    yield call(api.user.recoverPassword, action.payload.email);\r\n}\r\n\r\nfunction* choosePasswordRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming change'));\r\n    let result = yield call(api.user.choosePassword, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    if(result.ok){\r\n        yield put(userActions.choosePasswordRequestSuccess());\r\n    } else {\r\n        yield put(userActions.choosePasswordRequestFailure());\r\n    }\r\n}\r\n\r\nfunction* contactUsRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Sending'));\r\n    let result = yield call(api.user.contactUs, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    if(result.ok){\r\n        yield put(interfaceActions.snackbarOpen('Your message was successfully sent!'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('Message failed. Please try again or contact simonscmap@uw.edu'));\r\n    }\r\n}\r\n\r\nfunction* changePasswordRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming Changes'));\r\n    let result = yield call(api.user.changePassword, action.payload);\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n    \r\n    if(result.ok){\r\n        yield put(interfaceActions.hideChangePasswordDialog());\r\n        yield put(interfaceActions.snackbarOpen('Your password has been updated.'));\r\n    } else if(result.status === 401) {\r\n        yield put(interfaceActions.snackbarOpen('The current password you entered is not correct.'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('An error occurred with your request.'));\r\n    }\r\n}\r\n\r\nfunction* changeEmailRequest(action){\r\n    yield put(interfaceActions.setLoadingMessage('Confirming Changes'));\r\n    let result = yield call(api.user.changeEmail, action.payload);\r\n\r\n    if(result.ok){\r\n        yield put(userActions.storeInfo(JSON.parse(Cookies.get('UserInfo'))));\r\n        yield put(interfaceActions.hideChangeEmailDialog());\r\n        yield put(interfaceActions.snackbarOpen('Your email address has been updated.'));\r\n    } else if(result.status === 401) {\r\n        yield put(interfaceActions.snackbarOpen('The current password you entered is not correct.'));\r\n    } else if(result.status === 409) {\r\n        yield put(interfaceActions.snackbarOpen('That email address is already in use.'));\r\n    } else {\r\n        yield put(interfaceActions.snackbarOpen('We were not able to update your email address.'));\r\n    }\r\n\r\n    yield put(interfaceActions.setLoadingMessage(''));\r\n}\r\n\r\nfunction* watchUserLogin() {\r\n    yield takeLatest(userActionTypes.LOGIN_REQUEST_SEND, userLogin);\r\n}\r\n\r\n\r\nfunction* watchUserRegistration() {\r\n    yield takeLatest(userActionTypes.REGISTRATION_REQUEST_SEND, userRegistration);\r\n}\r\n\r\nfunction* watchUserValidation(){\r\n    yield takeLatest(userActionTypes.VALIDATION_REQUEST_SEND, userValidation);\r\n}\r\n\r\nfunction* watchUserLogout() {\r\n    yield takeLatest(userActionTypes.LOG_OUT, userLogout)\r\n}\r\n\r\nfunction* watchGoogleLoginRequest(){\r\n    yield takeLatest(userActionTypes.GOOGLE_LOGIN_REQUEST_SEND, googleLoginRequest);\r\n}\r\n\r\nfunction* watchCatalogRetrieval(){\r\n    yield takeLatest(catalogActionTypes.RETRIEVAL_REQUEST_SEND, catalogRetrieval);\r\n}\r\n\r\nfunction* watchDatasetRetrieval(){\r\n    yield takeLatest(catalogActionTypes.DATASET_RETRIEVAL_REQUEST_SEND, datasetRetrieval);\r\n}\r\n\r\nfunction* watchKeyRetrieval(){\r\n    yield takeLatest(userActionTypes.KEY_RETRIEVAL_REQUEST_SEND, keyRetrieval);\r\n}\r\n\r\nfunction* watchKeyCreationRequest(){\r\n    yield takeLatest(userActionTypes.KEY_CREATION_REQUEST_SEND, keyCreation);\r\n}\r\n\r\nfunction* watchQueryRequest(){\r\n    yield takeLatest(visualizationActionTypes.QUERY_REQUEST_SEND, queryRequest);\r\n}\r\n\r\nfunction* watchStoredProcedureRequest(){\r\n    yield takeLatest(visualizationActionTypes.STORED_PROCEDURE_REQUEST_SEND, storedProcedureRequest);\r\n}\r\n\r\nfunction* watchCruiseTrajectoryRequest(){\r\n    yield takeLatest(visualizationActionTypes.CRUISE_TRAJECTORY_REQUEST_SEND, cruiseTrajectoryRequest);\r\n}\r\n\r\nfunction* watchCruiseListRequest(){\r\n    yield takeLatest(visualizationActionTypes.CRUISE_LIST_REQUEST_SEND, cruiseListRequest);\r\n}\r\n\r\nfunction* watchTableStatsRequest(){\r\n    yield takeLatest(visualizationActionTypes.TABLE_STATS_REQUEST_SEND, tableStatsRequest)\r\n}\r\n\r\nfunction* watchCsvDownloadRequest(){\r\n    yield takeLatest(visualizationActionTypes.CSV_DOWNLOAD_REQUEST_SEND, csvDownloadRequest);\r\n}\r\n\r\nfunction* watchDownloadTextAsCsv(){\r\n    yield takeLatest(visualizationActionTypes.DOWNLOAD_TEXT_AS_CSV, downloadTextAsCsv);\r\n}\r\n\r\nfunction* watchRefreshLogin(){\r\n    yield takeLatest(userActionTypes.REFRESH_LOGIN, refreshLogin);\r\n}\r\n\r\nfunction* watchUpdateUserInfoRequest(){\r\n    yield takeLatest(userActionTypes.UPDATE_USER_INFO_REQUEST_SEND, updateUserInfoRequest);\r\n}\r\n\r\nfunction* watchInitializeGoogleAuth(){\r\n    yield takeLatest(userActionTypes.INITIALIZE_GOOGLE_AUTH, initializeGoogleAuth);\r\n}\r\n\r\nfunction* watchRecoverPasswordRequest(){\r\n    yield takeLatest(userActionTypes.RECOVER_PASSWORD_REQUEST_SEND, recoverPasswordRequest);\r\n}\r\n\r\nfunction* watchChoosePasswordRequest(){\r\n    yield takeLatest(userActionTypes.CHOOSE_PASSWORD_REQUEST_SEND, choosePasswordRequest)\r\n}\r\n\r\nfunction* watchContactUs(){\r\n    yield takeLatest(userActionTypes.CONTACT_US_REQUEST_SEND, contactUsRequest);\r\n}\r\n\r\nfunction* watchChangePasswordRequest(){\r\n    yield takeLatest(userActionTypes.CHANGE_PASSWORD_REQUEST_SEND, changePasswordRequest);\r\n}\r\n\r\nfunction* watchChangeEmailRequest(){\r\n    yield takeLatest(userActionTypes.CHANGE_EMAIL_REQUEST_SEND, changeEmailRequest);\r\n}\r\n\r\n// function createWorkerChannel(worker) {\r\n//     return eventChannel(emit => {\r\n//         worker.onmessage = message => {\r\n//             emit(message);\r\n//         }\r\n\r\n//         const unsubscribe = () => {\r\n//             worker.teminate();\r\n//         }\r\n      \r\n//         return unsubscribe;\r\n//     })\r\n// }\r\n\r\n// function* watchWorkerChannel(){\r\n//     const workerChannel = yield call(createWorkerChannel, worker);\r\n\r\n//     while (true) {\r\n//         const message = yield take(workerChannel);\r\n//         yield put(message.data.type, message.data.payload);\r\n//         //   yield put({ type: INCOMING_PONG_PAYLOAD, payload })\r\n//         //   yield fork(pong, socket)\r\n//       }\r\n// }\r\n\r\nexport default function* rootSaga() {\r\n    yield all([\r\n        watchUserLogin(),\r\n        watchUserRegistration(),\r\n        watchUserValidation(),\r\n        watchUserLogout(),\r\n        watchGoogleLoginRequest(),\r\n        watchCatalogRetrieval(),\r\n        watchDatasetRetrieval(),\r\n        watchKeyRetrieval(),\r\n        watchKeyCreationRequest(),\r\n        watchQueryRequest(),\r\n        watchStoredProcedureRequest(),\r\n        watchCruiseTrajectoryRequest(),\r\n        watchCruiseListRequest(),\r\n        watchTableStatsRequest(),\r\n        // watchWorkerChannel(),\r\n        watchCsvDownloadRequest(),\r\n        watchDownloadTextAsCsv(),\r\n        watchRefreshLogin(),\r\n        watchUpdateUserInfoRequest(),\r\n        watchInitializeGoogleAuth(),\r\n        watchRecoverPasswordRequest(),\r\n        watchChoosePasswordRequest(),\r\n        watchContactUs(),\r\n        watchChangePasswordRequest(),\r\n        watchChangeEmailRequest()\r\n    ])\r\n}","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"./Reducers\";\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootSaga from './sagas';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  applyMiddleware(sagaMiddleware)\r\n)\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;","const colors = {\r\n    // orange: '#FF8000',\r\n    // orange: '#93B968',\r\n    primary: '#9dd162',\r\n    solidPaper: '#184562',\r\n    backgroundGray: '#424242',\r\n    secondary: '#22A3B9',\r\n    errorYellow: '#ffe336',\r\n    greenHover: 'rgba(97, 149, 38, .4)'\r\n}\r\n\r\nexport default colors;","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport { keyRetrievalRequestSend, keyCreationRequestSend } from '../../Redux/actions/user';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    apiKeys: state.apiKeys,\r\n    apiKeyCreationState: state.apiKeyCreationState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    keyRetrievalRequestSend,\r\n    keyCreationRequestSend\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '800px',\r\n        marginTop: theme.spacing(3),\r\n        margin:'auto',\r\n        paddingTop: theme.spacing(2)\r\n      },\r\n    table: {\r\n        minWidth: 700,\r\n    },\r\n    apiKeyTableHeader: {\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    keyTableCell : {\r\n        visibility: 'hidden'\r\n    },\r\n    showChildOnHover: {\r\n        '&:hover span': {\r\n            visibility: 'visible'\r\n          },\r\n    },\r\n    warningCaption: {\r\n        color: colors.primary,\r\n        fontSize: '11px',\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    wrapper: {\r\n        marginTop: theme.spacing(16)\r\n    }\r\n})\r\n\r\nclass ApiKeyManagement extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            description: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.apiKeys) this.props.keyRetrievalRequestSend();\r\n    }\r\n\r\n\r\n    handleClick = () => {\r\n        this.props.keyCreationRequestSend(this.state.description);\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, description: event.target.value})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            \r\n            <div className={classes.wrapper}>\r\n                {this.props.apiKeys ?\r\n                    <Paper className={classes.root} elevation={6}>             \r\n                        <Typography variant=\"subtitle1\" className={classes.apiKeyTableHeader}>\r\n                            Your API Key\r\n                        </Typography>\r\n                        <Divider/>\r\n                        <Table className={classes.table}>\r\n                            <TableHead>\r\n                            <TableRow>\r\n                                <TableCell variant='head' align='center'>Description</TableCell>\r\n                                <TableCell variant='head' align='center'>Key (hover mouse to view)</TableCell>\r\n                            </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>            \r\n                                {this.props.apiKeys.map((apiKey, index) => (\r\n                                    <TableRow key={index}>\r\n                                        <TableCell align='center'>{apiKey.Description}</TableCell>\r\n                                        <TableCell align='center' className={classes.showChildOnHover}><span className={classes.keyTableCell}>{apiKey.Api_Key}</span></TableCell>\r\n                                    </TableRow>\r\n                                ))   \r\n                                }  \r\n                            </TableBody>\r\n                        </Table>\r\n                        <Typography variant='caption' className={classes.warningCaption}>\r\n                            This API key is a unique identifier, and should not be shared.\r\n                        </Typography>\r\n                    </Paper>\r\n                    : ''\r\n                }\r\n                <Paper className={classes.root} elevation={6}>\r\n                    <Typography variant=\"body2\">\r\n                        Generate a new API key\r\n                    </Typography>\r\n                    <Grid container={true} alignItems='center' justify='center' spacing={4}>\r\n                        <Grid item>\r\n                            <TextField\r\n                                margin=\"normal\"\r\n                                id=\"description\"\r\n                                type=\"text\"\r\n                                variant='outlined'\r\n                                name='filterText'\r\n                                value={this.state.description}\r\n                                onChange={this.handleChange}\r\n                                placeholder='Key Description'\r\n                                className={classes.descriptionField}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Button variant=\"contained\" disabled={this.state.description.length < 1} color=\"primary\" onClick={this.handleClick}>\r\n                                Generate API Key\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                    \r\n                    {this.props.apiKeyCreationState === states.failed ? <span>Key creation failed</span> : ''}\r\n                </Paper>\r\n            </div>    \r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ApiKeyManagement));","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport { Link, Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = {\r\n    loginRequiredMessage: {\r\n        marginTop: '60px',\r\n        color: 'white'\r\n    }\r\n}\r\n\r\nconst LoginRequiredPrompt = (props) => {\r\n    const { classes, showLoginDialog } = props;\r\n\r\n    useEffect(() => {\r\n        showLoginDialog();\r\n    })\r\n    \r\n    return (\r\n        <Typography className={classes.loginRequiredMessage}>\r\n            This feature requires a user account. Please <Link component={RouterLink} to={{pathname: window.location.pathname}} onClick={() => props.showLoginDialog()}> log in\r\n            </Link> or <Link component={RouterLink} to={{pathname: '/register'}}> register\r\n            </Link>.\r\n        </Typography>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(LoginRequiredPrompt));","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog } from '../Redux/actions/ui';\r\n\r\nimport ApiKeyManagement from './User/ApiKeyManagement';\r\nimport LoginRequiredPrompt from './User/LoginRequiredPrompt';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n\r\n})\r\n\r\nclass Home extends Component {\r\n\r\n    render(){\r\n        if(!this.props.user) return <LoginRequiredPrompt/>;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <ApiKeyManagement/>\r\n            </React.Fragment>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nHome.propTypes = {\r\n    \r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Home));","import React from 'react';\r\n\r\nimport { Typography, Grid, Table, TableBody, TableCell, TableRow, Button } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst tableMapping1 = [\r\n    ['Long Name', 'Long_Name'],\r\n    ['Short Name', 'Variable'],    \r\n    ['Study Domain', 'Study_Domain'],\r\n    ['Process Level', 'Process_Level']\r\n];\r\n\r\nconst tableMapping2 = [\r\n    ['Unit', 'Unit'],\r\n    ['Mean Value', 'Variable_Mean'],\r\n    ['Value Std', 'Variable_Std']\r\n\r\n];\r\n\r\nconst tableMapping3 = [\r\n    ['Start Latitude[\\xb0]', 'Lat_Min'],\r\n    ['End Latitude[\\xb0]', 'Lat_Max'],\r\n    ['Start Longitude[\\xb0]', 'Lon_Min'],\r\n    ['End Longitude[\\xb0]', 'Lon_Max']\r\n]\r\n\r\nconst styles = (theme) => ({\r\n    title:{\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    wrapper: {\r\n        // width: '90%',\r\n        // margin: '0px auto 5px 10px',\r\n        padding: '10px',\r\n        height: '100%',\r\n        userSelect: 'auto'\r\n    },\r\n    infoCard: {\r\n        padding: theme.spacing(1),\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    gridClass: {\r\n        height: '100%',\r\n        maxHeight: '180px'\r\n    },\r\n    gridItem: {\r\n        // height: '90%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        verticalAlign: 'middle',\r\n        maxHeight: '180px'\r\n    },\r\n    datasetDescriptionWrapper: {\r\n        whiteSpace: 'normal',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    datasetDescription: {\r\n        marginBottom: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    vizSampleImage: {\r\n        maxWidth: '80%',\r\n        maxHeight: '260px'\r\n    },\r\n    variableDetailTable: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '100%',\r\n        tableLayout: 'fixed',\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    variableDetailTableRow: {\r\n        height: '24px',\r\n        width: '100%'\r\n    },\r\n    variableDetailTableCell: {\r\n        color: '#FFF6EC',\r\n        borderBottomColor: 'black',\r\n        fontSize: '11px',\r\n        maxWidth: '100%',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        paddingRight: '14px'\r\n    },\r\n\r\n    gridDetailTypography: {\r\n        fontSize: '11px',\r\n        whiteSpace: 'normal',\r\n        width: '100%',\r\n        display: 'block',\r\n    },\r\n\r\n    boldText: {\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    rightGridItem: {\r\n        maxWidth: '100%',\r\n        paddingTop: '10px',\r\n        boxSizing: 'border-box',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    datasetDescriptionButton: {\r\n        backgroundColor: colors.primary,\r\n        color: 'white',\r\n        '&:hover': {\r\n            backgroundColor: '#518516',\r\n        },\r\n        fontSize: '12px',\r\n        maxWidth: '100%',\r\n        marginTop: '50px'\r\n    },\r\n    \r\n    buttonTextWrapper: {\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: '100%',\r\n        overflow: 'hidden'\r\n    }\r\n})\r\n\r\nconst GridDetail = (props) => {\r\n    const {classes} = props;\r\n    console.log(props);\r\n\r\n    return (\r\n        <div className={`ag-selectable ${classes.wrapper}`}>\r\n                <Grid container className={classes.gridClass}>\r\n                    <Grid container item xs={10} spacing={2}>\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping1.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell} title={props.data[row[1]]}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping2.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                        <TableRow key={tableMapping1.length + 1} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>Start Date</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Time_Min.slice(0,10)}</TableCell>\r\n                                        </TableRow>\r\n                                        <TableRow key={tableMapping1.length + 2} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>End Date</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Time_Max.slice(0,10)}</TableCell>\r\n                                        </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <Table className={classes.variableDetailTable} size='small'>\r\n                                <TableBody>\r\n                                    {tableMapping3.map((row, index) => (\r\n                                        <TableRow key={index} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{row[0]}</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data[row[1]]}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                        <TableRow key={tableMapping2.length + 1} className={classes.variableDetailTableRow}>\r\n                                            <TableCell className={classes.variableDetailTableCell}>Maximum Depth[m]</TableCell>\r\n                                            <TableCell className={classes.variableDetailTableCell}>{props.data.Depth_Max || 'Surface Only'}</TableCell>\r\n                                        </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                {/* <Grid container direction='column' item xs={2} alignContent='center' alignItems='center'> */}\r\n\r\n                    {/* <Grid item xs={props.data.Acknowledgement ? 3 : 6} className={classes.rightGridItem}>\r\n                        <Button \r\n                            variant='contained'\r\n                            className={classes.datasetDescriptionButton} \r\n                            onClick={() => props.context.handleDescribeDataset(props.data.Dataset_Name)}\r\n                        >\r\n                            <span className={classes.buttonTextWrapper}>Dataset Details</span>\r\n                        </Button>\r\n                    </Grid> */}\r\n\r\n                    <Grid item xs={2} className={classes.rightGridItem}>\r\n                        {\r\n                            props.data.Comment &&\r\n                            <Button \r\n                                variant='contained'\r\n                                className={classes.datasetDescriptionButton} \r\n                                onClick={() => props.context.handleDescribeVariable(props.data.ID)}\r\n                            >\r\n                                <span className={classes.buttonTextWrapper}>Comment</span>\r\n                            </Button>\r\n                        }\r\n                    </Grid>\r\n                    {/* { props.data.Acknowledgement &&\r\n                        <Grid item xs={6} className={classes.rightGridItem}>\r\n                            <Typography variant='caption' className={`${classes.gridDetailTypography} ${classes.boldText}`}>\r\n                                Acknowlegement:\r\n                            </Typography>\r\n                            <Typography variant='caption' className={classes.gridDetailTypography} title={props.data.Acknowledgement}>\r\n                                {props.data.Acknowledgement}\r\n                            </Typography>\r\n                        </Grid>\r\n                    } */}\r\n                {/* </Grid> */}\r\n\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (withStyles(styles)(GridDetail));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper\r\n    },\r\n\r\n    markdown: {\r\n        '& img': {\r\n            maxWidth: '100%',\r\n            margin: '20px auto 20px auto',\r\n            display: 'block'\r\n        },\r\n        '& a': {\r\n            color: theme.palette.primary.main,\r\n            textDecoration: 'none'\r\n        }\r\n    }\r\n})\r\n\r\nclass DatasetDescriptionDialog extends Component {\r\n\r\n    // state = {\r\n    //     references: []\r\n    // }\r\n\r\n    render() {\r\n        const { description, classes, datasetName, clearDescription } = this.props;\r\n        // const { references } = this.state;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                { description ?\r\n                <Dialog \r\n                    open={Boolean(description)} \r\n                    onClose={clearDescription} \r\n                    maxWidth={false}\r\n                    PaperProps={{\r\n                        className: classes.dialogPaper\r\n                    }}\r\n                >\r\n                    <DialogTitle>{datasetName}</DialogTitle>\r\n                    <DialogContent>\r\n                        <ReactMarkdown source={description} className={classes.markdown}/>\r\n                    </DialogContent>\r\n\r\n                    {/* {references &&\r\n                        <DialogContent>\r\n                            <strong>References: {references.length}</strong>\r\n                        </DialogContent>\r\n                    } */}\r\n                </Dialog> :\r\n                ''\r\n                }\r\n            </React.Fragment>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default (withStyles(styles)(DatasetDescriptionDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = (theme) => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        padding: '8px 16px 16px 16px'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nconst VariableDescriptionDialog = (props) => {\r\n    const { catalog, describedVariable, classes } = props;\r\n    let variable = catalog.find((item) => item.ID === describedVariable);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            { describedVariable ?\r\n            <Dialog \r\n                open={Boolean(describedVariable)} \r\n                onClose={props.clearDescription} \r\n                maxWidth={false}\r\n                PaperProps={{\r\n                    className: classes.dialogPaper\r\n                }}\r\n            >\r\n                <DialogTitle>{variable.Long_Name}</DialogTitle>\r\n                { variable.Comment &&\r\n                <DialogContent>\r\n                    {variable.Comment}\r\n                </DialogContent>\r\n                }\r\n            </Dialog> :\r\n            ''\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VariableDescriptionDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst styles = theme => ({\r\n  tooltip: {\r\n      color: theme.palette.secondary.main,\r\n      opacity: 1\r\n  }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    showHelp: state.showHelp\r\n})\r\n\r\nconst ConnectedTooltip = (props) => {\r\n    const { classes, showHelp } = props;\r\n\r\n    if(!showHelp) {\r\n        return (\r\n            <React.Fragment>\r\n                {props.children}\r\n            </React.Fragment>\r\n        )}\r\n    else {\r\n        return (\r\n            <Tooltip \r\n                placement={props.placement} \r\n                open={showHelp} \r\n                title={props.title} \r\n                className={classes.tooltip}\r\n                classes={{\r\n                    popper: classes.tooltip\r\n                }}\r\n            >\r\n                {props.children}\r\n            </Tooltip>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(withStyles(styles)(ConnectedTooltip));","import React from 'react';\r\n\r\nimport { Typography, Grid, Table, TableBody, TableCell, TableRow, Button, IconButton } from '@material-ui/core';\r\nimport { ChevronRight, ExpandMore } from '@material-ui/icons';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst tableMapping2 = [\r\n    ['Temporal Resolution', 'Temporal_Resolution'],\r\n    ['Spatial Resolution', 'Spatial_Resolution']\r\n];\r\n\r\nconst styles = (theme) => ({\r\n    title:{\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    datasetGroupWrapper: {\r\n        // width: '90%',\r\n        // margin: '0px auto 5px 10px',\r\n        padding: '10px',\r\n        height: '100%',\r\n        userSelect: 'auto',\r\n        textAlign: 'left',\r\n        bozSizing: 'border-box'\r\n    },\r\n\r\n    nonDatasetGroupWrapper: {\r\n        height: '100%',\r\n        userSelect: 'auto',\r\n        textAlign: 'left',\r\n        paddingLeft: '18px',\r\n        paddingTop: '10px'\r\n    },\r\n\r\n    infoCard: {\r\n        padding: theme.spacing(1),\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    \r\n    gridClass: {\r\n        height: '100%',\r\n        maxHeight: '200px',\r\n    },\r\n\r\n    datasetGridClass: {\r\n        height: '100%',\r\n        maxHeight: '200px'\r\n    },\r\n\r\n    gridItem: {\r\n        // height: '90%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        verticalAlign: 'middle',\r\n        maxHeight: '200px'\r\n    },\r\n\r\n    adjustGridLeft: {\r\n        marginLeft: '-7vw'\r\n    },\r\n\r\n    datasetDescriptionWrapper: {\r\n        whiteSpace: 'normal',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    datasetDescription: {\r\n        marginBottom: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    vizSampleImage: {\r\n        maxWidth: '80%',\r\n        maxHeight: '180px'\r\n    },\r\n    variableDetailTable: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '100%',\r\n        tableLayout: 'fixed',\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    variableDetailTableRow: {\r\n        height: '24px',\r\n        width: '100%'\r\n    },\r\n    variableDetailTableCell: {\r\n        color: '#FFF6EC',\r\n        borderBottomColor: 'black',\r\n        fontSize: '11px',\r\n        maxWidth: '100%',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        paddingRight: '14px'\r\n    },\r\n\r\n    gridDetailTypography: {\r\n        fontSize: '11px',\r\n        whiteSpace: 'normal',\r\n        width: '100%',\r\n        display: 'block',\r\n    },\r\n\r\n    boldText: {\r\n        fontWeight: 'bold'\r\n    },\r\n\r\n    rightGridItem: {\r\n        maxWidth: '100%',\r\n        paddingTop: '10px',\r\n        boxSizing: 'border-box',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n\r\n    datasetDescriptionButton: {\r\n        backgroundColor: colors.primary,\r\n        color: 'white',\r\n        '&:hover': {\r\n            backgroundColor: '#518516',\r\n        },\r\n        fontSize: '12px',\r\n        maxWidth: '100%',\r\n        margin: '0 auto',\r\n        verticalAlign: 'middle'\r\n    },\r\n    \r\n    buttonTextWrapper: {\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n\r\n    groupName: {\r\n        textAlign: 'left',\r\n        fontSize: '13px',\r\n        fontWeight: 700,\r\n        marginLeft: '-2px',\r\n        display: 'inline-block',\r\n        marginTop: '3px',\r\n        color: colors.primary\r\n    },\r\n\r\n    chevronButton: {\r\n        marginBottom: '4px',\r\n        marginRight: '21px',\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n\r\n    datasetChevronButton: {\r\n        marginTop: '75px',\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n\r\n    chevronIcon: {\r\n        transform: 'scale(0.8)'\r\n    },\r\n\r\n    datasetButtonWrapper: {\r\n        width: '70px',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    datasetName: {\r\n        marginTop: '-32px',\r\n        // marginBottom: '12px',\r\n        fontSize: '19px',\r\n        marginBottom: '-48px',\r\n        fontWeight: 700\r\n    },\r\n\r\n    tableGridSection: {\r\n        padding: '8px 8px 0 8px',\r\n        marginBottom: '-24px'\r\n    },\r\n\r\n    shortCell: {\r\n        maxWidth: '35%',\r\n        width: '35%'\r\n    },\r\n\r\n    acknowledgement: {\r\n        fontSize: '11px',\r\n        textAlign: 'center',\r\n        padding: '0 10px 0 10px',\r\n        maxWidth: '20vw',\r\n        textOverflow: 'ellipsis',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        maxHeight: '100px'\r\n    },\r\n\r\n    acknowledgementHeader: {\r\n        padding: '0 6px 0 6px',\r\n        maxWidth: '20vw',\r\n        fontSize: '13px',\r\n        overflow: 'hidden',\r\n        whiteSpace: 'normal',\r\n        textAlign: 'center',\r\n        marginBottom: '8px'\r\n    },\r\n\r\n    buttonMarginLeft: {\r\n        marginLeft: '60px',\r\n    },\r\n\r\n    buttonMarginTop: {\r\n        marginTop: '36px',\r\n        marginLeft: '20px'\r\n    }\r\n})\r\n\r\nconst GroupedDatasetRow = (props) => {\r\n    const { classes, node, context, value } = props;\r\n    const { data } = node.allLeafChildren[0];\r\n\r\n    const [expanded, setExpanded] = React.useState(node.expanded);\r\n\r\n    const toggleExpand = () => {\r\n        node.setExpanded(!node.expanded)\r\n        setExpanded(node.expanded);\r\n    }\r\n    \r\n    if(props.node.field === 'Dataset_Name') {    \r\n        return (\r\n            <div className={`ag-selectable ${classes.datasetGroupWrapper}`}>            \r\n                <Grid container className={classes.datasetGridClass}>\r\n                    <Grid xs={1} item className={classes.datasetButtonWrapper}>\r\n                        {expanded ? \r\n                            <IconButton onClick={toggleExpand} size='small' className={`${classes.datasetChevronButton}`}>\r\n                                <ExpandMore className={classes.chevronIcon}/>\r\n                            </IconButton> \r\n                        :\r\n\r\n                            <IconButton onClick={toggleExpand} size='small' className={`${classes.datasetChevronButton}`}>\r\n                                <ChevronRight className={classes.chevronIcon}/>\r\n                            </IconButton>                \r\n                        }\r\n                    </Grid>\r\n\r\n                    <Grid item container xs={11} className={`${classes.gridItem} ${classes.adjustGridLeft}`}>\r\n                        <Grid item xs={4} className={classes.gridItem}>\r\n                            <img src={context.datasets[props.value].Icon_URL} alt=\"Mission Icon\" className={classes.vizSampleImage} onClick={toggleExpand}/>\r\n                        </Grid>\r\n\r\n                        <Grid justify='space-between' direction='column' container item xs={8} className={classes.gridItem}>\r\n                            <Grid container item xs={12}>\r\n                                <Typography className={classes.datasetName}>\r\n                                    {value}\r\n                                </Typography>\r\n                            </Grid>\r\n\r\n                            <Grid container item xs={12}>\r\n                                <Grid item xs={8} className={classes.tableGridSection}>\r\n                                    <Table className={classes.variableDetailTable} size='small'>\r\n                                            <TableBody>\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}><strong>Source</strong></TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Data_Source}>{data.Data_Source}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}><strong>Distributor</strong></TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Distributor}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>SQL Table</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Table_Name}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>Temporal Resolution</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Temporal_Resolution}</TableCell>\r\n                                                </TableRow>\r\n\r\n                                                <TableRow className={classes.variableDetailTableRow}>\r\n                                                    <TableCell className={`${classes.variableDetailTableCell} ${classes.shortCell}`}>Spatial Resolution</TableCell>\r\n                                                    <TableCell className={classes.variableDetailTableCell} title={data.Distributor}>{data.Spatial_Resolution}</TableCell>\r\n                                                </TableRow>\r\n                                            </TableBody>\r\n                                    </Table>\r\n                                </Grid>\r\n\r\n                                <Grid item xs={4} container direction='column' className={classes.tableGridSection}>\r\n                                    <Grid item xs={12}></Grid>\r\n                                    { data.Acknowledgement &&\r\n                                        <div style={{height: '70%', justifyContent: 'center'}}>\r\n                                            <Typography className={classes.acknowledgementHeader}>\r\n                                                <strong>Acknowledgement:</strong>\r\n                                            </Typography>\r\n\r\n                                            <Typography title={data.Acknowledgement} className={classes.acknowledgement}>\r\n                                                {data.Acknowledgement}\r\n                                            </Typography>                                            \r\n                                        </div>\r\n                                    }\r\n\r\n                                        <div style={{height: '30%', justifyContent: 'center'}}>\r\n                                            <Button \r\n                                                variant='contained'\r\n                                                className={`${classes.datasetDescriptionButton} ${data.Acknowledgement ? classes.buttonMarginLeft : classes.buttonMarginTop}`} \r\n                                                onClick={() => props.context.handleDescribeDataset(data.Dataset_Name)}\r\n                                            >\r\n                                                <span className={classes.buttonTextWrapper}>Dataset Details</span>\r\n                                            </Button>\r\n                                        </div>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        )\r\n    }\r\n    else return (\r\n        <div className={`ag-selectable ${classes.nonDatasetGroupWrapper}`}>\r\n            <div style={{display: 'inline-block', marginLeft: `${node.level * 36}px`}}></div>\r\n            {expanded ? \r\n                <IconButton onClick={toggleExpand} size='small' className={`${classes.chevronButton}`}>\r\n                    <ExpandMore className={classes.chevronIcon}/>\r\n                </IconButton> \r\n            :\r\n\r\n                <IconButton onClick={toggleExpand} size='small' className={`${classes.chevronButton}`} disableRipple={true} disableFocusRipple={true}>\r\n                    <ChevronRight className={classes.chevronIcon}/>\r\n                </IconButton>                \r\n            }\r\n\r\n            <Typography className={classes.groupName} variant='h6'>\r\n                {props.value}\r\n            </Typography>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (withStyles(styles)(GroupedDatasetRow));","import React, { Component } from 'react';\r\n\r\nimport { AgGridReact } from 'ag-grid-react';\r\n// import 'ag-grid-community/dist/styles/ag-grid.css';\r\n// import 'ag-grid-community/dist/styles/ag-theme-material.css';\r\n\r\nimport GridDetail from './GridDetail';\r\nimport DatasetDescriptionDialog from './DatasetDescriptionDialog';\r\nimport VariableDescriptionDialog from './VariableDescriptionDialog';\r\n\r\nimport stringify from 'csv-stringify/lib/sync';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Paper, Button, Grid, Tooltip } from '@material-ui/core';\r\n\r\nimport ConnectedTooltip from '../UI/ConnectedTooltip';\r\nimport GroupedDatasetRow from './GroupedDatasetRow';\r\n\r\nconst columnDefs = [\r\n  {\r\n    headerName: \"Long Name\", \r\n    field: \"Long_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    tooltipField: 'longName',\r\n    cellRenderer: \"agGroupCellRenderer\",\r\n\r\n  },\r\n  {\r\n    headerName: \"Variable\", \r\n    field: \"Variable\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Table Name\", \r\n    field: \"Table_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  }, \r\n  {\r\n    headerName: \"Dataset Name\", \r\n    field: \"Dataset_Name\",\r\n    sortable: true,\r\n    filter: true,\r\n    tooltipField: 'datasetName',\r\n    rowGroup: true,\r\n    enableRowGroup: true,\r\n    hide: true\r\n  }, \r\n  {\r\n    headerName: \"Make\", \r\n    field: \"Make\",\r\n    sortable: true,\r\n    filter: true,\r\n    enableRowGroup: true,\r\n    maxWidth: 160\r\n  },\r\n  {\r\n    headerName: \"Sensor\", \r\n    field: \"Sensor\",\r\n    sortable: true,\r\n    filter: true,\r\n    enableRowGroup: true,\r\n    maxWidth: 160\r\n  }, \r\n  {\r\n    headerName: \"Study Domain\", \r\n    field: \"Study_Domain\",\r\n    sortable: true,\r\n    filter: true,\r\n    // hide: true,\r\n    maxWidth: 160,\r\n    enableRowGroup: true\r\n  }, \r\n  {\r\n    headerName: \"Process Level\", \r\n    field: \"Process_Level\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Spatial Resolution\", \r\n    field: \"Spatial_Resolution\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Temporal Resolution\", \r\n    field: \"Temporal_Resolution\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true,\r\n    enableRowGroup: true\r\n  },\r\n  {\r\n    headerName: \"Unit\", \r\n    field: \"Unit\",\r\n    sortable: true,\r\n    filter: true,\r\n    hide: true\r\n  },\r\n  {\r\n    headerName: \"Key Words\",\r\n    field: 'Keywords',\r\n    hide: true\r\n  }\r\n]\r\n\r\nconst styles = (theme) => ({\r\n  gridWrapper: {\r\n    height: '80vh', \r\n    width: '96%',\r\n    margin: '0 auto'\r\n  },\r\n\r\n  gridSearch: {\r\n    margin: '0 auto 20px auto',\r\n    width: '60%'\r\n  },\r\n\r\n  gridPaper: {\r\n    marginTop: '68px',\r\n    padding: '20px',\r\n    height: 'calc(100vh - 68px)',\r\n    boxSizing: 'border-box'\r\n  },\r\n\r\n  downloadButton: {\r\n    margin: '6px 0 0 0',\r\n    textTransform: 'none',\r\n    color: 'white',\r\n    backgroundColor: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n  }\r\n  }\r\n})\r\n\r\nconst defaultColDef = {\r\n  resizable: true,\r\n  cellStyle: {\r\n    textAlign:'left'\r\n  }\r\n}\r\n\r\nconst autoGroupColumnDef = {\r\n  cellStyle: {\r\n    textAlign:'left'\r\n  },\r\n}\r\n\r\nconst getRowHeight = (params) => {\r\n  if(params.node.group && params.node.field === 'Dataset_Name') return 200;\r\n  if(params.node.detail) return 180;\r\n  return 48;\r\n}\r\n\r\nclass AGGridWrapper extends Component {\r\n\r\n  state = {\r\n    filterText: '',\r\n    describedDataset: '',\r\n    describedVariable: null\r\n  }\r\n\r\n  handleDescribeDataset = (dataset) => {\r\n    this.setState({...this.state, describedDataset: dataset})\r\n  }\r\n\r\n  handleDescribeVariable = (variable) => {\r\n    this.setState({...this.state, describedVariable: variable})\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState({...this.state, filterText: event.target.value})\r\n    this.gridApi.setQuickFilter(event.target.value);\r\n  }\r\n\r\n  onGridReady = (params) => {\r\n    this.gridApi = params.api;\r\n    this.columnApi = params.columnApi;\r\n\r\n    this.gridApi.sizeColumnsToFit();\r\n  }\r\n\r\n  onGridSizeChanged = (params) => {\r\n    this.gridApi.sizeColumnsToFit();\r\n  }\r\n\r\n  handleColumnRowGroupChanged = (event) => {\r\n    this.gridApi.sizeColumnsToFit()\r\n    event.columns.forEach(column => {\r\n      column.columnApi.setColumnVisible(column.colId, false);\r\n    })\r\n  }\r\n\r\n  handleDownloadCatalog = () => {\r\n    let csv = stringify(this.props.catalog, {\r\n      header: true\r\n    });\r\n\r\n    const blob = new Blob([csv], {type: 'text/csv'});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.setAttribute('hidden', '');\r\n    a.setAttribute('href', url);\r\n    a.setAttribute('download', `CMAP_Catalog.csv`);\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n\r\n  render = () => {\r\n    const { classes, datasets } = this.props;\r\n    const { describedDataset, describedVariable } = this.state;\r\n    const description = !datasets ? '' : !datasets[describedDataset] ? '' : datasets[describedDataset].Description;\r\n\r\n    return (\r\n      <Paper elevation={12} className={classes.gridPaper}>\r\n      {/* // <div className={classes.gridPaper}> */}\r\n        <DatasetDescriptionDialog \r\n          description={description}\r\n          clearDescription={() => this.handleDescribeDataset('')}\r\n          datasetName={describedDataset}\r\n        />\r\n        <VariableDescriptionDialog\r\n          clearDescription={() => this.handleDescribeVariable(null)}\r\n          describedVariable={describedVariable}\r\n        />\r\n        <Grid container>\r\n          <Grid item xs={3}>\r\n\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <ConnectedTooltip title='Enter one or more search terms.' placement='top'>\r\n              <TextField              \r\n                className={classes.gridSearch}\r\n                autoFocus={true}\r\n                margin=\"normal\"\r\n                id=\"name\"\r\n                type=\"text\"\r\n                variant='outlined'\r\n                name='filterText'\r\n                value={this.state.filterText}\r\n                onChange={this.handleChange}\r\n                label=\"Filter Variables\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              />\r\n            </ConnectedTooltip>\r\n\r\n          </Grid>\r\n          <Grid item xs={2}>\r\n            <Tooltip placement='top' title='Download the full catalog in CSV format'>\r\n              <Button \r\n                className={classes.downloadButton}\r\n                variant='contained'\r\n                color='primary'\r\n                onClick={this.handleDownloadCatalog}            \r\n              >\r\n                  Download Catalog\r\n              </Button>\r\n            </Tooltip>\r\n          </Grid>\r\n\r\n          <Grid item xs={1}>\r\n\r\n          </Grid>\r\n        </Grid>\r\n\r\n          \r\n          <div className={classes.gridWrapper + \" ag-theme-material\"}>\r\n            <AgGridReact\r\n              // General settings\r\n              columnDefs={columnDefs}\r\n              defaultColDef={defaultColDef}\r\n              rowData={this.props.catalog}\r\n              onGridReady={this.onGridReady}\r\n              onGridSizeChanged={this.onGridSizeChanged}\r\n              suppressDragLeaveHidesColumns= {true}\r\n              enableCellTextSelection={true}\r\n              suppressContextMenu={true}\r\n              getRowHeight={getRowHeight}\r\n              // getRowClass={getRowClass}\r\n\r\n              // Additional props\r\n              context={{\r\n                datasets,\r\n                handleDescribeDataset: this.handleDescribeDataset,\r\n                handleDescribeVariable: this.handleDescribeVariable\r\n              }}\r\n\r\n              // Setting related to styling\r\n              getRowStyle= {function(params) {\r\n                let styles = {};\r\n                if (params.node.detail) {\r\n                    styles.background = 'transparent' \r\n                }\r\n                if(params.node.level > 0){\r\n                  styles.marginLeft = '32px'\r\n                }\r\n                return styles;\r\n              }}\r\n\r\n              //Settings related to grouping functionality\r\n              rowGroupPanelShow='always'\r\n              groupMultiAutoColumn={true}\r\n              onColumnRowGroupChanged={this.handleColumnRowGroupChanged}\r\n              autoGroupColumnDef={autoGroupColumnDef}\r\n              enableBrowserTooltips={true}\r\n              groupUseEntireRow={true}\r\n              // groupColumnDef={groupColumnDef}\r\n              groupRowRenderer='datasetGroupRowRenderer'\r\n\r\n              // Settings related to master/detail\r\n              masterDetail={true}\r\n              frameworkComponents= {{ myDetailCellRenderer: GridDetail, datasetGroupRowRenderer: GroupedDatasetRow}}\r\n              detailCellRenderer=\"myDetailCellRenderer\"\r\n              detailRowHeight={200}\r\n            />\r\n          </div>\r\n          </Paper>\r\n    )\r\n  }  \r\n}\r\n\r\nexport default (withStyles(styles)(AGGridWrapper));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport AGGridWrapper from './AGGridWrapper';\r\n\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    catalogRequestState: state.catalogRequestState,\r\n    catalog : state.catalog,\r\n    datasets: state.datasets\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    retrievalRequestSend,\r\n    datasetRetrievalRequestSend\r\n}\r\n\r\nconst styles = (theme) => ({\r\n\r\n})\r\n\r\nclass Catalog extends Component {\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n    }\r\n\r\n    determineContent = () => {\r\n        if(this.props.catalog && this.props.datasets) return <AGGridWrapper catalog={this.props.catalog} datasets={this.props.datasets}/>\r\n    }\r\n\r\n    render(){\r\n        let content = this.determineContent();\r\n        return (\r\n            <React.Fragment>\r\n                {content}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Catalog));","import { withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\n// import IconButton from '@material-ui/core/IconButton';\r\n// import InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\nimport React from 'react';\r\n\r\nconst styles = theme => ({\r\n    registrationCard: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n        height:'200px'\r\n    },\r\n\r\n    textField: {\r\n        margin:theme.spacing(1),\r\n        width: '80%'\r\n    }\r\n});\r\n\r\nconst RegistrationCard = (props) => {\r\n    const { classes } = props;\r\n    const fields = Object.keys(props.inputFieldState);\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            props.buttonRef.current.click();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.registrationCard}>\r\n            <Grid container spacing={1}>\r\n            {\r\n                fields.map((field, index) => {\r\n                    return (\r\n                        <Grid key={index} item xs={fields.length > 2 ? 6 : 12}>\r\n                        <TextField\r\n                            key={index}\r\n                            autoFocus={Boolean(index === 0)}\r\n                            name={props.inputFieldInfo[field].name}\r\n                            label={props.inputFieldInfo[field].label}\r\n                            value={props.inputFieldState[field].value}\r\n                            className={classes.textField}\r\n                            onChange={props.onChange}\r\n                            type={props.inputFieldInfo[field].type}\r\n                            error={!props.inputFieldState[field].valid}                            \r\n                            helperText={props.inputFieldState[field].valid ? ' ' : props.inputFieldInfo[field].requirement}\r\n                            onKeyPress={handleKeyPress}\r\n                            />\r\n                        </Grid>\r\n                    )\r\n                })\r\n            }                \r\n            </Grid>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(RegistrationCard);","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Stepper, Step, StepLabel, Button, Typography, CircularProgress, Paper } from '@material-ui/core';\r\n\r\nimport RegistrationCard from './RegistrationCard';\r\n\r\nimport { registrationNextActiveStep, registrationPreviousActiveStep } from '../../Redux/actions/ui';\r\nimport { userRegistrationRequestSend, userValidationRequestSend } from '../../Redux/actions/user';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '60%',\r\n        margin: '10% auto'\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    instructions: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    instructionsPaper: {\r\n        width: '60%',\r\n        margin: '5% auto',\r\n        padding: '24px'\r\n    },\r\n    registrationCard: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n\r\n    textField: {\r\n        margin:theme.spacing(1),\r\n        width: 200\r\n    },\r\n\r\n    buttonProgress: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n\r\n    bottomError: {\r\n        color: theme.palette.primary.main,\r\n        marginTop: theme.spacing(1)\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    registrationActiveStep: state.registrationActiveStep,\r\n    userValidationState: state.userValidationState,\r\n    userRegistrationState: state.userRegistrationState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    registrationNextActiveStep,\r\n    registrationPreviousActiveStep,\r\n\r\n    userRegistrationRequestSend,\r\n\r\n    userValidationRequestSend\r\n}\r\n\r\n// const getSteps = () => ['Your Information', 'Optional Organization Info', 'Security'];\r\nconst getSteps = () => ['Your Information', 'Optional Organization Info'];\r\nconst getCardInfo = () => ([\r\n    {\r\n        firstName: {\r\n            label:'First Name*',\r\n            name: 'firstName',\r\n            type: 'text',\r\n            requirement: 'Must be 2 or more alphabetical characters.',\r\n            optional: false\r\n        },\r\n        lastName: {\r\n            label:'Last Name*',\r\n            name: 'lastName',\r\n            type: 'text',\r\n            requirement: 'Must be 2 or more alphabetical characters.',\r\n            optional: false\r\n        },\r\n        username: {\r\n            label:'Username*',\r\n            name: 'username',\r\n            type: 'text',\r\n            requirement: 'Must be 6 to 20 alphanumeric characters.',\r\n            optional: false\r\n        },\r\n        email: {\r\n            label:'Email Address*',\r\n            name: 'email',\r\n            type: 'email',\r\n            requirement: 'Must be a valid email address.',\r\n            optional: false\r\n        }\r\n    },\r\n    {\r\n        institute: {\r\n            label:'Institute',\r\n            name: 'institute',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        },\r\n        department: {\r\n            label:'Department',\r\n            name: 'department',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        },\r\n        country: {\r\n            label:'Country',\r\n            name: 'country',\r\n            type: 'text',\r\n            requirement: 'Maximum length is 150 characters.',\r\n            optional: true\r\n        }\r\n    }\r\n])\r\n\r\nconst buttonRef = React.createRef();\r\n\r\nclass RegistrationStepper extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        let cards = []\r\n        getCardInfo().forEach(card => {\r\n            let newCard = {};\r\n            Object.keys(card).forEach(key => {\r\n                newCard[key] = {\r\n                    value: '',\r\n                    valid: true,\r\n                    optional: card[key].optional\r\n                }\r\n            })\r\n            cards.push(newCard);\r\n        })\r\n\r\n        this.state = {\r\n            cards\r\n        }\r\n    }\r\n\r\n    validateField = (name, rawValue) => {\r\n        let value = rawValue.trim();\r\n        let pattern = /$^/;\r\n        switch(name){\r\n            case 'firstName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'lastName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'username':\r\n                pattern = /^[A-Za-z0-9 ]{6,20}$/;\r\n                break;\r\n            case 'email':\r\n                pattern = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n                break;\r\n            case 'institute':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'department':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'country':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'password':\r\n                pattern = /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/\r\n                this.setState(previousState => {\r\n                    let newCardState = [...previousState.cards];\r\n                    newCardState[2].confirmPassword.valid = Boolean(newCardState[2].confirmPassword.value === value);\r\n                    return {cards: newCardState};\r\n                })\r\n                break;\r\n            case 'confirmPassword':\r\n                return this.state.cards[2].password.value === value;\r\n            default:\r\n                break;\r\n        }\r\n        return pattern.test(value);\r\n    }\r\n\r\n    processStateToActionPayload = () => {\r\n        let actionPayload = {};\r\n        this.state.cards.forEach(card => {\r\n            Object.keys(card).forEach(cardKey => {\r\n                actionPayload[cardKey] = card[cardKey].value;\r\n            })\r\n        })\r\n        return actionPayload;\r\n    }\r\n\r\n    currentCardIsValid = () => {\r\n        let currentCard = this.state.cards[this.props.registrationActiveStep];\r\n        for(let key in currentCard){\r\n            if(currentCard[key].optional) continue;\r\n            if(!currentCard[key].value || !currentCard[key].valid) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    handleNext = () => {\r\n        const activeStep = this.props.registrationActiveStep;\r\n        \r\n        switch(activeStep){\r\n            case 0:\r\n                // API request to validate username and email address\r\n                let username= this.state.cards[0].username.value;\r\n                let email= this.state.cards[0].email.value;\r\n                this.props.userValidationRequestSend(username, email);\r\n                break;\r\n            // case 1:\r\n            //     this.props.registrationNextActiveStep();\r\n            //     break;\r\n            case 1:\r\n                // API request to register user\r\n                this.props.userRegistrationRequestSend(this.processStateToActionPayload())\r\n                break;\r\n            default:\r\n                this.props.registrationNextActiveStep();\r\n                break;\r\n\r\n\r\n        }\r\n    };\r\n\r\n    handleBack = () => {\r\n        this.props.registrationPreviousActiveStep();\r\n    };\r\n\r\n    handleChange = (event) => {\r\n        let newValue = event.target.value;\r\n        let fieldName = event.target.name;\r\n        let valid = this.validateField(fieldName, newValue);\r\n        this.setState(previousState => {\r\n            let cards = [...previousState.cards];\r\n            cards[this.props.registrationActiveStep][fieldName] = {\r\n                ...cards[this.props.registrationActiveStep][fieldName],\r\n                value: newValue,\r\n                valid\r\n            }\r\n            return {cards};\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const steps = getSteps();\r\n        const activeStep = this.props.registrationActiveStep;\r\n        const cardInfoArray = getCardInfo();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className={classes.root}>\r\n                    \r\n                    <Stepper activeStep={activeStep}>\r\n                    {steps.map((label, index) => {\r\n                        return (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                        );\r\n                    })}\r\n                    </Stepper>\r\n                    <div>\r\n                    {activeStep === steps.length ? (\r\n                        <Paper className={classes.instructionsPaper}>\r\n                            <Typography className={classes.instructions}>\r\n                                We've sent you an email with a link for finalizing your registration and choosing a password. If you don't receive the email within the next few minute please check your spam folder.\r\n                            </Typography>\r\n                        </Paper>\r\n                    ) : (\r\n                        <div>\r\n                            <RegistrationCard \r\n                                inputFieldState={{...this.state.cards[this.props.registrationActiveStep]}} \r\n                                inputFieldInfo={{...cardInfoArray[this.props.registrationActiveStep]}}\r\n                                onChange={this.handleChange}\r\n                                buttonRef={buttonRef}\r\n                            />\r\n                            <div>\r\n                                <Button\r\n                                onClick={activeStep === 0 ? this.props.handleHideStepper : this.handleBack}\r\n                                className={classes.button}\r\n                                >\r\n                                    Back\r\n                                </Button>\r\n\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={this.handleNext}\r\n                                    className={classes.button}\r\n                                    disabled={!this.currentCardIsValid() || this.props.userValidationState === states.inProgress}\r\n                                    ref={buttonRef}\r\n                                >\r\n                                    {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\r\n                                </Button>\r\n                                {this.props.userValidationState === states.inProgress && <CircularProgress size={24} className= {classes.buttonProgress} />}\r\n                                {this.props.userValidationState === states.failed && <Typography className={classes.bottomError}>That username or email is already in use.</Typography>}\r\n                                {this.props.userRegistrationState === states.failed && <Typography className={classes.bottomError}>Registration failed. Please try again.</Typography>}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(RegistrationStepper));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n    wrapper: {\r\n        height: '46px',\r\n        display: 'flex',\r\n        cursor: 'pointer',\r\n        borderRadius: '4px',\r\n        '&:hover': {\r\n            boxShadow: '0 0 3px 3px rgba(66,133,244,.3)'\r\n        },\r\n        paddingRight: '14px',\r\n        // backgroundColor: '#4285F4',\r\n        width: '200px',\r\n        color: '#ffffff',\r\n\r\n        // backgroundColor: 'white',\r\n        // color: '#444',\r\n    },\r\n\r\n    textSpan: {\r\n        marginTop: '13px',\r\n        marginLeft: '10px',\r\n        fontFamily: \"'Roboto', sans-serif\"\r\n    }\r\n})\r\n\r\nconst GoogleSignInButton = (props) => {\r\n    const { classes, clickHandlerTarget } = props;\r\n\r\n    return (\r\n        <div id={clickHandlerTarget} className={classes.wrapper}>\r\n            {/* Google Icon */}\r\n            <svg width=\"46px\" height=\"46px\" viewBox=\"0 0 46 46\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\r\n            <title>btn_google_dark_normal_ios</title>\r\n            <desc>Created with Sketch.</desc>\r\n            <defs>\r\n                <filter x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" filterUnits=\"objectBoundingBox\" id=\"filter-1\">\r\n                    <feOffset dx=\"0\" dy=\"1\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset>\r\n                    <feGaussianBlur stdDeviation=\"0.5\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur>\r\n                    <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0\" in=\"shadowBlurOuter1\" type=\"matrix\" result=\"shadowMatrixOuter1\"></feColorMatrix>\r\n                    <feOffset dx=\"0\" dy=\"0\" in=\"SourceAlpha\" result=\"shadowOffsetOuter2\"></feOffset>\r\n                    <feGaussianBlur stdDeviation=\"0.5\" in=\"shadowOffsetOuter2\" result=\"shadowBlurOuter2\"></feGaussianBlur>\r\n                    <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0\" in=\"shadowBlurOuter2\" type=\"matrix\" result=\"shadowMatrixOuter2\"></feColorMatrix>\r\n                    <feMerge>\r\n                        <feMergeNode in=\"shadowMatrixOuter1\"></feMergeNode>\r\n                        <feMergeNode in=\"shadowMatrixOuter2\"></feMergeNode>\r\n                        <feMergeNode in=\"SourceGraphic\"></feMergeNode>\r\n                    </feMerge>\r\n                </filter>\r\n                <rect id=\"path-2\" x=\"0\" y=\"0\" width=\"40\" height=\"40\" rx=\"2\"></rect>\r\n                <rect id=\"path-3\" x=\"5\" y=\"5\" width=\"38\" height=\"38\" rx=\"1\"></rect>\r\n            </defs>\r\n            <g id=\"Google-Button\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\r\n                <g id=\"9-PATCH\"  transform=\"translate(-608.000000, -219.000000)\"></g>\r\n                <g id=\"btn_google_dark_normal\" transform=\"translate(-1.000000, -1.000000)\">\r\n                    <g id=\"button\" transform=\"translate(4.000000, 4.000000)\" filter=\"url(#filter-1)\">\r\n                        <g id=\"button-bg\">\r\n                            <use fill=\"#4285F4\" fillRule=\"evenodd\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                            <use fill=\"none\" xlinkHref=\"#path-2\"></use>\r\n                        </g>\r\n                    </g>\r\n                    <g id=\"button-bg-copy\">\r\n                        <use fill=\"#FFFFFF\" fillRule=\"evenodd\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                        <use fill=\"none\" xlinkHref=\"#path-3\"></use>\r\n                    </g>\r\n                    <g id=\"logo_googleg_48dp\" transform=\"translate(15.000000, 15.000000)\">\r\n                        <path d=\"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z\" id=\"Shape\" fill=\"#4285F4\"></path>\r\n                        <path d=\"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z\" id=\"Shape\" fill=\"#34A853\"></path>\r\n                        <path d=\"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z\" id=\"Shape\" fill=\"#FBBC05\"></path>\r\n                        <path d=\"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z\" id=\"Shape\" fill=\"#EA4335\"></path>\r\n                        <path d=\"M0,0 L18,0 L18,18 L0,18 L0,0 Z\" id=\"Shape\" ></path>\r\n                    </g>\r\n                    <g id=\"handles_square\" ></g>\r\n                </g>\r\n            </g>\r\n            </svg>\r\n\r\n            <span className={classes.textSpan}>\r\n                {props.text}\r\n            </span>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default withStyles(styles)(GoogleSignInButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Paper, Button, Typography } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport RegistrationStepper from './RegistrationStepper';\r\nimport GoogleSignInButton from './GoogleSignInButton';\r\n\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '10% auto',\r\n        padding: '24px'\r\n        // height: '40vh'\r\n    },\r\n\r\n    emailSignUpButton: {\r\n        textTransform: 'none',\r\n        height: '46px',\r\n        color: 'white'\r\n    },\r\n\r\n    googleWrapper: {\r\n        margin: '50px auto 0 0',\r\n        display: 'inline-block'\r\n    },\r\n\r\n    description: {\r\n        paddingTop: '50px'\r\n    },\r\n\r\n    emailSignUpWrapper: {\r\n        marginTop: '40px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarOpen\r\n}\r\n\r\nconst registerClickHandlerTarget = 'g-signup';\r\n\r\nclass Register extends Component {\r\n    state = {\r\n        showStepper: false\r\n    }\r\n\r\n    onGoogleSignup = (user) => {\r\n        let token = user.getAuthResponse(true).id_token;\r\n        this.props.googleLoginRequestSend(token);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // clean up listener on unmount\r\n        let _this = this;\r\n        let auth = window.gapi.auth2\r\n        if(auth){\r\n            let authInstance = auth.getAuthInstance();\r\n            authInstance.attachClickHandler(\r\n                registerClickHandlerTarget, \r\n                null, \r\n                _this.onGoogleSignin,\r\n                () => _this.props.snackbarOpen('There was a problem accessing your google account')\r\n            );\r\n        } else {\r\n            setTimeout(_this.onDialogEnter, 200);\r\n            console.log(\"didn't find auth\");\r\n        }\r\n    }\r\n\r\n    handleShowStepper = () => {\r\n        this.setState({showStepper: true})\r\n    }\r\n\r\n    handleHideStepper = () => {\r\n        this.setState({showStepper: false});\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {!this.state.showStepper &&\r\n                    <Paper className={classes.paper}>\r\n                        <Typography className={classes.description}>\r\n                            Create an account to visualize data, and access the Simons CMAP API.\r\n                        </Typography>\r\n\r\n                        <div className={classes.googleWrapper}>\r\n                            <GoogleSignInButton clickHandlerTarget={registerClickHandlerTarget} text='Sign up with Google'/>\r\n                        </div>\r\n\r\n                        <div className={classes.emailSignUpWrapper}>\r\n                            <Button variant='contained' color='primary' className={classes.emailSignUpButton} onClick={this.handleShowStepper}>\r\n                                Sign up with an Email Address\r\n                            </Button>\r\n                        </div>\r\n                    </Paper>                \r\n                }\r\n                {this.state.showStepper && <RegistrationStepper handleHideStepper={this.handleHideStepper}/>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(Register));","const validation = {\r\n    depth: {\r\n        depthOneIsLower: 'Cannot be larger than end',\r\n        depthOneOutOfBounds: 'Must be smaller than $',\r\n        depthTwoOutOfBounds: 'Must be larger than $',\r\n        negative: 'Cannot be negative'\r\n    },\r\n\r\n    date: {\r\n        dateOneIsLater: 'Cannot be after end',\r\n        dateOneOutOfBounds: 'Must be before $',\r\n        dateTwoOutOfBounds: 'Must be after $'\r\n    },\r\n\r\n    lat: {\r\n        latOneIsHigher: 'Cannot be larger than end.',\r\n        latOneOutOfBounds: 'Must be less than $',\r\n        latTwoOutOfBounds: 'Must be greater than $'\r\n    },\r\n\r\n    lon: {\r\n        lonOneIsHigher: 'Cannot be larger than end.',\r\n        lonOneOutOfBounds: 'Must be less than $',\r\n        lonTwoOutOfBounds: 'Must be greater than $'\r\n    },\r\n\r\n    type: {\r\n        dataIsIrregular: '$ is not available for sparse data',\r\n        dateRangeRequired: '$ requires a range of dates',\r\n        depthRangeRequired: '$ requires a range of depths',\r\n        surfaceOnlyDataset: '$ contains only surface data',\r\n        irregularOnly: 'Sparse map is only available for sparse data',\r\n        dataSizeTooLarge: 'Data set is too large for this visualization type.',\r\n        webGLContextLimit: 'Limit exceeded for sparse and heatmaps. Please delete one or more to proceed.'\r\n    },\r\n\r\n    generic: {\r\n        invalid: 'Invalid input',\r\n        dataSizeWarning: 'Wait time and application performance may be poor due to size of data.',\r\n        dataSizePrevent: 'Data set is too large. Please reduce date range or area size.',\r\n        variableMissing: 'Please select a variable',\r\n        vizTypeMissing: 'Please select a visualization type'\r\n    }\r\n}\r\n\r\nexport default validation;","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, Table, TableRow, TableCell, TableBody } from '@material-ui/core';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray\r\n    }\r\n})\r\n\r\nconst TableStatsDialog = (props) => {\r\n    const { data, classes } = props;\r\n\r\n    if(!data) return '';\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n        >\r\n            <DialogTitle>{data.Long_Name}</DialogTitle>\r\n            <DialogContent>\r\n                { data.Comment &&\r\n                    <DialogContentText>\r\n                        {data.Comment}\r\n                    </DialogContentText>\r\n                }\r\n                <Table size='small'>\r\n                    <TableBody>\r\n                            <TableRow>\r\n                                <TableCell>Dataset</TableCell>\r\n                                <TableCell title={data.Dataset_Name}>{data.Dataset_Name.length > 25 ? data.Dataset_Name.slice(0,23) + '...' : data.Dataset_Name}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Table Name</TableCell>\r\n                                <TableCell title={data.Table_Name}>{data.Table_Name > 25 ? data.Table_Name.slice(0,23) + '...' : data.Table_Name}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Source</TableCell>\r\n                                <TableCell title={data.Data_Source}>{data.Data_Source > 25 ? data.Data_Source.slice(0,23) + '...' : data.Data_Source}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Distributor</TableCell>\r\n                                <TableCell title={data.Distributor}>{data.Distributor.length > 25 ? data.Distributor.slice(0,23) + '...' : data.Distributor}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Sensor</TableCell>\r\n                                <TableCell>{data.Sensor}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Spatial Resolution</TableCell>\r\n                                <TableCell>{data.Spatial_Resolution}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Resolution</TableCell>\r\n                                <TableCell>{data.Temporal_Resolution}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Coverage Begin</TableCell>\r\n                                <TableCell>{data.Time_Min ? data.Time_Min.slice(0,10) : 'Irregular'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Temporal Coverage End</TableCell>\r\n                                <TableCell>{data.Time_Max ? data.Time_Max.slice(0,10) : 'Irregular'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lat Coverage Begin</TableCell>\r\n                                <TableCell>{`${data.Lat_Min}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n                            <TableRow>\r\n                                <TableCell>Lat Coverage End</TableCell>\r\n                                <TableCell>{`${data.Lat_Max}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lon Coverage Begin</TableCell>\r\n                                <TableCell>{`${data.Lon_Min}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Lon Coverage End</TableCell>\r\n                                <TableCell>{`${data.Lon_Max}\\xB0`}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Depth Coverage Begin</TableCell>\r\n                                <TableCell>{data.Depth_Min ? `${data.Depth_Min}(m)` : 'Surface Only'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell>Depth Coverage End</TableCell>\r\n                                <TableCell>{data.Depth_Max ? `${data.Depth_Max}(m)` : 'Surface Only'}</TableCell>\r\n                            </TableRow>\r\n\r\n                            {data.Variable_Min &&\r\n                                <TableRow>\r\n                                    <TableCell>Minimum Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Min}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Max &&\r\n                                <TableRow>\r\n                                    <TableCell>Maximum Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Max}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Mean && \r\n                                <TableRow>\r\n                                    <TableCell>Mean Value({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Mean}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n\r\n                            {data.Variable_Std &&\r\n                                <TableRow>\r\n                                    <TableCell>Standard Deviation({data.Unit})</TableCell>\r\n                                    <TableCell>{data.Variable_Std}</TableCell>\r\n                                </TableRow>                            \r\n                            }\r\n                    </TableBody>\r\n                </Table>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(TableStatsDialog);\r\n\r\n// Variable_Max: \"4.999\"\r\n// Variable_Mean: \"-0.0000008547\"\r\n// Variable_Min: \"-4.9956\"\r\n// Variable_Std: \"0.1428013424\"","import temporalResolutions from '../Enums/temporalResolutions';\r\n\r\nconst mapTemporalResolutionToNumber = (resolution) => {\r\n    let map = {\r\n        [temporalResolutions.threeMinutes] : 1,\r\n        [temporalResolutions.sixHourly] : 1,\r\n        [temporalResolutions.daily] : 1,\r\n        [temporalResolutions.weekly] : 7,\r\n        [temporalResolutions.monthly] : 30,\r\n        [temporalResolutions.annual] : 365,\r\n        [temporalResolutions.irregular] : null,\r\n        [temporalResolutions.monthlyClimatology]: 30,\r\n        [temporalResolutions.threeDay]: 3,\r\n        [temporalResolutions.eightDayRunning]: 8,\r\n        [temporalResolutions.eightDays]: 8\r\n    };\r\n\r\n    return map[resolution];\r\n}\r\n\r\nexport default mapTemporalResolutionToNumber;","const utcDateStringToLocal = (utcString) => {\r\n    let date = new Date(utcString);\r\n    let utcYear = date.getUTCFullYear();\r\n    let utcMonth = date.getUTCMonth();\r\n    let utcDate = date.getUTCDate();\r\n\r\n    let newDate = new Date();\r\n    newDate.setFullYear(utcYear, utcMonth, utcDate);\r\n    return newDate;\r\n}\r\n\r\nexport default utcDateStringToLocal;","\r\nconst darwinDepths = [\r\n    5,\r\n    15,\r\n    25,\r\n    35,\r\n    45,\r\n    55,\r\n    65,\r\n    75.005,\r\n    85.025,\r\n    95.095,\r\n    105.31,\r\n    115.87,\r\n    127.15,\r\n    139.74,\r\n    154.47,\r\n    172.4,\r\n    194.735,\r\n    222.71,\r\n    257.47,\r\n    299.93,\r\n    350.68,\r\n    409.93,\r\n    477.47,\r\n    552.71,\r\n    634.735,\r\n    722.4,\r\n    814.47,\r\n    909.74,\r\n    1007.155,\r\n    1105.905,\r\n    1205.535,\r\n    1306.205,\r\n    1409.15,\r\n    1517.095,\r\n    1634.175,\r\n    1765.135,\r\n    1914.15,\r\n    2084.035,\r\n    2276.225,\r\n    2491.25,\r\n    2729.25,\r\n    2990.25,\r\n    3274.25,\r\n    3581.25,\r\n    3911.25,\r\n    4264.25,\r\n    4640.25,\r\n    5039.25,\r\n    5461.25,\r\n    5906.25\r\n]\r\n\r\nconst piscesDepths = [\r\n    0.494024991989,\r\n    1.54137504101,\r\n    2.64566898346,\r\n    3.81949496269,\r\n    5.07822418213,\r\n    6.44061422348,\r\n    7.92956018448,\r\n    9.5729970932,\r\n    11.404999733,\r\n    13.4671401978,\r\n    15.8100700378,\r\n    18.4955596924,\r\n    21.5988197327,\r\n    25.2114105225,\r\n    29.4447307587,\r\n    34.4341506958,\r\n    40.3440513611,\r\n    47.3736915588,\r\n    55.764289856,\r\n    65.8072662354,\r\n    77.8538513184,\r\n    92.3260726929,\r\n    109.729301453,\r\n    130.666000366,\r\n    155.850692749,\r\n    186.125595093,\r\n    222.475204468,\r\n    266.040313721,\r\n    318.127410889,\r\n    380.213012695,\r\n    453.937713623,\r\n    541.088928223,\r\n    643.566772461,\r\n    763.333129883,\r\n    902.339294434,\r\n    1062.43994141,\r\n    1245.29101562,\r\n    1452.25097656,\r\n    1684.28405762,\r\n    1941.89294434,\r\n    2225.07788086,\r\n    2533.3359375,\r\n    2865.70288086,\r\n    3220.82006836,\r\n    3597.03198242,\r\n    3992.48388672,\r\n    4405.22412109,\r\n    4833.29101562,\r\n    5274.78417969,\r\n    5727.91699219\r\n]\r\n\r\nconst _piscesTables = [\r\n    'tblPisces_NRT',\r\n    'tblPisces_NRT_Calendar'\r\n]\r\n\r\nconst _darwinTable = [\r\n    'tblDarwin_Chl_Climatology',\r\n    'tblDarwin_Ecosystem',\r\n    'tblDarwin_Nutrient',\r\n    'tblDarwin_Nutrient_Climatology',\r\n    'tblDarwin_Ocean_Color',\r\n    'tblDarwin_Phytoplankton',\r\n    'tblDarwin_Plankton_Climatology'\r\n]\r\n\r\nconst piscesTable = new Set(_piscesTables);\r\nconst darwinTable = new Set(_darwinTable);\r\n\r\nconst exports = {\r\n    count: (field, depth1, depth2) => {\r\n        const { Table_Name: table } = field.data;\r\n        var count = 0;\r\n    \r\n        if(piscesTable.has(table)) {\r\n            for(let i = 0; i < piscesDepths.length; i++){\r\n                if(piscesDepths[i] > depth2) break;\r\n                if(piscesDepths[i] > depth1) count ++; \r\n            }\r\n        } else if (darwinTable.has(table)) {\r\n            for(let i = 0; i < darwinDepths.length; i++){\r\n                if(darwinDepths[i] > depth2) break;\r\n                if(darwinDepths[i] > depth1) count ++; \r\n            }\r\n        } else {}\r\n        return count;\r\n    },\r\n\r\n    piscesTable,\r\n    darwinTable,\r\n    piscesDepths,\r\n    darwinDepths\r\n}\r\n\r\nexport default exports;","import visualizationSubTypes from '../Enums/visualizationSubTypes';\r\n\r\nexport default (charts) => {\r\n    let count = 0;\r\n    charts.forEach(chart => {\r\n        if(chart.subType === visualizationSubTypes.heatmap) count ++;\r\n        if(chart.subType === visualizationSubTypes.sparse){\r\n            count ++;\r\n            if(chart.data.variableValues.length > 10000) count +=3;\r\n        }\r\n    })\r\n    return count;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport * as JsSearch from 'js-search';\r\nimport { VariableSizeList as ReactWindowList } from \"react-window\";\r\n\r\nimport { ButtonGroup, Grid, IconButton, Icon, ListItem, MenuItem, Typography, Drawer, TextField, FormControl, InputLabel, Button, Tooltip} from '@material-ui/core';\r\nimport MUISelect from '@material-ui/core/Select';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\nimport { Cached, LibraryBooks, ArrowRight, ChevronLeft, ChevronRight, InsertChartOutlined, Language, Delete, CloudDownload, Info } from '@material-ui/icons';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\nimport validation from '../../Enums/validation';\r\nimport TableStatsDialog from './TableStatsDialog';\r\nimport mapTemporalResolutionToNumber from '../../Utility/mapTemporalResolutionToNumber';\r\nimport mapSpatialResolutionToNumber from '../../Utility/mapSpatialResolutionToNumber';\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { cruiseTrajectoryRequestSend, clearCharts, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\nimport { snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport depthUtils from '../../Utility/depthCounter';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport ConnectedTooltip from '../UI/ConnectedTooltip';\r\n\r\nconst navDrawerWidth = 320;\r\n\r\nconst errorHeightAdjust = 23;\r\n\r\nconst styles = theme => ({\r\n    drawer: {\r\n        width: navDrawerWidth,\r\n        top: 32,\r\n        bottom: 'auto',\r\n        overflow: 'visible'\r\n    },\r\n\r\n    drawerPaper: {\r\n        width: navDrawerWidth,\r\n        height: '540px',\r\n        top: 'calc(50% - 270px)',\r\n        borderRadius: '0 4px 4px 0',\r\n        boxShadow: '2px 2px  2px 2px #242424',\r\n        border: 'none',\r\n        overflow: 'visible',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    drawerPaperError1: {\r\n        height: `${540 + errorHeightAdjust}px`\r\n    },\r\n\r\n    drawerPaperError2: {\r\n        height: `${540 + errorHeightAdjust * 2}px`\r\n    },\r\n\r\n    drawerPaperError3: {\r\n        height: `${540 + errorHeightAdjust * 3}px`\r\n    },\r\n\r\n    drawerPaperError4: {\r\n        height: `${540 + errorHeightAdjust * 4}px`\r\n    },\r\n\r\n    drawerPaperError5: {\r\n        height: `${540 + errorHeightAdjust * 5}px`\r\n    },\r\n\r\n  openPanelChevron: {\r\n    position: 'fixed',\r\n    left: '5px',\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  closePanelChevron: {\r\n    position: 'fixed',\r\n    left: navDrawerWidth + 5,\r\n    top: 'calc(50% - 8px)',\r\n    zIndex: 1100\r\n  },\r\n\r\n  groupedButtons: {\r\n      width: '50%',\r\n      border: '1px solid #313131',\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c'\r\n  },\r\n\r\n  controlPanelForm: {\r\n      marginTop: theme.spacing(1)\r\n  },\r\n\r\n  tableStatsButton: {\r\n      borderRadius: 0,\r\n      paddingTop: '11px',\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n    formGridItem: {\r\n        borderLeft: '1px solid #313131',\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n  vizTypeSelectFormControl: {\r\n      width: '100%',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    }\r\n  },\r\n\r\n  depressed: {\r\n      boxShadow: 'inset 1px 1px 5px #1c1c1c'\r\n  },\r\n\r\n  padLeft: {\r\n      padding: '6px 0 2px 7px'\r\n  },\r\n\r\n  visualizeButton: {\r\n      height: '56px',\r\n      borderRadius: 0,\r\n      backgroundColor: colors.backgroundGray,\r\n      color: theme.palette.primary.main,\r\n      fontVariant: 'normal',\r\n      '&:disabled': {\r\n        backgroundColor: 'transparent'\r\n    },\r\n      '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n            color: 'white'\r\n        }\r\n  },\r\n\r\n  helperText: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  vizButtonTooltip: {\r\n    color: 'yellow'\r\n  },\r\n\r\n  datePickerInputAdornment: {\r\n      padding: 0\r\n  },\r\n\r\n  clearChartsButton: {\r\n      borderRadius: 0,\r\n      backgroundColor: '#3c3c3c',\r\n      width: '100%',\r\n      borderRight: '1px solid #313131'\r\n\r\n  },\r\n\r\n  resetSPParamsButton: {\r\n    borderRadius: 0,\r\n    backgroundColor: '#3c3c3c',\r\n    width: '100%',\r\n  },\r\n\r\n  datePicker: {\r\n      width: '100%'\r\n  },\r\n\r\n  singleValueReplacement: {\r\n      display: 'inline',\r\n      position: 'relative',\r\n      width: 0,\r\n      height: 0\r\n  },\r\n\r\n  vizTypeMenu: {\r\n      backgroundColor: colors.backgroundGray\r\n  },\r\n\r\n  vizTypeMenuItem: {\r\n    '&:hover': {backgroundColor: colors.greenHover}\r\n  }\r\n});\r\n\r\nconst overrideDisabledStyle = {\r\n    backgroundColor: 'transparent'\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    data: state.data,\r\n    storedProcedureRequestState: state.storedProcedureRequestState,\r\n    catalog: state.catalog,\r\n    catalogRequestState: state.catalogRequestState,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    showHelp: state.showHelp,\r\n    datasets: state.datasets,\r\n    charts: state.charts\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseTrajectoryRequestSend,\r\n    clearCharts,\r\n    csvDownloadRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst getDatePlaceholder = (date) => {\r\n    if(isNaN(new Date(date)).valueOf()) return 'yyyy-MM-dd';\r\n    \r\n    let month  = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n    let year = date.getFullYear();\r\n    return [year, month < 10 ? '0' + month : month, day < 10 ? '0' + day : day].join('-');\r\n}\r\n\r\nconst groupHeaderHeight = 37;\r\nconst height = 35;\r\n\r\nconst reactWindowListRef = React.createRef();\r\nconst selectRef = React.createRef();\r\n\r\nclass MenuList extends Component {\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n      if(reactWindowListRef.current) reactWindowListRef.current.resetAfterIndex(0);\r\n      if(!(this.props.children && this.props.children.length)) return;\r\n      let scrollOffset = 0;\r\n      let foundFocus = false;\r\n      this.props.children.forEach(child => {\r\n        if(foundFocus) return;\r\n\r\n        let count = groupHeaderHeight;\r\n        let groupHasFocus= false;\r\n        for(let i = 0; i < child.props.children.length; i++){\r\n          if(child.props.children[i].props.isFocused) {\r\n            foundFocus = true;\r\n            groupHasFocus = true;\r\n            break;\r\n          }\r\n          count += 37.6;\r\n        }\r\n\r\n        if(groupHasFocus) scrollOffset += count;\r\n        else scrollOffset += 37.6;\r\n      })\r\n      if(foundFocus) reactWindowListRef.current.scrollTo(scrollOffset > 150 ? scrollOffset - 150 : 0);\r\n    }\r\n\r\n    render() {\r\n        const { options, children, getValue } = this.props;\r\n\r\n        if(!children || !children.length) return '';\r\n        const [value] = getValue();\r\n        const initialOffset = options.indexOf(value) * height;\r\n        const groupHeights = children.map(child => {\r\n          return child.props.children.some(grandChild => grandChild.props.isFocused) ? child.props.children.length * 37.6 + groupHeaderHeight : groupHeaderHeight;\r\n        });\r\n        const totalHeight = groupHeights.reduce((acc, cur) => acc + cur, 0);\r\n        const estimatedItemSize = totalHeight / children.length;\r\n        const getItemSize = index => groupHeights[index];\r\n\r\n        return (\r\n            <ReactWindowList\r\n                height={totalHeight < 400 ? totalHeight :  400}\r\n                estimatedItemSize={estimatedItemSize}\r\n                itemCount={children.length}\r\n                itemSize={getItemSize}\r\n                initialScrollOffset={initialOffset || 0}\r\n                ref={reactWindowListRef}\r\n            >\r\n                {({ index, style }) => <div style={{...style}}>{children[index]}</div>}\r\n            </ReactWindowList>\r\n        );\r\n    }\r\n}\r\n\r\nclass Group extends Component {\r\n    render() {\r\n        const hasFocus = this.props.children.some(element => element.props.isFocused);\r\n        const sensor = this.props.children[0].props.data.data.Sensor;\r\n\r\n      return (\r\n          <React.Fragment>\r\n            <CustomHeading \r\n              {...this.props.headingProps} \r\n              headingLabel={this.props.data.label} \r\n              firstChild={this.props.children[0].props.data}\r\n              hasFocus={hasFocus}\r\n              sensor={sensor}\r\n              tableName={this.props.children[0].props.data.data.Table_Name}\r\n              selectProps={this.props.selectProps}\r\n            />\r\n            <div hidden={!hasFocus}>\r\n              {this.props.children.map(child => child)}\r\n            </div>\r\n          </React.Fragment>\r\n        );\r\n    }    \r\n}\r\n\r\nconst customHeadingStyles = (theme) => ({\r\n    customHeading: {\r\n        backgroundColor: 'rgba(0,0,0,.5)',\r\n        height: groupHeaderHeight,\r\n        '&:hover': {\r\n            // backgroundColor: 'rgba(122,67,0,.5)',\r\n            backgroundColor: colors.greenHover\r\n        },\r\n        boxShadow: '0px 1px 1px 1px #242424'\r\n    },\r\n\r\n    icon: {\r\n        marginRight: '10px',\r\n        width: '30px'\r\n    },\r\n\r\n    typography: {\r\n        width: '650px'\r\n    }\r\n})\r\n\r\nconst _CustomHeading = props => {\r\n    const { classes, sensor, selectProps } = props;\r\n    let iconClass;\r\n\r\n    if(sensor === 'Satellite') iconClass = 'fa-satellite';\r\n    else if(sensor === 'Blend') iconClass = 'fa-laptop';\r\n    else iconClass = 'fa-ship';\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ListItem \r\n          button \r\n          alignItems='center' \r\n          onClick={() => selectRef.current.select.setState({focusedOption: props.hasFocus ? null : props.firstChild})}\r\n          className={classes.customHeading}\r\n        >\r\n            <Icon fontSize='small' color='inherit' className={`fas ${iconClass} ${classes.icon}`}></Icon>\r\n        <Typography className={classes.typography}>\r\n            {props.headingLabel.length > 70 ? props.headingLabel.slice(0,67) + '...' : props.headingLabel}\r\n        </Typography>\r\n\r\n        <Tooltip title='Download Data' placement='right'>\r\n            <IconButton \r\n                color='inherit' \r\n                onClick={(e) => {\r\n                    // selectProps.handleDownloadCsvClick(tableName, props.headingLabel);\r\n                    selectProps.handleSetDownloadTarget({dataset: props.headingLabel})\r\n                    e.stopPropagation();\r\n                }}>\r\n                <CloudDownload/>\r\n            </IconButton>\r\n        </Tooltip>\r\n\r\n        { selectProps.datasets[props.headingLabel] &&\r\n            <Tooltip title='Dataset Info' placement='right'>\r\n                <IconButton \r\n                    color='inherit' \r\n                    onClick={(e) => {\r\n                        window.open(selectProps.datasets[props.headingLabel].Doc_URL);\r\n                        e.stopPropagation();\r\n                    }}\r\n                >\r\n                    <Info/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        }\r\n        </ListItem>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\nconst CustomHeading = withStyles(customHeadingStyles)(_CustomHeading);\r\n\r\n// Replace react-select dropdown area with material version\r\nconst DropdownIndicator = (props) => {\r\n    return (\r\n    <components.DropdownIndicator {...props}>\r\n        <ArrowRight/>\r\n    </components.DropdownIndicator>\r\n    );\r\n};\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst GroupHeading = (props) => '';\r\n\r\nconst formatOptionLabel = (option, meta) => {\r\n    return option.label;\r\n}\r\n\r\nclass VizControlPanel extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Variable');\r\n        search.addIndex('Make');\r\n        search.addIndex('Sensor');\r\n        search.addIndex('Data_Source');\r\n        search.addIndex('Process_Level');\r\n        search.addIndex('Long_Name');\r\n        search.addIndex('Keywords');\r\n        search.addIndex('Table_Name');\r\n        search.addIndex('Dataset_Name');\r\n        search.addIndex('Study_Domain');\r\n        search.addIndex('Spatial_Resolution');\r\n        search.addIndex('Temporal_Resolution');\r\n\r\n        if(props.catalog) search.addDocuments(props.catalog);\r\n\r\n        this.state = {\r\n            tableStatsDialogIsOpen: false,\r\n            search,\r\n            searchField: '',\r\n            showControlPanel: true\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.catalog && prevProps.catalog.length) && (this.props.catalog && this.props.catalog.length)){\r\n            this.state.search.addDocuments(this.props.catalog);\r\n            this.setState({search: this.state.search});\r\n        }\r\n    }\r\n\r\n    handleOpenControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: true})\r\n    }\r\n\r\n    handleCloseControlPanel = () => {\r\n        this.setState({...this.state, showControlPanel: false})\r\n    }      \r\n    \r\n    handleTableStatsDialogClose = () => {\r\n        this.setState({...this.state, tableStatsDialogIsOpen: false})\r\n    }\r\n\r\n    handleTableStatsDialogOpen = (event) => {\r\n        event.stopPropagation();\r\n        this.setState({...this.state, tableStatsDialogIsOpen: true});\r\n    }\r\n\r\n    getSelectOptionsFromCatalogItems = (items) => {\r\n        var options = {};\r\n\r\n        items.forEach(item => {\r\n            if(!options[item.Dataset_Name]){\r\n                options[item.Dataset_Name] = {\r\n                    label: item.Dataset_Name,\r\n                    options: []\r\n                }\r\n            }\r\n\r\n            options[item.Dataset_Name].options.push({\r\n                value: item.Variable,\r\n                label: item.Long_Name.length < 80 ? item.Long_Name : item.Long_Name.slice(0,78) + '...',\r\n                data: item\r\n            })\r\n        });\r\n\r\n        let sortedOptions = Object.values(options).sort((opt1, opt2) => {\r\n            return opt1.label < opt2.label ? -1 : 1;\r\n        })\r\n\r\n        return sortedOptions;\r\n    }\r\n\r\n    estimateCsvSize = (datasetName) => {\r\n        // let members = [];\r\n        let count = 0;\r\n        this.props.catalog.forEach((member, i) => {\r\n            if(member.Dataset_Name === datasetName){\r\n                count += parseInt(member.Variable_Count) || 0;\r\n                // members.push(member);\r\n            }\r\n        })\r\n        return count;\r\n    }\r\n\r\n    handleDownloadCsvClick = (tableName, datasetName) => {\r\n        let query = `select%20*%20from%20${tableName}`;\r\n        let count = this.estimateCsvSize(datasetName);\r\n        if(count < 3000000){\r\n            this.props.csvDownloadRequestSend(query, datasetName);\r\n        } else {\r\n            this.props.snackbarOpen('Data set too large');\r\n        }\r\n    }\r\n\r\n    handleResetSPParams = () => {\r\n        this.props.resetSPParams();\r\n        this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') {\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n\r\n        if(action.action === 'escape-clear'){\r\n            this.setState({...this.state, searchField: searchString});\r\n            selectRef.current.select.setState({focusedOption: -1})\r\n        }\r\n        // if(action.action ==='set-value') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    estimateDataSize = () => {\r\n        const { dt1, dt2, lat1, lat2, lon1, lon2, fields, depth1, depth2, selectedVizType } = this.props;\r\n        if(!fields) return 0;\r\n        if(fields.data.Spatial_Resolution === spatialResolutions.irregular) return 0;\r\n        if(selectedVizType === vizSubTypes.timeSeries || selectedVizType === vizSubTypes.depthProfile) return 0;\r\n\r\n        const date1 = Date.parse(dt1);\r\n        const date2 = Date.parse(dt2);\r\n        \r\n        const dayDiff = (date2 - date1) / 86400000;\r\n        \r\n        const res = mapSpatialResolutionToNumber(fields.data.Spatial_Resolution);\r\n        \r\n        const dateCount = Math.floor(dayDiff / mapTemporalResolutionToNumber(fields.data.Temporal_Resolution)) || 1;\r\n        const depthCount = depthUtils.count(fields, depth1, depth2) || 1;\r\n        \r\n        const latCount = (lat2 - lat1) / res;\r\n        const lonCount = (lon2 - lon1) / res;\r\n\r\n        const pointCount = lonCount * latCount * depthCount * dateCount;\r\n        return pointCount;\r\n    }\r\n\r\n    checkStartDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth1) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.fields.data.Depth_Max)) return validation.depth.depthOneOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Max).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkEndDepth = () => {\r\n        if(this.props.surfaceOnly) return '';\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.depth2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.depth2) < 0) return validation.depth.negative;\r\n        if(parseFloat(this.props.depth1) > parseFloat(this.props.depth2)) return validation.depth.depthOneIsLower;\r\n        if(parseFloat(this.props.depth2) < parseFloat(this.props.fields.data.Depth_Min)) return validation.depth.depthTwoOutOfBounds.replace('$', parseFloat(this.props.fields.data.Depth_Min).toFixed(2));\r\n        return ''; \r\n    }\r\n\r\n    checkStartDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt1)).valueOf() || !this.props.dt1) return 'Start date is invalid';\r\n    }\r\n\r\n    checkEndDateValid = () => {\r\n        if(isNaN(new Date(this.props.dt2)).valueOf() || !this.props.dt1) return 'End date is invalid';\r\n    }\r\n\r\n    checkStartDate = () => {\r\n        if(this.props.dt1 > this.props.dt2) return validation.date.dateOneIsLater;\r\n        if(this.props.dt1 > this.props.fields.data.Time_Max) return validation.date.dateOneOutOfBounds.replace('$', this.props.fields.data.Time_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndDate = () => {\r\n        if(this.props.dt2 < this.props.fields.data.Time_Min) return validation.date.dateTwoOutOfBounds.replace('$', this.props.fields.data.Time_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) < -90 || parseFloat(this.props.lat1) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.lat2)) return validation.lat.latOneIsHigher;\r\n        if(parseFloat(this.props.lat1) > parseFloat(this.props.fields.data.Lat_Max)) return validation.lat.latOneOutOfBounds.replace('$', this.props.fields.data.Lat_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLat = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lat2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < -90 || parseFloat(this.props.lat2) > 90) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lat2) < parseFloat(this.props.fields.data.Lat_Min)) return validation.lat.latTwoOutOfBounds.replace('$', this.props.fields.data.Lat_Min);\r\n        return '';\r\n    }\r\n\r\n    checkStartLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon1)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon1) < -180 || parseFloat(this.props.lon1) > 180) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon1) > parseFloat(this.props.fields.data.Lon_Max)) return validation.lon.lonOneOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkEndLon = () => {\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(this.props.lon2)) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < -180 || parseFloat(this.props.lon2) > 180) return validation.generic.invalid;\r\n        if(parseFloat(this.props.lon2) < parseFloat(this.props.fields.data.Lon_Min)) return validation.lon.lonTwoOutOfBounds.replace('$', this.props.fields.data.Lon_Max);\r\n        return '';\r\n    }\r\n\r\n    checkHeatmap = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Heatmap');\r\n        return '';\r\n    }\r\n\r\n    checkContour = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Contour');\r\n        return '';\r\n    }\r\n\r\n    checkSection = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Section Map');\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', \"Section Map\");\r\n        return '';\r\n    }\r\n\r\n    checkHistogram = () => {\r\n        return '';\r\n    }\r\n    \r\n    checkTimeSeries = () => {\r\n        if(this.props.irregularSpatialResolution) return validation.type.dataIsIrregular.replace('$', 'Time Series');\r\n        if(this.props.dt1 === this.props.dt2) return validation.type.dateRangeRequired.replace('$', 'Time Series');\r\n        return '';\r\n    }\r\n\r\n    checkDepthProfile = () => {\r\n        if(this.props.surfaceOnly) return validation.type.surfaceOnlyDataset.replace('$', this.props.fields.value);\r\n        if(this.props.depth1 === this.props.depth2) return validation.type.depthRangeRequired.replace('$', 'Depth Profile');\r\n        return '';\r\n    }\r\n\r\n    checkSparseMap = () => {\r\n        if(!this.props.irregularSpatialResolution) return validation.type.irregularOnly;\r\n        return '';\r\n    }\r\n\r\n    checkGeneralWarn = (dataSize) => {\r\n        if(!this.props.selectedVizType) return '';\r\n        if(dataSize > 1200000) return validation.generic.dataSizeWarning;\r\n        return ''\r\n    }\r\n\r\n    checkGeneralPrevent = (dataSize) => {\r\n        const webGLCount = countWebGLContexts(this.props.charts);\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap && webGLCount > 14) return validation.type.webGLContextLimit;\r\n        if(this.props.selectedVizType === vizSubTypes.sparse && webGLCount > 11) return validation.type.webGLContextLimit;\r\n\r\n        if(this.props.selectedVizType === vizSubTypes.heatmap){\r\n            let availableContexts = 16 - webGLCount;\r\n            const depthCount = depthUtils.count(this.props.fields, this.props.depth1, this.props.depth2) || 1;\r\n            if(availableContexts - depthCount < 1) return 'Too many distinct depths to render heatmap. Please reduce depth range or select section map.';\r\n        }\r\n        if(this.props.selectedVizType !== vizSubTypes.histogram && this.props.selectedVizType !== vizSubTypes.heatmap && dataSize > 1200000){\r\n            return validation.generic.dataSizePrevent;\r\n        }\r\n        if(dataSize > 6000000) return validation.generic.dataSizePrevent;\r\n        if(!this.props.fields) return validation.generic.variableMissing;\r\n        if(!this.props.selectedVizType) return validation.generic.vizTypeMissing;\r\n        return ''}\r\n\r\n    handleShowChartsAndResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);\r\n        this.props.handleShowCharts();     \r\n    }\r\n    \r\n    render() {      \r\n        const { search, searchField, showControlPanel } = this.state;\r\n        \r\n        const { classes, \r\n            fields, \r\n            depth1,\r\n            depth2,\r\n            dt1,\r\n            dt2,\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            selectedVizType,\r\n            catalog,\r\n            catalogRequestState,\r\n            showCharts,\r\n            handleShowGlobe,\r\n            handleChange,\r\n            handleLatLonChange,\r\n            datasets,\r\n        } = this.props;\r\n\r\n        const options = searchField && catalog ? this.getSelectOptionsFromCatalogItems(search.search(searchField)) \r\n            : catalog ? this.getSelectOptionsFromCatalogItems(catalog) \r\n            : []\r\n\r\n        let validations;\r\n\r\n        const dataSize = this.estimateDataSize();\r\n\r\n        var catalogMinDate = fields && utcDateStringToLocal(fields.data.Time_Min).setHours(0,0,0,0);\r\n        var catalogMaxDate = fields && utcDateStringToLocal(fields.data.Time_Max).setHours(0,0,0,0);\r\n        var zeroedDT1 = dt1.setHours(0,0,0,0);\r\n        var zeroedDT2 = dt2.setHours(0,0,0,0);\r\n        \r\n        var minDate = fields ? catalogMinDate : '';\r\n\r\n        let minDateMessage = fields && zeroedDT2 < catalogMinDate ? 'End cannot be before dataset start date' : '';\r\n        var maxDateMessage;\r\n        var maxDate;\r\n\r\n        if(!fields){\r\n            maxDate = zeroedDT2;\r\n            maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n        } else {\r\n            \r\n\r\n            if(catalogMaxDate < zeroedDT2){\r\n                maxDate = catalogMaxDate;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after dataset end date' : '';\r\n            } else {\r\n                maxDate = zeroedDT2;\r\n                maxDateMessage = zeroedDT1 > maxDate ? 'Start cannot be after end' : '';\r\n            }\r\n        }\r\n\r\n        if(fields) {\r\n            validations = [\r\n                this.checkStartDepth(),\r\n                this.checkEndDepth(),\r\n                this.checkStartLat(),\r\n                this.checkEndLat(),\r\n                this.checkStartLon(),\r\n                this.checkEndLon(),\r\n                this.checkHeatmap(),\r\n                this.checkContour(),\r\n                this.checkSection(),\r\n                this.checkHistogram(),\r\n                this.checkTimeSeries(),\r\n                this.checkDepthProfile(),\r\n                this.checkSparseMap(),\r\n                this.checkGeneralWarn(dataSize),\r\n                this.checkGeneralPrevent(dataSize),\r\n                this.checkStartDateValid(),\r\n                this.checkEndDateValid()\r\n            ];\r\n        } else validations = Array(16).fill('');\r\n\r\n        const [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            heatmapMessage,\r\n            contourMessage,\r\n            sectionMapMessage,\r\n            histogramMessage,\r\n            timeSeriesMessage,\r\n            depthProfileMessage,\r\n            sparseMapMessage,\r\n            generalWarnMessage,\r\n            generalPreventMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ] = validations;\r\n\r\n        const checkDisableVisualizeList = [\r\n            startDepthMessage,\r\n            endDepthMessage,\r\n            startLatMessage,\r\n            endLatMessage,\r\n            startLonMessage,\r\n            endLonMessage,\r\n            generalPreventMessage,\r\n            minDateMessage,\r\n            maxDateMessage,\r\n            startDateValidMessage,\r\n            endDateValidMessage\r\n        ];\r\n\r\n        let cdvl = checkDisableVisualizeList;\r\n        let errorCount = 0;\r\n        \r\n        if(cdvl[0] || cdvl[1]) errorCount ++;\r\n        if(cdvl[2] || cdvl[3]) errorCount ++;\r\n        if(cdvl[4] || cdvl[5]) errorCount ++;\r\n        if(cdvl[7] || cdvl[9]) errorCount ++;\r\n        if(cdvl[8] || cdvl[10]) errorCount ++;\r\n\r\n        const errorSizeAdjust = errorCount > 0 ? 'drawerPaperError' + errorCount : '';\r\n\r\n        const checkDisableVisualize = () => {\r\n            for(let i = 0; i < checkDisableVisualizeList.length; i++){\r\n                if(checkDisableVisualizeList[i]) return checkDisableVisualizeList[i];\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        const disableVisualizeMessage = checkDisableVisualize();\r\n\r\n        const visualizeButtonTooltip = disableVisualizeMessage ? disableVisualizeMessage : generalWarnMessage ? generalWarnMessage : '';\r\n\r\n        return (\r\n            <div>\r\n                <TableStatsDialog\r\n                    open={this.state.tableStatsDialogIsOpen}\r\n                    onClose={this.handleTableStatsDialogClose}\r\n                    data={fields && fields.data}\r\n                />\r\n\r\n                { showControlPanel ? \r\n\r\n                        <IconButton \r\n                            className={classes.closePanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleCloseControlPanel}>\r\n                            <ChevronLeft />\r\n                        </IconButton>\r\n                :\r\n                    \r\n                        <IconButton \r\n                            className={classes.openPanelChevron} \r\n                            aria-label=\"toggle-panel\" \r\n                            color=\"primary\" \r\n                            onClick={this.handleOpenControlPanel}>\r\n                            <ChevronRight />\r\n                        </IconButton>\r\n                }\r\n\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={showControlPanel}\r\n                    classes={{\r\n                        paper: `${classes.drawerPaper} ${classes[errorSizeAdjust]}`,\r\n                    }}\r\n                    anchor=\"left\"\r\n                >\r\n                    <ButtonGroup>\r\n                        <Tooltip title='Show Globe' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${!showCharts && classes.depressed}`} \r\n                                onClick={handleShowGlobe}\r\n                                color='inherit'\r\n                            >\r\n                                <Language/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        \r\n                        <Tooltip title='Show Charts' placement='top'>\r\n                            <IconButton \r\n                                className={`${classes.groupedButtons} ${showCharts && classes.depressed}`}\r\n                                onClick={this.handleShowChartsAndResize}\r\n                                color='inherit'\r\n                            >\r\n                                <InsertChartOutlined/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </ButtonGroup>\r\n                    \r\n                    <Grid container>\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Clear Charts' placement='bottom'>\r\n                                <IconButton color='inherit' onClick={this.props.clearCharts} className={classes.clearChartsButton}>\r\n                                    <Delete/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <Tooltip title='Reset Parameters' placement='right'>\r\n                                <IconButton color='inherit' onClick={this.handleResetSPParams} className={classes.resetSPParamsButton}>\r\n                                    <Cached/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <form>\r\n                        <Grid container>\r\n                            <Grid item xs={10}>\r\n                                <ConnectedTooltip placement='top' title='Enter one or more search terms.'>\r\n                                    <Select\r\n                                        formatOptionLabel={formatOptionLabel}\r\n                                        handleSetDownloadTarget={this.props.handleSetDownloadTarget}\r\n                                        handleTableStatsDialogOpen={this.handleTableStatsDialogOpen}\r\n                                        isLoading = {catalogRequestState === states.inProgress}\r\n                                        onAutoSuggestChange = {this.onAutoSuggestChange}\r\n                                        datasets = {datasets}\r\n                                        components={{\r\n                                            IndicatorSeparator:'',\r\n                                            DropdownIndicator,\r\n                                            GroupHeading,\r\n                                            Group,\r\n                                            Option,\r\n                                            MenuList\r\n                                        }}\r\n                                        handleDownloadCsvClick = {this.handleDownloadCsvClick}\r\n                                        escapeClearsValue\r\n                                        ref={selectRef}\r\n                                        onInputChange={this.onAutoSuggestChange}\r\n                                        filterOption={null}\r\n                                        className={classes.variableSelect}\r\n                                        isClearable\r\n                                        inputValue={this.state.searchField}\r\n                                        name=\"fields\"\r\n                                        label=\"Variables\"\r\n                                        options={options}\r\n                                        onChange={this.props.updateFields}\r\n                                        value={fields}\r\n                                        placeholder=\"Variable Filter\"\r\n                                        styles={{\r\n                                            menu: provided => ({\r\n                                                ...provided, \r\n                                                zIndex: 1300, \r\n                                                top: '-8px',\r\n                                                left: navDrawerWidth,\r\n                                                width: '980px',\r\n                                                borderRadius: '4px',\r\n                                                boxShadow: '2px 2px 2px 2px #242424',\r\n                                                overflow: 'hidden',\r\n                                                backgroundColor: 'rgba(0,0,0,.5)',\r\n                                                backdropFilter: 'blur(5px)',\r\n                                            }),\r\n\r\n                                            valueContainer: provided => ({\r\n                                                ...provided,\r\n                                                padding: '0 0 0 6px',\r\n                                                fontWeight: 100\r\n                                            }),\r\n\r\n                                            input: provided => ({...provided,\r\n                                                color: 'white',\r\n                                                fontFamily: '\"Lato\", sans-serif'\r\n                                            }),\r\n\r\n                                            control: provided => ({...provided,\r\n                                                backgroundColor: colors.backgroundGray,\r\n                                                border: 'none',\r\n                                                borderBottom: '1px solid #333333',\r\n                                                borderRadius: 0,\r\n                                                '&:hover': { borderColor: 'white' },\r\n                                                '&:focus-within': { borderColor: colors.primary },\r\n                                                height: '56px'\r\n                                            }),\r\n\r\n                                            placeholder: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                fontSize: '14px',\r\n                                                fontWeight: 300\r\n                                            }),\r\n\r\n                                            noOptionsMessage: provided => ({...provided,\r\n                                                fontFamily: '\"Lato\", sans-serif',\r\n                                                color: colors.primary,\r\n                                                backgroundColor: colors.backgroundGray\r\n                                            }),\r\n\r\n                                            option: (provided, { data, isFocused }) => {\r\n                                                return ({...provided,\r\n                                                    fontWeight: 400,\r\n                                                    fontSize: '16px',\r\n                                                    backgroundColor: 'transparent',\r\n                                                    color: isFocused ? colors.primary : 'white',\r\n                                                    '&:hover': { backgroundColor: colors.greenHover},\r\n                                            })},\r\n\r\n                                            singleValue: (provided, state) => ({...provided,\r\n                                                color: 'white',\r\n                                                fontWeight: 400,\r\n                                                zIndex: 1290\r\n                                            })\r\n                                        }}\r\n                                        theme={theme => ({\r\n                                            ...theme,\r\n                                            colors: {\r\n                                            ...theme.colors,\r\n                                            },\r\n                                        })}\r\n                                    />\r\n                                </ConnectedTooltip>\r\n                            </Grid>\r\n                            <Grid item xs={2} className={classes.tableStatsButton}>\r\n                                <IconButton \r\n                                    size='small' \r\n                                    onClick={this.handleTableStatsDialogOpen}                                     \r\n                                    disabled={!fields}\r\n                                >\r\n                                    <LibraryBooks/>\r\n                                </IconButton>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12}>\r\n                                <KeyboardDatePicker\r\n                                    className={classes.datePicker}\r\n                                    placeholder={getDatePlaceholder(dt1)}\r\n                                    id=\"startDate\"\r\n                                    label=\"Start Date\"\r\n                                    name=\"dt1\"\r\n                                    format='yyyy-MM-dd'\r\n                                    maxDate={maxDate}\r\n                                    minDate={null}\r\n                                    maxDateMessage={maxDateMessage}\r\n                                    autoOk\r\n                                    value={dt1}\r\n                                    onChange={this.props.handleStartDateChange}\r\n                                    inputVariant='filled'\r\n                                    variant='inline'\r\n                                    KeyboardButtonProps={{\r\n                                        className: classes.datePickerInputAdornment\r\n                                    }}\r\n                                />\r\n                            </Grid>  \r\n\r\n                            <Grid item xs={12}>\r\n                                <KeyboardDatePicker\r\n                                    className={classes.datePicker}\r\n                                    placeholder={getDatePlaceholder(dt2)}\r\n                                    id=\"endDate\"\r\n                                    label=\"End Date\"\r\n                                    name=\"dt2\"\r\n                                    format='yyyy-MM-dd'\r\n                                    minDate={minDate}\r\n                                    maxDate={null}\r\n                                    minDateMessage={minDateMessage}\r\n                                    autoOk\r\n                                    value={dt2}\r\n                                    onChange={this.props.handleEndDateChange}\r\n                                    inputVariant='filled'\r\n                                    variant='inline'\r\n                                    KeyboardButtonProps={{\r\n                                        className: classes.datePickerInputAdornment\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lat1-input\"\r\n                                    error={Boolean(startLatMessage)}\r\n                                    label={\"Start Lat(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lat1}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startLatMessage}\r\n                                    name='lat1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lat2-input\"\r\n                                    error={Boolean(endLatMessage)}\r\n                                    label={\"End Lat(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lat2}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endLatMessage}\r\n                                    name='lat2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lon1-input\"\r\n                                    error={Boolean(startLonMessage)}\r\n                                    label={\"Start Lon(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lon1}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startLonMessage}\r\n                                    name='lon1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"lon2-input\"\r\n                                    error={Boolean(endLonMessage)}\r\n                                    label={\"End Lon(\\xB0)\"}\r\n                                    className={classes.textField}\r\n                                    value={lon2}\r\n                                    onChange={handleLatLonChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endLonMessage}\r\n                                    name='lon2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"depth1-input\"\r\n                                    error={Boolean(startDepthMessage)}\r\n                                    label=\"Start Depth(m)\"\r\n                                    className={classes.textField}\r\n                                    value={depth1}\r\n                                    onChange={handleChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={startDepthMessage}\r\n                                    name='depth1'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6} className={classes.formGridItem}>\r\n                                <TextField\r\n                                    id=\"depth2-input\"\r\n                                    error={Boolean(endDepthMessage)}\r\n                                    label=\"End Depth(m)\"\r\n                                    className={classes.textField}\r\n                                    value={depth2}\r\n                                    onChange={handleChange}\r\n                                    FormHelperTextProps={{className: classes.helperText}}\r\n                                    helperText={endDepthMessage}\r\n                                    name='depth2'\r\n                                    InputProps={{className:classes.padLeft}}\r\n                                    InputLabelProps={{className:classes.padLeft}}\r\n                                >\r\n                                </TextField>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12}>\r\n                                <FormControl variant='filled' className={classes.vizTypeSelectFormControl} disabled={!fields}>\r\n                                    <InputLabel shrink htmlFor=\"vizSelector\" >Type</InputLabel>\r\n                                    <MUISelect\r\n                                        className={classes.vizTypeSelectFormControl}\r\n                                        style={overrideDisabledStyle}\r\n                                        value={selectedVizType}\r\n                                        variant='filled'\r\n                                        onChange={this.props.handleChange}\r\n                                        inputProps={{\r\n                                            name: 'selectedVizType',\r\n                                            id: 'vizSelector',\r\n                                            variant: 'filled'\r\n                                        }}\r\n                                        MenuProps={{\r\n                                            MenuListProps: {\r\n                                                className: classes.vizTypeMenu\r\n                                            }\r\n                                        }}\r\n                                        >\r\n                                        {!heatmapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.heatmap} title={heatmapMessage}>Heatmap</MenuItem>}\r\n                                        {!contourMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourMap}>Contour Heatmap</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sectionMap}>Section Map</MenuItem>}\r\n                                        {!sectionMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.contourSectionMap}>Contour Section Map</MenuItem>}\r\n                                        {!histogramMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.histogram}>Histogram</MenuItem>}                      \r\n                                        {!timeSeriesMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.timeSeries}>Time Series</MenuItem>}\r\n                                        {!depthProfileMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.depthProfile}>Depth Profile</MenuItem>}\r\n                                        {!sparseMapMessage && <MenuItem className={classes.vizTypeMenuItem} value={vizSubTypes.sparse}>Sparse Map</MenuItem>}\r\n                                    </MUISelect>\r\n                                </FormControl>\r\n                            </Grid>\r\n\r\n                            <Tooltip placement='right' title={visualizeButtonTooltip} className={classes.vizButtonTooltip}>\r\n                                <Grid item xs={12}>\r\n                                    <Button\r\n                                        className={classes.visualizeButton}\r\n                                        variant='contained'\r\n                                        onClick={() => this.props.onVisualize()}\r\n                                        disabled={Boolean(disableVisualizeMessage) || !fields || !selectedVizType}\r\n                                        fullWidth\r\n                                    >\r\n                                        Visualize\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                    </form>                    \r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(VizControlPanel));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, Typography, Table, TableBody, TableCell, TableRow, TableHead } from '@material-ui/core';\r\n\r\nimport { tableStatsRequestSend, csvDownloadRequestSend } from '../../Redux/actions/visualization';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nconst styles = (theme) => ({\r\n    tableFooter: {\r\n        fontSize: '11px',\r\n        margin: '5px 0px 0px 10px'\r\n    },\r\n\r\n    table: {\r\n        marginTop: '9px'\r\n    },\r\n\r\n    dialogPaper: {\r\n        backgroundColor: colors.backgroundGray\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    datasets: state.datasets,\r\n    catalog: state.catalog\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    tableStatsRequestSend,\r\n    csvDownloadRequestSend\r\n}\r\n\r\nclass DownloadConfirmationDialog extends Component {\r\n\r\n    componentDidUpdate = () => {\r\n        const { downloadTarget, datasets, catalog, tableStatsRequestSend } = this.props;\r\n        if(downloadTarget && datasets && !datasets[downloadTarget.dataset].tableStats){\r\n            const firstMember = catalog.find(item => item.Dataset_Name === downloadTarget.dataset);\r\n            tableStatsRequestSend(firstMember.Table_Name, downloadTarget.dataset);\r\n        }\r\n    }\r\n\r\n    handleFullDatasetDownload = (tableName) => {\r\n        let query = `select%20*%20from%20${tableName}`;\r\n        const fileName = this.props.downloadTarget.variable || this.props.downloadTarget.dataset;\r\n        this.props.csvDownloadRequestSend(query, fileName);\r\n    }\r\n\r\n    handleSubsetDownload = (tableName, dt1, dt2, lat1, lat2, lon1, lon2, depth1, depth2) => {\r\n        let query = `select * from ${tableName} where time between '${dt1}' and '${dt2}' and ` +\r\n            `lat between ${lat1} and ${lat2} and ` +\r\n            `lon between ${lon1} and ${lon2}`\r\n        const fileName = this.props.downloadTarget.variable || this.props.downloadTarget.dataset;\r\n        this.props.csvDownloadRequestSend(query, fileName);\r\n    }\r\n\r\n    render() {\r\n        const { classes, datasets, downloadTarget, lat1, lat2, lon1, lon2, dt1, dt2, depth1, depth2, catalog } = this.props;\r\n\r\n        if(!downloadTarget || ! datasets ||  !catalog) return '';\r\n        \r\n        const tableStats = datasets[downloadTarget.dataset].tableStats;\r\n\r\n        if(!tableStats) return '';\r\n\r\n        const sampleMember = catalog.find(item => item.Dataset_Name === downloadTarget.dataset);\r\n        const { Lat_Min, Lat_Max, Lon_Min, Lon_Max, Time_Min, Time_Max, Depth_Min, Depth_Max } = sampleMember;\r\n        const latMin = parseFloat(Lat_Min);\r\n        const latMax = parseFloat(Lat_Max);\r\n        const lonMin = parseFloat(Lon_Min);\r\n        const lonMax = parseFloat(Lon_Max);\r\n        const timeMin = Date.parse(Time_Min);\r\n        const timeMax = Date.parse(Time_Max);\r\n\r\n        const subsetLat1 = lat1 < latMin ? latMin :\r\n            lat1 > latMax ? latMax :\r\n            lat1;\r\n\r\n        const subsetLat2 = lat2 < latMin ? latMin :\r\n        lat2 > latMax ? latMax :\r\n        lat2;\r\n\r\n        const subsetLon1 = lon1 < lonMin ? lonMin :\r\n            lon1 > lonMax ? lonMax :\r\n            lon1;\r\n\r\n        const subsetLon2 = lon2 < lonMin ? lonMin :\r\n            lon2 > lonMax ? lonMax :\r\n            lon2;\r\n\r\n        const subsetTime1 = dt1 < timeMin ? timeMin :\r\n            dt1 > timeMax ? timeMax :\r\n            dt1;\r\n\r\n        const subsetTime2 = dt2 < timeMin ? timeMin :\r\n            dt2 > timeMax ? timeMax:\r\n            dt2;\r\n\r\n        if(Depth_Max){\r\n            var depthMin = parseFloat(Depth_Min);\r\n            var depthMax = parseFloat(Depth_Max);\r\n\r\n            var subsetDepth1 = depth1 < depthMin ? depthMin : \r\n                depth1 > depthMax ? depthMax : \r\n                depth1;\r\n\r\n            var subsetDepth2 = depth2 < depthMin ? depthMin : \r\n                depth2 > depthMax ? depthMax : \r\n                depth2;\r\n        }        \r\n\r\n        const tableName = sampleMember.Table_Name;\r\n        \r\n        const totalRows = tableStats.lat.count;\r\n        const variableColumns = datasets[downloadTarget.dataset].Variables && datasets[downloadTarget.dataset].Variables.split(',').length;\r\n        const depthColumns = tableStats.depth ? 1 : 0;\r\n        const fixedColumns = 3;\r\n\r\n        const totalColumns = variableColumns + depthColumns + fixedColumns;\r\n\r\n        const totalDataPoints = totalRows * totalColumns;\r\n        const fullDataAvailable = totalDataPoints < 20000000;\r\n\r\n        var dateRatio;\r\n\r\n        if(sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology){\r\n            const subsetMonths = new Date(subsetTime2).getMonth() - new Date(subsetTime1).getMonth();\r\n            dateRatio = (subsetMonths + 1) / 12;\r\n        } else {\r\n            var totalDays = (timeMax - timeMin) / 86400000 || 1;\r\n            var subsetDays = (subsetTime2 - subsetTime1) / 86400000 || 1;\r\n            dateRatio = totalDays > subsetDays ? subsetDays / totalDays : 1;\r\n        }\r\n\r\n        const totalLatSize = (latMax - latMin) || 1;\r\n        const subsetLatSize = (subsetLat2 - subsetLat1) || 1;\r\n        const latRatio = totalLatSize > subsetLatSize ? subsetLatSize / totalLatSize : 1;\r\n\r\n        const totalLonSize = (lonMax - lonMin) || 1;\r\n        const subsetLonSize = subsetLon2 > subsetLon1 ? (subsetLon2 - subsetLon1) || 1 : (subsetLon2 + 360 - subsetLon1) || 1;\r\n        const lonRatio = totalLonSize > subsetLonSize ? subsetLonSize / totalLonSize : 1;\r\n\r\n        var depthRatio = 1;\r\n\r\n        if(sampleMember.Depth_Max) {\r\n            if(depthUtils.piscesTable.has(sampleMember.Table_Name)){\r\n                let depthCount = depthUtils.count({data: sampleMember}, subsetDepth1, subsetDepth2);\r\n                depthRatio = depthCount / depthUtils.piscesDepths.length || 1;\r\n            } else if (depthUtils.darwinTable.has(sampleMember.Table_Name)){\r\n                let depthCount = depthUtils.count({data: sampleMember}, subsetDepth1, subsetDepth2);\r\n                depthRatio = depthCount / depthUtils.darwinDepths.length || 1;\r\n            } else {\r\n                var totalDepthSize = depthMax - depthMin || 1;\r\n                var subsetDepthSize = subsetDepth2 - subsetDepth1 || 1;\r\n                depthRatio = subsetDepthSize > totalDepthSize ? 1 : subsetDepthSize / totalDepthSize;\r\n            }\r\n        }\r\n\r\n        const subsetDataPoints = Math.floor(totalDataPoints * dateRatio * latRatio * lonRatio * depthRatio);\r\n\r\n        const subsetAvailable = subsetDataPoints <= 20000000;\r\n\r\n        const timeString1 = new Date(subsetTime1).toISOString().slice(0,10);\r\n        const timeString2 = new Date(subsetTime2).toISOString().slice(0,10);\r\n        const timeStringMin = sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n            'Monthly' : new Date(timeMin).toISOString().slice(0,10);\r\n        const timeStringMax = sampleMember.Temporal_Resolution === temporalResolutions.monthlyClimatology ? \r\n            'Monthly' : new Date(timeMax).toISOString().slice(0,10);\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <Dialog\r\n                    PaperProps={{\r\n                        className:classes.dialogPaper\r\n                    }}\r\n                    open={Boolean(downloadTarget)} \r\n                    onClose={() => this.props.handleSetDownloadTarget(null)} \r\n                    maxWidth={false}\r\n                >\r\n                    <DialogTitle>Downloading {downloadTarget.variable && `${downloadTarget.variable} from `} {downloadTarget.dataset}</DialogTitle>\r\n                    \r\n                    <DialogContent>\r\n                        {fullDataAvailable ? \r\n                            `The full dataset is available for download.` :\r\n                            `The full dataset is too large for download.`\r\n                        }\r\n                    </DialogContent>\r\n                    \r\n                    <DialogContent>\r\n                        <Typography>\r\n                            {subsetAvailable ? \r\n                                'The described subset is available for download' :\r\n                                `The described subset contains approximately ${subsetDataPoints} data points. Maximum download size is 20000000. Please reduce subset size.`\r\n                            }\r\n                        </Typography>\r\n\r\n                        <Table size='small'>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Parameter</TableCell>\r\n                                    <TableCell>Subset Start</TableCell>\r\n                                    <TableCell>Subset End</TableCell>\r\n                                    <TableCell>Dataset Min</TableCell>\r\n                                    <TableCell>Dataset Max</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                <TableRow>\r\n                                    <TableCell>Time</TableCell>\r\n                                    <TableCell>{timeString1}</TableCell>\r\n                                    <TableCell>{timeString2}</TableCell>\r\n                                    <TableCell>{timeStringMin}</TableCell>\r\n                                    <TableCell>{timeStringMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Latitude[{'\\xb0'}]</TableCell>\r\n                                    <TableCell>{subsetLat1}</TableCell>\r\n                                    <TableCell>{subsetLat2}</TableCell>\r\n                                    <TableCell>{latMin}</TableCell>\r\n                                    <TableCell>{latMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Longitude[{'\\xb0'}]</TableCell>\r\n                                    <TableCell>{subsetLon1}</TableCell>\r\n                                    <TableCell>{subsetLon2}</TableCell>\r\n                                    <TableCell>{lonMin}</TableCell>\r\n                                    <TableCell>{lonMax}</TableCell>\r\n                                </TableRow>\r\n\r\n                                <TableRow>\r\n                                    <TableCell>Depth[m]</TableCell>\r\n                                    <TableCell>{isNaN(subsetDepth1) ? 'NA' : subsetDepth1}</TableCell>\r\n                                    <TableCell>{isNaN(subsetDepth2) ? 'NA' : subsetDepth2}</TableCell>\r\n                                    <TableCell>{isNaN(depthMin) ? 'NA' : depthMin}</TableCell>\r\n                                    <TableCell>{isNaN(depthMax) ? 'NA' : depthMax}</TableCell>\r\n                                </TableRow>\r\n                            </TableBody>\r\n                                \r\n                        </Table>\r\n\r\n                        <Typography className={classes.tableFooter}>\r\n                            *Subset start and end values may automatically adjust to fit dataset boundaries.\r\n                        </Typography>\r\n\r\n                    </DialogContent>\r\n\r\n                    <DialogActions>\r\n                        <Button onClick={() => this.props.handleSetDownloadTarget(null)}>\r\n                            Cancel\r\n                        </Button>\r\n\r\n                        {subsetAvailable &&\r\n                            <Button onClick={() => this.handleSubsetDownload(tableName, timeString1, timeString2, subsetLat1, subsetLat2, subsetLon1, subsetLon2, subsetDepth1, subsetDepth2)}>\r\n                                Download Subset\r\n                            </Button>                            \r\n                        }\r\n\r\n                        {fullDataAvailable && \r\n                            <Button onClick={() => this.handleFullDatasetDownload(tableName)}>\r\n                                Download Full Dataset\r\n                            </Button>\r\n                        }\r\n                    </DialogActions>\r\n                </Dialog> \r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DownloadConfirmationDialog));","export default [\r\n    null,\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n]","import months from '../Enums/months';\r\n\r\nexport default (dateString, hasHour, isMonthly) => {\r\n    return isMonthly ? months[parseInt(dateString)] : hasHour ? dateString.slice(0,10) + ' ' + dateString.slice(11,16): dateString.slice(0,10);\r\n}","import colors from '../Enums/colors';\r\n\r\nexport default {\r\n    layout: {\r\n        font: {color: '#ffffff'},\r\n        paper_bgcolor: colors.backgroundGray,\r\n        autosize: true\r\n    },\r\n\r\n    config: {\r\n        displaylogo: false\r\n    },\r\n\r\n    annotations: (distributor, height = 40) => {\r\n        let yshift = ((document.documentElement.clientWidth * (height / 100)) / -2) + 20;\r\n        return (\r\n            [\r\n                {\r\n                    text: `Source: ${distributor.length < 35 ? \r\n                        distributor : \r\n                        distributor.slice(0,32) + '...'} -- Provided by Simons CMAP`,\r\n                    font: {\r\n                        color: 'white',\r\n                        size: 10\r\n                    },\r\n                    xref: 'paper',\r\n                    yref: 'paper',\r\n                    // yshift: height ? 0 - height + 160 : -290,\r\n                    yshift,\r\n                    showarrow: false,\r\n                }\r\n            ]\r\n        )   \r\n    }\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Button from '@material-ui/core/Button';\r\nimport { DateRange, CloudDownload, Palette, SwapVert, Gamepad, LineWeight, } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { ButtonGroup } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    popover: {\r\n        width: '470px',\r\n        height: '120px',\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2.5),\r\n        paddingRight: theme.spacing(2.5)\r\n    },\r\n\r\n    iconButton: {\r\n        boxShadow: '0px 1px 1px 1px #242424',\r\n    },\r\n\r\n    colorForm: {\r\n        width: '100%'\r\n    },\r\n\r\n    lastIcon: {\r\n        borderTopRightRadius: '10%',\r\n        borderBottomRightRadius: '10%'\r\n    },\r\n\r\n    buttonGroup: {\r\n        display: 'block',\r\n        margin: '0px auto 8px auto',\r\n        maxWidth: '700px'\r\n    },\r\n\r\n    depressed: {\r\n        boxShadow: 'inset 1px 1px 5px #262626'\r\n    },\r\n\r\n    colorscaleMenu: {\r\n        maxHeight: '400px'\r\n    },\r\n\r\n    grayBackground: {\r\n        backgroundColor: colors.backgroundGray\r\n    }\r\n})\r\n\r\nconst colorscaleOptions = [\r\n    'Default',\r\n    'Greys', \r\n    'YlGnBu', \r\n    'Greens', \r\n    'YlOrRd',\r\n    'Bluered',\r\n    'RdBu',\r\n    'Reds',\r\n    'Blues',\r\n    'Picnic',\r\n    'Rainbow',\r\n    'Portland',\r\n    'Jet',\r\n    'Hot',\r\n    'Blackbody',\r\n    'Earth',\r\n    'Electric',\r\n    'Viridis',\r\n    'Cividis'];\r\n\r\nfunction usePreviousSize(value) {\r\n    let size = value ? value.size : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = size;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousColor(value) {\r\n    let color = value ? value.color : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = color;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nfunction usePreviousOpacity(value) {\r\n    let opacity = value ? value.opacity : null;\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = opacity;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nconst ChartControlPanel = (props) => {\r\n\r\n    const { \r\n        classes, \r\n        onToggleSplitByDate,\r\n        splitByDate,\r\n        onToggleSplitBySpace,\r\n        splitBySpace,\r\n        orientation, \r\n        downloadCsv, \r\n        handleZValueConfirm,\r\n        zValues,\r\n        markerOptions,\r\n        handleMarkerOptionsConfirm,\r\n    } = props;\r\n\r\n    const [paletteAnchorElement, setPaletteAnchorElement] = useState(null);\r\n\r\n    let handleOpenPalette = (event) => {\r\n        setPaletteAnchorElement(event.currentTarget);\r\n    }\r\n\r\n    // Local version, not from props\r\n    let handlePaletteChoice = (option) => {\r\n        setPaletteAnchorElement(null);\r\n        props.handlePaletteChoice(option);\r\n    }\r\n\r\n    const [zScalePopoverAnchorElement, setZScalePopoverAnchorElement] = React.useState(null);\r\n    const [localZMin, setLocalZMin] = React.useState(zValues && zValues[0]);\r\n    const [localZMax, setLocalZMax] = React.useState(zValues && zValues[1]);\r\n\r\n    const zScalePopoverOpen = Boolean(zScalePopoverAnchorElement);\r\n    const zScalePopoverID = zScalePopoverOpen ? 'zscale-popover' : undefined;\r\n\r\n    const handleZScalePopoverClose = () => {\r\n        setZScalePopoverAnchorElement(null);\r\n    };\r\n    \r\n    const checkLocalZMin = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMin)) return 'Invalid value';\r\n    }\r\n\r\n    const checkLocalZMax = () => {\r\n        if(localZMin > localZMax) return `Min must be higher than max`;\r\n        if(!/^[-+]?[0-9]*\\.?[0-9]+$/.test(localZMax)) return 'Invalid value';\r\n    }\r\n\r\n    const zScaleValidations = [\r\n        checkLocalZMin(),\r\n        checkLocalZMax()\r\n    ];\r\n\r\n    const [\r\n        zMinMessage,\r\n        zMaxMessage\r\n    ] = zScaleValidations;\r\n\r\n    const handleLocalZConfirm = () => {\r\n        handleZValueConfirm([localZMin, localZMax]);\r\n        handleZScalePopoverClose();\r\n    }\r\n\r\n    const [markerOptionsAnchorElement, setMarkerOptionsAnchorElement] = React.useState(null);\r\n    const [localMarkerOpacity, setLocalMarkerOpacity] = React.useState(markerOptions && markerOptions.opacity);\r\n    const [localMarkerColor, setLocalMarkerColor] = React.useState(markerOptions && markerOptions.color);\r\n    const [localMarkerSize, setLocalMarkerSize] = React.useState(markerOptions && markerOptions.size);\r\n\r\n    var previousOpacity = usePreviousOpacity(markerOptions);\r\n    var previousColor = usePreviousColor(markerOptions);\r\n    var previousSize = usePreviousSize(markerOptions);\r\n\r\n    useEffect(() => {\r\n        if(markerOptions){\r\n            if(markerOptions.opacity !== previousOpacity){\r\n                setLocalMarkerOpacity(markerOptions.opacity);\r\n            }\r\n    \r\n            if(markerOptions.color !== previousColor){\r\n                setLocalMarkerColor(markerOptions.color);\r\n            }\r\n    \r\n            if(markerOptions.size !== previousSize){\r\n                setLocalMarkerSize(markerOptions.size);\r\n            }\r\n        }\r\n    })\r\n\r\n    const markerPopoverOpen = Boolean(markerOptionsAnchorElement);\r\n    const markerPopoverID = markerPopoverOpen ? 'marker-popover' : undefined;\r\n\r\n    const handleMarkerOptionsClose = () => {\r\n        setMarkerOptionsAnchorElement(null);\r\n    }\r\n\r\n    const checkLocalMarkerOpacity = () => {\r\n        if(localMarkerOpacity < 0.1 || localMarkerOpacity > 1 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerOpacity)){\r\n            return 'Opacity should be 0.1 to 1'\r\n        }\r\n    }\r\n\r\n    const checkLocalMarkerSize = () => {\r\n        if(localMarkerSize < 1 || localMarkerSize > 18 || !/^[-+]?[0-9]*\\.?[0-9]+$/.test(localMarkerSize)){\r\n            return 'Size should be 1 to 18'\r\n        }\r\n    }\r\n\r\n    const markerOptionsValidations = [\r\n        checkLocalMarkerOpacity(),\r\n        checkLocalMarkerSize()\r\n    ]\r\n\r\n    const [\r\n        localMarkerOpacityMessage,\r\n        localMarkerSizeMessage\r\n    ] = markerOptionsValidations;\r\n\r\n    const handleLocalMarkerOptionsConfirm = () => {\r\n        handleMarkerOptionsConfirm({opacity: localMarkerOpacity, color: localMarkerColor, size: localMarkerSize});\r\n        handleMarkerOptionsClose();\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ButtonGroup className={classes.buttonGroup}>\r\n\r\n                {Boolean(onToggleSplitByDate) && \r\n                    <Tooltip placement='top' title='Split By Date'>\r\n                        <IconButton color='inherit' className={`${classes.iconButton} ${splitByDate && classes.depressed}`} \r\n                            onClick={onToggleSplitByDate}\r\n                        >\r\n                            <DateRange/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(onToggleSplitBySpace) && \r\n                    <Tooltip placement='top' title={orientation === 'zonal' ? 'Split by Latitude' : 'Split by Longitude'}>\r\n                        <IconButton color='inherit' className={`${classes.iconButton} ${splitBySpace && classes.depressed}`} \r\n                            onClick={onToggleSplitBySpace}\r\n                        >\r\n                            <LineWeight/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                <Tooltip placement='top' title='Download CSV'>\r\n                    <IconButton color='inherit' onClick={downloadCsv} className={classes.iconButton} >\r\n                        <CloudDownload/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n\r\n                {Boolean(handleZValueConfirm) &&\r\n                    <Tooltip title='Change Colorscale Range' placement='top'>\r\n                        <IconButton color='inherit' onClick={(event) => setZScalePopoverAnchorElement(event.currentTarget)} className={classes.iconButton}>\r\n                            <SwapVert/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n\r\n                {Boolean(props.handlePaletteChoice) &&\r\n                    <Tooltip title='Change Palette' placement='top'>\r\n                        <IconButton disabled={!Boolean(props.handlePaletteChoice)} color='inherit' onClick={handleOpenPalette} className={classes.iconButton}>\r\n                            <Palette/>\r\n                        </IconButton>                \r\n                    </Tooltip>      \r\n                }\r\n\r\n                {Boolean(props.handleMarkerOptionsConfirm) &&\r\n                    <Tooltip title='Marker Options' placement='top'>\r\n                        <IconButton color='inherit' onClick={(event) => setMarkerOptionsAnchorElement(event.currentTarget)} className={`${classes.iconButton} ${classes.lastIcon}`} >\r\n                            <Gamepad/>\r\n                        </IconButton>                \r\n                    </Tooltip>\r\n                }\r\n                \r\n            </ButtonGroup>\r\n            \r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={paletteAnchorElement}\r\n                keepMounted\r\n                open={Boolean(paletteAnchorElement)}\r\n                onClose={() => setPaletteAnchorElement(null)}\r\n                className={classes.colorscaleMenu}\r\n                MenuListProps= {{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                {colorscaleOptions.map((option, index) => (\r\n                    <MenuItem onClick={() => handlePaletteChoice(option === 'Default' ? 'heatmap' : option)} key={index}>{option}</MenuItem>\r\n                ))}\r\n                \r\n            </Menu>\r\n            \r\n            {/* zscale popover */}\r\n            <Popover\r\n                id={zScalePopoverID}\r\n                open={zScalePopoverOpen}\r\n                anchorEl={zScalePopoverAnchorElement}\r\n                onClose={handleZScalePopoverClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMinMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-min-input' >Min</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-min-input'\r\n                                    value={localZMin}\r\n                                    onChange={(event) => setLocalZMin(event.target.value)}\r\n                                    aria-describedby='local-zmin-error'\r\n                                    labelWidth={36}\r\n                                    name='local-zmin'\r\n                                />\r\n                                <FormHelperText id='local-zmin-error'>{zMinMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='z-max-input' >Max</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='z-max-input'\r\n                                    value={localZMax}\r\n                                    onChange={(event) => setLocalZMax(event.target.value)}\r\n                                    aria-describedby=\"local-zmax-error\"\r\n                                    labelWidth={36}\r\n                                    name='local-zmax'\r\n                                />\r\n                                <FormHelperText id=\"local-zmax-error\">{zMaxMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={7}>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleZScalePopoverClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalZConfirm}\r\n                                disabled={Boolean(zMinMessage || zMaxMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n                \r\n            {/* Marker popover */}\r\n            <Popover\r\n                id={markerPopoverID}\r\n                open={markerPopoverOpen}\r\n                anchorEl={markerOptionsAnchorElement}\r\n                onClose={handleMarkerOptionsClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                PaperProps={{\r\n                    className: classes.grayBackground\r\n                }}\r\n            >\r\n                <div className={classes.popover}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                error={Boolean(localMarkerOpacityMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-opacity' >Opacity</InputLabel>\r\n                                <OutlinedInput\r\n                                    id='local-marker-opacity'\r\n                                    value={localMarkerOpacity}\r\n                                    onChange={(event) => setLocalMarkerOpacity(event.target.value)}\r\n                                    aria-describedby='local-marker-opacity'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-opacity'\r\n                                />\r\n                            <FormHelperText id=\"local-marker-opacity-error\">{localMarkerOpacityMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        \r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                // error={Boolean(zMaxMessage)} \r\n                            >\r\n                                <InputLabel htmlFor='local-marker-size' >Size</InputLabel>\r\n                                <OutlinedInput\r\n                                    error={Boolean(localMarkerSizeMessage)}\r\n                                    id='local-marker-size'\r\n                                    value={localMarkerSize}\r\n                                    onChange={(event) => setLocalMarkerSize(event.target.value)}\r\n                                    aria-describedby=\"local-marker-size\"\r\n                                    labelWidth={36}\r\n                                    name='local-marker-size'\r\n                                />\r\n                                <FormHelperText id=\"local-marker-size-error\">{localMarkerSizeMessage}</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={6}>\r\n                            <FormControl \r\n                                variant='outlined'\r\n                                className={classes.colorForm}\r\n                            >\r\n                                <InputLabel htmlFor='z-min-input'>Color</InputLabel>\r\n                                <OutlinedInput\r\n                                    type='color'\r\n                                    id='marker-color'\r\n                                    value={localMarkerColor}\r\n                                    onChange={(event) => setLocalMarkerColor(event.target.value)}\r\n                                    aria-describedby='local-marker-color'\r\n                                    labelWidth={44}\r\n                                    name='local-marker-color'\r\n                                />\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={1}></Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button onClick={handleMarkerOptionsClose}>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2}>\r\n                            <Button \r\n                                color='primary'\r\n                                onClick={handleLocalMarkerOptionsConfirm}\r\n                                disabled={Boolean(localMarkerOpacityMessage || localMarkerSizeMessage)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        </Grid> \r\n\r\n                        <Grid item xs={1}>\r\n                        </Grid>\r\n\r\n                    </Grid>                    \r\n                </div>\r\n            </Popover>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ChartControlPanel);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui'; \r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage\r\n}\r\n\r\nconst SparseHistogram = (props) => {\r\n\r\n    const { data } = props.chart;\r\n    const { metadata, parameters } = data;\r\n    const downloadCsv = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n\r\n            let csv = data.generateCsv();\r\n            const blob = new Blob([csv], {type: 'text/csv'});\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.setAttribute('hidden', '');\r\n            a.setAttribute('href', url);\r\n            a.setAttribute('download', `${data.parameters.fields}.csv`);\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }, 100)\r\n    }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !data.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n            />\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {\r\n                    x: data.variableValues,\r\n                    name: data.parameters.fields,\r\n                    type: 'histogram',\r\n                    marker: {\r\n                        color: '#00FFFF'\r\n                    }\r\n                }\r\n            ]}\r\n            \r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${parameters.fields} [${metadata.Unit}]`,\r\n                    exponentformat: 'power',\r\n                    color: '#ffffff'\r\n                },\r\n                yaxis:{\r\n                    color: '#ffffff',\r\n                    title: 'Frequency'\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor)             \r\n            }}\r\n            config={{...chartBase.config}}\r\n        />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseHistogram));","export default (infoObject) => {\r\n\r\n    let lonRange = infoObject.lonMax - infoObject.lonMin;\r\n\r\n    let sectionSize;\r\n    if(lonRange < 2){\r\n        sectionSize = (lonRange / 6).toFixed(2);\r\n    } else {\r\n        sectionSize = Math.floor(lonRange / 6);\r\n    }\r\n\r\n    let tickvals = Array.from(Array(5), (e, i) => Math.ceil(infoObject.lonMin + ((i + 1) * sectionSize)));\r\n    let ticktext = tickvals.map(e => e > 180 ? e - 360 : e);\r\n\r\n    return {\r\n        tickmode: 'array',\r\n        tickvals,\r\n        ticktext\r\n    }\r\n}","export default (infoObject) => {    \r\n    const xRange = infoObject.lonMax - infoObject.lonMin;\r\n    const yRange = infoObject.latMax - infoObject.latMin;\r\n    const sizeRatio = xRange / yRange;\r\n\r\n    let height = 40;\r\n    let width = 40;\r\n\r\n    if(isNaN(sizeRatio)){\r\n        height = height / 2;\r\n    } else if (sizeRatio > 1) {\r\n        if(sizeRatio <= 1.5){\r\n            width = width * sizeRatio;\r\n            // height = sizeRatio > 2 ? height / 2 : height / sizeRatio;\r\n        } else {\r\n            width = width * 1.5;\r\n            height = sizeRatio > 3 ? height / 2 : height * (1.5 / sizeRatio);\r\n        }\r\n    } else {\r\n        width = sizeRatio < .5 ? width * .5 : width * sizeRatio;\r\n    }\r\n\r\n    return [height, width];\r\n}","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport getChartDimensions from '../../Utility/getChartDimensions';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport countWebGLContexts from '../../Utility/countWebGLContexts';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui'; \r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\nimport subTypes from '../../Enums/visualizationSubTypes';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst handleContourMap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n    \r\n    // Handle axis labels when crossing 180th meridian\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`; \r\n\r\n        var hovertext = subset.map((value, i) => {\r\n            let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n            if(isNaN(value)) return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n                `<br>` +\r\n                `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0`\r\n\r\n            return `Lat: ${format('.2f')(infoObject.lats[i])}\\xb0` +\r\n            `<br>` +\r\n            `Lon: ${infoObject.lons[i] > 180 ? format('.2f')(infoObject.lons[i] - 360) : format('.2f')(infoObject.lons[i])}\\xb0` + \r\n            '<br>' +\r\n            `${infoObject.parameters.fields}: ${format(formatter)(value)} [${infoObject.metadata.Unit}]`;\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n                margin: '0 auto'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext,\r\n                    \r\n                    name: infoObject.parameters.fields,\r\n                    type: 'contour',\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: infoObject.zMin > 1 && infoObject.zMin < 1000 ? '.2f' : '.2e'\r\n                    },\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    }\r\n                }\r\n            ]}\r\n\r\n            config={{...chartBase.config}}\r\n            \r\n            key={index}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                // autosize: true,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {title: 'Longitude', color: '#ffffff', ...xTicks},\r\n                yaxis: {title: 'Latitude', color: '#ffffff'},\r\n                // annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\n// const handleHistogram = (subsets, infoObject, splitByDate, splitByDepth, palette) => {\r\n\r\n//     const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n//     const dates = Array.from(infoObject.dates);\r\n//     const { parameters, metadata } = infoObject;\r\n\r\n//     return subsets.map((subset, index) => {\r\n\r\n//         const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n//             handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n//         const latTitle = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n//             parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n//         const lonTitle = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n//             parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n//         const depth = !infoObject.hasDepth ? 'Surface' :\r\n//             parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n//             `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n//         return (\r\n//         <Plot\r\n//             style= {{\r\n//                 position: 'relative',\r\n//                 // display:'inline-block',\r\n//                 width: '60vw',\r\n//                 height: '40vw'\r\n//             }}\r\n\r\n//             useResizeHandler={true}\r\n\r\n//             data={[\r\n//                 {\r\n//                     x: subset,\r\n//                     name: infoObject.parameters.fields,\r\n//                     type: 'histogram',\r\n//                     marker: {\r\n//                         color: '#00FFFF'\r\n//                     }\r\n//                 }\r\n//             ]}\r\n            \r\n//             key={index}\r\n//             layout= {{\r\n//                 ...chartBase.layout,\r\n//                 plot_bgcolor: 'transparent',\r\n//                 // autosize: true,\r\n//                 title: {\r\n//                     text: `${parameters.fields} [${metadata.Unit}]` + \r\n//                         `<br>${date}, ` + \r\n//                         `${depth} <br>` + \r\n//                         `Lat: ${latTitle}, ` +\r\n//                         `Lon: ${lonTitle}`,\r\n//                     font: {\r\n//                         size: 13\r\n//                     }\r\n//                 },\r\n//                 xaxis: {\r\n//                     title: `${infoObject.parameters.fields} [${infoObject.metadata.Unit}]`,\r\n//                     exponentformat: 'power',\r\n//                     color: '#ffffff'\r\n//                 },\r\n//                 yaxis:{\r\n//                     color: '#ffffff',\r\n//                     title: 'Frequency'\r\n//                 },\r\n//                 annotations: chartBase.annotations(infoObject.metadata.Distributor)             \r\n//             }}\r\n//             config={{...chartBase.config}}\r\n//         />)\r\n//     })\r\n// }\r\n\r\nconst handleHeatmap = (subsets, infoObject, splitByDate, splitByDepth, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const depths = Array.from(infoObject.depths).map(depth => parseFloat(depth));\r\n    const dates = Array.from(infoObject.dates);\r\n\r\n    let xTicks = infoObject.parameters.lon1 > infoObject.parameters.lon2 ? handleXTicks(infoObject) : {};\r\n\r\n    const [ height, width ] = getChartDimensions(infoObject);\r\n\r\n    return subsets.map((subset, index) => {\r\n\r\n        const date = dates.length <= 1 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            !splitByDate ? `Averaged Values ${handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly)} to ${handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly)}` :  \r\n            splitByDepth ? handleChartDateString(dates[Math.floor(index/depths.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        const depth = !infoObject.hasDepth ? 'Surface' :\r\n            depths.length === 1 ? depths[0] + '[m]':\r\n            !splitByDepth ? `Averaged Values ${parameters.depth1} to ${parameters.depth2}` : \r\n            splitByDate ? depths[index % depths.length].toFixed(2) + '[m]' : depths[index].toFixed(2) + '[m]';\r\n\r\n        const latTitle = parameters.lat1 === parameters.lat2 ? `${parameters.lat1}\\xb0` :\r\n            `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = parameters.lon1 === parameters.lon2 ? `${parameters.lon1}\\xb0` :\r\n            `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`; \r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: `${width}vw`,\r\n                height: `${height}vw`,\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n                    zsmooth: subset.length < 20000 ? 'fast' : 'false',\r\n                    x: infoObject.lons,\r\n                    y: infoObject.lats,\r\n                    z: subset,\r\n                    connectgaps: false,\r\n                    name: infoObject.parameters.fields,\r\n                    type: 'heatmapgl',\r\n                    colorscale: palette,\r\n                    autocolorscale: false,\r\n\r\n                    // hoverinfo: 'text',\r\n                    // hovertext,\r\n\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n                    \r\n                }\r\n            ]}                \r\n            key={index}\r\n\r\n            config={{...chartBase.config}}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                // width: `${width}vw`,\r\n                // height: `${height}vw`,\r\n                // autosize: true,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${depth} <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: 'Longitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Latitude[\\xB0]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n                // annotations: chartBase.annotations(infoObject.metadata.Distributor, height)\r\n            }}   \r\n        />)\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n    iconButtonWrapper: {\r\n        display: 'inline-block'\r\n    },    \r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen\r\n}\r\n\r\nconst SpaceTimeChart = (props) => {\r\n\r\n    const { snackbarOpen } = props;\r\n    const { data, subType } = props.chart;\r\n    const { dates, depths, extent } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitByDepth, setSplitByDepth] = useState(true);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    const subSets = data.generatePlotData(subType, splitByDate, splitByDepth);\r\n    var plots;\r\n    switch(subType){\r\n        case vizSubTypes.contourMap:\r\n            plots = handleContourMap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.heatmap:\r\n            plots = handleHeatmap(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            break;\r\n\r\n        case vizSubTypes.histogram:\r\n            // plots = handleHistogram(subSets, data, splitByDate, splitByDepth, palette, zMin, zMax);\r\n            return <SparseHistogram chart={{data}}/>;\r\n\r\n        default:\r\n            plots = '';\r\n            break;        \r\n\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = depths ? depths.size : 1;\r\n\r\n        if(subType === vizSubTypes.heatmap){\r\n            let availableWGLContexts = 15 - countWebGLContexts(props.charts);\r\n\r\n            if(!splitByDate && chartCount * dates.size > availableWGLContexts){\r\n                snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(subType === vizSubTypes.contourMap){\r\n            if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n            }\r\n        }\r\n\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDate(!splitByDate);\r\n        }, 100)\r\n    }\r\n\r\n    // let chartCount = splitBySpace ? spaces.size : 1;\r\n    //     if(!splitByDate && chartCount * dates.size > 20){\r\n    //         return;\r\n    //     }\r\n    //     else {\r\n    //         props.setLoadingMessage('Re-rendering');\r\n    //         setTimeout(() => {\r\n    //             window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n    //             setSplitByDate(!splitByDate);\r\n    //         }, 100)\r\n    //     }  \r\n    const onToggleSplitByDepth = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setSplitByDepth(!splitByDepth);\r\n        }, 100)\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n\r\n            let csv = data.generateCsv();\r\n            const blob = new Blob([csv], {type: 'text/csv'});\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.setAttribute('hidden', '');\r\n            a.setAttribute('href', url);\r\n            a.setAttribute('download', `${data.parameters.fields}.csv`);\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }, 100)\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ChartControlPanel\r\n                handlePaletteChoice={subType !== subTypes.histogram && handlePaletteChoice}\r\n                onToggleSplitByDepth={depths.size===1 ? null : onToggleSplitByDepth}\r\n                onToggleSplitByDate={dates.size===1 ? null : onToggleSplitByDate}\r\n                splitByDepth={splitByDepth}\r\n                splitByDate={splitByDate}\r\n                handleZValueConfirm={subType !== subTypes.histogram && handleZValueConfirm}\r\n                zValues={subType !== subTypes.histogram && zValues}\r\n                extent={subType !== subTypes.histogram && extent}\r\n                downloadCsv={downloadCsv}\r\n            />\r\n            {plots}     \r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SpaceTimeChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport months from '../../Enums/months';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage\r\n}\r\n\r\nconst TimeSeriesChart = (props) => {\r\n\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, dates, parameters, metadata } = data;\r\n\r\n    const [markerOptions, setMarkerOptions] = React.useState({opacity: .2, color:'#ff1493', size: 12})\r\n\r\n    const downloadCsv = () => {\r\n        setLoadingMessage('Processing Data');\r\n    \r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => setLoadingMessage(''));\r\n    \r\n            let csv = data.generateCsv();\r\n            const blob = new Blob([csv], {type: 'text/csv'});\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.setAttribute('hidden', '');\r\n            a.setAttribute('href', url);\r\n            a.setAttribute('download', `${data.parameters.fields}.csv`);\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }, 100)\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Time: ${dates[i].slice(0,10)}<br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(dates[0], data.hasHour, data.isMonthly) :\r\n        handleChartDateString(dates[0], data.hasHour, data.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], data.hasHour, data.isMonthly);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = parameters.depth2 === 0 ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    const x = data.isMonthly ? dates.map(date => months[parseInt(date)]) : dates;\r\n\r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    // display:'inline-block',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                  {\r\n                    mode: 'lines+markers',\r\n                    x: x,\r\n                    y: variableValues,\r\n                    error_y: {\r\n                        type: 'data',\r\n                        array: stds,\r\n                        opacity: 0.3,\r\n                        color: '#f2f2f2',\r\n                        visible: true\r\n                    },\r\n                    name: parameters.fields,\r\n                    type: 'scatter',\r\n                    line: {color: markerOptions.color},\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                  },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${parameters.fields} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            depth + \r\n                            `<br>Lat: ${lat}, ` +\r\n                            `Lon: ${lon}`,\r\n                        font: {\r\n                            size: 13\r\n                        }\r\n                    },\r\n                  xaxis: {\r\n                      title: data.isMonthy? 'Month' : 'Time',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  yaxis: {\r\n                      title: `${parameters.fields}[${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(TimeSeriesChart));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage\r\n}\r\n\r\nconst DepthProfileChart = (props) => {\r\n\r\n    const { setLoadingMessage } = props;\r\n    const { data } = props.chart;\r\n    const { stds, variableValues, depths, parameters, metadata } = data;\r\n    var infoObject = data;\r\n\r\n    const [markerOptions, setMarkerOptions] = React.useState({opacity: .2, color:'#ff1493', size: 12})\r\n\r\n    let hovertext = variableValues.map((value, i) => {\r\n        return `Depth: ${format('.2f')(depths[i])} [m] <br>${parameters.fields}: ${format('.2e')(value)} \\xb1 ${format('.2e')(stds[i])} [${metadata.Unit}]`;\r\n    })\r\n\r\n    const downloadCsv = () => {\r\n        setLoadingMessage('Processing Data');\r\n    \r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => setLoadingMessage(''));\r\n    \r\n            let csv = data.generateCsv();\r\n            const blob = new Blob([csv], {type: 'text/csv'});\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.setAttribute('hidden', '');\r\n            a.setAttribute('href', url);\r\n            a.setAttribute('download', `${data.parameters.fields}.csv`);\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }, 100)\r\n    }    \r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const date1 = infoObject.isMonthly ? new Date(parameters.dt1).getMonth() + 1 : parameters.dt1;\r\n    const date2 = infoObject.isMonthly ? new Date(parameters.dt2).getMonth() + 1 : parameters.dt2;\r\n\r\n    const date = date1 === date2 ? handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) :\r\n            handleChartDateString(date1, infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(date2, infoObject.hasHour, infoObject.isMonthly);\r\n    \r\n    return (\r\n        <div>\r\n            <ChartControlPanel\r\n                downloadCsv={downloadCsv}\r\n                handleMarkerOptionsConfirm={handleMarkerOptionsConfirm}\r\n                markerOptions={markerOptions}\r\n            />\r\n            <Plot\r\n                style= {{\r\n                    position: 'relative',\r\n                    // display:'inline-block',\r\n                    width: '60vw',\r\n                    height: '40vw'\r\n                }}\r\n\r\n                useResizeHandler={true}\r\n\r\n                data={[\r\n                    {   \r\n                        mode: 'lines+markers',\r\n                        y: depths,\r\n                        x: variableValues,\r\n                        error_x: {\r\n                            type: 'data',\r\n                            array: stds,\r\n                            opacity: 0.3,\r\n                            color: '#f2f2f2',\r\n                            visible: true\r\n                        },\r\n                        name: parameters.fields,\r\n                        type: 'scatter',\r\n\r\n                        marker: {\r\n                            line: {color: markerOptions.color},\r\n                            opacity: markerOptions.opacity,\r\n                            size: markerOptions.size,\r\n                            color: markerOptions.color\r\n                        },\r\n\r\n                        hoverinfo: 'text',\r\n                        hovertext\r\n                    },\r\n                ]}\r\n                config={{...chartBase.config}}\r\n                layout= {{\r\n                    ...chartBase.layout,\r\n                    plot_bgcolor: 'transparent',\r\n                    title: {\r\n                        text: `${parameters.fields} [${metadata.Unit}]` + \r\n                            `<br>${date}, ` + \r\n                            `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                            `Lat: ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0, ` +\r\n                            `Lon: ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`,\r\n                        font: {\r\n                            size: 13\r\n                        }\r\n                    },\r\n                        \r\n                  yaxis: {\r\n                      title: 'Depth[m]',\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power',\r\n                      autorange:'reversed'\r\n                    },\r\n                  xaxis: {\r\n                      title: `${parameters.fields}[${metadata.Unit}]`,\r\n                      color: '#ffffff',\r\n                      exponentformat: 'power'\r\n                    },\r\n                  annotations: chartBase.annotations(metadata.Distributor)\r\n                }}\r\n                \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(DepthProfileChart));","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport { setLoadingMessage, snackbarOpen } from '../../Redux/actions/ui';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport visualizationSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nimport handleXTicks from '../../Utility/handleXTicks';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\nimport chartBase from '../../Utility/chartBase';\r\n\r\nconst handleSectionMap = (subsets, infoObject, splitByDate, splitBySpace, orientation, palette, zMin, zMax) => {\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const dates = Array.from(infoObject.dates);\r\n    const depths = Array.from(infoObject.depths);\r\n    const lats = Array.from(infoObject.lats);\r\n    const lons = Array.from(infoObject.lons);\r\n\r\n    const distinctMeridiansOrParallelsForSplitting = \r\n        orientation === 'zonal' ?\r\n        lats : \r\n        lons;\r\n\r\n    const xAxis = orientation === 'zonal' ?\r\n        'Longitude' :\r\n        'Latitude';\r\n\r\n    let xTicks = parameters.lon1 > parameters.lon2 && orientation === 'zonal' ? handleXTicks(infoObject) : {};\r\n\r\n\r\n    return subsets.map((subset, index) => {\r\n        let z = subset;\r\n        let x = [];\r\n        let y = [];\r\n\r\n        if(orientation === 'zonal'){\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lons[Math.floor(i / depths.length)])\r\n            }\r\n        } else {\r\n            for(let i = 0; i < subset.length; i++){\r\n                x.push(lats[Math.floor(i / depths.length)])\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < subset.length; i++){\r\n            y.push(depths[i % depths.length]);\r\n        }\r\n\r\n        const latTitle = orientation === 'meridional' ? `${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lat1}\\xb0 to ${parameters.lat2}\\xb0`;\r\n\r\n        const lonTitle = orientation === 'zonal' ? `${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0` :\r\n            splitBySpace ? distinctMeridiansOrParallelsForSplitting[index % distinctMeridiansOrParallelsForSplitting.length] + '\\xb0' : \r\n            `Averaged Values ${parameters.lon1}\\xb0 to ${parameters.lon2}\\xb0`;\r\n\r\n        const date = dates.length < 2 ? handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) :\r\n            splitByDate && splitBySpace ? handleChartDateString(dates[Math.floor(index / distinctMeridiansOrParallelsForSplitting.length)], infoObject.hasHour, infoObject.isMonthly) : \r\n            splitByDate ? handleChartDateString(dates[index], infoObject.hasHour, infoObject.isMonthly) :\r\n            'Averaged Values ' + handleChartDateString(dates[0], infoObject.hasHour, infoObject.isMonthly) + ' to ' + handleChartDateString(dates[dates.length - 1], infoObject.hasHour, infoObject.isMonthly);\r\n\r\n        let hovertext = z.map((value, i) => {\r\n            \r\n            if(orientation === 'zonal'){\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lon: ${format('.2f')(x[i] > 180 ? x[i] - 360 : x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            } else {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                if(isNaN(value)) return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                    `<br>` +\r\n                    `Lat: ${format('.2f')(x[i])}\\xb0`\r\n    \r\n                return `Depth: ${format('.2f')(y[i])} [m]` +\r\n                `<br>` +\r\n                `Lat: ${format('.2f')(x[i])}\\xb0` + \r\n                '<br>' +\r\n                `${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`;\r\n            }\r\n        });\r\n\r\n        return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n\r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zMin,\r\n                    zmax: zMax,\r\n\r\n                    connectgaps: false,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    zsmooth: subset.length < 20000 ? 'best' : 'fast',\r\n                    x,\r\n                    y,\r\n                    z,\r\n                    name: parameters.fields,\r\n                    type: infoObject.subType === visualizationSubTypes.contourSectionMap ? 'contour' : 'heatmap',\r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${metadata.Unit}]`\r\n                        },\r\n                        exponentformat:'power'\r\n                    },\r\n\r\n                    contours: {\r\n                        coloring: palette,\r\n                        showlabels: true,\r\n                        labelfont: {\r\n                            family: 'Raleway',\r\n                            size: 12,\r\n                            color: 'white',\r\n                        },\r\n                        labelformat: '.2e'\r\n                    },\r\n\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                }\r\n            ]}                \r\n            key={index}\r\n\r\n            layout= {{\r\n                font: {color: '#ffffff'},\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        `${parameters.depth1}[m] to ${parameters.depth2}[m] <br>` + \r\n                        `Lat: ${latTitle}, ` +\r\n                        `Lon: ${lonTitle}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: `${xAxis}[\\xB0]`,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    ...xTicks\r\n                },\r\n                yaxis: {\r\n                    title: 'Depth[m]', \r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: 'reversed'\r\n                },\r\n                paper_bgcolor: colors.backgroundGray,\r\n                annotations: chartBase.annotations(metadata.Distributor)\r\n\r\n            }}   \r\n        />\r\n        )\r\n    })\r\n}\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n    buttonBlock: {\r\n        display:'block'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage,\r\n    snackbarOpen\r\n}\r\n\r\nconst SectionMapChart = (props) => {\r\n\r\n    const { classes, snackbarOpen } = props;\r\n    const { data } = props.chart;\r\n    const { dates, extent, lats, lons } = data;\r\n\r\n    const [splitByDate, setSplitByDate] = useState(false);\r\n    const [splitBySpace, setSplitBySpace] = useState(false);\r\n    const [orientation, setOrientation] = useState(data.orientation);\r\n    const [palette, setPalette] = useState('heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [zMin, zMax] = zValues;\r\n\r\n    var spaces = orientation === 'zonal' ? lats : lons;\r\n\r\n    const subsets = data.generatePlotData(orientation, splitByDate, splitBySpace);\r\n    var plots = handleSectionMap(subsets, data, splitByDate, splitBySpace, orientation, palette, zMin, zMax);\r\n\r\n    const downloadCsv = () => {\r\n        setLoadingMessage('Processing Data');\r\n    \r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => setLoadingMessage(''));\r\n    \r\n            let csv = data.generateCsv();\r\n            const blob = new Blob([csv], {type: 'text/csv'});\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.setAttribute('hidden', '');\r\n            a.setAttribute('href', url);\r\n            a.setAttribute('download', `${data.parameters.fields}.csv`);\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }, 100)\r\n    }\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const onToggleSplitBySpace = () => {\r\n        let chartCount = splitByDate ? dates.size : 1;\r\n        if(!splitBySpace && chartCount * spaces.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitBySpace(!splitBySpace);\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    const onToggleSplitByDate = () => {\r\n        let chartCount = splitBySpace ? spaces.size : 1;\r\n        if(!splitByDate && chartCount * dates.size > 20){\r\n            snackbarOpen('Unable to split. Rendering limit exceeded.');\r\n            return;\r\n        }\r\n        else {\r\n            props.setLoadingMessage('Re-rendering');\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n                setSplitByDate(!splitByDate);\r\n            }, 100)\r\n        }     \r\n    }\r\n\r\n    const switchOrientation = () => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setOrientation(orientation === 'zonal' ? 'meridional' : 'zonal');\r\n        }, 100)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.buttonBlock}>\r\n            <ChartControlPanel\r\n                orientation={orientation}\r\n                switchOrientation={switchOrientation}\r\n                onToggleSplitBySpace={spaces.size === 1 ? null : onToggleSplitBySpace}\r\n                splitBySpace={splitBySpace}\r\n                onToggleSplitByDate={dates.size === 1 ? null : onToggleSplitByDate}\r\n                splitByDate={splitByDate}\r\n                handlePaletteChoice={handlePaletteChoice}\r\n                handleZValueConfirm={handleZValueConfirm}\r\n                zValues={zValues}\r\n                extent={extent}\r\n                downloadCsv={downloadCsv}\r\n            />\r\n            </div>\r\n            {plots}      \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SectionMapChart));","import React from 'react';\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { format } from 'd3-format';\r\n\r\nconst SparseScatter = (props) => {\r\n    const {\r\n        xValues,\r\n        yValues,\r\n        markerOptions,\r\n        infoObject,\r\n        xTitle,\r\n        yTitle,\r\n        type\r\n    } = props;\r\n\r\n    const { parameters, metadata, hasDepth, variableValues, times, lats, lons, depths } = infoObject;\r\n\r\n    // const title = `${parameters.fields} [${metadata.Unit}]`;\r\n    \r\n    var hovertext;\r\n\r\n    switch(type){\r\n        case 'time':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'latitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lat: ${lats[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'longitude':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Lon: ${lons[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        case 'depth':\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                return `Depth: ${depths[i].toFixed(2)}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n            break;\r\n\r\n        default:\r\n            hovertext = variableValues.map((value, i) => {\r\n                let formatter = value > 1 && value < 1000 ? '.2f' : '.2e';\r\n                let time= times[i].slice(0,20);\r\n                time = time.replace('T', ' ');\r\n                return `Time: ${time}<br>${parameters.fields}: ${format(formatter)(value)} [${metadata.Unit}]`\r\n            })\r\n        }\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n\r\n            useResizeHandler={true}\r\n    \r\n            data={[\r\n                {\r\n                    x: xValues,\r\n                    y: yValues,\r\n                    mode: 'markers',\r\n                    name: parameters.fields,\r\n                    type: variableValues.length > 10000 ? 'scattergl' : 'scatter',\r\n                    // type: 'scatter',\r\n                    marker: {\r\n                        opacity: markerOptions.opacity,\r\n                        size: markerOptions.size,\r\n                        color: markerOptions.color\r\n                    },\r\n                    hoverinfo: 'text',\r\n                    hovertext\r\n                },\r\n            ]}\r\n            config={{...chartBase.config}}\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                plot_bgcolor: 'transparent',\r\n                // width: 800,\r\n                // height: 570,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                xaxis: {\r\n                    title: xTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power'\r\n                },\r\n                yaxis: {\r\n                    title: yTitle,\r\n                    color: '#ffffff',\r\n                    exponentformat: 'power',\r\n                    autorange: type === 'depth' ? 'reversed' : true\r\n                },\r\n                annotations: chartBase.annotations(metadata.Distributor)\r\n            }}            \r\n        />\r\n    )\r\n}\r\n\r\nexport default SparseScatter;","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\nimport ChartControlPanel from './ChartControlPanel';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport chartBase from '../../Utility/chartBase';\r\nimport handleChartDateString from '../../Utility/handleChartDatestring';\r\n\r\nimport { setLoadingMessage } from '../../Redux/actions/ui'; \r\nimport SparseScatter from './SparseScatter';\r\n\r\nconst handleSparseMap = (infoObject, palette, zValues) => {\r\n\r\n    const { parameters, metadata } = infoObject;\r\n\r\n    const date = parameters.dt1 === parameters.dt2 ? handleChartDateString(parameters.dt1) :\r\n        handleChartDateString(parameters.dt1) + ' to ' + handleChartDateString(parameters.dt2);\r\n\r\n    const lat = parameters.lat1 === parameters.lat2 ? parameters.lat1 + '\\xb0' :\r\n        parameters.lat1 + '\\xb0 to ' + parameters.lat2 + '\\xb0';\r\n\r\n    const lon = parameters.lon1 === parameters.lon2 ? parameters.lon1 + '\\xb0' :\r\n        parameters.lon1 + '\\xb0 to ' + parameters.lon2 + '\\xb0';\r\n\r\n    const depth = !infoObject.hasDepth ? 'Surface' :\r\n        parameters.depth1 === parameters.depth2 ? `${parameters.depth1}[m]` :\r\n        `${parameters.depth1}[m] to ${parameters.depth2}[m]`;\r\n\r\n    return (\r\n        <Plot\r\n            style= {{\r\n                position: 'relative',\r\n                // display:'inline-block',\r\n                width: '60vw',\r\n                height: '40vw'\r\n            }}\r\n            \r\n            useResizeHandler={true}\r\n            \r\n            data={[\r\n                {   \r\n                    zauto: false,\r\n                    zmin: zValues[0],\r\n                    zmax: zValues[1],\r\n                    lon: infoObject.lons,\r\n                    lat: infoObject.lats,\r\n                    z: infoObject.variableValues,\r\n                    autocolorscale: false,\r\n                    colorscale: palette,\r\n                    radius: 6,                    \r\n                    name: infoObject.parameters.fields,\r\n                    type: 'densitymapbox',\r\n                    \r\n                    colorbar: {\r\n                        title: {\r\n                            text: `[${infoObject.metadata.Unit}]`\r\n                        },\r\n                        exponentformat: 'power'\r\n                    },\r\n                }\r\n            ]}\r\n\r\n            layout= {{\r\n                ...chartBase.layout,\r\n                title: {\r\n                    text: `${parameters.fields} [${metadata.Unit}]` + \r\n                        `<br>${date}, ` + \r\n                        depth + \r\n                        `<br>Lat: ${lat}, ` +\r\n                        `Lon: ${lon}`,\r\n                    font: {\r\n                        size: 13\r\n                    }\r\n                },\r\n                mapbox: {\r\n                    style: \"white-bg\",\r\n                    layers: [\r\n                        {\r\n                            sourcetype: \"raster\",\r\n                            source: [\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"],\r\n                            below: \"traces\"\r\n                        }\r\n                    ],\r\n                    center: infoObject.center,\r\n                    zoom: infoObject.zoom\r\n                },\r\n\r\n                annotations: chartBase.annotations(infoObject.metadata.Distributor)\r\n            }}\r\n            \r\n            config={{\r\n                ...chartBase.config,\r\n                mapboxAccessToken:\r\n                  \"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w\",\r\n                \r\n              }}\r\n        />)\r\n}\r\n\r\n\r\nconst styles = theme => ({\r\n    chartWrapper: {\r\n        display: 'inline-block',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\r\n        margin: '20px',\r\n        color: 'white'\r\n    },\r\n\r\n    buttonBlock: {\r\n        display:'block'\r\n    },\r\n\r\n    tabs: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    tab: {\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        fontSize: '15px',\r\n        textTransform: 'none'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setLoadingMessage\r\n}\r\n\r\nfunction tabProps(index) {\r\n    return {\r\n      id: `sparse-tab-${index}`,\r\n      'aria-controls': `sparse-tab-${index}`,\r\n    };\r\n  }\r\n\r\nconst SparseTabPanel = (props) => {\r\n    const { children, selectedTab, index, controlPanelProps, } = props;\r\n\r\n    return (\r\n        <div hidden={selectedTab !== index}>\r\n            <ChartControlPanel\r\n                // handlePaletteChoice={handlePaletteChoice}\r\n                // handleZValueConfirm={handleZValueConfirm}\r\n                // zValues={zValues}\r\n                // extent={data.extent}\r\n                // downloadCsv={downloadCsv}\r\n                {...controlPanelProps}\r\n            />\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst SparseMap = (props) => {\r\n\r\n    const { classes } = props;\r\n\r\n    const { data } = props.chart;\r\n\r\n    const [palette, setPalette] = useState('Heatmap');\r\n    const [zValues, setZValues] = useState([data.zMin, data.zMax]);\r\n    const [markerOptions, setMarkerOptions] = useState({opacity: .7, color:'#ff1493', size: 12});\r\n    const [tab, setTab] = useState(0);\r\n\r\n    const plot = handleSparseMap(data, palette, zValues)\r\n\r\n    const handlePaletteChoice = (option) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setPalette(option);\r\n        }, 100)\r\n    }\r\n\r\n    const handleZValueConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setZValues(values);\r\n        }, 100)\r\n    }\r\n\r\n    const handleTabChange = (event, newValue) => {\r\n        setTab(newValue)\r\n    }\r\n\r\n    const downloadCsv = () => {\r\n        props.setLoadingMessage('Processing Data');\r\n\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n\r\n            let csv = data.generateCsv();\r\n            const blob = new Blob([csv], {type: 'text/csv'});\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.setAttribute('hidden', '');\r\n            a.setAttribute('href', url);\r\n            a.setAttribute('download', `${data.parameters.fields}.csv`);\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }, 100)\r\n    }\r\n\r\n    const handleMarkerOptionsConfirm = (values) => {\r\n        props.setLoadingMessage('Re-rendering');\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => props.setLoadingMessage(''));\r\n            setMarkerOptions(values);\r\n        }, 100)\r\n    }\r\n\r\n    const forceResize = () => {\r\n        setTimeout(() => window.dispatchEvent(new Event('resize')), 30);        \r\n    }\r\n\r\n    const controlPanelProps = {\r\n        map: {\r\n            palette,\r\n            handlePaletteChoice,\r\n            zValues,\r\n            handleZValueConfirm,\r\n            downloadCsv\r\n        },\r\n\r\n        scatter: {\r\n            downloadCsv,\r\n            markerOptions,\r\n            setMarkerOptions,\r\n            handleMarkerOptionsConfirm\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Tabs \r\n                value={tab} \r\n                onChange={handleTabChange} \r\n                aria-label=\"Sparse tabs\" \r\n                centered\r\n                indicatorColor='primary'\r\n                className={classes.tabs}\r\n            >\r\n                <Tab label=\"Map\" {...tabProps(0)} className={classes.tab} onClick={forceResize}/>\r\n                <Tab label=\"By Time\" {...tabProps(1)} className={classes.tab}/>\r\n                <Tab label=\"By Lat\" {...tabProps(2)} className={classes.tab}/>\r\n                <Tab label=\"By Lon\" {...tabProps(3)} className={classes.tab}/>\r\n                {data.hasDepth && <Tab label=\"By Depth\" {...tabProps(4)} className={classes.tab}/>}\r\n            </Tabs>\r\n            <SparseTabPanel selectedTab={tab} index={0} controlPanelProps={controlPanelProps.map}>\r\n                {tab === 0 && plot}\r\n            </SparseTabPanel>\r\n            \r\n            <SparseTabPanel selectedTab={tab} index={1} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 1 &&\r\n                    <SparseScatter\r\n                        xValues={data.times}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Time'\r\n                        yTitle={`${data.parameters.fields}[${data.metadata.Unit}]`}\r\n                        type='time'\r\n                    />\r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={2} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 2 &&\r\n                    <SparseScatter\r\n                        xValues={data.lats}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Latitude'\r\n                        yTitle={data.parameters.fields}\r\n                        type='latitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            <SparseTabPanel selectedTab={tab} index={3} controlPanelProps={controlPanelProps.scatter}>\r\n                {tab === 3 && \r\n                    <SparseScatter\r\n                        xValues={data.lons}\r\n                        yValues={data.variableValues}\r\n                        markerOptions={markerOptions}\r\n                        infoObject={data}\r\n                        xTitle='Longitude'\r\n                        yTitle={data.parameters.fields}\r\n                        type='longitude'\r\n                    />                \r\n                }\r\n            </SparseTabPanel>\r\n\r\n            {data.hasDepth &&\r\n                <SparseTabPanel selectedTab={tab} index={4} controlPanelProps={controlPanelProps.scatter}>\r\n                    {tab === 4 &&\r\n                        <SparseScatter\r\n                            xValues={data.variableValues}\r\n                            yValues={data.depths}\r\n                            markerOptions={markerOptions}\r\n                            infoObject={data}\r\n                            xTitle={data.parameters.fields}\r\n                            yTitle='Depth'\r\n                            type='depth'\r\n                        />                    \r\n                    }\r\n                </SparseTabPanel>            \r\n            }\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(SparseMap));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n// import Plot from 'react-plotly.js';\r\n\r\nimport { IconButton, Paper } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\n\r\nimport colors from '../../Enums/colors';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\n\r\nimport SpaceTimeChart from './SpaceTimeChart';\r\nimport TimeSeriesChart from './TimeSeriesChart';\r\nimport DepthProfileChart from './DepthProfileChart';\r\nimport SectionMapChart from './SectionMapChart';\r\nimport SparseMap from './SparseMap';\r\nimport SparseHistogram from './SparseHistogram';\r\n\r\nimport spatialResolutions from '../../Enums/spatialResolutions';\r\n\r\nimport { deleteChart } from '../../Redux/actions/visualization';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    charts: state.charts\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  deleteChart\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  chartPaper: {\r\n    backgroundColor: colors.backgroundGray,\r\n    marginTop: '5vh',\r\n    marginBottom: '2vh',\r\n    padding: theme.spacing(1),\r\n    boxShadow: '2px 2px 2px 2px #242424',\r\n  }\r\n})\r\n\r\n// const SamplePlot = () => {\r\n//   let x = [0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4];\r\n//   let y = [0,1,2,5,9,0,1,2,5,9,0,1,2,5,9,0,1,2,5,9,0,1,2,5,9,];\r\n//   let z = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,1,2,3,4,5,6,7,8,9];\r\n  \r\n//   return (\r\n\r\n//       <Plot\r\n//       useResizeHandler={true}\r\n//       style= {{\r\n//           position: 'relative',\r\n//           display:'inline-block',\r\n//           marginTop: '30px',\r\n//           width: '66vw',\r\n//           height: '44vw'\r\n//       }}\r\n      \r\n//       data={[\r\n//           {   \r\n//               x,\r\n//               y,\r\n//               z,\r\n//               connectgaps: false,\r\n//               zsmooth: 'best',\r\n              \r\n//               name: 'Test',\r\n//               type: 'heatmap',\r\n//               contours: {\r\n//                   showlabels: true,\r\n//                   labelfont: {\r\n//                       family: 'Raleway',\r\n//                       size: 12,\r\n//                       color: 'white',\r\n//                   },\r\n//                   labelformat: '.2e'\r\n//               },\r\n//               colorbar: {\r\n//                   title: {\r\n//                       text: `test`\r\n//                   },\r\n//                   exponentformat: 'power'\r\n//               }\r\n//           }\r\n//       ]}\r\n      \r\n//       layout= {{\r\n//         autosize: true,\r\n//           font: {color: '#ffffff'},\r\n//           margin: {\r\n//             t: 50\r\n//           },\r\n//           title: {\r\n//               text: `A sample chart title`,\r\n//               font: {\r\n//                 size: 16\r\n//               }\r\n//           },\r\n//           paper_bgcolor: colors.backgroundGray,\r\n//           xaxis: {title: 'Longitude', color: '#ffffff'},\r\n//           yaxis: {title: 'Latitude', color: '#ffffff'},\r\n//           annotations: [\r\n//               {\r\n//                   text: `Brought to you by chef boyardee`,\r\n//                     font: {\r\n//                         color: 'white',\r\n//                         size: 10\r\n//                     },\r\n//                   yref: 'paper',\r\n//                   y: -.24,\r\n//                   showarrow: false,\r\n//                   xref: 'paper',\r\n//                   x: .5\r\n//                   }\r\n//               ]\r\n              \r\n//           }}   \r\n//           />\r\n//           )\r\n// }\r\n\r\nconst closeChartStyles = {\r\n    closeChartIcon: {\r\n      float: 'right',\r\n      marginTop: '-12px',\r\n      marginRight: '-8px'\r\n    }\r\n}\r\n\r\nconst _CloseChartIcon = (props) => {\r\n  const { classes } = props;\r\n  return (\r\n    <React.Fragment>\r\n      <IconButton className={classes.closeChartIcon} color=\"inherit\" onClick={() => props.handleDeleteChart(props.chartIndex)} disableFocusRipple disableRipple>\r\n        <Close/>\r\n      </IconButton>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst CloseChartIcon = withStyles(closeChartStyles)(_CloseChartIcon);\r\n\r\nclass Charts extends Component {\r\n\r\n  handleDeleteChart = (chartIndex) => {\r\n    this.props.deleteChart(chartIndex);\r\n  }\r\n\r\n    render(){\r\n        const { classes, charts } = this.props;\r\n        return (\r\n            <React.Fragment>\r\n              {/* <Paper elevation={12} className={classes.chartPaper}>\r\n              <SamplePlot/> \r\n              </Paper> */}\r\n                {charts.map((chart, index) => {\r\n                    switch(chart.data.parameters.spName){\r\n\r\n                        case storedProcedures.spaceTime:\r\n                          if(chart.subType === vizSubTypes.sparse) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseMap chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          } else if(chart.data.metadata.Spatial_Resolution === spatialResolutions.irregular) {\r\n                            return (\r\n                              <div key={chart.id}>\r\n                                <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                  <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                  <SparseHistogram chart={chart}/>\r\n                                </Paper>\r\n                              </div>\r\n                            )\r\n                          }\r\n                          else return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SpaceTimeChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.timeSeries:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <TimeSeriesChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.depthProfile:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <DepthProfileChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n\r\n                        case storedProcedures.sectionMap:\r\n                          return (\r\n                            <div key={chart.id}>\r\n                              <Paper elevation={12} className={classes.chartPaper} key={chart.id}>\r\n                                <CloseChartIcon chartIndex={index} handleDeleteChart={this.handleDeleteChart}/>\r\n                                <SectionMapChart chart={chart}/>\r\n                              </Paper>\r\n                            </div>\r\n                          )\r\n                        \r\n                        default:\r\n                          return '';\r\n                  }\r\n                })}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Charts));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport * as JsSearch from 'js-search';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport { cruiseListRequestSend, cruiseTrajectoryRequestSend, cruiseTrajectoryClear } from '../../Redux/actions/visualization';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    cruiseList: state.cruiseList,\r\n    getCruiseListState: state.getCruiseListState\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    cruiseListRequestSend,\r\n    cruiseTrajectoryRequestSend,\r\n    cruiseTrajectoryClear\r\n}\r\n\r\nconst esriFonts = '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif';\r\nconst esriFontColor = 'white';\r\n\r\nconst styles = theme => ({\r\n    outerDiv: {\r\n        padding:'12px',\r\n        maxWidth: '260px',\r\n        backgroundColor: 'transparent',\r\n        color: esriFontColor,\r\n        borderRadius: '4px',\r\n        boxShadow: '2px',\r\n        position: 'relative',\r\n        backdropFilter: 'blur(2px)',\r\n        transform: 'translateY(35px)'\r\n    },\r\n\r\n    cruiseSelect: {\r\n        width: '260px',\r\n        borderRadius: '4px',\r\n    },\r\n\r\n    cruiseInfo: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        margin: '12px auto 0 auto',\r\n    },\r\n\r\n    cruiseInfoCell: {\r\n        color: esriFontColor,\r\n        fontFamily: esriFonts,\r\n        borderStyle: 'none',\r\n    },\r\n})\r\n\r\n// Replace react-select selected option\r\nconst SingleValue = (props) => {\r\n    return (\r\n        <components.SingleValue {...props} className={props.className}/>\r\n    )\r\n}\r\n\r\n// Replace react-select option\r\nconst Option = (props) => {\r\n    return (\r\n      <components.Option \r\n        {...props} \r\n        innerProps={{\r\n            ...props.innerProps, \r\n            // Prevent focus / scroll events when mousing over options\r\n            onMouseMove: (e) => e.preventDefault(), \r\n            onMouseOver: (e) => e.preventDefault()\r\n        }}>\r\n    </components.Option>\r\n    )\r\n}\r\n\r\nconst cruiseSort =  (a,b) => a.Name < b.Name ? -1 : 1;\r\n\r\nclass CruiseSelector extends Component {\r\n    \r\n    constructor(props){\r\n        super(props);\r\n\r\n        var search = new JsSearch.Search('ID');\r\n        search.searchIndex = new JsSearch.UnorderedSearchIndex();\r\n        search.addIndex('Nickname');\r\n        search.addIndex('Name');\r\n        search.addIndex('Chief_Name');\r\n        search.addIndex('Keywords');\r\n        try{\r\n            if(props.cruiseList && props.cruiseList.length) search.addDocuments(props.cruiseList);\r\n        } catch(e) {\r\n            console.log(e);\r\n            console.log(props.cruiseList);\r\n        }\r\n\r\n        this.state = {\r\n            search,\r\n            searchField: '',\r\n            selectedCruise: null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(!this.props.cruiseList || !this.props.cruiseList.length) this.props.cruiseListRequestSend();\r\n    }\r\n\r\n    getSelectOptionsFromCruiseList = (list) => {\r\n        return list.map(item => ({\r\n            value: item.Name,\r\n            label: item.Name,\r\n            data: item\r\n        })) || []\r\n    }\r\n\r\n    handleCruiseSelect = (selection) => {\r\n        if(selection && selection.data){\r\n            const id = selection.data.ID;\r\n            this.props.cruiseTrajectoryRequestSend(id);\r\n        } else {this.props.cruiseTrajectoryClear()}\r\n\r\n        this.setState({...this.state, selectedCruise: selection});\r\n        this.props.updateParametersFromCruiseBoundary(selection);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(!(prevProps.cruiseList && prevProps.cruiseList.length) && (this.props.cruiseList && this.props.cruiseList.length)){\r\n            this.state.search.addDocuments(this.props.cruiseList);\r\n            this.setState({search: this.state.search})\r\n        }\r\n    }\r\n\r\n    onAutoSuggestChange = (searchString, action) => {\r\n        if(action.action === 'input-change') this.setState({...this.state, searchField: searchString});\r\n        if(action.action ==='set-value' || action.action === 'menu-close') this.setState({...this.state, searchField: ''});\r\n    }\r\n\r\n    render(){\r\n\r\n        const { search, searchField, selectedCruise } = this.state;        \r\n        const { classes, cruiseList} = this.props;\r\n        \r\n        const options = searchField && cruiseList ? this.getSelectOptionsFromCruiseList(search.search(searchField).sort(cruiseSort)) \r\n            : cruiseList ? this.getSelectOptionsFromCruiseList(cruiseList) \r\n            : []\r\n\r\n        return (\r\n            <div id='cruise-selector' className={classes.outerDiv}>\r\n                <div className={classes.blurEffectDiv}></div>\r\n                <Select\r\n                    isLoading={this.props.getCruiseListState === states.inProgress}\r\n                    components={{\r\n                        IndicatorSeparator:'',\r\n                        Option,\r\n                        SingleValue,\r\n                    }}\r\n                    isClearable\r\n                    onInputChange={this.onAutoSuggestChange}\r\n                    filterOption={null}\r\n                    className={classes.cruiseSelect}\r\n                    escapeClearsValue\r\n                    label=\"Cruise\"\r\n                    options={options}\r\n                    onChange={this.handleCruiseSelect}\r\n                    value={this.state.selectedCruise}\r\n                    placeholder=\"Search Cruises\"\r\n                    styles={{\r\n                        menu: provided => ({ ...provided, zIndex: 9999 }),\r\n\r\n                        menuList: provided => ({...provided, backgroundColor: colors.backgroundGray}),\r\n\r\n                        input: provided => ({...provided,\r\n                            color: 'inherit',\r\n                            fontFamily: esriFonts\r\n                        }),\r\n\r\n                        control: provided => ({...provided,\r\n                            backgroundColor: colors.backgroundGray,\r\n                            border: 'none',\r\n                            boxShadow: '1px 1px 1px 1px #242424',\r\n                            color: esriFontColor,\r\n                            borderRadius: 4,\r\n                            '&:hover': { \r\n                                border: `1px solid white`,\r\n                            },\r\n                            '&:focus-within': {\r\n                                borderColor: colors.primary\r\n                            }\r\n                        }),\r\n\r\n                        placeholder: provided => ({...provided,\r\n                            fontFamily: esriFonts,\r\n                            color: colors.primary,\r\n                            fontSize: '14px'\r\n                        }),\r\n\r\n                        noOptionsMessage: provided => ({...provided,\r\n                            fontFamily: esriFonts,\r\n                            color: esriFontColor,\r\n                            backgroundColor: colors.backgroundGray\r\n                        }),\r\n\r\n                        option: (provided, state) => ({...provided,\r\n                            backgroundColor: colors.backgroundGray,\r\n                            color: state.isFocused ? colors.primary : 'white',\r\n                            '&:hover': { backgroundColor: colors.greenHover}\r\n                        }),\r\n\r\n                        singleValue: (provided, state) => ({...provided,\r\n                            fontFamily: esriFonts,\r\n                            color: 'inherit',\r\n                            paddingRight: '20px',\r\n                        })\r\n                    }}\r\n                    theme={theme => ({\r\n                        ...theme,\r\n                        colors: {\r\n                            ...theme.colors,\r\n                            // Background color of hovered options\r\n                            primary25: '#e0e0e0',\r\n                            primary: '#212121',\r\n                        },\r\n                    })}\r\n                />\r\n                {selectedCruise &&\r\n                    <Table size='small' className={classes.cruiseInfo}>\r\n                        <TableBody>\r\n                            <TableRow>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    Cruise:\r\n                                </TableCell>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    {selectedCruise.data.Name}\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    Nickname:\r\n                                </TableCell>\r\n                                <TableCell className={classes.cruiseInfoCell}>\r\n                                    {selectedCruise.data.Nickname}\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            {\r\n                                selectedCruise.data.Start_Time &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Start Date:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Start_Time.slice(0,10)}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.End_Time &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        End Date:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.End_Time.slice(0,10)}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.Chief_Name &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Chief Scientist:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Chief_Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n\r\n                            {\r\n                                selectedCruise.data.Ship_Name &&\r\n                                <TableRow>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        Ship:\r\n                                    </TableCell>\r\n                                    <TableCell className={classes.cruiseInfoCell}>\r\n                                        {selectedCruise.data.Ship_Name}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            }\r\n                        </TableBody>\r\n                    </Table>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(CruiseSelector));","import React, { Component } from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Scene } from '@esri/react-arcgis';\r\n\r\nimport CruiseSelector from './CruiseSelector';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { throttle } from 'throttle-debounce';\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        margin: '0 auto 0 auto',\r\n        width: '100vw',\r\n        height: '100vh',\r\n    }\r\n})\r\n\r\nconst drawButtonStyles = (theme) => ({\r\n    outerDiv: {\r\n        // padding:'12px 0 12px 0',\r\n        backgroundColor: 'transparent',\r\n        // width: '180px',\r\n        borderRadius: '4px',\r\n        marginRight: '20px'\r\n    },\r\n\r\n    drawButton: {\r\n        // border: '1px solid #333333',\r\n        border: `1px solid #333333`,\r\n        borderRadius: '4px',\r\n        color: colors.primary,\r\n        cursor: 'pointer',\r\n        padding: '6px',\r\n        width: '160px',\r\n        fontSize:'14px',\r\n        backgroundColor: colors.backgroundGray,\r\n        boxShadow: '1px 1px 1px 1px #242424',\r\n        // backgroundColor: 'rgba(255, 128, 0, .8)',\r\n        // backgroundColor: 'transparent',\r\n        fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n        '&:hover': { \r\n            borderColor: 'white'\r\n        },\r\n    },\r\n\r\n    helpText: {\r\n        marginTop: 0,\r\n        color: 'white',\r\n        fontFamily: '\"Avenir Next W00\",\"Helvetica Neue\",Helvetica,Arial,sans-serif'\r\n    },\r\n\r\n    cancelButton: {\r\n        display: 'none',\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst DrawButtonRaw = (props) => {\r\n    const { classes, showHelp } = props;\r\n\r\n    return (\r\n        <div className={classes.outerDiv} id='draw-region-div'>\r\n            {showHelp && <p className={classes.helpText}>Click once to draw <br/>and again to finish</p>}\r\n            <button id='draw-button' className={classes.drawButton}>\r\n                Select Region\r\n            </button>\r\n            <button id='cancel-button' className={`${classes.drawButton} ${classes.cancelButton}`}>\r\n                Cancel\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst DrawButton = withStyles(drawButtonStyles)(DrawButtonRaw);\r\n\r\nconst polygonSymbol = {\r\n    type: \"polygon-3d\",\r\n    symbolLayers: [\r\n        {\r\n            type: \"fill\",\r\n            material: {\r\n            color: [0, 255, 255, .3]\r\n            },\r\n            outline: {\r\n                color: [0, 255, 255, 1],\r\n                size: '2px'\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst polylineSymbol = {\r\n    type: \"line-3d\",\r\n        symbolLayers: [\r\n            {\r\n                type: \"line\",\r\n                size: \"3px\",\r\n                material: {\r\n                    color: {\r\n                        r: 0,\r\n                        g: 255,\r\n                        b: 255,\r\n                        a: 0\r\n                    }\r\n                },\r\n            }\r\n        ]\r\n}\r\n\r\nclass UiComponents extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.sketchModel = new props.esriModules.SketchViewModel({\r\n            layer: props.regionLayer,\r\n            view: props.view,\r\n            polygonSymbol,\r\n            polylineSymbol,\r\n            defaultUpdateOptions: {\r\n                toggleToolOnClick: false,\r\n                tool: \"transform\"\r\n            }\r\n        })\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const { view, esriModules, regionLayer, setShowHelp } = this.props;\r\n        var { sketchModel } = this;\r\n\r\n        var drawButton = document.getElementById('draw-button');\r\n        var cancelButton = document.getElementById('cancel-button');\r\n\r\n        const throttledUpdate = throttle(75, (event) => {\r\n            if(event.state === 'active'){\r\n                this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n            }\r\n        })\r\n\r\n        sketchModel.on(\"create\", (event) => {\r\n            if(event.state === 'active' && event.toolEventInfo && event.toolEventInfo.type === 'vertex-add'){\r\n                sketchModel.complete();\r\n            }\r\n\r\n            if(event.graphic && event.graphic.visible) {\r\n                event.graphic.visible = false;\r\n            }\r\n            if(event.state === 'cancel'){\r\n                setShowHelp(false);\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n\r\n            if(event.state === \"complete\") {\r\n                setShowHelp(false);\r\n                this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphic.geometry.extent));\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n        });    \r\n\r\n        sketchModel.on('create', throttledUpdate)\r\n\r\n        sketchModel.on('update', (event) => {\r\n            if(event.toolEventInfo && event.toolEventInfo.type === 'move-stop'){\r\n                if(event.state === 'cancel') return;\r\n                // this.props.updateDomainFromGraphicExtent(esriModules.Utils.webMercatorToGeographic(event.graphics[0].geometry.extent));\r\n                this.props.updateDomainFromGraphicExtent(event.graphics[0].geometry.extent);\r\n                drawButton.style.display = 'inline-block';\r\n                cancelButton.style.display = 'none';\r\n            }\r\n        });   \r\n        \r\n        drawButton.addEventListener(\"click\", (event) => {\r\n                regionLayer.removeAll();\r\n                setShowHelp(true);\r\n                sketchModel.create('polyline', {\r\n                    mode:'click'            \r\n                });\r\n                drawButton.style.display = 'none';\r\n                cancelButton.style.display = 'inline-block';\r\n        });\r\n\r\n        cancelButton.addEventListener('click', (event) => {\r\n            sketchModel.cancel();\r\n            setShowHelp(false);\r\n            drawButton.style.display = 'inline-block';\r\n            cancelButton.style.display = 'none';\r\n        })\r\n\r\n        view.ui.add('draw-region-div', 'bottom-right');\r\n        view.ui.add('cruise-selector', 'top-right');\r\n\r\n        view.ui.remove('zoom');\r\n        view.ui.remove('navigation-toggle');\r\n        view.ui.remove('compass');\r\n        view.ui.remove('attribution');\r\n\r\n        return null;\r\n    }\r\n}\r\n\r\nconst TrajectoryController = React.memo((props) => {\r\n    const { cruiseTrajectory, trajectoryLayer, esriModules } = props;\r\n    \r\n    if(cruiseTrajectory){\r\n        const { lons, lats } = cruiseTrajectory;\r\n\r\n        let midIndex = Math.floor(lons.length / 2);\r\n\r\n        trajectoryLayer.removeAll();\r\n\r\n        var polyLines = [[]];\r\n        var lineIndex = 0;\r\n\r\n        let lonStart = lons[0];\r\n        let latStart = lats[0];\r\n        let maxDistance = 0;\r\n        // var lonMin = lons[0];\r\n        // var lonMax = lons[0];\r\n        // var latMin = lats[0];\r\n        // var latMax = lats[0];\r\n\r\n        // Create a new path array each time 180 lon is crossed\r\n        lons.forEach((lon, i) => {\r\n            let lat = lats[i];\r\n\r\n            let latDistance = Math.abs(lat - latStart);\r\n            let _lonDistance = Math.abs(lon - lonStart);\r\n            let lonDistance = _lonDistance > 180? 360 - _lonDistance : _lonDistance;\r\n\r\n            let distance = Math.sqrt(latDistance * latDistance + lonDistance * lonDistance);\r\n            maxDistance = distance > maxDistance ? distance : maxDistance;\r\n\r\n            polyLines[lineIndex].push([lon, lat]);\r\n\r\n            if(i < lons.length - 1){\r\n                if((lon > 160 && lon < 180) && (lons[i + 1] > -180 && lons[i + 1] < -160)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n\r\n                if((lon > -180 && lon < -160) && (lon[i + 1] > 160 && lon[i + 1] < 180)){\r\n                    polyLines.push([]);\r\n                    lineIndex ++;\r\n                }\r\n            }\r\n        })\r\n\r\n        var cruiseTrajectorySymbol = {\r\n            type: 'line-3d',\r\n            symbolLayers: [{\r\n                type: 'line',\r\n                material: { color: [0, 255, 255, 1] },\r\n                cap:  'round',\r\n                join: 'round',\r\n                size: 2\r\n            }]\r\n        }\r\n\r\n        polyLines.forEach(line => {\r\n\r\n            let cruiseTrajectoryGeometry = {\r\n                type: 'polyline',\r\n                paths: line\r\n            }\r\n\r\n            let graphic = new esriModules.Graphic({\r\n                geometry: cruiseTrajectoryGeometry,\r\n                symbol: cruiseTrajectorySymbol\r\n            });\r\n\r\n            trajectoryLayer.add(graphic);\r\n        })\r\n\r\n        try {\r\n            const center = [lons[midIndex], lats[midIndex]];\r\n\r\n            var zoom = 7 - Math.floor(maxDistance / 6);            \r\n    \r\n            props.view.goTo({\r\n                target: center,\r\n                zoom\r\n            }, {\r\n                maxDuration: 2500,\r\n                speedFactor: .5\r\n            });    \r\n\r\n        } catch(e) {console.log(e)}\r\n\r\n    } else {\r\n        trajectoryLayer.removeAll();\r\n\r\n        props.view.goTo({\r\n            target: [-140, 30],\r\n            zoom: 3\r\n        }, {\r\n            maxDuration: 2500,\r\n            speedFactor: .5\r\n        }); \r\n    }\r\n    return '';\r\n})\r\n\r\nclass MapContainer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            showHelp: false\r\n        }\r\n        this.regionLayer = new props.esriModules.GraphicsLayer();\r\n        this.trajectoryLayer = new props.esriModules.GraphicsLayer();\r\n    }\r\n\r\n    render = () => {\r\n        const { classes, esriModules, spParams, cruiseTrajectory, globeUIRef } = this.props;\r\n\r\n\r\n        const lat1 = parseFloat(spParams.lat1);\r\n        const lat2 = parseFloat(spParams.lat2);\r\n        const lon1 = parseFloat(spParams.lon1);\r\n        let _lon2 = parseFloat(spParams.lon2);\r\n        const lon2 = _lon2 < lon1 ? _lon2 + 360 : _lon2;\r\n\r\n        this.regionLayer.removeAll();\r\n\r\n        var polygon = {\r\n            type: 'polygon', \r\n            rings: [\r\n                [lon1, lat1],\r\n                [lon2, lat1],\r\n                [lon2, lat2],\r\n                [lon1, lat2],\r\n                [lon1, lat1]\r\n            ]\r\n        };\r\n\r\n        let regionGraphic = new esriModules.Graphic({\r\n            geometry: polygon,\r\n            symbol: polygonSymbol\r\n        })\r\n\r\n        this.regionLayer.add(regionGraphic);\r\n\r\n        return (\r\n            <div className={classes.container}>\r\n                <Scene\r\n                    mapProperties={{ \r\n                        basemap: 'satellite',\r\n                        layers: [\r\n                            this.regionLayer,\r\n                            this.trajectoryLayer\r\n                        ],\r\n\r\n                    }}\r\n                    viewProperties={{\r\n                        center: [-140, 30],\r\n                        zoom: 3,\r\n                        highlightOptions: {\r\n                            haloOpacity: 0,\r\n                            haloColor: 'rgba(0, 0, 0, 0)',\r\n                            fillOpacity: 0,\r\n                            color: \"rgba(0, 0, 0, 0)\"\r\n                        }\r\n                    }}\r\n                >\r\n                    <TrajectoryController \r\n                        cruiseTrajectory={cruiseTrajectory}\r\n                        trajectoryLayer={this.trajectoryLayer}\r\n                        esriModules={esriModules}\r\n                    />\r\n                    <UiComponents\r\n                        updateDomainFromGraphicExtent = {this.props.updateDomainFromGraphicExtent}\r\n                        esriModules={esriModules}\r\n                        measurementPositions={this.props.measurementPositions}\r\n                        regionLayer={this.regionLayer}\r\n                        setShowHelp={(showHelp) => this.setState({...this.state, showHelp})}\r\n                        ref={globeUIRef}\r\n                    />\r\n                </Scene>\r\n                <DrawButton showHelp={this.state.showHelp}/>\r\n                <CruiseSelector updateParametersFromCruiseBoundary={this.props.updateParametersFromCruiseBoundary}/>\r\n            </div>            \r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(MapContainer);","const cleanSPParams = ({depth1, depth2, dt1, dt2, fields, lat1, lat2, lon1, lon2, spName, tableName}) => ({\r\n    depth1: parseFloat(depth1),\r\n    depth2: parseFloat(depth2),\r\n    dt1,\r\n    dt2,\r\n    fields,\r\n    lat1: parseFloat(lat1),\r\n    lat2: parseFloat(lat2),\r\n    lon1: parseFloat(lon1),\r\n    lon2: parseFloat(lon2),\r\n    spName,\r\n    tableName,\r\n})\r\n\r\nexport default cleanSPParams;","const localDateToString = (date) => {\r\n    let year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate()\r\n\r\n    let nYear = year.toString();\r\n    let nMonth = month < 10 ? '0' + month.toString() : month.toString();\r\n    let nDay = day < 10 ? '0' + day.toString() : day.toString();\r\n\r\n    return nYear + '-' + nMonth + '-' + nDay;\r\n}\r\n\r\nexport default localDateToString;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport vizSubTypes from '../../Enums/visualizationSubTypes';\r\nimport storedProcedures from '../../Enums/storedProcedures';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginRequiredPrompt from '../User/LoginRequiredPrompt';\r\n// import VisualizationController from './VisualizationController';\r\nimport VizControlPanel from './VizControlPanel';\r\nimport DownloadConfirmationDialog from './DownloadConfirmationDialog';\r\n\r\nimport { showLoginDialog, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { queryRequestSend, storedProcedureRequestSend, cruiseListRequestSend, completedShowCharts } from '../../Redux/actions/visualization';\r\nimport { retrievalRequestSend, datasetRetrievalRequestSend } from '../../Redux/actions/catalog';\r\n\r\nimport { loadModules } from 'esri-loader';\r\n\r\nimport depthUtils from '../../Utility/depthCounter';\r\n\r\nimport Charts from './Charts';\r\nimport MapContainer from './MapContainer';\r\nimport colors from '../../Enums/colors'\r\nimport cleanSPParams from '../../Utility/cleanSPParams';\r\nimport localDateToString from '../../Utility/localDateToString';\r\nimport utcDateStringToLocal from '../../Utility/utcDateStringToLocal';\r\nimport temporalResolutions from '../../Enums/temporalResolutions';\r\nimport stars from '../../Utility/starsBase64';\r\n\r\nconst mapVizType = (vizType) => {\r\n    const mapping = {\r\n        [vizSubTypes.sectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.sectionMap\r\n        },\r\n        [vizSubTypes.contourSectionMap]: {\r\n            sp: storedProcedures.sectionMap,\r\n            subType: vizSubTypes.contourSectionMap\r\n        },\r\n        [vizSubTypes.timeSeries]: {\r\n            sp: storedProcedures.timeSeries,\r\n            subType: vizSubTypes.timeSeries\r\n        },\r\n        [vizSubTypes.histogram]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.histogram\r\n        },\r\n        [vizSubTypes.depthProfile]: {\r\n            sp: storedProcedures.depthProfile,\r\n            subType: vizSubTypes.depthProfile\r\n        },\r\n        [vizSubTypes.heatmap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.heatmap\r\n        },\r\n        [vizSubTypes.contourMap]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.contourMap\r\n        },\r\n        [vizSubTypes.sparse]: {\r\n            sp: storedProcedures.spaceTime,\r\n            subType: vizSubTypes.sparse\r\n        }\r\n    }\r\n\r\n    return mapping[vizType];\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    sampleData: state.sampleData,\r\n    queryRequestState: state.queryRequestState,\r\n    maps: state.maps,\r\n    charts: state.charts,\r\n    data: state.data,\r\n    storedProcedureRequestState: state.storedProcedureRequestState,\r\n    loadingMessage: state.loadingMessage,\r\n    cruiseTrajectory: state.cruiseTrajectory,\r\n    cruiseList: state.cruiseList,\r\n    showChartsOnce: state.showChartsOnce,\r\n    datasets: state.datasets\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    queryRequestSend,\r\n    retrievalRequestSend,\r\n    storedProcedureRequestSend,\r\n    snackbarOpen,\r\n    cruiseListRequestSend,\r\n    completedShowCharts,\r\n    datasetRetrievalRequestSend\r\n}\r\n\r\nconst styles = (theme) => ({\r\n    displayNone: {\r\n        display: 'none'\r\n    },\r\n\r\n    background: {\r\n        backgroundColor: colors.backgroundGray\r\n    },\r\n\r\n    showCharts: {\r\n        display: 'inline-block',\r\n        paddingTop: theme.spacing(6)\r\n        // width: '90%'\r\n    },\r\n\r\n    vizWrapper: {\r\n        minHeight: '100vh',\r\n        // overflow: 'hidden',\r\n        // width: '100vw',\r\n        background: `url(${stars})`\r\n    }\r\n})\r\n\r\nconst baseSPParams = {\r\n    tableName: '',\r\n    fields: null,\r\n    depth1: 0,\r\n    depth2: 0,\r\n    dt1: new Date(),\r\n    dt2: new Date(),\r\n    lat1: 0,\r\n    lat2: 0,\r\n    lon1: 0,\r\n    lon2: 0,\r\n    selectedVizType: ''\r\n}\r\n\r\nclass Visualization extends Component {\r\n    globeUIRef = React.createRef();\r\n\r\n    state = {\r\n        filteredData: [],\r\n        opacity: 1,\r\n        showCharts: false,\r\n        showUI: false,\r\n        surfaceOnly: false,\r\n        irregularSpatialResolution: false,\r\n        downloadTarget: null,\r\n\r\n        spParams: baseSPParams\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        if(!this.props.catalog) this.props.retrievalRequestSend();\r\n        if(!this.props.cruiseList) this.props.cruiseListRequestSend();\r\n        if(!this.props.datasets) this.props.datasetRetrievalRequestSend();\r\n\r\n        const esriModuleNames = [\r\n            'AreaMeasurement3D',\r\n            'Search',\r\n            'GraphicsLayer',\r\n            'SketchViewModel',\r\n            'Utils',\r\n            'Graphic',\r\n        ];\r\n\r\n        var loadedModules = await loadModules([\r\n            'esri/widgets/AreaMeasurement3D',\r\n            'esri/widgets/Search',\r\n            'esri/layers/GraphicsLayer',\r\n            'esri/widgets/Sketch/SketchViewModel',\r\n            'esri/geometry/support/webMercatorUtils',\r\n            'esri/Graphic',\r\n        ], {version: '4.14'});\r\n\r\n        var esriModules = esriModuleNames.reduce((accumulator, currentValue, currentIndex) => {\r\n            accumulator[currentValue] = loadedModules[currentIndex];\r\n            return accumulator;\r\n        }, {});\r\n\r\n        this.setState({...this.state, esriModules});\r\n    }\r\n\r\n    handleSetDownloadTarget = (downloadTarget) => {\r\n        this.setState({...this.state, downloadTarget})\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(this.props.showChartsOnce) {\r\n            this.props.completedShowCharts();\r\n            this.setState({...this.state, showCharts: true})\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, spParams: {...this.state.spParams, [event.target.name]: event.target.value}})\r\n    };\r\n\r\n    handleLatLonChange = (event) => {\r\n        this.setState({\r\n            ...this.state, \r\n            spParams: {...this.state.spParams, [event.target.name]: event.target.value},\r\n        })\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt1:newDate}});\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (date) => {\r\n        if(date){\r\n            let newDate = new Date();\r\n            newDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n            this.setState({...this.state, spParams: {...this.state.spParams, dt2:newDate}});\r\n        }\r\n    }\r\n\r\n    onVisualize = () => {\r\n        const { depth1, depth2, dt1, dt2, lat1, lat2, lon1, lon2, selectedVizType } = this.state.spParams;\r\n\r\n        let mapping = mapVizType(selectedVizType);\r\n        let parameters = cleanSPParams({\r\n            depth1,\r\n            depth2,\r\n            dt1: localDateToString(dt1),\r\n            dt2: localDateToString(dt2),\r\n            lat1,\r\n            lat2,\r\n            lon1,\r\n            lon2,\r\n            fields: this.state.spParams.fields && this.state.spParams.fields.value,\r\n            tableName: this.state.spParams.fields && this.state.spParams.tableName,\r\n            spName: mapping.sp\r\n        });\r\n\r\n        let payload = {\r\n            parameters,\r\n            subType: mapping.subType,\r\n            metadata: this.state.spParams.fields && this.state.spParams.fields.data\r\n        }\r\n    \r\n        this.props.storedProcedureRequestSend(payload);\r\n    }\r\n\r\n    // Update the \"fields\" state piece when the variables input changes\r\n    // Field in this case refers to a react-select option, which contains catalog metadata\r\n    updateFields = (fields) => {\r\n        if(fields) {\r\n            let surfaceOnly = !fields.data.Depth_Min;\r\n            let irregularSpatialResolution = fields.data.Spatial_Resolution === 'Irregular';\r\n\r\n            let dt1 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt1 : utcDateStringToLocal(fields.data.Time_Min);\r\n            let dt2 = fields.data.Temporal_Resolution === temporalResolutions.monthlyClimatology ?\r\n                this.state.spParams.dt2 : \r\n                irregularSpatialResolution ? utcDateStringToLocal(fields.data.Time_Max) :\r\n                utcDateStringToLocal(fields.data.Time_Min);\r\n\r\n            let lat1 = irregularSpatialResolution ? fields.data.Lat_Min : this.state.spParams.lat1;\r\n            let lat2 = irregularSpatialResolution ? fields.data.Lat_Max : this.state.spParams.lat2;\r\n            let lon1 = irregularSpatialResolution ? fields.data.Lon_Min : this.state.spParams.lon1;\r\n            let lon2 = irregularSpatialResolution ? fields.data.Lon_Max : this.state.spParams.lon2;\r\n            let depth1 = irregularSpatialResolution ? fields.data.Depth_Min || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? 0 :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? 0 : \r\n                this.state.spParams.depth1;\r\n\r\n            let depth2 = irregularSpatialResolution ? fields.data.Depth_Max || 0 : \r\n                depthUtils.piscesTable.has(fields.data.Table_Name) ? ((depthUtils.piscesDepths[0] + depthUtils.piscesDepths[1]) / 2).toFixed(2) :\r\n                depthUtils.darwinTable.has(fields.data.Table_Name) ? ((depthUtils.darwinDepths[0] + depthUtils.darwinDepths[1]) / 2) : \r\n                this.state.spParams.depth2;\r\n\r\n            if(irregularSpatialResolution){\r\n                this.globeUIRef.current.props.view.goTo({\r\n                    target: [(parseFloat(lon1) + parseFloat(lon2)) / 2, (parseFloat(lat1) + parseFloat(lat2)) / 2],\r\n                    zoom: 3\r\n                }, {\r\n                    maxDuration: 2500,\r\n                    speedFactor: .5\r\n                }); \r\n            }\r\n\r\n            let tableName = fields.data.Table_Name;\r\n            \r\n            this.setState({...this.state,\r\n                surfaceOnly,\r\n                irregularSpatialResolution,\r\n                spParams: {...this.state.spParams, \r\n                    fields,\r\n                    dt1,\r\n                    dt2,\r\n                    lat1,\r\n                    lat2,\r\n                    lon1,\r\n                    lon2,\r\n                    depth1,\r\n                    depth2,\r\n                    tableName,\r\n                    selectedVizType: ''\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({...this.state, spParams: {...this.state.spParams, fields, tableName: ''}})\r\n        }\r\n    }\r\n\r\n    updateParametersFromCruiseBoundary = (cruise) => {\r\n        if(cruise && this.state.spParams.fields){\r\n            this.props.snackbarOpen('Setting chart parameters to cruise boundaries.')\r\n            this.setState({...this.state,\r\n                spParams: {...this.state.spParams,\r\n                    lat1: cruise.data.Lat_Min,\r\n                    lat2: cruise.data.Lat_Max,\r\n                    lon1: cruise.data.Lon_Min,\r\n                    lon2: cruise.data.Lon_Max,\r\n                    dt1: utcDateStringToLocal(cruise.data.Start_Time),\r\n                    dt2: utcDateStringToLocal(cruise.data.End_Time)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    handleShowCharts = () => {\r\n        this.setState({...this.state, showCharts: true})\r\n    }\r\n\r\n    handleShowGlobe = () => {\r\n        this.setState({...this.state, showCharts: false})\r\n    }\r\n\r\n    toggleShowUI = () => {\r\n        this.setState({...this.state, showUI: !this.state.showUI});\r\n    }\r\n\r\n    updateDomainFromGraphicExtent = (extent) => {\r\n        var _lon1 = extent.xmin > -180 ? extent.xmin : extent.xmin + 360;\r\n        var _lon2 = extent.xmax < 180 ? extent.xmax : extent.xmax - 360;\r\n\r\n        var newCoordinates = {\r\n            lat1: extent.ymin.toFixed(3),\r\n            lat2: extent.ymax.toFixed(3),\r\n            lon1: _lon1.toFixed(3),\r\n            lon2: _lon2.toFixed(3)\r\n        };\r\n\r\n        this.setState({...this.state, spParams: {...this.state.spParams, ...newCoordinates}});\r\n    }\r\n\r\n    resetSPParams = () => {\r\n        this.setState({...this.state, spParams: baseSPParams})\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        if(!this.props.user) return <LoginRequiredPrompt/>\r\n\r\n        return (\r\n            <div className={classes.vizWrapper}>\r\n                <DownloadConfirmationDialog\r\n                    {...this.state.spParams}\r\n                    downloadTarget={this.state.downloadTarget}\r\n                    handleSetDownloadTarget={this.handleSetDownloadTarget}\r\n                />\r\n\r\n                <VizControlPanel\r\n                    handleSetDownloadTarget={this.handleSetDownloadTarget}\r\n                    toggleChartView={this.toggleChartView}\r\n                    toggleShowUI={this.toggleShowUI}\r\n                    handleChange={this.handleChange}\r\n                    handleLatLonChange={this.handleLatLonChange}\r\n                    handleStartDateChange={this.handleStartDateChange} \r\n                    handleEndDateChange={this.handleEndDateChange} \r\n                    showUI={this.state.showUI}\r\n                    onVisualize={this.onVisualize}\r\n                    updateFields={this.updateFields}\r\n                    {...this.state.spParams}\r\n                    surfaceOnly={this.state.surfaceOnly}\r\n                    irregularSpatialResolution={this.state.irregularSpatialResolution}\r\n                    showCharts={this.state.showCharts}\r\n                    handleShowCharts={this.handleShowCharts}\r\n                    handleShowGlobe={this.handleShowGlobe}\r\n                    resetSPParams={this.resetSPParams}\r\n                />\r\n                { this.state.esriModules &&\r\n                    <div className={`${this.state.showCharts ? classes.displayNone : ''}`}>\r\n                        <MapContainer\r\n                            globeUIRef={this.globeUIRef}\r\n                            updateDomainFromGraphicExtent={this.updateDomainFromGraphicExtent}\r\n                            updateParametersFromCruiseBoundary={this.updateParametersFromCruiseBoundary}\r\n                            esriModules={this.state.esriModules}\r\n                            spParams={this.state.spParams}\r\n                            cruiseTrajectory={this.props.cruiseTrajectory}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n                <div className={this.state.showCharts ? classes.showCharts : classes.displayNone}>\r\n                    <Charts/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Visualization));","export default 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=';","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport Link from '@material-ui/core/Link';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { showLoginDialog, hideLoginDialog, restoreInterfaceDefaults, snackbarOpen } from '../../Redux/actions/ui';\r\nimport { logOut, userLoginRequestSend, googleLoginRequestSend } from '../../Redux/actions/user';\r\n\r\nimport GoogleSignInButton from './GoogleSignInButton';\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        loginDialogIsOpen: state.loginDialogIsOpen,\r\n        userLoginState: state.userLoginState,\r\n        userLoginError: state.userLoginError\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    hideLoginDialog,\r\n    showLoginDialog,\r\n    logOut,\r\n    userLoginRequestSend,\r\n    restoreInterfaceDefaults,\r\n    googleLoginRequestSend,\r\n    snackbarOpen\r\n}\r\n\r\nconst styles = theme => ({\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: 'relative',\r\n    },\r\n\r\n    buttonProgress: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n\r\n    googleIconWrapper: {\r\n        marginRight: '100px',\r\n        marginLeft: '-8px'\r\n    },\r\n\r\n    dialogWrapper: {\r\n        backgroundColor: colors.solidPaper\r\n    }\r\n})\r\n\r\nconst loginClickHandlerTarget = 'g-signin';\r\n\r\nclass LoginDialog extends Component{\r\n    // Text input state is managed in the TopNavBar component\r\n\r\n    handleLogin = (event) => {\r\n        this.props.userLoginRequestSend(this.props.username, this.props.password);\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.clearState();\r\n        this.props.hideLoginDialog();\r\n        this.props.restoreInterfaceDefaults();\r\n    }\r\n\r\n    onGoogleSignin = (user) => {\r\n        let token = user.getAuthResponse(true).id_token;\r\n        this.props.googleLoginRequestSend(token);\r\n    }\r\n\r\n    onDialogEnter = () => {\r\n        // clean up listener on unmount\r\n        let _this = this;\r\n        let auth = window.gapi.auth2\r\n        if(auth){\r\n            let authInstance = auth.getAuthInstance();\r\n            authInstance.attachClickHandler(\r\n                loginClickHandlerTarget, \r\n                null, \r\n                _this.onGoogleSignin,\r\n                () => _this.props.snackbarOpen('There was a problem accessing your google account')\r\n            );\r\n        } else {\r\n            setTimeout(_this.onDialogEnter, 200);\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n        return (\r\n            <Dialog\r\n                open={this.props.loginDialogIsOpen}\r\n                onClose={this.handleClose}\r\n                aria-labelledby=\"form-dialog-title\"\r\n                onEnter={this.onDialogEnter}\r\n                PaperProps={{\r\n                    className: classes.dialogWrapper\r\n                }}\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">Login</DialogTitle>\r\n                <DialogContent>                \r\n                    <DialogContentText>\r\n                        Please enter your username and password, or <Link onClick={this.handleClose} component={RouterLink} to={{pathname: '/register'}}>Register.</Link>\r\n                    </DialogContentText>\r\n                    <form onSubmit={e => (e.preventDefault())}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"username\"\r\n                            label=\"Username\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='username'\r\n                            value={this.props.username}\r\n                            onChange={this.props.handleChange}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}                            \r\n                        />\r\n\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"name\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='password'\r\n                            value={this.props.password}\r\n                            onChange={this.props.handleChange}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            helperText={<Link onClick={this.handleClose} component={RouterLink} to={{pathname: '/forgotpass'}}>Forgot Username or Password</Link>}\r\n                        />\r\n\r\n                        <DialogActions>\r\n                            <div className={classes.googleIconWrapper}>\r\n                                <GoogleSignInButton clickHandlerTarget={loginClickHandlerTarget} text='Sign in with Google'/>\r\n                            </div>\r\n\r\n                            <Button onClick={this.handleClose} color=\"primary\">\r\n                                Cancel\r\n                            </Button>\r\n\r\n                            <div className={classes.wrapper}>\r\n                                <Button color=\"primary\" type='submit' onClick={this.handleLogin} disabled={!this.props.username || !this.props.password}>\r\n                                    Log In\r\n                                </Button>\r\n                            </div>\r\n                        </DialogActions>\r\n                    </form>\r\n                    {this.props.userLoginState === states.failed ?\r\n                    <DialogContentText>\r\n                        Login failed. Please try again.\r\n                    </DialogContentText>\r\n                    : ''               \r\n                    }\r\n                </DialogContent>\r\n                \r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(LoginDialog));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { snackbarClose } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    snackbarIsOpen: state.snackbarIsOpen,\r\n    snackbarMessage: state.snackbarMessage\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    snackbarClose,\r\n}\r\n\r\nconst styles = (theme) => {\r\n    return ({\r\n        centerText: {\r\n            textAlign: 'center'\r\n        }\r\n    })\r\n}\r\n\r\nconst SnackbarWrapper = (props) => {\r\n    const { classes } = props;\r\n    return (\r\n        \r\n        <React.Fragment>\r\n            <Snackbar \r\n                className={classes.centerText}\r\n                autoHideDuration={4000} \r\n                message={props.snackbarMessage}\r\n                onClose={props.snackbarClose}\r\n                open={props.snackbarIsOpen}\r\n                anchorOrigin={{horizontal:'center', vertical:'top'}}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SnackbarWrapper));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport * as Spinner from 'react-spinkit';\r\n\r\nconst styles = theme => ({\r\n    loader: {\r\n        backgroundColor: '#000000',\r\n        position: 'fixed',\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        opacity: 0.5,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        zIndex: 9998\r\n    },\r\n\r\n    loaderContent: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItem: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 9999,\r\n        opacity: 1\r\n    },\r\n\r\n    spinnerText: {\r\n        zIndex: 10000,\r\n        color: theme.palette.primary.main,\r\n        // color: '#FF8000',\r\n        marginTop: '25px',\r\n        opacity: 1\r\n    },\r\n\r\n    spinner: {\r\n        opacity: 1\r\n    }\r\n})\r\n\r\nconst LoadingOverlay = (props) => {\r\n    const { classes, loadingMessage } = props;\r\n\r\n    if(loadingMessage && loadingMessage.length){\r\n        return (\r\n            <div className={classes.loader}>\r\n                <div className={classes.loaderContent}>\r\n                    <Spinner className={classes.spinner} color={colors.primary} name=\"ball-pulse-rise\" fadeIn='quarter'/>\r\n                    <Typography variant='h6' className={classes.spinnerText}>{loadingMessage}</Typography>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else return '';\r\n\r\n}\r\n\r\nexport default withStyles(styles)(LoadingOverlay);","// This component is a wrapper and control center for\r\n// UI components that need to be accessible anywhere\r\n// in the application such as login dialog and snackbar.\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport LoginDialog from '../User/LoginDialog';\r\nimport SnackbarWrapper from './SnackbarWrapper';\r\nimport LoadingOverlay from './LoadingOverlay';\r\n\r\nimport { loginDialogWasCleared } from '../../Redux/actions/user';\r\n\r\nconst styles = theme => ({\r\n    inlineBlock: {\r\n        display: 'inline-block'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    clearLoginDialog: state.clearLoginDialog,\r\n    loadingMessage: state.loadingMessage\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    loginDialogWasCleared\r\n}\r\n\r\nclass GlobalUIComponentWrapper extends Component {\r\n\r\n    state = {\r\n        // Login dialog\r\n        username: '',\r\n        password: ''\r\n    }\r\n    \r\n    // Controls login dialog text fields to allow reset from logout button\r\n    handleChange = (event) => {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    };\r\n\r\n    handleLogOut = () => {\r\n        this.clearState();\r\n    }\r\n\r\n    clearState = () => {\r\n        this.setState({\r\n            username: '',\r\n            password: ''\r\n        });\r\n        this.props.loginDialogWasCleared();\r\n    }\r\n\r\n    componentDidUpdate = (preProps) => {\r\n        if(this.props.clearLoginDialog) {\r\n            this.clearState();\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        // const { classes } = this.props;\r\n\r\n        return (\r\n            <React.Fragment>    \r\n                <LoginDialog clearState={this.clearState} username={this.state.username} password={this.state.password} handleChange={this.handleChange}/>\r\n                <SnackbarWrapper/>\r\n                <LoadingOverlay loadingMessage={this.props.loadingMessage}/>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(GlobalUIComponentWrapper));","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { googleLoginRequestSend } from '../Redux/actions/user';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user : state.user,\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    googleLoginRequestSend\r\n}\r\n\r\nconst styles = theme => ({\r\n    landingWrapper: {\r\n        margin: '15vh auto'\r\n    },\r\n\r\n    welcomeMessage: {\r\n        color: '#ffffff',\r\n        maxWidth: '500px',\r\n        margin: `${theme.spacing(2)}px auto`\r\n    }\r\n})\r\n\r\nclass LandingPage extends Component {\r\n\r\n    render(){\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.landingWrapper}>\r\n                <img \r\n                    src='/images/large_cmap_logo.png'\r\n                    alt='Simons CMAP Logo'\r\n                    height='290'\r\n                    width='600'\r\n                />\r\n                <Typography variant=\"body2\" component=\"p\" className={classes.welcomeMessage}>\r\n                    Welcome to Simons CMAP. This application is currently under heavy development, and some features may be incomplete.\r\n                </Typography>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(LandingPage));","const jss = {\r\n    // styles for top navbar links\r\n    navLink: theme => ({\r\n        textDecoration: 'none',\r\n        marginRight: 20,\r\n        color: 'white',\r\n        '&:hover': {\r\n            color: theme.palette.primary.main\r\n        },\r\n        fontSize: '15px',\r\n        fontWeight: 100,\r\n        display: 'inline-block',\r\n        cursor: 'pointer' ,\r\n        verticalAlign: 'middle',\r\n        pointerEvents: 'all',\r\n        fontWeight: 500\r\n    }),\r\n}\r\n\r\nexport default jss;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\r\n\r\nimport { Typography, MenuItem, ClickAwayListener, Grow, Paper, Popper, MenuList } from '@material-ui/core';\r\n\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nconst styles = (theme) => ({\r\n    navLink: JSS.navLink(theme),\r\n\r\n    floatRight: {\r\n        // float: 'right',\r\n        // marginRight: 30,\r\n    },\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle'\r\n    },\r\n\r\n    dropdown: {\r\n        zIndex: 1300,\r\n        marginTop: '21px'\r\n    },\r\n\r\n    popperPaper: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: '#133345'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    logOut\r\n}\r\n\r\nconst UserNavbarDropdown = (props) => {\r\n    const { classes, user, pathname, logOut } = props;\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='caption' className={`${classes.navLink} ${pathname === '/visualization' ? '' : classes.floatRight}`} onClick={handleClick}>\r\n                {user.email}{anchorEl ? <ExpandLess className={classes.icon} color='primary' fontSize='small'/> : <ExpandMore className={classes.icon} color='primary' fontSize='small'/>}\r\n            </Typography>\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} role={undefined} transition className={classes.dropdown}>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={classes.popperPaper}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList id=\"menu-list-grow\">\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/profile'>Profile</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/apikeymanagement'>API Access</MenuItem>\r\n                                    <MenuItem onClick={logOut}>Logout</MenuItem>\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(UserNavbarDropdown)));","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { logOut } from '../../Redux/actions/user';\r\n\r\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\r\n\r\nimport { Typography, MenuItem, ClickAwayListener, Grow, Paper, Popper, MenuList } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n    navLink: {\r\n        textDecoration: 'none',\r\n        marginRight: 20,\r\n        color: 'white',\r\n        '&:hover': {\r\n            color: theme.palette.primary.main\r\n        },\r\n        fontSize: '15px',\r\n        fontWeight: 100,\r\n        display: 'inline-block',\r\n        cursor: 'pointer' ,\r\n        verticalAlign: 'middle'\r\n    },\r\n\r\n    icon: {\r\n        display: 'inline-flex',\r\n        verticalAlign: 'middle'\r\n    },\r\n\r\n    dropdown: {\r\n        zIndex: 1300,\r\n        marginTop: '23px',\r\n        borderRadius: 0\r\n    },\r\n\r\n    popperPaper: {\r\n        borderTopLeftRadius: 0,\r\n        borderTopRightRadius: 0,\r\n        backgroundColor: '#1C4964'\r\n    }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    logOut\r\n}\r\n\r\nconst DataSubmissionNavbarDropdown = (props) => {\r\n    const { classes, user, pathname, logOut } = props;\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='caption' className={`${classes.navLink}`} onClick={handleClick}>\r\n                Data Submission{anchorEl ? <ExpandLess className={classes.icon} color='primary' fontSize='small'/> : <ExpandMore className={classes.icon} color='primary' fontSize='small'/>}\r\n            </Typography>\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl} role={undefined} transition className={classes.dropdown}>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                    {...TransitionProps}\r\n                    style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                    >\r\n                        <Paper className={classes.popperPaper}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList id=\"menu-list-grow\">\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/guide'>About</MenuItem>\r\n                                    <MenuItem onClick={handleClose} component={Link} to='/datasubmission/validationtool'>Validation Tool</MenuItem>\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(DataSubmissionNavbarDropdown)));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { showLoginDialog, restoreInterfaceDefaults, snackbarOpen, toggleShowHelp } from '../../Redux/actions/ui';\r\nimport { logOut } from '../../Redux/actions/user';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport UserNavbarDropdown from '../User/UserNavbarDropdown';\r\nimport DataSubmissionNavbarDropdown from '../DataSubmission/DataSubmissionNavbarDropdown';\r\nimport JSS from '../../Stylesheets/JSS';\r\n\r\nconst styles = theme => ({\r\n\r\n    simonsLogo: {\r\n        verticalAlign: 'middle',\r\n        display: 'inline-block',\r\n    },\r\n    \r\n    simonsLogoWrapper: {\r\n        pointerEvents: 'all',\r\n        display: 'inline-block',\r\n        marginRight: '60px !important',     \r\n        verticalAlign: 'middle',   \r\n    },\r\n\r\n    navWrapper: {\r\n        position: 'fixed',\r\n        width: '100vw',\r\n        top: '0px',\r\n        backgroundColor: 'transparent',\r\n        zIndex: 50,\r\n        paddingTop: '14px',\r\n        paddingBottom: '14px',\r\n        paddingLeft: '20px',\r\n        paddingRight: '20px',\r\n        textAlign: 'left',\r\n        boxSizing: 'border-box',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        pointerEvents: 'none'\r\n    },\r\n\r\n    navWrapperGradient: {\r\n        backgroundImage: 'linear-gradient(270deg, rgba(0, 0, 0, 0.48), rgba(0, 0, 0, 0.1))'\r\n    },\r\n\r\n    rightSectionWrapper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-around'\r\n\r\n    },\r\n\r\n    navLink: JSS.navLink(theme),\r\n\r\n    rightNavLink: {\r\n        marginRight: 20\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    showHelp: state.showHelp\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog,\r\n    logOut,\r\n    restoreInterfaceDefaults,\r\n    snackbarOpen,\r\n    toggleShowHelp\r\n}\r\n\r\nclass TopNavBar extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: ''\r\n        }\r\n        \r\n    }\r\n    \r\n    // Controls login dialog text fields to allow reset from logout button\r\n    handleChange = (event) => {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    };\r\n\r\n    handleLogOut = () => {\r\n        this.clearState();\r\n        this.props.logOut();\r\n        this.props.restoreInterfaceDefaults();\r\n    }\r\n\r\n    clearState = () => {\r\n        this.setState({\r\n            username: '',\r\n            password: ''\r\n        })\r\n    }\r\n\r\n    handleNavigate = (route) => {\r\n        this.props.restoreInterfaceDefaults()\r\n        this.props.history.push(route);\r\n    }\r\n\r\n    handleOutsideNavigate = (url) => {\r\n        window.open(url, '_blank')\r\n    }\r\n\r\n    render(){\r\n        const { classes, history, user } = this.props;\r\n        const { pathname } = history.location;\r\n\r\n        return (\r\n            <div className={`${classes.navWrapper} ${pathname !== '/visualization' && classes.navWrapperGradient}`}>\r\n\r\n                {/* Left side of navbar */}\r\n                <div>\r\n                    <Typography variant='caption' href='/' component='a' className={`${classes.navLink} ${classes.simonsLogoWrapper}`}>\r\n                        <img src='images/CMAP_white_logo_2.png' width='40' alt='CMAP logo' className={classes.simonsLogo}/>\r\n                    </Typography>\r\n                    <Typography variant='caption' to='/catalog' component={Link} className={classes.navLink}>Catalog</Typography>\r\n                    {pathname !== '/visualization' && <Typography variant='caption' to='/visualization' component={Link} className={classes.navLink}>Visualization</Typography>}\r\n                    {/* <DataSubmissionNavbarDropdown/> */}\r\n                    {/* <Typography variant='caption' to='/contact' component={Link} className={classes.navLink}>Contact</Typography> */}\r\n                </div>\r\n\r\n                {/* Right side of navbar */}\r\n                <div className={classes.rightSectionWrapper}>\r\n                    <div>\r\n                        {user && pathname !== '/visualization' && <UserNavbarDropdown pathname={pathname} user={user}/>}\r\n                        {/* <Typography variant='caption' onClick={this.props.toggleShowHelp} className={classes.navLink}>{showHelp ? 'Hide Help' : 'Help(beta) '}</Typography> */}\r\n                        {(!user && pathname !== '/visualization') && <Typography variant='caption' onClick={() => this.props.showLoginDialog()} className={`${classes.navLink} ${classes.rightNavLink}`}>Log In</Typography>}\r\n                        {(!user && pathname !== '/visualization') && <Typography variant='caption' to='/register' component={Link} className={`${classes.navLink} ${classes.rightNavLink}`}>Register</Typography>}\r\n                    </div>\r\n                </div>\r\n            </div>        \r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(TopNavBar)));","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { showLoginDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapDispatchToProps = {\r\n    showLoginDialog\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst Login = (props) => {\r\n\r\n    useEffect(() => {\r\n        if(!props.user) props.showLoginDialog();\r\n        else window.location.href = \"/catalog\";\r\n    })\r\n    \r\n    return (\r\n        ''\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Grid, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Button, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { changePasswordRequestSend } from '../../Redux/actions/user';\r\nimport { hideChangePasswordDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    changePasswordRequestSend,\r\n    hideChangePasswordDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        '@media (max-width: 768px)': {\r\n            margin: 0\r\n        },\r\n    },\r\n\r\n    formWrapper: {\r\n        padding: '3vh 5vw'\r\n    }\r\n})\r\n\r\nconst testNewPassword = (password) => {\r\n    return /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(password);\r\n};\r\n\r\n\r\nconst ChangePassword = (props) => {\r\n    const { classes } = props;\r\n    \r\n    const [currentPassword, setCurrentPassword] = React.useState('');\r\n    const [newPassword, setNewPassword] = React.useState('');\r\n    const [newPasswordConfirm, setNewPasswordConfirm] = React.useState('')\r\n    \r\n    const newPasswordValid = Boolean(testNewPassword(newPassword) || !newPassword);\r\n    const newPasswordConfirmValid = Boolean(!newPasswordConfirm || newPasswordConfirm === newPassword);\r\n    \r\n    const resetFields = () => {\r\n        setCurrentPassword('');\r\n        setNewPassword('');\r\n        setNewPasswordConfirm('');\r\n    }\r\n\r\n    const handleClose = () => {\r\n        props.hideChangePasswordDialog();\r\n        resetFields();\r\n    }\r\n    \r\n    const handleConfirm = () => {\r\n        props.changePasswordRequestSend(currentPassword, newPassword, props.user.username);\r\n    }\r\n    \r\n    const changePasswordButtonRef = React.useRef();\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            changePasswordButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    const buttonIsDisabled = Boolean(!newPassword || !newPasswordConfirm || !newPasswordValid || !newPasswordConfirmValid);\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n            onEnter={resetFields}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">Change Password</DialogTitle>\r\n            <DialogContent>                \r\n                <DialogContentText>\r\n                    Please enter your current and new password.\r\n                </DialogContentText>\r\n\r\n                <Grid container className={classes.formWrapper}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"currentPassword\"\r\n                            label=\"Current Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='currentPassword'\r\n                            value={currentPassword}\r\n                            onChange={(e) => setCurrentPassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            onKeyPress={handleKeyPress}\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"newPassword\"\r\n                            label=\"New Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='newPassword'\r\n                            value={newPassword}\r\n                            onChange={(e) => setNewPassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!newPasswordValid}\r\n                            helperText={!newPasswordValid ? 'Must be 8 to 32 characters with 1 number and 1 special character.' : ''}\r\n                            onKeyPress={handleKeyPress}\r\n                        />                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"newPasswordConfirm\"\r\n                            label=\"Confirm New Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='newPasswordConfirm'\r\n                            value={newPasswordConfirm}\r\n                            onChange={(e) => setNewPasswordConfirm(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!newPasswordConfirmValid}\r\n                            helperText={newPasswordConfirmValid ? '' : 'Passwords must match.'}\r\n                            onKeyPress={handleKeyPress}\r\n                        />                        \r\n                    </Grid>\r\n                </Grid>\r\n\r\n                <DialogActions>\r\n                    <Button onClick={() => handleClose()} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n\r\n                    <Button \r\n                        color=\"primary\" \r\n                        variant='contained'\r\n                        onClick={handleConfirm}\r\n                        disabled={buttonIsDisabled}\r\n                        ref={changePasswordButtonRef}\r\n                    >\r\n                        Confirm\r\n                    </Button>\r\n                </DialogActions>\r\n            </DialogContent>            \r\n        </Dialog>\r\n        )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChangePassword));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Grid, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Button, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport colors from '../../Enums/colors';\r\n\r\nimport { changeEmailRequestSend } from '../../Redux/actions/user';\r\nimport { hideChangeEmailDialog } from '../../Redux/actions/ui';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    changeEmailRequestSend,\r\n    hideChangeEmailDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        backgroundColor: colors.solidPaper,\r\n        '@media (max-width: 768px)': {\r\n            margin: 0\r\n        },\r\n    },\r\n\r\n    formWrapper: {\r\n        padding: '3vh 5vw'\r\n    }\r\n})\r\n\r\nconst testEmail = (email) => {\r\n    return /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(email);\r\n};\r\n\r\nconst ChangePassword = (props) => {\r\n    const { classes } = props;\r\n\r\n    const [password, setpassword] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [emailConfirm, setEmailConfirm] = React.useState('')\r\n\r\n    const resetFields = () => {\r\n        setpassword('');\r\n        setEmail('');\r\n        setEmailConfirm('');\r\n    }\r\n\r\n    const handleClose = () => {\r\n        resetFields();\r\n        props.hideChangeEmailDialog();\r\n    }\r\n\r\n    const handleConfirm = () => {\r\n        props.changeEmailRequestSend(email, password, props.user.username);\r\n    }\r\n    \r\n    const changeEmailButtonRef = React.useRef();\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n            changeEmailButtonRef.current.click();\r\n        }\r\n    }\r\n\r\n    const emailValid = Boolean(testEmail(email) || !email);\r\n    const emailConfirmValid = Boolean(!emailConfirm || email === emailConfirm); \r\n\r\n    const buttonIsDisabled = Boolean(!email || !emailConfirm || !emailValid || !emailConfirmValid);\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                className: classes.dialogPaper\r\n            }}\r\n            onEnter={resetFields}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">Change Email</DialogTitle>\r\n            <DialogContent>                \r\n                <DialogContentText>\r\n                    Please enter your account password, and new email address.\r\n                </DialogContentText>\r\n\r\n                <Grid container className={classes.formWrapper}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"currentPassword\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='currentPassword'\r\n                            value={password}\r\n                            onChange={(e) => setpassword(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            onKeyPress={handleKeyPress}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"email\"\r\n                            label=\"New Email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='email'\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            error={!emailValid}\r\n                            helperText={!emailValid ? 'Please enter a valid email address' : ''}\r\n                        />                        \r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id=\"emailConfirm\"\r\n                            label=\"Confirm Email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='emailConfirm'\r\n                            value={emailConfirm}\r\n                            onChange={(e) => setEmailConfirm(e.target.value)}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            fullWidth\r\n                            onKeyPress={handleKeyPress}\r\n                            error={!emailConfirmValid}\r\n                            helperText={emailConfirmValid ? '' : 'Email addresses must match.'}                            \r\n                        />                        \r\n                    </Grid>\r\n                </Grid>\r\n\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\">\r\n                            Cancel\r\n                        </Button>\r\n\r\n                        <Button \r\n                            color=\"primary\" \r\n                            variant='contained'\r\n                            onClick={handleConfirm}\r\n                            ref={changeEmailButtonRef}\r\n                            disabled={buttonIsDisabled}\r\n                        >\r\n                            Confirm\r\n                        </Button>\r\n                    </DialogActions>\r\n            </DialogContent>            \r\n        </Dialog>\r\n        )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ChangePassword));","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { IconButton, Tooltip, Paper, Button, TextField, Typography, Grid } from '@material-ui/core';\r\nimport { Edit } from '@material-ui/icons';\r\n\r\nimport { updateUserInfoRequestSend } from '../../Redux/actions/user';\r\nimport { showChangePasswordDialog, showChangeEmailDialog } from '../../Redux/actions/ui';\r\n\r\nimport ChangePassword from './ChangePassword';\r\nimport ChangeEmail from './ChangeEmail';\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user,\r\n    changePasswordDialogIsOpen: state.changePasswordDialogIsOpen,\r\n    changeEmailDialogIsOpen: state.changeEmailDialogIsOpen\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    updateUserInfoRequestSend,\r\n    showChangePasswordDialog,\r\n    showChangeEmailDialog\r\n}\r\n\r\nconst styles = theme => ({\r\n    profilePaper: {\r\n        '@media (min-width: 768px)': {\r\n            width: '60vw'\r\n        },\r\n        width: '100vw',\r\n        margin: `${theme.spacing(16)}px auto 0 auto`,\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n\r\n    accountPaper: {\r\n        '@media (min-width: 768px)': {\r\n            width: '60vw'\r\n        },\r\n        width: '100vw',\r\n        margin: `${theme.spacing(6)}px auto 0 auto`,\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n\r\n    textField: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n        maxWidth: 'calc(100% - 52px)'\r\n    },\r\n\r\n    buttonGrid: {\r\n        marginTop: theme.spacing(1)\r\n    },\r\n\r\n    editButton: {\r\n        float: 'right',\r\n        display: 'inline-block',\r\n        marginTop: '-16px'\r\n    },\r\n\r\n    header: {\r\n        paddingLeft: theme.spacing(3),\r\n        display: 'inline-block',\r\n        marginTop: '-4px',\r\n        float: 'left'\r\n    },\r\n\r\n    accountEditButton: {\r\n        float: 'left',\r\n        marginTop: '6px'\r\n    }\r\n})\r\n\r\nconst userProperties = {\r\n    firstName: {\r\n        label:'First Name',\r\n        name: 'firstName',\r\n        type: 'text',\r\n        requirement: 'Must be 2 or more alphabetical characters.',\r\n    },\r\n\r\n    lastName: {\r\n        label:'Last Name',\r\n        name: 'lastName',\r\n        type: 'text',\r\n        requirement: 'Must be 2 or more alphabetical characters.',\r\n    },\r\n\r\n    institute: {\r\n        label:'Institute',\r\n        name: 'institute',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    },\r\n\r\n    department: {\r\n        label:'Department',\r\n        name: 'department',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    },\r\n\r\n    country: {\r\n        label:'Country',\r\n        name: 'country',\r\n        type: 'text',\r\n        requirement: 'Maximum length is 150 characters.',\r\n    }\r\n}\r\n\r\nconst userToState = (user) => ({\r\n    editable: false,\r\n    firstName: {\r\n        value: user.firstName,\r\n        valid: true\r\n    },\r\n\r\n    lastName: {\r\n        value: user.lastName,\r\n        valid: true\r\n    },\r\n    institute: {\r\n        value: user.institute || '',\r\n        valid: true\r\n    },\r\n    department: {\r\n        value: user.department || '',\r\n        valid: true\r\n    },\r\n    country: {\r\n        value: user.country || '',\r\n        valid: true\r\n    },\r\n    email: {\r\n        value: user.email || '',\r\n        valid: true\r\n    }\r\n})\r\n\r\nclass Profile extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        if(!props.user) return;\r\n\r\n        this.state = {\r\n            ...userToState(props.user),\r\n            editable: false,\r\n            infoHasChanged: false\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        let newValue = event.target.value;\r\n        let fieldName = event.target.name;\r\n        let valid = this.handleValidation(fieldName, newValue);\r\n        this.setState({\r\n            ...this.state,\r\n            infoHasChanged: true,\r\n            [fieldName]: {\r\n                value: newValue,\r\n                valid\r\n            }\r\n        })\r\n    };\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if(prevProps.user !== this.props.user){\r\n            this.setState({...this.state, ...userToState(this.props.user)});\r\n        }\r\n    }\r\n\r\n    handleValidation = (fieldName, newValue) => {\r\n        let value = newValue.trim();\r\n        let pattern = /$^/;\r\n\r\n        switch(fieldName){\r\n            case 'firstName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'lastName':\r\n                pattern = /^[A-Za-z ]{2,40}$/;\r\n                break;\r\n            case 'email':\r\n                pattern = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n                break;\r\n            case 'institute':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'department':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            case 'country':\r\n                pattern = /^.{0,150}$/\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return pattern.test(value);\r\n    }\r\n\r\n    handleEdit = () => {\r\n        this.setState({...this.state, editable: true})\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.setState({...userToState(this.props.user), editable: false, infoHasChanged: false})\r\n    }\r\n\r\n    handleConfirm = () => {\r\n        this.props.updateUserInfoRequestSend({\r\n            firstName: this.state.firstName.value.trim(),\r\n            lastName: this.state.lastName.value.trim(),\r\n            institute: this.state.institute.value.trim(),\r\n            department: this.state.department.value.trim(),\r\n            country: this.state.country.value.trim()\r\n        })\r\n    }\r\n\r\n    render(){\r\n        if(!this.props.user) {\r\n            window.location.href = \"/login\";\r\n            return '';\r\n        }\r\n\r\n        const { classes, changeEmailDialogIsOpen, changePasswordDialogIsOpen, showChangePasswordDialog, showChangeEmailDialog } = this.props;\r\n        const { editable, infoHasChanged } = this.state;\r\n        let formIsValid = true;\r\n        \r\n        Object.keys(userProperties).forEach((property) => {\r\n            if(!this.state[property].valid) formIsValid = false;\r\n        })\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <ChangePassword\r\n                    open={changePasswordDialogIsOpen}\r\n                    close={() => this.setState({...this.state, changePasswordDialogOpen: false})}\r\n                />\r\n                <ChangeEmail\r\n                    open={changeEmailDialogIsOpen}\r\n                    close={() => this.setState({...this.state, changeEmailDialogOpen: false})}\r\n                />\r\n\r\n                <Paper className={classes.profilePaper} elevation={6}>\r\n                    <Typography variant='h5' align='left' className={classes.header}>\r\n                        Profile\r\n                    </Typography>\r\n\r\n                    <Tooltip title='Edit Information'>\r\n                        <IconButton className={classes.editButton} color=\"primary\" onClick={this.handleEdit} disableFocusRipple disableRipple>\r\n                                <Edit/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Grid container spacing={1}>\r\n                        {\r\n                            Object.keys(userProperties).map((property, index) => (\r\n                                <Grid key={index} item xs={12} md={6}>\r\n                                    <TextField\r\n                                        name={property}\r\n                                        label={userProperties[property].label}\r\n                                        value={this.state[property].value}\r\n                                        error={!this.state[property].valid}\r\n                                        helperText={this.state[property].valid ? '' : userProperties[property].requirement}\r\n                                        key={index}\r\n                                        onChange={this.handleChange}\r\n                                        inputProps={{\r\n                                            readOnly: !editable\r\n                                        }}\r\n                                        InputLabelProps={{\r\n                                            shrink: true,\r\n                                        }}\r\n                                        className={classes.textField}\r\n                                    />\r\n                                </Grid>\r\n                            ))\r\n                        }\r\n\r\n                        <Grid item xs={6}>\r\n\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    { editable &&\r\n                        <Grid className={classes.buttonGrid} container>\r\n                                <Grid item md={9} xs={false}></Grid>\r\n                                <Grid item md={1} xs={6}>\r\n                                    <Button onClick={this.handleCancel}>Cancel</Button>\r\n\r\n                                </Grid>\r\n\r\n                                <Grid item md={2} xs={6}>\r\n                                    <Button\r\n                                        onClick={this.handleConfirm}\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={!infoHasChanged || !formIsValid}\r\n                                    >\r\n                                        Confirm\r\n                                    </Button>\r\n                                </Grid>\r\n                        </Grid>\r\n                    }\r\n\r\n                </Paper>\r\n\r\n                <Paper className={classes.accountPaper} elevation={6}>\r\n                    <Typography variant='h5' align='left' className={classes.header}>\r\n                        Account\r\n                    </Typography>\r\n                    <Grid container >\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                name='email'\r\n                                label= 'Email'\r\n                                value={this.state.email.value}\r\n                                inputProps={{\r\n                                    readOnly: true\r\n                                }}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                className={classes.textField}\r\n                            />\r\n                            <Tooltip title='Change Email'>\r\n                                <IconButton \r\n                                    color=\"primary\" \r\n                                    disableFocusRipple \r\n                                    disableRipple\r\n                                    onClick={() => showChangeEmailDialog()}\r\n                                >\r\n                                    <Edit/>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={12}>                            \r\n                            <TextField\r\n                                name='Password'\r\n                                label= 'Password'\r\n                                value= '********'\r\n                                inputProps={{\r\n                                    readOnly: true\r\n                                }}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                className={classes.textField}\r\n                            />\r\n                            <Tooltip title='Change Password'>\r\n                                <IconButton \r\n                                    color=\"primary\" \r\n                                    disableFocusRipple \r\n                                    disableRipple\r\n                                    onClick={() => showChangePasswordDialog()}\r\n                                >\r\n                                    <Edit/>\r\n                                </IconButton>\r\n                            </Tooltip>                            \r\n                        </Grid>\r\n                    </Grid>\r\n\r\n\r\n                </Paper>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Profile));","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n\r\n})\r\n\r\nconst ValidationTool = (props) => {\r\n\r\n    const { classes } = props;\r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='h1'>\r\n                Validation Tool\r\n            </Typography>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ValidationTool);","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Typography, Paperider, Grid, Paper } from '@material-ui/core';\r\n\r\nimport { ArrowRightAlt } from '@material-ui/icons';\r\n\r\nconst styles = (theme) => ({\r\n    pageHeader: {\r\n        color: 'white',\r\n        marginTop: theme.spacing(4),\r\n        marginBottom: theme.spacing(7),\r\n        fontWeight: 100\r\n    },\r\n\r\n    guideSection: {\r\n        color: 'white',\r\n        width: '65vw',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        marginBottom: theme.spacing(8),\r\n        padding: theme.spacing(2)\r\n    },\r\n\r\n    sectionHeader: {\r\n        color: theme.palette.primary.main\r\n    },\r\n\r\n    sectionContent: {\r\n        marginLeft: theme.spacing(1),\r\n        marginTop: theme.spacing(2)\r\n    },\r\n\r\n    gridItem: {\r\n        padding: theme.spacing(2)\r\n    },\r\n\r\n    getStartedPaper: {\r\n        width: '50vw',\r\n        color: theme.palette.primary.main,\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        marginBottom: theme.spacing(12),\r\n        padding: theme.spacing(2)        \r\n    }\r\n})\r\n\r\nconst SubmissionGuide = (props) => {\r\n    const { classes } = props;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography variant='h3' className={classes.pageHeader}>\r\n                Submitting Data to CMAP\r\n            </Typography>\r\n\r\n            <Paper className={classes.guideSection} elevation={9}>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={7} className={classes.gridItem}>\r\n                        <Typography variant='h5' align='left' className={classes.sectionHeader}>\r\n                            The Simons CMAP Database\r\n                        </Typography>\r\n\r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            Information about our database, its organization and indexing.\r\n                        </Typography>\r\n                        \r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            What does submitting data mean / data ingestion process\r\n                        </Typography>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={5} className={classes.gridItem}>\r\n                        <img alt='What' width='100%' src='/images/catalog/viz_sample.png'/>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n\r\n            <Paper className={classes.guideSection} elevation={9}>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={5} className={classes.gridItem}>\r\n                        <img alt='What' width='100%' src='/images/catalog/viz_sample.png'/>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={7} className={classes.gridItem}>\r\n                        <Typography variant='h5' align='left' className={classes.sectionHeader}>\r\n                            The Simons CMAP Database\r\n                        </Typography>\r\n\r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            Information about our database, its organization and indexing, importance of uniformity.\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n\r\n            <Paper className={classes.guideSection} elevation={9}>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={7} className={classes.gridItem}>\r\n                        <Typography variant='h5' align='left' className={classes.sectionHeader}>\r\n                            The Simons CMAP Database\r\n                        </Typography>\r\n\r\n                        <Typography align='left' variant='body1' className={classes.sectionContent}>\r\n                            Information about our database.\r\n                        </Typography>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={5} className={classes.gridItem}>\r\n                        <img alt='What' width='100%' src='/images/catalog/viz_sample.png'/>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(SubmissionGuide);","import React from 'react';\r\n\r\nimport { Route, Switch } from 'react-router-dom'\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ValidationTool from './ValidationTool';\r\nimport SubmissionGuide from './SubmissionGuide';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        paddingTop: '70px'\r\n    }\r\n})\r\n\r\nconst DataSubmission = (props) => {\r\n    const { classes, match } = props;\r\n    console.log(match)\r\n    return (\r\n        <div className={classes.root}>\r\n            <Switch>          \r\n              <Route exact path={match.url + '/guide'} component={ SubmissionGuide } />\r\n              <Route exact path={match.url + '/validationtool'} component={ ValidationTool } />\r\n            </Switch>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(DataSubmission);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Typography, TextField, Paper, Grid, Button } from '@material-ui/core';\r\n\r\nimport { snackbarOpen } from '../Redux/actions/ui';\r\nimport { contactUsRequestSend } from '../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        color: 'white',\r\n        width: '65vw',\r\n        marginTop: theme.spacing(18),\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        marginBottom: theme.spacing(8),\r\n        padding: theme.spacing(2)\r\n    },\r\n\r\n    header: {\r\n        color: theme.palette.primary.main,\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    \r\n    description: {\r\n        marginBottom: theme.spacing(3)\r\n    },\r\n\r\n    textField: {\r\n        marginLeft: 0,\r\n        marginRight: theme.spacing(2),\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n\r\n    messageTextField: {\r\n        width: '100%'\r\n    },\r\n\r\n    submitButton: {\r\n        marginTop: theme.spacing(2),\r\n        color: 'white'\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    contactUsRequestSend,\r\n    snackbarOpen\r\n};\r\n\r\nclass ContactUs extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            name: props.user ? props.user.firstName + ' ' + props.user.lastName : '',\r\n            email: props.user ? props.user.email : '',\r\n            subject: '',\r\n            message: ''\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({...this.state, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        let payload = {...this.state};\r\n        var invalid = false;\r\n        Object.keys(payload).forEach(key => {\r\n            payload[key] = payload[key].trim();\r\n            if(payload[key].length < 1) invalid = true;\r\n        });\r\n\r\n        if(invalid) {\r\n            this.props.snackbarOpen('Please complete all fields');\r\n            return;\r\n        }\r\n        \r\n        this.props.contactUsRequestSend(payload);\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <Paper className={classes.root} elevation={6}>\r\n                <Typography variant='h4' className={classes.header} align='left'>\r\n                    Contact Us\r\n                </Typography>\r\n    \r\n                <Typography variant='body2' className={classes.description} align='left'>\r\n                    Have a question or feedback? Fill out the form below to contact a member of the Simons CMAP team.\r\n                </Typography>\r\n\r\n                <Grid container>\r\n                    <Grid item container direction='column' justify='flex-start' xs={12} md={3}>\r\n                        <TextField\r\n                            name='name'\r\n                            label='Name'\r\n                            value={this.state.name}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n\r\n                        <TextField\r\n                            name='email'\r\n                            label='Email'\r\n                            value={this.state.email}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n\r\n                        <TextField\r\n                            name='subject'\r\n                            label='Subject'\r\n                            value={this.state.subject}\r\n                            onChange={this.handleChange}\r\n                            className={classes.textField}\r\n                            variant='outlined'\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} md={9}>\r\n                        <TextField\r\n                            placeholder='Your message...'\r\n                            value={this.state.message}\r\n                            className={classes.messageTextField}\r\n                            name='message'\r\n                            onChange={this.handleChange}\r\n                            multiline\r\n                            rows='10'\r\n                            variant='outlined'\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary'\r\n                    className={classes.submitButton}\r\n                    onClick={this.handleSubmit}\r\n                >\r\n                    Submit\r\n                </Button>\r\n    \r\n            </Paper>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ContactUs));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Paper, Button, Typography, TextField } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { recoverPasswordRequestSend } from '../../Redux/actions/user';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '10% auto',\r\n        height: '40vh'\r\n    },\r\n\r\n    description: {\r\n        paddingTop: '110px'\r\n    },\r\n\r\n    emailSentDescription: {\r\n        padding: '140px 70px 0 70px'\r\n    },\r\n\r\n    sendButton: {\r\n        marginLeft: '8px',\r\n        marginTop: '9px',\r\n        height: '41px'\r\n    },\r\n\r\n    formWrapper: {\r\n        marginTop: '24px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    recoverPasswordRequestSend\r\n}\r\n\r\nconst ForgotPass = (props) => {\r\n    const { classes } = props;\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [emailWasSent, setEmailWasSent] = React.useState(false);\r\n\r\n    const handleChange = event => {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    const handleSubmit = event => {\r\n        setEmailWasSent(true);\r\n        props.recoverPasswordRequestSend(email);\r\n    }\r\n\r\n    const handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n          handleSubmit();\r\n        }\r\n    }\r\n\r\n    const valid = email === '' || /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/.test(email);\r\n\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            {emailWasSent ? \r\n                <Typography className={classes.emailSentDescription}>\r\n                    An email has been sent to {email}. If you don't received anything from us within the next few minutes please check your spam folder.\r\n                </Typography>\r\n            :\r\n                <React.Fragment>\r\n                    <Typography className={classes.description}>\r\n                        Enter your email address below to recover your username and password.\r\n                    </Typography>\r\n            \r\n                    <div className={classes.formWrapper}>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"email\"\r\n                            type=\"text\"\r\n                            variant='outlined'\r\n                            name='email'                        \r\n                            value={email}\r\n                            onChange={handleChange}\r\n                            error={!valid}\r\n                            helperText={valid ? '' : 'Please enter a valid email address'}\r\n                            onKeyPress={handleKeyPress}\r\n                        />\r\n                        <Button \r\n                            color='primary' \r\n                            variant='contained' \r\n                            className={classes.sendButton} \r\n                            onClick={handleSubmit}\r\n                            disabled={Boolean(!valid || !email.length)}\r\n                        >\r\n                            Submit\r\n                        </Button>\r\n                    </div>               \r\n                </React.Fragment>\r\n            }\r\n        </Paper>                \r\n    )    \r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(ForgotPass));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nimport { Paper, Button, Typography, TextField, Grid, Link } from '@material-ui/core';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { choosePasswordRequestSend, choosePasswordRequestReset } from '../../Redux/actions/user';\r\n\r\nimport states from '../../Enums/asyncRequestStates';\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        width: '60%',\r\n        margin: '10% auto',\r\n        // height: '40vh',\r\n        padding: '24px 12px'\r\n    },\r\n\r\n    textFields: {\r\n        display: 'block',\r\n        width: '380px'\r\n    },\r\n\r\n    description: {\r\n        marginBottom: '12px'\r\n    },\r\n\r\n    formGrid: {\r\n        height: '270px',\r\n        padding: '0 90px'\r\n\r\n    },\r\n\r\n    button: {\r\n        width: '120px'\r\n    }\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    choosePasswordRequestSend,\r\n    choosePasswordRequestReset\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    choosePasswordState: state.choosePasswordState,\r\n  });\r\n\r\n// Used with forgot password link from email\r\nclass ChoosePassword extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        let token = props.location.pathname.split('/')[2];\r\n        let decodedToken = jwtDecode(token)\r\n        console.log(decodedToken);\r\n        let expiration = new Date(0);\r\n        expiration.setUTCSeconds(decodedToken.exp);\r\n\r\n        let expired = new Date() > expiration;\r\n\r\n        this.state = {\r\n            password: '',\r\n            confirmPassword: '',\r\n            expired,\r\n            token,\r\n            email: decodedToken.sub\r\n        }\r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        this.props.choosePasswordRequestReset();\r\n    }\r\n\r\n    handleChangePassword = event => {\r\n        this.setState({...this.state, password: event.target.value});\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        this.props.choosePasswordRequestSend({\r\n            password: this.state.password,\r\n            token: this.state.token\r\n        })\r\n    }\r\n    handleChangeConfirmPassword = event => {\r\n        this.setState({...this.state, confirmPassword: event.target.value});\r\n    }\r\n\r\n    handleKeyPress = event => {\r\n        if (event.key === 'Enter') {\r\n          this.handleSubmit();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { classes, choosePasswordState } = this.props;\r\n        const { password, confirmPassword, expired } = this.state;\r\n\r\n        const passwordValid = /^(?=.*[0-9])(?=.*[.!@#$%^&*])[a-zA-Z0-9.!@#$%^&*]{8,32}$/.test(password);\r\n        const confirmPasswordValid = password === confirmPassword;    \r\n        const disabled = Boolean(password.length === 0 || !passwordValid || !confirmPasswordValid);\r\n        \r\n        if(expired){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        This link has expired. Click here to send a <Link component={RouterLink} to={{pathname: '/forgotpass'}}>new link</Link>.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        }\r\n\r\n        if(choosePasswordState === states.succeeded){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        Success! You can now log in using your new password.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        } \r\n        \r\n        else if(choosePasswordState === states.failed){\r\n            return (\r\n                <Paper className={classes.paper}>\r\n                    <Typography className={classes.description}>\r\n                        We were unable to complete this request. Please try again.\r\n                    </Typography>\r\n                </Paper>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Paper className={classes.paper}>\r\n                <Typography className={classes.description}>\r\n                    Please choose a password\r\n                </Typography>\r\n    \r\n                <Grid direction='column' justify='space-evenly' className={classes.formGrid} container>\r\n                    <Grid item>\r\n                        <TextField     \r\n                            fullWidth           \r\n                            autoFocus\r\n                            label='Password'\r\n                            margin=\"normal\"\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='password'                        \r\n                            value={password}\r\n                            onChange={this.handleChangePassword}\r\n                            error={Boolean(!passwordValid && password.length)}\r\n                            helperText='Must be 8 to 32 characters with 1 number and 1 special character.'\r\n                            onKeyPress={this.handleKeyPress}\r\n                            InputLabelProps={{\r\n                                shrink: true\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n    \r\n                    <Grid item>\r\n                        <TextField\r\n                            fullWidth\r\n                            label='Confirm Password'\r\n                            margin=\"normal\"\r\n                            id=\"confirmPassword\"\r\n                            type=\"password\"\r\n                            variant='outlined'\r\n                            name='confirmPassword'                        \r\n                            value={confirmPassword}\r\n                            onChange={this.handleChangeConfirmPassword}\r\n                            error={!confirmPasswordValid}\r\n                            helperText={confirmPasswordValid ? '' : 'Passwords must match'}\r\n                            onKeyPress={this.handleKeyPress}\r\n                            InputLabelProps={{\r\n                                shrink: true\r\n                            }}\r\n                        />                    \r\n                    </Grid>\r\n    \r\n                    <Grid item>\r\n                        <Button fullWidth variant='outlined' color='primary' disabled={disabled} onClick={this.handleSubmit}>\r\n                            Submit\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>   \r\n            </Paper>                \r\n        )    \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withStyles(styles)(ChoosePassword)));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\nimport './Stylesheets/App.scss';\r\n\r\nimport colors from './Enums/colors';\r\n\r\nimport { Route, BrowserRouter, Switch } from 'react-router-dom'\r\n\r\nimport Home from './Components/Home';\r\nimport Catalog from './Components/Catalog/Catalog';\r\nimport Register from './Components/User/Register';\r\nimport Visualization from './Components/Visualization/Visualization';\r\nimport GlobalUIComponentWrapper from './Components/UI/GlobalUIComponentWrapper';\r\nimport LandingPage from './Components/LandingPage';\r\nimport TopNavBar from './Components/UI/TopNavBar';\r\nimport Login from './Components/User/Login';\r\nimport Profile from './Components/User/Profile';\r\nimport DataSubmission from './Components/DataSubmission/DataSubmission';\r\nimport ContactUs from './Components/ContactUs';\r\n\r\nimport { initializeGoogleAuth } from './Redux/actions/user';\r\nimport ForgotPass from './Components/User/ForgotPass';\r\nimport ChoosePassword from './Components/User/ChoosePassword';\r\n\r\nconst theme = createMuiTheme({\r\n\r\n  typography: {\r\n    useNextVariants: true,\r\n    fontFamily: [\r\n      '\"Lato\"',\r\n      'sans-serif'\r\n    ].join(',')\r\n  },\r\n\r\n  palette: {\r\n    primary: {\r\n      contrastText: '#000000',\r\n      main: colors.primary\r\n    },\r\n\r\n    error: {\r\n      main: colors.errorYellow\r\n    },\r\n\r\n    secondary: {\r\n      main: colors.secondary,\r\n      // contrastText: '#fff700',\r\n    },\r\n\r\n    background: {\r\n      default: colors.backgroundGray,\r\n      paper: colors.backgroundGray\r\n    },\r\n\r\n    text: {\r\n      primary: '#ffffff',\r\n      secondary: colors.primary\r\n    }\r\n  },\r\n\r\n  overrides: {\r\n    MuiIconButton: {\r\n      root: {\r\n        color: colors.primary,\r\n        borderRadius: '10%'\r\n      }\r\n    },\r\n    \r\n    MuiPaper: {\r\n      root: {\r\n        backgroundColor: 'rgba(0,0,0,.3)',\r\n      }\r\n    },\r\n\r\n    MuiListItemIcon: {\r\n      root: {\r\n        minWidth: '40px'\r\n      }\r\n    },\r\n\r\n    MuiFormHelperText: {\r\n      filled: {\r\n        paddingLeft: '1px',\r\n        paddingRight: '1px',\r\n        fontSize: '13px'\r\n      }\r\n    },\r\n\r\n    MuiListItem: {\r\n      gutters: {\r\n        paddingLeft: '6px',\r\n        paddingRight: '10px'\r\n      },\r\n\r\n      root: {\r\n        paddingTop: '4px',\r\n        paddingBottom: '4px'\r\n      }\r\n    },\r\n\r\n    MuiToolbar: {\r\n      root: {\r\n        backgroundColor: 'transparent',\r\n        color: colors.primary\r\n      }\r\n    },\r\n\r\n    MuiMenuItem: {\r\n      root: {\r\n        '&:hover': {\r\n          backgroundColor: colors.greenHover,\r\n        },\r\n      }\r\n    },\r\n\r\n    MuiOutlinedInput: {\r\n      input: {\r\n        padding: '12px 14px'\r\n      },\r\n\r\n      root: {\r\n        \"&$focused\": {\r\n          \"borderColor\": colors.primary\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiButtonGroup: {\r\n      groupedOutlined: {\r\n        '&:not(:first-child)': {\r\n          marginLeft: 0\r\n        }\r\n      }\r\n    },\r\n\r\n    MuiTableCell: {\r\n      root: {\r\n        borderBottomColor: \"rgba(0, 0, 0, 0.9)\"\r\n      }\r\n    },\r\n\r\n    MuiFormControl: {\r\n      marginNormal: {\r\n        marginTop: '8px'\r\n      }\r\n    },\r\n\r\n    MuiDialogContentText: {\r\n      root: {\r\n        color: 'white'\r\n      }\r\n    },\r\n\r\n    MuiDialogTitle: {\r\n      root: {\r\n        color: colors.primary\r\n      }\r\n    },\r\n\r\n    MuiFilledInput: {\r\n      input: {\r\n        paddingLeft: '6px',\r\n      },\r\n\r\n      inputSelect: {\r\n        paddingBottom: '6px'\r\n      },\r\n\r\n      adornedEnd: {\r\n        paddingRight: '6px'\r\n      },\r\n\r\n      root: {\r\n        backgroundColor: 'transparent',\r\n        '&:hover': {\r\n          backgroundColor: 'transparent',\r\n        },\r\n        '&:disabled': {\r\n          backgroundColor: 'transparent',\r\n        }\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  loadingMessage: state.loadingMessage\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  initializeGoogleAuth\r\n};\r\n\r\nclass App extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <div className=\"App\">\r\n          <MuiThemeProvider theme={theme}>\r\n          <BrowserRouter>\r\n            <GlobalUIComponentWrapper/>\r\n            <TopNavBar/>\r\n            <Switch>          \r\n              <Route exact path='/apikeymanagement' component={ Home } />\r\n              <Route exact path='/' component={ LandingPage } />\r\n              <Route exact path='/catalog' component={ Catalog } />\r\n              <Route exact path='/login' component={ Login } />\r\n              <Route exact path='/register' component={ Register } />\r\n              <Route exact path='/visualization' component={Visualization} />\r\n              <Route exact path='/profile' component={Profile} />\r\n              <Route exact path='/forgotpass' component={ForgotPass} />\r\n              <Route path='/datasubmission' component={DataSubmission} />\r\n              <Route path='/choosepassword' component={ChoosePassword} />\r\n              <Route exact path='/contact' component={ContactUs}/>\r\n            </Switch>\r\n          </BrowserRouter>\r\n          </MuiThemeProvider>\r\n        </div>\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './Stylesheets/index.css';\nimport 'ag-grid-enterprise';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from 'react-redux'\nimport store from './Redux/store';\n\nimport App from './App'\n\nimport {LicenseManager} from \"ag-grid-enterprise\";\n\nLicenseManager.setLicenseKey(\"School_of_Oceanography_Simons_CMAP_1Devs_1Deployment_19_June_2020__MTU5MjUyMTIwMDAwMA==aec33f954c06d90afed06467402921bd\");\n\nconst rootElement = document.getElementById('root')\nReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n  rootElement\n)\n\nserviceWorker.unregister();\n"],"sourceRoot":""}