(this.webpackJsonpcmap_react=this.webpackJsonpcmap_react||[]).push([[15],{652:function(e,a,t){"use strict";a.a={default:{title:"Simons Collaborative Marine Ocean Atlas",description:"Simons Collaborative Marine Atlas Project is an open-source data portal interconnecting data sets across Oceanography disciplines. It enables scientists and the public to dive into the vast and often underutilized ocean datasets to retrieve custom subsets of data."},visualization:{title:"CMAP Data Visualization",description:"Generate scatter plots, heatmaps, cruise routes, and more using oceanographic data from from CMAP datasets."},catalog:{title:"CMAP Catalog",description:"Search for oceanographic datasets in the CMAP database using keywords, or temporal or spatial coverage."},dataSubmission:{title:"CMAP Data Submission",description:"Validate and submit your dataset. Track the progress of your previous submissions."},community:{title:"CMAP Community",description:"Join the CMAP team on slack, follow us on github, or download the CMAP software package for Python, R, Julia, or MATLAB."}}},655:function(e,a,t){"use strict";var n=[5,15,25,35,45,55,65,75.005,85.025,95.095,105.31,115.87,127.15,139.74,154.47,172.4,194.735,222.71,257.47,299.93,350.68,409.93,477.47,552.71,634.735,722.4,814.47,909.74,1007.155,1105.905,1205.535,1306.205,1409.15,1517.095,1634.175,1765.135,1914.15,2084.035,2276.225,2491.25,2729.25,2990.25,3274.25,3581.25,3911.25,4264.25,4640.25,5039.25,5461.25,5906.25],r=[.494024991989,1.54137504101,2.64566898346,3.81949496269,5.07822418213,6.44061422348,7.92956018448,9.5729970932,11.404999733,13.4671401978,15.8100700378,18.4955596924,21.5988197327,25.2114105225,29.4447307587,34.4341506958,40.3440513611,47.3736915588,55.764289856,65.8072662354,77.8538513184,92.3260726929,109.729301453,130.666000366,155.850692749,186.125595093,222.475204468,266.040313721,318.127410889,380.213012695,453.937713623,541.088928223,643.566772461,763.333129883,902.339294434,1062.43994141,1245.29101562,1452.25097656,1684.28405762,1941.89294434,2225.07788086,2533.3359375,2865.70288086,3220.82006836,3597.03198242,3992.48388672,4405.22412109,4833.29101562,5274.78417969,5727.91699219],o=new Set(["tblPisces_NRT","tblPisces_NRT_Calendar"]),l=new Set(["tblDarwin_Chl_Climatology","tblDarwin_Ecosystem","tblDarwin_Nutrient","tblDarwin_Nutrient_Climatology","tblDarwin_Ocean_Color","tblDarwin_Phytoplankton","tblDarwin_Plankton_Climatology"]),s={count:function(e,a,t){var s=e.data.Table_Name,i=0;if(o.has(s))for(var c=0;c<r.length&&!(r[c]>t);c++)r[c]>a&&i++;else if(l.has(s))for(var p=0;p<n.length&&!(n[p]>t);p++)n[p]>a&&i++;return i},piscesTable:o,darwinTable:l,piscesDepths:r,darwinDepths:n};a.a=s},664:function(e,a,t){"use strict";var n=t(76),r=t(0),o=t.n(r),l=t(249),s=t(573),i=t(797),c=t(798),p=t(847),u=t(15),m=t(639),d=t(796),h=t(33);a.a=Object(u.a)((function(e){return{menuOpenIcon:{color:h.a.primary,margin:"0 8px 0 4px"},formGroupWrapper:{textAlign:"left",paddingLeft:"20px"},multiSelectHeader:{fontSize:"13px",margin:"6px 0px 2px 0px"},formControlLabelRoot:{height:"30px"},formControlLabelLabel:{fontSize:"14px"},checkboxGroupHeader:{"&:hover":{backgroundColor:h.a.greenHover},cursor:"pointer",height:"38px",boxShadow:"0px 0px 0px 1px #242424",marginTop:"8px"}}}))((function(e){var a=e.classes,t=e.selectedOptions,r=e.handleClear,u=e.options,h=e.parentStateKey,g=e.handleClickCheckbox,b=e.groupHeaderLabel,f=o.a.useState(!1),x=Object(n.a)(f,2),y=x[0],v=x[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{item:!0,xs:12,container:!0,alignItems:"center",className:a.checkboxGroupHeader,onClick:function(){return v(!y)}},y?o.a.createElement(m.a,{className:a.menuOpenIcon}):o.a.createElement(d.a,{className:a.menuOpenIcon}),b),y?o.a.createElement(l.a,{item:!0,xs:12,className:a.formGroupWrapper},t.size?o.a.createElement(l.a,{item:!0,container:!0,cs:12,justify:"flex-start",className:a.multiSelectHeader},o.a.createElement("span",{style:{marginRight:"8px"}},t.size," Selected "),o.a.createElement(s.a,{component:"button",onClick:r},"Reset")):"",o.a.createElement(i.a,null,u.map((function(e,n){return o.a.createElement(l.a,{item:!0,xs:12,key:n},o.a.createElement(c.a,{control:o.a.createElement(p.a,{color:"primary",onChange:g,className:a.checkbox,size:"small",name:h+"!!"+e,checked:t.has(e)}),label:e,classes:{root:a.formControlLabelRoot,label:a.formControlLabelLabel}}))})))):"")}))},893:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),o=t(22),l=t(3),s=t(47),i=t(48),c=t(78),p=t(77),u=t(0),m=t.n(u),d=t(42),h=t(34),g=t(143),b=t(115),f=t(15),x=t(76),y=t(262),v=t(73),S=t.n(v),A=t(89),E=t(248),C=t(586),O=t(647),w=t(249),D=t(375),N=t(634),T=t(247),L=t(865),M=t(863),k=t(796),P=t(702),z=t(584),j=t(801),I=t(864),R=t(866),_=t(24),F=t(5),V=t(33),B=t(43),H={depth:{depthOneIsLower:"Cannot be larger than end",depthOneOutOfBounds:"Data ends at $",depthTwoOutOfBounds:"Data begins at $",negative:"Cannot be negative"},date:{dateOneIsLater:"Cannot be after end",dateOneOutOfBounds:"Data ends at $",dateTwoOutOfBounds:"Data begins at $"},lat:{latOneIsHigher:"Cannot be larger than end",latOneOutOfBounds:"Data ends at $",latTwoOutOfBounds:"Data begins at $"},lon:{lonOneIsHigher:"Cannot be larger than end",lonOneOutOfBounds:"Data ends at $",lonTwoOutOfBounds:"Data begins at $"},type:{dataIsIrregular:"$ is not available for sparse data",dateRangeRequired:"$ requires a range of dates",depthRangeRequired:"$ requires a range of depths",surfaceOnlyDataset:"$ contains only surface data",irregularOnly:"Sparse map is only available for sparse data",dataSizeTooLarge:"Data set is too large for this visualization type.",webGLContextLimit:"Rendering limit exceeded for plots. Please delete one or more."},generic:{invalid:"Invalid input",dataSizeWarning:"Wait time and application performance may be poor due to size of data.",dataSizePrevent:"Data set is too large. Please reduce date range or area size.",variableMissing:"Please select a variable",vizTypeMissing:"Please select a visualization type",guestMaximumReached:"Guests are limited to creating 10 plots per day. Please log in or register."}},G=t(82),Y=t(90),U=function(e){return{[Y.a.threeMinutes]:1,[Y.a.sixHourly]:1,[Y.a.daily]:1,[Y.a.weekly]:7,[Y.a.monthly]:30,[Y.a.annual]:365,[Y.a.irregular]:null,[Y.a.monthlyClimatology]:30,[Y.a.threeDay]:3,[Y.a.eightDayRunning]:8,[Y.a.eightDays]:8}[e]},W=t(350),q=t(655),K=function(e){var a=0;return e.forEach((function(e){e.subType===g.a.heatmap&&a++,e.subType===g.a.sparse&&(a++,e.data.variableValues.length>1e4&&(a+=3)),e.subType===g.a.depthProfile&&e.data.variableValues.length>1e4&&a++,e.subType===g.a.timeSeries&&e.data.variableValues.length>1e4&&a++})),a},Q=function(e){return{[g.a.sectionMap]:{sp:b.a.sectionMap,subType:g.a.sectionMap},[g.a.contourSectionMap]:{sp:b.a.sectionMap,subType:g.a.contourSectionMap},[g.a.timeSeries]:{sp:b.a.timeSeries,subType:g.a.timeSeries},[g.a.histogram]:{sp:b.a.spaceTime,subType:g.a.histogram},[g.a.depthProfile]:{sp:b.a.depthProfile,subType:g.a.depthProfile},[g.a.heatmap]:{sp:b.a.spaceTime,subType:g.a.heatmap},[g.a.contourMap]:{sp:b.a.spaceTime,subType:g.a.contourMap},[g.a.sparse]:{sp:b.a.spaceTime,subType:g.a.sparse}}[e]},Z=function(e){var a=e.depth1,t=e.depth2,n=e.dt1,r=e.dt2,o=e.fields,l=e.lat1,s=e.lat2,i=e.lon1,c=e.lon2,p=e.spName,u=e.tableName;return{depth1:parseFloat(a),depth2:parseFloat(t),dt1:n,dt2:r,fields:o,lat1:parseFloat(l),lat2:parseFloat(s),lon1:parseFloat(i),lon2:parseFloat(c),spName:p,tableName:u}},J=function(e){var a=0;return e.forEach((function(e){a+=e.data.variableValues&&e.data.variableValues.length?e.data.variableValues.length:0})),a},X=function(e){var a=e.Temporal_Resolution===Y.a.monthlyClimatology?1:e.Time_Min.slice(0,10),t=e.Temporal_Resolution===Y.a.monthlyClimatology?1:e.Time_Max.slice(0,10),n=Math.floor(1e3*e.Lat_Min)/1e3,r=Math.ceil(1e3*e.Lat_Max)/1e3,o=Math.floor(1e3*e.Lon_Min)/1e3,l=Math.ceil(1e3*e.Lon_Max)/1e3,s=!e.Depth_Max,i="Irregular"===e.Spatial_Resolution;return{lat1:n,lat2:r,lon1:o,lon2:l,depth1:s?0:i&&Math.floor(1e3*e.Depth_Min)/1e3||0,depth2:s?0:i?Math.ceil(1e3*e.Depth_Max)/1e3||0:q.a.piscesTable.has(e.Table_Name)?((q.a.piscesDepths[0]+q.a.piscesDepths[1])/2).toFixed(2):q.a.darwinTable.has(e.Table_Name)?((q.a.darwinDepths[0]+q.a.darwinDepths[1])/2).toFixed(2):11e3,dt1:a,dt2:t}},$=t(701),ee=t(573),ae=t(576),te=t(580),ne=t(589),re=t(640),oe=t(895),le=t(862),se=t(639),ie=t(582),ce=t(668),pe=t(18),ue=t(678),me=t.n(ue),de=t(568),he=t(571),ge=t(572),be=t(795),fe={datasetSummaryFetch:_.o},xe=Object(d.b)((function(e,a){return{datasetSummary:e.datasetSummary}}),fe)(Object(f.a)((function(e){return{dialogPaper:{backgroundColor:V.a.backgroundGray,minWidth:"700px",maxWidth:"60vw"},markdown:{"& img":{maxWidth:"100%",margin:"20px auto 20px auto",display:"block"},"& a":{color:e.palette.primary.main,textDecoration:"none"},"& p":{lineHeight:1.25}}}}))((function(e){var a=e.datasetSummary,t=e.classes,n=e.datasetSummaryFetch,r=e.datasetSummaryID,o=e.setDatasetSummaryID;m.a.useEffect((function(){n(r)}),[r]);return m.a.createElement(de.a,{style:{zIndex:B.a.NON_HELP_DIALOG},open:Boolean(r),onClose:function(){o(null),n(null)},PaperProps:{className:t.dialogPaper}},m.a.createElement(he.a,null,a?a.Dataset_Long_Name:m.a.createElement(be.a,null)),m.a.createElement(ge.a,null,a?m.a.createElement(me.a,{source:a.Description,className:t.markdown}):m.a.createElement(m.a.Fragment,null,m.a.createElement(A.a,null,m.a.createElement(be.a,null)),m.a.createElement(A.a,null,m.a.createElement(be.a,null)),m.a.createElement(A.a,null,m.a.createElement(be.a,null)),m.a.createElement(A.a,null,m.a.createElement(be.a,null)))),m.a.createElement(ge.a,{style:{padding:"16px 24px"}},a?m.a.createElement("span",null,"Detailed information for this dataset and its member variables is available",m.a.createElement(ee.a,{target:"_blank",href:"/catalog/datasets/".concat(a.Dataset_Name)}," here"),"."):m.a.createElement(be.a,null)))}))),ye={searchOption:{"&:hover":{backgroundColor:V.a.greenHover},cursor:"pointer",height:"38px",boxShadow:"0px 1px 1px 1px #242424",backgroundColor:"rgba(0,0,0,.4)"},searchOptionsMenuItemText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"calc(100% - 36px)",textAlign:"left"},heading:{textAlign:"left",padding:"8px 6px",color:V.a.primary,fontSize:"16px",marginTop:"5px",backgroundColor:"rgba(0,0,0,.4)"},variableItem:{height:"32px",textAlign:"left",fontSize:"14px",cursor:"pointer","&:hover":{backgroundColor:V.a.greenHover}},variablesWrapper:{backgroundColor:"rgba(0,0,0,.2)",paddingTop:"8px"},memberCount:{color:V.a.primary,fontWeight:"bold"},datasetOpenIcon:{color:V.a.primary,margin:"0 8px 0 4px"},infoIcon:{color:V.a.primary,cursor:"pointer"},listHeader:{color:V.a.primary,backgroundColor:"rgba(0,0,0,.2)",textAlign:"left"},variableName:{paddingLeft:"48px"}},ve=Object(d.b)((function(e,a){return{vizSearchResultsLoadingState:e.vizSearchResultsLoadingState,cart:e.cart}}),{})(Object(f.a)(ye)(m.a.memo((function(e){var a=e.classes,t=e.options,n=e.vizSearchResultsLoadingState,r=e.handleSelectDataTarget,o=e.handleSetVariableDetailsID,l=e.setdatasetSummaryID,s=e.listRef,i=e.make,c=e.fullCount,p=e.cart,d=m.a.useState(null),h=Object(x.a)(d,2),g=h[0],b=h[1],f=function(a){if(s.current){s.current.resetAfterIndex(0);var t=s.current.state.scrollOffset,n=38*a;null!==a&&(n<t-10||n>t+e.height-20)&&setTimeout((function(){return s.current.scrollToItem(a,"start")}),10)}b(a)};Object(u.useEffect)((function(){s.current&&s.current.resetAfterIndex(0)}),[t]);var y=t.reduce((function(e,a){return e+a.variables.length}),0),v=c-t.length,S=0===v?"":" (".concat(v," hidden)");return m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{container:!0},m.a.createElement(w.a,{item:!0,xs:9},m.a.createElement(A.a,{className:a.heading},n===pe.a.inProgress?"Searching....":y?m.a.createElement(m.a.Fragment,null,i," Data - Showing ",t.length," datasets",m.a.createElement(E.a,{enterDelay:50,placement:"top",title:"Variables and datasets which are not flagged as visualizable are not shown on this list, but can be found on the catalog page."},m.a.createElement("span",null,S))):"".concat(i," Data - No variables found for current search parameters"))),m.a.createElement(w.a,{item:!0,xs:3,container:!0,justify:"flex-start",alignItems:"center"},m.a.createElement(A.a,{variant:"caption",style:{color:V.a.primary,marginBottom:"-16px"}},"Variable Count"))),m.a.createElement(ce.b,{ref:s,itemData:t,itemCount:t.length,height:e.height||270,width:"100%",estimatedItemSize:38,style:{overflowY:"scroll"},itemSize:function(e){return g===e?32*t[e].variables.length+38+8:38}},(function(e){var n=e.index,s=e.style;return m.a.createElement("div",{style:s},m.a.createElement(w.a,{container:!0,className:a.searchOption,onClick:function(){return f(n===g?null:n)}},m.a.createElement(w.a,{item:!0,xs:9,container:!0,alignItems:"center"},g===n?m.a.createElement(se.a,{className:a.datasetOpenIcon}):m.a.createElement(k.a,{className:a.datasetOpenIcon}),m.a.createElement("span",{className:a.searchOptionsMenuItemText},t[n].Dataset_Name||t[n].Dataset_Name)),m.a.createElement(E.a,{title:"Dataset contains ".concat(t[n].variables.length," variables matching the search criteria")},m.a.createElement(w.a,{item:!0,xs:1,className:a.memberCount,container:!0,alignItems:"center",justify:"center"},t[n].variables.length)),m.a.createElement(w.a,{item:!0,xs:1,style:{paddingLeft:"12px"},container:!0,alignItems:"center"},m.a.createElement(E.a,{title:"View Dataset Details"},m.a.createElement(z.a,{className:a.infoIcon,onClick:function(e){e.stopPropagation(),l(t[n].variables[0].Dataset_ID)}}))),m.a.createElement(w.a,{item:!0,xs:1,container:!0,alignItems:"center"},p[t[n].Dataset_Name]?m.a.createElement(E.a,{title:"This dataset is on your favorites list"},m.a.createElement(ie.a,null)):"")),n===g?m.a.createElement(w.a,{container:!0,className:a.variablesWrapper},t[n].variables.map((function(e,t){return m.a.createElement(w.a,{item:!0,xs:12,key:e.Long_Name,className:a.variableItem,container:!0,alignItems:"center",onClick:function(){return r(e)}},m.a.createElement(w.a,{item:!0,xs:10,className:a.variableName},e.Long_Name),m.a.createElement(w.a,{item:!0,xs:2},m.a.createElement(E.a,{title:"View Variable Details"},m.a.createElement(z.a,{onClick:function(a){a.stopPropagation(),o(e.ID)},style:{paddingLeft:"12px"},className:a.infoIcon}))))}))):"")})))})))),Se=m.a.createRef(),Ae=m.a.createRef(),Ee=Object(d.b)((function(e,a){return{windowHeight:e.windowHeight,windowWidth:e.windowWidth,vizSearchResultsFullCounts:e.vizSearchResultsFullCounts}}),null)((function(e){var a=e.options,t=(e.classes,e.handleSelectDataTarget),n=(e.handleShowMemberVariables,e.vizSearchResultsLoadingState,e.make),r=(e.windowWidth,e.windowHeight),o=e.handleSetVariableDetailsID,l=e.vizSearchResultsFullCounts,s=m.a.useState(null),i=Object(x.a)(s,2),c=i[0],p=i[1];return m.a.createElement(m.a.Fragment,null,m.a.createElement(xe,{datasetSummaryID:c,setDatasetSummaryID:p}),n.has("Observation")&&n.has("Model")||0===n.size?m.a.createElement(m.a.Fragment,null,m.a.createElement(ve,{make:"Observation",options:a.Observation,handleSetVariableDetailsID:o,listRef:Se,handleSelectDataTarget:t,height:(r-204)/2-45,setdatasetSummaryID:p,fullCount:l.Observation}),m.a.createElement(ve,{make:"Model",options:a.Model,handleSetVariableDetailsID:o,listRef:Ae,handleSelectDataTarget:t,height:(r-204)/2-45,setdatasetSummaryID:p,fullCount:l.Model})):n.has("Observation")?m.a.createElement(ve,{make:"Observation",options:a.Observation,handleSetVariableDetailsID:o,listRef:Se,handleSelectDataTarget:t,height:r-249,setdatasetSummaryID:p,fullCount:l.Observation}):m.a.createElement(ve,{make:"Model",options:a.Model,handleSetVariableDetailsID:o,listRef:Ae,height:r-249,handleSelectDataTarget:t,setdatasetSummaryID:p,fullCount:l.Model}))})),Ce=t(664),Oe=t(44),we={vizSearchResultsFetch:_.R,vizSearchResultsSetLoadingState:_.S,variableNameAutocompleteFetch:_.L,vizSearchResultsStore:_.T,searchOptionsFetch:Oe.r},De={hasDepth:"any",timeStart:"1900-01-01",timeEnd:(new Date).toISOString().slice(0,10),latStart:-90,latEnd:90,lonStart:-180,lonEnd:180,sensor:new Set,searchTerms:"",temporalResolution:"Any",spatialResolution:"Any",dataSource:"Any",distributor:"Any",processLevel:"Any",make:new Set,region:new Set},Ne=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state=Object(l.a)({memberVariablesDataset:null,showAdvanced:!1,sensorsMenuOpen:!1,regionsMenuOpen:!1,makesMenuOpen:!1},De),e.componentDidMount=function(){e.props.vizSearchResultsFetch({})},e.handleChangeSearchValue=function(a){e.updateStateAndSearch(Object(l.a)(Object(l.a)({},e.state),{},{[a.target.name]:a.target.value}))},e.handleChangeAutocomplete=function(a){return function(t,n){var r=Object(l.a)(Object(l.a)({},e.state),{},{[a]:n});e.updateStateAndSearch(r)}},e.updateStateAndSearch=function(a){e.props.vizSearchResultsSetLoadingState(pe.a.inProgress),e.props.vizSearchResultsStore({Observation:[],Model:[]}),e.setState(a),e.props.vizSearchResultsFetch(a)},e.handleChangeSensor=function(a,t){var n=Object(l.a)(Object(l.a)({},e.state),{},{sensor:t});e.setState(n),e.props.vizSearchResultsFetch(n)},e.handleChangeMake=function(a,t){var n=Object(l.a)(Object(l.a)({},e.state),{},{make:t});e.setState(n),e.props.vizSearchResultsFetch(n)},e.handleToggleShowAdvanced=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showAdvanced:!e.state.showAdvanced}))},e.handleResetSearch=function(){var a=Object(l.a)(Object(l.a)({},e.state),De);e.updateStateAndSearch(a)},e.handleToggleMenu=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{[a]:!e.state[a]}))},e.handleClickCheckbox=function(a,t){var n=a.target.name.split("!!"),r=Object(x.a)(n,2),o=r[0],s=r[1],i=new Set(e.state[o]);t?i.add(s):i.delete(s),e.updateStateAndSearch(Object(l.a)(Object(l.a)({},e.state),{},{[o]:i}))},e.handleClearMultiSelect=function(a){var t=Object(l.a)({},e.state);t[a]=De[a],e.updateStateAndSearch(t)},e.render=function(){var a=e.props,t=a.classes,n=a.handleSelectDataTarget,r=a.vizSearchResults,o=(a.autocompleteVariableNames,a.submissionOptions),l=a.windowHeight,s=e.state,i=s.searchTerms,c=s.memberVariablesDataset,p=s.hasDepth,u=s.timeStart,d=s.timeEnd,h=s.latStart,g=s.latEnd,b=s.lonStart,f=s.lonEnd,x=s.temporalResolution,y=s.spatialResolution,v=s.dataSource,S=s.distributor,E=s.processLevel,C=s.make,O=s.region,T=s.sensor;return m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{container:!0},m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(A.a,{style:{display:"inline-block"}},"Search and filter using the controls on the left. Select a variable to plot from the list on the right."),m.a.createElement(D.a,{startIcon:m.a.createElement(le.a,{style:{fontSize:"22px"}}),onClick:e.props.handleCloseDataSearch,className:t.closeIcon},"Close")),m.a.createElement(w.a,{item:!0,xs:4,style:{overflowY:"auto",maxHeight:l-204,padding:"16px",backgroundColor:"rgba(0,0,0,.4)",display:c?"none":""}},m.a.createElement(N.a,{fullWidth:!0,name:"searchTerms",onChange:e.handleChangeSearchValue,placeholder:"Search",value:i,InputProps:{classes:{root:t.inputRoot},startAdornment:m.a.createElement(m.a.Fragment,null,m.a.createElement($.a,{position:"start"},m.a.createElement(P.a,{style:{color:V.a.primary}})))},variant:"outlined",inputRef:e.props.searchInputRef}),m.a.createElement(Ce.a,{options:o.Make,selectedOptions:C,handleClear:function(){return e.handleClearMultiSelect("make")},parentStateKey:"make",handleClickCheckbox:e.handleClickCheckbox,groupHeaderLabel:"Makes"}),m.a.createElement(Ce.a,{options:o.Sensor,selectedOptions:T,handleClear:function(){return e.handleClearMultiSelect("sensor")},parentStateKey:"sensor",handleClickCheckbox:e.handleClickCheckbox,groupHeaderLabel:"Sensors"}),m.a.createElement(Ce.a,{options:o.Region,selectedOptions:O,handleClear:function(){return e.handleClearMultiSelect("region")},parentStateKey:"region",handleClickCheckbox:e.handleClickCheckbox,groupHeaderLabel:"Regions"}),m.a.createElement("div",{className:t.showAdvancedWrapper},m.a.createElement(ee.a,{component:"button",onClick:e.handleToggleShowAdvanced},e.state.showAdvanced?"Hide Additional Filters":"Additional Filters")),m.a.createElement("div",{style:e.state.showAdvanced?{}:{display:"none"}},m.a.createElement(w.a,{item:!0,container:!0,xs:12,className:t.searchPanelRow},m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(N.a,{name:"timeStart",className:t.formControl,id:"date",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:u,onChange:e.handleChangeSearchValue})),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(N.a,{name:"timeEnd",className:t.formControl,id:"date",label:"End Date",type:"date",InputLabelProps:{shrink:!0},value:d,onChange:e.handleChangeSearchValue}))),m.a.createElement(w.a,{item:!0,container:!0,xs:12,className:t.searchPanelRow},m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(N.a,{name:"latStart",className:t.formControl,label:"Lat Start\xb0",type:"number",inputProps:{min:-90,max:90},InputLabelProps:{shrink:!0},value:h,onChange:e.handleChangeSearchValue})),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(N.a,{name:"latEnd",className:t.formControl,label:"Lat End\xb0",type:"number",inputProps:{min:-90,max:90},InputLabelProps:{shrink:!0},value:g,onChange:e.handleChangeSearchValue})),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(N.a,{name:"lonStart",className:t.formControl,label:"Lon Start\xb0",type:"number",inputProps:{min:-180,max:180},InputLabelProps:{shrink:!0},value:b,onChange:e.handleChangeSearchValue})),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(N.a,{name:"lonEnd",className:t.formControl,label:"Lon End\xb0",type:"number",inputProps:{min:-180,max:180},InputLabelProps:{shrink:!0},value:f,onChange:e.handleChangeSearchValue})),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{className:t.formControl},m.a.createElement(te.a,null,"Depth Levels"),m.a.createElement(ne.a,{value:p,onChange:e.handleChangeSearchValue,name:"hasDepth",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:B.a.CONTROL_SECONDARY}}},m.a.createElement(re.a,{value:"any"},"Any"),m.a.createElement(re.a,{value:"yes"},"Multiple Levels"),m.a.createElement(re.a,{value:"no"},"Surface Only")))),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{className:t.formControl},m.a.createElement(te.a,null,"Process Level"),m.a.createElement(ne.a,{value:E,onChange:e.handleChangeSearchValue,name:"processLevel",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:B.a.CONTROL_SECONDARY}}},e.props.submissionOptions.Process_Level.map((function(e){return m.a.createElement(re.a,{key:e,value:e},e)}))))),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{className:t.formControl},m.a.createElement(te.a,null,"Temporal Resolution"),m.a.createElement(ne.a,{value:x,onChange:e.handleChangeSearchValue,name:"temporalResolution",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:B.a.CONTROL_SECONDARY}}},e.props.submissionOptions.Temporal_Resolution.map((function(e){return m.a.createElement(re.a,{key:e,value:e},e)}))))),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{className:t.formControl},m.a.createElement(te.a,null,"Spatial Resolution"),m.a.createElement(ne.a,{value:y,onChange:e.handleChangeSearchValue,name:"spatialResolution",MenuProps:{PopoverClasses:{paper:"".concat(t.autocompletePopperPaper," ").concat(t.addBorder)},style:{zIndex:B.a.CONTROL_SECONDARY}}},e.props.submissionOptions.Spatial_Resolution.map((function(e){return m.a.createElement(re.a,{key:e,value:e},e)}))))),m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(oe.a,{options:e.props.submissionOptions.Data_Source,renderInput:function(e){return m.a.createElement(N.a,Object.assign({margin:"none"},e,{label:"Data Source",InputLabelProps:{style:{fontSize:"12px",marginTop:"4px"}}}))},getOptionLabel:function(e){return e},onChange:e.handleChangeAutocomplete("dataSource"),disablePortal:!0,classes:{paper:"".concat(t.shiftedAutocompletePaper," ").concat(t.autocompletePopperPaper," ").concat(t.addBorder," "),input:t.regionSelectorInput,option:t.autocompleteOptions,popperDisablePortal:t.shiftedAutocompletePopper,listbox:t.shiftedAutocompleteListbox},value:v})),m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(oe.a,{options:e.props.submissionOptions.Distributor,renderInput:function(e){return m.a.createElement(N.a,Object.assign({margin:"none"},e,{label:"Distributor",InputLabelProps:{style:{fontSize:"12px",marginTop:"4px"}}}))},getOptionLabel:function(e){return e},onChange:e.handleChangeAutocomplete("distributor"),disablePortal:!0,classes:{paper:"".concat(t.shiftedAutocompletePaper," ").concat(t.autocompletePopperPaper," ").concat(t.addBorder," "),input:t.regionSelectorInput,option:t.autocompleteOptions,popperDisablePortal:t.shiftedAutocompletePopper,listbox:t.shiftedAutocompleteListbox},value:S})))),m.a.createElement(w.a,{item:!0,xs:12,className:t.searchPanelRow},m.a.createElement(D.a,{variant:"outlined",onClick:e.handleResetSearch,className:t.resetButton},"Reset Filters"))),m.a.createElement(w.a,{item:!0,xs:8,style:{paddingTop:"12px"}},m.a.createElement(Ee,{options:r,handleSelectDataTarget:n,handleShowMemberVariables:e.handleShowMemberVariables,make:C,variableDetailsID:e.props.variableDetailsID,handleSetVariableDetailsID:e.props.handleSetVariableDetailsID}))))},e}return t}(m.a.Component),Te=Object(d.b)((function(e,a){return{vizSearchResults:e.vizSearchResults,vizSearchResultsLoadingState:e.vizSearchResultsLoadingState,autocompleteVariableNames:e.autocompleteVariableNames,submissionOptions:e.submissionOptions,windowHeight:e.windowHeight}}),we)(Object(f.a)((function(e){return{inputRoot:{border:"1px solid ".concat(V.a.primary)},autocompletePopperPaper:{backgroundColor:"black",zIndex:B.a.CONTROL_SECONDARY},autocompleteOptions:{'&[data-focus="true"]':{backgroundColor:V.a.greenHover},textAlign:"left"},resetButton:{textTransform:"none",width:"160px",height:"37px",color:e.palette.primary.main,borderColor:e.palette.primary.main,marginTop:"12px"},searchPanelRow:{marginTop:"10px"},formControl:{width:"90%",marginBottom:"6px"},autoComplete:{width:"calc(100% - 48px)"},showAdvancedWrapper:{textAlign:"left",marginTop:"16px",width:"100%"},regionSelectorInput:{fontSize:"13px"},addBorder:{border:"1px solid ".concat(V.a.primary)},shiftedAutocompletePopper:{height:"400px",width:"500px",position:"absolute",bottom:"190px"},shiftedAutocompletePaper:{minHeight:"400px"},shiftedAutocompleteListbox:{maxHeight:0,minHeight:"400px",overflowX:"hidden"},closeIcon:{float:"right",cursor:"pointer",color:V.a.primary,textTransform:"none",fontSize:"15px"}}}))(Ne)),Le=t(592),Me=Object(f.a)((function(e){return{vizTypeSelectFormControl:{width:"100%","&:disabled":{backgroundColor:"transparent"}},vizTypeMenu:{backgroundColor:V.a.backgroundGray},vizTypeMenuItem:{"&:hover":{backgroundColor:V.a.greenHover}},visualizeButton:{textTransform:"none",height:"56px",borderRadius:0,backgroundColor:V.a.backgroundGray,color:e.palette.primary.main,fontVariant:"normal","&:disabled":{backgroundColor:"transparent"},"&:hover":{backgroundColor:V.a.greenHover,color:"white"}},vizButtonTooltip:{color:"yellow"}}}))((function(e){var a=e.classes,t=e.overrideDisabledStyle,n=e.heatmapMessage,r=e.contourMessage,o=e.sectionMapMessage,l=e.histogramMessage,s=e.timeSeriesMessage,i=e.depthProfileMessage,c=e.sparseMapMessage,p=e.visualizeButtonTooltip,u=e.disableVisualizeMessage,d=e.selectedVizType,h=e.handleChangeInputValue,b=e.handleVisualize,f=e.disabled;return m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{container:!0},m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(ae.a,{variant:"filled",className:a.vizTypeSelectFormControl},m.a.createElement(Le.a,{shrink:!0,htmlFor:"vizSelector",style:f?{color:"rgba(0,0,0,.38)"}:{}},"Select Chart Type"),m.a.createElement(ne.a,{disabled:f,className:a.vizTypeSelectFormControl,style:t,value:d,variant:"filled",onChange:h,inputProps:{name:"selectedVizType",id:"vizSelector",variant:"filled"},MenuProps:{MenuListProps:{className:a.vizTypeMenu}}},!n&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.heatmap,title:n},"Heatmap"),!r&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.contourMap},"Contour Heatmap"),!o&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.sectionMap},"Section Map"),!o&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.contourSectionMap},"Contour Section Map"),!l&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.histogram},"Histogram"),!s&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.timeSeries},"Time Series"),!i&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.depthProfile},"Depth Profile"),!c&&m.a.createElement(re.a,{className:a.vizTypeMenuItem,value:g.a.sparse},"Time and Space Plots")))),m.a.createElement(E.a,{placement:"right",title:p,className:a.vizButtonTooltip},m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(D.a,{className:a.visualizeButton,variant:"contained",onClick:function(){return b()},disabled:Boolean(u)||!d||f,fullWidth:!0},"Create Visualization")))))})),ke=t(633),Pe=t(672),ze=t(675),je=t(673),Ie=t(674),Re={variableFetch:_.J},_e=Object(d.b)((function(e,a){return{data:e.variableDetails}}),Re)(Object(f.a)((function(e){return{dialogPaper:{backgroundColor:V.a.backgroundGray,width:"700px"},closeIcon:{display:"inline",float:"right",cursor:"pointer"}}}))((function(e){var a=e.data,t=e.classes,n=e.variableFetch,r=e.variableDetailsID,o=e.handleSetVariableDetailsID;m.a.useEffect((function(){n(r)}),[r]);var l=function(e){e.stopPropagation(),o(null),n(null)};return r?m.a.createElement(de.a,{style:{zIndex:B.a.NON_HELP_DIALOG},open:Boolean(r),onClose:l,PaperProps:{className:t.dialogPaper}},m.a.createElement(he.a,null,a?a.Long_Name:m.a.createElement(be.a,null)," ",m.a.createElement(le.a,{className:t.closeIcon,color:"primary",onClick:l})),m.a.createElement(ge.a,null,a?m.a.createElement(m.a.Fragment,null,m.a.createElement(ke.a,null,a.Comment?a.Comment:""),m.a.createElement(Pe.a,{size:"small"},m.a.createElement(ze.a,null,m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Dataset"),m.a.createElement(Ie.a,{title:a.Dataset_Name},a.Dataset_Name.length>25?a.Dataset_Name.slice(0,23)+"...":a.Dataset_Name)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Table Name"),m.a.createElement(Ie.a,{title:a.Table_Name},a.Table_Name>25?a.Table_Name.slice(0,23)+"...":a.Table_Name)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Source"),m.a.createElement(Ie.a,{title:a.Data_Source},a.Data_Source>25?a.Data_Source.slice(0,23)+"...":a.Data_Source)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Distributor"),m.a.createElement(Ie.a,{title:a.Distributor},a.Distributor.length>25?a.Distributor.slice(0,23)+"...":a.Distributor)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Sensor"),m.a.createElement(Ie.a,null,a.Sensor)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Spatial Resolution"),m.a.createElement(Ie.a,null,a.Spatial_Resolution)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Temporal Resolution"),m.a.createElement(Ie.a,null,a.Temporal_Resolution)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Temporal Coverage Begin"),m.a.createElement(Ie.a,null,a.Time_Min?a.Time_Min.slice(0,10):"Irregular")),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Temporal Coverage End"),m.a.createElement(Ie.a,null,a.Time_Max?a.Time_Max.slice(0,10):"Irregular")),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Lat Coverage Begin"),m.a.createElement(Ie.a,null,"".concat(a.Lat_Min,"\xb0"))),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Lat Coverage End"),m.a.createElement(Ie.a,null,"".concat(a.Lat_Max,"\xb0"))),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Lon Coverage Begin"),m.a.createElement(Ie.a,null,"".concat(a.Lon_Min,"\xb0"))),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Lon Coverage End"),m.a.createElement(Ie.a,null,"".concat(a.Lon_Max,"\xb0"))),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Depth Coverage Begin"),m.a.createElement(Ie.a,null,a.Depth_Max?"".concat(a.Depth_Min,"(m)"):"Surface Only")),m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Depth Coverage End"),m.a.createElement(Ie.a,null,a.Depth_Max?"".concat(a.Depth_Max,"(m)"):"Surface Only")),void 0!==a.Variable_Min?m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Minimum Value(",a.Unit,")"),m.a.createElement(Ie.a,null,a.Variable_Min)):"",void 0!==a.Variable_Max?m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Maximum Value(",a.Unit,")"),m.a.createElement(Ie.a,null,a.Variable_Max)):"",void 0!==a.Variable_Mean?m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Mean Value(",a.Unit,")"),m.a.createElement(Ie.a,null,a.Variable_Mean)):"",void 0!==a.Variable_Std?m.a.createElement(je.a,null,m.a.createElement(Ie.a,null,"Standard Deviation(",a.Unit,")"),m.a.createElement(Ie.a,null,a.Variable_Std)):""))," "):m.a.createElement(m.a.Fragment,null,m.a.createElement(A.a,{variant:"h1"}," ",m.a.createElement(be.a,null)," "),m.a.createElement(be.a,{width:500,height:600})))):""}))),Fe={sparseDataMaxSizeNotificationUpdate:_.z},Ve=Object(d.b)((function(e,a){return{sparseDataMaxSizeNotificationData:e.sparseDataMaxSizeNotificationData}}),Fe)(Object(f.a)((function(e){return{dialogPaper:{backgroundColor:V.a.backgroundGray,minWidth:"700px",maxWidth:"60vw"},dialogContent:{padding:"20px 20px 12px 20px"},lastPointValueText:{fontSize:"13px"},lastPointValueWrapper:{backgroundColor:"rgba(0, 0, 0, .15)",padding:"8px",margin:"12px 0"},closeIcon:{fontSize:"20px",color:"white",cursor:"pointer",position:"absolute",top:2,right:2},list:{padding:"0px 0px 0px 24px"},listItem:{fontSize:"13px",padding:"3px 0px 2px 24px"}}}))((function(e){var a=e.sparseDataMaxSizeNotificationUpdate,t=e.sparseDataMaxSizeNotificationData,n=e.classes;if(null===t)return"";var r=t.time,o=(t.lat,t.lon,t.depth,function(){return a(null)});return m.a.createElement(de.a,{onClose:o,open:Boolean(t),style:{zIndex:B.a.NON_HELP_DIALOG},PaperProps:{className:n.dialogPaper}},m.a.createElement(le.a,{className:n.closeIcon,onClick:o}),m.a.createElement(ge.a,{className:n.dialogContent},m.a.createElement(A.a,null,"The data requested exceeds the maximum retrievable amount. A visualization has been created from a subset* of the data. If this does not include your data of interest, please reduce the range of the parameters in the control panel and create another visualization."),m.a.createElement("div",{className:n.lastPointValueWrapper},m.a.createElement(A.a,{style:{fontSize:"13px"}},"*The subset includes all requested data with a time before ",r.replace("T"," ").replace("Z","")," UTC. Some data with a time of exactly ",r.replace("T"," ").replace("Z","")," may not be included."))))}))),Be={cruiseTrajectoryRequestSend:_.j,clearCharts:_.b,csvDownloadRequestSend:_.m,snackbarOpen:F.n,vizPageDataTargetSetAndFetchDetails:_.Q,storedProcedureRequestSend:_.E,sparseDataQuerySend:_.A,guestPlotLimitNotificationSetIsVisible:_.s},He={backgroundColor:"transparent"},Ge={type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:[0,255,255,.3]},outline:{color:[0,255,255,1],size:"2px"}}]},Ye=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={variableDetailsID:null,showControlPanel:!0,dataSearchMenuOpen:!1,tableName:"",depth1:0,depth2:0,dt1:"1900-01-01",dt2:(new Date).toISOString().slice(0,10),lat1:0,lat2:0,lon1:0,lon2:0,selectedVizType:"",surfaceOnly:!1,irregularSpatialResolution:!1,addedGlobeUIListeners:!1,showDrawHelp:!1,storedParams:{depth1:0,depth2:0,dt1:"1900-01-01",dt2:(new Date).toISOString().slice(0,10),lat1:0,lat2:0,lon1:0,lon2:0}},e.searchInputRef=m.a.createRef(),e.componentDidMount=function(){e.props.user||e.props.guestPlotLimitNotificationSetIsVisible(!0)},e.componentDidUpdate=function(a,t){if(a.charts.length&&!e.props.charts.length&&e.props.handleShowGlobe(),e.props.mapContainerRef.current&&(t.lat1!==e.state.lat1||t.lat2!==e.state.lat2||t.lon1!==e.state.lon1||t.lon2!==e.state.lon2)){var n=parseFloat(e.state.lat1),r=parseFloat(e.state.lat2),o=parseFloat(e.state.lon1),s=parseFloat(e.state.lon2),i=s<o?s+360:s;e.props.mapContainerRef.current.regionLayer.removeAll();var c={type:"polygon",rings:[[o,n],[i,n],[i,r],[o,r],[o,n]]},p=new e.props.mapContainerRef.current.props.esriModules.Graphic({geometry:c,symbol:Ge});e.props.mapContainerRef.current.regionLayer.add(p)}if(e.props.vizPageDataTargetDetails&&e.props.vizPageDataTargetDetails!==a.vizPageDataTargetDetails){var u=e.props.vizPageDataTargetDetails,m=!u.Depth_Max,d="Irregular"===u.Spatial_Resolution,h=X(u),g=h.lat1,b=h.lat2,f=h.lon1,x=h.lon2;d&&e.props.globeUIRef.current&&e.props.globeUIRef.current.props.view.goTo({target:[(parseFloat(f)+parseFloat(x))/2,(parseFloat(g)+parseFloat(b))/2],zoom:3},{maxDuration:2500,speedFactor:.5}),d||u.temporalResolution===Y.a.monthlyClimatology||e.props.snackbarOpen("Default parameters for satellite and model data will exceed the maximum visualizable size. Please reduce the time range or region size."),e.setState(Object(l.a)(Object(l.a)(Object(l.a)({},e.state),{},{surfaceOnly:m,irregularSpatialResolution:d},h),{},{selectedVizType:"",storedParams:Object(l.a)(Object(l.a)({},e.state.storedParams),h)}))}},e.componentWillUnmount=function(){e.props.vizPageDataTargetSetAndFetchDetails(null),e.props.mapContainerRef.current&&e.props.mapContainerRef.current.regionLayer&&e.props.mapContainerRef.current.regionLayer.removeAll()},e.updateDomainFromGraphicExtent=function(a){for(var t=a.xmin;t<-180;)t+=360;for(;t>180;)t-=360;for(var n=a.xmax;n<-180;)n+=360;for(;n>180;)n-=360;var r={lat1:parseFloat(a.ymin.toFixed(3)),lat2:parseFloat(a.ymax.toFixed(3)),lon1:parseFloat(t.toFixed(3)),lon2:parseFloat(n.toFixed(3))};e.setState(Object(l.a)(Object(l.a)(Object(l.a)({},e.state),r),{},{storedParams:Object(l.a)(Object(l.a)({},e.state.storedParams),r)}))},e.handleUpdateParameters=function(a){var t=a.lat1,n=a.lat2,r=a.lon1,o=a.lon2,s=a.depth1,i=a.depth2,c=a.dt1,p=a.dt2;e.setState(Object(l.a)(Object(l.a)({},e.state),{},{lat1:t,lat2:n,lon1:r,lon2:o,depth1:s,depth2:i,dt1:c,dt2:p}))},e.handleShowChartsClick=function(){0===e.props.plotsActiveTab?e.props.handlePlotsSetActiveTab(null,1):e.props.handlePlotsSetActiveTab(null,0)},e.handleVisualize=function(){var a=e.state,t=a.depth1,n=a.depth2,r=a.dt1,o=a.dt2,l=a.lat1,s=a.lat2,i=a.lon1,c=a.lon2,p=a.selectedVizType,u=e.props.vizPageDataTargetDetails.Spatial_Resolution===G.a.irregular,m=Q(p),d={parameters:Z({depth1:t,depth2:n,dt1:e.props.vizPageDataTargetDetails.Temporal_Resolution===Y.a.monthlyClimatology?r+"-01-1900":r,dt2:e.props.vizPageDataTargetDetails.Temporal_Resolution===Y.a.monthlyClimatology?o+"-01-1900":o+"T23:59:59",lat1:l,lat2:s,lon1:i,lon2:c,fields:e.props.vizPageDataTargetDetails.Variable,tableName:e.props.vizPageDataTargetDetails.Table_Name,spName:m.sp}),subType:m.subType,metadata:e.props.vizPageDataTargetDetails};u&&m.sp!==b.a.depthProfile?e.props.sparseDataQuerySend(d):e.props.storedProcedureRequestSend(d)},e.handleDrawClick=function(){var a=e.props.globeUIRef.current.props,t=a.esriModules,n=a.regionLayer,r=e.props.globeUIRef.current.sketchModel;if(!e.state.addedGlobeUIListeners){var o=Object(y.b)(75,(function(a){"active"===a.state&&e.updateDomainFromGraphicExtent(t.Utils.webMercatorToGeographic(a.graphic.geometry.extent))}));r.on("create",(function(a){"active"===a.state&&a.toolEventInfo&&"vertex-add"===a.toolEventInfo.type&&r.complete(),a.graphic&&a.graphic.visible&&(a.graphic.visible=!1),"cancel"===a.state&&(r.cancel(),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showDrawHelp:!1}))),"start"===a.state&&n.removeAll(),"complete"===a.state&&(e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showDrawHelp:!1})),e.updateDomainFromGraphicExtent(t.Utils.webMercatorToGeographic(a.graphic.geometry.extent)))})),r.on("create",o),r.on("update",(function(a){if(a.toolEventInfo&&"move-stop"===a.toolEventInfo.type){if("cancel"===a.state)return;e.updateDomainFromGraphicExtent(a.graphics[0].geometry.extent)}}))}e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showDrawHelp:!0,addedGlobeUIListeners:!0})),e.state.showDrawHelp?r.cancel():r.create("polyline",{mode:"click"})},e.handleSelectDataTarget=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!1})),e.props.vizPageDataTargetSetAndFetchDetails(a)},e.handleCloseDataSearch=function(){e.state.dataSearchMenuOpen&&e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!1}))},e.handleSetVariableDetailsID=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{variableDetailsID:a}))},e.handleChangeInputValue=function(a){var t,n=parseFloat(a.target.value);t=["lat1","lat2","lon1","lon2","depth1","depth2"].includes(a.target.name)?isNaN(n)?a.target.value:n:a.target.value,e.setState(Object(l.a)(Object(l.a)({},e.state),{},{[a.target.name]:t,storedParams:Object(l.a)(Object(l.a)({},e.state.storedParams),{},{[a.target.name]:t})}))},e.handleToggleCharts=function(){},e.estimateDataSize=function(){var a=e.props.vizPageDataTargetDetails,t=e.state,n=t.dt1,r=t.dt2,o=t.lat1,l=t.lat2,s=t.lon1,i=t.lon2,c=t.depth1,p=t.depth2,u=t.selectedVizType;if(!a)return 0;if(a.Spatial_Resolution===G.a.irregular)return 1;var m=a.Temporal_Resolution===Y.a.monthlyClimatology?n:Date.parse(n),d=a.Temporal_Resolution===Y.a.monthlyClimatology?r:Date.parse(r),h=(d-m)/864e5,b=Object(W.a)(a.Spatial_Resolution),f=a.Temporal_Resolution===Y.a.monthlyClimatology?d-m+1:Math.floor(h/U(a.Temporal_Resolution))||1;f*=1.4;var x=(i>s?(i-s)/b:(180-s+(i+180))/b)*((l-o)/b)*(q.a.count({data:a},c,p)||1)*f;return u===g.a.timeSeries||u===g.a.depthProfile?x/200:x},e.checkStartDepth=function(){return e.state.depth1<0?"Depth cannot be negative":e.state.depth1>e.state.depth2?"Start cannot be greater than end":e.state.depth1>e.props.vizPageDataTargetDetails.Depth_Max?"Maximum depth start is ".concat(e.props.vizPageDataTargetDetails.Depth_Max):""},e.checkEndDepth=function(){return e.state.depth2<0?"Depth cannot be negative":e.state.depth1>e.state.depth2?"Start cannot be greater than end":e.state.depth2<e.props.vizPageDataTargetDetails.Depth_Min?"Minimum depth end is ".concat(e.props.vizPageDataTargetDetails.Depth_Min):""},e.checkStartDate=function(){return e.props.vizPageDataTargetDetails.Temporal_Resolution===Y.a.monthlyClimatology?e.state.dt1>e.state.dt2?"Start cannot be greater than end":"":e.state.dt1?e.state.dt1>e.state.dt2?"Start cannot be greater than end":e.state.dt1<e.props.vizPageDataTargetDetails.Time_Min.slice(0,10)?"Minimum start date is ".concat(e.props.vizPageDataTargetDetails.Time_Min.slice(5,10)+"-"+e.props.vizPageDataTargetDetails.Time_Min.slice(0,4)):"":"Invalid date"},e.checkEndDate=function(){return e.props.vizPageDataTargetDetails.Temporal_Resolution===Y.a.monthlyClimatology?e.state.dt1>e.state.dt2?"Start cannot be greater than end":"":e.state.dt2?e.state.dt1>e.state.dt2?"Start cannot be greater than end":e.state.dt2>e.props.vizPageDataTargetDetails.Time_Max.slice(0,10)?"Maximum end date is ".concat(e.props.vizPageDataTargetDetails.Time_Max.slice(5,10)+"-"+e.props.vizPageDataTargetDetails.Time_Max.slice(0,4)):"":"Invalid date"},e.checkStartLat=function(){return e.state.lat1>e.props.vizPageDataTargetDetails.Lat_Max?"Maximum start lat is ".concat(e.props.vizPageDataTargetDetails.Lat_Max):e.state.lat1>e.state.lat2?"Start cannot be greater than end":""},e.checkEndLat=function(){return e.state.lat2<e.props.vizPageDataTargetDetails.Lat_Min?"Minimum end lat is ".concat(e.props.vizPageDataTargetDetails.Lat_Min):e.state.lat1>e.state.lat2?"Start cannot be greater than end":""},e.checkStartLon=function(){var a=e.state,t=a.lon1,n=a.lon2,r=e.props.vizPageDataTargetDetails,o=r.Lon_Min,l=r.Lon_Max;if(n>=t){if(t>l)return"Maximum start lon is ".concat(l)}else if(!(o>t||l>t||o<n||l<n))return"Longitude outside dataset coverage";return""},e.checkEndLon=function(){var a=e.state,t=a.lon1,n=a.lon2,r=e.props.vizPageDataTargetDetails,o=r.Lon_Min;r.Lon_Max;return n>=t&&n<o?"Minimum end lon is ".concat(o):""},e.checkHeatmap=function(){return e.state.irregularSpatialResolution?H.type.dataIsIrregular.replace("$","Heatmap"):""},e.checkContour=function(){return e.state.irregularSpatialResolution?H.type.dataIsIrregular.replace("$","Contour"):""},e.checkSection=function(){return e.state.surfaceOnly?H.type.surfaceOnlyDataset.replace("$","variable"):e.state.irregularSpatialResolution?H.type.dataIsIrregular.replace("$","Section Map"):""},e.checkHistogram=function(){return""},e.checkTimeSeries=function(){return e.state.irregularSpatialResolution?H.type.dataIsIrregular.replace("$","Time Series"):""},e.checkDepthProfile=function(){return e.state.surfaceOnly?H.type.surfaceOnlyDataset.replace("$","variable"):""},e.checkSparseMap=function(){return e.state.irregularSpatialResolution?"":H.type.irregularOnly},e.checkGeneralWarn=function(a){return e.props.selectedVizType&&a>12e5?H.generic.dataSizeWarning:""},e.checkGeneralPrevent=function(a){var t=K(e.props.charts),n=J(e.props.charts);if(!e.props.user){var r=parseInt(S.a.get("guestPlotCount"));if(r&&r>=10)return H.generic.guestMaximumReached}if(!e.state.selectedVizType)return H.generic.vizTypeMissing;if(e.state.selectedVizType===g.a.heatmap&&t>14)return H.type.webGLContextLimit;if(e.state.selectedVizType===g.a.sparse&&t>11)return H.type.webGLContextLimit;if(e.state.selectedVizType===g.a.heatmap&&16-t-(q.a.count({data:e.props.vizPageDataTargetDetails},e.props.depth1,e.props.depth2)||1)<1)return"Too many distinct depths to render heatmap. Please reduce depth range or select section map.";return e.state.selectedVizType!==g.a.histogram&&e.props.selectedVizType!==g.a.heatmap&&a>15e5||a>6e6?H.generic.dataSizePrevent:e.props.vizPageDataTargetDetails?e.props.charts.length>9?"Total number of plots is too large. Please delete 1 or more":n+a>4e6?"Total rendered data amount is too large. Please delete 1 or more plots.":!e.state.irregularSpatialResolution&&e.state.selectedVizType!==g.a.timeSeries&&Date.parse(e.state.dt2)-Date.parse(e.state.dt1)>31536e6?"Maximum date range for non-time series plots of gridded data is 1 year":"":H.generic.variableMissing},e.render=function(){var a=e.props,t=a.classes,n=a.handleLatLonChange,r=a.dataTarget,o=a.vizPageDataTargetDetails,s=a.charts,i=a.plotsActiveTab,c=e.state,p=c.variableDetailsID,u=c.showControlPanel,d=c.dataSearchMenuOpen,h=c.depth1,g=c.depth2,b=c.dt1,f=c.dt2,y=c.lat1,v=c.lat2,S=c.lon1,_=c.lon2,F=c.selectedVizType,B=o,H=e.estimateDataSize(),G=B?[e.checkStartDepth(),e.checkEndDepth(),e.checkStartLat(),e.checkEndLat(),e.checkStartLon(),e.checkEndLon(),e.checkHeatmap(),e.checkContour(),e.checkSection(),e.checkHistogram(),e.checkTimeSeries(),e.checkDepthProfile(),e.checkSparseMap(),e.checkGeneralWarn(H),e.checkGeneralPrevent(H),e.checkStartDate(),e.checkEndDate()]:Array(14).fill(""),U=Object(x.a)(G,17),W=U[0],q=U[1],K=U[2],Q=U[3],Z=U[4],J=U[5],X=U[6],$=U[7],ee=U[8],ae=U[9],te=U[10],ne=U[11],re=U[12],oe=U[13],le=U[14],se=U[15],ie=U[16],ce=[W,q,K,Q,Z,J,le,se,ie],pe=function(){for(var e=0;e<ce.length;e++)if(ce[e])return ce[e];return!1}(),ue=pe||(oe||"");return m.a.createElement(m.a.Fragment,null,m.a.createElement(_e,{variableDetailsID:p,handleSetVariableDetailsID:e.handleSetVariableDetailsID}),m.a.createElement(Ve,null),e.state.showDrawHelp?m.a.createElement(A.a,{className:t.drawHelpText},"Click on the globe to start drawing, and again to finish."):"",u?m.a.createElement("div",null,m.a.createElement(E.a,{title:"Hide control panel",placement:"right"},m.a.createElement(C.a,{className:t.closePanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showControlPanel:!1}))}},m.a.createElement(M.a,null)))):m.a.createElement(E.a,{title:"Show control panel",placement:"right"},m.a.createElement(C.a,{className:t.openPanelChevron,"aria-label":"toggle-panel",color:"primary",onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showControlPanel:!0}))}},m.a.createElement(k.a,{style:{fontSize:32}}))),m.a.createElement(O.a,{className:t.drawer,variant:"persistent",open:u,classes:{paper:"".concat(t.drawerPaper)},anchor:"left"},r?m.a.createElement(w.a,{container:!0,style:{borderBottom:"1px solid black"}},m.a.createElement(w.a,{item:!0,xs:10},m.a.createElement(D.a,{fullWidth:!0,className:t.controlPanelItem,startIcon:m.a.createElement(P.a,{style:{fontSize:"22px",margin:"0 0 -6px 4px"}}),onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!0}))},classes:{label:t.controlPanelItemLabel,startIcon:t.controlPanelItemStartIcon},disabled:e.state.showDrawHelp||!o},m.a.createElement("span",{style:{color:e.state.showDrawHelp?"rgba(0, 0, 0, 0.38)":"white"}},r.Long_Name))),m.a.createElement(w.a,{item:!0,xs:2,style:{borderLeft:"1px solid black"}},m.a.createElement(E.a,{title:"Show variable details",placement:"top"},m.a.createElement("span",null,m.a.createElement(C.a,{onClick:function(a){e.handleSetVariableDetailsID(r.ID),a.stopPropagation()},disabled:e.state.showDrawHelp||!o},m.a.createElement(z.a,{style:{fontSize:"26px",marginTop:"3px"}})))))):m.a.createElement(D.a,{fullWidth:!0,className:t.controlPanelItem,style:{borderBottom:"1px solid black"},startIcon:m.a.createElement(P.a,{style:{fontSize:"22px",margin:"0 0 -6px 4px"}}),onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{dataSearchMenuOpen:!0}))},classes:{label:t.controlPanelItemLabel,startIcon:t.controlPanelItemStartIcon},disabled:e.state.showDrawHelp},"Select a Variable to Begin"),m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{container:!0},B&&B.Temporal_Resolution===Y.a.monthlyClimatology?m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{name:"dt1",className:t.textField,id:"dt1",label:"Start Month",type:"number",value:b,error:Boolean(se),FormHelperTextProps:{className:t.helperText},helperText:se,InputProps:{className:t.dateTimeInput,inputProps:{min:1,max:12}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{name:"dt2",className:t.textField,id:"dt2",label:"End Month",type:"number",min:1,max:12,step:1,value:f,error:Boolean(se),FormHelperTextProps:{className:t.helperText},helperText:se,InputProps:{className:t.dateTimeInput,inputProps:{min:1,max:12}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o}))):m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{name:"dt1",className:t.textField,id:"dt1",label:"Start Date(m/d/y)",step:1,type:"date",value:b,error:Boolean(se),FormHelperTextProps:{className:t.helperText},helperText:se,InputProps:{className:t.dateTimeInput,inputProps:B?{min:B.Time_Min.slice(0,10),max:B.Time_Max.slice(0,10)}:{}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{name:"dt2",className:t.textField,id:"dt2",label:"End Date(m/d/y)",type:"date",value:f,error:Boolean(ie),FormHelperTextProps:{className:t.helperText},helperText:ie,InputProps:{className:t.dateTimeInput,inputProps:B?{min:B.Time_Min.slice(0,10),max:B.Time_Max.slice(0,10)}:{}},InputLabelProps:{shrink:!0,className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o}))),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{type:"number",id:"lat1-input",label:"Start Lat(\xb0)",className:t.textField,value:y,onChange:n,error:Boolean(K),FormHelperTextProps:{className:t.helperText},helperText:K,InputProps:{className:t.padLeft,inputProps:B?{min:B.Lat_Min,max:B.Lat_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},name:"lat1",onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{type:"number",id:"lat2-input",error:Boolean(Q),label:"End Lat(\xb0)",className:t.textField,value:v,onChange:n,FormHelperTextProps:{className:t.helperText},helperText:Q,name:"lat2",InputProps:{className:t.padLeft,inputProps:B?{min:B.Lat_Min,max:B.Lat_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{type:"number",id:"lon1-input",error:Boolean(Z),label:"Start Lon(\xb0)",className:t.textField,value:S,onChange:n,FormHelperTextProps:{className:t.helperText},helperText:Z,name:"lon1",InputProps:{className:t.padLeft,inputProps:B?{min:B.Lon_Min,max:B.Lon_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o})),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{type:"number",id:"lon2-input",error:Boolean(J),label:"End Lon(\xb0)",className:t.textField,value:_,onChange:n,FormHelperTextProps:{className:t.helperText},helperText:J,name:"lon2",InputProps:{className:t.padLeft,inputProps:B?{min:B.Lon_Min,max:B.Lon_Max,step:.001}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||!o}),u?m.a.createElement(T.a,{className:t.popoutButtonPaper,style:{left:281,top:"146px"}},m.a.createElement(E.a,{title:"Draw Region on Globe"},m.a.createElement("span",null,m.a.createElement(C.a,{className:t.popoutButtonBase,onClick:e.handleDrawClick,disabled:!B||0!==i},m.a.createElement(j.a,{className:t.popoutButtonIcon}))))):""),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{type:"number",id:"depth1-input",error:Boolean(W),label:"Start Depth(m)",className:t.textField,value:h,FormHelperTextProps:{className:t.helperText},helperText:W,name:"depth1",InputProps:{className:t.padLeft,inputProps:B?{min:B.Depth_Max?B.Depth_Min:0,max:B.Depth_Max?B.Depth_Max:0,step:.1}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||e.state.surfaceOnly||!o})),m.a.createElement(w.a,{item:!0,xs:6,className:t.formGridItem},m.a.createElement(N.a,{type:"number",id:"depth2-input",error:Boolean(q),label:"End Depth(m)",className:t.textField,value:g,FormHelperTextProps:{className:t.helperText},helperText:q,name:"depth2",InputProps:{className:t.padLeft,inputProps:B?{min:B.Depth_Max?B.Depth_Min:0,max:B.Depth_Max?B.Depth_Max:0,step:.1}:{}},InputLabelProps:{className:t.padLeft},onChange:e.handleChangeInputValue,disabled:e.state.showDrawHelp||e.state.surfaceOnly||!o})),m.a.createElement(Me,{overrideDisabledStyle:He,heatmapMessage:X,contourMessage:$,sectionMapMessage:ee,histogramMessage:ae,timeSeriesMessage:te,depthProfileMessage:ne,sparseMapMessage:re,visualizeButtonTooltip:ue,disableVisualizeMessage:pe,selectedVizType:F,handleChangeInputValue:e.handleChangeInputValue,onVisualize:e.handleVisualize,showChartControl:e.state.showChartControl,variableDetails:e.props.vizPageDataTargetDetails,handleVisualize:e.handleVisualize,disabled:e.state.showDrawHelp||!o}),s.length&&u?m.a.createElement(T.a,{className:t.popoutButtonPaper,style:{left:"281px",top:"343px"}},m.a.createElement(E.a,{title:0!==i?"Return to Globe":"Show Charts"},m.a.createElement(C.a,{disabled:e.state.showDrawHelp,className:t.popoutButtonBase,onClick:e.handleShowChartsClick},0!==i?m.a.createElement(I.a,{className:t.popoutButtonIcon,style:{color:V.a.primary}}):m.a.createElement(L.a,{badgeContent:s.length,color:"primary"},m.a.createElement(R.a,{className:t.popoutButtonIcon,style:{color:V.a.primary}}))))):""))),m.a.createElement(T.a,{className:t.dataSearchMenuPaper,style:d?{}:{display:"none"}},m.a.createElement(Te,{handleSelectDataTarget:e.handleSelectDataTarget,handleSetVariableDetailsID:e.handleSetVariableDetailsID,handleCloseDataSearch:e.handleCloseDataSearch,searchInputRef:e.searchInputRef})))},e}return t}(m.a.Component),Ue=Object(d.b)((function(e,a){return{data:e.data,catalog:e.catalog,catalogRequestState:e.catalogRequestState,cruiseTrajectory:e.cruiseTrajectory,showHelp:e.showHelp,datasets:e.datasets,charts:e.charts,cart:e.cart,dataTarget:e.vizPageDataTarget,vizPageDataTargetDetails:e.vizPageDataTargetDetails,user:e.user}}),Be)(Object(f.a)((function(e){return{drawerPaper:{width:280,height:"auto",top:180,borderRadius:"0 4px 4px 0",boxShadow:"2px 2px  2px 2px #242424",border:"none",overflow:"visible",backgroundColor:V.a.backgroundGray},openPanelChevron:{position:"fixed",left:"5px",top:"380px",zIndex:B.a.CONTROL_PRIMARY},closePanelChevron:{position:"fixed",left:285,top:"380px",zIndex:B.a.CONTROL_PRIMARY},dataSearchMenuPaper:{position:"fixed",top:120,bottom:60,left:0,width:"98vw",height:"auto",zIndex:B.a.CONTROL_PRIMARY,backgroundColor:"rgba(0,0,0,.6)",backdropFilter:"blur(5px)"},formGridItem:{border:"1px solid #313131",borderBottom:"none",borderTop:"none",backgroundColor:V.a.backgroundGray},padLeft:{padding:"6px 0 2px 7px"},dateTimeInput:{padding:"6px 0 2px 7px",alignItems:"start"},helperText:{color:"yellow",fontSize:"12px"},controlPanelItem:{textTransform:"none",textAlign:"left",fontSize:"17px",fontWeight:200,color:V.a.primary,justifyContent:"flex-start",height:"56px"},controlPanelItemLabel:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block"},controlPanelItemStartIcon:{display:"inline-block"},textField:{width:"100%"},drawHelpText:{position:"fixed",top:120,margin:"0 calc(50vw - 226px)",zIndex:B.a.CONTROL_PRIMARY,color:"white",fontSize:"18px",backgroundColor:"rgba(0, 0, 0, .6)",padding:"8px",backdropFilter:"blur(5px)",borderRadius:"4px"},popoutButtonPaper:{position:"absolute",display:"flex",borderRadius:"2px",boxShadow:"2px 2px  2px 2px #242424",backgroundColor:V.a.backgroundGray},popoutButtonIcon:{width:"24px",height:"24px"},popoutButtonBase:{padding:"9px"}}}))(Ye)),We=t(38),qe=t(635),Ke=t(16),Qe={guestPlotLimitNotificationSetIsVisible:_.s,showLoginDialog:F.l,guestTokenRequestSend:Ke.o},Ze=Object(d.b)((function(e){return{guestPlotLimitNotificationIsVisible:e.guestPlotLimitNotificationIsVisible,user:e.user,userIsGuest:e.userIsGuest}}),Qe)(Object(f.a)((function(e){return{dialogWrapper:{backgroundColor:V.a.backgroundGray},dialogRoot:{zIndex:"".concat(B.a.NON_HELP_DIALOG+1," !important")},link:{fontSize:"16px",whiteSpace:"pre-wrap",display:"inline-block",paddingBottom:"1px"},dialogActionButton:{textTransform:"none"}}}))(Object(h.f)((function(e){var a=e.classes,t=function(){e.showLoginDialog()},n=parseInt(S.a.get("guestPlotCount"))||0,r=Boolean(e.guestPlotLimitNotificationIsVisible&&!e.user);return m.a.createElement(de.a,{open:r,onClose:function(){e.userIsGuest&&e.guestPlotLimitNotificationSetIsVisible(!1)},PaperProps:{className:a.dialogWrapper},classes:{root:a.dialogRoot}},m.a.createElement(ge.a,null,m.a.createElement(A.a,{style:{marginBottom:"14px"}},"Welcome to the Simons CMAP visualization tools. You can explore the visualization features as a guest without registering and create up to 10 plots per day. Registration provides access to the full suite of data submission tools, the data visualization tools and the Simons CMAP API."),m.a.createElement(A.a,{style:{marginBottom:"14px"}},"You can ",m.a.createElement(ee.a,{component:"button",onClick:e.guestTokenRequestSend,className:a.link},"Continue as a Guest"),", with ",10-n,"/10 plots remaining,"),m.a.createElement(A.a,{style:{marginBottom:"14px"}},"Or you can",m.a.createElement(ee.a,{component:We.b,to:"/register",className:a.link}," Register")," or",m.a.createElement(ee.a,{component:"button",onClick:t,className:a.link}," Log in")," to your existing account for expanded access to CMAP."),m.a.createElement(qe.a,null,m.a.createElement(D.a,{variant:"outlined",className:a.dialogActionButton,onClick:t},"Login"),m.a.createElement(D.a,{onClick:!0,variant:"outlined",onClick:function(){return e.history.push("/register")},className:a.dialogActionButton},"Register"),m.a.createElement(D.a,{variant:"outlined",className:a.dialogActionButton,onClick:e.guestTokenRequestSend},"Continue As Guest"))))})))),Je=t(802),Xe=t(653),$e=t.n(Xe),ea=t(637),aa=[null,"January","February","March","April","May","June","July","August","September","October","November","December"],ta=function(e,a,t){return t?aa[parseInt(e)]:a?e.slice(0,10)+" "+e.slice(11,16):e.slice(0,10)},na={layout:{font:{color:"#ffffff"},paper_bgcolor:V.a.backgroundGray,autosize:!0,margin:{t:116,b:104}},config:{displaylogo:!1},annotations:function(e,a){return[{text:(a.length>70?"Data Source: "+a.slice(0,67)+"...":"Data Source: "+a)+(e?e.length>70?"<br>Distributor: "+e.slice(0,67)+"...":"<br>Distributor: "+e:"")+"<br>Visualization provided by Simons CMAP",font:{color:"white",size:10},xref:"paper",yref:"paper",yanchor:"top",x:.5,y:0,yshift:-56,showarrow:!1,xanchor:"center"}]}},ra=t(868),oa=t(363),la=t(577),sa=t(591),ia=t(867),ca=t(869),pa=t(870),ua=t(859),ma=t(871),da=t(872),ha=t(873),ga=t(874),ba=t(172),fa=t(351),xa={sparseDataMaxSizeNotificationUpdate:_.z},ya=["Default","Greys","YlGnBu","Greens","YlOrRd","Bluered","RdBu","Reds","Blues","Picnic","Rainbow","Portland","Jet","Hot","Blackbody","Earth","Electric","Viridis","Cividis"];var va=Object(d.b)(null,xa)(Object(f.a)((function(e){return{popover:{width:"470px",height:"120px",paddingTop:e.spacing(3),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2.5),paddingRight:e.spacing(2.5),zIndex:B.a.CONTROL_PRIMARY},iconButton:{boxShadow:"0px 1px 1px 1px #242424"},colorForm:{width:"100%"},lastIcon:{borderTopRightRadius:"10%",borderBottomRightRadius:"10%"},buttonGroup:{display:"block",margin:"0px auto 8px auto",maxWidth:"700px",textAlign:"center",pointerEvents:"auto"},depressed:{boxShadow:"inset 1px 1px 5px #262626"},colorscaleMenu:{maxHeight:"400px",zIndex:B.a.CONTROL_PRIMARY},setPopoverZ:{zIndex:"".concat(B.a.CONTROL_PRIMARY," !important")},grayBackground:{backgroundColor:V.a.backgroundGray},sparseDataMaxSizeWarningIcon:{color:V.a.errorYellow,position:"absolute",top:"60px",left:"calc(50% - 12px)",cursor:"pointer",zIndex:B.a.CONTROL_PRIMARY-1,pointerEvents:"auto"}}}))((function(e){var a=e.classes,t=e.onToggleSplitByDate,n=e.splitByDate,r=e.onToggleSplitBySpace,o=e.splitBySpace,l=e.orientation,s=e.downloadCsv,i=e.handleZValueConfirm,c=e.zValues,p=e.markerOptions,d=e.handleMarkerOptionsConfirm,h=e.showErrorBars,g=e.handleSetShowErrorBars,b=e.showLines,f=e.handleSetShowLines,y=e.chart,v=Object(u.useState)(null),S=Object(x.a)(v,2),A=S[0],O=S[1],N=m.a.useState(null),T=Object(x.a)(N,2),L=T[0],M=T[1],k=m.a.useState(c&&c[0]),P=Object(x.a)(k,2),z=P[0],j=P[1],I=m.a.useState(c&&c[1]),_=Object(x.a)(I,2),F=_[0],V=_[1],B=Boolean(L),H=B?"zscale-popover":void 0,U=function(){M(null)},W=[z>F?"Min must be higher than max":/^[-+]?[0-9]*\.?[0-9]+$/.test(z)?void 0:"Invalid value",z>F?"Min must be higher than max":/^[-+]?[0-9]*\.?[0-9]+$/.test(F)?void 0:"Invalid value"],q=W[0],K=W[1],Q=m.a.useState(null),Z=Object(x.a)(Q,2),J=Z[0],X=Z[1],$=m.a.useState(p&&p.opacity),ee=Object(x.a)($,2),ne=ee[0],oe=ee[1],le=m.a.useState(p&&p.color),se=Object(x.a)(le,2),ie=se[0],ce=se[1],pe=m.a.useState(p&&p.size),ue=Object(x.a)(pe,2),me=ue[0],de=ue[1],he=function(e){var a=e?e.opacity:null,t=Object(u.useRef)();return Object(u.useEffect)((function(){t.current=a})),t.current}(p),ge=function(e){var a=e?e.color:null,t=Object(u.useRef)();return Object(u.useEffect)((function(){t.current=a})),t.current}(p),be=function(e){var a=e?e.size:null,t=Object(u.useRef)();return Object(u.useEffect)((function(){t.current=a})),t.current}(p);Object(u.useEffect)((function(){p&&(p.opacity!==he&&oe(p.opacity),p.color!==ge&&ce(p.color),p.size!==be&&de(p.size))}));var fe=Boolean(J),xe=fe?"marker-popover":void 0,ye=function(){X(null)},ve=[function(){if(ne<.1||ne>1||!/^[-+]?[0-9]*\.?[0-9]+$/.test(ne))return"Opacity should be 0.1 to 1"}(),function(){if(me<1||me>18||!/^[-+]?[0-9]*\.?[0-9]+$/.test(me))return"Size should be 1 to 18"}()],Se=ve[0],Ae=ve[1],Ee=Boolean(y&&(y.data.metadata.Spatial_Resolution===G.a.irregular||y.data.metadata.Temporal_Resolution===Y.a.irregular)&&y.data&&y.data.variableValues&&y.data.variableValues.length>=ba.a);return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{position:"relative",pointerEvents:"none",margin:"auto",maxWidth:"80%"}},Ee?m.a.createElement(E.a,{title:"Visualization does not contain all requested data. Click for more info."},m.a.createElement(ia.a,{className:a.sparseDataMaxSizeWarningIcon,onClick:function(){e.sparseDataMaxSizeNotificationUpdate(Object(fa.a)(e.chart.data))}})):"",m.a.createElement(ra.a,{className:a.buttonGroup},Boolean(t)&&m.a.createElement(E.a,{placement:"top",title:"Split By Date"},m.a.createElement(C.a,{color:"inherit",className:"".concat(a.iconButton," ").concat(n&&a.depressed),onClick:t},m.a.createElement(ca.a,null))),Boolean(r)&&m.a.createElement(E.a,{placement:"top",title:"zonal"===l?"Split by Latitude":"Split by Longitude"},m.a.createElement(C.a,{color:"inherit",className:"".concat(a.iconButton," ").concat(o&&a.depressed),onClick:r},m.a.createElement(pa.a,null))),m.a.createElement(E.a,{placement:"top",title:"Download CSV"},m.a.createElement(C.a,{color:"inherit",onClick:s,className:a.iconButton},m.a.createElement(ua.a,null))),Boolean(i)&&m.a.createElement(E.a,{title:"Change Colorscale Range",placement:"top"},m.a.createElement(C.a,{color:"inherit",onClick:function(e){return M(e.currentTarget)},className:a.iconButton},m.a.createElement(ma.a,null))),Boolean(f)&&m.a.createElement(E.a,{title:b?"Hide Plot Line":"Show Plot Line",placement:"top"},m.a.createElement(C.a,{color:"inherit",onClick:function(){return f(!b)},className:"".concat(a.iconButton," ").concat(b&&a.depressed)},m.a.createElement(R.a,null))),Boolean(g)&&m.a.createElement(E.a,{title:h?"Hide Error Bars":"Show Error Bars",placement:"top"},m.a.createElement(C.a,{color:"inherit",onClick:function(){return g(!h)},className:"".concat(a.iconButton," ").concat(h&&a.depressed)},m.a.createElement(da.a,null))),Boolean(e.handlePaletteChoice)&&m.a.createElement(E.a,{title:"Change Palette",placement:"top"},m.a.createElement(C.a,{disabled:!Boolean(e.handlePaletteChoice),color:"inherit",onClick:function(e){O(e.currentTarget)},className:a.iconButton},m.a.createElement(ha.a,null))),Boolean(e.handleMarkerOptionsConfirm)&&m.a.createElement(E.a,{title:"Marker Options",placement:"top"},m.a.createElement(C.a,{color:"inherit",onClick:function(e){return X(e.currentTarget)},className:"".concat(a.iconButton," ").concat(a.lastIcon)},m.a.createElement(ga.a,null))))),m.a.createElement(oa.a,{id:"simple-menu",anchorEl:A,keepMounted:!0,open:Boolean(A),onClose:function(){return O(null)},className:a.colorscaleMenu,MenuListProps:{className:a.grayBackground}},ya.map((function(a,t){return m.a.createElement(re.a,{onClick:function(){return function(a){O(null),e.handlePaletteChoice(a)}("Default"===a?"heatmap":a)},key:t},a)}))),m.a.createElement(la.a,{id:H,open:B,anchorEl:L,onClose:U,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{className:a.grayBackground},classes:{root:a.setPopoverZ}},m.a.createElement("div",{className:a.popover},m.a.createElement(w.a,{container:!0,spacing:1},m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{variant:"outlined",error:Boolean(q)},m.a.createElement(Le.a,{htmlFor:"z-min-input"},"Min"),m.a.createElement(sa.a,{id:"z-min-input",value:z,onChange:function(e){return j(e.target.value)},"aria-describedby":"local-zmin-error",labelWidth:36,name:"local-zmin"}),m.a.createElement(te.a,{id:"local-zmin-error"},q))),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{variant:"outlined",error:Boolean(K)},m.a.createElement(Le.a,{htmlFor:"z-max-input"},"Max"),m.a.createElement(sa.a,{id:"z-max-input",value:F,onChange:function(e){return V(e.target.value)},"aria-describedby":"local-zmax-error",labelWidth:36,name:"local-zmax"}),m.a.createElement(te.a,{id:"local-zmax-error"},K))),m.a.createElement(w.a,{item:!0,xs:7}),m.a.createElement(w.a,{item:!0,xs:2},m.a.createElement(D.a,{onClick:U},"Cancel")),m.a.createElement(w.a,{item:!0,xs:2},m.a.createElement(D.a,{color:"primary",onClick:function(){i([z,F]),U()},disabled:Boolean(q||K)},"Confirm")),m.a.createElement(w.a,{item:!0,xs:1})))),m.a.createElement(la.a,{id:xe,open:fe,anchorEl:J,onClose:ye,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},classes:{root:a.setPopoverZ},PaperProps:{className:a.grayBackground}},m.a.createElement("div",{className:a.popover},m.a.createElement(w.a,{container:!0,spacing:1},m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{variant:"outlined",error:Boolean(Se)},m.a.createElement(Le.a,{htmlFor:"local-marker-opacity"},"Opacity"),m.a.createElement(sa.a,{id:"local-marker-opacity",value:ne,onChange:function(e){return oe(e.target.value)},"aria-describedby":"local-marker-opacity",labelWidth:44,name:"local-marker-opacity"}),m.a.createElement(te.a,{id:"local-marker-opacity-error"},Se))),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{variant:"outlined"},m.a.createElement(Le.a,{htmlFor:"local-marker-size"},"Size"),m.a.createElement(sa.a,{error:Boolean(Ae),id:"local-marker-size",value:me,onChange:function(e){return de(e.target.value)},"aria-describedby":"local-marker-size",labelWidth:36,name:"local-marker-size"}),m.a.createElement(te.a,{id:"local-marker-size-error"},Ae))),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(ae.a,{variant:"outlined",className:a.colorForm},m.a.createElement(Le.a,{htmlFor:"z-min-input"},"Color"),m.a.createElement(sa.a,{type:"color",id:"marker-color",value:ie,onChange:function(e){return ce(e.target.value)},"aria-describedby":"local-marker-color",labelWidth:44,name:"local-marker-color"}))),m.a.createElement(w.a,{item:!0,xs:1}),m.a.createElement(w.a,{item:!0,xs:2},m.a.createElement(D.a,{onClick:ye},"Cancel")),m.a.createElement(w.a,{item:!0,xs:2},m.a.createElement(D.a,{color:"primary",onClick:function(){d({opacity:ne,color:ie,size:me}),ye()},disabled:Boolean(Se||Ae)},"Confirm")),m.a.createElement(w.a,{item:!0,xs:1})))))}))),Sa={csvFromVizRequestSend:_.n},Aa=Object(d.b)(null,Sa)(Object(f.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:V.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},iconButtonWrapper:{display:"inline-block"}}}))((function(e){var a=e.csvFromVizRequestSend,t=e.chart.data,n=t.metadata,r=t.parameters,o=r.dt1===r.dt2?ta(r.dt1):ta(r.dt1)+" to "+ta(r.dt2),s=r.lat1===r.lat2?r.lat1+"\xb0":r.lat1+"\xb0 to "+r.lat2+"\xb0",i=r.lon1===r.lon2?r.lon1+"\xb0":r.lon1+"\xb0 to "+r.lon2+"\xb0",c=t.hasDepth?r.depth1===r.depth2?"".concat(r.depth1,"[m]"):"".concat(r.depth1,"[m] to ").concat(r.depth2,"[m]"):"Surface";return m.a.createElement(m.a.Fragment,null,m.a.createElement(va,{downloadCsv:function(){a(t,n.Table_Name,n.Variable,n.Long_Name)},chart:e.chart}),m.a.createElement($e.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{x:t.variableValues,name:"".concat(n.Long_Name.length>60?n.Long_Name.slice(0,60)+"...":n.Long_Name),type:"histogram",marker:{color:"#00FFFF"}}],layout:Object(l.a)(Object(l.a)({},na.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(n.Dataset_Name)+"<br>".concat(n.Long_Name.length>60?n.Long_Name.slice(0,60)+"...":n.Long_Name," [").concat(n.Unit,"]")+"<br>".concat(o,", ")+c+"<br>Lat: ".concat(s,", ")+"Lon: ".concat(i),font:{size:12}},xaxis:{title:"".concat(n.Long_Name.length>35?n.Long_Name.slice(0,35)+"...":n.Long_Name," [").concat(n.Unit,"]"),exponentformat:"power",color:"#ffffff"},yaxis:{color:"#ffffff",title:"Frequency"},annotations:na.annotations(n.Distributor,n.Data_Source)}),config:Object(l.a)({},na.config)}))}))),Ea=function(e){var a,t=e.lonMax-e.lonMin;a=t<2?(t/6).toFixed(2):Math.floor(t/6);var n=Array.from(Array(5),(function(t,n){return Math.ceil(e.lonMin+(n+1)*a)})),r=n.map((function(e){return e>180?e-360:e}));return{tickmode:"array",tickvals:n,ticktext:r}},Ca=function(e){var a=(e.lonMax-e.lonMin)/(e.latMax-e.latMin),t=40,n=40;return isNaN(a)?t/=1.65:a>1?a<=1.5?n*=a:(n*=1.5,t=a>3?t/1.65:t*(1.8/a)):n=a<.5?.5*n:n*a,[t,n]},Oa=t(896),wa={setLoadingMessage:F.h,snackbarOpen:F.n,csvFromVizRequestSend:_.n},Da=Object(d.b)((function(e,a){return{charts:e.charts}}),wa)(Object(f.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:V.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},iconButtonWrapper:{display:"inline-block"}}}))((function(e){var a,t=e.snackbarOpen,n=e.csvFromVizRequestSend,r=e.chart,o=r.data,s=r.subType,i=o.dates,c=o.depths,p=o.extent,d=o.metadata,h=Object(u.useState)(!1),b=Object(x.a)(h,2),f=b[0],y=b[1],v=Object(u.useState)(!0),S=Object(x.a)(v,2),A=S[0],E=S[1],C=Object(u.useState)("heatmap"),O=Object(x.a)(C,2),w=O[0],D=O[1],N=Object(u.useState)([o.zMin,o.zMax]),T=Object(x.a)(N,2),L=T[0],M=T[1],k=Object(x.a)(L,2),P=k[0],z=k[1],j=o.generatePlotData(s,f,A);switch(s){case g.a.contourMap:a=function(e,a,t,n,r,o,s){var i=a.parameters,c=a.metadata,p=Array.from(a.depths).map((function(e){return parseFloat(e)})),u=Array.from(a.dates),d=a.parameters.lon1>a.parameters.lon2?Ea(a):{},h=Ca(a),g=Object(x.a)(h,2),b=g[0],f=g[1];return e.map((function(e,h){var g=u.length<=1?ta(u[0],a.hasHour,a.isMonthly):t?ta(n?u[Math.floor(h/p.length)]:u[h],a.hasHour,a.isMonthly):"Averaged Values ".concat(ta(u[0],a.hasHour,a.isMonthly)," to ").concat(ta(u[u.length-1],a.hasHour,a.isMonthly)),x=a.hasDepth?1===p.length?p[0]+"[m]":n?t?p[h%p.length].toFixed(2)+"[m]":p[h].toFixed(2)+"[m]":"Averaged Values ".concat(i.depth1," to ").concat(i.depth2):"Surface",y=i.lat1===i.lat2?"".concat(i.lat1,"\xb0"):"".concat(i.lat1,"\xb0 to ").concat(i.lat2,"\xb0"),v=i.lon1===i.lon2?"".concat(i.lon1,"\xb0"):"".concat(i.lon1,"\xb0 to ").concat(i.lon2,"\xb0"),S=e.map((function(e,t){var n=Math.abs(e),r=n>.01&&n<1e3?".2f":".2e";return null===e?"Lat: ".concat(Object(Oa.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(Oa.a)(".2f")(a.lons[t]-360):Object(Oa.a)(".2f")(a.lons[t]),"\xb0"):"Lat: ".concat(Object(Oa.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(Oa.a)(".2f")(a.lons[t]-360):Object(Oa.a)(".2f")(a.lons[t]),"\xb0")+"<br>"+"".concat(a.parameters.fields,": ").concat(Object(Oa.a)(r)(e)," [").concat(a.metadata.Unit,"]")}));return m.a.createElement($e.a,{style:{position:"relative",width:"".concat(f,"vw"),height:"".concat(b,"vw"),minWidth:"".concat(10*f,"px"),minHeight:"".concat(10*b,"px"),margin:"0 auto"},useResizeHandler:!0,data:[{zauto:!1,zmin:o,zmax:s,x:a.lons,y:a.lats,z:e,connectgaps:!1,autocolorscale:!1,colorscale:r,hoverinfo:"text",hovertext:S,name:"".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name),type:"contour",contours:{coloring:r,showlabels:!0,labelfont:{family:"Raleway",size:12,color:"white"},labelformat:a.zMin>1&&a.zMin<1e3?".2f":".2e"},colorbar:{title:{text:"[".concat(a.metadata.Unit,"]")},exponentformat:"power"}}],config:Object(l.a)({},na.config),key:h,layout:Object(l.a)(Object(l.a)({},na.layout),{},{title:{text:"".concat(c.Dataset_Name)+"<br>".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name," [").concat(c.Unit,"]")+"<br>".concat(g,", ")+"".concat(x," <br>")+"Lat: ".concat(y,", ")+"Lon: ".concat(v),font:{size:12}},xaxis:Object(l.a)({title:"Longitude",color:"#ffffff"},d),yaxis:{title:"Latitude",color:"#ffffff"},annotations:na.annotations(a.metadata.Distributor,c.Data_Source)})})}))}(j,o,f,A,w,P,z);break;case g.a.heatmap:a=function(e,a,t,n,r,o,s){var i=a.parameters,c=a.metadata,p=Array.from(a.depths).map((function(e){return parseFloat(e)})),u=Array.from(a.dates),d=a.parameters.lon1>a.parameters.lon2?Ea(a):{},h=Ca(a),g=Object(x.a)(h,2),b=g[0],f=g[1];return e.map((function(e,h){var g=u.length<=1?ta(u[0],a.hasHour,a.isMonthly):t?ta(n?u[Math.floor(h/p.length)]:u[h],a.hasHour,a.isMonthly):"Averaged Values ".concat(ta(u[0],a.hasHour,a.isMonthly)," to ").concat(ta(u[u.length-1],a.hasHour,a.isMonthly)),x=a.hasDepth?1===p.length?p[0]+"[m]":n?t?p[h%p.length].toFixed(2)+"[m]":p[h].toFixed(2)+"[m]":"Averaged Values ".concat(i.depth1," to ").concat(i.depth2):"Surface",y=i.lat1===i.lat2?"".concat(i.lat1,"\xb0"):"".concat(i.lat1,"\xb0 to ").concat(i.lat2,"\xb0"),v=i.lon1===i.lon2?"".concat(i.lon1,"\xb0"):"".concat(i.lon1,"\xb0 to ").concat(i.lon2,"\xb0"),S=e.map((function(e,t){var n=Math.abs(e),r=n>.01&&n<1e3?".2f":".2e";return null===e||isNaN(e)?"Lat: ".concat(Object(Oa.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(Oa.a)(".2f")(a.lons[t]-360):Object(Oa.a)(".2f")(a.lons[t]),"\xb0"):"Lat: ".concat(Object(Oa.a)(".2f")(a.lats[t]),"\xb0")+"<br>"+"Lon: ".concat(a.lons[t]>180?Object(Oa.a)(".2f")(a.lons[t]-360):Object(Oa.a)(".2f")(a.lons[t]),"\xb0")+"<br>"+"".concat(a.parameters.fields,": ").concat(Object(Oa.a)(r)(e)," [").concat(a.metadata.Unit,"]")}));return m.a.createElement($e.a,{style:{position:"relative",width:"".concat(f,"vw"),height:"".concat(b,"vw"),minWidth:"".concat(10*f,"px"),minHeight:"".concat(10*b,"px")},useResizeHandler:!0,data:[{zauto:!1,zmin:o,zmax:s,zsmooth:e.length<2e4?"fast":"false",x:a.lons,y:a.lats,z:e,connectgaps:!1,name:"".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name),type:"heatmap",colorscale:r,autocolorscale:!1,hoverinfo:"text",text:S,colorbar:{title:{text:"[".concat(a.metadata.Unit,"]")},exponentformat:"power"}}],key:h,config:Object(l.a)({},na.config),layout:Object(l.a)(Object(l.a)({},na.layout),{},{title:{text:"".concat(c.Dataset_Name)+"<br>".concat(c.Long_Name.length>60?c.Long_Name.slice(0,60)+"...":c.Long_Name," [").concat(c.Unit,"]")+"<br>".concat(g,", ")+"".concat(x," <br>")+"Lat: ".concat(y,", ")+"Lon: ".concat(v),font:{size:13}},xaxis:Object(l.a)({title:"Longitude[\xb0]",color:"#ffffff",exponentformat:"power"},d),yaxis:{title:"Latitude[\xb0]",color:"#ffffff",exponentformat:"power"},annotations:na.annotations(a.metadata.Distributor,c.Data_Source)})})}))}(j,o,f,A,w,P,z);break;case g.a.histogram:return m.a.createElement(Aa,{chart:{data:o}});default:a=""}return m.a.createElement(m.a.Fragment,null,m.a.createElement(va,{handlePaletteChoice:s!==g.a.histogram&&function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),D(a)}),100)},onToggleSplitByDepth:1===c.size?null:function(){e.setLoadingMessage("Processing Data"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),E(!A)}),100)},onToggleSplitByDate:1===i.size?null:function(){var a=c?c.size:1;if(s===g.a.heatmap){var n=15-K(e.charts);if(!f&&a*i.size>n)return void t("Unable to split. Rendering limit exceeded.")}s===g.a.contourMap&&!f&&a*i.size>20?t("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Processing Data"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),y(!f)}),100))},splitByDepth:A,splitByDate:f,handleZValueConfirm:s!==g.a.histogram&&function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),M(a)}),100)},zValues:s!==g.a.histogram&&L,extent:s!==g.a.histogram&&p,downloadCsv:function(){n(o,d.Table_Name,d.Variable,d.Long_Name)},chart:r}),a)}))),Na={setLoadingMessage:F.h,csvFromVizRequestSend:_.n},Ta=Object(d.b)(null,Na)(Object(f.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:V.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){var a=e.csvFromVizRequestSend,t=e.chart.data,n=t.stds,r=t.variableValues,o=t.dates,s=t.parameters,i=t.metadata,c=m.a.useState({opacity:.2,color:"#ff1493",size:6}),p=Object(x.a)(c,2),u=p[0],d=p[1],h=m.a.useState(!0),g=Object(x.a)(h,2),b=g[0],f=g[1],y=m.a.useState(!!(r&&r.length<=40)),v=Object(x.a)(y,2),S=v[0],A=v[1],E=r.map((function(e,a){return"Time: ".concat(o[a].slice(0,10),"<br>").concat(s.fields,": ").concat(Object(Oa.a)(".2e")(e)," \xb1 ").concat(Object(Oa.a)(".2e")(n[a])," [").concat(i.Unit,"]")})),C=s.dt1===s.dt2?ta(o[0],t.hasHour,t.isMonthly):ta(o[0],t.hasHour,t.isMonthly)+" to "+ta(o[o.length-1],t.hasHour,t.isMonthly),O=s.lat1===s.lat2?s.lat1+"\xb0":s.lat1+"\xb0 to "+s.lat2+"\xb0",w=s.lon1===s.lon2?s.lon1+"\xb0":s.lon1+"\xb0 to "+s.lon2+"\xb0",D=0===s.depth2?"Surface":s.depth1===s.depth2?"".concat(s.depth1,"[m]"):"".concat(s.depth1,"[m] to ").concat(s.depth2,"[m]"),N=t.isMonthly?o.map((function(e){return aa[parseInt(e)]})):o;return m.a.createElement("div",null,m.a.createElement(va,{downloadCsv:function(){a(t,i.Table_Name,i.Variable,i.Long_Name)},handleMarkerOptionsConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),d(a)}),50)},markerOptions:u,showErrorBars:S,handleSetShowErrorBars:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),A(a)}),50)},showLines:b,handleSetShowLines:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),f(a)}),50)},chart:e.chart}),m.a.createElement($e.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{mode:b?"lines+markers":"markers",x:N,y:r,error_y:{type:"data",array:n,opacity:.3,color:S?"#f2f2f2":"transparent",visible:!0},name:"".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name),type:r.length>1e4?"scattergl":"scatter",line:{color:u.color},marker:{opacity:u.opacity,size:u.size,color:u.color},hoverinfo:"text",hovertext:E}],config:Object(l.a)({},na.config),layout:Object(l.a)(Object(l.a)({},na.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(i.Dataset_Name)+"<br>".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name," [").concat(i.Unit,"]")+"<br>".concat(C,", ")+D+"<br>Lat: ".concat(O,", ")+"Lon: ".concat(w),font:{size:12}},xaxis:{title:t.isMonthy?"Month":"Time",color:"#ffffff",exponentformat:"power"},yaxis:{title:"".concat(i.Long_Name.length>35?i.Long_Name.slice(0,35)+"...":i.Long_Name," [").concat(i.Unit,"]"),color:"#ffffff",exponentformat:"power"},annotations:na.annotations(i.Distributor,i.Data_Source)})}))}))),La={setLoadingMessage:F.h,csvFromVizRequestSend:_.n},Ma=Object(d.b)(null,La)(Object(f.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:V.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){e.setLoadingMessage;var a=e.csvFromVizRequestSend,t=e.chart.data,n=t.stds,r=t.variableValues,o=t.depths,s=t.parameters,i=t.metadata,c=m.a.useState(!0),p=Object(x.a)(c,2),u=p[0],d=p[1],h=m.a.useState(!!(r&&r.length<=40)),g=Object(x.a)(h,2),b=g[0],f=g[1],y=t,v=m.a.useState({opacity:.2,color:"#ff1493",size:6}),S=Object(x.a)(v,2),A=S[0],E=S[1],C=r.map((function(e,a){return"Depth: ".concat(Object(Oa.a)(".2f")(o[a])," [m] <br>").concat(s.fields,": ").concat(Object(Oa.a)(".2e")(e)," \xb1 ").concat(Object(Oa.a)(".2e")(n[a])," [").concat(i.Unit,"]")})),O=y.isMonthly?new Date(s.dt1).getMonth()+1:s.dt1,w=y.isMonthly?new Date(s.dt2).getMonth()+1:s.dt2,D=O===w?ta(O,y.hasHour,y.isMonthly):ta(O,y.hasHour,y.isMonthly)+" to "+ta(w,y.hasHour,y.isMonthly);return m.a.createElement("div",null,m.a.createElement(va,{downloadCsv:function(){a(t,i.Table_Name,i.Variable,i.Long_Name)},handleMarkerOptionsConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),E(a)}),100)},markerOptions:A,showErrorBars:b,handleSetShowErrorBars:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),f(a)}),50)},showLines:u,handleSetShowLines:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),d(a)}),50)},chart:e.chart}),m.a.createElement($e.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{mode:u?"lines+markers":"markers",y:o,x:r,error_x:{type:"data",array:n,opacity:.3,color:b?"#f2f2f2":"transparent",visible:!0},name:"".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name),type:r.length>1e4?"scattergl":"scatter",marker:{line:{color:A.color},opacity:A.opacity,size:A.size,color:A.color},hoverinfo:"text",hovertext:C}],config:Object(l.a)({},na.config),layout:Object(l.a)(Object(l.a)({},na.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(i.Dataset_Name)+"<br>".concat(i.Long_Name.length>60?i.Long_Name.slice(0,60)+"...":i.Long_Name," [").concat(i.Unit,"]")+"<br>".concat(D,", ")+"".concat(s.depth1,"[m] to ").concat(s.depth2,"[m] <br>")+"Lat: ".concat(s.lat1,"\xb0 to ").concat(s.lat2,"\xb0, ")+"Lon: ".concat(s.lon1,"\xb0 to ").concat(s.lon2,"\xb0"),font:{size:12}},yaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power",autorange:"reversed"},xaxis:{title:"".concat(i.Long_Name.length>35?i.Long_Name.slice(0,35)+"...":i.Long_Name," [").concat(i.Unit,"]"),color:"#ffffff",exponentformat:"power"},annotations:na.annotations(i.Distributor,i.Data_Source)})}))}))),ka={setLoadingMessage:F.h,snackbarOpen:F.n,csvFromVizRequestSend:_.n},Pa=Object(d.b)(null,ka)(Object(f.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:V.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"}}}))((function(e){var a=e.classes,t=e.snackbarOpen,n=e.csvFromVizRequestSend,r=e.chart.data,o=r.dates,s=r.extent,i=r.lats,c=r.lons,p=r.metadata,d=Object(u.useState)(!1),h=Object(x.a)(d,2),b=h[0],f=h[1],y=Object(u.useState)(!1),v=Object(x.a)(y,2),S=v[0],A=v[1],E=Object(u.useState)(r.orientation),C=Object(x.a)(E,2),O=C[0],w=C[1],D=Object(u.useState)("heatmap"),N=Object(x.a)(D,2),T=N[0],L=N[1],M=Object(u.useState)([r.zMin,r.zMax]),k=Object(x.a)(M,2),P=k[0],z=k[1],j=Object(x.a)(P,2),I=j[0],R=j[1],_="zonal"===O?i:c,F=function(e,a,t,n,r,o,s,i){var c=a.parameters,p=a.metadata,u=Array.from(a.dates),d=Array.from(a.depths),h=Array.from(a.lats),b=Array.from(a.lons),f="zonal"===r?h:b,x="zonal"===r?"Longitude":"Latitude",y=c.lon1>c.lon2&&"zonal"===r?Ea(a):{};return e.map((function(e,v){var S=e,A=[],E=[];if("zonal"===r)for(var C=0;C<e.length;C++)A.push(b[Math.floor(C/d.length)]);else for(var O=0;O<e.length;O++)A.push(h[Math.floor(O/d.length)]);for(var w=0;w<e.length;w++)E.push(d[w%d.length]);var D="meridional"===r?"".concat(c.lat1,"\xb0 to ").concat(c.lat2,"\xb0"):n?f[v%f.length]+"\xb0":"Averaged Values ".concat(c.lat1,"\xb0 to ").concat(c.lat2,"\xb0"),N="zonal"===r?"".concat(c.lon1,"\xb0 to ").concat(c.lon2,"\xb0"):n?f[v%f.length]+"\xb0":"Averaged Values ".concat(c.lon1,"\xb0 to ").concat(c.lon2,"\xb0"),T=u.length<2?ta(u[0],a.hasHour,a.isMonthly):t&&n?ta(u[Math.floor(v/f.length)],a.hasHour,a.isMonthly):t?ta(u[v],a.hasHour,a.isMonthly):"Averaged Values "+ta(u[0],a.hasHour,a.isMonthly)+" to "+ta(u[u.length-1],a.hasHour,a.isMonthly),L=S.map((function(e,a){if("zonal"===r){var t=e>1&&e<1e3?".2f":".2e";return isNaN(e)?"Depth: ".concat(Object(Oa.a)(".2f")(E[a])," [m]")+"<br>"+"Lon: ".concat(Object(Oa.a)(".2f")(A[a]>180?A[a]-360:A[a]),"\xb0"):"Depth: ".concat(Object(Oa.a)(".2f")(E[a])," [m]")+"<br>"+"Lon: ".concat(Object(Oa.a)(".2f")(A[a]>180?A[a]-360:A[a]),"\xb0")+"<br>"+"".concat(c.fields,": ").concat(Object(Oa.a)(t)(e)," [").concat(p.Unit,"]")}var n=e>1&&e<1e3?".2f":".2e";return isNaN(e)?"Depth: ".concat(Object(Oa.a)(".2f")(E[a])," [m]")+"<br>"+"Lat: ".concat(Object(Oa.a)(".2f")(A[a]),"\xb0"):"Depth: ".concat(Object(Oa.a)(".2f")(E[a])," [m]")+"<br>"+"Lat: ".concat(Object(Oa.a)(".2f")(A[a]),"\xb0")+"<br>"+"".concat(c.fields,": ").concat(Object(Oa.a)(n)(e)," [").concat(p.Unit,"]")}));return m.a.createElement($e.a,{style:{position:"relative",width:"60vw",height:"40vw",minWidth:"510px",minHeight:"340px"},useResizeHandler:!0,data:[{zauto:!1,zmin:s,zmax:i,connectgaps:!1,autocolorscale:!1,colorscale:o,zsmooth:e.length<2e4?"best":"fast",x:A,y:E,z:S,name:c.fields,type:a.subType===g.a.contourSectionMap?"contour":"heatmap",colorbar:{title:{text:"[".concat(p.Unit,"]")},exponentformat:"power"},contours:{coloring:o,showlabels:!0,labelfont:{family:"Raleway",size:12,color:"white"},labelformat:".2e"},hoverinfo:"text",hovertext:L}],key:v,layout:{font:{color:"#ffffff"},title:{text:"".concat(p.Dataset_Name)+"<br>".concat(p.Long_Name.length>60?p.Long_Name.slice(0,60)+"...":p.Long_Name," [").concat(p.Unit,"]")+"<br>".concat(T,", ")+"".concat(c.depth1,"[m] to ").concat(c.depth2,"[m] <br>")+"Lat: ".concat(D,", ")+"Lon: ".concat(N),font:{size:12}},xaxis:Object(l.a)({title:"".concat(x,"[\xb0]"),color:"#ffffff",exponentformat:"power"},y),yaxis:{title:"Depth[m]",color:"#ffffff",exponentformat:"power",autorange:"reversed"},paper_bgcolor:V.a.backgroundGray,annotations:na.annotations(p.Distributor,p.Data_Source)}})}))}(r.generatePlotData(O,b,S),r,b,S,O,T,I,R);return m.a.createElement("div",null,m.a.createElement("div",{className:a.buttonBlock},m.a.createElement(va,{orientation:O,switchOrientation:function(){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),w("zonal"===O?"meridional":"zonal")}),100)},onToggleSplitBySpace:1===_.size?null:function(){var a=b?o.size:1;!S&&a*_.size>20?t("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),A(!S)}),100))},splitBySpace:S,onToggleSplitByDate:1===o.size?null:function(){var a=S?_.size:1;!b&&a*o.size>20?t("Unable to split. Rendering limit exceeded."):(e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),f(!b)}),100))},splitByDate:b,handlePaletteChoice:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),L(a)}),100)},handleZValueConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),z(a)}),100)},zValues:P,extent:s,downloadCsv:function(){n(r,p.Table_Name,p.Variable,p.Long_Name)},chart:e.chart})),F)}))),za=t(897),ja=t(875),Ia=function(e){var a,t=e.xValues,n=e.yValues,r=e.markerOptions,o=e.infoObject,s=e.xTitle,i=e.yTitle,c=e.type,p=o.parameters,u=o.metadata,d=o.hasDepth,h=o.variableValues,g=o.times,b=o.lats,f=o.lons,x=o.depths;switch(c){case"time":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e",n=g[a].slice(0,20);return n=n.replace("T"," "),"Time: ".concat(n,"<br>").concat(p.fields,": ").concat(Object(Oa.a)(t)(e)," [").concat(u.Unit,"]")}));break;case"latitude":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e";return"Lat: ".concat(b[a].toFixed(2),"<br>").concat(p.fields,": ").concat(Object(Oa.a)(t)(e)," [").concat(u.Unit,"]")}));break;case"longitude":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e";return"Lon: ".concat(f[a].toFixed(2),"<br>").concat(p.fields,": ").concat(Object(Oa.a)(t)(e)," [").concat(u.Unit,"]")}));break;case"depth":a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e";return"Depth: ".concat(x[a].toFixed(2),"<br>").concat(p.fields,": ").concat(Object(Oa.a)(t)(e)," [").concat(u.Unit,"]")}));break;default:a=h.map((function(e,a){var t=e>1&&e<1e3?".2f":".2e",n=g[a].slice(0,20);return n=n.replace("T"," "),"Time: ".concat(n,"<br>").concat(p.fields,": ").concat(Object(Oa.a)(t)(e)," [").concat(u.Unit,"]")}))}var y=p.dt1===p.dt2?ta(p.dt1):ta(p.dt1)+" to "+ta(p.dt2),v=p.lat1===p.lat2?p.lat1+"\xb0":p.lat1+"\xb0 to "+p.lat2+"\xb0",S=p.lon1===p.lon2?p.lon1+"\xb0":p.lon1+"\xb0 to "+p.lon2+"\xb0",A=d?p.depth1===p.depth2?"".concat(p.depth1,"[m]"):"".concat(p.depth1,"[m] to ").concat(p.depth2,"[m]"):"Surface";return m.a.createElement($e.a,{style:{position:"relative",width:"60vw",height:"40vw"},useResizeHandler:!0,data:[{x:t,y:n,mode:"markers",name:"".concat(u.Long_Name.length>60?u.Long_Name.slice(0,60)+"...":u.Long_Name),type:h.length>1e4?"scattergl":"scatter",marker:{opacity:r.opacity,size:r.size,color:r.color},hoverinfo:"text",hovertext:a}],config:Object(l.a)({},na.config),layout:Object(l.a)(Object(l.a)({},na.layout),{},{plot_bgcolor:"transparent",title:{text:"".concat(u.Dataset_Name)+"<br>".concat(u.Long_Name.length>60?u.Long_Name.slice(0,60)+"...":u.Long_Name," [").concat(u.Unit,"]")+"<br>".concat(y,", ")+A+"<br>Lat: ".concat(v,", ")+"Lon: ".concat(S),font:{size:12}},xaxis:{title:s,color:"#ffffff",exponentformat:"power"},yaxis:{title:i,color:"#ffffff",exponentformat:"power",autorange:"depth"!==c||"reversed"},annotations:na.annotations(u.Distributor,u.Data_Source)})})},Ra={setLoadingMessage:F.h,csvFromVizRequestSend:_.n};function _a(e){return{id:"sparse-tab-".concat(e),"aria-controls":"sparse-tab-".concat(e)}}var Fa=function(e){var a=e.children,t=e.selectedTab,n=e.index,r=e.controlPanelProps;return m.a.createElement("div",{hidden:t!==n},m.a.createElement(va,Object.assign({},r,{chart:e.chart})),a)},Va=m.a.memo((function(e){var a=e.classes,t=e.csvFromVizRequestSend,n=e.chart.data,r=n.metadata,o=Object(u.useState)("Heatmap"),s=Object(x.a)(o,2),i=s[0],c=s[1],p=Object(u.useState)([n.zMin,n.zMax]),d=Object(x.a)(p,2),h=d[0],g=d[1],b=Object(u.useState)({opacity:.7,color:"#ff1493",size:6}),f=Object(x.a)(b,2),y=f[0],v=f[1],S=Object(u.useState)(0),A=Object(x.a)(S,2),E=A[0],C=A[1],O=function(e,a,t){var n=e.parameters,r=e.metadata,o=n.dt1===n.dt2?ta(n.dt1):ta(n.dt1)+" to "+ta(n.dt2),s=n.lat1===n.lat2?n.lat1+"\xb0":n.lat1+"\xb0 to "+n.lat2+"\xb0",i=n.lon1===n.lon2?n.lon1+"\xb0":n.lon1+"\xb0 to "+n.lon2+"\xb0",c=e.hasDepth?n.depth1===n.depth2?"".concat(n.depth1,"[m]"):"".concat(n.depth1,"[m] to ").concat(n.depth2,"[m]"):"Surface";return m.a.createElement($e.a,{style:{position:"relative",width:"60vw",height:"40vw",minWidth:"510px",minHeight:"340px"},useResizeHandler:!0,data:[{zauto:!1,zmin:t[0],zmax:t[1],lon:e.lons,lat:e.lats,z:e.variableValues,autocolorscale:!1,colorscale:a,radius:6,name:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),type:"densitymapbox",colorbar:{title:{text:"[".concat(e.metadata.Unit,"]")},exponentformat:"power"}}],layout:Object(l.a)(Object(l.a)({},na.layout),{},{title:{text:"".concat(r.Dataset_Name)+"<br>".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name," [").concat(r.Unit,"]")+"<br>".concat(o,", ")+c+"<br>Lat: ".concat(s,", ")+"Lon: ".concat(i),font:{size:12}},mapbox:{style:"white-bg",layers:[{sourcetype:"raster",source:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],below:"traces"}],center:e.center,zoom:e.zoom},annotations:na.annotations(e.metadata.Distributor,r.Data_Source)}),config:Object(l.a)(Object(l.a)({},na.config),{},{mapboxAccessToken:"pk.eyJ1IjoiZGVuaG9sdHoiLCJhIjoiY2p1ZW9obTNhMDVxZjQzcDRvMmdlcDN2aiJ9.HvLaX2bcradeE5T-lpTc8w"})})}(n,i,h),w=function(){t(n,r.Table_Name,r.Variable,r.Long_Name)},D={map:{palette:i,handlePaletteChoice:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),c(a)}),100)},zValues:h,handleZValueConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),g(a)}),100)},downloadCsv:w},scatter:{downloadCsv:w,markerOptions:y,setMarkerOptions:v,handleMarkerOptionsConfirm:function(a){e.setLoadingMessage("Re-rendering"),setTimeout((function(){window.requestAnimationFrame((function(){return e.setLoadingMessage("")})),v(a)}),100)}}};return m.a.createElement("div",null,m.a.createElement(za.a,{value:E,onChange:function(e,a){C(a)},"aria-label":"Sparse tabs",centered:!0,indicatorColor:"primary",className:a.tabs},m.a.createElement(ja.a,Object.assign({label:"Map"},_a(0),{className:a.tab,onClick:function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),30)}})),m.a.createElement(ja.a,Object.assign({label:"By Time"},_a(1),{className:a.tab})),m.a.createElement(ja.a,Object.assign({label:"By Lat"},_a(2),{className:a.tab})),m.a.createElement(ja.a,Object.assign({label:"By Lon"},_a(3),{className:a.tab})),n.hasDepth&&m.a.createElement(ja.a,Object.assign({label:"By Depth"},_a(4),{className:a.tab}))),m.a.createElement(Fa,{selectedTab:E,index:0,controlPanelProps:D.map,chart:e.chart},0===E&&O),m.a.createElement(Fa,{selectedTab:E,index:1,controlPanelProps:D.scatter,chart:e.chart},1===E&&m.a.createElement(Ia,{xValues:n.times,yValues:n.variableValues,markerOptions:y,infoObject:n,xTitle:"Time",yTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name," [").concat(r.Unit,"]"),type:"time"})),m.a.createElement(Fa,{selectedTab:E,index:2,controlPanelProps:D.scatter,chart:e.chart},2===E&&m.a.createElement(Ia,{xValues:n.lats,yValues:n.variableValues,markerOptions:y,infoObject:n,xTitle:"Latitude",yTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),type:"latitude"})),m.a.createElement(Fa,{selectedTab:E,index:3,controlPanelProps:D.scatter,chart:e.chart},3===E&&m.a.createElement(Ia,{xValues:n.lons,yValues:n.variableValues,markerOptions:y,infoObject:n,xTitle:"Longitude",yTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),type:"longitude"})),n.hasDepth&&m.a.createElement(Fa,{selectedTab:E,index:4,controlPanelProps:D.scatter,chart:e.chart},4===E&&m.a.createElement(Ia,{xValues:n.variableValues,yValues:n.depths,markerOptions:y,infoObject:n,xTitle:"".concat(r.Long_Name.length>60?r.Long_Name.slice(0,60)+"...":r.Long_Name),yTitle:"Depth[m]",type:"depth"})))})),Ba=Object(d.b)(null,Ra)(Object(f.a)((function(e){return{chartWrapper:{display:"inline-block",backgroundColor:V.a.backgroundGray,boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)",margin:"20px",color:"white"},buttonBlock:{display:"block"},tabs:{marginBottom:e.spacing(2)},tab:{boxShadow:"1px 1px 1px 1px #242424",fontSize:"15px",textTransform:"none",color:e.palette.primary.main}}}))(Va)),Ha={deleteChart:_.q},Ga=Object(f.a)({closeChartIcon:{float:"right",marginTop:"-12px",marginRight:"-8px"}})((function(e){var a=e.classes;return m.a.createElement(m.a.Fragment,null,m.a.createElement(C.a,{className:a.closeChartIcon,color:"inherit",onClick:function(){return e.handleDeleteChart(e.chartIndex)},disableFocusRipple:!0,disableRipple:!0},m.a.createElement(ea.a,null)))})),Ya=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).handleDeleteChart=function(a){e.props.deleteChart(a)},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.charts;a.plotsActiveTab;return m.a.createElement(m.a.Fragment,null,n.map((function(a,n){switch(a.data.parameters.spName){case b.a.spaceTime:return a.subType===g.a.sparse?m.a.createElement("div",{key:a.id},m.a.createElement(T.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Ga,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Ba,{chart:a}))):a.data.metadata.Spatial_Resolution===G.a.irregular?m.a.createElement("div",{key:a.id},m.a.createElement(T.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Ga,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Aa,{chart:a}))):m.a.createElement("div",{key:a.id},m.a.createElement(T.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Ga,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Da,{chart:a})));case b.a.timeSeries:return m.a.createElement("div",{key:a.id},m.a.createElement(T.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Ga,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Ta,{chart:a})));case b.a.depthProfile:return m.a.createElement("div",{key:a.id},m.a.createElement(T.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Ga,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Ma,{chart:a})));case b.a.sectionMap:return m.a.createElement("div",{key:a.id},m.a.createElement(T.a,{elevation:12,className:t.chartPaper,key:a.id},m.a.createElement(Ga,{chartIndex:n,handleDeleteChart:e.handleDeleteChart}),m.a.createElement(Pa,{chart:a})));default:return""}})))}}]),t}(u.Component),Ua=Object(d.b)((function(e,a){return{charts:e.charts,plotsActiveTab:e.plotsActiveTab}}),Ha)(Object(f.a)((function(e){return{chartPaper:{backgroundColor:V.a.backgroundGray,marginBottom:"5h",paddingTop:e.spacing(1),boxShadow:"2px 2px 2px 2px #242424",width:"max-content",margin:"0 auto 5vh auto","@media (min-width: 1280px)":{textAlign:"left",margin:"0 0 5vh 360px"}}}}))(Ya)),Wa=t(846),qa={type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:[0,255,255,.3]},outline:{color:[0,255,255,1],size:"2px"}}]},Ka={type:"line-3d",symbolLayers:[{type:"line",size:"3px",material:{color:{r:0,g:255,b:255,a:0}}}]},Qa=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).shouldComponentUpdate=function(e,a){return!1},n.sketchModel=new e.esriModules.SketchViewModel({layer:e.regionLayer,view:e.view,polygonSymbol:qa,polylineSymbol:Ka,defaultUpdateOptions:{toggleToolOnClick:!1,tool:"transform"}}),n}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props.view;return e.ui.remove("zoom"),e.ui.remove("navigation-toggle"),e.ui.remove("compass"),e.ui.remove("attribution"),null}}]),t}(m.a.Component),Za=m.a.memo((function(e){var a=e.cruiseTrajectory,t=e.trajectoryLayer,n=e.esriModules;if(a){var r=a.lons,o=a.lats,l=Math.floor(r.length/2);t.removeAll();var s=[[]],i=0,c=r[0],p=o[0],u=0;r.forEach((function(e,a){var t=o[a],n=Math.abs(t-p),l=Math.abs(e-c),m=l>180?360-l:l,d=Math.sqrt(n*n+m*m);u=d>u?d:u,s[i].push([e,t]),a<r.length-1&&(e>160&&e<180&&r[a+1]>-180&&r[a+1]<-160&&(s.push([]),i++),e>-180&&e<-160&&e[a+1]>160&&e[a+1]<180&&(s.push([]),i++))}));var m={type:"line-3d",symbolLayers:[{type:"line",material:{color:[0,255,255,1]},cap:"round",join:"round",size:2}]};s.forEach((function(e){var a={type:"polyline",paths:e},r=new n.Graphic({geometry:a,symbol:m});t.add(r)}));try{var d=[r[l],o[l]],h=7-Math.floor(u/6);e.view.goTo({target:d,zoom:h},{maxDuration:2500,speedFactor:.5})}catch(g){console.log(g)}}else t.removeAll(),e.view.goTo({target:[-140,30],zoom:3},{maxDuration:2500,speedFactor:.5});return""})),Ja=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).render=function(){var e=n.props,a=e.classes,t=e.esriModules,r=e.cruiseTrajectory,o=e.globeUIRef;return m.a.createElement("div",{className:a.container,id:"found-you"},m.a.createElement(Wa.a,{mapProperties:{basemap:"satellite",layers:[n.regionLayer,n.trajectoryLayer]},viewProperties:{center:[-140,30],zoom:3,highlightOptions:{haloOpacity:0,haloColor:"rgba(0, 0, 0, 0)",fillOpacity:0,color:"rgba(0, 0, 0, 0)"}}},m.a.createElement(Za,{cruiseTrajectory:r,trajectoryLayer:n.trajectoryLayer,esriModules:t}),m.a.createElement(Qa,{updateDomainFromGraphicExtent:n.props.updateDomainFromGraphicExtent,esriModules:t,measurementPositions:n.props.measurementPositions,regionLayer:n.regionLayer,setShowHelp:function(e){return n.setState(Object(l.a)(Object(l.a)({},n.state),{},{showHelp:e}))},ref:o})))},n.state={showHelp:!1},n.regionLayer=new e.esriModules.GraphicsLayer,n.trajectoryLayer=new e.esriModules.GraphicsLayer,n}return t}(u.Component),Xa=Object(f.a)((function(e){return{container:{margin:"0 auto 0 auto",width:"100vw",height:"100vh"}}}))(Ja),$a=function(e){var a=e.getFullYear(),t=e.getMonth()+1,n=e.getDate();return a.toString()+"-"+(t<10?"0"+t.toString():t.toString())+"-"+(n<10?"0"+n.toString():n.toString())},et=function(e){var a=new Date(e),t=a.getUTCFullYear(),n=a.getUTCMonth(),r=a.getUTCDate(),o=new Date;return o.setFullYear(t,n,r),o},at=t(652),tt=Object(f.a)((function(e){return{dialogPaper:{backgroundColor:"black",width:"400px",height:"180px"},button:{textTransform:"none",marginLeft:"20px",marginTop:"24px"}}}))(Object(h.f)((function(e){var a=e.history,t=e.classes;return m.a.createElement(m.a.Fragment,null,m.a.createElement(de.a,{open:!0,PaperProps:{className:t.dialogPaper}},m.a.createElement(he.a,null,"Select a Visualization Module"),m.a.createElement(ge.a,null,m.a.createElement(D.a,{variant:"outlined",onClick:function(){return a.push("/visualization/charts")},className:t.button,color:"primary"},"Charts and Plots"),m.a.createElement(D.a,{variant:"outlined",onClick:function(){return a.push("/visualization/cruises")},color:"primary",className:t.button},"Explore Cruises"))))}))),nt=t(59),rt=t(703),ot=function(e,a){var t={};return a.forEach((function(e){return t[e]=new Set})),e.forEach((function(e){a.forEach((function(a){Array.isArray(e[a])?e[a].forEach((function(e){return t[a].add(e)})):e[a]&&t[a].add(e[a])}))})),t},lt={cruiseListRequestSend:_.f,cruiseTrajectoryRequestSend:_.j,cruiseTrajectoryClear:_.h},st='"Avenir Next W00","Helvetica Neue",Helvetica,Arial,sans-serif',it=function(e,a,t,n,r,o,l){e=Object(nt.a)(e),a&&(e=l.search(a)),t&&t.size&&(e=e.filter((function(e){return t.has(e.Year)}))),n&&n.size&&(e=e.filter((function(e){return n.has(e.Chief_Name)}))),r&&r.size&&(e=e.filter((function(e){return e.Regions.some((function(e){return r.has(e)}))}))),o&&o.size&&(e=e.filter((function(e){return o.has(e.Series)})));var s=e.reduce((function(e,a){return e[a.Year]||(e[a.Year]=[]),e[a.Year].push(a),e}),{});return{cruisesGroupedByYear:s=Object.keys(s).map((function(e){return{year:e,cruises:s[e]}})).sort((function(e,a){return e.year<a.year?1:-1})),cruises:e}},ct={selectedYears:new Set,selectedChiefScientists:new Set,selectedRegions:new Set,searchField:"",openYearGroup:null,selectedSeries:new Set},pt=(new Set,new Set,new Set,new Set,m.a.createRef()),ut=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(e){var n;Object(s.a)(this,t),(n=a.call(this,e)).componentDidMount=function(){n.props.handleShowGlobe(),n.props.cruiseList&&n.props.cruiseList.length||n.props.cruiseListRequestSend()},n.componentWillUnmount=function(){n.props.cruiseTrajectoryClear()},n.handleCruiseSelect=function(e){e&&n.props.cruiseTrajectoryRequestSend(e.ID),n.setState(Object(l.a)(Object(l.a)({},n.state),{},{selectedCruise:e,searchMenuOpen:!1}))},n.componentDidUpdate=function(e,a){if((!e.cruiseList||!e.cruiseList.length)&&n.props.cruiseList&&n.props.cruiseList.length){n.state.search.addDocuments(n.props.cruiseList);var t=it(n.props.cruiseList,"",new Set,new Set,new Set,new Set,n.state.search),r=t.cruisesGroupedByYear,o=t.cruises,s=ot(o,["Chief_Name","Year","Regions","Series"]);n.setState(Object(l.a)(Object(l.a)({},n.state),{},{cruisesGroupedByYear:r,cruises:o,optionSets:s}))}a.cruisesGroupedByYear!==n.state.cruisesGroupedByYear&&pt.current.resetAfterIndex(0)},n.handleChangeSearchValue=function(e){var a=it(n.props.cruiseList,e.target.value,n.state.selectedYears,n.state.selectedChiefScientists,n.state.selectedRegions,n.state.selectedSeries,n.state.search),t=a.cruisesGroupedByYear,r=a.cruises,o=ot(r,["Chief_Name","Year","Regions","Series"]),s=Object(l.a)({},n.state.optionSets),i={Chief_Name:n.state.selectedChiefScientists.size?s.Chief_Name:o.Chief_Name,Year:n.state.selectedYears.size?s.Year:o.Year,Regions:n.state.selectedRegions.size?s.Regions:o.Regions,Series:n.state.selectedSeries.size?s.Series:o.Series};n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchField:e.target.value,cruisesGroupedByYear:t,cruises:r,optionSets:i}))},n.handleCloseSearch=function(){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{searchMenuOpen:!1}))},n.handleClearMultiSelect=function(e){var a=Object(l.a)(Object(l.a)({},n.state),{},{[e]:new Set}),t=it(n.props.cruiseList,a.searchField,a.selectedYears,a.selectedChiefScientists,a.selectedRegions,a.selectedSeries,n.state.search),r=t.cruisesGroupedByYear,o=t.cruises,s=ot(o,["Chief_Name","Year","Regions","Series"]);n.setState(Object(l.a)(Object(l.a)({},a),{},{cruisesGroupedByYear:r,cruises:o,optionSets:s}))},n.handleResetSearch=function(){var e=Object(l.a)(Object(l.a)({},n.state),ct),a=it(n.props.cruiseList,e.searchField,e.selectedYears,e.selectedChiefScientists,e.selectedRegions,e.selectedSeries,n.state.search),t=a.cruisesGroupedByYear,r=a.cruises,o=ot(r,["Chief_Name","Year","Regions","Series"]);n.setState(Object(l.a)(Object(l.a)({},e),{},{cruisesGroupedByYear:t,cruises:r,optionSets:o}))},n.handleClickCheckbox=function(e,a){var t=e.target.name.split("!!"),r=Object(x.a)(t,2),o=r[0],s=r[1],i=new Set(n.state[o]);a?i.add(s):i.delete(s);var c=Object(l.a)(Object(l.a)({},n.state),{},{[o]:i}),p=it(n.props.cruiseList,e.target.value,c.selectedYears,c.selectedChiefScientists,c.selectedRegions,c.selectedSeries,n.state.search),u=p.cruisesGroupedByYear,m=p.cruises,d=ot(m,["Chief_Name","Year","Regions","Series"]),h=Object(l.a)({},n.state.optionSets),g={Chief_Name:c.selectedChiefScientists.size?h.Chief_Name:d.Chief_Name,Year:c.selectedYears.size?h.Year:d.Year,Regions:c.selectedRegions.size?h.Regions:d.Regions,Series:c.selectedSeries.size?h.Series:d.Series};n.setState(Object(l.a)(Object(l.a)({},c),{},{cruisesGroupedByYear:u,cruises:m,optionSets:g}))},n.handleSetopenYearGroup=function(e,a){if(pt.current){var t=n.props.windowHeight-249,r=pt.current.state.scrollOffset,o=38*e;null!==e&&(o<r-10||o>r+t-20)&&setTimeout((function(){return pt.current.scrollToItem(e,"start")}),10),pt.current.resetAfterIndex(0)}n.setState(Object(l.a)(Object(l.a)({},n.state),{},{openYearGroup:n.state.openYearGroup===a?null:a}))};var r=new rt.Search("ID");r.searchIndex=new rt.UnorderedSearchIndex,r.addIndex("Nickname"),r.addIndex("Name"),r.addIndex("Chief_Name"),r.addIndex("Keywords");try{e.cruiseList&&e.cruiseList.length&&r.addDocuments(e.cruiseList)}catch(u){console.log(u),console.log(e.cruiseList)}var o=n.props.cruiseList&&n.props.cruiseList.length?it(e.cruiseList,"",new Set,new Set,new Set,new Set,r):{cruisesGroupedByYear:[],cruises:[]},i=o.cruisesGroupedByYear,c=o.cruises,p=ot(c,["Chief_Name","Year","Regions","Series"]);return n.state=Object(l.a)({search:r,selectedCruise:null,searchMenuOpen:!1,cruisesGroupedByYear:i,cruises:c,optionSets:p},ct),n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.searchField,n=a.selectedCruise,r=a.searchMenuOpen,o=a.selectedYears,s=a.selectedChiefScientists,i=a.selectedRegions,c=a.selectedSeries,p=a.openYearGroup,u=a.optionSets,d=a.cruisesGroupedByYear,h=a.cruises,g=this.props,b=g.classes,f=g.windowHeight;return m.a.createElement(m.a.Fragment,null,m.a.createElement(T.a,{className:b.searchMenuPaper,style:r?{}:{display:"none"}},m.a.createElement(w.a,{container:!0},m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(A.a,{style:{display:"inline-block"}},"Search and filter using the controls on the left. Select a cruise from the list on the right."),m.a.createElement(D.a,{startIcon:m.a.createElement(le.a,{style:{fontSize:"22px"}}),onClick:this.handleCloseSearch,className:b.closeIcon},"Close")),m.a.createElement(w.a,{item:!0,xs:4,style:{overflowY:"auto",maxHeight:f-204,padding:"16px",backgroundColor:"rgba(0,0,0,.4)"}},m.a.createElement(N.a,{fullWidth:!0,name:"searchTerms",onChange:this.handleChangeSearchValue,placeholder:"Search",value:t,InputProps:{classes:{root:b.inputRoot},startAdornment:m.a.createElement(m.a.Fragment,null,m.a.createElement($.a,{position:"start"},m.a.createElement(P.a,{style:{color:V.a.primary}})))},variant:"outlined"}),m.a.createElement(Ce.a,{options:Array.from(u.Regions).sort(),selectedOptions:i,handleClear:function(){return e.handleClearMultiSelect("selectedRegions")},parentStateKey:"selectedRegions",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Region"}),m.a.createElement(Ce.a,{options:Array.from(u.Year).sort((function(e,a){return e<a?1:-1})),selectedOptions:o,handleClear:function(){return e.handleClearMultiSelect("selectedYears")},parentStateKey:"selectedYears",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Year"}),m.a.createElement(Ce.a,{options:Array.from(u.Chief_Name).sort(),selectedOptions:s,handleClear:function(){return e.handleClearMultiSelect("selectedChiefScientists")},parentStateKey:"selectedChiefScientists",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Chief Scientist"}),m.a.createElement(Ce.a,{options:Array.from(u.Series).sort(),selectedOptions:c,handleClear:function(){return e.handleClearMultiSelect("selectedSeries")},parentStateKey:"selectedSeries",handleClickCheckbox:this.handleClickCheckbox,groupHeaderLabel:"Cruise Series"}),m.a.createElement(w.a,{item:!0,xs:12,className:b.searchPanelRow},m.a.createElement(D.a,{variant:"outlined",onClick:this.handleResetSearch,className:b.resetButton},"Reset Filters"))),m.a.createElement(w.a,{item:!0,xs:8,style:{paddingTop:"12px"}},m.a.createElement(w.a,{container:!0},m.a.createElement(w.a,{item:!0,xs:9},m.a.createElement(A.a,{className:b.heading},"Showing ",h.length," cruises (grouped by year)")),m.a.createElement(w.a,{item:!0,xs:3,container:!0,justify:"flex-start",alignItems:"center"},m.a.createElement(A.a,{variant:"caption",style:{color:V.a.primary,marginBottom:"-16px"}},"Cruise Count"))),m.a.createElement(ce.b,{ref:pt,itemData:d,itemCount:d.length,height:f-249,width:"100%",estimatedItemSize:38,style:{overflowY:"scroll"},itemSize:function(e){return p===d[e].year?32*d[e].cruises.length+38+4+10:38}},(function(a){var t=a.index,n=a.style;return m.a.createElement("div",{style:n},m.a.createElement(w.a,{container:!0,className:b.searchOption,onClick:function(){return e.handleSetopenYearGroup(t,d[t].year)}},m.a.createElement(w.a,{item:!0,xs:2,container:!0,alignItems:"center"},p===d[t].year?m.a.createElement(se.a,{className:b.datasetOpenIcon}):m.a.createElement(k.a,{className:b.datasetOpenIcon}),m.a.createElement("span",{className:b.searchOptionsMenuItemText},d[t].year)),m.a.createElement(w.a,{item:!0,xs:7}),m.a.createElement(E.a,{title:"".concat(d[t].cruises.length," cruises from this year match the search criteria")},m.a.createElement(w.a,{item:!0,xs:1,className:b.memberCount,container:!0,alignItems:"center",justify:"center"},d[t].cruises.length))),d[t].year===p?m.a.createElement(w.a,{container:!0,className:b.variablesWrapper},m.a.createElement(w.a,{item:!0,container:!0,alignItems:"center"},m.a.createElement(w.a,{item:!0,xs:1}," "),m.a.createElement(w.a,{item:!0,xs:2,className:b.cruiseYearHeader},"Official Designation"),m.a.createElement(w.a,{item:!0,xs:8,className:b.cruiseYearHeader},"Nickname")),d[t].cruises.map((function(a,t){return m.a.createElement(w.a,{item:!0,xs:12,key:a.Name,className:b.variableItem,container:!0,alignItems:"center",onClick:function(){return e.handleCruiseSelect(a)}},m.a.createElement(w.a,{item:!0,xs:1}),m.a.createElement(w.a,{item:!0,xs:2,className:b.cruiseName},a.Name),m.a.createElement(E.a,{title:a.Nickname,enterDelay:300},m.a.createElement(w.a,{item:!0,xs:8,className:b.cruiseName},a.Nickname)))}))):"")}))))),m.a.createElement("div",{id:"cruise-selector",className:b.outerDiv},m.a.createElement(T.a,{className:b.openSearchButtonPaper},m.a.createElement(D.a,{startIcon:m.a.createElement(P.a,null),className:b.openSearchButton,onClick:function(){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{searchMenuOpen:!0}))}},"Search Cruises")),n&&m.a.createElement(m.a.Fragment,null,m.a.createElement(Pe.a,{size:"small",className:b.cruiseInfo},m.a.createElement(ze.a,null,m.a.createElement(je.a,null,m.a.createElement(Ie.a,{className:b.cruiseInfoCell},"Cruise:"),m.a.createElement(Ie.a,{className:b.cruiseInfoCell},n.Name)),m.a.createElement(je.a,null,m.a.createElement(Ie.a,{className:b.cruiseInfoCell},"Nickname:"),m.a.createElement(Ie.a,{className:b.cruiseInfoCell},n.Nickname)),n.Start_Time&&m.a.createElement(je.a,null,m.a.createElement(Ie.a,{className:b.cruiseInfoCell},"Start Date:"),m.a.createElement(Ie.a,{className:b.cruiseInfoCell},n.Start_Time.slice(0,10))),n.End_Time&&m.a.createElement(je.a,null,m.a.createElement(Ie.a,{className:b.cruiseInfoCell},"End Date:"),m.a.createElement(Ie.a,{className:b.cruiseInfoCell},n.End_Time.slice(0,10))),n.Chief_Name&&m.a.createElement(je.a,null,m.a.createElement(Ie.a,{className:b.cruiseInfoCell},"Chief Scientist:"),m.a.createElement(Ie.a,{className:b.cruiseInfoCell},n.Chief_Name)),n.Ship_Name&&m.a.createElement(je.a,null,m.a.createElement(Ie.a,{className:b.cruiseInfoCell},"Ship:"),m.a.createElement(Ie.a,{className:b.cruiseInfoCell},n.Ship_Name)))),m.a.createElement("div",{className:b.linkWrapper},m.a.createElement(ee.a,{component:We.b,to:"/catalog/cruises/".concat(n.Name),target:"_blank"},"Open Cruise Catalog Page")))))}}]),t}(u.Component),mt=Object(d.b)((function(e,a){return{cruiseList:e.cruiseList,getCruiseListState:e.getCruiseListState,windowHeight:e.windowHeight}}),lt)(Object(f.a)((function(e){return{outerDiv:{padding:"12px",maxWidth:"360px",backgroundColor:"transparent",color:"white",borderRadius:"4px",boxShadow:"2px",backdropFilter:"blur(2px)",transform:"translateY(35px)",marginTop:"24px",position:"fixed",left:0,top:140},cruiseInfo:{color:"white",fontFamily:st,margin:"12px auto 0 auto"},cruiseInfoCell:{color:"white",fontFamily:st,borderStyle:"none"},linkWrapper:{padding:"12px",fontSize:"14px"},searchMenuPaper:{position:"fixed",top:120,bottom:60,left:0,width:"98vw",height:"auto",zIndex:1500,backgroundColor:"rgba(0,0,0,.6)",backdropFilter:"blur(5px)"},closeIcon:{float:"right",cursor:"pointer",color:V.a.primary,textTransform:"none",fontSize:"15px"},inputRoot:{border:"1px solid ".concat(V.a.primary)},openSearchButtonPaper:{backgroundColor:V.a.backgroundGray,boxShadow:"1px 1px 1px 1px #242424"},openSearchButton:{textTransform:"none",color:V.a.primary,fontSize:"15px",padding:"6px 42px"},resetButton:{textTransform:"none",width:"160px",height:"37px",color:e.palette.primary.main,borderColor:e.palette.primary.main,marginTop:"12px"},yearHeader:{backgroundColor:"rgba(0, 0, 0, .7)",height:"36px",fontSize:"17px",display:"flex",alignItems:"center",justifyCOntent:"center"},searchOption:{"&:hover":{backgroundColor:V.a.greenHover},cursor:"pointer",height:"38px",boxShadow:"0px 1px 1px 1px #242424",backgroundColor:"rgba(0,0,0,.4)"},memberCount:{color:V.a.primary,fontWeight:"bold"},variablesWrapper:{backgroundColor:"rgba(0,0,0,.2)",paddingTop:"6px"},variableItem:{height:"32px",textAlign:"left",fontSize:"14px",cursor:"pointer","&:hover":{backgroundColor:V.a.greenHover}},cruiseName:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},heading:{textAlign:"left",padding:"8px 6px",color:V.a.primary,fontSize:"16px",marginTop:"5px",backgroundColor:"rgba(0,0,0,.4)"},cruiseYearHeader:{textAlign:"left",fontSize:"9px",color:V.a.primary}}}))(ut)),dt=function(e){return{[g.a.sectionMap]:{sp:b.a.sectionMap,subType:g.a.sectionMap},[g.a.contourSectionMap]:{sp:b.a.sectionMap,subType:g.a.contourSectionMap},[g.a.timeSeries]:{sp:b.a.timeSeries,subType:g.a.timeSeries},[g.a.histogram]:{sp:b.a.spaceTime,subType:g.a.histogram},[g.a.depthProfile]:{sp:b.a.depthProfile,subType:g.a.depthProfile},[g.a.heatmap]:{sp:b.a.spaceTime,subType:g.a.heatmap},[g.a.contourMap]:{sp:b.a.spaceTime,subType:g.a.contourMap},[g.a.sparse]:{sp:b.a.spaceTime,subType:g.a.sparse}}[e]},ht={showLoginDialog:F.l,queryRequestSend:_.x,retrievalRequestSend:Oe.p,storedProcedureRequestSend:_.E,snackbarOpen:F.n,cruiseListRequestSend:_.f,completedShowCharts:_.c,datasetRetrievalRequestSend:Oe.l,plotsActiveTabSet:_.v,guestPlotLimitNotificationSetIsVisible:_.s},gt={tableName:"",fields:null,depth1:0,depth2:0,dt1:new Date,dt2:new Date,lat1:0,lat2:0,lon1:0,lon2:0,selectedVizType:""},bt=function(e){Object(c.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).globeUIRef=m.a.createRef(),e.mapContainerRef=m.a.createRef(),e.state={filteredData:[],opacity:1,showCharts:!1,showUI:!1,surfaceOnly:!1,irregularSpatialResolution:!1,showCruiseControl:!1,spParams:gt},e.componentWillUnmount=function(){document.title=at.a.default.title,document.description=at.a.default.description},e.handleChange=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{[a.target.name]:a.target.value})}))},e.handleLatLonChange=function(a){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{[a.target.name]:a.target.value})}))},e.handleStartDateChange=function(a){if(a){var t=new Date;t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{dt1:t})}))}},e.handleEndDateChange=function(a){if(a){var t=new Date;t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{dt2:t})}))}},e.onVisualize=function(){var a=e.state.spParams,t=a.depth1,n=a.depth2,r=a.dt1,o=a.dt2,l=a.lat1,s=a.lat2,i=a.lon1,c=a.lon2,p=a.selectedVizType,u=dt(p),m={parameters:Z({depth1:t,depth2:n,dt1:$a(r),dt2:$a(o),lat1:l,lat2:s,lon1:i,lon2:c,fields:e.state.spParams.fields&&e.state.spParams.fields.value,tableName:e.state.spParams.fields&&e.state.spParams.tableName,spName:u.sp}),subType:u.subType,metadata:e.state.spParams.fields&&e.state.spParams.fields.data};e.props.storedProcedureRequestSend(m)},e.handlePlotsSetActiveTab=function(a,t){e.props.plotsActiveTabSet(t)},e.updateFields=function(a){if(a){var t=!a.data.Depth_Max,n="Irregular"===a.data.Spatial_Resolution,r=et(a.data.Time_Max);r.setDate(r.getDate()+1);var o=a.data.Temporal_Resolution===Y.a.monthlyClimatology?e.state.spParams.dt1:et(a.data.Time_Min),s=a.data.Temporal_Resolution===Y.a.monthlyClimatology?e.state.spParams.dt2:n?r:et(a.data.Time_Min),i=Math.floor(1e3*a.data.Lat_Min)/1e3,c=Math.ceil(1e3*a.data.Lat_Max)/1e3,p=Math.floor(1e3*a.data.Lon_Min)/1e3,u=Math.ceil(1e3*a.data.Lon_Max)/1e3,m=n?i:e.state.spParams.lat1,d=n?c:e.state.spParams.lat2,h=n?p:e.state.spParams.lon1,g=n?u:e.state.spParams.lon2,b=n?a.data.Depth_Min||0:q.a.piscesTable.has(a.data.Table_Name)||q.a.darwinTable.has(a.data.Table_Name)?0:e.state.spParams.depth1,f=n?a.data.Depth_Max||0:q.a.piscesTable.has(a.data.Table_Name)?((q.a.piscesDepths[0]+q.a.piscesDepths[1])/2).toFixed(2):q.a.darwinTable.has(a.data.Table_Name)?(q.a.darwinDepths[0]+q.a.darwinDepths[1])/2:e.state.spParams.depth2;n&&e.globeUIRef.current.props.view.goTo({target:[(parseFloat(h)+parseFloat(g))/2,(parseFloat(m)+parseFloat(d))/2],zoom:3},{maxDuration:2500,speedFactor:.5});var x=a.data.Table_Name;e.setState(Object(l.a)(Object(l.a)({},e.state),{},{surfaceOnly:t,irregularSpatialResolution:n,spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{fields:a,dt1:o,dt2:s,lat1:m,lat2:d,lon1:h,lon2:g,depth1:b,depth2:f,tableName:x,selectedVizType:""})}))}else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),{},{fields:a,tableName:""})}))},e.handleShowCharts=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showCharts:!0}))},e.handleShowGlobe=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showCharts:!1}))},e.handleShowCruiseControl=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showCruiseControl:!e.state.showCruiseControl}))},e.toggleShowUI=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showUI:!e.state.showUI}))},e.updateDomainFromGraphicExtent=function(a){for(var t=a.xmin;t<-180;)t+=360;for(;t>180;)t-=360;for(var n=a.xmax;n<-180;)n+=360;for(;n>180;)n-=360;var r={lat1:a.ymin.toFixed(3),lat2:a.ymax.toFixed(3),lon1:t.toFixed(3),lon2:n.toFixed(3)};e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:Object(l.a)(Object(l.a)({},e.state.spParams),r)}))},e.resetSPParams=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{spParams:gt}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var a,t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title=at.a.visualization.title,document.description=at.a.visualization.description,a=["AreaMeasurement3D","Search","GraphicsLayer","SketchViewModel","Utils","Graphic"],e.next=5,Object(Je.loadModules)(["esri/widgets/AreaMeasurement3D","esri/widgets/Search","esri/layers/GraphicsLayer","esri/widgets/Sketch/SketchViewModel","esri/geometry/support/webMercatorUtils","esri/Graphic"],{version:"4.14"});case 5:t=e.sent,n=a.reduce((function(e,a,n){return e[a]=t[n],e}),{}),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{esriModules:n}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.showChartsOnce&&(this.props.completedShowCharts(),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{showCharts:!0})))}},{key:"render",value:function(){var e=this,a=this.props.classes;return m.a.createElement("div",{className:a.vizWrapper},m.a.createElement(Ze,null),this.state.esriModules&&m.a.createElement("div",{className:"".concat(0===this.props.plotsActiveTab?"":a.displayNone)},m.a.createElement(Xa,{globeUIRef:this.globeUIRef,updateDomainFromGraphicExtent:this.updateDomainFromGraphicExtent,esriModules:this.state.esriModules,spParams:this.state.spParams,cruiseTrajectory:this.props.cruiseTrajectory,showCruiseControl:this.state.showCruiseControl,chartControlPanelRef:this.chartControlPanelRef,ref:this.mapContainerRef})),m.a.createElement(h.c,null,m.a.createElement(h.a,{exact:!0,path:"/visualization",component:tt}),m.a.createElement(h.a,{path:"/visualization/charts",render:function(a){return m.a.createElement(Ue,Object.assign({},a,{toggleChartView:e.toggleChartView,toggleShowUI:e.toggleShowUI,handleChange:e.handleChange,handleLatLonChange:e.handleLatLonChange,handleStartDateChange:e.handleStartDateChange,handleEndDateChange:e.handleEndDateChange,showUI:e.state.showUI,onVisualize:e.onVisualize,updateFields:e.updateFields},e.state.spParams,{surfaceOnly:e.state.surfaceOnly,irregularSpatialResolution:e.state.irregularSpatialResolution,showCharts:e.state.showCharts,handleShowCharts:e.handleShowCharts,handleShowGlobe:e.handleShowGlobe,resetSPParams:e.resetSPParams,handleShowCruiseControl:e.handleShowCruiseControl,showCruiseControl:e.state.showCruiseControl,globeUIRef:e.globeUIRef,mapContainerRef:e.mapContainerRef,handlePlotsSetActiveTab:e.handlePlotsSetActiveTab,plotsActiveTab:e.props.plotsActiveTab}))}}),m.a.createElement(h.a,{path:"/visualization/cruises",render:function(a){return m.a.createElement(mt,{handleShowGlobe:function(){return e.handlePlotsSetActiveTab(null,0)}})}})),m.a.createElement("div",{className:0===this.props.plotsActiveTab?a.displayNone:a.showCharts},m.a.createElement(Ua,null)))}}]),t}(u.Component);a.default=Object(d.b)((function(e,a){return{user:e.user,sampleData:e.sampleData,queryRequestState:e.queryRequestState,maps:e.maps,charts:e.charts,data:e.data,loadingMessage:e.loadingMessage,cruiseTrajectory:e.cruiseTrajectory,cruiseList:e.cruiseList,showChartsOnce:e.showChartsOnce,datasets:e.datasets,catalog:e.catalog,plotsActiveTab:e.plotsActiveTab,userIsGuest:e.userIsGuest}}),ht)(Object(f.a)((function(e){return{displayNone:{display:"none"},background:{backgroundColor:V.a.backgroundGray},showCharts:{display:"inline-block",paddingTop:"180px",width:"calc(100vw - 10px)",textAlign:"left"},vizWrapper:{minHeight:"100vh",background:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdcAAAEZCAIAAABKBPhSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAStSURBVHhe7d1Lb1NHFADgzFw/YucFzoNGhQURSDwVqVWhUBCbZMUP6Y/gNyLEAqkSbKiEqorIIbEdx8/0hs6WLlrXz++T5bnnzNLy0blz7ZklZlGI8faDBz88e5ZiYGZlaWTW9Lrdxpcv7VYrxQCMVbiUrgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBfytIIExJCKFcqF1+lFCySmEaYhLwEL1erTw8Pt65dSylYMHphJixvgVuNxmm93u/3UwqAcco74nQFAAAAAAAAAAAAAAAAAAAAwH+TZVm5UrGfA4yfnS253Exna3f36cFBaXk5pYBxsbMllwb9fuPkpHlyYqt1GLOR3YHm/VSxXK7t7PS63dN6PX9PE8yI/BNUgmH8RtYLxyy7srn588FBbXv7pF4/azbTBADfNrJ14RjjRq32y+HhTy9ebO/upiwA/2h068L5DW0I9aOj3968+f39+875ecoD8G2jXBcuFIvV1dXBYNButQbOEAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWVJZGplgI4freXqlcPms2UwqYFzGNTLMQVtfXl6vVFAIwZiHGvCNOAQAAAMw8T+dgehVLpb07d7qdTv5KKeaOp3MwrUKIWbZRq+W1OGUAGLPowSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHZz+CcyMEMLW1tVCodDpdFNq9jn9E5gZeRW+e3fvxo3vUgzAmFUq5VKpmAIAxsyB1AAAAAAAzDa/F4YFFWK8s7+/XK2eHh+nFJPg98KwqC4uWo3GebudQgDGLHyVAibEigQzoFQu57fPw+EwxTBHVGGmXYxx/8mTSrVa//w5pWCOqMLMgPN2+/T4uNvppBiAcbpcu7R8CQAAAAAAAKMRQtja3b2+t5diWBj+wcy0qFSrq+vrKQBgzC7/Sxu1BQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMI1CWNrYWLt//1axWEgp+D/FNAJJKJeLtdpGjL4dAJMQQlCCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAWQpXEuhBhLpdLG5mZ+PRwOLy4u/s4DTK25qsLFYrG2s/Pj8+f9fr/davW63TQBMK3mqgpXV1Zu3bv366tXvV7vz0+fTuv1NAEwreaqCscYs0Ihb4TfvX79x8ePnXY7TQBMq5DGuZBlWWVlpbazc1KvtxqNfq+XJgAAAAAAAAAAAAAAAAAAAAAAAAAAGL252l8YZkWpVNzevlqrbXQ63cFgmLIsJFUYJuDKlbVHjx4+fHj76Oi42TwbDp2RuLhiGoExWltbffx4/+XLFzdvfp9lmqGF5uOHCYgxnp423r378Pbt+1brzHnhi2yuTjyCWVEsFqrV5bwLbjRa/X5fEQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4NuWlv4CeM/T726poh8AAAAASUVORK5CYII=",")")}}}))(bt))}}]);
//# sourceMappingURL=15.83e542c9.chunk.js.map