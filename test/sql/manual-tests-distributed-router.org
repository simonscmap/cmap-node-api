#+Title: Manual Tests for Distributed Router

A set of queries executed by curl which test various cases of the distributed data router.

#+begin_src sh
    ## Queries

    simpleSelect="select top 10 * from tblchl_rep"

    simpleFail="select top 10 * from table_does_not_exist"

    simpleFail2="select top 10 * from tblDoes_Not_Exist"

    simpleFail3="not a query"

    joinQuery="SELECT distinct Subtrophic_Level as [title] from tblOrgTrophic_Level ot left join tblOrgSubtrophics s on s.Subtrophic_ID=ot.Subtrophic_ID select SubTrophic_Level as [title] from tblOrgSubTrophics"

    sprocQuery="EXEC uspSpaceTime 'tblArgo_MLD_Climatology', 'mld_da_median_argo_clim', '2014-12-10', '2014-12-10', 22.2743193899782, 23.2743193899782, -158.479283660131, -157.479283660131, 0, 10"

    sprocQuery2="EXEC uspSpaceTime '[tblDarwin_Nutrient]', '[*]', '1994-01-03', '1994-02-03', '80', '90', '150', '180', '0', '10'"

    clusterQuery="select * from tblMITgcm_SWOT_3D where time between '2012-10-12 00:00:00' and '2012-10-12 01:00:00' and lat between -57 and -56.5 and lon between 148 and 149 and depth between 100 and 120"

    clusterQuery2="with c1 as (select max(time) mx1 from tblMITgcm_SWOT_3D), c2 as (select max(time) mx2 from tblMITgcm_SWOT_2D) select * from c1, c2"

    failingMultiTableQuery="SELECT onRossby.[time]
      ,onRossby.[lat]
      ,onRossby.[lon]
      ,onRossby.[N_Samples]
      ,onRossby.[N_Stations]
      ,onRossby.[Cruise]
  FROM [Opedia].[dbo].[tbl48526781] onRossby
  INNER JOIN [Opedia].[dbo].[tblGeotraces_Seawater] onRainier
  ON onRossby.time = onRainier.time and onRossby.N_Samples = onRainier.N_Samples and onRossby.N_Stations = onRainier.N_Stations
  WHERE onRossby.cruise = 'GP12' and day(onRossby.time) = 22"




  # Provide Api Key and alter query reference to one of the queries above

  alias queryLocal="curl -ssLG -H \"Authorization: Api-Key <???>\" -X GET http://localhost:8080/api/data/query --data-urlencode \"query=$simpleSelect\""

  alias queryDev="curl -ssLG -i -H \"Authorization: Api-Key <???>\" -X GET http://simonscmap.dev/api/data/query --data-urlencode \"query=$simpleSelect\""

  alias queryMariana="curl -ssLG -i -H \"Authorization: Api-Key <???>\" -X GET http://localhost:8080/api/data/query --data-urlencode \"servername=mariana\" --data-urlencode \"query=$simpleSelect\""

#+end_src
